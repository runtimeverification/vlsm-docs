<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename">
	<script>
	  if (document.title === "Table of Contents") {
	      document.write("<a href='map.svg'>File dependency graph</a>");
	  } else if (document.title !== "Index") {
              document.write("<a href='" + document.title + ".svg'>" + document.title + " dependency graph</a>");
	  }
	</script>
      </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./../..">Project Website</a>
      <a href="./indexpage.html">Index</a>
      <a href="./toc.html">Table of Contents</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Lib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Lib.Itauto.html#"><span class="id" title="library">Itauto</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Logic.FunctionalExtensionality.html#"><span class="id" title="library">FunctionalExtensionality</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.Znumtheory.html#"><span class="id" title="library">ZArith.Znumtheory</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">stdpp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">prelude</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Lib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Lib.Preamble.html#"><span class="id" title="library">Preamble</span></a> <a class="idref" href="VLSM.Lib.StdppExtras.html#"><span class="id" title="library">StdppExtras</span></a> <a class="idref" href="VLSM.Lib.FinSuppFn.html#"><span class="id" title="library">FinSuppFn</span></a> <a class="idref" href="VLSM.Lib.NatExtras.html#"><span class="id" title="library">NatExtras</span></a> <a class="idref" href="VLSM.Lib.ListExtras.html#"><span class="id" title="library">ListExtras</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Core</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Core.VLSM.html#"><span class="id" title="library">VLSM</span></a> <a class="idref" href="VLSM.Core.PreloadedVLSM.html#"><span class="id" title="library">PreloadedVLSM</span></a> <a class="idref" href="VLSM.Core.ConstrainedVLSM.html#"><span class="id" title="library">ConstrainedVLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#"><span class="id" title="library">Composition</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Core</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Core.VLSMProjections.html#"><span class="id" title="library">VLSMProjections</span></a> <a class="idref" href="VLSM.Core.ProjectionTraces.html#"><span class="id" title="library">ProjectionTraces</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Examples</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#"><span class="id" title="library">Multiply</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab267"></a><h1 class="section">Tutorial: Primes Composition of VLSMs</h1>


<div class="paragraph"> </div>

  This module demonstrates some advanced concepts in the VLSM framework.

<div class="paragraph"> </div>

  We generalize the VLSMs defined in the module Multiply as a radix VLSM
  parameterized on a multiplier and study the composition of a family of
  such VLSMs.

<div class="paragraph"> </div>

  We then construct the VLSM composition consisting of a component for each prime
  number, characterize valid messages, and show that any component in
  the composition is a validator.

</div>
<div class="code">

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">Z_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_radix_vlsm" class="idref" href="#sec_radix_vlsm"><span class="id" title="section">sec_radix_vlsm</span></a>.<br/>

<br/>
</div>

<div class="doc">
  We parameterize a radix VLSM on an integer multiplier
  greater than one.

</div>
<div class="code">
<span class="id" title="keyword">Context</span><br/>
&nbsp;(<a id="multiplier:1" class="idref" href="#multiplier:1"><span class="id" title="binder">multiplier</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>)<br/>
&nbsp;(<a id="multiplier_gt_1:2" class="idref" href="#multiplier_gt_1:2"><span class="id" title="binder">multiplier_gt_1</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#multiplier:1"><span class="id" title="variable">multiplier</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> 1)<br/>
&nbsp;.<br/>

<br/>
</div>

<div class="doc">
<a id="lab268"></a><h2 class="section">Definition of the Radix VLSM</h2>


<div class="paragraph"> </div>

  The Radix VLSM will share the type and transition validity predicate of the
  multiplying VLSM and differ only by the fact that the only initial message
  is the <code>multiplier</code> parameter, and that it outputs its input multiplied by
  the <code>multiplier</code>.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="radix_transition" class="idref" href="#radix_transition"><span class="id" title="definition">radix_transition</span></a><br/>
&nbsp;&nbsp;(<a id="l:3" class="idref" href="#l:3"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#multiplying_label"><span class="id" title="definition">multiplying_label</span></a>) (<a id="st:4" class="idref" href="#st:4"><span class="id" title="binder">st</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#multiplying_state"><span class="id" title="definition">multiplying_state</span></a>) (<a id="om:5" class="idref" href="#om:5"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#multiplying_message"><span class="id" title="definition">multiplying_message</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#multiplying_state"><span class="id" title="definition">multiplying_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#multiplying_message"><span class="id" title="definition">multiplying_message</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#om:5"><span class="id" title="variable">om</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">j</span>  =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#st:4"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <span class="id" title="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_radix_vlsm.multiplier"><span class="id" title="variable">multiplier</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e"><span class="id" title="notation">*</span></a> <span class="id" title="var">j</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>    =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#st:4"><span class="id" title="variable">st</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
  We must also provide a proof that the intial state type
  is inhabited as the set of initial states is non-empty.

<div class="paragraph"> </div>


<div class="paragraph"> </div>

  An intermediate representation for the VLSM is required.
  It uses the previously defined specifications.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="radix_machine" class="idref" href="#radix_machine"><span class="id" title="definition">radix_machine</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMMachine"><span class="id" title="record">VLSMMachine</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#multiplying_type"><span class="id" title="definition">multiplying_type</span></a> :=<br/>
{|<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> := <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#multiplying_initial_state_prop"><span class="id" title="definition">multiplying_initial_state_prop</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a> := <span class="id" title="keyword">fun</span> (<a id="ms:7" class="idref" href="#ms:7"><span class="id" title="binder">ms</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#multiplying_message"><span class="id" title="definition">multiplying_message</span></a>) =&gt; <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#ms:7"><span class="id" title="variable">ms</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_radix_vlsm.multiplier"><span class="id" title="variable">multiplier</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#s0"><span class="id" title="projection">s0</span></a> := <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#multiplying_initial_state_type_inhabited"><span class="id" title="instance">multiplying_initial_state_type_inhabited</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> := <span class="id" title="keyword">fun</span> <a id="l:8" class="idref" href="#l:8"><span class="id" title="binder">l</span></a> '<a id="pat:11" class="idref" href="#pat:11"><span class="id" title="binder">(</span></a><a id="st:10" class="idref" href="#st:10"><span class="id" title="binder"><span id="pat:11" class="id">st</span></span></a><a id="pat:11" class="idref" href="#pat:11"><span class="id" title="binder">,</span></a> <a id="om:9" class="idref" href="#om:9"><span class="id" title="binder"><span id="pat:11" class="id">om</span></span></a><a id="pat:11" class="idref" href="#pat:11"><span class="id" title="binder">)</span></a> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#radix_transition"><span class="id" title="definition">radix_transition</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#l:8"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#st:10"><span class="id" title="variable">st</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#om:9"><span class="id" title="variable">om</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a> := <span class="id" title="keyword">fun</span> <a id="l:12" class="idref" href="#l:12"><span class="id" title="binder">l</span></a> '<a id="pat:15" class="idref" href="#pat:15"><span class="id" title="binder">(</span></a><a id="st:14" class="idref" href="#st:14"><span class="id" title="binder"><span id="pat:15" class="id">st</span></span></a><a id="pat:15" class="idref" href="#pat:15"><span class="id" title="binder">,</span></a> <a id="om:13" class="idref" href="#om:13"><span class="id" title="binder"><span id="pat:15" class="id">om</span></span></a><a id="pat:15" class="idref" href="#pat:15"><span class="id" title="binder">)</span></a> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#multiplying_valid"><span class="id" title="definition">multiplying_valid</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#l:12"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#st:14"><span class="id" title="variable">st</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#om:13"><span class="id" title="variable">om</span></a>;<br/>
|}.<br/>

<br/>
</div>

<div class="doc">
The definition of the Radix VLSM. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="radix_vlsm" class="idref" href="#radix_vlsm"><span class="id" title="definition">radix_vlsm</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#multiplying_message"><span class="id" title="definition">multiplying_message</span></a> :=<br/>
{|<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#vlsm_type"><span class="id" title="projection">vlsm_type</span></a> := <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#multiplying_type"><span class="id" title="definition">multiplying_type</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#vlsm_machine"><span class="id" title="projection">vlsm_machine</span></a> := <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#radix_machine"><span class="id" title="definition">radix_machine</span></a>;<br/>
|}.<br/>

<br/>
</div>

<div class="doc">
  To improve readability, we explicitly define <span class="inlinecode"><a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#radix_label"><span class="id" title="definition">radix_label</span></a></span> as the value of
  the unit type.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="radix_label" class="idref" href="#radix_label"><span class="id" title="definition">radix_label</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#multiplying_type"><span class="id" title="definition">multiplying_type</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Program.Syntax.html#f5cb26d96fc0400fc3c881290947e554"><span class="id" title="notation">()</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab269"></a><h2 class="section">Radix VLSM properties</h2>

<div class="paragraph"> </div>

<a id="lab270"></a><h3 class="section">Constrained messages are positives divisible by the multiplier</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="radix_constrained_messages_left" class="idref" href="#radix_constrained_messages_left"><span class="id" title="lemma">radix_constrained_messages_left</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="m:16" class="idref" href="#m:16"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#multiplying_message"><span class="id" title="definition">multiplying_message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_message_prop"><span class="id" title="definition">constrained_message_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#radix_vlsm"><span class="id" title="definition">radix_vlsm</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:16"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="j:17" class="idref" href="#j:17"><span class="id" title="binder">j</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:16"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_radix_vlsm.multiplier"><span class="id" title="variable">multiplier</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#j:17"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#j:17"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> 1.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">m</span> ([<span class="id" title="var">s</span> []] &amp; [] &amp; <span class="id" title="var">s'</span> &amp; (<span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> &amp; []) &amp; <span class="id" title="var">Ht</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">split</span>; [<span class="id" title="var">done</span> | <span class="id" title="var">lia</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="radix_constrained_messages_right" class="idref" href="#radix_constrained_messages_right"><span class="id" title="lemma">radix_constrained_messages_right</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="m:18" class="idref" href="#m:18"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#multiplying_message"><span class="id" title="definition">multiplying_message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="j:19" class="idref" href="#j:19"><span class="id" title="binder">j</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:18"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_radix_vlsm.multiplier"><span class="id" title="variable">multiplier</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#j:19"><span class="id" title="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:18"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_radix_vlsm.multiplier"><span class="id" title="variable">multiplier</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_message_prop"><span class="id" title="definition">constrained_message_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#radix_vlsm"><span class="id" title="definition">radix_vlsm</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:18"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">m</span> (<span class="id" title="var">j</span> &amp; <span class="id" title="var">Hj</span>) <span class="id" title="var">Hmgt0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_message_prop_direct"><span class="id" title="definition">constrained_message_prop_direct</span></a>, <a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>, <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#radix_label"><span class="id" title="definition">radix_label</span></a>, 0.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_is_valid"><span class="id" title="lemma">initial_state_is_valid</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">red</span>; <span class="id" title="var">nia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.PreloadedVLSM.html#any_message_is_valid_in_preloaded"><span class="id" title="lemma">any_message_is_valid_in_preloaded</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="var">nia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span>; <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">f_equal</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="radix_constrained_messages" class="idref" href="#radix_constrained_messages"><span class="id" title="lemma">radix_constrained_messages</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="m:20" class="idref" href="#m:20"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#multiplying_message"><span class="id" title="definition">multiplying_message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_message_prop"><span class="id" title="definition">constrained_message_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#radix_vlsm"><span class="id" title="definition">radix_vlsm</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:20"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="j:21" class="idref" href="#j:21"><span class="id" title="binder">j</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:20"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_radix_vlsm.multiplier"><span class="id" title="variable">multiplier</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#j:21"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#j:21"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#radix_constrained_messages_left"><span class="id" title="lemma">radix_constrained_messages_left</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> [? []]; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#radix_constrained_messages_right"><span class="id" title="lemma">radix_constrained_messages_right</span></a>; [<span class="id" title="tactic">exists</span> <span class="id" title="var">x</span> | <span class="id" title="var">nia</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab271"></a><h3 class="section">Constrained states property</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="radix_constrained_states_right" class="idref" href="#radix_constrained_states_right"><span class="id" title="lemma">radix_constrained_states_right</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="st:22" class="idref" href="#st:22"><span class="id" title="binder">st</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#multiplying_state"><span class="id" title="definition">multiplying_state</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#radix_vlsm"><span class="id" title="definition">radix_vlsm</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#st:22"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#st:22"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4"><span class="id" title="notation">&gt;=</span></a> 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1 <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop_ind"><span class="id" title="lemma">valid_state_prop_ind</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>; <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>, <span class="id" title="var">om</span>, <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [(<span class="id" title="var">Hs</span> &amp; <span class="id" title="var">_</span> &amp; []) <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="radix_constrained_states_left" class="idref" href="#radix_constrained_states_left"><span class="id" title="lemma">radix_constrained_states_left</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="st:23" class="idref" href="#st:23"><span class="id" title="binder">st</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#multiplying_state"><span class="id" title="definition">multiplying_state</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#st:23"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4"><span class="id" title="notation">&gt;=</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#radix_vlsm"><span class="id" title="definition">radix_vlsm</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#st:23"><span class="id" title="variable">st</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">st</span> <span class="id" title="var">Hst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_destination"><span class="id" title="lemma">input_valid_transition_destination</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<span class="id" title="var">l</span> := <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#radix_label"><span class="id" title="definition">radix_label</span></a>) (<span class="id" title="var">s</span> := <span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> 2) (<span class="id" title="var">om</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> 2) (<span class="id" title="var">om'</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (2 <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_radix_vlsm.multiplier"><span class="id" title="variable">multiplier</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; [| | <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.. | <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span>; <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">f_equal</span>; <span class="id" title="var">lia</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_is_valid"><span class="id" title="lemma">initial_state_is_valid</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">red</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.PreloadedVLSM.html#any_message_is_valid_in_preloaded"><span class="id" title="lemma">any_message_is_valid_in_preloaded</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="radix_constrained_states" class="idref" href="#radix_constrained_states"><span class="id" title="lemma">radix_constrained_states</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="st:24" class="idref" href="#st:24"><span class="id" title="binder">st</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#multiplying_state"><span class="id" title="definition">multiplying_state</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#radix_vlsm"><span class="id" title="definition">radix_vlsm</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#st:24"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#st:24"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4"><span class="id" title="notation">&gt;=</span></a> 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#radix_constrained_states_right"><span class="id" title="lemma">radix_constrained_states_right</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#radix_constrained_states_left"><span class="id" title="lemma">radix_constrained_states_left</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab272"></a><h3 class="section">Positive powers of the multiplier are valid messages</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="radix_valid_messages_powers_of_mult_right" class="idref" href="#radix_valid_messages_powers_of_mult_right"><span class="id" title="lemma">radix_valid_messages_powers_of_mult_right</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="m:25" class="idref" href="#m:25"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#multiplying_message"><span class="id" title="definition">multiplying_message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#radix_vlsm"><span class="id" title="definition">radix_vlsm</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:25"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="p:26" class="idref" href="#p:26"><span class="id" title="binder">p</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#p:26"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4"><span class="id" title="notation">&gt;=</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:25"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_radix_vlsm.multiplier"><span class="id" title="variable">multiplier</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#14ef112b66e341f773bd1e9d05816f43"><span class="id" title="notation">^</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#p:26"><span class="id" title="variable">p</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">m</span> [<span class="id" title="var">s</span> <span class="id" title="var">Hvsm</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hom</span> : <span class="id" title="definition">is_Some</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">m</span>)) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eexists</span>; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">m</span> <span class="id" title="keyword">with</span> (<span class="id" title="definition">is_Some_proj</span> <span class="id" title="var">Hom</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Hvsm</span> <span class="id" title="var">Hom</span>; <span class="id" title="tactic">generalize</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">m</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">om</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">Hvsm</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop_ind"><span class="id" title="definition">valid_state_message_prop_ind</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#option_initial_message_prop"><span class="id" title="definition">option_initial_message_prop</span></a>, <span class="id" title="definition">from_option</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hom</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hom</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">m</span> -&gt;]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> 1; <span class="id" title="tactic">split</span>; [<span class="id" title="var">lia</span> | <span class="id" title="tactic">f_equal</span>; <span class="id" title="var">lia</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">om</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">m</span> |]; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="var">edestruct</span> <span class="id" title="var">IHHvsm2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x</span> <span class="id" title="var">Hx</span>]; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hx</span> |- *; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hx</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hgeq1</span> -&gt;].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> 1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">by</span> <span class="id" title="var">lia</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.pow_succ_r"><span class="id" title="lemma">Z.pow_succ_r</span></a>; [| <span class="id" title="var">lia</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="radix_valid_messages_powers_of_mult_left" class="idref" href="#radix_valid_messages_powers_of_mult_left"><span class="id" title="lemma">radix_valid_messages_powers_of_mult_left</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="p:27" class="idref" href="#p:27"><span class="id" title="binder">p</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#p:27"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4"><span class="id" title="notation">&gt;=</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#radix_vlsm"><span class="id" title="definition">radix_vlsm</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_radix_vlsm.multiplier"><span class="id" title="variable">multiplier</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#14ef112b66e341f773bd1e9d05816f43"><span class="id" title="notation">^</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#p:27"><span class="id" title="variable">p</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">p</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hle</span> : 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> 1) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1) <span class="id" title="keyword">as</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">p</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Heqx</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">x</span> <span class="id" title="var">Hle</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.Wf_Z.html#natlike_ind"><span class="id" title="lemma">natlike_ind</span></a>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_message_is_valid"><span class="id" title="lemma">initial_message_is_valid</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="var">lia</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">Hxgt0</span> <span class="id" title="var">Hindh</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">msgin</span> := <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_radix_vlsm.multiplier"><span class="id" title="variable">multiplier</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#14ef112b66e341f773bd1e9d05816f43"><span class="id" title="notation">^</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#14ef112b66e341f773bd1e9d05816f43"><span class="id" title="notation">(</span></a><span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#14ef112b66e341f773bd1e9d05816f43"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#emitted_messages_are_valid"><span class="id" title="lemma">emitted_messages_are_valid</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">msgin</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_radix_vlsm.multiplier"><span class="id" title="variable">multiplier</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#14ef112b66e341f773bd1e9d05816f43"><span class="id" title="notation">^</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#14ef112b66e341f773bd1e9d05816f43"><span class="id" title="notation">(</span></a><span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#14ef112b66e341f773bd1e9d05816f43"><span class="id" title="notation">)</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>, <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#radix_label"><span class="id" title="definition">radix_label</span></a>, 0.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_is_valid"><span class="id" title="lemma">initial_state_is_valid</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">red</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hindh</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">replace</span> (<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> 1) <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.succ"><span class="id" title="definition">Z.succ</span></a> <span class="id" title="var">x</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.pow_succ_r"><span class="id" title="lemma">Z.pow_succ_r</span></a>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span>; <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.pow_succ_r"><span class="id" title="lemma">Z.pow_succ_r</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.add_succ_l"><span class="id" title="lemma">Z.add_succ_l</span></a>; [<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">f_equal</span>; <span class="id" title="var">lia</span> | <span class="id" title="var">lia</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="radix_valid_messages_powers_of_mult" class="idref" href="#radix_valid_messages_powers_of_mult"><span class="id" title="lemma">radix_valid_messages_powers_of_mult</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="m:28" class="idref" href="#m:28"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#multiplying_message"><span class="id" title="definition">multiplying_message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#radix_vlsm"><span class="id" title="definition">radix_vlsm</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:28"><span class="id" title="variable">m</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="p:29" class="idref" href="#p:29"><span class="id" title="binder">p</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#p:29"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4"><span class="id" title="notation">&gt;=</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:28"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_radix_vlsm.multiplier"><span class="id" title="variable">multiplier</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#14ef112b66e341f773bd1e9d05816f43"><span class="id" title="notation">^</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#p:29"><span class="id" title="variable">p</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#radix_valid_messages_powers_of_mult_right"><span class="id" title="lemma">radix_valid_messages_powers_of_mult_right</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> (<span class="id" title="var">p</span> &amp; <span class="id" title="var">Hpgt0</span> &amp; [= -&gt;]); <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#radix_valid_messages_powers_of_mult_left"><span class="id" title="lemma">radix_valid_messages_powers_of_mult_left</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_radix_vlsm"><span class="id" title="section">sec_radix_vlsm</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_composition" class="idref" href="#sec_composition"><span class="id" title="section">sec_composition</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;{<a id="index:30" class="idref" href="#index:30"><span class="id" title="binder">index</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;(<a id="multipliers:31" class="idref" href="#multipliers:31"><span class="id" title="binder">multipliers</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#index:30"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hmultipliers:33" class="idref" href="#Hmultipliers:33"><span class="id" title="binder">Hmultipliers</span></a> : <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:32" class="idref" href="#i:32"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#index:30"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#multipliers:31"><span class="id" title="variable">multipliers</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#i:32"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> 0)<br/>
&nbsp;&nbsp;`{<a id="H6:43" class="idref" href="#H6:43"><span class="id" title="binder">FinSet</span></a> <a id="H6:43" class="idref" href="#H6:43"><span class="id" title="binder">index</span></a> <a id="indexSet:34" class="idref" href="#indexSet:34"><span class="id" title="binder"><span id="H6:43" class="id">indexSet</span></span></a>}<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="indexed_radix_vlsms" class="idref" href="#indexed_radix_vlsms"><span class="id" title="definition">indexed_radix_vlsms</span></a> (<a id="i:44" class="idref" href="#i:44"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_composition.index"><span class="id" title="variable">index</span></a>) : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#multiplying_message"><span class="id" title="definition">multiplying_message</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#radix_vlsm"><span class="id" title="definition">radix_vlsm</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_composition.multipliers"><span class="id" title="variable">multipliers</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#i:44"><span class="id" title="variable">i</span></a>).<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;(<a id="radix_constraint:45" class="idref" href="#radix_constraint:45"><span class="id" title="binder">radix_constraint</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#indexed_radix_vlsms"><span class="id" title="definition">indexed_radix_vlsms</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#indexed_radix_vlsms"><span class="id" title="definition">indexed_radix_vlsms</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#multiplying_message"><span class="id" title="definition">multiplying_message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="radix_composite_vlsm" class="idref" href="#radix_composite_vlsm"><span class="id" title="definition">radix_composite_vlsm</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#multiplying_message"><span class="id" title="definition">multiplying_message</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#indexed_radix_vlsms"><span class="id" title="definition">indexed_radix_vlsms</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_composition.radix_constraint"><span class="id" title="variable">radix_constraint</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_state_pos" class="idref" href="#composite_state_pos"><span class="id" title="lemma">composite_state_pos</span></a><br/>
&nbsp;&nbsp;(<a id="s:46" class="idref" href="#s:46"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#indexed_radix_vlsms"><span class="id" title="definition">indexed_radix_vlsms</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hs:47" class="idref" href="#Hs:47"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#radix_composite_vlsm"><span class="id" title="definition">radix_composite_vlsm</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#s:46"><span class="id" title="variable">s</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:48" class="idref" href="#i:48"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#s:46"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#i:48"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4"><span class="id" title="notation">&gt;=</span></a> 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#radix_constrained_states_right"><span class="id" title="lemma">radix_constrained_states_right</span></a> <span class="id" title="keyword">with</span> (<a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_composition.multipliers"><span class="id" title="variable">multipliers</span></a> <span class="id" title="var">i</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.Composition.html#valid_state_project_preloaded"><span class="id" title="lemma">valid_state_project_preloaded</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#multiplying_message"><span class="id" title="definition">multiplying_message</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#indexed_radix_vlsms"><span class="id" title="definition">indexed_radix_vlsms</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_composition.radix_constraint"><span class="id" title="variable">radix_constraint</span></a>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Any valid message can be expressed as a non-empty product of powers
  of the multipliers associated to the components.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="composition_valid_messages_powers_of_mults_right" class="idref" href="#composition_valid_messages_powers_of_mults_right"><span class="id" title="lemma">composition_valid_messages_powers_of_mults_right</span></a> (<a id="m:49" class="idref" href="#m:49"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#multiplying_message"><span class="id" title="definition">multiplying_message</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#radix_composite_vlsm"><span class="id" title="definition">radix_composite_vlsm</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:49"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="f:50" class="idref" href="#f:50"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Lib.FinSuppFn.html#fsfun"><span class="id" title="definition">fsfun</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_composition.index"><span class="id" title="variable">index</span></a> 0%<span class="id" title="var">nat</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Lib.FinSuppFn.html#fin_supp"><span class="id" title="definition">fin_supp</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#f:50"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:49"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Lib.NatExtras.html#fsfun_prod"><span class="id" title="definition">fsfun_prod</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_composition.multipliers"><span class="id" title="variable">multipliers</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#f:50"><span class="id" title="variable">f</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">s</span> <span class="id" title="var">Hvsm</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">m</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">om</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">m</span> <span class="id" title="var">Heqom</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hvsm</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop_ind"><span class="id" title="definition">valid_state_message_prop_ind</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hom</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">n</span> &amp; (<span class="id" title="var">mielem</span> &amp; <span class="id" title="var">mi</span>) &amp; <span class="id" title="var">Hmi</span>); <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">mi</span>, <span class="id" title="var">Hmi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="VLSM.Lib.FinSuppFn.html#delta_nat_fsfun"><span class="id" title="definition">delta_nat_fsfun</span></a> <span class="id" title="var">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">elem_of_not_nil</span>, <a class="idref" href="VLSM.Lib.FinSuppFn.html#elem_of_delta_nat_fsfun"><span class="id" title="lemma">elem_of_delta_nat_fsfun</span></a> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hmi</span>, <span class="id" title="var">mi</span>, <a class="idref" href="VLSM.Lib.NatExtras.html#prod_powers_delta"><span class="id" title="lemma">prod_powers_delta</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">k</span> &amp; <span class="id" title="var">lk</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">om</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHHvsm2</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>) <span class="id" title="keyword">as</span> (<span class="id" title="var">f</span> &amp; <span class="id" title="var">Hdomf</span> &amp; -&gt;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="VLSM.Lib.FinSuppFn.html#succ_fsfun"><span class="id" title="definition">succ_fsfun</span></a> <span class="id" title="var">f</span> <span class="id" title="var">k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.NatExtras.html#fsfun_prod_succ"><span class="id" title="lemma">fsfun_prod_succ</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.ListExtras.html#not_null_element"><span class="id" title="definition">not_null_element</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdomf</span>; <span class="id" title="var">destruct_dec_sig</span> <span class="id" title="var">Hdomf</span> <span class="id" title="var">i</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">elem_of_not_nil</span>, <a class="idref" href="VLSM.Lib.FinSuppFn.html#elem_of_succ_fsfun"><span class="id" title="lemma">elem_of_succ_fsfun</span></a>; <span class="id" title="tactic">right</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_composition"><span class="id" title="section">sec_composition</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_free_composition" class="idref" href="#sec_free_composition"><span class="id" title="section">sec_free_composition</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;`{<a id="EqDecision0:52" class="idref" href="#EqDecision0:52"><span class="id" title="binder">EqDecision</span></a> <a id="index:51" class="idref" href="#index:51"><span class="id" title="binder"><span id="EqDecision0:52" class="id">index</span></span></a>}<br/>
&nbsp;&nbsp;(<a id="multipliers:53" class="idref" href="#multipliers:53"><span class="id" title="binder">multipliers</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#index:51"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>)<br/>
&nbsp;&nbsp;`{<a id="H:54" class="idref" href="#H:54"><span class="id" title="binder">Inhabited</span></a> <a id="H:54" class="idref" href="#H:54"><span class="id" title="binder">index</span></a>}<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="free_radix_composite_vlsm" class="idref" href="#free_radix_composite_vlsm"><span class="id" title="definition">free_radix_composite_vlsm</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#multiplying_message"><span class="id" title="definition">multiplying_message</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#indexed_radix_vlsms"><span class="id" title="definition">indexed_radix_vlsms</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_free_composition.multipliers"><span class="id" title="variable">multipliers</span></a>).<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Lemma</span> <a id="free_radix_composite_vlsm_emits_multiplier" class="idref" href="#free_radix_composite_vlsm_emits_multiplier"><span class="id" title="lemma">free_radix_composite_vlsm_emits_multiplier</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="m:55" class="idref" href="#m:55"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#multiplying_message"><span class="id" title="definition">multiplying_message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#free_radix_composite_vlsm"><span class="id" title="definition">free_radix_composite_vlsm</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:55"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:55"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4"><span class="id" title="notation">&gt;=</span></a> 2 <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="n:56" class="idref" href="#n:56"><span class="id" title="binder">n</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_free_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#free_radix_composite_vlsm"><span class="id" title="definition">free_radix_composite_vlsm</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#n:56"><span class="id" title="variable">n</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#radix_label"><span class="id" title="definition">radix_label</span></a>)<br/>
<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Lib.Preamble.html#update"><span class="id" title="definition">update</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Program.Basics.html#const"><span class="id" title="definition">const</span></a> 1) <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#n:56"><span class="id" title="variable">n</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:55"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> 1)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:55"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Program.Basics.html#const"><span class="id" title="definition">const</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_free_composition.multipliers"><span class="id" title="variable">multipliers</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#n:56"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:55"><span class="id" title="variable">m</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_is_valid"><span class="id" title="lemma">initial_state_is_valid</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">j</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">j</span>)) <span class="id" title="keyword">as</span> [-&gt; |];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.Preamble.html#update_eq"><span class="id" title="lemma">update_eq</span></a>; <span class="id" title="var">lia</span> | <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.Preamble.html#update_neq"><span class="id" title="lemma">update_neq</span></a>].<br/>
&nbsp;&nbsp;- <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.Preamble.html#update_eq"><span class="id" title="lemma">update_eq</span></a>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>; <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.Preamble.html#update_eq"><span class="id" title="lemma">update_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">extensionality</span> <span class="id" title="var">j</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><span class="id" title="var">j</span>)) <span class="id" title="keyword">as</span> [-&gt; |]; <span class="id" title="var">state_update_simpl</span>; [<span class="id" title="tactic">by</span> <span class="id" title="var">lia</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.Preamble.html#update_neq"><span class="id" title="lemma">update_neq</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composition_valid_messages_powers_of_mults_left" class="idref" href="#composition_valid_messages_powers_of_mults_left"><span class="id" title="lemma">composition_valid_messages_powers_of_mults_left</span></a><br/>
&nbsp;&nbsp;(<a id="Hmpos:58" class="idref" href="#Hmpos:58"><span class="id" title="binder">Hmpos</span></a> : <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:57" class="idref" href="#i:57"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_free_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_free_composition.multipliers"><span class="id" title="variable">multipliers</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#i:57"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> 1) (<a id="m:59" class="idref" href="#m:59"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#multiplying_message"><span class="id" title="definition">multiplying_message</span></a>)<br/>
&nbsp;&nbsp;(<a id="f:60" class="idref" href="#f:60"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Lib.FinSuppFn.html#fsfun"><span class="id" title="definition">fsfun</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_free_composition.index"><span class="id" title="variable">index</span></a> 0%<span class="id" title="var">nat</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Lib.FinSuppFn.html#fin_supp"><span class="id" title="definition">fin_supp</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#f:60"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:59"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Lib.NatExtras.html#fsfun_prod"><span class="id" title="definition">fsfun_prod</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_free_composition.multipliers"><span class="id" title="variable">multipliers</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#f:60"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#free_radix_composite_vlsm"><span class="id" title="definition">free_radix_composite_vlsm</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:59"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hpowgeq1</span> <span class="id" title="var">Hm</span>]; <span class="id" title="var">revert</span> <span class="id" title="var">f</span> <span class="id" title="var">Hpowgeq1</span> <span class="id" title="var">m</span> <span class="id" title="var">Hm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Lib.FinSuppFn.html#nat_fsfun_ind"><span class="id" title="lemma">nat_fsfun_ind</span></a> (<span class="id" title="keyword">fun</span> (<a id="f:61" class="idref" href="#f:61"><span class="id" title="binder"><span id="f:63" class="id">f</span></span></a> : <a class="idref" href="VLSM.Lib.FinSuppFn.html#fsfun"><span class="id" title="definition">fsfun</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_free_composition.index"><span class="id" title="variable">index</span></a> 0%<span class="id" title="var">nat</span>) =&gt; <a class="idref" href="VLSM.Lib.FinSuppFn.html#fin_supp"><span class="id" title="definition">fin_supp</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#f:61"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="m:62" class="idref" href="#m:62"><span class="id" title="binder"><span id="m:64" class="id">m</span></span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#multiplying_message"><span class="id" title="definition">multiplying_message</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:62"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Lib.NatExtras.html#fsfun_prod"><span class="id" title="definition">fsfun_prod</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_free_composition.multipliers"><span class="id" title="variable">multipliers</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#f:61"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#free_radix_composite_vlsm"><span class="id" title="definition">free_radix_composite_vlsm</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:62"><span class="id" title="variable">m</span></a>)); [| <span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">Heq</span> <span class="id" title="var">Hall</span> <span class="id" title="var">Hi</span> <span class="id" title="var">m</span> <span class="id" title="var">Hm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Hall</span>; [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradict</span> <span class="id" title="var">Hi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Sorting.Permutation.html#Permutation_nil"><span class="id" title="lemma">Permutation_nil</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hi</span>, <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">f0</span> <span class="id" title="var">IHf0</span> <span class="id" title="var">Hi</span> <span class="id" title="var">m</span> <span class="id" title="var">Hm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Lib.FinSuppFn.html#nat_fsfun_inv"><span class="id" title="lemma">nat_fsfun_inv</span></a> <span class="id" title="var">f0</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Heq</span> | (<span class="id" title="var">n'</span> &amp; <span class="id" title="var">f0'</span> &amp; <span class="id" title="var">Heq</span>)].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.NatExtras.html#fsfun_prod_succ"><span class="id" title="lemma">fsfun_prod_succ</span></a>, <span class="id" title="var">Heq</span>, <a class="idref" href="VLSM.Lib.NatExtras.html#fsfun_prod_zero"><span class="id" title="lemma">fsfun_prod_zero</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_message_is_valid"><span class="id" title="lemma">initial_message_is_valid</span></a>. <span class="id" title="tactic">exists</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">unshelve</span> <span class="id" title="tactic">eexists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">m</span> <span class="id" title="var">_</span>); <span class="id" title="var">cbn</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hmvalid</span> : <a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#free_radix_composite_vlsm"><span class="id" title="definition">free_radix_composite_vlsm</span></a> (<a class="idref" href="VLSM.Lib.NatExtras.html#fsfun_prod"><span class="id" title="definition">fsfun_prod</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_free_composition.multipliers"><span class="id" title="variable">multipliers</span></a> <span class="id" title="var">f0</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHf0</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hinh</span> : <a class="idref" href="VLSM.Lib.FinSuppFn.html#fin_supp"><span class="id" title="definition">fin_supp</span></a> (<a class="idref" href="VLSM.Lib.FinSuppFn.html#succ_fsfun"><span class="id" title="definition">succ_fsfun</span></a> <span class="id" title="var">f0'</span> <span class="id" title="var">n'</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">elem_of_not_nil</span>, <a class="idref" href="VLSM.Lib.FinSuppFn.html#elem_of_succ_fsfun"><span class="id" title="lemma">elem_of_succ_fsfun</span></a>; <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradict</span> <span class="id" title="var">Hinh</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Sorting.Permutation.html#Permutation_nil"><span class="id" title="lemma">Permutation_nil</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hinh</span>, <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.NatExtras.html#fsfun_prod_succ"><span class="id" title="lemma">fsfun_prod_succ</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hpos</span> : <a class="idref" href="VLSM.Lib.NatExtras.html#fsfun_prod"><span class="id" title="definition">fsfun_prod</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_free_composition.multipliers"><span class="id" title="variable">multipliers</span></a> <span class="id" title="var">f0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4"><span class="id" title="notation">&gt;=</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_free_composition.multipliers"><span class="id" title="variable">multipliers</span></a> <span class="id" title="var">n'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>, <a class="idref" href="VLSM.Lib.NatExtras.html#fsfun_prod_succ"><span class="id" title="lemma">fsfun_prod_succ</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<a class="idref" href="VLSM.Lib.NatExtras.html#fsfun_prod"><span class="id" title="definition">fsfun_prod</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_free_composition.multipliers"><span class="id" title="variable">multipliers</span></a> <span class="id" title="var">f0'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> 0); [<span class="id" title="tactic">by</span> <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hmpos</span> <span class="id" title="var">n'</span>); <span class="id" title="var">nia</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<a class="idref" href="VLSM.Lib.FinSuppFn.html#fin_supp"><span class="id" title="definition">fin_supp</span></a> <span class="id" title="var">f0'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hz</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Lib.FinSuppFn.html#empty_fsfun_supp_inv"><span class="id" title="lemma">empty_fsfun_supp_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hz</span> <span class="id" title="keyword">as</span> -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="VLSM.Lib.NatExtras.html#fsfun_prod_zero"><span class="id" title="lemma">fsfun_prod_zero</span></a>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.NatExtras.html#prod_powers_gt"><span class="id" title="lemma">prod_powers_gt</span></a>; [<span class="id" title="tactic">by</span> <span class="id" title="var">lia</span> | | <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intro</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hmpos</span> <span class="id" title="var">i</span>); <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hmpos</span> <span class="id" title="var">n'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_out"><span class="id" title="lemma">input_valid_transition_out</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#free_radix_composite_vlsm_emits_multiplier"><span class="id" title="lemma">free_radix_composite_vlsm_emits_multiplier</span></a>; [| <span class="id" title="var">lia</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composition_valid_messages_powers_of_mults" class="idref" href="#composition_valid_messages_powers_of_mults"><span class="id" title="lemma">composition_valid_messages_powers_of_mults</span></a><br/>
&nbsp;&nbsp;(<a id="Hmpos:66" class="idref" href="#Hmpos:66"><span class="id" title="binder">Hmpos</span></a> : <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:65" class="idref" href="#i:65"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_free_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_free_composition.multipliers"><span class="id" title="variable">multipliers</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#i:65"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> 1) (<a id="m:67" class="idref" href="#m:67"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#multiplying_message"><span class="id" title="definition">multiplying_message</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#free_radix_composite_vlsm"><span class="id" title="definition">free_radix_composite_vlsm</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:67"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="f:68" class="idref" href="#f:68"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Lib.FinSuppFn.html#fsfun"><span class="id" title="definition">fsfun</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_free_composition.index"><span class="id" title="variable">index</span></a> 0%<span class="id" title="var">nat</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Lib.FinSuppFn.html#fin_supp"><span class="id" title="definition">fin_supp</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#f:68"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:67"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Lib.NatExtras.html#fsfun_prod"><span class="id" title="definition">fsfun_prod</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_free_composition.multipliers"><span class="id" title="variable">multipliers</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#f:68"><span class="id" title="variable">f</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hvm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#VLSM_incl_valid_message"><span class="id" title="lemma">VLSM_incl_valid_message</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvm</span>; <span class="id" title="var">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm_spec"><span class="id" title="lemma">free_composite_vlsm_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvm</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#composition_valid_messages_powers_of_mults_right"><span class="id" title="lemma">composition_valid_messages_powers_of_mults_right</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> [? []]; <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#composition_valid_messages_powers_of_mults_left"><span class="id" title="lemma">composition_valid_messages_powers_of_mults_left</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composition_valid_message_ge_2" class="idref" href="#composition_valid_message_ge_2"><span class="id" title="lemma">composition_valid_message_ge_2</span></a><br/>
&nbsp;&nbsp;(<a id="Hmpos:70" class="idref" href="#Hmpos:70"><span class="id" title="binder">Hmpos</span></a> : <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:69" class="idref" href="#i:69"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_free_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_free_composition.multipliers"><span class="id" title="variable">multipliers</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#i:69"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> 1) (<a id="m:71" class="idref" href="#m:71"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#multiplying_message"><span class="id" title="definition">multiplying_message</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#free_radix_composite_vlsm"><span class="id" title="definition">free_radix_composite_vlsm</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:71"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:71"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4"><span class="id" title="notation">&gt;=</span></a> 2.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#composition_valid_messages_powers_of_mults"><span class="id" title="lemma">composition_valid_messages_powers_of_mults</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> (<span class="id" title="var">i</span> &amp; <span class="id" title="var">Hsupp</span> &amp; -&gt;); [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<a class="idref" href="VLSM.Lib.NatExtras.html#fsfun_prod"><span class="id" title="definition">fsfun_prod</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_free_composition.multipliers"><span class="id" title="variable">multipliers</span></a> <span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> 1); [<span class="id" title="tactic">by</span> <span class="id" title="var">lia</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.NatExtras.html#prod_powers_gt"><span class="id" title="lemma">prod_powers_gt</span></a>; [<span class="id" title="var">lia</span> | ..].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_free_composition"><span class="id" title="section">sec_free_composition</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab273"></a><h2 class="section">A VLSM composition for all primes</h2>


<div class="paragraph"> </div>

  In the following section we give an example of a composition with an infinite
  number of <span class="inlinecode"><a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#radix_vlsm"><span class="id" title="definition">radix_vlsm</span></a></span> components, one for each prime number.

<div class="paragraph"> </div>

  Then we characterize the valid messages for this composition to be precisely
  all natural numbers larger than 1.

<div class="paragraph"> </div>

  Finally, we show that in this composition any component is a validator.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_primes_vlsm_composition" class="idref" href="#sec_primes_vlsm_composition"><span class="id" title="section">sec_primes_vlsm_composition</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="primes_vlsm_composition" class="idref" href="#primes_vlsm_composition"><span class="id" title="definition">primes_vlsm_composition</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#free_radix_composite_vlsm"><span class="id" title="definition">free_radix_composite_vlsm</span></a> (<span class="id" title="keyword">fun</span> <a id="p:72" class="idref" href="#p:72"><span class="id" title="binder">p</span></a> : <a class="idref" href="VLSM.Lib.NatExtras.html#primes"><span class="id" title="definition">primes</span></a> =&gt; <span class="id" title="notation">`</span><a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#p:72"><span class="id" title="variable">p</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="primes_vlsm_composition_valid_message_char" class="idref" href="#primes_vlsm_composition_valid_message_char"><span class="id" title="lemma">primes_vlsm_composition_valid_message_char</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="m:73" class="idref" href="#m:73"><span class="id" title="binder">m</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#primes_vlsm_composition"><span class="id" title="definition">primes_vlsm_composition</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:73"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:73"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> 1.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hprime_pos</span> : <span class="id" title="notation">forall</span> <a id="i:74" class="idref" href="#i:74"><span class="id" title="binder"><span id="i:75" class="id">i</span></span></a> : <a class="idref" href="VLSM.Lib.NatExtras.html#primes"><span class="id" title="definition">primes</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">`</span><a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#i:74"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> 1).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_dec_sig</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span> <span class="id" title="var">Hn</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hn</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#primes_vlsm_composition"><span class="id" title="definition">primes_vlsm_composition</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#composition_valid_messages_powers_of_mults"><span class="id" title="lemma">composition_valid_messages_powers_of_mults</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="tactic">by</span> <span class="id" title="tactic">intro</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hprime_pos</span> <span class="id" title="var">i</span>); <span class="id" title="var">lia</span>..].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> (<span class="id" title="var">fp</span> &amp; <span class="id" title="var">Hdom_fp</span> &amp; -&gt;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.NatExtras.html#prod_powers_gt"><span class="id" title="lemma">prod_powers_gt</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.NatExtras.html#primes_factorization"><span class="id" title="lemma">primes_factorization</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  For any prime number, its corresponding component in the <span class="inlinecode"><a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#primes_vlsm_composition"><span class="id" title="definition">primes_vlsm_composition</span></a></span>
  is a validator for that composition, i.e., all of its constrained transitions
  can be lifted to valid transitions for the composition.

</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <a id="component_projection_validator_prop_primes" class="idref" href="#component_projection_validator_prop_primes"><span class="id" title="lemma">component_projection_validator_prop_primes</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="p:76" class="idref" href="#p:76"><span class="id" title="binder">p</span></a> : <a class="idref" href="VLSM.Lib.NatExtras.html#primes"><span class="id" title="definition">primes</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ProjectionTraces.html#component_projection_validator_prop"><span class="id" title="definition">component_projection_validator_prop</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#indexed_radix_vlsms"><span class="id" title="definition">indexed_radix_vlsms</span></a> (<span class="id" title="keyword">fun</span> <a id="p:77" class="idref" href="#p:77"><span class="id" title="binder">p</span></a> : <a class="idref" href="VLSM.Lib.NatExtras.html#primes"><span class="id" title="definition">primes</span></a> =&gt; <span class="id" title="notation">`</span> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#p:77"><span class="id" title="variable">p</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="notation">True</span>) <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#p:76"><span class="id" title="variable">p</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">p</span> <span class="id" title="var">lp</span> <span class="id" title="var">sp</span> [<span class="id" title="var">m</span>|] (<span class="id" title="var">Hsp</span> &amp; <span class="id" title="var">_</span> &amp; []).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state'"><span class="id" title="definition">lift_to_composite_state'</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#indexed_radix_vlsms"><span class="id" title="definition">indexed_radix_vlsms</span></a> (<span class="id" title="keyword">fun</span> <a id="p:78" class="idref" href="#p:78"><span class="id" title="binder"><span id="p:79" class="id">p</span></span></a> : <a class="idref" href="VLSM.Lib.NatExtras.html#primes"><span class="id" title="definition">primes</span></a> =&gt; <span class="id" title="notation">`</span><a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#p:78"><span class="id" title="variable">p</span></a>)) <span class="id" title="var">p</span> <span class="id" title="var">sp</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="var">cycle</span> 1; [| | <span class="id" title="tactic">by</span> <span class="id" title="var">state_update_simpl</span>..].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_is_valid"><span class="id" title="lemma">initial_state_is_valid</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">p'</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">p'</span>)); <span class="id" title="tactic">subst</span>; <span class="id" title="var">state_update_simpl</span>; <span class="id" title="var">cbn</span>; [<span class="id" title="var">lia</span> |].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#VLSM_incl_valid_message"><span class="id" title="lemma">VLSM_incl_valid_message</span></a>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm_spec"><span class="id" title="lemma">free_composite_vlsm_spec</span></a> | ..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#primes_vlsm_composition_valid_message_char"><span class="id" title="lemma">primes_vlsm_composition_valid_message_char</span></a>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab274"></a><h3 class="section">A (slightly) constrained composition of primes</h3>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

  To show how a composition constraint affects validation, we here add a very
  simple constraint, that the received message must be even, to the composition.

</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a id="EvenConstraint" class="idref" href="#EvenConstraint"><span class="id" title="definition, inductive"><span id="EvenConstraint_ind" class="id"><span id="EvenConstraint_sind" class="id">EvenConstraint</span></span></span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#primes_vlsm_composition"><span class="id" title="definition">primes_vlsm_composition</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#primes_vlsm_composition"><span class="id" title="definition">primes_vlsm_composition</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="even_constraint" class="idref" href="#even_constraint"><span class="id" title="constructor">even_constraint</span></a> : <span class="id" title="notation">forall</span> <a id="l:82" class="idref" href="#l:82"><span class="id" title="binder">l</span></a> <a id="s:83" class="idref" href="#s:83"><span class="id" title="binder">s</span></a> <a id="m:84" class="idref" href="#m:84"><span class="id" title="binder">m</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.Even"><span class="id" title="definition">Z.Even</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:84"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#EvenConstraint:80"><span class="id" title="inductive">EvenConstraint</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#l:82"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#s:83"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:84"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="even_constrained_primes_composition" class="idref" href="#even_constrained_primes_composition"><span class="id" title="definition">even_constrained_primes_composition</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ConstrainedVLSM.html#constrained_vlsm"><span class="id" title="definition">constrained_vlsm</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#primes_vlsm_composition"><span class="id" title="definition">primes_vlsm_composition</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#EvenConstraint"><span class="id" title="inductive">EvenConstraint</span></a>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Lemma</span> <a id="even_constrained_primes_composition_emits_multiplier" class="idref" href="#even_constrained_primes_composition_emits_multiplier"><span class="id" title="lemma">even_constrained_primes_composition_emits_multiplier</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="m:85" class="idref" href="#m:85"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#multiplying_message"><span class="id" title="definition">multiplying_message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#even_constrained_primes_composition"><span class="id" title="definition">even_constrained_primes_composition</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:85"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:85"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4"><span class="id" title="notation">&gt;=</span></a> 2 <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.Even"><span class="id" title="definition">Z.Even</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:85"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="n:86" class="idref" href="#n:86"><span class="id" title="binder">n</span></a> : <a class="idref" href="VLSM.Lib.NatExtras.html#primes"><span class="id" title="definition">primes</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#even_constrained_primes_composition"><span class="id" title="definition">even_constrained_primes_composition</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#n:86"><span class="id" title="variable">n</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#radix_label"><span class="id" title="definition">radix_label</span></a>)<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Lib.Preamble.html#update"><span class="id" title="definition">update</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Program.Basics.html#const"><span class="id" title="definition">const</span></a> 1) <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#n:86"><span class="id" title="variable">n</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:85"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> 1)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:85"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Program.Basics.html#const"><span class="id" title="definition">const</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<span class="id" title="notation">`</span> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#n:86"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:85"><span class="id" title="variable">m</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_is_valid"><span class="id" title="lemma">initial_state_is_valid</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">j</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">j</span>)) <span class="id" title="keyword">as</span> [-&gt; |];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.Preamble.html#update_eq"><span class="id" title="lemma">update_eq</span></a>; <span class="id" title="var">lia</span> | <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.Preamble.html#update_neq"><span class="id" title="lemma">update_neq</span></a>].<br/>
&nbsp;&nbsp;- <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.Preamble.html#update_eq"><span class="id" title="lemma">update_eq</span></a>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>; <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">extensionality</span> <span class="id" title="var">j</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">j</span>)); <span class="id" title="tactic">subst</span>; <span class="id" title="var">state_update_simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.Preamble.html#update_eq"><span class="id" title="lemma">update_eq</span></a>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.Preamble.html#update_neq"><span class="id" title="lemma">update_neq</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="even_constrained_primes_composition_valid_messages_left" class="idref" href="#even_constrained_primes_composition_valid_messages_left"><span class="id" title="lemma">even_constrained_primes_composition_valid_messages_left</span></a> (<a id="m:87" class="idref" href="#m:87"><span class="id" title="binder">m</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:87"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.Even"><span class="id" title="definition">Z.Even</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:87"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#even_constrained_primes_composition"><span class="id" title="definition">even_constrained_primes_composition</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:87"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hm1</span> <span class="id" title="var">Hmeven</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hinit</span> : <a class="idref" href="VLSM.Core.Composition.html#composite_initial_message_prop"><span class="id" title="definition">composite_initial_message_prop</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#indexed_radix_vlsms"><span class="id" title="definition">indexed_radix_vlsms</span></a> (<span class="id" title="keyword">fun</span> <a id="p:88" class="idref" href="#p:88"><span class="id" title="binder"><span id="p:89" class="id">p</span></span></a> : <a class="idref" href="VLSM.Lib.NatExtras.html#primes"><span class="id" title="definition">primes</span></a> =&gt; <span class="id" title="notation">`</span><a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#p:88"><span class="id" title="variable">p</span></a>)) 2)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eexists</span> (<span class="id" title="definition">dexist</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.Znumtheory.html#prime_2"><span class="id" title="lemma">prime_2</span></a>), (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> 2 <span class="id" title="var">_</span>); <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">m</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 2)) <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hm2</span>]; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_message_is_valid"><span class="id" title="lemma">initial_message_is_valid</span></a> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hmeven</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">n</span> -&gt;].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hn</span> : 2 <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="var">n</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">P</span> := <span class="id" title="keyword">fun</span> <a id="n:90" class="idref" href="#n:90"><span class="id" title="binder"><span id="n:91" class="id">n</span></span></a> =&gt; <a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#even_constrained_primes_composition"><span class="id" title="definition">even_constrained_primes_composition</span></a> (2 <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#n:90"><span class="id" title="variable">n</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<span class="id" title="var">P</span> <span class="id" title="var">n</span>); [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> -<span class="id" title="var">Hn</span> <span class="id" title="var">Hinit</span>; <span class="id" title="var">revert</span> <span class="id" title="var">n</span> <span class="id" title="var">Hn</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.Wf_Z.html#Zlt_lower_bound_ind"><span class="id" title="lemma">Zlt_lower_bound_ind</span></a>; <span class="id" title="tactic">subst</span> <span class="id" title="var">P</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">Hind</span> <span class="id" title="var">Hn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.Znumtheory.html#prime"><span class="id" title="inductive">prime</span></a> <span class="id" title="var">n</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hp</span> | <span class="id" title="var">Hnp</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">replace</span> (2 <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e"><span class="id" title="notation">*</span></a> <span class="id" title="var">n</span>) <span class="id" title="keyword">with</span> (<span class="id" title="notation">`</span> <span class="id" title="notation">(</span><span class="id" title="definition">dexist</span> <span class="id" title="var">n</span> <span class="id" title="var">Hp</span><span class="id" title="notation">)</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e"><span class="id" title="notation">*</span></a> 2) <span class="id" title="tactic">by</span> (<span class="id" title="var">cbn</span>; <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_out"><span class="id" title="lemma">input_valid_transition_out</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#even_constrained_primes_composition_emits_multiplier"><span class="id" title="lemma">even_constrained_primes_composition_emits_multiplier</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="var">done</span> | <span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> 1].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_message_is_valid"><span class="id" title="lemma">initial_message_is_valid</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.NatExtras.html#not_prime_divide_prime"><span class="id" title="lemma">not_prime_divide_prime</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnp</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">m</span> &amp; <span class="id" title="var">Hp</span> &amp; <span class="id" title="var">q</span> &amp; <span class="id" title="var">Hq</span> &amp; -&gt;); [| <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (2 <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e"><span class="id" title="notation">(</span></a><span class="id" title="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e"><span class="id" title="notation">*</span></a> <span class="id" title="var">m</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">with</span> (<span class="id" title="notation">`</span> <span class="id" title="notation">(</span><span class="id" title="definition">dexist</span> <span class="id" title="var">m</span> <span class="id" title="var">Hp</span><span class="id" title="notation">)</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e"><span class="id" title="notation">(</span></a>2 <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e"><span class="id" title="notation">*</span></a> <span class="id" title="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">by</span> (<span class="id" title="var">cbn</span>; <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_out"><span class="id" title="lemma">input_valid_transition_out</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#even_constrained_primes_composition_emits_multiplier"><span class="id" title="lemma">even_constrained_primes_composition_emits_multiplier</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span> | <span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hind</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  The valid messages of the <span class="inlinecode"><a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#even_constrained_primes_composition"><span class="id" title="definition">even_constrained_primes_composition</span></a></span> are precisely
  all positive even numbers.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="even_constrained_primes_composition_valid_message_char" class="idref" href="#even_constrained_primes_composition_valid_message_char"><span class="id" title="lemma">even_constrained_primes_composition_valid_message_char</span></a> (<a id="m:92" class="idref" href="#m:92"><span class="id" title="binder">m</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#even_constrained_primes_composition"><span class="id" title="definition">even_constrained_primes_composition</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:92"><span class="id" title="variable">m</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:92"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.Even"><span class="id" title="definition">Z.Even</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:92"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.Znumtheory.html#prime"><span class="id" title="inductive">prime</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:92"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<span class="id" title="var">m</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.Even"><span class="id" title="definition">Z.Even</span></a> <span class="id" title="var">m</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.Znumtheory.html#prime"><span class="id" title="inductive">prime</span></a> <span class="id" title="var">m</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.Znumtheory.html#prime"><span class="id" title="inductive">prime</span></a> <span class="id" title="var">m</span>)); [<span class="id" title="tactic">right</span> | <span class="id" title="tactic">left</span>; <span class="id" title="var">itauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#primes_vlsm_composition_valid_message_char"><span class="id" title="lemma">primes_vlsm_composition_valid_message_char</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#VLSM_incl_valid_message"><span class="id" title="lemma">VLSM_incl_valid_message</span></a>; [..| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.ConstrainedVLSM.html#VLSM_incl_constrained_vlsm"><span class="id" title="lemma">VLSM_incl_constrained_vlsm</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#primes_vlsm_composition"><span class="id" title="definition">primes_vlsm_composition</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#emitted_messages_are_valid_iff"><span class="id" title="lemma">emitted_messages_are_valid_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [([<span class="id" title="var">p</span> <span class="id" title="var">Hp</span>] &amp; [<span class="id" title="var">i</span> <span class="id" title="var">Hi</span>] &amp; &lt;-) | ([<span class="id" title="var">s</span> [<span class="id" title="var">im</span> |]] &amp; [<span class="id" title="var">i</span> <span class="id" title="var">li</span>] &amp; <span class="id" title="var">s'</span> &amp; (<span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Hc</span>) &amp; <span class="id" title="var">Ht</span>)];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">right</span>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">bool_decide_spec</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span> | | <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hc</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">left</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.Zeven.html#Zeven_equiv"><span class="id" title="lemma">Zeven_equiv</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.Zeven.html#Zeven_mult_Zeven_r"><span class="id" title="lemma">Zeven_mult_Zeven_r</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.Zeven.html#Zeven_equiv"><span class="id" title="lemma">Zeven_equiv</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [[] | <span class="id" title="var">Hprime</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#even_constrained_primes_composition_valid_messages_left"><span class="id" title="lemma">even_constrained_primes_composition_valid_messages_left</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_message_is_valid"><span class="id" title="lemma">initial_message_is_valid</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">unshelve</span> <span class="id" title="tactic">eexists</span> (<span class="id" title="definition">dexist</span> <span class="id" title="var">m</span> <span class="id" title="var">Hprime</span>), (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">m</span> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
No component is validating for the <span class="inlinecode"><a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#even_constrained_primes_composition"><span class="id" title="definition">even_constrained_primes_composition</span></a></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="even_constrained_primes_composition_no_validator" class="idref" href="#even_constrained_primes_composition_no_validator"><span class="id" title="lemma">even_constrained_primes_composition_no_validator</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="p:93" class="idref" href="#p:93"><span class="id" title="binder">p</span></a> : <a class="idref" href="VLSM.Lib.NatExtras.html#primes"><span class="id" title="definition">primes</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="VLSM.Core.ProjectionTraces.html#component_projection_validator_prop"><span class="id" title="definition">component_projection_validator_prop</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#indexed_radix_vlsms"><span class="id" title="definition">indexed_radix_vlsms</span></a> (<span class="id" title="keyword">fun</span> <a id="p:94" class="idref" href="#p:94"><span class="id" title="binder">p</span></a> : <a class="idref" href="VLSM.Lib.NatExtras.html#primes"><span class="id" title="definition">primes</span></a> =&gt; <span class="id" title="notation">`</span> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#p:94"><span class="id" title="variable">p</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#EvenConstraint"><span class="id" title="inductive">EvenConstraint</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#p:93"><span class="id" title="variable">p</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">p</span> <span class="id" title="var">Hnv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#input_constrained"><span class="id" title="definition">input_constrained</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#indexed_radix_vlsms"><span class="id" title="definition">indexed_radix_vlsms</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation"></span></a> <a id="p0:95" class="idref" href="#p0:95"><span class="id" title="binder"><span id="p0:96" class="id">p0</span></span></a> : <a class="idref" href="VLSM.Lib.NatExtras.html#primes"><span class="id" title="definition">primes</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="notation">`</span><a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#p0:95"><span class="id" title="variable">p0</span></a>) <span class="id" title="var">p</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Program.Syntax.html#f5cb26d96fc0400fc3c881290947e554"><span class="id" title="notation">()</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>3<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> 3<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hiv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hnv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hiv</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">s</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Hc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hc</span> <span class="id" title="keyword">as</span> [? ? ? []]; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.PreloadedVLSM.html#any_message_is_valid_in_preloaded"><span class="id" title="lemma">any_message_is_valid_in_preloaded</span></a> | <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>..].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_is_valid"><span class="id" title="lemma">initial_state_is_valid</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">red</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Now we show that if we constrain each component with a local condition
  equivalent to the global constraint we can recover validation.

</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a id="LocalEvenConstraint" class="idref" href="#LocalEvenConstraint"><span class="id" title="definition, inductive"><span id="LocalEvenConstraint_ind" class="id"><span id="LocalEvenConstraint_sind" class="id">LocalEvenConstraint</span></span></span></a> (<a id="mult:97" class="idref" href="#mult:97"><span class="id" title="binder">mult</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#radix_vlsm"><span class="id" title="definition">radix_vlsm</span></a> <span class="id" title="var">mult</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#radix_vlsm"><span class="id" title="definition">radix_vlsm</span></a> <span class="id" title="var">mult</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="local_even_constraint" class="idref" href="#local_even_constraint"><span class="id" title="constructor">local_even_constraint</span></a> : <span class="id" title="notation">forall</span> <a id="l:100" class="idref" href="#l:100"><span class="id" title="binder">l</span></a> <a id="s:101" class="idref" href="#s:101"><span class="id" title="binder">s</span></a> <a id="m:102" class="idref" href="#m:102"><span class="id" title="binder">m</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.Even"><span class="id" title="definition">Z.Even</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:102"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#LocalEvenConstraint:98"><span class="id" title="inductive">LocalEvenConstraint</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#mult:97"><span class="id" title="variable">mult</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#l:100"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#s:101"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#m:102"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="even_prime_vlsms" class="idref" href="#even_prime_vlsms"><span class="id" title="definition">even_prime_vlsms</span></a> (<a id="p:103" class="idref" href="#p:103"><span class="id" title="binder">p</span></a> : <a class="idref" href="VLSM.Lib.NatExtras.html#primes"><span class="id" title="definition">primes</span></a>) : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Multiply.html#multiplying_message"><span class="id" title="definition">multiplying_message</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ConstrainedVLSM.html#constrained_vlsm"><span class="id" title="definition">constrained_vlsm</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#radix_vlsm"><span class="id" title="definition">radix_vlsm</span></a> (<span class="id" title="notation">`</span><a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#p:103"><span class="id" title="variable">p</span></a>)) (<a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#LocalEvenConstraint"><span class="id" title="inductive">LocalEvenConstraint</span></a> (<span class="id" title="notation">`</span><a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#p:103"><span class="id" title="variable">p</span></a>)).<br/>

<br/>
</div>

<div class="doc">
  Adding the local constraint to each component does not change the behavior
  of the composition.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="even_constrained_primes_composition_incl_left" class="idref" href="#even_constrained_primes_composition_incl_left"><span class="id" title="lemma">even_constrained_primes_composition_incl_left</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#even_constrained_primes_composition"><span class="id" title="definition">even_constrained_primes_composition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#even_prime_vlsms"><span class="id" title="definition">even_prime_vlsms</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#EvenConstraint"><span class="id" title="inductive">EvenConstraint</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#basic_VLSM_strong_incl"><span class="id" title="lemma">basic_VLSM_strong_incl</span></a>; <span class="id" title="var">cycle</span> 3; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> ? **.. |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">p</span> []] <span class="id" title="var">s</span> [<span class="id" title="var">m</span> |] [<span class="id" title="var">Hv</span> <span class="id" title="var">Hc</span>]; [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hc</span>]; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hc</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hv</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  The validation result is recovered for the new constrained components and composition.

</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <a id="even_constrained_primes_composition_all_validators" class="idref" href="#even_constrained_primes_composition_all_validators"><span class="id" title="lemma">even_constrained_primes_composition_all_validators</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="p:104" class="idref" href="#p:104"><span class="id" title="binder">p</span></a> : <a class="idref" href="VLSM.Lib.NatExtras.html#primes"><span class="id" title="definition">primes</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ProjectionTraces.html#component_projection_validator_prop"><span class="id" title="definition">component_projection_validator_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#even_prime_vlsms"><span class="id" title="definition">even_prime_vlsms</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#EvenConstraint"><span class="id" title="inductive">EvenConstraint</span></a> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#p:104"><span class="id" title="variable">p</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">p</span> <span class="id" title="var">lp</span> <span class="id" title="var">sp</span> [<span class="id" title="var">m</span> |] (<span class="id" title="var">Hsp</span> &amp; <span class="id" title="var">_</span> &amp; [[] <span class="id" title="var">Hc</span>]).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hc</span> <span class="id" title="keyword">as</span> [? ? ? <span class="id" title="var">Heven</span>]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state'"><span class="id" title="definition">lift_to_composite_state'</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#indexed_radix_vlsms"><span class="id" title="definition">indexed_radix_vlsms</span></a> (<span class="id" title="keyword">fun</span> <a id="p:105" class="idref" href="#p:105"><span class="id" title="binder"><span id="p:106" class="id">p</span></span></a> : <a class="idref" href="VLSM.Lib.NatExtras.html#primes"><span class="id" title="definition">primes</span></a> =&gt; <span class="id" title="notation">`</span><a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#p:105"><span class="id" title="variable">p</span></a>)) <span class="id" title="var">p</span> <span class="id" title="var">sp</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="var">cycle</span> 1; [| | <span class="id" title="tactic">by</span> <span class="id" title="var">state_update_simpl</span>..].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_is_valid"><span class="id" title="lemma">initial_state_is_valid</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">p'</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">p'</span>)); <span class="id" title="tactic">subst</span>; <span class="id" title="var">state_update_simpl</span>; <span class="id" title="var">cbn</span>; [<span class="id" title="var">lia</span> |].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_Some"><span class="id" title="lemma">option_valid_message_Some</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#VLSM_incl_valid_message"><span class="id" title="lemma">VLSM_incl_valid_message</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#even_constrained_primes_composition_incl_left"><span class="id" title="lemma">even_constrained_primes_composition_incl_left</span></a> | ..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#even_constrained_primes_composition_valid_message_char"><span class="id" title="lemma">even_constrained_primes_composition_valid_message_char</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">left</span>; <span class="id" title="tactic">split</span>; [<span class="id" title="var">lia</span> |].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Examples.Tutorial.PrimesComposition.html#sec_primes_vlsm_composition"><span class="id" title="section">sec_primes_vlsm_composition</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr">coqdoc</a> and improved with <a href="https://github.com/palmskog/coqdocjs">CoqdocJS</a> as adapted for <a href="https://github.com/coq-community">coq-community</a>
</div>
</div>
</body>

</html>
