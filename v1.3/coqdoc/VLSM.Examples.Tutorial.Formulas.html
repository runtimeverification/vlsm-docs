<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename">
	<script>
	  if (document.title === "Table of Contents") {
	      document.write("<a href='map.svg'>File dependency graph</a>");
	  } else if (document.title !== "Index") {
              document.write("<a href='" + document.title + ".svg'>" + document.title + " dependency graph</a>");
	  }
	</script>
      </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./../..">Project Website</a>
      <a href="./indexpage.html">Index</a>
      <a href="./toc.html">Table of Contents</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Logic.FunctionalExtensionality.html#"><span class="id" title="library">FunctionalExtensionality</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">stdpp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">prelude</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Lib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Lib.ListExtras.html#"><span class="id" title="library">ListExtras</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Core</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Core.VLSM.html#"><span class="id" title="library">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#"><span class="id" title="library">Composition</span></a> <a class="idref" href="VLSM.Core.ProjectionTraces.html#"><span class="id" title="library">ProjectionTraces</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab275"></a><h1 class="section">Tutorial: VLSMs that Generate Logical Formulas</h1>


<div class="paragraph"> </div>

  This module shows how VLSMs can be used to generate propositional logic formulas.
  To achieve this, we define a family of VLSMs, one for each formula grammar rule, which
  generates messages according to the given rule. By composition, we obtain that
  the valid messages are precisely the "strings" which can be produced by the
  formula grammar.

<div class="paragraph"> </div>

  To strengthen the connection between formulas and VLSMs, we also define formulas
  as an inductive type and prove an equivalence between the inductively defined formulas
  and those obtained as valid messages of the composition of VLSMs from above.

<div class="paragraph"> </div>

  To simplify the presentation, the grammar we consider for formulas is
  unambiguous and uses prefix notation:

<div class="paragraph"> </div>

  <code>f ::= ⊤ | ⊥ | x | ¬ f | ∧ f f | ∨ f f | → f f | ↔ f f</code>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_formula" class="idref" href="#sec_formula"><span class="id" title="section">sec_formula</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;`{<a id="EqDecision0:2" class="idref" href="#EqDecision0:2"><span class="id" title="binder">EqDecision</span></a> <a id="Var:1" class="idref" href="#Var:1"><span class="id" title="binder"><span id="EqDecision0:2" class="id">Var</span></span></a>}<br/>
&nbsp;&nbsp;`{<a id="H:3" class="idref" href="#H:3"><span class="id" title="binder">base.Infinite</span></a> <a id="H:3" class="idref" href="#H:3"><span class="id" title="binder">Var</span></a>}<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="symbol" class="idref" href="#symbol"><span class="id" title="definition, inductive"><span id="symbol_rect" class="id"><span id="symbol_ind" class="id"><span id="symbol_rec" class="id"><span id="symbol_sind" class="id">symbol</span></span></span></span></span></a> : <span class="id" title="keyword">Type</span> :=<br/>
| <a id="Top" class="idref" href="#Top"><span class="id" title="constructor">Top</span></a><br/>
| <a id="Bot" class="idref" href="#Bot"><span class="id" title="constructor">Bot</span></a><br/>
| <a id="PVar" class="idref" href="#PVar"><span class="id" title="constructor">PVar</span></a> (<a id="x:6" class="idref" href="#x:6"><span class="id" title="binder">x</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#sec_formula.Var"><span class="id" title="variable">Var</span></a>)<br/>
| <a id="Neg" class="idref" href="#Neg"><span class="id" title="constructor">Neg</span></a><br/>
| <a id="Conj" class="idref" href="#Conj"><span class="id" title="constructor">Conj</span></a><br/>
| <a id="Disj" class="idref" href="#Disj"><span class="id" title="constructor">Disj</span></a><br/>
| <a id="Impl" class="idref" href="#Impl"><span class="id" title="constructor">Impl</span></a><br/>
| <a id="Iff" class="idref" href="#Iff"><span class="id" title="constructor">Iff</span></a>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="symbol_dec" class="idref" href="#symbol_dec"><span class="id" title="instance">symbol_dec</span></a> : <span class="id" title="abbreviation">EqDecision</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#symbol"><span class="id" title="inductive">symbol</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="class">EqDecision</span>, <span class="id" title="class">Decision</span>; <span class="id" title="var">decide</span> <span class="id" title="var">equality</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">x0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">x1</span>)); [<span class="id" title="tactic">left</span> | <span class="id" title="tactic">right</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="expression" class="idref" href="#expression"><span class="id" title="definition">expression</span></a> : <span class="id" title="keyword">Type</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#symbol"><span class="id" title="inductive">symbol</span></a>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="Formula" class="idref" href="#Formula"><span class="id" title="definition, inductive"><span id="Formula_rect" class="id"><span id="Formula_ind" class="id"><span id="Formula_rec" class="id"><span id="Formula_sind" class="id">Formula</span></span></span></span></span></a> : <span class="id" title="keyword">Type</span> :=<br/>
| <a id="FTop" class="idref" href="#FTop"><span class="id" title="constructor">FTop</span></a><br/>
| <a id="FBot" class="idref" href="#FBot"><span class="id" title="constructor">FBot</span></a><br/>
| <a id="FVar" class="idref" href="#FVar"><span class="id" title="constructor">FVar</span></a> (<a id="x:9" class="idref" href="#x:9"><span class="id" title="binder">x</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#sec_formula.Var"><span class="id" title="variable">Var</span></a>)<br/>
| <a id="FNeg" class="idref" href="#FNeg"><span class="id" title="constructor">FNeg</span></a> (<a id="f:10" class="idref" href="#f:10"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula:7"><span class="id" title="inductive">Formula</span></a>)<br/>
| <a id="FConj" class="idref" href="#FConj"><span class="id" title="constructor">FConj</span></a> (<a id="f1:11" class="idref" href="#f1:11"><span class="id" title="binder">f1</span></a> <a id="f2:12" class="idref" href="#f2:12"><span class="id" title="binder">f2</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula:7"><span class="id" title="inductive">Formula</span></a>)<br/>
| <a id="FDisj" class="idref" href="#FDisj"><span class="id" title="constructor">FDisj</span></a> (<a id="f1:13" class="idref" href="#f1:13"><span class="id" title="binder">f1</span></a> <a id="f2:14" class="idref" href="#f2:14"><span class="id" title="binder">f2</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula:7"><span class="id" title="inductive">Formula</span></a>)<br/>
| <a id="FImpl" class="idref" href="#FImpl"><span class="id" title="constructor">FImpl</span></a> (<a id="f1:15" class="idref" href="#f1:15"><span class="id" title="binder">f1</span></a> <a id="f2:16" class="idref" href="#f2:16"><span class="id" title="binder">f2</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula:7"><span class="id" title="inductive">Formula</span></a>)<br/>
| <a id="FIff" class="idref" href="#FIff"><span class="id" title="constructor">FIff</span></a> (<a id="f1:17" class="idref" href="#f1:17"><span class="id" title="binder">f1</span></a> <a id="f2:18" class="idref" href="#f2:18"><span class="id" title="binder">f2</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula:7"><span class="id" title="inductive">Formula</span></a>).<br/>

<br/>
</div>

<div class="doc">
  We introduce the following notations to allow us to more easily write formulas.

</div>
<div class="code">
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> "⊤" := <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#FTop"><span class="id" title="constructor">FTop</span></a>.<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> "⊥" := <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#FBot"><span class="id" title="constructor">FBot</span></a>.<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> "x ∨ y" := (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#FDisj"><span class="id" title="constructor">FDisj</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 85, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>).<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> "x ∧ y" := (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#FConj"><span class="id" title="constructor">FConj</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 80, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>).<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> "x → y" := (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#FImpl"><span class="id" title="constructor">FImpl</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 99, <span class="id" title="var">y</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 200, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>).<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> "x ↔ y" := (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#FIff"><span class="id" title="constructor">FIff</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 95, <span class="id" title="keyword">no</span> <span class="id" title="keyword">associativity</span>).<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> "¬ x" := (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#FNeg"><span class="id" title="constructor">FNeg</span></a> <span class="id" title="var">x</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 75, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>).<br/>

<br/>
</div>

<div class="doc">
  Similarly to the notations above, the purpose of this coercion is to allow
  using variables directly as formulas.

</div>
<div class="code">
<span class="id" title="keyword">Coercion</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#FVar"><span class="id" title="constructor">FVar</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#FVar"><span class="id" title="constructor">:</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#FVar"><span class="id" title="constructor">Var</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#FVar"><span class="id" title="constructor">&gt;-&gt;</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#FVar"><span class="id" title="constructor">Formula</span></a>.<br/>

<br/>
</div>

<div class="doc">
A <span class="inlinecode"><a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula"><span class="id" title="inductive">Formula</span></a></span> is flattened to an <span class="inlinecode"><a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression"><span class="id" title="definition">expression</span></a></span> using prefix notation. 
</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <a id="flatten_formula" class="idref" href="#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> (<a id="f:19" class="idref" href="#f:19"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula"><span class="id" title="inductive">Formula</span></a>) : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression"><span class="id" title="definition">expression</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f:19"><span class="id" title="variable">f</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#FTop"><span class="id" title="constructor">FTop</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Top"><span class="id" title="constructor">Top</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#FBot"><span class="id" title="constructor">FBot</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Bot"><span class="id" title="constructor">Bot</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#FVar"><span class="id" title="constructor">FVar</span></a> <span class="id" title="var">x</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#PVar"><span class="id" title="constructor">PVar</span></a> <span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#3543b590674c2406dadbf42bd58f6700"><span class="id" title="notation">¬</span></a> <span class="id" title="var">f</span> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Neg"><span class="id" title="constructor">Neg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula:20"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f:19"><span class="id" title="variable">f</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">f1</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#bbbda3681827f271e02232c943f22ca3"><span class="id" title="notation">∧</span></a> <span class="id" title="var">f2</span> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Conj"><span class="id" title="constructor">Conj</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula:20"><span class="id" title="definition">flatten_formula</span></a> <span class="id" title="var">f1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula:20"><span class="id" title="definition">flatten_formula</span></a> <span class="id" title="var">f2</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">f1</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#e45beab8340f99d309f9f644ee3f5443"><span class="id" title="notation">∨</span></a> <span class="id" title="var">f2</span> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Disj"><span class="id" title="constructor">Disj</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula:20"><span class="id" title="definition">flatten_formula</span></a> <span class="id" title="var">f1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula:20"><span class="id" title="definition">flatten_formula</span></a> <span class="id" title="var">f2</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">f1</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#0542a2c9d6b6fa3ab8217093a0f6e703"><span class="id" title="notation">→</span></a> <span class="id" title="var">f2</span> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Impl"><span class="id" title="constructor">Impl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula:20"><span class="id" title="definition">flatten_formula</span></a> <span class="id" title="var">f1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula:20"><span class="id" title="definition">flatten_formula</span></a> <span class="id" title="var">f2</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">f1</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#1da3ccfc5d2cee3f42016cfea3615111"><span class="id" title="notation">↔</span></a> <span class="id" title="var">f2</span> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Iff"><span class="id" title="constructor">Iff</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula:20"><span class="id" title="definition">flatten_formula</span></a> <span class="id" title="var">f1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula:20"><span class="id" title="definition">flatten_formula</span></a> <span class="id" title="var">f2</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="flatten_formula_nzlen" class="idref" href="#flatten_formula_nzlen"><span class="id" title="lemma">flatten_formula_nzlen</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="f:22" class="idref" href="#f:22"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula"><span class="id" title="inductive">Formula</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f:22"><span class="id" title="variable">f</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> 0.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> []; <span class="id" title="var">cbn</span>; <span class="id" title="var">lia</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab276"></a><h2 class="section">Encoding formulas as VLSMs</h2>

<div class="paragraph"> </div>

<a id="lab277"></a><h3 class="section">VLSM for top and bottom rules</h3>


<div class="paragraph"> </div>

  This is a very simple VLSM, with a single state and a single label, accepting
  no input and outputing the expression containing just the symbol parameter.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_formula.sec_expression_const_vlsm" class="idref" href="#sec_formula.sec_expression_const_vlsm"><span class="id" title="section">sec_expression_const_vlsm</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;(<a id="ct:23" class="idref" href="#ct:23"><span class="id" title="binder">ct</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#symbol"><span class="id" title="inductive">symbol</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="expression_const_vlsm_type" class="idref" href="#expression_const_vlsm_type"><span class="id" title="definition">expression_const_vlsm_type</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMType"><span class="id" title="record">VLSMType</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression"><span class="id" title="definition">expression</span></a> :=<br/>
{|<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>;<br/>
|}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="expression_const_vlsm_machine" class="idref" href="#expression_const_vlsm_machine"><span class="id" title="definition">expression_const_vlsm_machine</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMMachine"><span class="id" title="record">VLSMMachine</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_const_vlsm_type"><span class="id" title="definition">expression_const_vlsm_type</span></a> :=<br/>
{|<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Program.Basics.html#const"><span class="id" title="definition">const</span></a> <span class="id" title="notation">True</span>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#s0"><span class="id" title="projection">s0</span></a> := <span class="id" title="constructor">populate</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Program.Syntax.html#f5cb26d96fc0400fc3c881290947e554"><span class="id" title="notation">()</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>);<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Program.Basics.html#const"><span class="id" title="definition">const</span></a> <span class="id" title="notation">False</span>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> := <span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Program.Syntax.html#f5cb26d96fc0400fc3c881290947e554"><span class="id" title="notation">()</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#sec_formula.sec_expression_const_vlsm.ct"><span class="id" title="variable">ct</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a> := <span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> <a id="som:24" class="idref" href="#som:24"><span class="id" title="binder">som</span></a> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#som:24"><span class="id" title="variable">som</span></a><span class="id" title="notation">.2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>;<br/>
|}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="expression_const_vlsm" class="idref" href="#expression_const_vlsm"><span class="id" title="definition">expression_const_vlsm</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression"><span class="id" title="definition">expression</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#mk_vlsm"><span class="id" title="constructor">mk_vlsm</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_const_vlsm_machine"><span class="id" title="definition">expression_const_vlsm_machine</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#sec_formula.sec_expression_const_vlsm"><span class="id" title="section">sec_expression_const_vlsm</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab278"></a><h3 class="section">VLSM for the variable rule</h3>


<div class="paragraph"> </div>

  This VLSM has a single state and its labels are the variables.
  Its behavior is to accept no input and to output the expression containing
  just the variable specified by the label of the transition.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_formula.sec_expression_var_vlsm" class="idref" href="#sec_formula.sec_expression_var_vlsm"><span class="id" title="section">sec_expression_var_vlsm</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="expression_var_vlsm_type" class="idref" href="#expression_var_vlsm_type"><span class="id" title="definition">expression_var_vlsm_type</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMType"><span class="id" title="record">VLSMType</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression"><span class="id" title="definition">expression</span></a> :=<br/>
{|<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> := <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#sec_formula.Var"><span class="id" title="variable">Var</span></a>;<br/>
|}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="expression_var_vlsm_machine" class="idref" href="#expression_var_vlsm_machine"><span class="id" title="definition">expression_var_vlsm_machine</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMMachine"><span class="id" title="record">VLSMMachine</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_var_vlsm_type"><span class="id" title="definition">expression_var_vlsm_type</span></a> :=<br/>
{|<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Program.Basics.html#const"><span class="id" title="definition">const</span></a> <span class="id" title="notation">True</span>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#s0"><span class="id" title="projection">s0</span></a> := <span class="id" title="constructor">populate</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Program.Syntax.html#f5cb26d96fc0400fc3c881290947e554"><span class="id" title="notation">()</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>);<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Program.Basics.html#const"><span class="id" title="definition">const</span></a> <span class="id" title="notation">False</span>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> := <span class="id" title="keyword">fun</span> <a id="l:25" class="idref" href="#l:25"><span class="id" title="binder">l</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Program.Syntax.html#f5cb26d96fc0400fc3c881290947e554"><span class="id" title="notation">()</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#PVar"><span class="id" title="constructor">PVar</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#l:25"><span class="id" title="variable">l</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a> := <span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> <a id="som:26" class="idref" href="#som:26"><span class="id" title="binder">som</span></a> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#som:26"><span class="id" title="variable">som</span></a><span class="id" title="notation">.2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>;<br/>
|}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="expression_var_vlsm" class="idref" href="#expression_var_vlsm"><span class="id" title="definition">expression_var_vlsm</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression"><span class="id" title="definition">expression</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#mk_vlsm"><span class="id" title="constructor">mk_vlsm</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_var_vlsm_machine"><span class="id" title="definition">expression_var_vlsm_machine</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#sec_formula.sec_expression_var_vlsm"><span class="id" title="section">sec_expression_var_vlsm</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab279"></a><h3 class="section">VLSM for the negation rule</h3>


<div class="paragraph"> </div>

  This VLSM has a single state and a single label, accepts as input an expression
  and outputs the expression obtained by prefixing the input with the negation
  symbol.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_formula.sec_expression_neg_vlsm" class="idref" href="#sec_formula.sec_expression_neg_vlsm"><span class="id" title="section">sec_expression_neg_vlsm</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="expression_neg_vlsm_type" class="idref" href="#expression_neg_vlsm_type"><span class="id" title="definition">expression_neg_vlsm_type</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMType"><span class="id" title="record">VLSMType</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression"><span class="id" title="definition">expression</span></a> :=<br/>
{|<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>;<br/>
|}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="expression_neg_vlsm_transition" class="idref" href="#expression_neg_vlsm_transition"><span class="id" title="definition">expression_neg_vlsm_transition</span></a> (<span class="id" title="var">_</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>)<br/>
&nbsp;&nbsp;(<a id="som:27" class="idref" href="#som:27"><span class="id" title="binder">som</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression"><span class="id" title="definition">expression</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression"><span class="id" title="definition">expression</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#som:27"><span class="id" title="variable">som</span></a><span class="id" title="notation">.2</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#som:27"><span class="id" title="variable">som</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">m</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Program.Syntax.html#f5cb26d96fc0400fc3c881290947e554"><span class="id" title="notation">()</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Neg"><span class="id" title="constructor">Neg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">m</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="expression_neg_vlsm_machine" class="idref" href="#expression_neg_vlsm_machine"><span class="id" title="definition">expression_neg_vlsm_machine</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMMachine"><span class="id" title="record">VLSMMachine</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_neg_vlsm_type"><span class="id" title="definition">expression_neg_vlsm_type</span></a> :=<br/>
{|<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Program.Basics.html#const"><span class="id" title="definition">const</span></a> <span class="id" title="notation">True</span>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#s0"><span class="id" title="projection">s0</span></a> := <span class="id" title="constructor">populate</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Program.Syntax.html#f5cb26d96fc0400fc3c881290947e554"><span class="id" title="notation">()</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>);<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Program.Basics.html#const"><span class="id" title="definition">const</span></a> <span class="id" title="notation">False</span>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> := <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_neg_vlsm_transition"><span class="id" title="definition">expression_neg_vlsm_transition</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a> := <span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> <a id="som:28" class="idref" href="#som:28"><span class="id" title="binder">som</span></a> =&gt; <span class="id" title="definition">is_Some</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#som:28"><span class="id" title="variable">som</span></a><span class="id" title="notation">.2</span>;<br/>
|}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="expression_neg_vlsm" class="idref" href="#expression_neg_vlsm"><span class="id" title="definition">expression_neg_vlsm</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression"><span class="id" title="definition">expression</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#mk_vlsm"><span class="id" title="constructor">mk_vlsm</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_neg_vlsm_machine"><span class="id" title="definition">expression_neg_vlsm_machine</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#sec_formula.sec_expression_neg_vlsm"><span class="id" title="section">sec_expression_neg_vlsm</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab280"></a><h3 class="section">VLSM for binary connective rules</h3>


<div class="paragraph"> </div>

  This VLSM has a single label and its states are <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a></span> <span class="inlinecode"><a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression"><span class="id" title="definition">expression</span></a></span> with
  <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a></span> being the initial state.
  From the initial state it accepts as input an expression and transitions
  to the state holding that expression.
  From a state holding an expression it accepts as input an expression and
  outputs the connective symbol (parameter) followed by the concatenation of
  the expression in the state and that in the input.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_formula.sec_expression_binop_vlsm" class="idref" href="#sec_formula.sec_expression_binop_vlsm"><span class="id" title="section">sec_expression_binop_vlsm</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;(<a id="binop:29" class="idref" href="#binop:29"><span class="id" title="binder">binop</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#symbol"><span class="id" title="inductive">symbol</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="expression_binop_vlsm_type" class="idref" href="#expression_binop_vlsm_type"><span class="id" title="definition">expression_binop_vlsm_type</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMType"><span class="id" title="record">VLSMType</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression"><span class="id" title="definition">expression</span></a> :=<br/>
{|<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression"><span class="id" title="definition">expression</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>;<br/>
|}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="expression_binop_vlsm_transition" class="idref" href="#expression_binop_vlsm_transition"><span class="id" title="definition">expression_binop_vlsm_transition</span></a> (<span class="id" title="var">_</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>)<br/>
&nbsp;&nbsp;(<a id="som:30" class="idref" href="#som:30"><span class="id" title="binder">som</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression"><span class="id" title="definition">expression</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression"><span class="id" title="definition">expression</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression"><span class="id" title="definition">expression</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression"><span class="id" title="definition">expression</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#som:30"><span class="id" title="variable">som</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#som:30"><span class="id" title="variable">som</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">f</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">f</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">f1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">f2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#sec_formula.sec_expression_binop_vlsm.binop"><span class="id" title="variable">binop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">f1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">f2</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="expression_binop_vlsm_machine" class="idref" href="#expression_binop_vlsm_machine"><span class="id" title="definition">expression_binop_vlsm_machine</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMMachine"><span class="id" title="record">VLSMMachine</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_binop_vlsm_type"><span class="id" title="definition">expression_binop_vlsm_type</span></a> :=<br/>
{|<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> := <span class="id" title="keyword">fun</span> <a id="o:32" class="idref" href="#o:32"><span class="id" title="binder">o</span></a> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#o:32"><span class="id" title="variable">o</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#s0"><span class="id" title="projection">s0</span></a> := <span class="id" title="constructor">populate</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>);<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Program.Basics.html#const"><span class="id" title="definition">const</span></a> <span class="id" title="notation">False</span>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> := <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_binop_vlsm_transition"><span class="id" title="definition">expression_binop_vlsm_transition</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a> := <span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> <a id="som:33" class="idref" href="#som:33"><span class="id" title="binder">som</span></a> =&gt; <span class="id" title="definition">is_Some</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#som:33"><span class="id" title="variable">som</span></a><span class="id" title="notation">.2</span>;<br/>
|}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="expression_binop_vlsm" class="idref" href="#expression_binop_vlsm"><span class="id" title="definition">expression_binop_vlsm</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression"><span class="id" title="definition">expression</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#mk_vlsm"><span class="id" title="constructor">mk_vlsm</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_binop_vlsm_machine"><span class="id" title="definition">expression_binop_vlsm_machine</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#sec_formula.sec_expression_binop_vlsm"><span class="id" title="section">sec_expression_binop_vlsm</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab281"></a><h3 class="section">VLSM for expressions</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_formula.sec_expression_vlsm" class="idref" href="#sec_formula.sec_expression_vlsm"><span class="id" title="section">sec_expression_vlsm</span></a>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="index" class="idref" href="#index"><span class="id" title="definition, inductive"><span id="index_rect" class="id"><span id="index_ind" class="id"><span id="index_rec" class="id"><span id="index_sind" class="id">index</span></span></span></span></span></a> :=<br/>
| <a id="ITop" class="idref" href="#ITop"><span class="id" title="constructor">ITop</span></a><br/>
| <a id="IBot" class="idref" href="#IBot"><span class="id" title="constructor">IBot</span></a><br/>
| <a id="IVar" class="idref" href="#IVar"><span class="id" title="constructor">IVar</span></a><br/>
| <a id="INeg" class="idref" href="#INeg"><span class="id" title="constructor">INeg</span></a><br/>
| <a id="IConj" class="idref" href="#IConj"><span class="id" title="constructor">IConj</span></a><br/>
| <a id="IDisj" class="idref" href="#IDisj"><span class="id" title="constructor">IDisj</span></a><br/>
| <a id="IImpl" class="idref" href="#IImpl"><span class="id" title="constructor">IImpl</span></a><br/>
| <a id="IIff" class="idref" href="#IIff"><span class="id" title="constructor">IIff</span></a>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="index_dec" class="idref" href="#index_dec"><span class="id" title="instance">index_dec</span></a> : <span class="id" title="abbreviation">EqDecision</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#index"><span class="id" title="inductive">index</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> ? ?; <span class="id" title="tactic">unfold</span> <span class="id" title="class">Decision</span>; <span class="id" title="var">decide</span> <span class="id" title="var">equality</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="symbol_to_index" class="idref" href="#symbol_to_index"><span class="id" title="definition">symbol_to_index</span></a> (<a id="s:36" class="idref" href="#s:36"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#symbol"><span class="id" title="inductive">symbol</span></a>) : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#index"><span class="id" title="inductive">index</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#s:36"><span class="id" title="variable">s</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Top"><span class="id" title="constructor">Top</span></a> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#ITop"><span class="id" title="constructor">ITop</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Bot"><span class="id" title="constructor">Bot</span></a> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#IBot"><span class="id" title="constructor">IBot</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#PVar"><span class="id" title="constructor">PVar</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#IVar"><span class="id" title="constructor">IVar</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Neg"><span class="id" title="constructor">Neg</span></a> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#INeg"><span class="id" title="constructor">INeg</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Conj"><span class="id" title="constructor">Conj</span></a> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#IConj"><span class="id" title="constructor">IConj</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Disj"><span class="id" title="constructor">Disj</span></a> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#IDisj"><span class="id" title="constructor">IDisj</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Impl"><span class="id" title="constructor">Impl</span></a> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#IImpl"><span class="id" title="constructor">IImpl</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Iff"><span class="id" title="constructor">Iff</span></a> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#IIff"><span class="id" title="constructor">IIff</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="expression_components" class="idref" href="#expression_components"><span class="id" title="definition">expression_components</span></a> (<a id="i:38" class="idref" href="#i:38"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#index"><span class="id" title="inductive">index</span></a>) : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression"><span class="id" title="definition">expression</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#i:38"><span class="id" title="variable">i</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#ITop"><span class="id" title="constructor">ITop</span></a> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_const_vlsm"><span class="id" title="definition">expression_const_vlsm</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Top"><span class="id" title="constructor">Top</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#IBot"><span class="id" title="constructor">IBot</span></a> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_const_vlsm"><span class="id" title="definition">expression_const_vlsm</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Bot"><span class="id" title="constructor">Bot</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#IVar"><span class="id" title="constructor">IVar</span></a> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_var_vlsm"><span class="id" title="definition">expression_var_vlsm</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#INeg"><span class="id" title="constructor">INeg</span></a> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_neg_vlsm"><span class="id" title="definition">expression_neg_vlsm</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#IConj"><span class="id" title="constructor">IConj</span></a> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_binop_vlsm"><span class="id" title="definition">expression_binop_vlsm</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Conj"><span class="id" title="constructor">Conj</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#IDisj"><span class="id" title="constructor">IDisj</span></a> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_binop_vlsm"><span class="id" title="definition">expression_binop_vlsm</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Disj"><span class="id" title="constructor">Disj</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#IImpl"><span class="id" title="constructor">IImpl</span></a> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_binop_vlsm"><span class="id" title="definition">expression_binop_vlsm</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Impl"><span class="id" title="constructor">Impl</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#IIff"><span class="id" title="constructor">IIff</span></a> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_binop_vlsm"><span class="id" title="definition">expression_binop_vlsm</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Iff"><span class="id" title="constructor">Iff</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="default_label" class="idref" href="#default_label"><span class="id" title="definition">default_label</span></a> (<a id="i:40" class="idref" href="#i:40"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#index"><span class="id" title="inductive">index</span></a>) : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_components"><span class="id" title="definition">expression_components</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#i:40"><span class="id" title="variable">i</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#i:40"><span class="id" title="variable">i</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#IVar"><span class="id" title="constructor">IVar</span></a> =&gt; <span class="id" title="definition">fresh</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Program.Syntax.html#f5cb26d96fc0400fc3c881290947e554"><span class="id" title="notation">()</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="default_composite_label" class="idref" href="#default_composite_label"><span class="id" title="definition">default_composite_label</span></a><br/>
&nbsp;&nbsp;(<a id="i:42" class="idref" href="#i:42"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#index"><span class="id" title="inductive">index</span></a>) : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_components"><span class="id" title="definition">expression_components</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#i:42"><span class="id" title="variable">i</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#default_label"><span class="id" title="definition">default_label</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#i:42"><span class="id" title="variable">i</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="expression_vlsm" class="idref" href="#expression_vlsm"><span class="id" title="definition">expression_vlsm</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression"><span class="id" title="definition">expression</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_components"><span class="id" title="definition">expression_components</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#sec_formula.sec_expression_vlsm"><span class="id" title="section">sec_expression_vlsm</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab282"></a><h2 class="section">Characterization of valid messages as formulas</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_formula.sec_valid_message_char" class="idref" href="#sec_formula.sec_valid_message_char"><span class="id" title="section">sec_valid_message_char</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="well_formed_expression" class="idref" href="#well_formed_expression"><span class="id" title="definition">well_formed_expression</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression"><span class="id" title="definition">expression</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_vlsm"><span class="id" title="definition">expression_vlsm</span></a>.<br/>

<br/>
</div>

<div class="doc">
  We will show below (lemma <span class="inlinecode"><a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula_prefix"><span class="id" title="lemma">flatten_formula_prefix</span></a></span>) that no (strict) prefix of
  a flattened formula can be the flattening of another formula, which is a key
  result for establishing the injectivity of the <span class="inlinecode"><a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a></span> function.

<div class="paragraph"> </div>

  To reach this result, we first define this property and prove several results
  about formulas satisfying it.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="formula_prefix_is_not_formula_prop" class="idref" href="#formula_prefix_is_not_formula_prop"><span class="id" title="definition">formula_prefix_is_not_formula_prop</span></a> (<a id="f1:43" class="idref" href="#f1:43"><span class="id" title="binder">f1</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula"><span class="id" title="inductive">Formula</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:44" class="idref" href="#s:44"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression"><span class="id" title="definition">expression</span></a><span class="id" title="notation">),</span> <span class="id" title="definition">strict</span> <span class="id" title="definition">prefix</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#s:44"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f1:43"><span class="id" title="variable">f1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="f2:45" class="idref" href="#f2:45"><span class="id" title="binder">f2</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula"><span class="id" title="inductive">Formula</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f2:45"><span class="id" title="variable">f2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#s:44"><span class="id" title="variable">s</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="flatten_formula_formula_prefix_is_not_formula_prop_app" class="idref" href="#flatten_formula_formula_prefix_is_not_formula_prop_app"><span class="id" title="lemma">flatten_formula_formula_prefix_is_not_formula_prop_app</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="fa:46" class="idref" href="#fa:46"><span class="id" title="binder">fa</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula"><span class="id" title="inductive">Formula</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#formula_prefix_is_not_formula_prop"><span class="id" title="definition">formula_prefix_is_not_formula_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#fa:46"><span class="id" title="variable">fa</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="fb:47" class="idref" href="#fb:47"><span class="id" title="binder">fb</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula"><span class="id" title="inductive">Formula</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#formula_prefix_is_not_formula_prop"><span class="id" title="definition">formula_prefix_is_not_formula_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#fb:47"><span class="id" title="variable">fb</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="sufa:48" class="idref" href="#sufa:48"><span class="id" title="binder">sufa</span></a> <a id="sufb:49" class="idref" href="#sufb:49"><span class="id" title="binder">sufb</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression"><span class="id" title="definition">expression</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#fa:46"><span class="id" title="variable">fa</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#sufa:48"><span class="id" title="variable">sufa</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#fb:47"><span class="id" title="variable">fb</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#sufb:49"><span class="id" title="variable">sufb</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#fa:46"><span class="id" title="variable">fa</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#fb:47"><span class="id" title="variable">fb</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#sufa:48"><span class="id" title="variable">sufa</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#sufb:49"><span class="id" title="variable">sufb</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">fa</span> <span class="id" title="var">Hfa</span> <span class="id" title="var">fb</span> <span class="id" title="var">Hfb</span> <span class="id" title="var">sufa</span> <span class="id" title="var">sufb</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <span class="id" title="var">fa</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <span class="id" title="var">fb</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> 1; <span class="id" title="var">simplify_list_eq</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="definition">prefix</span> (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <span class="id" title="var">fa</span>) (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <span class="id" title="var">fb</span>))) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hab</span> | <span class="id" title="var">Hab</span>],<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="definition">decide</span> (<span class="id" title="definition">prefix</span> (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <span class="id" title="var">fb</span>) (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <span class="id" title="var">fa</span>))) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hba</span> | <span class="id" title="var">Hba</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">prefix_length_eq</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hba</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">suf</span> -&gt;]; <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_length"><span class="id" title="lemma">app_length</span></a>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="var">exfalso</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hfb</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="var">exfalso</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hfa</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">exfalso</span>; <span class="id" title="var">revert</span> <span class="id" title="var">sufb</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">sufa</span> <span class="id" title="keyword">using</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#rev_ind"><span class="id" title="lemma">rev_ind</span></a>; <span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="var">simplify_list_eq</span>; <span class="id" title="var">contradict</span> <span class="id" title="var">Hba</span>; <span class="id" title="tactic">eexists</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_list_last</span> <span class="id" title="var">sufb</span> <span class="id" title="var">sufb'</span> <span class="id" title="var">b</span> <span class="id" title="var">Hsufb</span>; <span class="id" title="var">simplify_list_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="var">contradict</span> <span class="id" title="var">Hab</span>; <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHsufa</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="flatten_formula_formula_prefix_is_not_formula_prop_app_prefix" class="idref" href="#flatten_formula_formula_prefix_is_not_formula_prop_app_prefix"><span class="id" title="lemma">flatten_formula_formula_prefix_is_not_formula_prop_app_prefix</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="fa1:50" class="idref" href="#fa1:50"><span class="id" title="binder">fa1</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula"><span class="id" title="inductive">Formula</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#formula_prefix_is_not_formula_prop"><span class="id" title="definition">formula_prefix_is_not_formula_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#fa1:50"><span class="id" title="variable">fa1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="fa2:51" class="idref" href="#fa2:51"><span class="id" title="binder">fa2</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula"><span class="id" title="inductive">Formula</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#formula_prefix_is_not_formula_prop"><span class="id" title="definition">formula_prefix_is_not_formula_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#fa2:51"><span class="id" title="variable">fa2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="fb1:52" class="idref" href="#fb1:52"><span class="id" title="binder">fb1</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula"><span class="id" title="inductive">Formula</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#formula_prefix_is_not_formula_prop"><span class="id" title="definition">formula_prefix_is_not_formula_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#fb1:52"><span class="id" title="variable">fb1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="fb2:53" class="idref" href="#fb2:53"><span class="id" title="binder">fb2</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula"><span class="id" title="inductive">Formula</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#formula_prefix_is_not_formula_prop"><span class="id" title="definition">formula_prefix_is_not_formula_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#fb2:53"><span class="id" title="variable">fb2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#fb1:52"><span class="id" title="variable">fb1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#fb2:53"><span class="id" title="variable">fb2</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">prefix_of</span><span class="id" title="notation">`</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#fa1:50"><span class="id" title="variable">fa1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#fa2:51"><span class="id" title="variable">fa2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#fa1:50"><span class="id" title="variable">fa1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#fa2:51"><span class="id" title="variable">fa2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#fb1:52"><span class="id" title="variable">fb1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#fb2:53"><span class="id" title="variable">fb2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">fa1</span> <span class="id" title="var">Hfa1</span> <span class="id" title="var">fa2</span> <span class="id" title="var">Hfa2</span> <span class="id" title="var">fb1</span> <span class="id" title="var">Hfb1</span> <span class="id" title="var">fb2</span> <span class="id" title="var">Hfb2</span> [<span class="id" title="var">suf</span> <span class="id" title="var">Hpre</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>, &lt;- (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <span class="id" title="var">fa2</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">Hpre</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula_formula_prefix_is_not_formula_prop_app"><span class="id" title="lemma">flatten_formula_formula_prefix_is_not_formula_prop_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpre</span> <span class="id" title="keyword">as</span> [-&gt; <span class="id" title="var">Hpre</span>]; [| <span class="id" title="var">done</span>..].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula_formula_prefix_is_not_formula_prop_app"><span class="id" title="lemma">flatten_formula_formula_prefix_is_not_formula_prop_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpre</span> <span class="id" title="keyword">as</span> [-&gt; <span class="id" title="var">_</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="flatten_formula_prefix_helper" class="idref" href="#flatten_formula_prefix_helper"><span class="id" title="lemma">flatten_formula_prefix_helper</span></a><br/>
&nbsp;&nbsp;(<a id="f1_1:54" class="idref" href="#f1_1:54"><span class="id" title="binder">f1_1</span></a> <a id="f1_2:55" class="idref" href="#f1_2:55"><span class="id" title="binder">f1_2</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula"><span class="id" title="inductive">Formula</span></a>)<br/>
&nbsp;&nbsp;(<a id="IHn:58" class="idref" href="#IHn:58"><span class="id" title="binder">IHn</span></a> : <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="y:56" class="idref" href="#y:56"><span class="id" title="binder">y</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#y:56"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f1_1:54"><span class="id" title="variable">f1_1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f1_2:55"><span class="id" title="variable">f1_2</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="f1:57" class="idref" href="#f1:57"><span class="id" title="binder">f1</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula"><span class="id" title="inductive">Formula</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#y:56"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f1:57"><span class="id" title="variable">f1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#formula_prefix_is_not_formula_prop"><span class="id" title="definition">formula_prefix_is_not_formula_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f1:57"><span class="id" title="variable">f1</span></a>)<br/>
&nbsp;&nbsp;(<a id="suf:59" class="idref" href="#suf:59"><span class="id" title="binder">suf</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#symbol"><span class="id" title="inductive">symbol</span></a>)<br/>
&nbsp;&nbsp;(<a id="f2_1:60" class="idref" href="#f2_1:60"><span class="id" title="binder">f2_1</span></a> <a id="f2_2:61" class="idref" href="#f2_2:61"><span class="id" title="binder">f2_2</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula"><span class="id" title="inductive">Formula</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hpre:62" class="idref" href="#Hpre:62"><span class="id" title="binder">Hpre</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f1_1:54"><span class="id" title="variable">f1_1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f1_2:55"><span class="id" title="variable">f1_2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f2_1:60"><span class="id" title="variable">f2_1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f2_2:61"><span class="id" title="variable">f2_2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#suf:59"><span class="id" title="variable">suf</span></a>)<br/>
&nbsp;&nbsp;(<a id="s:63" class="idref" href="#s:63"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#symbol"><span class="id" title="inductive">symbol</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#s:63"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f1_1:54"><span class="id" title="variable">f1_1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f1_2:55"><span class="id" title="variable">f1_2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">`</span><span class="id" title="notation">prefix_of</span><span class="id" title="notation">`</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#s:63"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f2_1:60"><span class="id" title="variable">f2_1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f2_2:61"><span class="id" title="variable">f2_2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpre</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula_formula_prefix_is_not_formula_prop_app_prefix"><span class="id" title="lemma">flatten_formula_formula_prefix_is_not_formula_prop_app_prefix</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">done</span> | .. | <span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span>]; (<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHn</span>; [| <span class="id" title="var">done</span>]).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_length"><span class="id" title="lemma">app_length</span></a>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_length"><span class="id" title="lemma">app_length</span></a>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hpre</span>, !<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_length"><span class="id" title="lemma">app_length</span></a>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hpre</span>, !<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_length"><span class="id" title="lemma">app_length</span></a>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="flatten_formula_prefix" class="idref" href="#flatten_formula_prefix"><span class="id" title="lemma">flatten_formula_prefix</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="f1:64" class="idref" href="#f1:64"><span class="id" title="binder">f1</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula"><span class="id" title="inductive">Formula</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#formula_prefix_is_not_formula_prop"><span class="id" title="definition">formula_prefix_is_not_formula_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f1:64"><span class="id" title="variable">f1</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">f1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <span class="id" title="var">f1</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">f1</span> <span class="id" title="var">Heqn</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">n</span> <span class="id" title="var">IHn</span>] <span class="id" title="keyword">using</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Wf.html#well_founded_induction"><span class="id" title="lemma">well_founded_induction</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Arith.Wf_nat.html#lt_wf"><span class="id" title="lemma">lt_wf</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">f1</span> -&gt; <span class="id" title="var">s</span> [[<span class="id" title="var">suf</span> <span class="id" title="var">Hpre</span>] <span class="id" title="var">Hproper</span>] <span class="id" title="var">f2</span> &lt;-.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">f1</span>, <span class="id" title="var">f2</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>; <span class="id" title="var">simplify_list_eq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">done</span> | <span class="id" title="var">done</span> | <span class="id" title="var">done</span> | | <span class="id" title="tactic">by</span> <span class="id" title="var">contradict</span> <span class="id" title="var">Hproper</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula_prefix_helper"><span class="id" title="lemma">flatten_formula_prefix_helper</span></a>..].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHn</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">f1</span> := <span class="id" title="var">f1</span>) (<span class="id" title="var">f2</span> := <span class="id" title="var">f2</span>); <span class="id" title="var">cycle</span> 1; [<span class="id" title="var">done</span> | | <span class="id" title="var">done</span> | <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">suf'</span> <span class="id" title="var">Hsuf'</span>]; <span class="id" title="var">contradict</span> <span class="id" title="var">Hproper</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">suf'</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hsuf'</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="flatten_formula_common_prefix" class="idref" href="#flatten_formula_common_prefix"><span class="id" title="lemma">flatten_formula_common_prefix</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="fa:65" class="idref" href="#fa:65"><span class="id" title="binder">fa</span></a> <a id="fb:66" class="idref" href="#fb:66"><span class="id" title="binder">fb</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula"><span class="id" title="inductive">Formula</span></a>) (<a id="sufa:67" class="idref" href="#sufa:67"><span class="id" title="binder">sufa</span></a> <a id="sufb:68" class="idref" href="#sufb:68"><span class="id" title="binder">sufb</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression"><span class="id" title="definition">expression</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#fa:65"><span class="id" title="variable">fa</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#sufa:67"><span class="id" title="variable">sufa</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#fb:66"><span class="id" title="variable">fb</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#sufb:68"><span class="id" title="variable">sufb</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#fa:65"><span class="id" title="variable">fa</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#fb:66"><span class="id" title="variable">fb</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#sufa:67"><span class="id" title="variable">sufa</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#sufb:68"><span class="id" title="variable">sufb</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Hpre</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula_formula_prefix_is_not_formula_prop_app"><span class="id" title="lemma">flatten_formula_formula_prefix_is_not_formula_prop_app</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula_prefix"><span class="id" title="lemma">flatten_formula_prefix</span></a>.. |].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="flatten_formula_inj" class="idref" href="#flatten_formula_inj"><span class="id" title="instance">flatten_formula_inj</span></a> : <span class="id" title="class">Inj</span> <span class="id" title="notation">(=)</span> <span class="id" title="notation">(=)</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">f</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">f</span>; <span class="id" title="tactic">intros</span> []; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">inversion</span> 1 <span class="id" title="keyword">as</span> [<span class="id" title="var">Heq</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[| | | <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHf</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span> <span class="id" title="keyword">as</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula_common_prefix"><span class="id" title="lemma">flatten_formula_common_prefix</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span> <span class="id" title="keyword">as</span> []; <span class="id" title="var">erewrite</span> <span class="id" title="var">IHf1</span>, <span class="id" title="var">IHf2</span>..].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="binop_state_cast" class="idref" href="#binop_state_cast"><span class="id" title="definition">binop_state_cast</span></a><br/>
&nbsp;&nbsp;(<a id="si:69" class="idref" href="#si:69"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression"><span class="id" title="definition">expression</span></a>) (<a id="j:70" class="idref" href="#j:70"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#index"><span class="id" title="inductive">index</span></a>) : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_components"><span class="id" title="definition">expression_components</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#j:70"><span class="id" title="variable">j</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#j:70"><span class="id" title="variable">j</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#ITop"><span class="id" title="constructor">ITop</span></a> | <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#IBot"><span class="id" title="constructor">IBot</span></a> | <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#IVar"><span class="id" title="constructor">IVar</span></a> | <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#INeg"><span class="id" title="constructor">INeg</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Program.Syntax.html#f5cb26d96fc0400fc3c881290947e554"><span class="id" title="notation">()</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#si:69"><span class="id" title="variable">si</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="BinOp" class="idref" href="#BinOp"><span class="id" title="definition, inductive"><span id="BinOp_ind" class="id"><span id="BinOp_sind" class="id">BinOp</span></span></span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#symbol"><span class="id" title="inductive">symbol</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="bin_op_conj" class="idref" href="#bin_op_conj"><span class="id" title="constructor">bin_op_conj</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#BinOp:72"><span class="id" title="inductive">BinOp</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Conj"><span class="id" title="constructor">Conj</span></a><br/>
| <a id="bin_op_disj" class="idref" href="#bin_op_disj"><span class="id" title="constructor">bin_op_disj</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#BinOp:72"><span class="id" title="inductive">BinOp</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Disj"><span class="id" title="constructor">Disj</span></a><br/>
| <a id="bin_op_impl" class="idref" href="#bin_op_impl"><span class="id" title="constructor">bin_op_impl</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#BinOp:72"><span class="id" title="inductive">BinOp</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Impl"><span class="id" title="constructor">Impl</span></a><br/>
| <a id="bin_op_iff" class="idref" href="#bin_op_iff"><span class="id" title="constructor">bin_op_iff</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#BinOp:72"><span class="id" title="inductive">BinOp</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Iff"><span class="id" title="constructor">Iff</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="well_formed_flatten_formula_helper" class="idref" href="#well_formed_flatten_formula_helper"><span class="id" title="lemma">well_formed_flatten_formula_helper</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="binop:74" class="idref" href="#binop:74"><span class="id" title="binder">binop</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#symbol"><span class="id" title="inductive">symbol</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#BinOp"><span class="id" title="inductive">BinOp</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#binop:74"><span class="id" title="variable">binop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="f1:75" class="idref" href="#f1:75"><span class="id" title="binder">f1</span></a> <a id="f2:76" class="idref" href="#f2:76"><span class="id" title="binder">f2</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula"><span class="id" title="inductive">Formula</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#well_formed_expression"><span class="id" title="definition">well_formed_expression</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f1:75"><span class="id" title="variable">f1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#well_formed_expression"><span class="id" title="definition">well_formed_expression</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f2:76"><span class="id" title="variable">f2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#well_formed_expression"><span class="id" title="definition">well_formed_expression</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#binop:74"><span class="id" title="variable">binop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f1:75"><span class="id" title="variable">f1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f2:76"><span class="id" title="variable">f2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">binop</span> <span class="id" title="var">Hbinop</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">Hf1</span> <span class="id" title="var">Hf2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">i</span> := <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#symbol_to_index"><span class="id" title="definition">symbol_to_index</span></a> <span class="id" title="var">binop</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">s0</span> := <span class="id" title="notation">`</span> <span class="id" title="notation">(</span><a class="idref" href="VLSM.Core.Composition.html#composite_s0"><span class="id" title="definition">composite_s0</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_components"><span class="id" title="definition">expression_components</span></a><span class="id" title="notation">)</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">s1</span> := <a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_components"><span class="id" title="definition">expression_components</span></a> <span class="id" title="var">s0</span> <span class="id" title="var">i</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#binop_state_cast"><span class="id" title="definition">binop_state_cast</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <span class="id" title="var">f1</span>) <span class="id" title="var">i</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Ht1</span> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_vlsm"><span class="id" title="definition">expression_vlsm</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#default_composite_label"><span class="id" title="definition">default_composite_label</span></a> <span class="id" title="var">i</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <span class="id" title="var">f1</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_is_valid"><span class="id" title="lemma">initial_state_is_valid</span></a>; <span class="id" title="tactic">destruct</span> <a class="idref" href="VLSM.Core.Composition.html#composite_s0"><span class="id" title="definition">composite_s0</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hbinop</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hbinop</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_vlsm"><span class="id" title="definition">expression_vlsm</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#default_composite_label"><span class="id" title="definition">default_composite_label</span></a> <span class="id" title="var">i</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <span class="id" title="var">f2</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<span class="id" title="var">binop</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <span class="id" title="var">f1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <span class="id" title="var">f2</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_out"><span class="id" title="lemma">input_valid_transition_out</span></a> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_destination"><span class="id" title="lemma">input_valid_transition_destination</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hbinop</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hbinop</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">binop</span> <span class="id" title="var">i</span> <span class="id" title="var">s1</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>, <a class="idref" href="VLSM.Core.Composition.html#state_update_twice"><span class="id" title="lemma">state_update_twice</span></a>, <a class="idref" href="VLSM.Core.Composition.html#state_update_id"><span class="id" title="lemma">state_update_id</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The flattening of a <span class="inlinecode"><a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula"><span class="id" title="inductive">Formula</span></a></span> is a <span class="inlinecode"><a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#well_formed_expression"><span class="id" title="definition">well_formed_expression</span></a></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <a id="flatten_formulas_are_well_formed_expressions" class="idref" href="#flatten_formulas_are_well_formed_expressions"><span class="id" title="lemma">flatten_formulas_are_well_formed_expressions</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="f:77" class="idref" href="#f:77"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula"><span class="id" title="inductive">Formula</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#well_formed_expression"><span class="id" title="definition">well_formed_expression</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f:77"><span class="id" title="variable">f</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">f</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">cut</span> (<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_vlsm"><span class="id" title="definition">expression_vlsm</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#ITop"><span class="id" title="constructor">ITop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Program.Syntax.html#f5cb26d96fc0400fc3c881290947e554"><span class="id" title="notation">()</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="notation">`</span> <span class="id" title="notation">(</span><a class="idref" href="VLSM.Core.Composition.html#composite_s0"><span class="id" title="definition">composite_s0</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_components"><span class="id" title="definition">expression_components</span></a><span class="id" title="notation">)</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="notation">`</span> <span class="id" title="notation">(</span><a class="idref" href="VLSM.Core.Composition.html#composite_s0"><span class="id" title="definition">composite_s0</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_components"><span class="id" title="definition">expression_components</span></a><span class="id" title="notation">)</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Top"><span class="id" title="constructor">Top</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_out"><span class="id" title="lemma">input_valid_transition_out</span></a> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_is_valid"><span class="id" title="lemma">initial_state_is_valid</span></a>; <span class="id" title="tactic">destruct</span> <a class="idref" href="VLSM.Core.Composition.html#composite_s0"><span class="id" title="definition">composite_s0</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_None"><span class="id" title="lemma">option_valid_message_None</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_id"><span class="id" title="lemma">state_update_id</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">cut</span> (<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_vlsm"><span class="id" title="definition">expression_vlsm</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#IBot"><span class="id" title="constructor">IBot</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Program.Syntax.html#f5cb26d96fc0400fc3c881290947e554"><span class="id" title="notation">()</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="notation">`</span> <span class="id" title="notation">(</span><a class="idref" href="VLSM.Core.Composition.html#composite_s0"><span class="id" title="definition">composite_s0</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_components"><span class="id" title="definition">expression_components</span></a><span class="id" title="notation">)</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="notation">`</span> <span class="id" title="notation">(</span><a class="idref" href="VLSM.Core.Composition.html#composite_s0"><span class="id" title="definition">composite_s0</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_components"><span class="id" title="definition">expression_components</span></a><span class="id" title="notation">)</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Bot"><span class="id" title="constructor">Bot</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_out"><span class="id" title="lemma">input_valid_transition_out</span></a> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_is_valid"><span class="id" title="lemma">initial_state_is_valid</span></a>; <span class="id" title="tactic">destruct</span> <a class="idref" href="VLSM.Core.Composition.html#composite_s0"><span class="id" title="definition">composite_s0</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_None"><span class="id" title="lemma">option_valid_message_None</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_id"><span class="id" title="lemma">state_update_id</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">cut</span> (<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_vlsm"><span class="id" title="definition">expression_vlsm</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#IVar"><span class="id" title="constructor">IVar</span></a> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="notation">`</span> <span class="id" title="notation">(</span><a class="idref" href="VLSM.Core.Composition.html#composite_s0"><span class="id" title="definition">composite_s0</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_components"><span class="id" title="definition">expression_components</span></a><span class="id" title="notation">)</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="notation">`</span> <span class="id" title="notation">(</span><a class="idref" href="VLSM.Core.Composition.html#composite_s0"><span class="id" title="definition">composite_s0</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_components"><span class="id" title="definition">expression_components</span></a><span class="id" title="notation">)</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#PVar"><span class="id" title="constructor">PVar</span></a> <span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_out"><span class="id" title="lemma">input_valid_transition_out</span></a> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_is_valid"><span class="id" title="lemma">initial_state_is_valid</span></a>; <span class="id" title="tactic">destruct</span> <a class="idref" href="VLSM.Core.Composition.html#composite_s0"><span class="id" title="definition">composite_s0</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_None"><span class="id" title="lemma">option_valid_message_None</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_id"><span class="id" title="lemma">state_update_id</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">cut</span> (<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_vlsm"><span class="id" title="definition">expression_vlsm</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#INeg"><span class="id" title="constructor">INeg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Program.Syntax.html#f5cb26d96fc0400fc3c881290947e554"><span class="id" title="notation">()</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="notation">`</span> <span class="id" title="notation">(</span><a class="idref" href="VLSM.Core.Composition.html#composite_s0"><span class="id" title="definition">composite_s0</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_components"><span class="id" title="definition">expression_components</span></a><span class="id" title="notation">)</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <span class="id" title="var">f</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="notation">`</span> <span class="id" title="notation">(</span><a class="idref" href="VLSM.Core.Composition.html#composite_s0"><span class="id" title="definition">composite_s0</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_components"><span class="id" title="definition">expression_components</span></a><span class="id" title="notation">)</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Neg"><span class="id" title="constructor">Neg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <span class="id" title="var">f</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_out"><span class="id" title="lemma">input_valid_transition_out</span></a> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_is_valid"><span class="id" title="lemma">initial_state_is_valid</span></a>; <span class="id" title="tactic">destruct</span> <a class="idref" href="VLSM.Core.Composition.html#composite_s0"><span class="id" title="definition">composite_s0</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_id"><span class="id" title="lemma">state_update_id</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#well_formed_flatten_formula_helper"><span class="id" title="lemma">well_formed_flatten_formula_helper</span></a>; [<span class="id" title="tactic">constructor</span> | ..].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#well_formed_flatten_formula_helper"><span class="id" title="lemma">well_formed_flatten_formula_helper</span></a>; [<span class="id" title="tactic">constructor</span> | ..].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#well_formed_flatten_formula_helper"><span class="id" title="lemma">well_formed_flatten_formula_helper</span></a>; [<span class="id" title="tactic">constructor</span> | ..].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#well_formed_flatten_formula_helper"><span class="id" title="lemma">well_formed_flatten_formula_helper</span></a>; [<span class="id" title="tactic">constructor</span> | ..].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="binop_state_proj" class="idref" href="#binop_state_proj"><span class="id" title="definition">binop_state_proj</span></a><br/>
&nbsp;&nbsp;(<a id="s:78" class="idref" href="#s:78"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_components"><span class="id" title="definition">expression_components</span></a>) (<a id="i:79" class="idref" href="#i:79"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#index"><span class="id" title="inductive">index</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression"><span class="id" title="definition">expression</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#i:79"><span class="id" title="variable">i</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#ITop"><span class="id" title="constructor">ITop</span></a> | <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#IBot"><span class="id" title="constructor">IBot</span></a> | <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#IVar"><span class="id" title="constructor">IVar</span></a> | <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#INeg"><span class="id" title="constructor">INeg</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">i</span> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#s:78"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#i:79"><span class="id" title="variable">i</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="well_formed_is_flatten_formula_helper" class="idref" href="#well_formed_is_flatten_formula_helper"><span class="id" title="lemma">well_formed_is_flatten_formula_helper</span></a><br/>
&nbsp;&nbsp;(<a id="binop:81" class="idref" href="#binop:81"><span class="id" title="binder">binop</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#symbol"><span class="id" title="inductive">symbol</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hbinop:82" class="idref" href="#Hbinop:82"><span class="id" title="binder">Hbinop</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#BinOp"><span class="id" title="inductive">BinOp</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#binop:81"><span class="id" title="variable">binop</span></a>)<br/>
&nbsp;&nbsp;(<a id="i:83" class="idref" href="#i:83"><span class="id" title="binder">i</span></a> := <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#symbol_to_index"><span class="id" title="definition">symbol_to_index</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#binop:81"><span class="id" title="variable">binop</span></a>)<br/>
&nbsp;&nbsp;(<a id="e:84" class="idref" href="#e:84"><span class="id" title="binder">e</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression"><span class="id" title="definition">expression</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hind:88" class="idref" href="#Hind:88"><span class="id" title="binder">Hind</span></a> : <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="y:85" class="idref" href="#y:85"><span class="id" title="binder">y</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#y:85"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#e:84"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="e:86" class="idref" href="#e:86"><span class="id" title="binder">e</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression"><span class="id" title="definition">expression</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#y:85"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#e:86"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#well_formed_expression"><span class="id" title="definition">well_formed_expression</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#e:86"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="f:87" class="idref" href="#f:87"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula"><span class="id" title="inductive">Formula</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f:87"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#e:86"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;(<a id="s0:89" class="idref" href="#s0:89"><span class="id" title="binder">s0</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_components"><span class="id" title="definition">expression_components</span></a>)<br/>
&nbsp;&nbsp;(<a id="si':90" class="idref" href="#si':90"><span class="id" title="binder">si'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression"><span class="id" title="definition">expression</span></a>)<br/>
&nbsp;&nbsp;(<a id="om:91" class="idref" href="#om:91"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression"><span class="id" title="definition">expression</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hom:92" class="idref" href="#Hom:92"><span class="id" title="binder">Hom</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_prop"><span class="id" title="definition">option_valid_message_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_vlsm"><span class="id" title="definition">expression_vlsm</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#om:91"><span class="id" title="variable">om</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hti:93" class="idref" href="#Hti:93"><span class="id" title="binder">Hti</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> (<span class="id" title="var">VLSMMachine</span> := <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_binop_vlsm_machine"><span class="id" title="definition">expression_binop_vlsm_machine</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#binop:81"><span class="id" title="variable">binop</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Program.Syntax.html#f5cb26d96fc0400fc3c881290947e554"><span class="id" title="notation">()</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#binop_state_proj"><span class="id" title="definition">binop_state_proj</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#s0:89"><span class="id" title="variable">s0</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#i:83"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#om:91"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#si':90"><span class="id" title="variable">si'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#e:84"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hs0:94" class="idref" href="#Hs0:94"><span class="id" title="binder">Hs0</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_vlsm"><span class="id" title="definition">expression_vlsm</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#s0:89"><span class="id" title="variable">s0</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="f:95" class="idref" href="#f:95"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula"><span class="id" title="inductive">Formula</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f:95"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#e:84"><span class="id" title="variable">e</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#binop_state_proj"><span class="id" title="definition">binop_state_proj</span></a> <span class="id" title="var">s0</span> <span class="id" title="var">i</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">e1</span> |] <span class="id" title="var">eqn</span>: <span class="id" title="var">Hs0i</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">om</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hti</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">om</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">m</span> |]; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hti</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hti</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.ProjectionTraces.html#free_valid_state_component_initial_or_transition"><span class="id" title="lemma">free_valid_state_component_initial_or_transition</span></a> <span class="id" title="var">i</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hs0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hs0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hs0</span> | (<span class="id" title="var">l</span> &amp; <span class="id" title="var">si</span> &amp; <span class="id" title="var">iom</span> &amp; <span class="id" title="var">oom</span> &amp; (<span class="id" title="var">_</span> &amp; <span class="id" title="var">Hiom</span> &amp; <span class="id" title="var">Hvs0</span>) &amp; <span class="id" title="var">Ht</span>)];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hbinop</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">congruence</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">state_update_simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Hind</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hom</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">f2</span> <span class="id" title="var">Hf2</span>]; <span class="id" title="var">cycle</span> 2;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">done</span> | | <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_length"><span class="id" title="lemma">app_length</span></a>; <span class="id" title="var">lia</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="f1:96" class="idref" href="#f1:96"><span class="id" title="binder"><span id="f1:97" class="id">f1</span></span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula"><span class="id" title="inductive">Formula</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f1:96"><span class="id" title="variable">f1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">e1</span>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">intros</span> [<span class="id" title="var">f1</span> &lt;-]; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hbinop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> (<span class="id" title="var">f1</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#bbbda3681827f271e02232c943f22ca3"><span class="id" title="notation">∧</span></a> <span class="id" title="var">f2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> (<span class="id" title="var">f1</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#e45beab8340f99d309f9f644ee3f5443"><span class="id" title="notation">∨</span></a> <span class="id" title="var">f2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> (<span class="id" title="var">f1</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#0542a2c9d6b6fa3ab8217093a0f6e703"><span class="id" title="notation">→</span></a> <span class="id" title="var">f2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> (<span class="id" title="var">f1</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#1da3ccfc5d2cee3f42016cfea3615111"><span class="id" title="notation">↔</span></a> <span class="id" title="var">f2</span>).<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Hind</span>; <span class="id" title="var">cycle</span> 1; [<span class="id" title="var">done</span> | | <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_length"><span class="id" title="lemma">app_length</span></a>; <span class="id" title="var">lia</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">si</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">iom</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="var">eqn</span>: <span class="id" title="var">Hti</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Heq</span>]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq</span>, <a class="idref" href="VLSM.Core.Composition.html#state_update_twice"><span class="id" title="lemma">state_update_twice</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs0i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hbinop</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">binop</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hvs0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">im</span> <span class="id" title="var">Him</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">state_update_simpl</span>; <span class="id" title="tactic">subst</span>; (<span class="id" title="tactic">destruct</span> <span class="id" title="var">si</span>; [<span class="id" title="var">done</span> |]);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hti</span>; <span class="id" title="tactic">subst</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Any <span class="inlinecode"><a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#well_formed_expression"><span class="id" title="definition">well_formed_expression</span></a></span> is the flattening of a <span class="inlinecode"><a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula"><span class="id" title="inductive">Formula</span></a></span>.

</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <a id="well_formed_expression_are_flatten_formulas" class="idref" href="#well_formed_expression_are_flatten_formulas"><span class="id" title="lemma">well_formed_expression_are_flatten_formulas</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="e:98" class="idref" href="#e:98"><span class="id" title="binder">e</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression"><span class="id" title="definition">expression</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#well_formed_expression"><span class="id" title="definition">well_formed_expression</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#e:98"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="f:99" class="idref" href="#f:99"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula"><span class="id" title="inductive">Formula</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f:99"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#e:98"><span class="id" title="variable">e</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <span class="id" title="var">e</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">e</span> <span class="id" title="var">Heqn</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">n</span> <span class="id" title="var">Hind</span>] <span class="id" title="keyword">using</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Wf.html#well_founded_ind"><span class="id" title="lemma">well_founded_ind</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Arith.Wf_nat.html#lt_wf"><span class="id" title="lemma">lt_wf</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">e</span> -&gt; [<span class="id" title="var">s</span> <span class="id" title="var">He</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">He</span>; <span class="id" title="tactic">subst</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hom</span> <span class="id" title="keyword">as</span> ([] &amp; [<span class="id" title="var">im</span> <span class="id" title="var">Him</span>] &amp; <span class="id" title="var">Hom</span>) |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">i</span> <span class="id" title="var">li</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hs0</span> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_vlsm"><span class="id" title="definition">expression_vlsm</span></a> <span class="id" title="var">s0</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eexists</span>; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <span class="id" title="var">li</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s0</span> <span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">si'</span> <span class="id" title="var">om'</span>] <span class="id" title="var">eqn</span>: <span class="id" title="var">Hti</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hti</span>; <span class="id" title="tactic">exists</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#8b6810fcf62ee6dd37281094e9454bfe"><span class="id" title="notation">⊤</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hti</span>; <span class="id" title="tactic">exists</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f6e9a7551d948b451085355665e6f3f6"><span class="id" title="notation">⊥</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hti</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">li</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">om</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">m</span> |]; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hti</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hm</span> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#well_formed_expression"><span class="id" title="definition">well_formed_expression</span></a> <span class="id" title="var">m</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eexists</span>; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">Hind</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <span class="id" title="var">m</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">fm</span> &lt;-]; [<span class="id" title="tactic">exists</span> (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#FNeg"><span class="id" title="constructor">FNeg</span></a> <span class="id" title="var">fm</span>) | <span class="id" title="var">cbn</span>; <span class="id" title="var">lia</span> |].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#well_formed_is_flatten_formula_helper"><span class="id" title="lemma">well_formed_is_flatten_formula_helper</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">constructor</span> | | <span class="id" title="tactic">exists</span> <span class="id" title="var">_s</span> | <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hti</span> | ..].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#well_formed_is_flatten_formula_helper"><span class="id" title="lemma">well_formed_is_flatten_formula_helper</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">constructor</span> | | <span class="id" title="tactic">exists</span> <span class="id" title="var">_s</span> | <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hti</span> | ..].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#well_formed_is_flatten_formula_helper"><span class="id" title="lemma">well_formed_is_flatten_formula_helper</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">constructor</span> | | <span class="id" title="tactic">exists</span> <span class="id" title="var">_s</span> | <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hti</span> | ..].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#well_formed_is_flatten_formula_helper"><span class="id" title="lemma">well_formed_is_flatten_formula_helper</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">constructor</span> | | <span class="id" title="tactic">exists</span> <span class="id" title="var">_s</span> | <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hti</span> | ..].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  <span class="inlinecode"><a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#well_formed_expression"><span class="id" title="definition">well_formed_expression</span></a></span>s, that is, valid messages of the <span class="inlinecode"><a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression_vlsm"><span class="id" title="definition">expression_vlsm</span></a></span>
  coincide with flatten <span class="inlinecode"><a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula"><span class="id" title="inductive">Formula</span></a></span>s.

</div>
<div class="code">
<span class="id" title="keyword">Corollary</span> <a id="well_formed_expression_flatten_formula_equiv" class="idref" href="#well_formed_expression_flatten_formula_equiv"><span class="id" title="lemma">well_formed_expression_flatten_formula_equiv</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="e:100" class="idref" href="#e:100"><span class="id" title="binder">e</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#expression"><span class="id" title="definition">expression</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#well_formed_expression"><span class="id" title="definition">well_formed_expression</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#e:100"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="f:101" class="idref" href="#f:101"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula"><span class="id" title="inductive">Formula</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formula"><span class="id" title="definition">flatten_formula</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f:101"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#e:100"><span class="id" title="variable">e</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#well_formed_expression_are_flatten_formulas"><span class="id" title="lemma">well_formed_expression_are_flatten_formulas</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> [<span class="id" title="var">f</span> &lt;-]; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#flatten_formulas_are_well_formed_expressions"><span class="id" title="lemma">flatten_formulas_are_well_formed_expressions</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#sec_formula.sec_valid_message_char"><span class="id" title="section">sec_valid_message_char</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab283"></a><h2 class="section">Interpretation of formulas</h2>


<div class="paragraph"> </div>

  We define a function to interpret formulas as Coq terms in the <span class="inlinecode"><span class="id" title="keyword">Prop</span></span> sort,
  given that all atoms are mapped to <span class="inlinecode"><span class="id" title="keyword">Prop</span></span> terms.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_formula.sec_formula_interpretation" class="idref" href="#sec_formula.sec_formula_interpretation"><span class="id" title="section">sec_formula_interpretation</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;(<a id="formula_var_interp:102" class="idref" href="#formula_var_interp:102"><span class="id" title="binder">formula_var_interp</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#sec_formula.Var"><span class="id" title="variable">Var</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>).<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="formula_vars" class="idref" href="#formula_vars"><span class="id" title="definition">formula_vars</span></a> (<a id="f:103" class="idref" href="#f:103"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula"><span class="id" title="inductive">Formula</span></a>) : <span class="id" title="record">listset</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#sec_formula.Var"><span class="id" title="variable">Var</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f:103"><span class="id" title="variable">f</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#8b6810fcf62ee6dd37281094e9454bfe"><span class="id" title="notation">⊤</span></a> | <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f6e9a7551d948b451085355665e6f3f6"><span class="id" title="notation">⊥</span></a> =&gt; <span class="id" title="notation">∅</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#FVar"><span class="id" title="constructor">FVar</span></a> <span class="id" title="var">x</span> =&gt; <span class="id" title="notation">{[</span><span class="id" title="var">x</span><span class="id" title="notation">]}</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#3543b590674c2406dadbf42bd58f6700"><span class="id" title="notation">¬</span></a> <span class="id" title="var">f</span> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#formula_vars:104"><span class="id" title="definition">formula_vars</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f:103"><span class="id" title="variable">f</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">f1</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#bbbda3681827f271e02232c943f22ca3"><span class="id" title="notation">∧</span></a> <span class="id" title="var">f2</span> | <span class="id" title="var">f1</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#e45beab8340f99d309f9f644ee3f5443"><span class="id" title="notation">∨</span></a> <span class="id" title="var">f2</span> | <span class="id" title="var">f1</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#0542a2c9d6b6fa3ab8217093a0f6e703"><span class="id" title="notation">→</span></a> <span class="id" title="var">f2</span> | <span class="id" title="var">f1</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#1da3ccfc5d2cee3f42016cfea3615111"><span class="id" title="notation">↔</span></a> <span class="id" title="var">f2</span> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#formula_vars:104"><span class="id" title="definition">formula_vars</span></a> <span class="id" title="var">f1</span> <span class="id" title="notation">∪</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#formula_vars:104"><span class="id" title="definition">formula_vars</span></a> <span class="id" title="var">f2</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="formula_interp" class="idref" href="#formula_interp"><span class="id" title="definition">formula_interp</span></a> (<a id="f:106" class="idref" href="#f:106"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula"><span class="id" title="inductive">Formula</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f:106"><span class="id" title="variable">f</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#8b6810fcf62ee6dd37281094e9454bfe"><span class="id" title="notation">⊤</span></a> =&gt; <span class="id" title="notation">True</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f6e9a7551d948b451085355665e6f3f6"><span class="id" title="notation">⊥</span></a> =&gt; <span class="id" title="notation">False</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#FVar"><span class="id" title="constructor">FVar</span></a> <span class="id" title="var">x</span> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#sec_formula.sec_formula_interpretation.formula_var_interp"><span class="id" title="variable">formula_var_interp</span></a> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#3543b590674c2406dadbf42bd58f6700"><span class="id" title="notation">¬</span></a> <span class="id" title="var">f</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#formula_interp:107"><span class="id" title="definition">formula_interp</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f:106"><span class="id" title="variable">f</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">f1</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#bbbda3681827f271e02232c943f22ca3"><span class="id" title="notation">∧</span></a> <span class="id" title="var">f2</span> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#formula_interp:107"><span class="id" title="definition">formula_interp</span></a> <span class="id" title="var">f1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#formula_interp:107"><span class="id" title="definition">formula_interp</span></a> <span class="id" title="var">f2</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">f1</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#e45beab8340f99d309f9f644ee3f5443"><span class="id" title="notation">∨</span></a> <span class="id" title="var">f2</span> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#formula_interp:107"><span class="id" title="definition">formula_interp</span></a> <span class="id" title="var">f1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#formula_interp:107"><span class="id" title="definition">formula_interp</span></a> <span class="id" title="var">f2</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">f1</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#0542a2c9d6b6fa3ab8217093a0f6e703"><span class="id" title="notation">→</span></a> <span class="id" title="var">f2</span> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#formula_interp:107"><span class="id" title="definition">formula_interp</span></a> <span class="id" title="var">f1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#formula_interp:107"><span class="id" title="definition">formula_interp</span></a> <span class="id" title="var">f2</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">f1</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#1da3ccfc5d2cee3f42016cfea3615111"><span class="id" title="notation">↔</span></a> <span class="id" title="var">f2</span> =&gt; <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#formula_interp:107"><span class="id" title="definition">formula_interp</span></a> <span class="id" title="var">f1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#formula_interp:107"><span class="id" title="definition">formula_interp</span></a> <span class="id" title="var">f2</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#sec_formula.sec_formula_interpretation"><span class="id" title="section">sec_formula_interpretation</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="formula_holds_prop" class="idref" href="#formula_holds_prop"><span class="id" title="definition">formula_holds_prop</span></a> (<a id="f:109" class="idref" href="#f:109"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula"><span class="id" title="inductive">Formula</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:110" class="idref" href="#i:110"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#sec_formula.Var"><span class="id" title="variable">Var</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#formula_interp"><span class="id" title="definition">formula_interp</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#i:110"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#f:109"><span class="id" title="variable">f</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#sec_formula"><span class="id" title="section">sec_formula</span></a>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#Formula"><span class="id" title="inductive">Formula</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>

<br/>
</div>

<div class="doc">
  The formula notations we introduced above were local to this module.
  To allow these notations to be used elsewhere, while also allowing them to
  be enabled and disabled by need, we declare them as part of a scope.

</div>
<div class="code">
<span class="id" title="keyword">Declare Scope</span> <span class="id" title="var">formula_scope</span>.<br/>
<span class="id" title="keyword">Bind Scope</span> <span class="id" title="var">formula_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">Formula</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="58a9ba2bfaeb334dbad6b3aff1d75cd6" class="idref" href="#58a9ba2bfaeb334dbad6b3aff1d75cd6"><span class="id" title="notation">&quot;</span></a>⊤" := <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#FTop"><span class="id" title="constructor">FTop</span></a> : <span class="id" title="var">formula_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="ba17f656c6b5c42dd8109830eaaa1fea" class="idref" href="#ba17f656c6b5c42dd8109830eaaa1fea"><span class="id" title="notation">&quot;</span></a>⊥" := <a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#FBot"><span class="id" title="constructor">FBot</span></a> : <span class="id" title="var">formula_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="a0ed8e2ec7392ca15aa45214734bcaa5" class="idref" href="#a0ed8e2ec7392ca15aa45214734bcaa5"><span class="id" title="notation">&quot;</span></a>x ∨ y" := (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#FDisj"><span class="id" title="constructor">FDisj</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 85, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">formula_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="93e7e50a94de233765f08e09d73f9098" class="idref" href="#93e7e50a94de233765f08e09d73f9098"><span class="id" title="notation">&quot;</span></a>x ∧ y" := (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#FConj"><span class="id" title="constructor">FConj</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 80, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">formula_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="090063e4a8ed87e990cc592186804cfc" class="idref" href="#090063e4a8ed87e990cc592186804cfc"><span class="id" title="notation">&quot;</span></a>x → y" := (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#FImpl"><span class="id" title="constructor">FImpl</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 99, <span class="id" title="var">y</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 200, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">formula_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="c38349a8050409e7ac1f501609f87404" class="idref" href="#c38349a8050409e7ac1f501609f87404"><span class="id" title="notation">&quot;</span></a>x ↔ y" := (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#FIff"><span class="id" title="constructor">FIff</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 95, <span class="id" title="keyword">no</span> <span class="id" title="keyword">associativity</span>): <span class="id" title="var">formula_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="f8a0865ae444b46792cce7861e48f4d3" class="idref" href="#f8a0865ae444b46792cce7861e48f4d3"><span class="id" title="notation">&quot;</span></a>¬ x" := (<a class="idref" href="VLSM.Examples.Tutorial.Formulas.html#FNeg"><span class="id" title="constructor">FNeg</span></a> <span class="id" title="var">x</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 75, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">formula_scope</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr">coqdoc</a> and improved with <a href="https://github.com/palmskog/coqdocjs">CoqdocJS</a> as adapted for <a href="https://github.com/coq-community">coq-community</a>
</div>
</div>
</body>

</html>
