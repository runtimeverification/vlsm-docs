<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename">
	<script>
	  if (document.title === "Table of Contents") {
	      document.write("<a href='map.svg'>File dependency graph</a>");
	  } else if (document.title !== "Index") {
              document.write("<a href='" + document.title + ".svg'>" + document.title + " dependency graph</a>");
	  }
	</script>
      </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./../..">Project Website</a>
      <a href="./indexpage.html">Index</a>
      <a href="./toc.html">Table of Contents</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Lib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Lib.Itauto.html#"><span class="id" title="library">Itauto</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">stdpp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">prelude</span> <span class="id" title="library">finite</span> <span class="id" title="library">fin_sets</span> <span class="id" title="library">fin_maps</span> <span class="id" title="library">nmap</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.Streams.html#"><span class="id" title="library">Streams</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Logic.FunctionalExtensionality.html#"><span class="id" title="library">FunctionalExtensionality</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Logic.Eqdep_dec.html#"><span class="id" title="library">Eqdep_dec</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Lib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Lib.Preamble.html#"><span class="id" title="library">Preamble</span></a> <a class="idref" href="VLSM.Lib.ListExtras.html#"><span class="id" title="library">ListExtras</span></a> <a class="idref" href="VLSM.Lib.FinSetExtras.html#"><span class="id" title="library">FinSetExtras</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Core</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Core.VLSM.html#"><span class="id" title="library">VLSM</span></a> <a class="idref" href="VLSM.Core.Plans.html#"><span class="id" title="library">Plans</span></a> <a class="idref" href="VLSM.Core.VLSMProjections.html#"><span class="id" title="library">VLSMProjections</span></a> <a class="idref" href="VLSM.Core.Composition.html#"><span class="id" title="library">Composition</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Examples</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Examples.Paxos.Consensus.html#"><span class="id" title="library">Consensus</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab317"></a><h1 class="section">Paxos: Specification of Consensus by Voting</h1>


<div class="paragraph"> </div>

  A specification of a consensus algorithm where a set of nodes,
  the <i>acceptors</i>, agree on a value by voting.

<div class="paragraph"> </div>

  The algorithm uses numbered rounds of voting. Each acceptor casts at
  most one vote per round. A value is chosen when a sufficient set of
  acceptors, a <i>quorum</i>, have voted for the same value in the same round.

<div class="paragraph"> </div>

  This specification is closer to something implementable than the
  Consensus module, but still has some restrictions on the allowed
  transitions of an acceptor that can only be checked with access to
  the states of all acceptors. We model this as a composite VLSM with
  a composition constraint.

<div class="paragraph"> </div>

 Ballot numbers 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="Ballot" class="idref" href="#Ballot"><span class="id" title="definition">Ballot</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#N"><span class="id" title="inductive">N</span></a>.<br/>

<br/>
</div>

<div class="doc">
Ballot numbers extended with a minimal element "-1" that comes before others 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="Ballot'" class="idref" href="#Ballot'"><span class="id" title="definition">Ballot'</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="Ballot'_to_Z" class="idref" href="#Ballot'_to_Z"><span class="id" title="definition">Ballot'_to_Z</span></a> (<a id="b:1" class="idref" href="#b:1"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot'"><span class="id" title="definition">Ballot'</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> := <span class="id" title="definition">from_option</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.of_N"><span class="id" title="definition">Z.of_N</span></a> (-1)%<span class="id" title="var">Z</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:1"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="Ballot_to_Z" class="idref" href="#Ballot_to_Z"><span class="id" title="definition">Ballot_to_Z</span></a> (<a id="b:2" class="idref" href="#b:2"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.of_N"><span class="id" title="definition">Z.of_N</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:2"><span class="id" title="variable">b</span></a>.<br/>

<br/>
<span class="id" title="keyword">Coercion</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot_to_Z"><span class="id" title="definition">Ballot_to_Z</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot_to_Z"><span class="id" title="definition">:</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot_to_Z"><span class="id" title="definition">Ballot</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot_to_Z"><span class="id" title="definition">&gt;-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot_to_Z"><span class="id" title="definition">Z</span></a>.<br/>
<span class="id" title="keyword">Coercion</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot'_to_Z"><span class="id" title="definition">Ballot'_to_Z</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot'_to_Z"><span class="id" title="definition">:</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot'_to_Z"><span class="id" title="definition">Ballot'</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot'_to_Z"><span class="id" title="definition">&gt;-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot'_to_Z"><span class="id" title="definition">Z</span></a>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">ballot_lia</span> := <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot_to_Z"><span class="id" title="definition">Ballot_to_Z</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="var">lia</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Ballot_lt_wf" class="idref" href="#Ballot_lt_wf"><span class="id" title="lemma">Ballot_lt_wf</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Wf.html#well_founded"><span class="id" title="definition">well_founded</span></a> (<span class="id" title="keyword">fun</span> (<a id="x:3" class="idref" href="#x:3"><span class="id" title="binder">x</span></a> <a id="y:4" class="idref" href="#y:4"><span class="id" title="binder">y</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) =&gt; (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#x:3"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#y:4"><span class="id" title="variable">y</span></a>)%<span class="id" title="var">Z</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.NArith.BinNat.html#N.lt_wf_0"><span class="id" title="lemma">N.lt_wf_0</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<span class="id" title="lemma">wf_projected</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.NArith.BinNat.html#N.lt"><span class="id" title="definition">N.lt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>), <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.Znat.html#N2Z.inj_lt"><span class="id" title="lemma">N2Z.inj_lt</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="Ballot_peano_ind" class="idref" href="#Ballot_peano_ind"><span class="id" title="definition">Ballot_peano_ind</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="P:5" class="idref" href="#P:5"><span class="id" title="binder">P</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#P:5"><span class="id" title="variable">P</span></a> 0%<span class="id" title="var">N</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="b:6" class="idref" href="#b:6"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#P:5"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:6"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#P:5"><span class="id" title="variable">P</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.NArith.BinNat.html#N.succ"><span class="id" title="definition">N.succ</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:6"><span class="id" title="variable">b</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">forall</span> <a id="b:7" class="idref" href="#b:7"><span class="id" title="binder">b</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#P:5"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:7"><span class="id" title="variable">b</span></a><br/>
&nbsp;&nbsp;:= <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.NArith.BinNat.html#N.peano_ind"><span class="id" title="definition">N.peano_ind</span></a>.<br/>

<br/>
</div>

<div class="doc">
ballot-indexed-map 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="Bmap" class="idref" href="#Bmap"><span class="id" title="definition">Bmap</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Type</span> := @<span class="id" title="record">Nmap</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="Bmap_eq_dec" class="idref" href="#Bmap_eq_dec"><span class="id" title="instance">Bmap_eq_dec</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">{</span></a><a id="A:8" class="idref" href="#A:8"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">},</span></a> <span class="id" title="abbreviation">EqDecision</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#A:8"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="abbreviation">EqDecision</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#Bmap"><span class="id" title="definition">Bmap</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#A:8"><span class="id" title="variable">A</span></a>) := <span class="id" title="var">_</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="Bfmap" class="idref" href="#Bfmap"><span class="id" title="instance">Bfmap</span></a> : <span class="id" title="class">FMap</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Bmap"><span class="id" title="definition">Bmap</span></a> := <span class="id" title="var">_</span>.<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="Blookup" class="idref" href="#Blookup"><span class="id" title="instance">Blookup</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">{</span></a><a id="A:9" class="idref" href="#A:9"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">},</span></a> <span class="id" title="class">Lookup</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#A:9"><span class="id" title="variable">A</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#Bmap"><span class="id" title="definition">Bmap</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#A:9"><span class="id" title="variable">A</span></a>) := <span class="id" title="var">_</span>.<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="Bempty" class="idref" href="#Bempty"><span class="id" title="instance">Bempty</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">{</span></a><a id="A:10" class="idref" href="#A:10"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">},</span></a> <span class="id" title="class">Empty</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#Bmap"><span class="id" title="definition">Bmap</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#A:10"><span class="id" title="variable">A</span></a>) := <span class="id" title="var">_</span>.<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="Bpartial_alter" class="idref" href="#Bpartial_alter"><span class="id" title="instance">Bpartial_alter</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">{</span></a><a id="A:11" class="idref" href="#A:11"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">},</span></a> <span class="id" title="class">PartialAlter</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#A:11"><span class="id" title="variable">A</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#Bmap"><span class="id" title="definition">Bmap</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#A:11"><span class="id" title="variable">A</span></a>) := <span class="id" title="var">_</span>.<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="Bomap" class="idref" href="#Bomap"><span class="id" title="instance">Bomap</span></a> : <span class="id" title="class">OMap</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Bmap"><span class="id" title="definition">Bmap</span></a> := <span class="id" title="var">_</span>.<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="Bmerge" class="idref" href="#Bmerge"><span class="id" title="instance">Bmerge</span></a> : <span class="id" title="class">Merge</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Bmap"><span class="id" title="definition">Bmap</span></a> := <span class="id" title="var">_</span>.<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="FinMap_Ballot_Bmap" class="idref" href="#FinMap_Ballot_Bmap"><span class="id" title="instance">FinMap_Ballot_Bmap</span></a> : <span class="id" title="class">FinMap</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Bmap"><span class="id" title="definition">Bmap</span></a> := <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="Bset" class="idref" href="#Bset"><span class="id" title="abbreviation">Bset</span></a> := (<span class="id" title="abbreviation">mapset.mapset</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Bmap"><span class="id" title="definition">Bmap</span></a>).<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="Bmap_dom" class="idref" href="#Bmap_dom"><span class="id" title="instance">Bmap_dom</span></a> {<a id="A:12" class="idref" href="#A:12"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} : <span class="id" title="class">Dom</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#Bmap"><span class="id" title="definition">Bmap</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#A:12"><span class="id" title="variable">A</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Bset"><span class="id" title="abbreviation">Bset</span></a> := <span class="id" title="var">_</span>.<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="FinMapDom_Bmap_Bset" class="idref" href="#FinMapDom_Bmap_Bset"><span class="id" title="instance">FinMapDom_Bmap_Bset</span></a> : <span class="id" title="class">fin_map_dom.FinMapDom</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Bmap"><span class="id" title="definition">Bmap</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Bset"><span class="id" title="abbreviation">Bset</span></a> := <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Ballot'_Zeq_iff" class="idref" href="#Ballot'_Zeq_iff"><span class="id" title="lemma">Ballot'_Zeq_iff</span></a> (<a id="b:13" class="idref" href="#b:13"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot'"><span class="id" title="definition">Ballot'</span></a>) (<a id="x:14" class="idref" href="#x:14"><span class="id" title="binder">x</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:13"><span class="id" title="variable">b</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Voting.html#x:14"><span class="id" title="variable">x</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:13"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#x:14"><span class="id" title="variable">x</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>; <span class="id" title="var">cbn</span>; [<span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">inj_iff</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.of_N"><span class="id" title="definition">Z.of_N</span></a>) |]; <span class="id" title="tactic">split</span>; (<span class="id" title="tactic">congruence</span> || <span class="id" title="var">ballot_lia</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_voting_spec" class="idref" href="#sec_voting_spec"><span class="id" title="section">sec_voting_spec</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;(<a id="Value:15" class="idref" href="#Value:15"><span class="id" title="binder">Value</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;(<a id="VSet:16" class="idref" href="#VSet:16"><span class="id" title="binder">VSet</span></a> : <span class="id" title="keyword">Type</span>) `{<a id="H6:25" class="idref" href="#H6:25"><span class="id" title="binder">FinSet</span></a> <a id="H6:25" class="idref" href="#H6:25"><span class="id" title="binder">Value</span></a> <a id="H6:25" class="idref" href="#H6:25"><span class="id" title="binder">VSet</span></a>}<br/>
&nbsp;&nbsp;{<a id="VSDec:26" class="idref" href="#VSDec:26"><span class="id" title="binder">VSDec</span></a> : <span class="id" title="class">RelDecision</span> <span class="id" title="notation">(∈@{</span><a class="idref" href="VLSM.Examples.Paxos.Voting.html#VSet:16"><span class="id" title="variable">VSet</span></a><span class="id" title="notation">})</span>}<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_voting_spec.sec_acceptor_vlsm" class="idref" href="#sec_voting_spec.sec_acceptor_vlsm"><span class="id" title="section">sec_acceptor_vlsm</span></a>.<br/>

<br/>
<span class="id" title="keyword">Record</span> <a id="acceptor_state" class="idref" href="#acceptor_state"><span class="id" title="record">acceptor_state</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
{<br/>
&nbsp;&nbsp;<a id="votes" class="idref" href="#votes"><span class="id" title="projection">votes</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Bmap"><span class="id" title="definition">Bmap</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.VSet"><span class="id" title="variable">VSet</span></a>;<br/>
&nbsp;&nbsp;<a id="maxBal" class="idref" href="#maxBal"><span class="id" title="projection">maxBal</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot'"><span class="id" title="definition">Ballot'</span></a>;<br/>
}.<br/>

<br/>
</div>

<div class="doc">
Defining several predicates over single voting states. 
</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="sec_voting_spec.sec_acceptor_vlsm.sec_acceptor_state_predicates" class="idref" href="#sec_voting_spec.sec_acceptor_vlsm.sec_acceptor_state_predicates"><span class="id" title="section">sec_acceptor_state_predicates</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;(<a id="AState:30" class="idref" href="#AState:30"><span class="id" title="binder">AState</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#acceptor_state"><span class="id" title="record">acceptor_state</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="voted_for" class="idref" href="#voted_for"><span class="id" title="definition">voted_for</span></a> (<a id="b:31" class="idref" href="#b:31"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) (<a id="v:32" class="idref" href="#v:32"><span class="id" title="binder">v</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Value"><span class="id" title="variable">Value</span></a>) := <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:32"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#votes"><span class="id" title="projection">votes</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.sec_acceptor_vlsm.sec_acceptor_state_predicates.AState"><span class="id" title="variable">AState</span></a> <span class="id" title="notation">!!!</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:31"><span class="id" title="variable">b</span></a>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="voted_for_dec" class="idref" href="#voted_for_dec"><span class="id" title="instance">voted_for_dec</span></a> (<a id="b:33" class="idref" href="#b:33"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) (<a id="v:34" class="idref" href="#v:34"><span class="id" title="binder">v</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Value"><span class="id" title="variable">Value</span></a>) : <span class="id" title="class">Decision</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_for"><span class="id" title="definition">voted_for</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:33"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:34"><span class="id" title="variable">v</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.VSDec"><span class="id" title="variable">VSDec</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="did_not_vote_in" class="idref" href="#did_not_vote_in"><span class="id" title="definition">did_not_vote_in</span></a> (<a id="b:35" class="idref" href="#b:35"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="v:36" class="idref" href="#v:36"><span class="id" title="binder">v</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Value"><span class="id" title="variable">Value</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_for"><span class="id" title="definition">voted_for</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:35"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:36"><span class="id" title="variable">v</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.sec_acceptor_vlsm.sec_acceptor_state_predicates"><span class="id" title="section">sec_acceptor_state_predicates</span></a>.<br/>

<br/>
</div>

<div class="doc">
  Acceptor labels:
<ul class="doclist">
<li> <span class="inlinecode"><a class="idref" href="VLSM.Examples.Paxos.Voting.html#SkipToRound"><span class="id" title="constructor">SkipToRound</span></a></span> <span class="inlinecode"><span class="id" title="var">b</span></span> means: commit to not voting in any ballots before <span class="inlinecode"><span class="id" title="var">b</span></span>

</li>
<li> <span class="inlinecode"><a class="idref" href="VLSM.Examples.Paxos.Voting.html#Vote"><span class="id" title="constructor">Vote</span></a></span> <span class="inlinecode"><span class="id" title="var">b</span></span> <span class="inlinecode"><span class="id" title="var">v</span></span> means: vote for <span class="inlinecode"><span class="id" title="var">v</span></span> in ballot <span class="inlinecode"><span class="id" title="var">b</span></span>.

</li>
</ul>

</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a id="acceptor_label" class="idref" href="#acceptor_label"><span class="id" title="definition, inductive"><span id="acceptor_label_rect" class="id"><span id="acceptor_label_ind" class="id"><span id="acceptor_label_rec" class="id"><span id="acceptor_label_sind" class="id">acceptor_label</span></span></span></span></span></a> : <span class="id" title="keyword">Type</span> :=<br/>
| <a id="SkipToRound" class="idref" href="#SkipToRound"><span class="id" title="constructor">SkipToRound</span></a> (<a id="b:39" class="idref" href="#b:39"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>)<br/>
| <a id="Vote" class="idref" href="#Vote"><span class="id" title="constructor">Vote</span></a> (<a id="b:40" class="idref" href="#b:40"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) (<a id="v:41" class="idref" href="#v:41"><span class="id" title="binder">v</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Value"><span class="id" title="variable">Value</span></a>).<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="var">Program</span> <span class="id" title="keyword">Instance</span> <a id="acceptor_label_dec" class="idref" href="#acceptor_label_dec"><span class="id" title="instance">acceptor_label_dec</span></a> : <span class="id" title="abbreviation">EqDecision</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#acceptor_label"><span class="id" title="inductive">acceptor_label</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="x:42" class="idref" href="#x:42"><span class="id" title="binder">x</span></a> <a id="y:43" class="idref" href="#y:43"><span class="id" title="binder">y</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#x:42"><span class="id" title="variable">x</span></a>, <a class="idref" href="VLSM.Examples.Paxos.Voting.html#y:43"><span class="id" title="variable">y</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Voting.html#SkipToRound"><span class="id" title="constructor">SkipToRound</span></a> <span class="id" title="var">x_b</span>, <a class="idref" href="VLSM.Examples.Paxos.Voting.html#SkipToRound"><span class="id" title="constructor">SkipToRound</span></a> <span class="id" title="var">y_b</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="definition">decide</span> (<span class="id" title="var">x_b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">y_b</span>) <span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#left"><span class="id" title="constructor">left</span></a> <span class="id" title="var">_</span> <span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#right"><span class="id" title="constructor">right</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Vote"><span class="id" title="constructor">Vote</span></a> <span class="id" title="var">x_b</span> <span class="id" title="var">x_v</span>, <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Vote"><span class="id" title="constructor">Vote</span></a> <span class="id" title="var">y_b</span> <span class="id" title="var">y_v</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="definition">decide</span> (<span class="id" title="var">x_b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">y_b</span>) <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="definition">decide</span> (<span class="id" title="var">x_v</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">y_v</span>) <span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#left"><span class="id" title="constructor">left</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#right"><span class="id" title="constructor">right</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#right"><span class="id" title="constructor">right</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Voting.html#SkipToRound"><span class="id" title="constructor">SkipToRound</span></a> <span class="id" title="var">_</span>, <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Vote"><span class="id" title="constructor">Vote</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#right"><span class="id" title="constructor">right</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Vote"><span class="id" title="constructor">Vote</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>, <a class="idref" href="VLSM.Examples.Paxos.Voting.html#SkipToRound"><span class="id" title="constructor">SkipToRound</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#right"><span class="id" title="constructor">right</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Solve</span> <span class="id" title="keyword">Obligations</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">congruence</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="acceptor_type" class="idref" href="#acceptor_type"><span class="id" title="definition">acceptor_type</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMType"><span class="id" title="record">VLSMType</span></a> <span class="id" title="notation">False</span> :=<br/>
{|<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Voting.html#acceptor_state"><span class="id" title="record">acceptor_state</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Voting.html#acceptor_label"><span class="id" title="inductive">acceptor_label</span></a>;<br/>
|}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="acceptor_initial" class="idref" href="#acceptor_initial"><span class="id" title="definition">acceptor_initial</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#acceptor_state"><span class="id" title="record">acceptor_state</span></a> :=<br/>
{|<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#votes"><span class="id" title="projection">votes</span></a> := <span class="id" title="notation">∅</span>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#maxBal"><span class="id" title="projection">maxBal</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>;<br/>
|}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="acceptor_initial_state_prop" class="idref" href="#acceptor_initial_state_prop"><span class="id" title="definition">acceptor_initial_state_prop</span></a> (<a id="s:46" class="idref" href="#s:46"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#acceptor_state"><span class="id" title="record">acceptor_state</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:46"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#acceptor_initial"><span class="id" title="definition">acceptor_initial</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="acceptor_valid" class="idref" href="#acceptor_valid"><span class="id" title="definition">acceptor_valid</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#acceptor_label"><span class="id" title="inductive">acceptor_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#acceptor_state"><span class="id" title="record">acceptor_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="notation">False</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="l:47" class="idref" href="#l:47"><span class="id" title="binder">l</span></a> '<a id="pat:49" class="idref" href="#pat:49"><span class="id" title="binder">(</span></a><a id="s:48" class="idref" href="#s:48"><span class="id" title="binder"><span id="pat:49" class="id">s</span></span></a><a id="pat:49" class="idref" href="#pat:49"><span class="id" title="binder">,</span></a> <a id="pat:49" class="idref" href="#pat:49"><span class="id" title="binder">_</span></a><a id="pat:49" class="idref" href="#pat:49"><span class="id" title="binder">)</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#l:47"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Voting.html#SkipToRound"><span class="id" title="constructor">SkipToRound</span></a> <span class="id" title="var">b</span> =&gt; (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#maxBal"><span class="id" title="projection">maxBal</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:48"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">b</span>)%<span class="id" title="var">Z</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Vote"><span class="id" title="constructor">Vote</span></a> <span class="id" title="var">b</span> <span class="id" title="var">v</span> =&gt; (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#maxBal"><span class="id" title="projection">maxBal</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:48"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="var">b</span>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#did_not_vote_in"><span class="id" title="definition">did_not_vote_in</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:48"><span class="id" title="variable">s</span></a> <span class="id" title="var">b</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="acceptor_transition" class="idref" href="#acceptor_transition"><span class="id" title="definition">acceptor_transition</span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Examples.Paxos.Voting.html#acceptor_label"><span class="id" title="inductive">acceptor_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#acceptor_state"><span class="id" title="record">acceptor_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="notation">False</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#acceptor_state"><span class="id" title="record">acceptor_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="notation">False</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="l:51" class="idref" href="#l:51"><span class="id" title="binder">l</span></a> '<a id="pat:53" class="idref" href="#pat:53"><span class="id" title="binder">(</span></a><a id="s:52" class="idref" href="#s:52"><span class="id" title="binder"><span id="pat:53" class="id">s</span></span></a><a id="pat:53" class="idref" href="#pat:53"><span class="id" title="binder">,</span></a> <a id="pat:53" class="idref" href="#pat:53"><span class="id" title="binder">_</span></a><a id="pat:53" class="idref" href="#pat:53"><span class="id" title="binder">)</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="s_votes:54" class="idref" href="#s_votes:54"><span class="id" title="binder">s_votes</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Voting.html#votes"><span class="id" title="projection">votes</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:52"><span class="id" title="variable">s</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#l:51"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Voting.html#SkipToRound"><span class="id" title="constructor">SkipToRound</span></a> <span class="id" title="var">b</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">({|</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#votes"><span class="id" title="projection">votes</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s_votes:54"><span class="id" title="variable">s_votes</span></a>; <a class="idref" href="VLSM.Examples.Paxos.Voting.html#maxBal"><span class="id" title="projection">maxBal</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">b</span>; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">|},</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Vote"><span class="id" title="constructor">Vote</span></a> <span class="id" title="var">b</span> <span class="id" title="var">v</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">({|</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#votes"><span class="id" title="projection">votes</span></a> := <a class="idref" href="VLSM.Lib.FinSetExtras.html#mmap_insert"><span class="id" title="definition">mmap_insert</span></a> <span class="id" title="var">b</span> <span class="id" title="var">v</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s_votes:54"><span class="id" title="variable">s_votes</span></a>; <a class="idref" href="VLSM.Examples.Paxos.Voting.html#maxBal"><span class="id" title="projection">maxBal</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">b</span>; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">|},</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="acceptor_machine" class="idref" href="#acceptor_machine"><span class="id" title="definition">acceptor_machine</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMMachine"><span class="id" title="record">VLSMMachine</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#acceptor_type"><span class="id" title="definition">acceptor_type</span></a> :=<br/>
{|<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> := <span class="id" title="notation">(.=</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#acceptor_initial"><span class="id" title="definition">acceptor_initial</span></a><span class="id" title="notation">)</span>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#s0"><span class="id" title="projection">s0</span></a> := <span class="id" title="constructor">populate</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#acceptor_initial"><span class="id" title="definition">acceptor_initial</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>);<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a> := (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="notation">False</span>);<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Voting.html#acceptor_transition"><span class="id" title="definition">acceptor_transition</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Voting.html#acceptor_valid"><span class="id" title="definition">acceptor_valid</span></a>;<br/>
|}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="acceptor_vlsm" class="idref" href="#acceptor_vlsm"><span class="id" title="definition">acceptor_vlsm</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <span class="id" title="notation">False</span> := <a class="idref" href="VLSM.Core.VLSM.html#mk_vlsm"><span class="id" title="constructor">mk_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#acceptor_machine"><span class="id" title="definition">acceptor_machine</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.sec_acceptor_vlsm"><span class="id" title="section">sec_acceptor_vlsm</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;Little&nbsp;predicates&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="voted_none_but" class="idref" href="#voted_none_but"><span class="id" title="definition">voted_none_but</span></a> (<a id="sa:56" class="idref" href="#sa:56"><span class="id" title="binder">sa</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#acceptor_state"><span class="id" title="record">acceptor_state</span></a>) (<a id="b:57" class="idref" href="#b:57"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) (<a id="v:58" class="idref" href="#v:58"><span class="id" title="binder">v</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Value"><span class="id" title="variable">Value</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="w:59" class="idref" href="#w:59"><span class="id" title="binder">w</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Value"><span class="id" title="variable">Value</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_for"><span class="id" title="definition">voted_for</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sa:56"><span class="id" title="variable">sa</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:57"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#w:59"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#w:59"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:58"><span class="id" title="variable">v</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="vote_committed" class="idref" href="#vote_committed"><span class="id" title="definition">vote_committed</span></a> (<a id="sa:60" class="idref" href="#sa:60"><span class="id" title="binder">sa</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#acceptor_state"><span class="id" title="record">acceptor_state</span></a>) (<a id="b:61" class="idref" href="#b:61"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) := (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#maxBal"><span class="id" title="projection">maxBal</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sa:60"><span class="id" title="variable">sa</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:61"><span class="id" title="variable">b</span></a>)%<span class="id" title="var">Z</span>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;(<a id="Acceptor:62" class="idref" href="#Acceptor:62"><span class="id" title="binder">Acceptor</span></a> : <span class="id" title="keyword">Type</span>) `{<a id="H7:64" class="idref" href="#H7:64"><span class="id" title="binder">finite.Finite</span></a> <a id="H7:64" class="idref" href="#H7:64"><span class="id" title="binder">Acceptor</span></a>}<br/>
&nbsp;&nbsp;(<a id="ASet:65" class="idref" href="#ASet:65"><span class="id" title="binder">ASet</span></a> : <span class="id" title="keyword">Type</span>) `{<a id="H15:74" class="idref" href="#H15:74"><span class="id" title="binder">FinSet</span></a> <a id="H15:74" class="idref" href="#H15:74"><span class="id" title="binder">Acceptor</span></a> <a id="H15:74" class="idref" href="#H15:74"><span class="id" title="binder">ASet</span></a>}<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_voting_spec.sec_voting_vlsm" class="idref" href="#sec_voting_spec.sec_voting_vlsm"><span class="id" title="section">sec_voting_vlsm</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;(<a id="Quorum:75" class="idref" href="#Quorum:75"><span class="id" title="binder">Quorum</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.ASet"><span class="id" title="variable">ASet</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="IM:76" class="idref" href="#IM:76"><span class="id" title="binder">IM</span></a> := <span class="id" title="keyword">fun</span> (<span class="id" title="var">_</span> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a>) =&gt; <a class="idref" href="VLSM.Examples.Paxos.Voting.html#acceptor_vlsm"><span class="id" title="definition">acceptor_vlsm</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="composition_constraint" class="idref" href="#composition_constraint"><span class="id" title="abbreviation">composition_constraint</span></a> :=<br/>
&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.sec_voting_vlsm.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.sec_voting_vlsm.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="notation">False</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="allQuorum" class="idref" href="#allQuorum"><span class="id" title="definition">allQuorum</span></a> (<a id="Q:77" class="idref" href="#Q:77"><span class="id" title="binder">Q</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#sig"><span class="id" title="inductive">sig</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.sec_voting_vlsm.Quorum"><span class="id" title="variable">Quorum</span></a>) (<a id="P:78" class="idref" href="#P:78"><span class="id" title="binder">P</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="a:79" class="idref" href="#a:79"><span class="id" title="binder">a</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:79"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">`</span><a class="idref" href="VLSM.Examples.Paxos.Voting.html#Q:77"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#P:78"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:79"><span class="id" title="variable">a</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="consensus_blocking_quorum" class="idref" href="#consensus_blocking_quorum"><span class="id" title="definition">consensus_blocking_quorum</span></a><br/>
&nbsp;&nbsp;(<a id="s:80" class="idref" href="#s:80"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.sec_voting_vlsm.IM"><span class="id" title="variable">IM</span></a>) (<a id="b:81" class="idref" href="#b:81"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) (<a id="v:82" class="idref" href="#v:82"><span class="id" title="binder">v</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Value"><span class="id" title="variable">Value</span></a>) (<a id="Q:83" class="idref" href="#Q:83"><span class="id" title="binder">Q</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#sig"><span class="id" title="inductive">sig</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.sec_voting_vlsm.Quorum"><span class="id" title="variable">Quorum</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#allQuorum"><span class="id" title="definition">allQuorum</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Q:83"><span class="id" title="variable">Q</span></a> (<span class="id" title="keyword">fun</span> <a id="a:84" class="idref" href="#a:84"><span class="id" title="binder">a</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Voting.html#vote_committed"><span class="id" title="definition">vote_committed</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:80"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:84"><span class="id" title="variable">a</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:81"><span class="id" title="variable">b</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#allQuorum"><span class="id" title="definition">allQuorum</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Q:83"><span class="id" title="variable">Q</span></a> (<span class="id" title="keyword">fun</span> <a id="a:85" class="idref" href="#a:85"><span class="id" title="binder">a</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_none_but"><span class="id" title="definition">voted_none_but</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:80"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:85"><span class="id" title="variable">a</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:81"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:82"><span class="id" title="variable">v</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="SafeAt" class="idref" href="#SafeAt"><span class="id" title="definition">SafeAt</span></a> (<a id="s:86" class="idref" href="#s:86"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.sec_voting_vlsm.IM"><span class="id" title="variable">IM</span></a>) (<a id="v:87" class="idref" href="#v:87"><span class="id" title="binder">v</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Value"><span class="id" title="variable">Value</span></a>) (<a id="b:88" class="idref" href="#b:88"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="d:89" class="idref" href="#d:89"><span class="id" title="binder">d</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a><span class="id" title="notation">),</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#d:89"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:88"><span class="id" title="variable">b</span></a>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="Q:90" class="idref" href="#Q:90"><span class="id" title="binder">Q</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#sig"><span class="id" title="inductive">sig</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.sec_voting_vlsm.Quorum"><span class="id" title="variable">Quorum</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#consensus_blocking_quorum"><span class="id" title="definition">consensus_blocking_quorum</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:86"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#d:89"><span class="id" title="variable">d</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:87"><span class="id" title="variable">v</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Q:90"><span class="id" title="variable">Q</span></a>.<br/>

<br/>
</div>

<div class="doc">
SafeAt as defined in the paper 
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a id="SafeAt_alt" class="idref" href="#SafeAt_alt"><span class="id" title="definition, inductive"><span id="SafeAt_alt_ind" class="id"><span id="SafeAt_alt_sind" class="id">SafeAt_alt</span></span></span></a> (<a id="s:91" class="idref" href="#s:91"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.sec_voting_vlsm.IM"><span class="id" title="variable">IM</span></a>) (<a id="v:92" class="idref" href="#v:92"><span class="id" title="binder">v</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Value"><span class="id" title="variable">Value</span></a>) : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="SafeStart" class="idref" href="#SafeStart"><span class="id" title="constructor">SafeStart</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#SafeAt_alt:93"><span class="id" title="inductive">SafeAt_alt</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:91"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:92"><span class="id" title="variable">v</span></a> 0%<span class="id" title="var">N</span><br/>
| <a id="SafeQuorum" class="idref" href="#SafeQuorum"><span class="id" title="constructor">SafeQuorum</span></a> : <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="b:95" class="idref" href="#b:95"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) (<a id="Q:96" class="idref" href="#Q:96"><span class="id" title="binder">Q</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#sig"><span class="id" title="inductive">sig</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.sec_voting_vlsm.Quorum"><span class="id" title="variable">Quorum</span></a>) (<a id="c':97" class="idref" href="#c':97"><span class="id" title="binder">c'</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot'"><span class="id" title="definition">Ballot'</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Examples.Paxos.Voting.html#c':97"><span class="id" title="variable">c'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:95"><span class="id" title="variable">b</span></a>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#allQuorum"><span class="id" title="definition">allQuorum</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Q:96"><span class="id" title="variable">Q</span></a> (<span class="id" title="keyword">fun</span> <a id="a:98" class="idref" href="#a:98"><span class="id" title="binder">a</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a> =&gt; (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#maxBal"><span class="id" title="projection">maxBal</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:91"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:98"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4"><span class="id" title="notation">&gt;=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:95"><span class="id" title="variable">b</span></a>)%<span class="id" title="var">Z</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="d:99" class="idref" href="#d:99"><span class="id" title="binder">d</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a><span class="id" title="notation">),</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#c':97"><span class="id" title="variable">c'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#d:99"><span class="id" title="variable">d</span></a>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#d:99"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:95"><span class="id" title="variable">b</span></a>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#allQuorum"><span class="id" title="definition">allQuorum</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Q:96"><span class="id" title="variable">Q</span></a> (<span class="id" title="keyword">fun</span> <a id="a:100" class="idref" href="#a:100"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Voting.html#did_not_vote_in"><span class="id" title="definition">did_not_vote_in</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:91"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:100"><span class="id" title="variable">a</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#d:99"><span class="id" title="variable">d</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Voting.html#c':97"><span class="id" title="variable">c'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#SafeAt_alt:93"><span class="id" title="inductive">SafeAt_alt</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:91"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:92"><span class="id" title="variable">v</span></a> (<span class="id" title="abbreviation">default</span> 0%<span class="id" title="var">N</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#c':97"><span class="id" title="variable">c'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#allQuorum"><span class="id" title="definition">allQuorum</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Q:96"><span class="id" title="variable">Q</span></a> (<span class="id" title="keyword">fun</span> <a id="a:101" class="idref" href="#a:101"><span class="id" title="binder">a</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_none_but"><span class="id" title="definition">voted_none_but</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:91"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:101"><span class="id" title="variable">a</span></a>) (<span class="id" title="abbreviation">default</span> 0%<span class="id" title="var">N</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#c':97"><span class="id" title="variable">c'</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:92"><span class="id" title="variable">v</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#SafeAt_alt:93"><span class="id" title="inductive">SafeAt_alt</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:91"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:92"><span class="id" title="variable">v</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:95"><span class="id" title="variable">b</span></a>.<br/>

<br/>
<span class="comment">(*<br/>
&nbsp;&nbsp;I&nbsp;think&nbsp;SafeAt&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;saying&nbsp;that&nbsp;at&nbsp;each&nbsp;earlier&nbsp;step&nbsp;c&nbsp;there&nbsp;is&nbsp;a&nbsp;quorum&nbsp;of<br/>
&nbsp;&nbsp;nodes&nbsp;that&nbsp;have&nbsp;passed&nbsp;round&nbsp;c&nbsp;and&nbsp;only&nbsp;voted&nbsp;for&nbsp;v&nbsp;or&nbsp;for&nbsp;nothing&nbsp;at&nbsp;round&nbsp;c.<br/>
*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="safeAt_alt_fwd" class="idref" href="#safeAt_alt_fwd"><span class="id" title="lemma">safeAt_alt_fwd</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:102" class="idref" href="#s:102"><span class="id" title="binder">s</span></a> <a id="v:103" class="idref" href="#v:103"><span class="id" title="binder">v</span></a> <a id="b:104" class="idref" href="#b:104"><span class="id" title="binder">b</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#SafeAt_alt"><span class="id" title="inductive">SafeAt_alt</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:102"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:103"><span class="id" title="variable">v</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:104"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#SafeAt"><span class="id" title="definition">SafeAt</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:102"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:103"><span class="id" title="variable">v</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:104"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">v</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot_lt_wf"><span class="id" title="lemma">Ballot_lt_wf</span></a> <span class="id" title="var">b</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">b</span> <span class="id" title="var">_</span> <span class="id" title="var">IHb</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hsafe</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hsafe</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">b</span> <span class="id" title="var">Q</span> <span class="id" title="var">c'</span> <span class="id" title="var">Hc'</span> <span class="id" title="var">H_maxBal</span> <span class="id" title="var">Hno_vote</span> <span class="id" title="var">Hc_votes</span>]; <span class="id" title="tactic">intros</span> <span class="id" title="var">d</span> <span class="id" title="var">Hd</span>; [<span class="id" title="tactic">by</span> <span class="id" title="var">ballot_lia</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><span class="id" title="var">c'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="var">d</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><span class="id" title="var">c'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> <span class="id" title="var">d</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a>)%<span class="id" title="var">Z</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_use_Q</span> | <span class="id" title="var">H_d_lt_c</span>] <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>; <span class="id" title="tactic">generalize</span> (<span class="id" title="var">H_maxBal</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#vote_committed"><span class="id" title="definition">vote_committed</span></a>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.le_lteq"><span class="id" title="definition">Z.le_lteq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_use_Q</span> <span class="id" title="keyword">as</span> [| -&gt;%<a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot'_Zeq_iff"><span class="id" title="lemma">Ballot'_Zeq_iff</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span> <span class="id" title="var">w</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hno_vote</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hc_votes</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hc_votes</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">c'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">c</span> |]; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; [| <span class="id" title="tactic">by</span> <span class="id" title="var">ballot_lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.of_N"><span class="id" title="definition">Z.of_N</span></a> <span class="id" title="var">c</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">c</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHb</span> <span class="id" title="var">c</span> <span class="id" title="var">Hc'</span>); [<span class="id" title="tactic">apply</span> <span class="id" title="var">Hc_votes</span> | <span class="id" title="var">lia</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="safeAt_alt_rev" class="idref" href="#safeAt_alt_rev"><span class="id" title="lemma">safeAt_alt_rev</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:105" class="idref" href="#s:105"><span class="id" title="binder">s</span></a> <a id="v:106" class="idref" href="#v:106"><span class="id" title="binder">v</span></a> <a id="b:107" class="idref" href="#b:107"><span class="id" title="binder">b</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#SafeAt"><span class="id" title="definition">SafeAt</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:105"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:106"><span class="id" title="variable">v</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:107"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#SafeAt_alt"><span class="id" title="inductive">SafeAt_alt</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:105"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:106"><span class="id" title="variable">v</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:107"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">v</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot_peano_ind"><span class="id" title="definition">Ballot_peano_ind</span></a>; <span class="id" title="tactic">intros</span> <span class="id" title="var">H_Sb</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#SafeStart"><span class="id" title="constructor">SafeStart</span></a> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">H_Sb</span> <span class="id" title="var">b</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">Q</span> &amp; <span class="id" title="var">H_Q_maxBal</span> &amp; <span class="id" title="var">H_Q_votes</span>); [<span class="id" title="tactic">by</span> <span class="id" title="var">ballot_lia</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#SafeQuorum"><span class="id" title="constructor">SafeQuorum</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">Q</span> := <span class="id" title="var">Q</span>) (<span class="id" title="var">c'</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">b</span>); <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="var">ballot_lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>; <span class="id" title="tactic">generalize</span> (<span class="id" title="var">H_Q_maxBal</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#vote_committed"><span class="id" title="definition">vote_committed</span></a>; <span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#maxBal"><span class="id" title="projection">maxBal</span></a> (<span class="id" title="var">s</span> <span class="id" title="var">a</span>)); <span class="id" title="tactic">simpl</span>; <span class="id" title="var">ballot_lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="var">ballot_lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">_</span>; <span class="id" title="tactic">split</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">d</span> <span class="id" title="var">Hd</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">H_Sb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">ballot_lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="SafeAt_alt_iff" class="idref" href="#SafeAt_alt_iff"><span class="id" title="lemma">SafeAt_alt_iff</span></a> : <br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:108" class="idref" href="#s:108"><span class="id" title="binder">s</span></a> <a id="v:109" class="idref" href="#v:109"><span class="id" title="binder">v</span></a> <a id="b:110" class="idref" href="#b:110"><span class="id" title="binder">b</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#SafeAt"><span class="id" title="definition">SafeAt</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:108"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:109"><span class="id" title="variable">v</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:110"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#SafeAt_alt"><span class="id" title="inductive">SafeAt_alt</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:108"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:109"><span class="id" title="variable">v</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:110"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#safeAt_alt_rev"><span class="id" title="lemma">safeAt_alt_rev</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#safeAt_alt_fwd"><span class="id" title="lemma">safeAt_alt_fwd</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="voting_composition_constraint" class="idref" href="#voting_composition_constraint"><span class="id" title="definition">voting_composition_constraint</span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.sec_voting_vlsm.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.sec_voting_vlsm.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="notation">False</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> '(<a id="pat:113" class="idref" href="#pat:113"><span class="id" title="binder">existT</span></a> <a id="i:112" class="idref" href="#i:112"><span class="id" title="binder"><span id="pat:113" class="id">i</span></span></a> <a id="l:111" class="idref" href="#l:111"><span class="id" title="binder"><span id="pat:113" class="id">l</span></span></a>) '<a id="pat:115" class="idref" href="#pat:115"><span class="id" title="binder">(</span></a><a id="s:114" class="idref" href="#s:114"><span class="id" title="binder"><span id="pat:115" class="id">s</span></span></a><a id="pat:115" class="idref" href="#pat:115"><span class="id" title="binder">,</span></a> <a id="pat:115" class="idref" href="#pat:115"><span class="id" title="binder">_</span></a><a id="pat:115" class="idref" href="#pat:115"><span class="id" title="binder">)</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#l:111"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Voting.html#SkipToRound"><span class="id" title="constructor">SkipToRound</span></a> <span class="id" title="var">_</span> =&gt; <span class="id" title="notation">True</span> <span class="comment">(*&nbsp;Local&nbsp;checks&nbsp;suffice&nbsp;here&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Vote"><span class="id" title="constructor">Vote</span></a> <span class="id" title="var">b</span> <span class="id" title="var">v</span> =&gt; <span class="comment">(*&nbsp;Voting&nbsp;needs&nbsp;to&nbsp;check&nbsp;that&nbsp;value&nbsp;v&nbsp;is&nbsp;consistent&nbsp;with&nbsp;all&nbsp;other&nbsp;acceptors.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="j:117" class="idref" href="#j:117"><span class="id" title="binder">j</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#j:117"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#i:112"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_none_but"><span class="id" title="definition">voted_none_but</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:114"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#j:117"><span class="id" title="variable">j</span></a>) <span class="id" title="var">b</span> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#SafeAt"><span class="id" title="definition">SafeAt</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:114"><span class="id" title="variable">s</span></a> <span class="id" title="var">v</span> <span class="id" title="var">b</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="voting_vlsm" class="idref" href="#voting_vlsm"><span class="id" title="definition">voting_vlsm</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <span class="id" title="notation">False</span> := <a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.sec_voting_vlsm.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voting_composition_constraint"><span class="id" title="definition">voting_composition_constraint</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.sec_voting_vlsm"><span class="id" title="section">sec_voting_vlsm</span></a>.<br/>

<br/>
</div>

<div class="doc">
How to recognize consensus, also for the refinement mapping. 
</div>
<div class="code">
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;(<a id="Quorum:118" class="idref" href="#Quorum:118"><span class="id" title="binder">Quorum</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.ASet"><span class="id" title="variable">ASet</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="QDec:120" class="idref" href="#QDec:120"><span class="id" title="binder">QDec</span></a> : <span class="id" title="notation">forall</span> <a id="Q:119" class="idref" href="#Q:119"><span class="id" title="binder">Q</span></a><span class="id" title="notation">,</span> <span class="id" title="class">Decision</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#Quorum:118"><span class="id" title="variable">Quorum</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Q:119"><span class="id" title="variable">Q</span></a>))<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;key&nbsp;quorum&nbsp;assumption&nbsp;is&nbsp;that&nbsp;any&nbsp;two&nbsp;quorums&nbsp;have&nbsp;a&nbsp;nonempty&nbsp;intersection.&nbsp;*)</span><br/>
&nbsp;&nbsp;(<a id="QA:124" class="idref" href="#QA:124"><span class="id" title="binder">QA</span></a> : <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="Q1:121" class="idref" href="#Q1:121"><span class="id" title="binder">Q1</span></a> <a id="Q2:122" class="idref" href="#Q2:122"><span class="id" title="binder">Q2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#sig"><span class="id" title="inductive">sig</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Quorum:118"><span class="id" title="variable">Quorum</span></a><span class="id" title="notation">),</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="a:123" class="idref" href="#a:123"><span class="id" title="binder">a</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:123"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">`</span><a class="idref" href="VLSM.Examples.Paxos.Voting.html#Q1:121"><span class="id" title="variable">Q1</span></a> <span class="id" title="notation">∩</span> <span class="id" title="notation">`</span><a class="idref" href="VLSM.Examples.Paxos.Voting.html#Q2:122"><span class="id" title="variable">Q2</span></a>)<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;For&nbsp;convenience&nbsp;we&nbsp;also&nbsp;assume&nbsp;that&nbsp;any&nbsp;superset&nbsp;of&nbsp;a&nbsp;quorum&nbsp;is&nbsp;a&nbsp;quorum.&nbsp;*)</span><br/>
&nbsp;&nbsp;(<a id="QClosed:125" class="idref" href="#QClosed:125"><span class="id" title="binder">QClosed</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="definition">subseteq</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Program.Basics.html#impl"><span class="id" title="definition">impl</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Quorum:118"><span class="id" title="variable">Quorum</span></a>)<br/>
&nbsp;&nbsp;(<a id="IM:126" class="idref" href="#IM:126"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <span class="id" title="notation">False</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Voting.html#acceptor_vlsm"><span class="id" title="definition">acceptor_vlsm</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="ballot_chose" class="idref" href="#ballot_chose"><span class="id" title="definition">ballot_chose</span></a> (<a id="s:127" class="idref" href="#s:127"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.IM"><span class="id" title="variable">IM</span></a>) (<a id="b:128" class="idref" href="#b:128"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) (<a id="v:129" class="idref" href="#v:129"><span class="id" title="binder">v</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Value"><span class="id" title="variable">Value</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="Q:130" class="idref" href="#Q:130"><span class="id" title="binder">Q</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#sig"><span class="id" title="inductive">sig</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#allQuorum"><span class="id" title="definition">allQuorum</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Q:130"><span class="id" title="variable">Q</span></a> (<span class="id" title="keyword">fun</span> <a id="a:131" class="idref" href="#a:131"><span class="id" title="binder">a</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_for"><span class="id" title="definition">voted_for</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:127"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:131"><span class="id" title="variable">a</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:128"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:129"><span class="id" title="variable">v</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="ballots_with_votes" class="idref" href="#ballots_with_votes"><span class="id" title="definition">ballots_with_votes</span></a> (<a id="s:132" class="idref" href="#s:132"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.IM"><span class="id" title="variable">IM</span></a>) : <span class="id" title="abbreviation">Nset</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">union_list</span> (<span class="id" title="notation">(</span><span class="id" title="keyword">fun</span> <a id="a:133" class="idref" href="#a:133"><span class="id" title="binder">a</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a> =&gt; <span class="id" title="definition">dom</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#votes"><span class="id" title="projection">votes</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:132"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:133"><span class="id" title="variable">a</span></a>))<span class="id" title="notation">)</span> <span class="id" title="notation">&lt;$&gt;</span> <span class="id" title="method">enum</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="ballot_chose_inrange" class="idref" href="#ballot_chose_inrange"><span class="id" title="lemma">ballot_chose_inrange</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:134" class="idref" href="#s:134"><span class="id" title="binder">s</span></a> <a id="b:135" class="idref" href="#b:135"><span class="id" title="binder">b</span></a> <a id="v:136" class="idref" href="#v:136"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#ballot_chose"><span class="id" title="definition">ballot_chose</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:134"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:135"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:136"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:135"><span class="id" title="variable">b</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#ballots_with_votes"><span class="id" title="definition">ballots_with_votes</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:134"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#ballot_chose"><span class="id" title="definition">ballot_chose</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">b</span> <span class="id" title="var">v</span> [<span class="id" title="var">Q</span> <span class="id" title="var">HQ</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="a:137" class="idref" href="#a:137"><span class="id" title="binder"><span id="a:138" class="id">a</span></span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:137"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">`</span><span class="id" title="var">Q</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">a</span> <span class="id" title="var">Ha</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">setoid_rewrite</span> &lt;- (<span class="id" title="instance">intersection_idemp</span> (<span class="id" title="notation">`</span><span class="id" title="var">Q</span>)); <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.QA"><span class="id" title="variable">QA</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_union_list</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">elem_of_list_fmap_1</span>, (<span class="id" title="method">elem_of_enum</span> <span class="id" title="var">a</span>) |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="method">fin_map_dom.elem_of_dom</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">HQ</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_for"><span class="id" title="definition">voted_for</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_total_alt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#votes"><span class="id" title="projection">votes</span></a> (<span class="id" title="var">s</span> <span class="id" title="var">a</span>) <span class="id" title="notation">!!</span> <span class="id" title="var">b</span>); <span class="id" title="var">cbn</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_empty</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="ballot_chose_dec" class="idref" href="#ballot_chose_dec"><span class="id" title="instance">ballot_chose_dec</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:139" class="idref" href="#s:139"><span class="id" title="binder">s</span></a> <a id="b:140" class="idref" href="#b:140"><span class="id" title="binder">b</span></a> <a id="v:141" class="idref" href="#v:141"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="class">Decision</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#ballot_chose"><span class="id" title="definition">ballot_chose</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:139"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:140"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:141"><span class="id" title="variable">v</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">b</span> <span class="id" title="var">v</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#ballot_chose"><span class="id" title="definition">ballot_chose</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">voters</span> := <span class="id" title="definition">list_to_set</span> (<span class="id" title="definition">filter</span> (<span class="id" title="keyword">fun</span> <a id="a:142" class="idref" href="#a:142"><span class="id" title="binder"><span id="a:143" class="id">a</span></span></a> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_for"><span class="id" title="definition">voted_for</span></a> (<span class="id" title="var">s</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:142"><span class="id" title="variable">a</span></a>) <span class="id" title="var">b</span> <span class="id" title="var">v</span>) (<span class="id" title="method">enum</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a>)) : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.ASet"><span class="id" title="variable">ASet</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hvoters</span> : <span class="id" title="notation">forall</span> <a id="Q:144" class="idref" href="#Q:144"><span class="id" title="binder"><span id="Q:146" class="id">Q</span></span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#allQuorum"><span class="id" title="definition">allQuorum</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Q:144"><span class="id" title="variable">Q</span></a> (<span class="id" title="keyword">fun</span> <a id="a:145" class="idref" href="#a:145"><span class="id" title="binder"><span id="a:147" class="id">a</span></span></a> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_for"><span class="id" title="definition">voted_for</span></a> (<span class="id" title="var">s</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:145"><span class="id" title="variable">a</span></a>) <span class="id" title="var">b</span> <span class="id" title="var">v</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <span class="id" title="notation">`</span><a class="idref" href="VLSM.Examples.Paxos.Voting.html#Q:144"><span class="id" title="variable">Q</span></a> <span class="id" title="notation">⊆</span> <span class="id" title="var">voters</span>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Q</span> <span class="id" title="var">HQ</span>]; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">HallQ</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">HallQ</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_to_set</span>, <span class="id" title="lemma">elem_of_list_filter</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">split</span>; [| <span class="id" title="tactic">apply</span> <span class="id" title="method">elem_of_enum</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hsub</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hsub</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_to_set</span>, <span class="id" title="lemma">elem_of_list_filter</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsub</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hsub</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.QDec"><span class="id" title="variable">QDec</span></a> <span class="id" title="var">voters</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">yes</span> | <span class="id" title="keyword">no</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">left</span>; <span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">voters</span> <span class="id" title="var">yes</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hvoters</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradict</span> <span class="id" title="keyword">no</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="keyword">no</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Q'</span> <span class="id" title="var">HQ'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hvoters</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HQ'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#proj2_sig"><span class="id" title="definition">proj2_sig</span></a> <span class="id" title="var">Q'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.QClosed"><span class="id" title="variable">QClosed</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="ballot_proposals" class="idref" href="#ballot_proposals"><span class="id" title="definition">ballot_proposals</span></a> (<a id="s:148" class="idref" href="#s:148"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.IM"><span class="id" title="variable">IM</span></a>) (<a id="b:149" class="idref" href="#b:149"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.VSet"><span class="id" title="variable">VSet</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">union_list</span> (<span class="id" title="notation">(</span><span class="id" title="keyword">fun</span> <a id="a:150" class="idref" href="#a:150"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Voting.html#votes"><span class="id" title="projection">votes</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:148"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:150"><span class="id" title="variable">a</span></a>) <span class="id" title="notation">!!!</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:149"><span class="id" title="variable">b</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">&lt;$&gt;</span> <span class="id" title="method">enum</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="ballot_chose_in_proposals" class="idref" href="#ballot_chose_in_proposals"><span class="id" title="lemma">ballot_chose_in_proposals</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:151" class="idref" href="#s:151"><span class="id" title="binder">s</span></a> <a id="b:152" class="idref" href="#b:152"><span class="id" title="binder">b</span></a> <a id="v:153" class="idref" href="#v:153"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#ballot_chose"><span class="id" title="definition">ballot_chose</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:151"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:152"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:153"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:153"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#ballot_proposals"><span class="id" title="definition">ballot_proposals</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:151"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:152"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#ballot_chose"><span class="id" title="definition">ballot_chose</span></a>, <a class="idref" href="VLSM.Examples.Paxos.Voting.html#ballot_proposals"><span class="id" title="definition">ballot_proposals</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">b</span> <span class="id" title="var">v</span> [<span class="id" title="var">Q</span> <span class="id" title="var">HQ</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.QA"><span class="id" title="variable">QA</span></a> <span class="id" title="var">Q</span> <span class="id" title="var">Q</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">a</span> <span class="id" title="var">Ha</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="instance">intersection_idemp</span> (<span class="id" title="notation">`</span><span class="id" title="var">Q</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">Ha</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">HQ</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>); <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_for"><span class="id" title="definition">voted_for</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_union_list</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#votes"><span class="id" title="projection">votes</span></a> (<span class="id" title="var">s</span> <span class="id" title="var">a</span>) <span class="id" title="notation">!!!</span> <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="lemma">elem_of_list_fmap_1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">a</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="method">elem_of_enum</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="chosen_by_ballot" class="idref" href="#chosen_by_ballot"><span class="id" title="definition">chosen_by_ballot</span></a> (<a id="s:154" class="idref" href="#s:154"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#voting_vlsm"><span class="id" title="definition">voting_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a>)) (<a id="b:155" class="idref" href="#b:155"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.VSet"><span class="id" title="variable">VSet</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="instance">set_filter</span> (<span class="id" title="keyword">fun</span> <a id="v:156" class="idref" href="#v:156"><span class="id" title="binder">v</span></a> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Voting.html#ballot_chose"><span class="id" title="definition">ballot_chose</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:154"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:155"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:156"><span class="id" title="variable">v</span></a>) <span class="id" title="var">_</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#ballot_proposals"><span class="id" title="definition">ballot_proposals</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:154"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:155"><span class="id" title="variable">b</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="chosen" class="idref" href="#chosen"><span class="id" title="definition">chosen</span></a> (<a id="s:157" class="idref" href="#s:157"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#voting_vlsm"><span class="id" title="definition">voting_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a>)) : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.VSet"><span class="id" title="variable">VSet</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">union_list</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#chosen_by_ballot"><span class="id" title="definition">chosen_by_ballot</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:157"><span class="id" title="variable">s</span></a> <span class="id" title="notation">&lt;$&gt;</span> <span class="id" title="definition">elements</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#ballots_with_votes"><span class="id" title="definition">ballots_with_votes</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:157"><span class="id" title="variable">s</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="chosen_iff" class="idref" href="#chosen_iff"><span class="id" title="lemma">chosen_iff</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:158" class="idref" href="#s:158"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#voting_vlsm"><span class="id" title="definition">voting_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a>)) (<a id="v:159" class="idref" href="#v:159"><span class="id" title="binder">v</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Value"><span class="id" title="variable">Value</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:159"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#chosen"><span class="id" title="definition">chosen</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:158"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="b:160" class="idref" href="#b:160"><span class="id" title="binder">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#ballot_chose"><span class="id" title="definition">ballot_chose</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:158"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:160"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:159"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#chosen"><span class="id" title="definition">chosen</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_union_list</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">C_by_b</span> &amp; <span class="id" title="var">HC</span> &amp; <span class="id" title="var">Hb</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_fmap</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HC</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">b</span> &amp; -&gt; &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#chosen_by_ballot"><span class="id" title="definition">chosen_by_ballot</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_filter</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hb</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">b</span> <span class="id" title="var">Hb</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#ballot_chose_inrange"><span class="id" title="lemma">ballot_chose_inrange</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hb</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hb_dom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#chosen"><span class="id" title="definition">chosen</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_union_list</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#chosen_by_ballot"><span class="id" title="definition">chosen_by_ballot</span></a> <span class="id" title="var">s</span> <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_fmap_1</span>, <span class="id" title="method">elem_of_elements</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#chosen_by_ballot"><span class="id" title="definition">chosen_by_ballot</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_filter</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#ballot_chose_in_proposals"><span class="id" title="lemma">ballot_chose_in_proposals</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hb</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hv</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Each acceptor can vote for at most one value in any given ballot 
</div>
<div class="code">
<span class="comment">(*&nbsp;VInv1&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="acceptor_no_conflict_prop" class="idref" href="#acceptor_no_conflict_prop"><span class="id" title="definition">acceptor_no_conflict_prop</span></a> (<a id="s:161" class="idref" href="#s:161"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#voting_vlsm"><span class="id" title="definition">voting_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a>)) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="a:162" class="idref" href="#a:162"><span class="id" title="binder">a</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a>) (<a id="b:163" class="idref" href="#b:163"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) (<a id="v:164" class="idref" href="#v:164"><span class="id" title="binder">v</span></a> <a id="w:165" class="idref" href="#w:165"><span class="id" title="binder">w</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Value"><span class="id" title="variable">Value</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_for"><span class="id" title="definition">voted_for</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:161"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:162"><span class="id" title="variable">a</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:163"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:164"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_for"><span class="id" title="definition">voted_for</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:161"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:162"><span class="id" title="variable">a</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:163"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#w:165"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:164"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#w:165"><span class="id" title="variable">w</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;VInv2&nbsp;*)</span><br/>
</div>

<div class="doc">
Every vote is for a safe value 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="acceptor_votes_safe_prop" class="idref" href="#acceptor_votes_safe_prop"><span class="id" title="definition">acceptor_votes_safe_prop</span></a> (<a id="s:166" class="idref" href="#s:166"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#voting_vlsm"><span class="id" title="definition">voting_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a>)) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="a:167" class="idref" href="#a:167"><span class="id" title="binder">a</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a>) (<a id="b:168" class="idref" href="#b:168"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) (<a id="v:169" class="idref" href="#v:169"><span class="id" title="binder">v</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Value"><span class="id" title="variable">Value</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_for"><span class="id" title="definition">voted_for</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:166"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:167"><span class="id" title="variable">a</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:168"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:169"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#SafeAt"><span class="id" title="definition">SafeAt</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:166"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:169"><span class="id" title="variable">v</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:168"><span class="id" title="variable">b</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="step_cases" class="idref" href="#step_cases"><span class="id" title="lemma">step_cases</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> [<a id="li:170" class="idref" href="#li:170"><span class="id" title="binder">li</span></a> <a id="s:171" class="idref" href="#s:171"><span class="id" title="binder">s</span></a> <a id="om:172" class="idref" href="#om:172"><span class="id" title="binder">om</span></a> <a id="s':173" class="idref" href="#s':173"><span class="id" title="binder">s'</span></a> <a id="om':174" class="idref" href="#om':174"><span class="id" title="binder">om'</span></a>]<span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#voting_vlsm"><span class="id" title="definition">voting_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#li:170"><span class="id" title="variable">li</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:171"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#om:172"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Voting.html#s':173"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#om':174"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="i:175" class="idref" href="#i:175"><span class="id" title="binder">i</span></a>, <a id="l:176" class="idref" href="#l:176"><span class="id" title="binder">l</span></a>) := <a class="idref" href="VLSM.Examples.Paxos.Voting.html#li:170"><span class="id" title="variable">li</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s':173"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:171"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#i:175"><span class="id" title="variable">i</span></a> (<span class="id" title="notation">(</span><a class="idref" href="VLSM.Examples.Paxos.Voting.html#acceptor_transition"><span class="id" title="definition">acceptor_transition</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#l:176"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:171"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#i:175"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#om:172"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">).1</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#l:176"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Voting.html#SkipToRound"><span class="id" title="constructor">SkipToRound</span></a> <span class="id" title="var">b'</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Examples.Paxos.Voting.html#maxBal"><span class="id" title="projection">maxBal</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:171"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#i:175"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">b'</span>)%<span class="id" title="var">Z</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Vote"><span class="id" title="constructor">Vote</span></a> <span class="id" title="var">b</span> <span class="id" title="var">v</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Examples.Paxos.Voting.html#maxBal"><span class="id" title="projection">maxBal</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:171"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#i:175"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="var">b</span>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#did_not_vote_in"><span class="id" title="definition">did_not_vote_in</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:171"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#i:175"><span class="id" title="variable">i</span></a>) <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#SafeAt"><span class="id" title="definition">SafeAt</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:171"><span class="id" title="variable">s</span></a> <span class="id" title="var">v</span> <span class="id" title="var">b</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">i</span> <span class="id" title="var">l</span>] <span class="id" title="var">s</span> <span class="id" title="var">om</span> <span class="id" title="var">s'</span> <span class="id" title="var">om'</span> [(<span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Hlv</span> &amp; <span class="id" title="var">Hcv</span>) <span class="id" title="var">Htrans</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htrans</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hlv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="var">split_and</span>!; [<span class="id" title="tactic">apply</span> <span class="id" title="var">Hlv</span>.. | <span class="id" title="tactic">apply</span> <span class="id" title="var">Hcv</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="step_cases'" class="idref" href="#step_cases'"><span class="id" title="lemma">step_cases'</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> [<a id="li:178" class="idref" href="#li:178"><span class="id" title="binder">li</span></a> <a id="s:179" class="idref" href="#s:179"><span class="id" title="binder">s</span></a> <a id="om:180" class="idref" href="#om:180"><span class="id" title="binder">om</span></a> <a id="s':181" class="idref" href="#s':181"><span class="id" title="binder">s'</span></a> <a id="om':182" class="idref" href="#om':182"><span class="id" title="binder">om'</span></a>]<span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#voting_vlsm"><span class="id" title="definition">voting_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#li:178"><span class="id" title="variable">li</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:179"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#om:180"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Voting.html#s':181"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#om':182"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="i:183" class="idref" href="#i:183"><span class="id" title="binder">i</span></a>, <a id="l:184" class="idref" href="#l:184"><span class="id" title="binder">l</span></a>) := <a class="idref" href="VLSM.Examples.Paxos.Voting.html#li:178"><span class="id" title="variable">li</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#l:184"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Voting.html#SkipToRound"><span class="id" title="constructor">SkipToRound</span></a> <span class="id" title="var">b'</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Examples.Paxos.Voting.html#maxBal"><span class="id" title="projection">maxBal</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:179"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#i:183"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">b'</span>)%<span class="id" title="var">Z</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s':181"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:179"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#i:183"><span class="id" title="variable">i</span></a> {| <a class="idref" href="VLSM.Examples.Paxos.Voting.html#votes"><span class="id" title="projection">votes</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Voting.html#votes"><span class="id" title="projection">votes</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:179"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#i:183"><span class="id" title="variable">i</span></a>); <a class="idref" href="VLSM.Examples.Paxos.Voting.html#maxBal"><span class="id" title="projection">maxBal</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">b'</span>; |}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Vote"><span class="id" title="constructor">Vote</span></a> <span class="id" title="var">b</span> <span class="id" title="var">v</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Examples.Paxos.Voting.html#maxBal"><span class="id" title="projection">maxBal</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:179"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#i:183"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="var">b</span>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#did_not_vote_in"><span class="id" title="definition">did_not_vote_in</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:179"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#i:183"><span class="id" title="variable">i</span></a>) <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="j:186" class="idref" href="#j:186"><span class="id" title="binder">j</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#j:186"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#i:183"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_none_but"><span class="id" title="definition">voted_none_but</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:179"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#j:186"><span class="id" title="variable">j</span></a>) <span class="id" title="var">b</span> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#SafeAt"><span class="id" title="definition">SafeAt</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:179"><span class="id" title="variable">s</span></a> <span class="id" title="var">v</span> <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s':181"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:179"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#i:183"><span class="id" title="variable">i</span></a> {| <a class="idref" href="VLSM.Examples.Paxos.Voting.html#votes"><span class="id" title="projection">votes</span></a> := <a class="idref" href="VLSM.Lib.FinSetExtras.html#mmap_insert"><span class="id" title="definition">mmap_insert</span></a> <span class="id" title="var">b</span> <span class="id" title="var">v</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#votes"><span class="id" title="projection">votes</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:179"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#i:183"><span class="id" title="variable">i</span></a>)); <a class="idref" href="VLSM.Examples.Paxos.Voting.html#maxBal"><span class="id" title="projection">maxBal</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">b</span> |}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">i</span> <span class="id" title="var">l</span>] <span class="id" title="var">s</span> <span class="id" title="var">om</span> <span class="id" title="var">s'</span> <span class="id" title="var">om'</span> [(<span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Hvalid</span>) <span class="id" title="var">Htrans</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#surjective_pairing"><span class="id" title="lemma">surjective_pairing</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">Htrans</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f_equal"><span class="id" title="lemma">f_equal</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">Htrans</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a>] <span class="id" title="tactic">in</span> <span class="id" title="var">Htrans</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">s'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hvalid</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="step_cases''" class="idref" href="#step_cases''"><span class="id" title="lemma">step_cases''</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> [<a id="li:187" class="idref" href="#li:187"><span class="id" title="binder">li</span></a> <a id="s:188" class="idref" href="#s:188"><span class="id" title="binder">s</span></a> <a id="om:189" class="idref" href="#om:189"><span class="id" title="binder">om</span></a> <a id="s':190" class="idref" href="#s':190"><span class="id" title="binder">s'</span></a> <a id="om':191" class="idref" href="#om':191"><span class="id" title="binder">om'</span></a>]<span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#voting_vlsm"><span class="id" title="definition">voting_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#li:187"><span class="id" title="variable">li</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:188"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#om:189"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Voting.html#s':190"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#om':191"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="a:192" class="idref" href="#a:192"><span class="id" title="binder">a</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="i:193" class="idref" href="#i:193"><span class="id" title="binder">i</span></a>, <a id="l:194" class="idref" href="#l:194"><span class="id" title="binder">l</span></a>) := <a class="idref" href="VLSM.Examples.Paxos.Voting.html#li:187"><span class="id" title="variable">li</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="definition">decide</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:192"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#i:193"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s':190"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:192"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">{|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#maxBal"><span class="id" title="projection">maxBal</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#l:194"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Voting.html#SkipToRound"><span class="id" title="constructor">SkipToRound</span></a> <span class="id" title="var">b'</span> =&gt; <span class="id" title="var">b'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Vote"><span class="id" title="constructor">Vote</span></a> <span class="id" title="var">b</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">b</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#votes"><span class="id" title="projection">votes</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#l:194"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Voting.html#SkipToRound"><span class="id" title="constructor">SkipToRound</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="VLSM.Examples.Paxos.Voting.html#votes"><span class="id" title="projection">votes</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:188"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:192"><span class="id" title="variable">a</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Vote"><span class="id" title="constructor">Vote</span></a> <span class="id" title="var">b</span> <span class="id" title="var">v</span> =&gt; <a class="idref" href="VLSM.Lib.FinSetExtras.html#mmap_insert"><span class="id" title="definition">mmap_insert</span></a> <span class="id" title="var">b</span> <span class="id" title="var">v</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#votes"><span class="id" title="projection">votes</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:188"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:192"><span class="id" title="variable">a</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">|}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s':190"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:192"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:188"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:192"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">i</span> <span class="id" title="var">l</span>] <span class="id" title="var">s</span> <span class="id" title="var">om</span> <span class="id" title="var">s'</span> <span class="id" title="var">om'</span> <span class="id" title="var">Ht</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#step_cases"><span class="id" title="lemma">step_cases</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [-&gt; <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>)); [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">s</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">mb_a</span> <span class="id" title="var">votes_a</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">om</span> <span class="id" title="keyword">as</span> [[] |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="prev_votes" class="idref" href="#prev_votes"><span class="id" title="lemma">prev_votes</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> [<a id="li:197" class="idref" href="#li:197"><span class="id" title="binder">li</span></a> <a id="s:198" class="idref" href="#s:198"><span class="id" title="binder">s</span></a> <a id="om:199" class="idref" href="#om:199"><span class="id" title="binder">om</span></a> <a id="s':200" class="idref" href="#s':200"><span class="id" title="binder">s'</span></a> <a id="om':201" class="idref" href="#om':201"><span class="id" title="binder">om'</span></a>]<span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#voting_vlsm"><span class="id" title="definition">voting_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#li:197"><span class="id" title="variable">li</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:198"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#om:199"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Voting.html#s':200"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#om':201"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="a:202" class="idref" href="#a:202"><span class="id" title="binder">a</span></a> <a id="b:203" class="idref" href="#b:203"><span class="id" title="binder">b</span></a> <a id="v:204" class="idref" href="#v:204"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_for"><span class="id" title="definition">voted_for</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s':200"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:202"><span class="id" title="variable">a</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:203"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:204"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#li:197"><span class="id" title="variable">li</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">i</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#SkipToRound"><span class="id" title="constructor">SkipToRound</span></a> <span class="id" title="var">_</span>) =&gt; <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_for"><span class="id" title="definition">voted_for</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:198"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:202"><span class="id" title="variable">a</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:203"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:204"><span class="id" title="variable">v</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">i</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#Vote"><span class="id" title="constructor">Vote</span></a> <span class="id" title="var">bv</span> <span class="id" title="var">vv</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:202"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:203"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">bv</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:204"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">vv</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:202"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:203"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <span class="id" title="var">bv</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_for"><span class="id" title="definition">voted_for</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:198"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:202"><span class="id" title="variable">a</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:203"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:204"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">i</span> <span class="id" title="var">l</span>] <span class="id" title="var">s</span> <span class="id" title="var">om</span> <span class="id" title="var">s'</span> <span class="id" title="var">om'</span> [<span class="id" title="var">Hs'</span> <span class="id" title="var">Ht</span>]%<a class="idref" href="VLSM.Examples.Paxos.Voting.html#step_cases"><span class="id" title="lemma">step_cases</span></a> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hs'</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hs'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>)); [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">auto</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_for"><span class="id" title="definition">voted_for</span></a>, <a class="idref" href="VLSM.Lib.FinSetExtras.html#mmap_insert"><span class="id" title="definition">mmap_insert</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">b0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">b</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_total_insert_ne</span> <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>; <span class="id" title="tactic">right</span>; <span class="id" title="var">set_solver</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">b0</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_total_insert</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#votes"><span class="id" title="projection">votes</span></a> (<span class="id" title="var">s</span> <span class="id" title="var">a</span>) <span class="id" title="notation">!!!</span> <span class="id" title="var">b</span> <span class="id" title="notation">≡@{</span><a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.VSet"><span class="id" title="variable">VSet</span></a><span class="id" title="notation">}</span> <span class="id" title="notation">∅</span>) <span class="id" title="keyword">as</span> -&gt; <span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_equiv_empty</span>, <span class="id" title="var">Ht</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">left</span>; <span class="id" title="var">set_solver</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  A stronger claim which is that
  two votes on the same ballot cannot be for different values,
  even if they are from different acceptors.
  This is not needed to prove safety, only for liveness.

</div>
<div class="code">
<span class="comment">(*&nbsp;VInv3&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="ballot_no_conflict_prop" class="idref" href="#ballot_no_conflict_prop"><span class="id" title="definition">ballot_no_conflict_prop</span></a> (<a id="s:206" class="idref" href="#s:206"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#voting_vlsm"><span class="id" title="definition">voting_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a>)) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="a1:207" class="idref" href="#a1:207"><span class="id" title="binder">a1</span></a> <a id="a2:208" class="idref" href="#a2:208"><span class="id" title="binder">a2</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Acceptor"><span class="id" title="variable">Acceptor</span></a>) (<a id="b:209" class="idref" href="#b:209"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) (<a id="v1:210" class="idref" href="#v1:210"><span class="id" title="binder">v1</span></a> <a id="v2:211" class="idref" href="#v2:211"><span class="id" title="binder">v2</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Value"><span class="id" title="variable">Value</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_for"><span class="id" title="definition">voted_for</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:206"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a1:207"><span class="id" title="variable">a1</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:209"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v1:210"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_for"><span class="id" title="definition">voted_for</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:206"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a2:208"><span class="id" title="variable">a2</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:209"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v2:211"><span class="id" title="variable">v2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v1:210"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v2:211"><span class="id" title="variable">v2</span></a>.<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <a id="corr_conflict_props" class="idref" href="#corr_conflict_props"><span class="id" title="lemma">corr_conflict_props</span></a> (<a id="s:212" class="idref" href="#s:212"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#voting_vlsm"><span class="id" title="definition">voting_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a>)) :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#ballot_no_conflict_prop"><span class="id" title="definition">ballot_no_conflict_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:212"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#acceptor_no_conflict_prop"><span class="id" title="definition">acceptor_no_conflict_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:212"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#acceptor_no_conflict_prop"><span class="id" title="definition">acceptor_no_conflict_prop</span></a>, <a class="idref" href="VLSM.Examples.Paxos.Voting.html#ballot_no_conflict_prop"><span class="id" title="definition">ballot_no_conflict_prop</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
invariance of VInv1 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="inv_acceptor_no_conflict" class="idref" href="#inv_acceptor_no_conflict"><span class="id" title="lemma">inv_acceptor_no_conflict</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:213" class="idref" href="#s:213"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#voting_vlsm"><span class="id" title="definition">voting_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:213"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#acceptor_no_conflict_prop"><span class="id" title="definition">acceptor_no_conflict_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:213"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop_ind"><span class="id" title="lemma">valid_state_prop_ind</span></a>; <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">v</span> <span class="id" title="var">w</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">Hs</span> <span class="id" title="var">a</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">Hs</span> <span class="id" title="var">s</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hv</span>; <span class="id" title="var">exfalso</span>; <span class="id" title="var">contradict</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_for"><span class="id" title="definition">voted_for</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_total_empty</span>. <span class="comment">(*&nbsp;matching&nbsp;a&nbsp;typo&nbsp;in&nbsp;stdpp&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="method">not_elem_of_empty</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hv</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#prev_votes"><span class="id" title="lemma">prev_votes</span></a> <span class="id" title="var">Ht</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span>, <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHs</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">v</span> <span class="id" title="var">w</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">i</span> []]; [<span class="id" title="tactic">auto</span> | <span class="id" title="var">itauto</span> <span class="id" title="tactic">congruence</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
VInv4 in the paper 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="maxBal_limits_votes_prop" class="idref" href="#maxBal_limits_votes_prop"><span class="id" title="definition">maxBal_limits_votes_prop</span></a> (<a id="s:214" class="idref" href="#s:214"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#voting_vlsm"><span class="id" title="definition">voting_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a>)) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="a:215" class="idref" href="#a:215"><span class="id" title="binder">a</span></a> (<a id="b:216" class="idref" href="#b:216"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Examples.Paxos.Voting.html#maxBal"><span class="id" title="projection">maxBal</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:214"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:215"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:216"><span class="id" title="variable">b</span></a>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#did_not_vote_in"><span class="id" title="definition">did_not_vote_in</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:214"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:215"><span class="id" title="variable">a</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:216"><span class="id" title="variable">b</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="inv_max_bal_limits_votes" class="idref" href="#inv_max_bal_limits_votes"><span class="id" title="lemma">inv_max_bal_limits_votes</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:217" class="idref" href="#s:217"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#voting_vlsm"><span class="id" title="definition">voting_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:217"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#maxBal_limits_votes_prop"><span class="id" title="definition">maxBal_limits_votes_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:217"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#maxBal_limits_votes_prop"><span class="id" title="definition">maxBal_limits_votes_prop</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop_ind"><span class="id" title="lemma">valid_state_prop_ind</span></a>; <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">_</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">Hs</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_for"><span class="id" title="definition">voted_for</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_total_empty</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="method">not_elem_of_empty</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">i</span> <span class="id" title="var">l</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#step_cases"><span class="id" title="lemma">step_cases</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hs'</span> <span class="id" title="var">Hl</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>)); [<span class="id" title="tactic">subst</span> <span class="id" title="var">i</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hs'</span>, <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hs'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">b'</span> | <span class="id" title="var">bv</span> <span class="id" title="var">vv</span>]; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> <span class="id" title="var">Hb'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHHs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#maxBal"><span class="id" title="projection">maxBal</span></a> (<span class="id" title="var">s</span> <span class="id" title="var">a</span>)); <span class="id" title="tactic">simpl</span>; <span class="id" title="var">ballot_lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> <span class="id" title="var">Hb</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_for"><span class="id" title="definition">voted_for</span></a>, <a class="idref" href="VLSM.Lib.FinSetExtras.html#mmap_insert"><span class="id" title="definition">mmap_insert</span></a>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_total_insert_ne</span> <span class="id" title="tactic">by</span> <span class="id" title="var">ballot_lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHHs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#proj1"><span class="id" title="lemma">proj1</span></a> <span class="id" title="var">Hl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#maxBal"><span class="id" title="projection">maxBal</span></a> (<span class="id" title="var">s</span> <span class="id" title="var">a</span>)); <span class="id" title="tactic">simpl</span>; <span class="id" title="var">ballot_lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hs'</span>, <a class="idref" href="VLSM.Core.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a> <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHHs</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="cbq_blocks" class="idref" href="#cbq_blocks"><span class="id" title="lemma">cbq_blocks</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:218" class="idref" href="#s:218"><span class="id" title="binder">s</span></a> <a id="b:219" class="idref" href="#b:219"><span class="id" title="binder">b</span></a> <a id="v:220" class="idref" href="#v:220"><span class="id" title="binder">v</span></a> <a id="w:221" class="idref" href="#w:221"><span class="id" title="binder">w</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="Q:222" class="idref" href="#Q:222"><span class="id" title="binder">Q</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#consensus_blocking_quorum"><span class="id" title="definition">consensus_blocking_quorum</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:218"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:219"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:220"><span class="id" title="variable">v</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Q:222"><span class="id" title="variable">Q</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#ballot_chose"><span class="id" title="definition">ballot_chose</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:218"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:219"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#w:221"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:220"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#w:221"><span class="id" title="variable">w</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">b</span> <span class="id" title="var">v</span> <span class="id" title="var">w</span> (<span class="id" title="var">Q</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Hblock</span>) [<span class="id" title="var">QQ</span> <span class="id" title="var">Hchose</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.QA"><span class="id" title="variable">QA</span></a> <span class="id" title="var">Q</span> <span class="id" title="var">QQ</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">a</span> <span class="id" title="var">Ha</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="method">elem_of_intersection</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Ha_Q</span> <span class="id" title="var">Ha_QQ</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hblock</span>; [| <span class="id" title="tactic">apply</span> <span class="id" title="var">Hchose</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;does&nbsp;not&nbsp;need&nbsp;invariants&nbsp;yet&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="VT0" class="idref" href="#VT0"><span class="id" title="lemma">VT0</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:223" class="idref" href="#s:223"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#voting_vlsm"><span class="id" title="definition">voting_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:223"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="v:224" class="idref" href="#v:224"><span class="id" title="binder">v</span></a> <a id="w:225" class="idref" href="#w:225"><span class="id" title="binder">w</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Value"><span class="id" title="variable">Value</span></a>) (<a id="b:226" class="idref" href="#b:226"><span class="id" title="binder">b</span></a> <a id="c:227" class="idref" href="#c:227"><span class="id" title="binder">c</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:226"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.NArith.BinNat.html#::N_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#c:227"><span class="id" title="variable">c</span></a>)%<span class="id" title="var">N</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#SafeAt"><span class="id" title="definition">SafeAt</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:223"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:224"><span class="id" title="variable">v</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:226"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#ballot_chose"><span class="id" title="definition">ballot_chose</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:223"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#c:227"><span class="id" title="variable">c</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#w:225"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:224"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#w:225"><span class="id" title="variable">w</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">v</span> <span class="id" title="var">w</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">P</span> <a id="b:228" class="idref" href="#b:228"><span class="id" title="binder"><span id="b:230" class="id">b</span></span></a> := <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="c:229" class="idref" href="#c:229"><span class="id" title="binder"><span id="c:231" class="id">c</span></span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:228"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.NArith.BinNat.html#::N_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#c:229"><span class="id" title="variable">c</span></a>)%<span class="id" title="var">N</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#SafeAt"><span class="id" title="definition">SafeAt</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a> <span class="id" title="var">s</span> <span class="id" title="var">v</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:228"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#ballot_chose"><span class="id" title="definition">ballot_chose</span></a> <span class="id" title="var">s</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#c:229"><span class="id" title="variable">c</span></a> <span class="id" title="var">w</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">w</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">fold</span> (<span class="id" title="var">P</span> <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span> <span class="id" title="keyword">using</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.NArith.BinNat.html#N.peano_ind"><span class="id" title="definition">N.peano_ind</span></a>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">intro</span>; <span class="id" title="var">lia</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">c</span> <span class="id" title="var">Hc</span> <span class="id" title="var">Hsafe</span> <span class="id" title="var">Hchosen</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.NArith.BinNat.html#N.gt_lt"><span class="id" title="lemma">N.gt_lt</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.NArith.BinNat.html#N.lt_succ_r"><span class="id" title="lemma">N.lt_succ_r</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.NArith.BinNat.html#N.lt_eq_cases"><span class="id" title="lemma">N.lt_eq_cases</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hc</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hc</span>%<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.NArith.BinNat.html#N.lt_gt"><span class="id" title="lemma">N.lt_gt</span></a> | -&gt;].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHb</span> <span class="id" title="var">c</span> <span class="id" title="var">Hc</span>); [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">d</span> <span class="id" title="var">Hd</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hsafe</span>; <span class="id" title="var">ballot_lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#cbq_blocks"><span class="id" title="lemma">cbq_blocks</span></a>; [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hchosen</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hsafe</span>; <span class="id" title="var">ballot_lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Q_nonempty" class="idref" href="#Q_nonempty"><span class="id" title="lemma">Q_nonempty</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="Q:232" class="idref" href="#Q:232"><span class="id" title="binder">Q</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#sig"><span class="id" title="inductive">sig</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a><span class="id" title="notation">),</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="a:233" class="idref" href="#a:233"><span class="id" title="binder">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:233"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">`</span><a class="idref" href="VLSM.Examples.Paxos.Voting.html#Q:232"><span class="id" title="variable">Q</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.QA"><span class="id" title="variable">QA</span></a> <span class="id" title="var">Q</span> <span class="id" title="var">Q</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">a</span> <span class="id" title="var">Ha</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">apply</span> <span class="id" title="instance">intersection_idemp</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="VT1" class="idref" href="#VT1"><span class="id" title="lemma">VT1</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:234" class="idref" href="#s:234"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#voting_vlsm"><span class="id" title="definition">voting_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:234"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#acceptor_no_conflict_prop"><span class="id" title="definition">acceptor_no_conflict_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:234"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#acceptor_votes_safe_prop"><span class="id" title="definition">acceptor_votes_safe_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:234"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="v:235" class="idref" href="#v:235"><span class="id" title="binder">v</span></a> <a id="w:236" class="idref" href="#w:236"><span class="id" title="binder">w</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Value"><span class="id" title="variable">Value</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:235"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#chosen"><span class="id" title="definition">chosen</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:234"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#w:236"><span class="id" title="variable">w</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#chosen"><span class="id" title="definition">chosen</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:234"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:235"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#w:236"><span class="id" title="variable">w</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hinv1</span> <span class="id" title="var">Hinv2</span> <span class="id" title="var">v</span> <span class="id" title="var">w</span> <span class="id" title="var">Hv</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#chosen_iff"><span class="id" title="lemma">chosen_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">b</span> <span class="id" title="var">Hchose_v</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#chosen_iff"><span class="id" title="lemma">chosen_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">c</span> <span class="id" title="var">Hchose_w</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Hchose_v</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Q</span> <span class="id" title="var">Hv</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Hchose_w</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">R</span> <span class="id" title="var">Hw</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#Q_nonempty"><span class="id" title="lemma">Q_nonempty</span></a> <span class="id" title="var">Q</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">av</span> <span class="id" title="var">Hav</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#Q_nonempty"><span class="id" title="lemma">Q_nonempty</span></a> <span class="id" title="var">R</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">aw</span> <span class="id" title="var">Haw</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hav</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hw</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Haw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span>, <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#SafeAt"><span class="id" title="definition">SafeAt</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a> <span class="id" title="var">s</span> <span class="id" title="var">v</span> <span class="id" title="var">b</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <span class="id" title="var">Hinv2</span>; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#SafeAt"><span class="id" title="definition">SafeAt</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a> <span class="id" title="var">s</span> <span class="id" title="var">w</span> <span class="id" title="var">c</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <span class="id" title="var">Hinv2</span>; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.NArith.BinNat.html#N.lt_total"><span class="id" title="definition">N.lt_total</span></a> <span class="id" title="var">b</span> <span class="id" title="var">c</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">H_b_lt_c</span> | [<span class="id" title="var">H_bc</span> | <span class="id" title="var">H_c_lt_b</span>]].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.NArith.BinNat.html#N.lt_gt"><span class="id" title="lemma">N.lt_gt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_b_lt_c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#VT0"><span class="id" title="lemma">VT0</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.QA"><span class="id" title="variable">QA</span></a> <span class="id" title="var">Q</span> <span class="id" title="var">R</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">a</span> <span class="id" title="var">Ha</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="method">elem_of_intersection</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Ha_Q</span> <span class="id" title="var">Ha_R</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">Hinv1</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.NArith.BinNat.html#N.lt_gt"><span class="id" title="lemma">N.lt_gt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_c_lt_b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#VT0"><span class="id" title="lemma">VT0</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="prev_vote_committed" class="idref" href="#prev_vote_committed"><span class="id" title="lemma">prev_vote_committed</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> [<a id="l:237" class="idref" href="#l:237"><span class="id" title="binder">l</span></a> <a id="s:238" class="idref" href="#s:238"><span class="id" title="binder">s</span></a> <a id="s':239" class="idref" href="#s':239"><span class="id" title="binder">s'</span></a> <a id="om:240" class="idref" href="#om:240"><span class="id" title="binder">om</span></a> <a id="om':241" class="idref" href="#om':241"><span class="id" title="binder">om'</span></a>]<span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#voting_vlsm"><span class="id" title="definition">voting_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#l:237"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:238"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#om:240"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Voting.html#s':239"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#om':241"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="a:242" class="idref" href="#a:242"><span class="id" title="binder">a</span></a> <a id="b:243" class="idref" href="#b:243"><span class="id" title="binder">b</span></a> <a id="v:244" class="idref" href="#v:244"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#vote_committed"><span class="id" title="definition">vote_committed</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:238"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:242"><span class="id" title="variable">a</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:243"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_for"><span class="id" title="definition">voted_for</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s':239"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:242"><span class="id" title="variable">a</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:243"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:244"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_for"><span class="id" title="definition">voted_for</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:238"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:242"><span class="id" title="variable">a</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:243"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:244"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Ht</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#step_cases'"><span class="id" title="lemma">step_cases'</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#vote_committed"><span class="id" title="definition">vote_committed</span></a>, <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_for"><span class="id" title="definition">voted_for</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">i</span> []].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hb</span> -&gt;].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>)); [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">subst</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hbal</span> &amp; <span class="id" title="var">Hnv</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> &amp; -&gt;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>)); [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#maxBal"><span class="id" title="projection">maxBal</span></a> (<span class="id" title="var">s</span> <span class="id" title="var">a</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">mb_a</span> |]; [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">simpl</span>; <span class="id" title="var">ballot_lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbal</span> |- *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <span class="id" title="var">b0</span>)%<span class="id" title="var">Z</span> <span class="id" title="tactic">by</span> <span class="id" title="var">ballot_lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.FinSetExtras.html#elem_of_mmap_insert"><span class="id" title="lemma">elem_of_mmap_insert</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">itauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="safe_at_preserved" class="idref" href="#safe_at_preserved"><span class="id" title="lemma">safe_at_preserved</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> [<a id="l:245" class="idref" href="#l:245"><span class="id" title="binder">l</span></a> <a id="s:246" class="idref" href="#s:246"><span class="id" title="binder">s</span></a> <a id="s':247" class="idref" href="#s':247"><span class="id" title="binder">s'</span></a> <a id="om:248" class="idref" href="#om:248"><span class="id" title="binder">om</span></a> <a id="om':249" class="idref" href="#om':249"><span class="id" title="binder">om'</span></a>]<span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#voting_vlsm"><span class="id" title="definition">voting_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#l:245"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:246"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#om:248"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Voting.html#s':247"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#om':249"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="b:250" class="idref" href="#b:250"><span class="id" title="binder">b</span></a> <a id="v:251" class="idref" href="#v:251"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#SafeAt"><span class="id" title="definition">SafeAt</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:246"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:250"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:251"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#SafeAt"><span class="id" title="definition">SafeAt</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s':247"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:250"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:251"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">l</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> <span class="id" title="var">om</span> <span class="id" title="var">om'</span> <span class="id" title="var">Ht</span> <span class="id" title="var">b</span> <span class="id" title="var">v</span> <span class="id" title="var">Hsafe</span> <span class="id" title="var">d</span> <span class="id" title="var">Hd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Hsafe</span> <span class="id" title="var">d</span> <span class="id" title="var">Hd</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">Q</span> &amp; <span class="id" title="var">Hbal</span> &amp; <span class="id" title="var">Hvotes</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>; <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hbal</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>); <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hvotes</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>); <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbal</span>, <span class="id" title="var">Hvotes</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">revert</span> <span class="id" title="var">Hbal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#vote_committed"><span class="id" title="definition">vote_committed</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#step_cases''"><span class="id" title="lemma">step_cases''</span></a> <span class="id" title="var">Ht</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hstep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">i</span> <span class="id" title="var">l</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>)); [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hstep</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hstep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#step_cases'"><span class="id" title="lemma">step_cases'</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span> |- *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Ht</span> <span class="id" title="var">_</span>]; <span class="id" title="var">revert</span> <span class="id" title="var">Ht</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#maxBal"><span class="id" title="projection">maxBal</span></a> (<span class="id" title="var">s</span> <span class="id" title="var">i</span>)); <span class="id" title="tactic">simpl</span>; <span class="id" title="var">ballot_lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_none_but"><span class="id" title="definition">voted_none_but</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">w</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hvotes</span>, (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#prev_vote_committed"><span class="id" title="lemma">prev_vote_committed</span></a> <span class="id" title="var">Ht</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Need&nbsp;invariance&nbsp;of&nbsp;VInv2&nbsp;VInv3&nbsp;VInv4&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="inv_acceptor_votes_safe" class="idref" href="#inv_acceptor_votes_safe"><span class="id" title="lemma">inv_acceptor_votes_safe</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:252" class="idref" href="#s:252"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#voting_vlsm"><span class="id" title="definition">voting_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:252"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#acceptor_votes_safe_prop"><span class="id" title="definition">acceptor_votes_safe_prop</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:252"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop_ind"><span class="id" title="lemma">valid_state_prop_ind</span></a>; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#acceptor_votes_safe_prop"><span class="id" title="definition">acceptor_votes_safe_prop</span></a>; <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hvote</span>; <span class="id" title="var">contradict</span> <span class="id" title="var">Hvote</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">Hs</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_for"><span class="id" title="definition">voted_for</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_total_empty</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="method">not_elem_of_empty</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hvote</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#prev_votes"><span class="id" title="lemma">prev_votes</span></a> <span class="id" title="var">Ht</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hvote</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Hpres</span> := <a class="idref" href="VLSM.Examples.Paxos.Voting.html#safe_at_preserved"><span class="id" title="lemma">safe_at_preserved</span></a> <span class="id" title="var">Ht</span> <span class="id" title="var">v</span> <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHs</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">i</span> [<span class="id" title="var">b'</span> | <span class="id" title="var">b'</span> <span class="id" title="var">w</span>]]; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hw</span> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#SafeAt"><span class="id" title="definition">SafeAt</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a> <span class="id" title="var">s</span> <span class="id" title="var">w</span> <span class="id" title="var">b'</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#step_cases"><span class="id" title="lemma">step_cases</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Ht</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">decompose</span> [<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#and"><span class="id" title="inductive">and</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#or"><span class="id" title="inductive">or</span></a>] <span class="id" title="var">Hvote</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="vote_stable" class="idref" href="#vote_stable"><span class="id" title="lemma">vote_stable</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="l:253" class="idref" href="#l:253"><span class="id" title="binder">l</span></a> <a id="s:254" class="idref" href="#s:254"><span class="id" title="binder">s</span></a> <a id="om:255" class="idref" href="#om:255"><span class="id" title="binder">om</span></a> <a id="s':256" class="idref" href="#s':256"><span class="id" title="binder">s'</span></a> <a id="om':257" class="idref" href="#om':257"><span class="id" title="binder">om'</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#voting_vlsm"><span class="id" title="definition">voting_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#l:253"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:254"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#om:255"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Voting.html#s':256"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#om':257"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="a:258" class="idref" href="#a:258"><span class="id" title="binder">a</span></a> (<a id="b:259" class="idref" href="#b:259"><span class="id" title="binder">b</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) <a id="v:260" class="idref" href="#v:260"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_for"><span class="id" title="definition">voted_for</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:254"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:258"><span class="id" title="variable">a</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:259"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:260"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_for"><span class="id" title="definition">voted_for</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#s':256"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:258"><span class="id" title="variable">a</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:259"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:260"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Ht</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#sigT_prod_sigT"><span class="id" title="lemma">sigT_prod_sigT</span></a> <span class="id" title="var">l</span>); <span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#prod_of_sigT"><span class="id" title="definition">prod_of_sigT</span></a> <span class="id" title="var">l</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">i</span> <span class="id" title="var">li</span>]; <span class="id" title="tactic">subst</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#step_cases''"><span class="id" title="lemma">step_cases''</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">a</span> := <span class="id" title="var">a</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>)); [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_for"><span class="id" title="definition">voted_for</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">li</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht</span>; <span class="id" title="var">cbn</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.FinSetExtras.html#elem_of_mmap_insert"><span class="id" title="lemma">elem_of_mmap_insert</span></a>; <span class="id" title="var">itauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="choice_stable" class="idref" href="#choice_stable"><span class="id" title="lemma">choice_stable</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="l:261" class="idref" href="#l:261"><span class="id" title="binder">l</span></a> <a id="s:262" class="idref" href="#s:262"><span class="id" title="binder">s</span></a> <a id="om:263" class="idref" href="#om:263"><span class="id" title="binder">om</span></a> <a id="s':264" class="idref" href="#s':264"><span class="id" title="binder">s'</span></a> <a id="om':265" class="idref" href="#om':265"><span class="id" title="binder">om'</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#voting_vlsm"><span class="id" title="definition">voting_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#l:261"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:262"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#om:263"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Voting.html#s':264"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#om':265"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="b:266" class="idref" href="#b:266"><span class="id" title="binder">b</span></a> <a id="v:267" class="idref" href="#v:267"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#ballot_chose"><span class="id" title="definition">ballot_chose</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:262"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:266"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:267"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#ballot_chose"><span class="id" title="definition">ballot_chose</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s':264"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b:266"><span class="id" title="variable">b</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:267"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">l</span> <span class="id" title="var">s</span> <span class="id" title="var">om</span> <span class="id" title="var">s'</span> <span class="id" title="var">om'</span> <span class="id" title="var">Ht</span> <span class="id" title="var">b</span> <span class="id" title="var">v</span> [<span class="id" title="var">Q</span> <span class="id" title="var">HQ</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">Q</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#vote_stable"><span class="id" title="lemma">vote_stable</span></a>, <span class="id" title="var">HQ</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="voting_safe" class="idref" href="#voting_safe"><span class="id" title="lemma">voting_safe</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:268" class="idref" href="#s:268"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#voting_vlsm"><span class="id" title="definition">voting_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:268"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="b1:269" class="idref" href="#b1:269"><span class="id" title="binder">b1</span></a> <a id="v1:270" class="idref" href="#v1:270"><span class="id" title="binder">v1</span></a> <a id="b2:271" class="idref" href="#b2:271"><span class="id" title="binder">b2</span></a> <a id="v2:272" class="idref" href="#v2:272"><span class="id" title="binder">v2</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#ballot_chose"><span class="id" title="definition">ballot_chose</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:268"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b1:269"><span class="id" title="variable">b1</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v1:270"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#ballot_chose"><span class="id" title="definition">ballot_chose</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:268"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b2:271"><span class="id" title="variable">b2</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v2:272"><span class="id" title="variable">v2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#v1:270"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v2:272"><span class="id" title="variable">v2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;|- <span class="id" title="notation">forall</span> <a id="b1:273" class="idref" href="#b1:273"><span class="id" title="binder"><span id="b1:277" class="id">b1</span></span></a> <a id="v1:274" class="idref" href="#v1:274"><span class="id" title="binder"><span id="v1:278" class="id">v1</span></span></a> <a id="b2:275" class="idref" href="#b2:275"><span class="id" title="binder"><span id="b2:279" class="id">b2</span></span></a> <a id="v2:276" class="idref" href="#v2:276"><span class="id" title="binder"><span id="v2:280" class="id">v2</span></span></a><span class="id" title="notation">,</span> @?<span class="id" title="var">P</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b1:273"><span class="id" title="variable">b1</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v1:274"><span class="id" title="variable">v1</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b2:275"><span class="id" title="variable">b2</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v2:276"><span class="id" title="variable">v2</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="b1:281" class="idref" href="#b1:281"><span class="id" title="binder"><span id="b1:285" class="id">b1</span></span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) <a id="v1:282" class="idref" href="#v1:282"><span class="id" title="binder"><span id="v1:286" class="id">v1</span></span></a> (<a id="b2:283" class="idref" href="#b2:283"><span class="id" title="binder"><span id="b2:287" class="id">b2</span></span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot"><span class="id" title="definition">Ballot</span></a>) <a id="v2:284" class="idref" href="#v2:284"><span class="id" title="binder"><span id="v2:288" class="id">v2</span></span></a><span class="id" title="notation">,</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#b1:281"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b2:283"><span class="id" title="variable">b2</span></a>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">P</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b1:281"><span class="id" title="variable">b1</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v1:282"><span class="id" title="variable">v1</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#b2:283"><span class="id" title="variable">b2</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v2:284"><span class="id" title="variable">v2</span></a>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hwlog</span> * <span class="id" title="var">Hv1</span> <span class="id" title="var">Hv2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.lt_total"><span class="id" title="definition">Z.lt_total</span></a> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span>) <span class="id" title="keyword">as</span> [| [<span class="id" title="var">Heq</span> |]]; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span> | <span class="id" title="tactic">clear</span> <span class="id" title="var">Hwlog</span> | <span class="id" title="tactic">by</span> <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="lemma">inj_iff</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Ballot_to_Z"><span class="id" title="definition">Ballot_to_Z</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">b2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hv1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Q_v1</span> <span class="id" title="var">Hv1</span>], <span class="id" title="var">Hv2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Q_v2</span> <span class="id" title="var">Hv2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.QA"><span class="id" title="variable">QA</span></a> <span class="id" title="var">Q_v1</span> <span class="id" title="var">Q_v2</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">a</span> [<span class="id" title="var">Ha_Q1</span> <span class="id" title="var">Ha_Q2</span>]%<span class="id" title="method">elem_of_intersection</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#inv_acceptor_no_conflict"><span class="id" title="lemma">inv_acceptor_no_conflict</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hs</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">b1</span> <span class="id" title="var">v1</span> <span class="id" title="var">b2</span> <span class="id" title="var">v2</span> <span class="id" title="var">H_lt</span> [<span class="id" title="var">Q_v1</span> <span class="id" title="var">H_v1</span>] [<span class="id" title="var">Q_v2</span> <span class="id" title="var">H_v2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#Q_nonempty"><span class="id" title="lemma">Q_nonempty</span></a> <span class="id" title="var">Q_v2</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">a2</span> <span class="id" title="var">Ha2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#inv_acceptor_votes_safe"><span class="id" title="lemma">inv_acceptor_votes_safe</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hs</span> <span class="id" title="var">a2</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">H_v2</span> <span class="id" title="var">_</span> <span class="id" title="var">Ha2</span>) <span class="id" title="var">b1</span> <span class="id" title="var">H_lt</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Q12</span> <span class="id" title="var">H_b1_v2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.QA"><span class="id" title="variable">QA</span></a> <span class="id" title="var">Q_v1</span> <span class="id" title="var">Q12</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">a</span> [<span class="id" title="var">Ha_Q1</span> <span class="id" title="var">Ha_Q12</span>]%<span class="id" title="method">elem_of_intersection</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_b1_v2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">H_b1_v2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">H_b1_v2</span> <span class="id" title="var">_</span> <span class="id" title="var">Ha_Q12</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H_v1</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="chosen_subsingleton" class="idref" href="#chosen_subsingleton"><span class="id" title="lemma">chosen_subsingleton</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:289" class="idref" href="#s:289"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#voting_vlsm"><span class="id" title="definition">voting_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec.Quorum"><span class="id" title="variable">Quorum</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:289"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="v:290" class="idref" href="#v:290"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:290"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#chosen"><span class="id" title="definition">chosen</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:289"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#chosen"><span class="id" title="definition">chosen</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:289"><span class="id" title="variable">s</span></a> <span class="id" title="notation">≡</span> <span class="id" title="notation">{[</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#v:290"><span class="id" title="variable">v</span></a> <span class="id" title="notation">]}</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">v</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Hsafe</span> := <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voting_safe"><span class="id" title="lemma">voting_safe</span></a> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">set_equiv</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="method">elem_of_singleton</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> -&gt;].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hx</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#chosen_iff"><span class="id" title="lemma">chosen_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">bv</span> <span class="id" title="var">Hv</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#chosen_iff"><span class="id" title="lemma">chosen_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hx</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">bx</span> <span class="id" title="var">Hx</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hsafe</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_spec"><span class="id" title="section">sec_voting_spec</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_voting_simulates_consensus" class="idref" href="#sec_voting_simulates_consensus"><span class="id" title="section">sec_voting_simulates_consensus</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;(<a id="V:291" class="idref" href="#V:291"><span class="id" title="binder">V</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;(<a id="VSet:292" class="idref" href="#VSet:292"><span class="id" title="binder">VSet</span></a> : <span class="id" title="keyword">Type</span>) `{<a id="H6:301" class="idref" href="#H6:301"><span class="id" title="binder">FinSet</span></a> <a id="H6:301" class="idref" href="#H6:301"><span class="id" title="binder">V</span></a> <a id="H6:301" class="idref" href="#H6:301"><span class="id" title="binder">VSet</span></a>}<br/>
&nbsp;&nbsp;{<a id="VSDec:302" class="idref" href="#VSDec:302"><span class="id" title="binder">VSDec</span></a> : <span class="id" title="class">RelDecision</span> <span class="id" title="notation">(∈@{</span><a class="idref" href="VLSM.Examples.Paxos.Voting.html#VSet:292"><span class="id" title="variable">VSet</span></a><span class="id" title="notation">})</span>}<br/>
&nbsp;&nbsp;(<a id="CV:303" class="idref" href="#CV:303"><span class="id" title="binder">CV</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <span class="id" title="notation">False</span> := <a class="idref" href="VLSM.Examples.Paxos.Consensus.html#consensus_vlsm"><span class="id" title="definition">consensus_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#V:291"><span class="id" title="variable">V</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#VSet:292"><span class="id" title="variable">VSet</span></a>)<br/>
&nbsp;&nbsp;(<a id="Acceptor:304" class="idref" href="#Acceptor:304"><span class="id" title="binder">Acceptor</span></a> : <span class="id" title="keyword">Type</span>) `{<a id="H7:306" class="idref" href="#H7:306"><span class="id" title="binder">finite.Finite</span></a> <a id="H7:306" class="idref" href="#H7:306"><span class="id" title="binder">Acceptor</span></a>}<br/>
&nbsp;&nbsp;(<a id="ASet:307" class="idref" href="#ASet:307"><span class="id" title="binder">ASet</span></a> : <span class="id" title="keyword">Type</span>) `{<a id="H15:316" class="idref" href="#H15:316"><span class="id" title="binder">FinSet</span></a> <a id="H15:316" class="idref" href="#H15:316"><span class="id" title="binder">Acceptor</span></a> <a id="H15:316" class="idref" href="#H15:316"><span class="id" title="binder">ASet</span></a>}<br/>
&nbsp;&nbsp;(<a id="Quorum:317" class="idref" href="#Quorum:317"><span class="id" title="binder">Quorum</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#ASet:307"><span class="id" title="variable">ASet</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>) (<a id="QDec:319" class="idref" href="#QDec:319"><span class="id" title="binder">QDec</span></a> : <span class="id" title="notation">forall</span> <a id="Q:318" class="idref" href="#Q:318"><span class="id" title="binder">Q</span></a><span class="id" title="notation">,</span> <span class="id" title="class">Decision</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#Quorum:317"><span class="id" title="variable">Quorum</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Q:318"><span class="id" title="variable">Q</span></a>))<br/>
&nbsp;&nbsp;(<a id="QA:323" class="idref" href="#QA:323"><span class="id" title="binder">QA</span></a> : <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="Q1:320" class="idref" href="#Q1:320"><span class="id" title="binder">Q1</span></a> <a id="Q2:321" class="idref" href="#Q2:321"><span class="id" title="binder">Q2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#sig"><span class="id" title="inductive">sig</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Quorum:317"><span class="id" title="variable">Quorum</span></a><span class="id" title="notation">),</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="a:322" class="idref" href="#a:322"><span class="id" title="binder">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#a:322"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">`</span><a class="idref" href="VLSM.Examples.Paxos.Voting.html#Q1:320"><span class="id" title="variable">Q1</span></a> <span class="id" title="notation">∩</span> <span class="id" title="notation">`</span><a class="idref" href="VLSM.Examples.Paxos.Voting.html#Q2:321"><span class="id" title="variable">Q2</span></a>)<br/>
&nbsp;&nbsp;(<a id="QClosed:324" class="idref" href="#QClosed:324"><span class="id" title="binder">QClosed</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="definition">subseteq</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Program.Basics.html#impl"><span class="id" title="definition">impl</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Quorum:317"><span class="id" title="variable">Quorum</span></a>)<br/>
&nbsp;&nbsp;(<a id="VV:325" class="idref" href="#VV:325"><span class="id" title="binder">VV</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voting_vlsm"><span class="id" title="definition">voting_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#V:291"><span class="id" title="variable">V</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#VSet:292"><span class="id" title="variable">VSet</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Acceptor:304"><span class="id" title="variable">Acceptor</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#ASet:307"><span class="id" title="variable">ASet</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Quorum:317"><span class="id" title="variable">Quorum</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="check_quorum" class="idref" href="#check_quorum"><span class="id" title="lemma">check_quorum</span></a> (<a id="Q:326" class="idref" href="#Q:326"><span class="id" title="binder">Q</span></a> : <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.ASet"><span class="id" title="variable">ASet</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">{</span></a><a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.Quorum"><span class="id" title="variable">Quorum</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Q:326"><span class="id" title="variable">Q</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">{</span></a><span class="id" title="notation">forall</span> <a id="Q':327" class="idref" href="#Q':327"><span class="id" title="binder">Q'</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Q':327"><span class="id" title="variable">Q'</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Q:326"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.Quorum"><span class="id" title="variable">Quorum</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#Q':327"><span class="id" title="variable">Q'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.QDec"><span class="id" title="variable">QDec</span></a> <span class="id" title="var">Q</span>); [<span class="id" title="tactic">left</span> | <span class="id" title="tactic">right</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">Q'</span> -&gt;].<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="state_project" class="idref" href="#state_project"><span class="id" title="definition">state_project</span></a> (<a id="s:328" class="idref" href="#s:328"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.VV"><span class="id" title="variable">VV</span></a>) : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.CV"><span class="id" title="variable">CV</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Examples.Paxos.Voting.html#chosen"><span class="id" title="definition">chosen</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.V"><span class="id" title="variable">V</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.VSet"><span class="id" title="variable">VSet</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.Acceptor"><span class="id" title="variable">Acceptor</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.ASet"><span class="id" title="variable">ASet</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.Quorum"><span class="id" title="variable">Quorum</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.QDec"><span class="id" title="variable">QDec</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.QClosed"><span class="id" title="variable">QClosed</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:328"><span class="id" title="variable">s</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="label_state_project" class="idref" href="#label_state_project"><span class="id" title="definition">label_state_project</span></a> (<a id="s:329" class="idref" href="#s:329"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.VV"><span class="id" title="variable">VV</span></a>) (<a id="l:330" class="idref" href="#l:330"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.VV"><span class="id" title="variable">VV</span></a>) : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.CV"><span class="id" title="variable">CV</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="cs:331" class="idref" href="#cs:331"><span class="id" title="binder">cs</span></a> := <a class="idref" href="VLSM.Examples.Paxos.Voting.html#state_project"><span class="id" title="definition">state_project</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:329"><span class="id" title="variable">s</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="definition">decide</span> (<span class="id" title="definition">elements</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#cs:331"><span class="id" title="variable">cs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="s':332" class="idref" href="#s':332"><span class="id" title="binder">s'</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.VV"><span class="id" title="variable">VV</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#l:330"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:329"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="definition">elements</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#state_project"><span class="id" title="definition">state_project</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s':332"><span class="id" title="variable">s'</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Consensus.html#Decided"><span class="id" title="constructor">Decided</span></a> <span class="id" title="var">_</span> <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;(<a id="H_VSet_L:333" class="idref" href="#H_VSet_L:333"><span class="id" title="binder">H_VSet_L</span></a> : <span class="id" title="class">LeibnizEquiv</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.VSet"><span class="id" title="variable">VSet</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="voting_step_in_consensus" class="idref" href="#voting_step_in_consensus"><span class="id" title="lemma">voting_step_in_consensus</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="l:334" class="idref" href="#l:334"><span class="id" title="binder">l</span></a> <a id="s:335" class="idref" href="#s:335"><span class="id" title="binder">s</span></a> <a id="om:336" class="idref" href="#om:336"><span class="id" title="binder">om</span></a> <a id="s':337" class="idref" href="#s':337"><span class="id" title="binder">s'</span></a> <a id="om':338" class="idref" href="#om':338"><span class="id" title="binder">om'</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#voting_vlsm"><span class="id" title="definition">voting_vlsm</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.VSet"><span class="id" title="variable">VSet</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.ASet"><span class="id" title="variable">ASet</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.Quorum"><span class="id" title="variable">Quorum</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#l:334"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:335"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#om:336"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Voting.html#s':337"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#om':338"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Consensus.html#consensus_vlsm"><span class="id" title="definition">consensus_vlsm</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.VSet"><span class="id" title="variable">VSet</span></a>) (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#state_project"><span class="id" title="definition">state_project</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:335"><span class="id" title="variable">s</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Consensus.html#consensus_vlsm"><span class="id" title="definition">consensus_vlsm</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.VSet"><span class="id" title="variable">VSet</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Examples.Paxos.Voting.html#label_state_project"><span class="id" title="definition">label_state_project</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:335"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#l:334"><span class="id" title="variable">l</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Voting.html#state_project"><span class="id" title="definition">state_project</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:335"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#om:336"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Voting.html#state_project"><span class="id" title="definition">state_project</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s':337"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#om':338"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">l</span> <span class="id" title="var">s</span> [] <span class="id" title="var">s'</span> [] <span class="id" title="var">Ht</span> <span class="id" title="var">H_proj_s</span>; [<span class="id" title="var">done</span>.. |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<span class="id" title="keyword">let</span> <a id="lc:339" class="idref" href="#lc:339"><span class="id" title="binder"><span id="lc:341" class="id">lc</span></span></a> := <a class="idref" href="VLSM.Examples.Paxos.Voting.html#label_state_project"><span class="id" title="definition">label_state_project</span></a> <span class="id" title="var">s</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#lc:339"><span class="id" title="variable">lc</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Consensus.html#Decided"><span class="id" title="constructor">Decided</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) =&gt; <a class="idref" href="VLSM.Examples.Paxos.Voting.html#state_project"><span class="id" title="definition">state_project</span></a> <span class="id" title="var">s</span> <span class="id" title="notation">≡</span> <span class="id" title="notation">∅</span> | <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <span class="id" title="notation">True</span> <span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Examples.Paxos.Consensus.html#consensus_transition"><span class="id" title="definition">consensus_transition</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.VSet"><span class="id" title="variable">VSet</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#lc:339"><span class="id" title="variable">lc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Voting.html#state_project"><span class="id" title="definition">state_project</span></a> <span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Examples.Paxos.Voting.html#state_project"><span class="id" title="definition">state_project</span></a> <span class="id" title="var">s'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_None"><span class="id" title="lemma">option_valid_message_None</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Consensus.html#consensus_vlsm"><span class="id" title="definition">consensus_vlsm</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.V"><span class="id" title="variable">V</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.VSet"><span class="id" title="variable">VSet</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">NewGoal</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; [| | <span class="id" title="tactic">apply</span> <span class="id" title="var">NewGoal</span>..].<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_origin"><span class="id" title="lemma">input_valid_transition_origin</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_destination"><span class="id" title="lemma">input_valid_transition_destination</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hs'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Hs_safe</span> := <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voting_safe"><span class="id" title="lemma">voting_safe</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.VSet"><span class="id" title="variable">VSet</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.ASet"><span class="id" title="variable">ASet</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.Quorum"><span class="id" title="variable">Quorum</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.QA"><span class="id" title="variable">QA</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.QClosed"><span class="id" title="variable">QClosed</span></a> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Hs'_safe</span> := <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voting_safe"><span class="id" title="lemma">voting_safe</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.VSet"><span class="id" title="variable">VSet</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.ASet"><span class="id" title="variable">ASet</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.Quorum"><span class="id" title="variable">Quorum</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.QA"><span class="id" title="variable">QA</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.QClosed"><span class="id" title="variable">QClosed</span></a> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Hchoice_stable</span> := <a class="idref" href="VLSM.Examples.Paxos.Voting.html#choice_stable"><span class="id" title="lemma">choice_stable</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.VSet"><span class="id" title="variable">VSet</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.ASet"><span class="id" title="variable">ASet</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.Quorum"><span class="id" title="variable">Quorum</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Ht</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">lc_def</span>; <span class="id" title="var">remember</span> <span class="id" title="var">lc_def</span> <span class="id" title="keyword">as</span> <span class="id" title="var">lc</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">lc_def</span>; <span class="id" title="var">revert</span> <span class="id" title="var">Heqlc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#label_state_project"><span class="id" title="definition">label_state_project</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.VV"><span class="id" title="variable">VV</span></a> <span class="id" title="var">l</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> @<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <span class="id" title="notation">False</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Ht</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#state_project"><span class="id" title="definition">state_project</span></a> <span class="id" title="var">s</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">cs</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">H_eqn_cs</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">cs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#state_project"><span class="id" title="definition">state_project</span></a> <span class="id" title="var">s'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">cs'</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">H_eqn_cs'</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">cs'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="definition">elements</span> <span class="id" title="var">cs</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hcs</span> | <span class="id" title="var">Hcs</span>]; [<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">elements</span> <span class="id" title="var">cs'</span>) <span class="id" title="var">eqn</span>: <span class="id" title="var">Hcs'</span> |].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> -&gt;; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">leibniz_equiv_iff</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elements_empty_iff</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcs</span>, <span class="id" title="var">Hcs'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">etransitivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> -&gt;; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elements_empty_iff</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">leibniz_equiv_iff</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hcs</span>, <span class="id" title="definition">right_id</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> <span class="id" title="instance">union_empty_r</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">v</span> <span class="id" title="notation">∈</span> <span class="id" title="var">cs'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hv_cs'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="method">elem_of_elements</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hcs'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="constructor">elem_of_list_here</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#state_project"><span class="id" title="definition">state_project</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_eqn_cs'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">cs'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#chosen_subsingleton"><span class="id" title="lemma">chosen_subsingleton</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> -&gt;; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">leibniz_equiv_iff</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elements_empty_iff</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">set_choose</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcs</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v</span> <span class="id" title="var">Hv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">v</span> <span class="id" title="notation">∈</span> <span class="id" title="var">cs'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hv'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">cs</span> <span class="id" title="var">cs'</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#state_project"><span class="id" title="definition">state_project</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#chosen_iff"><span class="id" title="lemma">chosen_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">bv</span> <span class="id" title="var">Hv</span>]; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hchoice_stable</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#chosen_iff"><span class="id" title="lemma">chosen_iff</span></a>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">bv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (@<span class="id" title="definition">singleton</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.H1"><span class="id" title="variable">H1</span></a> <span class="id" title="var">v</span>); [| <span class="id" title="tactic">symmetry</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">subst</span> <span class="id" title="var">cs</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#chosen_subsingleton"><span class="id" title="lemma">chosen_subsingleton</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">subst</span> <span class="id" title="var">cs'</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#chosen_subsingleton"><span class="id" title="lemma">chosen_subsingleton</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="voting_initial_in_consensus" class="idref" href="#voting_initial_in_consensus"><span class="id" title="lemma">voting_initial_in_consensus</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:343" class="idref" href="#s:343"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#voting_vlsm"><span class="id" title="definition">voting_vlsm</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.VSet"><span class="id" title="variable">VSet</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.ASet"><span class="id" title="variable">ASet</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.Quorum"><span class="id" title="variable">Quorum</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:343"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Consensus.html#consensus_vlsm"><span class="id" title="definition">consensus_vlsm</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.VSet"><span class="id" title="variable">VSet</span></a>) (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#state_project"><span class="id" title="definition">state_project</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:343"><span class="id" title="variable">s</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#state_project"><span class="id" title="definition">state_project</span></a> <span class="id" title="var">s</span> <span class="id" title="notation">≡</span> <span class="id" title="notation">∅</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_equiv_empty</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">v</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#chosen_iff"><span class="id" title="lemma">chosen_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">bv</span> <span class="id" title="var">Hv</span>]; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Q</span> <span class="id" title="var">HvQ</span>], (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.QA"><span class="id" title="variable">QA</span></a> <span class="id" title="var">Q</span> <span class="id" title="var">Q</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">a</span> <span class="id" title="var">Ha</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">lapply</span> (<span class="id" title="var">HvQ</span> <span class="id" title="var">a</span>); [| <span class="id" title="tactic">by</span> <span class="id" title="var">set_solver</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voted_for"><span class="id" title="definition">voted_for</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">Hs</span> <span class="id" title="var">a</span>); <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_total_empty</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_empty</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="voting_simulates_consensus" class="idref" href="#voting_simulates_consensus"><span class="id" title="lemma">voting_simulates_consensus</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:344" class="idref" href="#s:344"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#voting_vlsm"><span class="id" title="definition">voting_vlsm</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.VSet"><span class="id" title="variable">VSet</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.ASet"><span class="id" title="variable">ASet</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.Quorum"><span class="id" title="variable">Quorum</span></a>) <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:344"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> (<a class="idref" href="VLSM.Examples.Paxos.Consensus.html#consensus_vlsm"><span class="id" title="definition">consensus_vlsm</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus.VSet"><span class="id" title="variable">VSet</span></a>) (<a class="idref" href="VLSM.Examples.Paxos.Voting.html#state_project"><span class="id" title="definition">state_project</span></a> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#s:344"><span class="id" title="variable">s</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop_ind"><span class="id" title="lemma">valid_state_prop_ind</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_is_valid"><span class="id" title="lemma">initial_state_is_valid</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voting_initial_in_consensus"><span class="id" title="lemma">voting_initial_in_consensus</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_destination"><span class="id" title="lemma">input_valid_transition_destination</span></a>, <a class="idref" href="VLSM.Examples.Paxos.Voting.html#voting_step_in_consensus"><span class="id" title="lemma">voting_step_in_consensus</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Examples.Paxos.Voting.html#sec_voting_simulates_consensus"><span class="id" title="section">sec_voting_simulates_consensus</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr">coqdoc</a> and improved with <a href="https://github.com/palmskog/coqdocjs">CoqdocJS</a> as adapted for <a href="https://github.com/coq-community">coq-community</a>
</div>
</div>
</body>

</html>
