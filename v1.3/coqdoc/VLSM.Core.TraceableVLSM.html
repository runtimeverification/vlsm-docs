<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename">
	<script>
	  if (document.title === "Table of Contents") {
	      document.write("<a href='map.svg'>File dependency graph</a>");
	  } else if (document.title !== "Index") {
              document.write("<a href='" + document.title + ".svg'>" + document.title + " dependency graph</a>");
	  }
	</script>
      </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./../..">Project Website</a>
      <a href="./indexpage.html">Index</a>
      <a href="./toc.html">Table of Contents</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Lib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Lib.Itauto.html#"><span class="id" title="library">Itauto</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">stdpp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">prelude</span> <span class="id" title="library">finite</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Lib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Lib.EquationsExtras.html#"><span class="id" title="library">EquationsExtras</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Lib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Lib.Preamble.html#"><span class="id" title="library">Preamble</span></a> <a class="idref" href="VLSM.Lib.ListSetExtras.html#"><span class="id" title="library">ListSetExtras</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Core</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Core.VLSM.html#"><span class="id" title="library">VLSM</span></a> <a class="idref" href="VLSM.Core.PreloadedVLSM.html#"><span class="id" title="library">PreloadedVLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#"><span class="id" title="library">Composition</span></a> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMEmbedding.html#"><span class="id" title="library">VLSMEmbedding</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab190"></a><h1 class="section">Core: Traceable VLSMs</h1>


<div class="paragraph"> </div>

  This section introduces <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#TraceableVLSM"><span class="id" title="record">TraceableVLSM</span></a></span>s, characterized by the fact that from
  any constrained state we can derive the possible (valid) transitions leading
  to that state.

<div class="paragraph"> </div>

  We derive several properties of these machines and their composition,
  including the possibility of extracting a constrained trace from a constrained
  state (see <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#reachable_composite_state_to_trace"><span class="id" title="lemma">reachable_composite_state_to_trace</span></a></span>) as well as that of extracting
  a trace with monotonic global equivocation
  (see <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.MinimalEquivocationTrace.html#state_to_minimal_equivocation_trace_equivocation_monotonic"><span class="id" title="lemma">state_to_minimal_equivocation_trace_equivocation_monotonic</span></a></span>).

<div class="paragraph"> </div>


<div class="paragraph"> </div>

  A class with a measure of size for states which is monotonic for valid transitions.

</div>
<div class="code">
<span class="id" title="keyword">Class</span> <a id="TransitionMonotoneVLSM" class="idref" href="#TransitionMonotoneVLSM"><span class="id" title="record">TransitionMonotoneVLSM</span></a> `(<a id="X:2" class="idref" href="#X:2"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a id="message:1" class="idref" href="#message:1"><span class="id" title="binder">message</span></a>) (<a id="state_size:3" class="idref" href="#state_size:3"><span class="id" title="binder">state_size</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:2"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
{<br/>
&nbsp;&nbsp;<a id="transition_monotonicity" class="idref" href="#transition_monotonicity"><span class="id" title="projection">transition_monotonicity</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s1:5" class="idref" href="#s1:5"><span class="id" title="binder">s1</span></a> <a id="s2:6" class="idref" href="#s2:6"><span class="id" title="binder">s2</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:2"><span class="id" title="variable">X</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_transition_next"><span class="id" title="inductive">valid_transition_next</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:2"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s1:5"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s2:6"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#state_size:3"><span class="id" title="variable">state_size</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s1:5"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#state_size:3"><span class="id" title="variable">state_size</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s2:6"><span class="id" title="variable">s2</span></a><br/>
}.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="var">Mode</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#TransitionMonotoneVLSM"><span class="id" title="class">TransitionMonotoneVLSM</span></a> - ! - : <span class="id" title="var">typeclass_instances</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="preloaded_TransitionMonotoneVLSM" class="idref" href="#preloaded_TransitionMonotoneVLSM"><span class="id" title="instance">preloaded_TransitionMonotoneVLSM</span></a><br/>
&nbsp;&nbsp;`(<a id="X:9" class="idref" href="#X:9"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a id="message:8" class="idref" href="#message:8"><span class="id" title="binder">message</span></a>) (<a id="state_size:10" class="idref" href="#state_size:10"><span class="id" title="binder">state_size</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:9"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;`{<a id="TransitionMonotoneVLSM0:11" class="idref" href="#TransitionMonotoneVLSM0:11"><span class="id" title="binder">!</span></a><a id="TransitionMonotoneVLSM0:11" class="idref" href="#TransitionMonotoneVLSM0:11"><span class="id" title="binder">TransitionMonotoneVLSM</span></a> <a id="TransitionMonotoneVLSM0:11" class="idref" href="#TransitionMonotoneVLSM0:11"><span class="id" title="binder">X</span></a> <a id="TransitionMonotoneVLSM0:11" class="idref" href="#TransitionMonotoneVLSM0:11"><span class="id" title="binder">state_size</span></a>}<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.TraceableVLSM.html#TransitionMonotoneVLSM"><span class="id" title="class">TransitionMonotoneVLSM</span></a> (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_with_all_messages_vlsm"><span class="id" title="definition">preloaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:9"><span class="id" title="variable">X</span></a>) <a class="idref" href="VLSM.Core.TraceableVLSM.html#state_size:10"><span class="id" title="variable">state_size</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#transition_monotonicity"><span class="id" title="method">transition_monotonicity</span></a>, <a class="idref" href="VLSM.Core.PreloadedVLSM.html#valid_transition_next_preloaded_iff"><span class="id" title="lemma">valid_transition_next_preloaded_iff</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="transition_monotone_in_futures" class="idref" href="#transition_monotone_in_futures"><span class="id" title="lemma">transition_monotone_in_futures</span></a><br/>
&nbsp;&nbsp;`(<a id="X:13" class="idref" href="#X:13"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a id="message:12" class="idref" href="#message:12"><span class="id" title="binder">message</span></a>) `{<a id="H:15" class="idref" href="#H:15"><span class="id" title="binder">TransitionMonotoneVLSM</span></a> <a id="H:15" class="idref" href="#H:15"><span class="id" title="binder">_</span></a> <a id="H:15" class="idref" href="#H:15"><span class="id" title="binder">X</span></a>}<br/>
&nbsp;&nbsp;[<a id="s:16" class="idref" href="#s:16"><span class="id" title="binder">s</span></a> <a id="sf:17" class="idref" href="#sf:17"><span class="id" title="binder">sf</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:13"><span class="id" title="variable">X</span></a>] (<a id="Hfutures:18" class="idref" href="#Hfutures:18"><span class="id" title="binder">Hfutures</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#in_futures"><span class="id" title="definition">in_futures</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:13"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:16"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sf:17"><span class="id" title="variable">sf</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#state_size:14"><span class="id" title="variable">state_size</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:16"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#state_size:14"><span class="id" title="variable">state_size</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sf:17"><span class="id" title="variable">sf</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hfutures</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">tr</span> <span class="id" title="var">Htr</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Htr</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_forget_input"><span class="id" title="lemma">input_valid_transition_forget_input</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#transition_next"><span class="id" title="constructor">transition_next</span></a>, <a class="idref" href="VLSM.Core.TraceableVLSM.html#transition_monotonicity"><span class="id" title="method">transition_monotonicity</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="transition_monotone_empty_trace" class="idref" href="#transition_monotone_empty_trace"><span class="id" title="lemma">transition_monotone_empty_trace</span></a><br/>
&nbsp;&nbsp;`(<a id="X:20" class="idref" href="#X:20"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a id="message:19" class="idref" href="#message:19"><span class="id" title="binder">message</span></a>) `{<a id="H:22" class="idref" href="#H:22"><span class="id" title="binder">TransitionMonotoneVLSM</span></a> <a id="H:22" class="idref" href="#H:22"><span class="id" title="binder">_</span></a> <a id="H:22" class="idref" href="#H:22"><span class="id" title="binder">X</span></a>} :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">[</span><a id="s:23" class="idref" href="#s:23"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:20"><span class="id" title="variable">X</span></a>] [<a id="tr:24" class="idref" href="#tr:24"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:20"><span class="id" title="variable">X</span></a>)<span class="id" title="notation">],</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:20"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:23"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:23"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:24"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:24"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">tr</span> <span class="id" title="var">Htr</span>; <span class="id" title="var">remember</span> <span class="id" title="var">s</span> <span class="id" title="keyword">as</span> <span class="id" title="var">f</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqf</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span> <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_ind"><span class="id" title="definition">finite_valid_trace_from_to_ind</span></a>; [<span class="id" title="var">done</span> | <span class="id" title="tactic">subst</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">state_size</span> <span class="id" title="var">s</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="var">state_size</span> <span class="id" title="var">s'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#transition_monotone_in_futures"><span class="id" title="lemma">transition_monotone_in_futures</span></a>; [| <span class="id" title="tactic">eexists</span>]; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_forget_input"><span class="id" title="lemma">input_valid_transition_forget_input</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#transition_next"><span class="id" title="constructor">transition_next</span></a>, <a class="idref" href="VLSM.Core.TraceableVLSM.html#transition_monotonicity"><span class="id" title="method">transition_monotonicity</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  A class characterizing VLSMs with reversible transitions. A VLSM is traceable
  when given a constrained state, one can compute a set of constrained transitions
  leading to it.

<div class="paragraph"> </div>

  We assume that such machines are <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#TransitionMonotoneVLSM"><span class="id" title="record">TransitionMonotoneVLSM</span></a></span>s and that the
  set of constrained transitions associated to a constrained state is empty
  iff the state is initial.

</div>
<div class="code">
<span class="id" title="keyword">Class</span> <a id="TraceableVLSM" class="idref" href="#TraceableVLSM"><span class="id" title="record">TraceableVLSM</span></a><br/>
&nbsp;&nbsp;`(<a id="X:26" class="idref" href="#X:26"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a id="message:25" class="idref" href="#message:25"><span class="id" title="binder">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="state_destructor:27" class="idref" href="#state_destructor:27"><span class="id" title="binder">state_destructor</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:26"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:26"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:26"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;(<a id="state_size:28" class="idref" href="#state_size:28"><span class="id" title="binder">state_size</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:26"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span> :=<br/>
{<br/>
&nbsp;&nbsp;<a id="tv_monotone" class="idref" href="#tv_monotone"><span class="id" title="projection">tv_monotone</span></a> :&gt; <a class="idref" href="VLSM.Core.TraceableVLSM.html#TransitionMonotoneVLSM"><span class="id" title="class">TransitionMonotoneVLSM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:26"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#state_size:28"><span class="id" title="variable">state_size</span></a>;<br/>
&nbsp;&nbsp;<a id="tv_state_destructor_destination" class="idref" href="#tv_state_destructor_destination"><span class="id" title="projection">tv_state_destructor_destination</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s':31" class="idref" href="#s':31"><span class="id" title="binder">s'</span></a> <a id="s:32" class="idref" href="#s:32"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:26"><span class="id" title="variable">X</span></a>) (<a id="item:33" class="idref" href="#item:33"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:26"><span class="id" title="variable">X</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#item:33"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:32"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#state_destructor:27"><span class="id" title="variable">state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':31"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#item:33"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':31"><span class="id" title="variable">s'</span></a>;<br/>
&nbsp;&nbsp;<a id="tv_state_destructor_transition" class="idref" href="#tv_state_destructor_transition"><span class="id" title="projection">tv_state_destructor_transition</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s':35" class="idref" href="#s':35"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:26"><span class="id" title="variable">X</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:26"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':35"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:36" class="idref" href="#s:36"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:26"><span class="id" title="variable">X</span></a>) (<a id="item:37" class="idref" href="#item:37"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:26"><span class="id" title="variable">X</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#item:37"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:36"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#state_destructor:27"><span class="id" title="variable">state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':35"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#input_constrained_transition_item"><span class="id" title="definition">input_constrained_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:26"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:36"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#item:37"><span class="id" title="variable">item</span></a>;<br/>
&nbsp;&nbsp;<a id="tv_state_destructor_initial" class="idref" href="#tv_state_destructor_initial"><span class="id" title="projection">tv_state_destructor_initial</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:39" class="idref" href="#s:39"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:26"><span class="id" title="variable">X</span></a>) (<a id="Hs:40" class="idref" href="#Hs:40"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:26"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:39"><span class="id" title="variable">s</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:26"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:39"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#state_destructor:27"><span class="id" title="variable">state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:39"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>;<br/>
}.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="var">Mode</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#TraceableVLSM"><span class="id" title="class">TraceableVLSM</span></a> - ! - - : <span class="id" title="var">typeclass_instances</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab191"></a><h2 class="section">Traceable VLSM properties</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_traceable_vlsm_props" class="idref" href="#sec_traceable_vlsm_props"><span class="id" title="section">sec_traceable_vlsm_props</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;`(<a id="X:43" class="idref" href="#X:43"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a id="message:42" class="idref" href="#message:42"><span class="id" title="binder">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="state_size:44" class="idref" href="#state_size:44"><span class="id" title="binder">state_size</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:43"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;(<a id="state_destructor:45" class="idref" href="#state_destructor:45"><span class="id" title="binder">state_destructor</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:43"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:43"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#X:43"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;`{<a id="TraceableVLSM0:46" class="idref" href="#TraceableVLSM0:46"><span class="id" title="binder">!</span></a><a id="TraceableVLSM0:46" class="idref" href="#TraceableVLSM0:46"><span class="id" title="binder">TraceableVLSM</span></a> <a id="TraceableVLSM0:46" class="idref" href="#TraceableVLSM0:46"><span class="id" title="binder">X</span></a> <a id="TraceableVLSM0:46" class="idref" href="#TraceableVLSM0:46"><span class="id" title="binder">state_destructor</span></a> <a id="TraceableVLSM0:46" class="idref" href="#TraceableVLSM0:46"><span class="id" title="binder">state_size</span></a>}<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="tv_state_destructor_size" class="idref" href="#tv_state_destructor_size"><span class="id" title="lemma">tv_state_destructor_size</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s':47" class="idref" href="#s':47"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.X"><span class="id" title="variable">X</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':47"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:48" class="idref" href="#s:48"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.X"><span class="id" title="variable">X</span></a>) (<a id="item:49" class="idref" href="#item:49"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.X"><span class="id" title="variable">X</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#item:49"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:48"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.state_destructor"><span class="id" title="variable">state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':47"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.state_size"><span class="id" title="variable">state_size</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:48"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.state_size"><span class="id" title="variable">state_size</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':47"><span class="id" title="variable">s'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#transition_monotonicity"><span class="id" title="method">transition_monotonicity</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;- <a class="idref" href="VLSM.Core.TraceableVLSM.html#tv_state_destructor_destination"><span class="id" title="method">tv_state_destructor_destination</span></a> <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.PreloadedVLSM.html#valid_transition_preloaded_iff"><span class="id" title="lemma">valid_transition_preloaded_iff</span></a>, <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_forget_input"><span class="id" title="lemma">input_valid_transition_forget_input</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#tv_state_destructor_transition"><span class="id" title="method">tv_state_destructor_transition</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Given any constrained state we can extract a trace leading to it by recursively
  following the transitions leading to it.

</div>
<div class="code">
<span class="id" title="keyword">Equations</span> <a id="state_to_trace" class="idref" href="#state_to_trace"><span class="id" title="definition">state_to_trace</span></a> (<a id="s':50" class="idref" href="#s':50"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.X"><span class="id" title="variable">X</span></a>) (<a id="Hs':51" class="idref" href="#Hs':51"><span class="id" title="binder">Hs'</span></a> : <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':50"><span class="id" title="variable">s'</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.X"><span class="id" title="variable">X</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="keyword">wf</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.state_size"><span class="id" title="variable">state_size</span></a> <span class="id" title="var">s'</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#lt"><span class="id" title="definition">lt</span></a> :=<br/>
<a class="idref" href="VLSM.Core.TraceableVLSM.html#state_to_trace:55"><span class="id" title="definition">state_to_trace</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':54"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs':53"><span class="id" title="variable">Hs'</span></a> <span class="id" title="keyword">with</span> <span class="id" title="definition">inspect</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.state_destructor"><span class="id" title="variable">state_destructor</span></a> <span class="id" title="var">s'</span>) :=<br/>
|               <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">eq</span></a><a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">_</span></a>         =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
| <a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#item:63"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:64"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">_</span></a><a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">eq</span></a><a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hdestruct:60"><span class="id" title="variable">Hdestruct</span></a> =&gt;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="is:67" class="idref" href="#is:67"><span class="id" title="binder">is</span></a>, <a id="tr:68" class="idref" href="#tr:68"><span class="id" title="binder">tr</span></a>) := <a class="idref" href="VLSM.Core.TraceableVLSM.html#state_to_trace:52"><span class="id" title="definition">state_to_trace</span></a> <span class="id" title="var">s</span> <span class="id" title="var">_</span> <span class="id" title="tactic">in</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#is:67"><span class="id" title="variable">is</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:68"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">item</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tv_state_destructor_transition"><span class="id" title="method">tv_state_destructor_transition</span></a>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hdestruct</span>; <span class="id" title="tactic">left</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tv_state_destructor_size"><span class="id" title="lemma">tv_state_destructor_size</span></a>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hdestruct</span>; <span class="id" title="tactic">left</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Traces extracted using <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#state_to_trace"><span class="id" title="definition">state_to_trace</span></a></span> are constrained traces. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="reachable_state_to_trace" class="idref" href="#reachable_state_to_trace"><span class="id" title="lemma">reachable_state_to_trace</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:69" class="idref" href="#s:69"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.X"><span class="id" title="variable">X</span></a>) (<a id="Hs:70" class="idref" href="#Hs:70"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:69"><span class="id" title="variable">s</span></a>) <a id="is:71" class="idref" href="#is:71"><span class="id" title="binder">is</span></a> <a id="tr:72" class="idref" href="#tr:72"><span class="id" title="binder">tr</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#state_to_trace"><span class="id" title="definition">state_to_trace</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:69"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs:70"><span class="id" title="variable">Hs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#is:71"><span class="id" title="variable">is</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:72"><span class="id" title="variable">tr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.PreloadedVLSM.html#finite_constrained_trace_init_to"><span class="id" title="definition">finite_constrained_trace_init_to</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#is:71"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:69"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:72"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_funelim</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#state_to_trace"><span class="id" title="definition">state_to_trace</span></a> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hdestruct</span> ? ? ? ? <span class="id" title="var">Heqis_tr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqis_tr</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="var">rapply</span> @<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_empty"><span class="id" title="constructor">finite_valid_trace_from_to_empty</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> @<a class="idref" href="VLSM.Core.TraceableVLSM.html#tv_state_destructor_initial"><span class="id" title="method">tv_state_destructor_initial</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">X</span> := <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.X"><span class="id" title="variable">X</span></a>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> ? ? ? ? ? ? <span class="id" title="var">Hind</span> ? ? ? <span class="id" title="var">Heqis_tr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#state_to_trace"><span class="id" title="definition">state_to_trace</span></a> <span class="id" title="var">s</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">_is</span> <span class="id" title="var">_tr</span>]; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqis_tr</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Heqis_tr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hind</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">s'</span> <span class="id" title="keyword">with</span> (<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">item</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tv_state_destructor_destination"><span class="id" title="method">tv_state_destructor_destination</span></a>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hdestruct</span>; <span class="id" title="tactic">left</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rapply</span> (@<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_app"><span class="id" title="lemma">finite_valid_trace_from_to_app</span></a>); [<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hind</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#input_constrained_transition_item"><span class="id" title="definition">input_constrained_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props.X"><span class="id" title="variable">X</span></a> <span class="id" title="var">s</span> <span class="id" title="var">item</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">item</span>; <span class="id" title="var">cbn</span>; <span class="id" title="var">rapply</span> (@<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_singleton"><span class="id" title="lemma">finite_valid_trace_from_to_singleton</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tv_state_destructor_transition"><span class="id" title="method">tv_state_destructor_transition</span></a>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hdestruct</span>; <span class="id" title="tactic">left</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_props"><span class="id" title="section">sec_traceable_vlsm_props</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab192"></a><h2 class="section">Composition of traceable VLSMs</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_traceable_vlsm_composition" class="idref" href="#sec_traceable_vlsm_composition"><span class="id" title="section">sec_traceable_vlsm_composition</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;{<a id="message:73" class="idref" href="#message:73"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;`{<a id="H:76" class="idref" href="#H:76"><span class="id" title="binder">finite.Finite</span></a> <a id="index:74" class="idref" href="#index:74"><span class="id" title="binder"><span id="H:76" class="id">index</span></span></a>}<br/>
&nbsp;&nbsp;(<a id="IM:77" class="idref" href="#IM:77"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#index:74"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#message:73"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="state_destructor:79" class="idref" href="#state_destructor:79"><span class="id" title="binder">state_destructor</span></a> : <span class="id" title="notation">forall</span> <a id="i:78" class="idref" href="#i:78"><span class="id" title="binder">i</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#IM:77"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:78"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#IM:77"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:78"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#IM:77"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:78"><span class="id" title="variable">i</span></a>)))<br/>
&nbsp;&nbsp;(<a id="state_size:81" class="idref" href="#state_size:81"><span class="id" title="binder">state_size</span></a> : <span class="id" title="notation">forall</span> <a id="i:80" class="idref" href="#i:80"><span class="id" title="binder">i</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#IM:77"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:80"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;`{<a id="H0:83" class="idref" href="#H0:83"><span class="id" title="binder">forall</span></a> <a id="i:82" class="idref" href="#i:82"><span class="id" title="binder"><span id="H0:83" class="id">i</span></span></a><a id="H0:83" class="idref" href="#H0:83"><span class="id" title="binder">,</span></a> <a id="H0:83" class="idref" href="#H0:83"><span class="id" title="binder">TraceableVLSM</span></a> <a id="H0:83" class="idref" href="#H0:83"><span class="id" title="binder">(</span></a><a id="H0:83" class="idref" href="#H0:83"><span class="id" title="binder">IM</span></a> <a id="H0:83" class="idref" href="#H0:83"><span class="id" title="binder">i</span></a><a id="H0:83" class="idref" href="#H0:83"><span class="id" title="binder">)</span></a> <a id="H0:83" class="idref" href="#H0:83"><span class="id" title="binder">(</span></a><a id="H0:83" class="idref" href="#H0:83"><span class="id" title="binder">state_destructor</span></a> <a id="H0:83" class="idref" href="#H0:83"><span class="id" title="binder">i</span></a><a id="H0:83" class="idref" href="#H0:83"><span class="id" title="binder">)</span></a> <a id="H0:83" class="idref" href="#H0:83"><span class="id" title="binder">(</span></a><a id="H0:83" class="idref" href="#H0:83"><span class="id" title="binder">state_size</span></a> <a id="H0:83" class="idref" href="#H0:83"><span class="id" title="binder">i</span></a><a id="H0:83" class="idref" href="#H0:83"><span class="id" title="binder">)</span></a>}<br/>
&nbsp;&nbsp;(<a id="Free:84" class="idref" href="#Free:84"><span class="id" title="binder">Free</span></a> := <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#IM:77"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
</div>

<div class="doc">
  The following definitions and lemmas lift the corresponding notions and
  results from <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#TraceableVLSM"><span class="id" title="record">TraceableVLSM</span></a></span>s to their composition.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="lift_to_composite_transition_item_state" class="idref" href="#lift_to_composite_transition_item_state"><span class="id" title="definition">lift_to_composite_transition_item_state</span></a><br/>
&nbsp;&nbsp;(<a id="s:85" class="idref" href="#s:85"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="i:86" class="idref" href="#i:86"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>) (<a id="item_s:87" class="idref" href="#item_s:87"><span class="id" title="binder">item_s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:86"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:86"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_transition_item"><span class="id" title="definition">lift_to_composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:85"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:86"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#item_s:87"><span class="id" title="variable">item_s</span></a><span class="id" title="notation">.1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:85"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:86"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#item_s:87"><span class="id" title="variable">item_s</span></a><span class="id" title="notation">.2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="composite_state_destructor" class="idref" href="#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> (<a id="s':88" class="idref" href="#s':88"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="i:89" class="idref" href="#i:89"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#lift_to_composite_transition_item_state"><span class="id" title="definition">lift_to_composite_transition_item_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':88"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:89"><span class="id" title="variable">i</span></a>) (<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.state_destructor"><span class="id" title="variable">state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:89"><span class="id" title="variable">i</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#s':88"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:89"><span class="id" title="variable">i</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="composite_state_size" class="idref" href="#composite_state_size"><span class="id" title="definition">composite_state_size</span></a> (<a id="s:90" class="idref" href="#s:90"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">foldr</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.add"><span class="id" title="definition">Nat.add</span></a> 0 (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="i:91" class="idref" href="#i:91"><span class="id" title="binder">i</span></a> =&gt; <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.state_size"><span class="id" title="variable">state_size</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:91"><span class="id" title="variable">i</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#s:90"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:91"><span class="id" title="variable">i</span></a>)) (<span class="id" title="method">enum</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_state_update_size_monotone" class="idref" href="#composite_state_update_size_monotone"><span class="id" title="lemma">composite_state_update_size_monotone</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:92" class="idref" href="#s:92"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="i:93" class="idref" href="#i:93"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>) (<a id="si:94" class="idref" href="#si:94"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:93"><span class="id" title="variable">i</span></a>)<span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.state_size"><span class="id" title="variable">state_size</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:93"><span class="id" title="variable">i</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#s:92"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:93"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.state_size"><span class="id" title="variable">state_size</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:93"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#si:94"><span class="id" title="variable">si</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_size"><span class="id" title="definition">composite_state_size</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:92"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_size"><span class="id" title="definition">composite_state_size</span></a> (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a>  <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:92"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:93"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#si:94"><span class="id" title="variable">si</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">si</span> <span class="id" title="var">Hlt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_size"><span class="id" title="definition">composite_state_size</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="method">NoDup_enum</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>); <span class="id" title="tactic">generalize</span> (<span class="id" title="method">elem_of_enum</span> <span class="id" title="var">i</span>); <span class="id" title="tactic">generalize</span> (<span class="id" title="method">enum</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">inversion</span> 1 <span class="id" title="keyword">as</span> []; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> 1 <span class="id" title="keyword">as</span> [| ? ? <span class="id" title="var">Hna</span> <span class="id" title="var">_</span>]; <span class="id" title="tactic">subst</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="abbreviation">foldr</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.add"><span class="id" title="definition">Nat.add</span></a> 0 (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="i:95" class="idref" href="#i:95"><span class="id" title="binder"><span id="i:97" class="id">i</span></span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a> =&gt; <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.state_size"><span class="id" title="variable">state_size</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:95"><span class="id" title="variable">i</span></a> (<span class="id" title="var">s</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:95"><span class="id" title="variable">i</span></a>)) <span class="id" title="var">l</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<span class="id" title="abbreviation">foldr</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.add"><span class="id" title="definition">Nat.add</span></a> 0 (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="i:96" class="idref" href="#i:96"><span class="id" title="binder"><span id="i:98" class="id">i</span></span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.state_size"><span class="id" title="variable">state_size</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:96"><span class="id" title="variable">i</span></a> (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">s</span> <span class="id" title="var">a</span> <span class="id" title="var">si</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:96"><span class="id" title="variable">i</span></a>)) <span class="id" title="var">l</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; [<span class="id" title="var">lia</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Hna</span>; <span class="id" title="tactic">clear</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> []%<span class="id" title="lemma">not_elem_of_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>, <span class="id" title="var">IHl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.add_lt_mono_l"><span class="id" title="lemma">Nat.add_lt_mono_l</span></a>, <span class="id" title="var">IHl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_tv_state_destructor_destination" class="idref" href="#composite_tv_state_destructor_destination"><span class="id" title="lemma">composite_tv_state_destructor_destination</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s':99" class="idref" href="#s':99"><span class="id" title="binder">s'</span></a> <a id="s:100" class="idref" href="#s:100"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="item:101" class="idref" href="#item:101"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) <a id="i:102" class="idref" href="#i:102"><span class="id" title="binder">i</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#item:101"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:100"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':99"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:102"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#item:101"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':99"><span class="id" title="variable">s'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> *; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a>; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_list_fmap</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ([<span class="id" title="var">itemi</span> <span class="id" title="var">si</span>] &amp; [= -&gt; -&gt;] &amp; <span class="id" title="var">Hin</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">erewrite</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tv_state_destructor_destination"><span class="id" title="method">tv_state_destructor_destination</span></a>, <a class="idref" href="VLSM.Core.Composition.html#state_update_id"><span class="id" title="lemma">state_update_id</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_tv_state_destructor_transition" class="idref" href="#composite_tv_state_destructor_transition"><span class="id" title="lemma">composite_tv_state_destructor_transition</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s':103" class="idref" href="#s':103"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':103"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:104" class="idref" href="#s:104"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="item:105" class="idref" href="#item:105"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="i:106" class="idref" href="#i:106"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#item:105"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:104"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':103"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:106"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#input_constrained_transition_item"><span class="id" title="definition">input_constrained_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:104"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#item:105"><span class="id" title="variable">item</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">s</span> <span class="id" title="var">item</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a>; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_list_fmap</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ([<span class="id" title="var">itemi</span> <span class="id" title="var">si</span>] &amp; [=-&gt; -&gt;] &amp; <span class="id" title="var">Hin</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="VLSM.Core.VLSMProjections.VLSMEmbedding.html#VLSM_weak_embedding_input_valid_transition"><span class="id" title="lemma">VLSM_weak_embedding_input_valid_transition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.Composition.html#lift_to_preloaded_free_weak_embedding"><span class="id" title="lemma">lift_to_preloaded_free_weak_embedding</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">i</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="var">rapply</span> @<a class="idref" href="VLSM.Core.TraceableVLSM.html#tv_state_destructor_transition"><span class="id" title="method">tv_state_destructor_transition</span></a>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.Composition.html#composite_constrained_state_project"><span class="id" title="lemma">composite_constrained_state_project</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_tv_state_destructor_index" class="idref" href="#composite_tv_state_destructor_index"><span class="id" title="lemma">composite_tv_state_destructor_index</span></a>  :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s':107" class="idref" href="#s':107"><span class="id" title="binder">s'</span></a> <a id="s:108" class="idref" href="#s:108"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="item:109" class="idref" href="#item:109"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) <a id="i:110" class="idref" href="#i:110"><span class="id" title="binder">i</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#item:109"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:108"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':107"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:110"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#item:109"><span class="id" title="variable">item</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:110"><span class="id" title="variable">i</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a>; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_list_fmap</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> ((<span class="id" title="var">itemi</span>, <span class="id" title="var">si</span>) &amp; [= -&gt;] &amp; <span class="id" title="var">Hin</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_tv_state_destructor_state_update" class="idref" href="#composite_tv_state_destructor_state_update"><span class="id" title="lemma">composite_tv_state_destructor_state_update</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s':111" class="idref" href="#s':111"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':111"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:112" class="idref" href="#s:112"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="item:113" class="idref" href="#item:113"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="i:114" class="idref" href="#i:114"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#item:113"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:112"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':111"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:114"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#s':111"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:112"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:114"><span class="id" title="variable">i</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#item:113"><span class="id" title="variable">item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:114"><span class="id" title="variable">i</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">s</span> <span class="id" title="var">item</span> <span class="id" title="var">i</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">s'</span> <span class="id" title="keyword">with</span> (<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">item</span>) <span class="id" title="tactic">in</span> *<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_destination"><span class="id" title="lemma">composite_tv_state_destructor_destination</span></a>; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_index"><span class="id" title="lemma">composite_tv_state_destructor_index</span></a>  <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_transition"><span class="id" title="lemma">composite_tv_state_destructor_transition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Ht</span>]; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">item</span>, <span class="id" title="var">l</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>); <span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">state_update_simpl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_tv_state_destructor_initial" class="idref" href="#composite_tv_state_destructor_initial"><span class="id" title="lemma">composite_tv_state_destructor_initial</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:115" class="idref" href="#s:115"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:115"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="i:116" class="idref" href="#i:116"><span class="id" title="binder">i</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:116"><span class="id" title="variable">i</span></a>) (<a class="idref" href="VLSM.Core.TraceableVLSM.html#s:115"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:116"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:115"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:116"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">Hinit</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">replace</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.state_destructor"><span class="id" title="variable">state_destructor</span></a> <span class="id" title="var">i</span> (<span class="id" title="var">s</span> <span class="id" title="var">i</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (@<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">i</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">i</span>))); [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tv_state_destructor_initial"><span class="id" title="method">tv_state_destructor_initial</span></a>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.Composition.html#composite_constrained_state_project"><span class="id" title="lemma">composite_constrained_state_project</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tv_state_destructor_initial"><span class="id" title="method">tv_state_destructor_initial</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.Composition.html#composite_constrained_state_project"><span class="id" title="lemma">composite_constrained_state_project</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">fmap_nil_inv</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_tv_state_destructor_reflects_initiality" class="idref" href="#composite_tv_state_destructor_reflects_initiality"><span class="id" title="lemma">composite_tv_state_destructor_reflects_initiality</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s':117" class="idref" href="#s':117"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':117"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:118" class="idref" href="#i:118"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>) (<a id="s:119" class="idref" href="#s:119"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="item:120" class="idref" href="#item:120"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#item:120"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:119"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':117"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:118"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="j:121" class="idref" href="#j:121"><span class="id" title="binder">j</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#j:121"><span class="id" title="variable">j</span></a>) (<a class="idref" href="VLSM.Core.TraceableVLSM.html#s':117"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#j:121"><span class="id" title="variable">j</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:119"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#j:121"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':117"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#j:121"><span class="id" title="variable">j</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">i</span> <span class="id" title="var">s</span> <span class="id" title="var">item</span> <span class="id" title="var">Hdestruct</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_state_update"><span class="id" title="lemma">composite_tv_state_destructor_state_update</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdestruct</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Heqs'</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">j</span> <span class="id" title="var">Hinit</span>; <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">j</span>)); <span class="id" title="tactic">subst</span>; [| <span class="id" title="tactic">by</span> <span class="id" title="var">state_update_simpl</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_initial"><span class="id" title="lemma">composite_tv_state_destructor_initial</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hinit</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hinit</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdestruct</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hdestruct</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_tv_state_destructor_size" class="idref" href="#composite_tv_state_destructor_size"><span class="id" title="lemma">composite_tv_state_destructor_size</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s':122" class="idref" href="#s':122"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':122"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:123" class="idref" href="#s:123"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="item:124" class="idref" href="#item:124"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="i:125" class="idref" href="#i:125"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#item:124"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:123"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':122"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:125"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_size"><span class="id" title="definition">composite_state_size</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:123"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_size"><span class="id" title="definition">composite_state_size</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':122"><span class="id" title="variable">s'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">s</span> <span class="id" title="var">item</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a>; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_list_fmap</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ([<span class="id" title="var">itemi</span> <span class="id" title="var">si</span>] &amp; [= -&gt; -&gt;] &amp; <span class="id" title="var">Hin</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">s'</span> <span class="id" title="keyword">with</span> (<a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> (<a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">s'</span> <span class="id" title="var">i</span> <span class="id" title="var">si</span>) <span class="id" title="var">i</span> (<span class="id" title="var">s'</span> <span class="id" title="var">i</span>)) <span class="id" title="tactic">at</span> 2.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_update_size_monotone"><span class="id" title="lemma">composite_state_update_size_monotone</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">state_update_simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tv_state_destructor_size"><span class="id" title="lemma">tv_state_destructor_size</span></a>; [<span class="id" title="var">done</span> | | <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.Composition.html#composite_constrained_state_project"><span class="id" title="lemma">composite_constrained_state_project</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_twice"><span class="id" title="lemma">state_update_twice</span></a>, <a class="idref" href="VLSM.Core.Composition.html#state_update_id"><span class="id" title="lemma">state_update_id</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_state_destructor_lookup_reachable" class="idref" href="#composite_state_destructor_lookup_reachable"><span class="id" title="lemma">composite_state_destructor_lookup_reachable</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s':126" class="idref" href="#s':126"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':126"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="i:127" class="idref" href="#i:127"><span class="id" title="binder">i</span></a> <a id="n:128" class="idref" href="#n:128"><span class="id" title="binder">n</span></a> <a id="item:129" class="idref" href="#item:129"><span class="id" title="binder">item</span></a> <a id="s:130" class="idref" href="#s:130"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':126"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:127"><span class="id" title="variable">i</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#n:128"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#item:129"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:130"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#input_constrained_transition_item"><span class="id" title="definition">input_constrained_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:130"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#item:129"><span class="id" title="variable">item</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span> <span class="id" title="var">item</span> <span class="id" title="var">s</span> <span class="id" title="var">Hdestruct</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_transition"><span class="id" title="lemma">composite_tv_state_destructor_transition</span></a>, <span class="id" title="lemma">elem_of_list_lookup_2</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_state_destructor_head_reachable" class="idref" href="#composite_state_destructor_head_reachable"><span class="id" title="lemma">composite_state_destructor_head_reachable</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s':131" class="idref" href="#s':131"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':131"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="i:132" class="idref" href="#i:132"><span class="id" title="binder">i</span></a> <a id="item:133" class="idref" href="#item:133"><span class="id" title="binder">item</span></a> <a id="s:134" class="idref" href="#s:134"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span> <span class="id" title="abbreviation">head</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':131"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:132"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#item:133"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:134"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#input_constrained_transition_item"><span class="id" title="definition">input_constrained_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:134"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#item:133"><span class="id" title="variable">item</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">i</span> <span class="id" title="var">item</span> <span class="id" title="var">s</span> <span class="id" title="var">Hdestruct</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_transition"><span class="id" title="lemma">composite_tv_state_destructor_transition</span></a>, <span class="id" title="lemma">head_Some_elem_of</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Given a <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a></span> for a composition of <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#TraceableVLSM"><span class="id" title="record">TraceableVLSM</span></a></span>s,
  <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a></span> will return a set of possible transitions leading
  to that state. Therefore, when trying to reconstruct a particular trace leading
  to the given state, we must choose one among the possible transitions.

<div class="paragraph"> </div>

  Let us define the type of such a choice function, which takes a composite
  constrained state and a list of indices as arguments and returns one of the
  indices and a position in the list of possible transitions to the state for
  that particular index.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="choice_function" class="idref" href="#choice_function"><span class="id" title="definition">choice_function</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s':135" class="idref" href="#s':135"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':135"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>.<br/>

<br/>
</div>

<div class="doc">
  Given a <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a></span> and a particular instance of its arguments,
  we say that the choice function is choosing well, provided that:

<div class="paragraph"> </div>

<ul class="doclist">
<li> if the set of indices is non-empty, then the returned index must belong to it

<div class="paragraph"> </div>


</li>
<li> if the component state corresponding to the returned index in not initial, then
    the returned position must identify a transition leading to the given state

<div class="paragraph"> </div>


</li>
<li> the choice does not depend on the particular proof for the composite constrained state

</li>
</ul>

</div>
<div class="code">
<span class="id" title="keyword">Record</span> <a id="ChoosingWell" class="idref" href="#ChoosingWell"><span class="id" title="record">ChoosingWell</span></a><br/>
&nbsp;&nbsp;(<a id="choose:136" class="idref" href="#choose:136"><span class="id" title="binder">choose</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a>)<br/>
&nbsp;&nbsp;(<a id="s':137" class="idref" href="#s':137"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hs':138" class="idref" href="#Hs':138"><span class="id" title="binder">Hs'</span></a> : <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':137"><span class="id" title="variable">s'</span></a>)<br/>
&nbsp;&nbsp;(<a id="indices:139" class="idref" href="#indices:139"><span class="id" title="binder">indices</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span> :=<br/>
{<br/>
&nbsp;&nbsp;<a id="cw_proof_independent" class="idref" href="#cw_proof_independent"><span class="id" title="projection">cw_proof_independent</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="Hs'':141" class="idref" href="#Hs'':141"><span class="id" title="binder">Hs''</span></a> : <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':137"><span class="id" title="variable">s'</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:136"><span class="id" title="variable">choose</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':137"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs':138"><span class="id" title="variable">Hs'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:139"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:136"><span class="id" title="variable">choose</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':137"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs'':141"><span class="id" title="variable">Hs''</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:139"><span class="id" title="variable">indices</span></a>;<br/>
&nbsp;&nbsp;<a id="cw_chosen_index_in_indices" class="idref" href="#cw_chosen_index_in_indices"><span class="id" title="projection">cw_chosen_index_in_indices</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:139"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">(</span><a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:136"><span class="id" title="variable">choose</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':137"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs':138"><span class="id" title="variable">Hs'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:139"><span class="id" title="variable">indices</span></a><span class="id" title="notation">).1</span> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:139"><span class="id" title="variable">indices</span></a>;<br/>
&nbsp;&nbsp;<a id="cw_chosen_position_exists" class="idref" href="#cw_chosen_position_exists"><span class="id" title="projection">cw_chosen_position_exists</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:144" class="idref" href="#i:144"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>) (<a id="n:145" class="idref" href="#n:145"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:136"><span class="id" title="variable">choose</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':137"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs':138"><span class="id" title="variable">Hs'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:139"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#i:144"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#n:145"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:144"><span class="id" title="variable">i</span></a>) (<a class="idref" href="VLSM.Core.TraceableVLSM.html#s':137"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:144"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">is_Some</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':137"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:144"><span class="id" title="variable">i</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#n:145"><span class="id" title="variable">n</span></a>);<br/>
}.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="choosing_well_position_exists" class="idref" href="#choosing_well_position_exists"><span class="id" title="lemma">choosing_well_position_exists</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a id="choose:147" class="idref" href="#choose:147"><span class="id" title="binder">choose</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s':148" class="idref" href="#s':148"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="Hs':149" class="idref" href="#Hs':149"><span class="id" title="binder">Hs'</span></a> : <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':148"><span class="id" title="variable">s'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="indices:150" class="idref" href="#indices:150"><span class="id" title="binder">indices</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>) (<a id="Hwell:151" class="idref" href="#Hwell:151"><span class="id" title="binder">Hwell</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#ChoosingWell"><span class="id" title="record">ChoosingWell</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:147"><span class="id" title="variable">choose</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':148"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs':149"><span class="id" title="variable">Hs'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:150"><span class="id" title="variable">indices</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i_n:152" class="idref" href="#i_n:152"><span class="id" title="binder">i_n</span></a> :=  <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:147"><span class="id" title="variable">choose</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':148"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs':149"><span class="id" title="variable">Hs'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:150"><span class="id" title="variable">indices</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':148"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i_n:152"><span class="id" title="variable">i_n</span></a><span class="id" title="notation">.1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':148"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i_n:152"><span class="id" title="variable">i_n</span></a><span class="id" title="notation">.1</span> <span class="id" title="notation">!!</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i_n:152"><span class="id" title="variable">i_n</span></a><span class="id" title="notation">.2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">choose</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">indices</span> <span class="id" title="var">Hchoose</span> <span class="id" title="var">i_n</span> <span class="id" title="var">Hdestruct</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">not_eq_None_Some</span>, <a class="idref" href="VLSM.Core.TraceableVLSM.html#cw_chosen_position_exists"><span class="id" title="projection">cw_chosen_position_exists</span></a>; [<span class="id" title="var">done</span> | |].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> (<span class="id" title="var">choose</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="var">contradict</span> <span class="id" title="var">Hdestruct</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_initial"><span class="id" title="lemma">composite_tv_state_destructor_initial</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  This is a property of the set of indices argument to a <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a></span>,
  guaranteeing that the component states for the non-included indices are initial.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="not_in_indices_initial_prop" class="idref" href="#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a><br/>
&nbsp;&nbsp;(<a id="s':153" class="idref" href="#s':153"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;(<a id="indices:154" class="idref" href="#indices:154"><span class="id" title="binder">indices</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="i:155" class="idref" href="#i:155"><span class="id" title="binder">i</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:155"><span class="id" title="variable">i</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:154"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:155"><span class="id" title="variable">i</span></a>) (<a class="idref" href="VLSM.Core.TraceableVLSM.html#s':153"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:155"><span class="id" title="variable">i</span></a>).<br/>

<br/>
</div>

<div class="doc">
  The constrained transitions leading to a composite constrained state reflect
  the <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a></span>erty, or, alternately, the
  <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a></span> function reflects it.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="composite_tv_state_destructor_preserves_not_in_indices_initial" class="idref" href="#composite_tv_state_destructor_preserves_not_in_indices_initial"><span class="id" title="lemma">composite_tv_state_destructor_preserves_not_in_indices_initial</span></a>  :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a id="s':156" class="idref" href="#s':156"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="Hs':157" class="idref" href="#Hs':157"><span class="id" title="binder">Hs'</span></a> : <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':156"><span class="id" title="variable">s'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:158" class="idref" href="#i:158"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>) (<a id="n:159" class="idref" href="#n:159"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:160" class="idref" href="#s:160"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="item:161" class="idref" href="#item:161"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':156"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:158"><span class="id" title="variable">i</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#n:159"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#item:161"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:160"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="indices:162" class="idref" href="#indices:162"><span class="id" title="binder">indices</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':156"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:162"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:160"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:162"><span class="id" title="variable">indices</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> * <span class="id" title="var">Heq</span> <span class="id" title="var">indices</span> <span class="id" title="var">Hinits'</span> <span class="id" title="var">j</span> <span class="id" title="var">Hj</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">erewrite</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_reflects_initiality"><span class="id" title="lemma">composite_tv_state_destructor_reflects_initiality</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">apply</span> <span class="id" title="var">Hinits'</span> | | <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">elem_of_list_lookup_2</span> | <span class="id" title="tactic">apply</span> <span class="id" title="var">Hinits'</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Removing an index whose associated set of transitions is empty
  (so that the corresponding component state is initial) preserves
  <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a></span>.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="set_remove_preserves_not_in_indices_initial" class="idref" href="#set_remove_preserves_not_in_indices_initial"><span class="id" title="lemma">set_remove_preserves_not_in_indices_initial</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s':163" class="idref" href="#s':163"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':163"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:164" class="idref" href="#i:164"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':163"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:164"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="indices:165" class="idref" href="#indices:165"><span class="id" title="binder">indices</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':163"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:165"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':163"><span class="id" title="variable">s'</span></a> (<a class="idref" href="VLSM.Lib.StdppListSet.html#set_remove"><span class="id" title="definition">StdppListSet.set_remove</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:164"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:165"><span class="id" title="variable">indices</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">i</span> <span class="id" title="var">Hdestruct</span> <span class="id" title="var">indices</span> <span class="id" title="var">Hinit</span> <span class="id" title="var">j</span> <span class="id" title="var">Hj</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">j</span> <span class="id" title="notation">∈</span> <span class="id" title="var">indices</span>)); [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hinit</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>)); [<span class="id" title="tactic">by</span> <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_initial"><span class="id" title="lemma">composite_tv_state_destructor_initial</span></a> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">contradict</span> <span class="id" title="var">Hj</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.StdppListSet.html#set_remove_3"><span class="id" title="lemma">StdppListSet.set_remove_3</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  A <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a></span> is choosing well if it is <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#ChoosingWell"><span class="id" title="record">ChoosingWell</span></a></span> for any
  instance of its arguments (a constrained state and a set of indices)
  satisfying the <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a></span>erty.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="choosing_well" class="idref" href="#choosing_well"><span class="id" title="definition">choosing_well</span></a> (<a id="choose:166" class="idref" href="#choose:166"><span class="id" title="binder">choose</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s':167" class="idref" href="#s':167"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="Hs':168" class="idref" href="#Hs':168"><span class="id" title="binder">Hs'</span></a> : <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':167"><span class="id" title="variable">s'</span></a>) (<a id="indices:169" class="idref" href="#indices:169"><span class="id" title="binder">indices</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:169"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':167"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:169"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#ChoosingWell"><span class="id" title="record">ChoosingWell</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:166"><span class="id" title="variable">choose</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':167"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs':168"><span class="id" title="variable">Hs'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:169"><span class="id" title="variable">indices</span></a>.<br/>

<br/>
</div>

<div class="doc">
  Given a composite constrained state, a <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a></span> and an initial
  set of indices, we can extract a trace leading to that state by following
  backwards the transitions yielded by the choice function until the states
  corresponding to any of the given indices become initial states.

</div>
<div class="code">
<span class="id" title="keyword">Equations</span> <a id="indexed_composite_state_to_trace" class="idref" href="#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a><br/>
&nbsp;&nbsp;(<a id="choose:170" class="idref" href="#choose:170"><span class="id" title="binder">choose</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a>)<br/>
&nbsp;&nbsp;(<a id="s':171" class="idref" href="#s':171"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="Hs':172" class="idref" href="#Hs':172"><span class="id" title="binder">Hs'</span></a> : <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':171"><span class="id" title="variable">s'</span></a>)<br/>
&nbsp;&nbsp;(<a id="indices:173" class="idref" href="#indices:173"><span class="id" title="binder">indices</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="keyword">wf</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <span class="id" title="var">indices</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_size"><span class="id" title="definition">composite_state_size</span></a> <span class="id" title="var">s'</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#lt"><span class="id" title="definition">lt</span></a> :=<br/>
| <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:176"><span class="id" title="variable">choose</span></a>, <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':180"><span class="id" title="variable">s'</span></a>, <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs':181"><span class="id" title="variable">Hs'</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
| <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:188"><span class="id" title="variable">choose</span></a>, <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':194"><span class="id" title="variable">s'</span></a>, <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs':195"><span class="id" title="variable">Hs'</span></a>, <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:201"><span class="id" title="variable">indices</span></a> <span class="id" title="keyword">with</span> <span class="id" title="definition">inspect</span> (<span class="id" title="var">choose</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">indices</span>) =&gt;<br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.TraceableVLSM.html#i_n:206"><span class="id" title="variable">i_n</span></a> <a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">eq</span></a><a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hchoice:203"><span class="id" title="variable">Hchoice</span></a> <span class="id" title="keyword">with</span> <span class="id" title="definition">inspect</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <span class="id" title="var">s'</span> <span class="id" title="var">i_n</span><span class="id" title="notation">.1</span> <span class="id" title="notation">!!</span> <span class="id" title="var">i_n</span><span class="id" title="notation">.2</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#item:218"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:219"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">eq</span></a><a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hdestruct:211"><span class="id" title="variable">Hdestruct</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace:174"><span class="id" title="definition">indexed_composite_state_to_trace</span></a> <span class="id" title="var">choose</span> <span class="id" title="var">s</span> <span class="id" title="var">_</span> <span class="id" title="var">indices</span> =&gt; {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#is:230"><span class="id" title="variable">is</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:234"><span class="id" title="variable">tr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="keyword">is</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">tr</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">item</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|             <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">eq</span></a><a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hdestruct:236"><span class="id" title="variable">Hdestruct</span></a> <span class="id" title="keyword">with</span> <span class="id" title="definition">inspect</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">i_n</span><span class="id" title="notation">.1</span> <span class="id" title="notation">∈</span> <span class="id" title="var">indices</span>)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#right"><span class="id" title="constructor">right</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">_</span></a><a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">eq</span></a><a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hni:246"><span class="id" title="variable">Hni</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|  <a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#left"><span class="id" title="constructor">left</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">_</span></a><a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">eq</span></a><a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hi:257"><span class="id" title="variable">Hi</span></a> <span class="id" title="keyword">with</span> <span class="id" title="definition">inspect</span> (<span class="id" title="definition">decide</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <span class="id" title="var">s'</span> <span class="id" title="var">i_n</span><span class="id" title="notation">.1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#right"><span class="id" title="constructor">right</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">_</span></a><a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">eq</span></a><a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hn:269"><span class="id" title="variable">Hn</span></a>  =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|  <a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#left"><span class="id" title="constructor">left</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">_</span></a><a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">eq</span></a><a class="idref" href="VLSM.Lib.EquationsExtras.html#:::x_'eq:'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hnn:282"><span class="id" title="variable">Hnn</span></a> =&gt; <a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace:174"><span class="id" title="definition">indexed_composite_state_to_trace</span></a> <span class="id" title="var">choose</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Lib.StdppListSet.html#set_remove"><span class="id" title="definition">StdppListSet.set_remove</span></a> <span class="id" title="var">i_n</span><span class="id" title="notation">.1</span> <span class="id" title="var">indices</span>).<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_origin"><span class="id" title="lemma">input_valid_transition_origin</span></a>, <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor_lookup_reachable"><span class="id" title="lemma">composite_state_destructor_lookup_reachable</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_size"><span class="id" title="definition">composite_state_size</span></a> <span class="id" title="var">s</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_size"><span class="id" title="definition">composite_state_size</span></a> <span class="id" title="var">s'</span>); [<span class="id" title="var">lia</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_size"><span class="id" title="lemma">composite_tv_state_destructor_size</span></a>, <span class="id" title="lemma">elem_of_list_lookup_2</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> (<a class="idref" href="VLSM.Lib.StdppListSet.html#set_remove"><span class="id" title="definition">StdppListSet.set_remove</span></a> <span class="id" title="var">i_n</span><span class="id" title="notation">.1</span> <span class="id" title="var">indices</span>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <span class="id" title="var">indices</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">unfold</span> <span class="id" title="var">indices</span>; <span class="id" title="var">lia</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="VLSM.Lib.ListSetExtras.html#set_remove_length"><span class="id" title="lemma">set_remove_length</span></a>; [<span class="id" title="var">lia</span> |].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  For any composite constrained state <code>s</code> and for any index <code>i</code> for which the
  component state <code>s i</code> has the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a></span>erty, the component state of
  index <code>i</code> of the origin state of the trace extracted from <code>s</code> is equal
  to <code>s i</code>.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="indexed_composite_state_to_trace_reflects_initiality_1" class="idref" href="#indexed_composite_state_to_trace_reflects_initiality_1"><span class="id" title="lemma">indexed_composite_state_to_trace_reflects_initiality_1</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="choose:292" class="idref" href="#choose:292"><span class="id" title="binder">choose</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:293" class="idref" href="#s:293"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="Hs:294" class="idref" href="#Hs:294"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:293"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="indices:295" class="idref" href="#indices:295"><span class="id" title="binder">indices</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:296" class="idref" href="#i:296"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:296"><span class="id" title="variable">i</span></a>) (<a class="idref" href="VLSM.Core.TraceableVLSM.html#s:293"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:296"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="is:297" class="idref" href="#is:297"><span class="id" title="binder">is</span></a> <a id="tr:298" class="idref" href="#tr:298"><span class="id" title="binder">tr</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:292"><span class="id" title="variable">choose</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:293"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs:294"><span class="id" title="variable">Hs</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:295"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#is:297"><span class="id" title="variable">is</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:298"><span class="id" title="variable">tr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#is:297"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:296"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:293"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:296"><span class="id" title="variable">i</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ? ? ?.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_funelim</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a> <span class="id" title="var">choose</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">indices</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">choose</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">indices</span>; <span class="id" title="tactic">intros</span> ? ? ?.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> 2.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> * -&gt; <span class="id" title="var">Hind</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">i</span> <span class="id" title="var">Hi</span> <span class="id" title="var">is'</span> <span class="id" title="var">tr'</span> [= -&gt; &lt;-].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">s'</span> <span class="id" title="var">i</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">s</span> <span class="id" title="var">i</span>) <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_reflects_initiality"><span class="id" title="lemma">composite_tv_state_destructor_reflects_initiality</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">elem_of_list_lookup_2</span> |].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> 5.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">idx</span> <span class="id" title="var">indices</span> [<span class="id" title="var">j</span> <span class="id" title="var">nj</span>] <span class="id" title="var">Hdestruct</span> <span class="id" title="var">_</span> <span class="id" title="var">Hj</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> -&gt; <span class="id" title="var">Hind</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">i</span> <span class="id" title="var">Hi</span> <span class="id" title="keyword">is</span> <span class="id" title="var">tr</span> <span class="id" title="var">Heqis_tr</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hind</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> 6.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  The components of an origin of a trace extracted through <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a></span>
  are initial for any index from the set of indices provided as argument.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="indexed_composite_state_to_trace_result_state" class="idref" href="#indexed_composite_state_to_trace_result_state"><span class="id" title="lemma">indexed_composite_state_to_trace_result_state</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="choose:299" class="idref" href="#choose:299"><span class="id" title="binder">choose</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choosing_well"><span class="id" title="definition">choosing_well</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:299"><span class="id" title="variable">choose</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:300" class="idref" href="#s:300"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="Hs:301" class="idref" href="#Hs:301"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:300"><span class="id" title="variable">s</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="indices:302" class="idref" href="#indices:302"><span class="id" title="binder">indices</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span> <span class="id" title="inductive">NoDup</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:302"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:300"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:302"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="is:303" class="idref" href="#is:303"><span class="id" title="binder">is</span></a> <a id="tr:304" class="idref" href="#tr:304"><span class="id" title="binder">tr</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:299"><span class="id" title="variable">choose</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:300"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs:301"><span class="id" title="variable">Hs</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:302"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#is:303"><span class="id" title="variable">is</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:304"><span class="id" title="variable">tr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="i:305" class="idref" href="#i:305"><span class="id" title="binder">i</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:305"><span class="id" title="variable">i</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:302"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:305"><span class="id" title="variable">i</span></a>) (<a class="idref" href="VLSM.Core.TraceableVLSM.html#is:303"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:305"><span class="id" title="variable">i</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? <span class="id" title="var">Hchoose</span> *; <span class="id" title="var">revert</span> <span class="id" title="var">Hchoose</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_funelim</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a> <span class="id" title="var">choose</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">indices</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">choose</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">indices</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> ? ? ? ? ? ? ? ? ? ? <span class="id" title="var">Hi</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hi</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">choose</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">idx</span> <span class="id" title="var">indices</span> (<span class="id" title="var">j</span>, <span class="id" title="var">nj</span>) <span class="id" title="var">item</span> <span class="id" title="var">s</span> <span class="id" title="var">Hdestruct</span> -&gt; <span class="id" title="keyword">is</span> <span class="id" title="var">tr</span> -&gt; <span class="id" title="var">Hind</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hchoose</span> <span class="id" title="var">Hnodup</span> <span class="id" title="var">Hinitial</span> <span class="id" title="var">is'</span> <span class="id" title="var">tr'</span> [= -&gt; &lt;-] <span class="id" title="var">i</span> <span class="id" title="var">Hi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hind</span>; [| | <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_preserves_not_in_indices_initial"><span class="id" title="lemma">composite_tv_state_destructor_preserves_not_in_indices_initial</span></a>  | |].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">elim</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#cw_chosen_index_in_indices"><span class="id" title="projection">cw_chosen_index_in_indices</span></a>; [<span class="id" title="tactic">apply</span> <span class="id" title="var">Hchoose</span> |].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">choose</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">idx</span> <span class="id" title="var">indices</span> (<span class="id" title="var">j</span>, <span class="id" title="var">nj</span>) <span class="id" title="var">Hdestruct</span> <span class="id" title="var">_</span> <span class="id" title="var">Hj</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> -&gt; <span class="id" title="var">Hind</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hchoose</span> <span class="id" title="var">Hnodup</span> <span class="id" title="var">Hinitial</span> <span class="id" title="keyword">is</span> <span class="id" title="var">tr</span> <span class="id" title="var">Heqis_tr</span> <span class="id" title="var">i</span> <span class="id" title="var">Hi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqis_tr</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="VLSM.Lib.StdppListSet.html#set_remove"><span class="id" title="definition">StdppListSet.set_remove</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">removed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">i</span> <span class="id" title="notation">∈</span> <span class="id" title="var">removed</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hind</span>; [<span class="id" title="var">done</span> | | | <span class="id" title="var">done</span> | <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.StdppListSet.html#set_remove_nodup"><span class="id" title="lemma">StdppListSet.set_remove_nodup</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#set_remove_preserves_not_in_indices_initial"><span class="id" title="lemma">set_remove_preserves_not_in_indices_initial</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">replace</span> <span class="id" title="var">i</span> <span class="id" title="keyword">with</span> <span class="id" title="var">j</span> <span class="id" title="tactic">in</span> * <span class="id" title="tactic">by</span> (<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">j</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="var">contradict</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.StdppListSet.html#set_remove_3"><span class="id" title="lemma">StdppListSet.set_remove_3</span></a>]; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">erewrite</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace_reflects_initiality_1"><span class="id" title="lemma">indexed_composite_state_to_trace_reflects_initiality_1</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[.. | <span class="id" title="var">done</span>]; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_initial"><span class="id" title="lemma">composite_tv_state_destructor_initial</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Heq1</span>; <span class="id" title="var">contradict</span> <span class="id" title="var">Hdestruct</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choosing_well_position_exists"><span class="id" title="lemma">choosing_well_position_exists</span></a>; [<span class="id" title="tactic">apply</span> <span class="id" title="var">Hchoose</span> |].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Assuming <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a></span>, the origin state of the
  trace given by <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a></span> is initial.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="indexed_composite_state_to_trace_result_state_is_initial" class="idref" href="#indexed_composite_state_to_trace_result_state_is_initial"><span class="id" title="lemma">indexed_composite_state_to_trace_result_state_is_initial</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="choose:306" class="idref" href="#choose:306"><span class="id" title="binder">choose</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choosing_well"><span class="id" title="definition">choosing_well</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:306"><span class="id" title="variable">choose</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:307" class="idref" href="#s:307"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="Hs:308" class="idref" href="#Hs:308"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:307"><span class="id" title="variable">s</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="indices:309" class="idref" href="#indices:309"><span class="id" title="binder">indices</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span> <span class="id" title="inductive">NoDup</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:309"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:307"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:309"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="is:310" class="idref" href="#is:310"><span class="id" title="binder">is</span></a> <a id="tr:311" class="idref" href="#tr:311"><span class="id" title="binder">tr</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:306"><span class="id" title="variable">choose</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:307"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs:308"><span class="id" title="variable">Hs</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:309"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#is:310"><span class="id" title="variable">is</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:311"><span class="id" title="variable">tr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#composite_initial_state_prop"><span class="id" title="definition">composite_initial_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#is:310"><span class="id" title="variable">is</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * ? ? ? ? ? <span class="id" title="var">Hinitial</span> ** <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">i</span> <span class="id" title="notation">∈</span> <span class="id" title="var">indices</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace_result_state"><span class="id" title="lemma">indexed_composite_state_to_trace_result_state</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">i</span>) (<span class="id" title="var">s</span> <span class="id" title="var">i</span>)) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> <span class="id" title="var">Hinitial</span>; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">erewrite</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace_reflects_initiality_1"><span class="id" title="lemma">indexed_composite_state_to_trace_reflects_initiality_1</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  For any composite constrained state <code>s</code> and for any index <code>i</code> for which the
  component state <code>s i</code> satisfies <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a></span>, the component state of
  index <code>i</code> of any state of the trace extracted from <code>s</code> is equal to <code>s i</code>.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="indexed_composite_state_to_trace_reflects_initiality_2" class="idref" href="#indexed_composite_state_to_trace_reflects_initiality_2"><span class="id" title="lemma">indexed_composite_state_to_trace_reflects_initiality_2</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="choose:312" class="idref" href="#choose:312"><span class="id" title="binder">choose</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:313" class="idref" href="#s:313"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="Hs:314" class="idref" href="#Hs:314"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:313"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="indices:315" class="idref" href="#indices:315"><span class="id" title="binder">indices</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:316" class="idref" href="#i:316"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:316"><span class="id" title="variable">i</span></a>) (<a class="idref" href="VLSM.Core.TraceableVLSM.html#s:313"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:316"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="is:317" class="idref" href="#is:317"><span class="id" title="binder">is</span></a> <a id="tr:318" class="idref" href="#tr:318"><span class="id" title="binder">tr</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:312"><span class="id" title="variable">choose</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:313"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs:314"><span class="id" title="variable">Hs</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:315"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#is:317"><span class="id" title="variable">is</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:318"><span class="id" title="variable">tr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="item:319" class="idref" href="#item:319"><span class="id" title="binder">item</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#item:319"><span class="id" title="variable">item</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:318"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#item:319"><span class="id" title="variable">item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:316"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:313"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:316"><span class="id" title="variable">i</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ? ? ?.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_funelim</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a> <span class="id" title="var">choose</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">indices</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">choose</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">indices</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> 4; <span class="id" title="tactic">inversion</span> 1 | ..];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ? ? <span class="id" title="var">idx</span> <span class="id" title="var">indices</span> [<span class="id" title="var">j</span> <span class="id" title="var">nj</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> * -&gt; <span class="id" title="var">Hind</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">i</span> <span class="id" title="var">Hi</span> <span class="id" title="var">is'</span> <span class="id" title="var">tr'</span> [=] <span class="id" title="var">_item</span> <span class="id" title="var">H_item</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">is'</span> <span class="id" title="var">tr'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_app</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_item</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_item</span> | <span class="id" title="var">H_item</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">replace</span> (<span class="id" title="var">s'</span> <span class="id" title="var">i</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">s</span> <span class="id" title="var">i</span>) <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_reflects_initiality"><span class="id" title="lemma">composite_tv_state_destructor_reflects_initiality</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">elem_of_list_lookup_2</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_item</span> <span class="id" title="keyword">as</span> -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_destination"><span class="id" title="lemma">composite_tv_state_destructor_destination</span></a>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">elem_of_list_lookup_2</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> 5; <span class="id" title="tactic">inversion</span> 1.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> 6; <span class="id" title="tactic">inversion</span> 1.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  The trace extracted from a state using <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a></span>
  ends in that state.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="indexed_composite_state_to_trace_last" class="idref" href="#indexed_composite_state_to_trace_last"><span class="id" title="lemma">indexed_composite_state_to_trace_last</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="choose:320" class="idref" href="#choose:320"><span class="id" title="binder">choose</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a>) (<a id="Hwell:321" class="idref" href="#Hwell:321"><span class="id" title="binder">Hwell</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#choosing_well"><span class="id" title="definition">choosing_well</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:320"><span class="id" title="variable">choose</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s':322" class="idref" href="#s':322"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="Hs':323" class="idref" href="#Hs':323"><span class="id" title="binder">Hs'</span></a> : <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':322"><span class="id" title="variable">s'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="indices:324" class="idref" href="#indices:324"><span class="id" title="binder">indices</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hnodup:325" class="idref" href="#Hnodup:325"><span class="id" title="binder">Hnodup</span></a> : <span class="id" title="inductive">NoDup</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:324"><span class="id" title="variable">indices</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hinit:326" class="idref" href="#Hinit:326"><span class="id" title="binder">Hinit</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':322"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:324"><span class="id" title="variable">indices</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="is:327" class="idref" href="#is:327"><span class="id" title="binder">is</span></a> <a id="tr:328" class="idref" href="#tr:328"><span class="id" title="binder">tr</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:320"><span class="id" title="variable">choose</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':322"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs':323"><span class="id" title="variable">Hs'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:324"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#is:327"><span class="id" title="variable">is</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:328"><span class="id" title="variable">tr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#is:327"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:328"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':322"><span class="id" title="variable">s'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">choose</span> <span class="id" title="var">Hwell</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">indices</span>; <span class="id" title="var">revert</span> <span class="id" title="var">Hwell</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_funelim</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a> <span class="id" title="var">choose</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">indices</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">choose</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">indices</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> 5 | ..];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ? ? <span class="id" title="var">idx</span> <span class="id" title="var">indices</span> [<span class="id" title="var">j</span> <span class="id" title="var">jn</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> * -&gt; <span class="id" title="var">Hind</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ? ? [= -&gt; &lt;-].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_is_last"><span class="id" title="lemma">finite_trace_last_is_last</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_destination"><span class="id" title="lemma">composite_tv_state_destructor_destination</span></a>, <span class="id" title="lemma">elem_of_list_lookup_2</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> 7.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> * <span class="id" title="var">Hind</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> **; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hind</span>; [<span class="id" title="var">done</span> | | | <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.StdppListSet.html#set_remove_nodup"><span class="id" title="lemma">StdppListSet.set_remove_nodup</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#set_remove_preserves_not_in_indices_initial"><span class="id" title="lemma">set_remove_preserves_not_in_indices_initial</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> 8.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  For any given composite constrained state,
  <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_reachable_composite_state_to_trace"><span class="id" title="lemma">indexed_reachable_composite_state_to_trace</span></a></span> yields a constrained trace
  leading to it.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="indexed_reachable_composite_state_to_trace" class="idref" href="#indexed_reachable_composite_state_to_trace"><span class="id" title="lemma">indexed_reachable_composite_state_to_trace</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="choose:329" class="idref" href="#choose:329"><span class="id" title="binder">choose</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choosing_well"><span class="id" title="definition">choosing_well</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:329"><span class="id" title="variable">choose</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:330" class="idref" href="#s:330"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="Hs:331" class="idref" href="#Hs:331"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:330"><span class="id" title="variable">s</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="indices:332" class="idref" href="#indices:332"><span class="id" title="binder">indices</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span> <span class="id" title="inductive">NoDup</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:332"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:330"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:332"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="is:333" class="idref" href="#is:333"><span class="id" title="binder">is</span></a> <a id="tr:334" class="idref" href="#tr:334"><span class="id" title="binder">tr</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:329"><span class="id" title="variable">choose</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:330"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs:331"><span class="id" title="variable">Hs</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indices:332"><span class="id" title="variable">indices</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#is:333"><span class="id" title="variable">is</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:334"><span class="id" title="variable">tr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#finite_constrained_trace_from_to"><span class="id" title="definition">finite_constrained_trace_from_to</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#is:333"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:330"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:334"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">choose</span> <span class="id" title="var">Hchoose</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">indices</span>; <span class="id" title="var">revert</span> <span class="id" title="var">Hchoose</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_funelim</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a> <span class="id" title="var">choose</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">indices</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">choose</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">indices</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">choose</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> 4; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">constructor</span> | ..];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">idx</span> <span class="id" title="var">indices</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> ? ? ? ? <span class="id" title="var">_</span> ? ? -&gt; <span class="id" title="var">Hind</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hchoose</span> <span class="id" title="var">Hnodup</span> <span class="id" title="var">Hinitial</span> <span class="id" title="var">is'</span> <span class="id" title="var">tr'</span> [= -&gt; &lt;-].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_preserves_not_in_indices_initial"><span class="id" title="lemma">composite_tv_state_destructor_preserves_not_in_indices_initial</span></a>  <span class="id" title="tactic">in</span> <span class="id" title="var">Hinitial</span>; [| <span class="id" title="var">done</span>..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_lookup_2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdestruct</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">s'</span> <span class="id" title="keyword">with</span> (<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">item</span>) <span class="id" title="tactic">in</span> *<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_destination"><span class="id" title="lemma">composite_tv_state_destructor_destination</span></a>; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_transition"><span class="id" title="lemma">composite_tv_state_destructor_transition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdestruct</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">item</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#extend_right_finite_trace_from_to"><span class="id" title="lemma">extend_right_finite_trace_from_to</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">s</span>; [<span class="id" title="tactic">apply</span> <span class="id" title="var">Hind</span> |].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="var">contradiction</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#cw_chosen_index_in_indices"><span class="id" title="projection">cw_chosen_index_in_indices</span></a>; [<span class="id" title="tactic">apply</span> <span class="id" title="var">Hchoose</span> |].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> ? <span class="id" title="var">Hdestruct</span> <span class="id" title="var">_</span> <span class="id" title="var">Hj</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> -&gt; <span class="id" title="var">Hind</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> **; <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hind</span>; [<span class="id" title="var">done</span> | | | <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.StdppListSet.html#set_remove_nodup"><span class="id" title="lemma">StdppListSet.set_remove_nodup</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#set_remove_preserves_not_in_indices_initial"><span class="id" title="lemma">set_remove_preserves_not_in_indices_initial</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Heq1</span>; <span class="id" title="var">contradict</span> <span class="id" title="var">Hdestruct</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choosing_well_position_exists"><span class="id" title="lemma">choosing_well_position_exists</span></a>; [<span class="id" title="tactic">apply</span> <span class="id" title="var">Hchoose</span> |].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Given a composite constrained state, and a <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a></span>, we can extract a
  constrained trace leading to that state by instantiating
  <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a></span> with the set of all indices.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="composite_state_to_trace" class="idref" href="#composite_state_to_trace"><span class="id" title="definition">composite_state_to_trace</span></a><br/>
&nbsp;&nbsp;(<a id="choose:335" class="idref" href="#choose:335"><span class="id" title="binder">choose</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a>)<br/>
&nbsp;&nbsp;(<a id="s:336" class="idref" href="#s:336"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="Hs:337" class="idref" href="#Hs:337"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:336"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:335"><span class="id" title="variable">choose</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:336"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs:337"><span class="id" title="variable">Hs</span></a> (<span class="id" title="method">enum</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="reachable_composite_state_to_trace" class="idref" href="#reachable_composite_state_to_trace"><span class="id" title="lemma">reachable_composite_state_to_trace</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="choose:338" class="idref" href="#choose:338"><span class="id" title="binder">choose</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choosing_well"><span class="id" title="definition">choosing_well</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:338"><span class="id" title="variable">choose</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:339" class="idref" href="#s:339"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="Hs:340" class="idref" href="#Hs:340"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:339"><span class="id" title="variable">s</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="is:341" class="idref" href="#is:341"><span class="id" title="binder">is</span></a> <a id="tr:342" class="idref" href="#tr:342"><span class="id" title="binder">tr</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_to_trace"><span class="id" title="definition">composite_state_to_trace</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:338"><span class="id" title="variable">choose</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:339"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs:340"><span class="id" title="variable">Hs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#is:341"><span class="id" title="variable">is</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:342"><span class="id" title="variable">tr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#finite_constrained_trace_init_to"><span class="id" title="definition">finite_constrained_trace_init_to</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#is:341"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:339"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:342"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? <span class="id" title="var">Hchoose</span> * <span class="id" title="var">Heqis_tr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Hnodup</span> := <span class="id" title="method">NoDup_enum</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hinitial</span> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a> <span class="id" title="var">s</span> (<span class="id" title="method">enum</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">intros</span> <span class="id" title="var">j</span> <span class="id" title="var">Hj</span>; <span class="id" title="var">contradict</span> <span class="id" title="var">Hj</span>; <span class="id" title="tactic">apply</span> <span class="id" title="method">elem_of_enum</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_reachable_composite_state_to_trace"><span class="id" title="lemma">indexed_reachable_composite_state_to_trace</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace_result_state_is_initial"><span class="id" title="lemma">indexed_composite_state_to_trace_result_state_is_initial</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  The property of a <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a></span> with respect to a predicate on composite
  states which states that for any chosen transition, if the predicate holds for
  the source of the transition then it must also hold for its target.

<div class="paragraph"> </div>

  See <span class="inlinecode"><span class="id" title="var">MinimalEquivocationTrace.minimal_equivocation_choice_monotone</span></span> for an
  example of such a function.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="chosen_transition_preserves_P" class="idref" href="#chosen_transition_preserves_P"><span class="id" title="definition">chosen_transition_preserves_P</span></a><br/>
&nbsp;&nbsp;(<a id="P:343" class="idref" href="#P:343"><span class="id" title="binder">P</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>) (<a id="choose:344" class="idref" href="#choose:344"><span class="id" title="binder">choose</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="is:345" class="idref" href="#is:345"><span class="id" title="binder">is</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span> <span class="id" title="inductive">NoDup</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#is:345"><span class="id" title="variable">is</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s':346" class="idref" href="#s':346"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="Hs':347" class="idref" href="#Hs':347"><span class="id" title="binder">Hs'</span></a> : <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':346"><span class="id" title="variable">s'</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':346"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#is:345"><span class="id" title="variable">is</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:348" class="idref" href="#i:348"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>) (<a id="Hi:349" class="idref" href="#Hi:349"><span class="id" title="binder">Hi</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:348"><span class="id" title="variable">i</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#is:345"><span class="id" title="variable">is</span></a>) (<a id="n:350" class="idref" href="#n:350"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:344"><span class="id" title="variable">choose</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':346"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs':347"><span class="id" title="variable">Hs'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#is:345"><span class="id" title="variable">is</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#i:348"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#n:350"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:351" class="idref" href="#s:351"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="item:352" class="idref" href="#item:352"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_destructor"><span class="id" title="definition">composite_state_destructor</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':346"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#i:348"><span class="id" title="variable">i</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#n:350"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#item:352"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:351"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#P:343"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:351"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#P:343"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s':346"><span class="id" title="variable">s'</span></a>.<br/>

<br/>
</div>

<div class="doc">
  If a <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a></span> is choosing well and satisfying
  <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#chosen_transition_preserves_P"><span class="id" title="definition">chosen_transition_preserves_P</span></a></span> w.r.t. a predicate <code>P</code> then the corresponding
  trace obtained through <span class="inlinecode"><a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_to_trace"><span class="id" title="definition">composite_state_to_trace</span></a></span> will also preserve <code>P</code>
  at every step.

<div class="paragraph"> </div>

  See <span class="inlinecode"><span class="id" title="var">MinimalEquivocationTrace.state_to_minimal_equivocation_trace_equivocation_monotonic</span></span>
  for an example of such a function.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="composite_state_to_trace_P_monotonic" class="idref" href="#composite_state_to_trace_P_monotonic"><span class="id" title="lemma">composite_state_to_trace_P_monotonic</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="P:353" class="idref" href="#P:353"><span class="id" title="binder">P</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="choose:354" class="idref" href="#choose:354"><span class="id" title="binder">choose</span></a> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#choice_function"><span class="id" title="definition">choice_function</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choosing_well"><span class="id" title="definition">choosing_well</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:354"><span class="id" title="variable">choose</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#chosen_transition_preserves_P"><span class="id" title="definition">chosen_transition_preserves_P</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#P:353"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:354"><span class="id" title="variable">choose</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:355" class="idref" href="#s:355"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>) (<a id="Hs:356" class="idref" href="#Hs:356"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:355"><span class="id" title="variable">s</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="is:357" class="idref" href="#is:357"><span class="id" title="binder">is</span></a> <a id="tr:358" class="idref" href="#tr:358"><span class="id" title="binder">tr</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_to_trace"><span class="id" title="definition">composite_state_to_trace</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#choose:354"><span class="id" title="variable">choose</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#s:355"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#Hs:356"><span class="id" title="variable">Hs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#is:357"><span class="id" title="variable">is</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:358"><span class="id" title="variable">tr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="pre:359" class="idref" href="#pre:359"><span class="id" title="binder">pre</span></a> <a id="suf:360" class="idref" href="#suf:360"><span class="id" title="binder">suf</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="item:361" class="idref" href="#item:361"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.IM"><span class="id" title="variable">IM</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#tr:358"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#pre:359"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.TraceableVLSM.html#item:361"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#suf:360"><span class="id" title="variable">suf</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.TraceableVLSM.html#P:353"><span class="id" title="variable">P</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#is:357"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#pre:359"><span class="id" title="variable">pre</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#P:353"><span class="id" title="variable">P</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.TraceableVLSM.html#item:361"><span class="id" title="variable">item</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_state_to_trace"><span class="id" title="definition">composite_state_to_trace</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">choose</span> <span class="id" title="var">Hwell</span> <span class="id" title="var">HchooseP</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="keyword">is</span> <span class="id" title="var">tr</span> <span class="id" title="var">Heqis_tr</span> <span class="id" title="var">pre</span> <span class="id" title="var">suf</span> <span class="id" title="var">item</span> <span class="id" title="var">Heqtr</span> <span class="id" title="var">Heqv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="keyword">is</span> <span class="id" title="var">tr</span> <span class="id" title="var">Heqis_tr</span> <span class="id" title="var">pre</span> <span class="id" title="var">suf</span> <span class="id" title="var">item</span> <span class="id" title="var">Heqtr</span> <span class="id" title="var">Heqv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="method">NoDup_enum</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hnodup</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hinitial</span> : <a class="idref" href="VLSM.Core.TraceableVLSM.html#not_in_indices_initial_prop"><span class="id" title="definition">not_in_indices_initial_prop</span></a> <span class="id" title="var">s'</span> (<span class="id" title="method">enum</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">contra</span>; <span class="id" title="var">contradict</span> <span class="id" title="var">contra</span>; <span class="id" title="tactic">apply</span> <span class="id" title="method">elem_of_enum</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Hinitial</span>; <span class="id" title="tactic">generalize</span> (<span class="id" title="method">enum</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition.index"><span class="id" title="variable">index</span></a>); <span class="id" title="tactic">intro</span> <span class="id" title="var">indices</span>; <span class="id" title="var">revert</span> <span class="id" title="var">Hwell</span> <span class="id" title="var">HchooseP</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">apply_funelim</span> (<a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace"><span class="id" title="definition">indexed_composite_state_to_trace</span></a> <span class="id" title="var">choose</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">indices</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">choose</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">indices</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqis_tr</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">pre</span> | ..];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">choose</span> <span class="id" title="var">s'</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">idx</span> <span class="id" title="var">indices</span> (<span class="id" title="var">j</span>, <span class="id" title="var">nj</span>); <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">item</span> <span class="id" title="var">s</span> <span class="id" title="var">Hdestruct</span> <span class="id" title="var">Hchoice</span> <span class="id" title="keyword">is</span> <span class="id" title="var">tr</span> <span class="id" title="var">Heq</span> ? <span class="id" title="var">_</span> <span class="id" title="var">_</span> ? ? ? ? ? ? [= &lt;- &lt;-] **;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_preserves_not_in_indices_initial"><span class="id" title="lemma">composite_tv_state_destructor_preserves_not_in_indices_initial</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hinitial</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hinitials</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="var">done</span>..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ListExtras.destruct_list_last</span> <span class="id" title="var">suf</span> <span class="id" title="var">suf'</span> <span class="id" title="var">last_suf</span> <span class="id" title="var">Heqsuf</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">suf</span>; <span class="id" title="var">simplify_list_eq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hind</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">item0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">s'</span>) <span class="id" title="keyword">as</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_destination"><span class="id" title="lemma">composite_tv_state_destructor_destination</span></a>, <span class="id" title="lemma">elem_of_list_lookup_2</span>; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#indexed_composite_state_to_trace_last"><span class="id" title="lemma">indexed_composite_state_to_trace_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqv</span> <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">HchooseP</span>; [<span class="id" title="var">done</span> | <span class="id" title="var">done</span> | | <span class="id" title="var">done</span> | <span class="id" title="var">done</span> | <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">j</span> <span class="id" title="notation">∈</span> <span class="id" title="var">idx</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">indices</span>)); [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Hinitial</span>, <a class="idref" href="VLSM.Core.TraceableVLSM.html#composite_tv_state_destructor_initial"><span class="id" title="lemma">composite_tv_state_destructor_initial</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">clear</span> -<span class="id" title="var">Hdestruct</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">n</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdestruct</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqis_tr</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">pre</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hdestruct</span> <span class="id" title="var">_</span> <span class="id" title="var">Hj</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> -&gt; <span class="id" title="var">Hind</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> **.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#set_remove_preserves_not_in_indices_initial"><span class="id" title="lemma">set_remove_preserves_not_in_indices_initial</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hinitial</span>; [| <span class="id" title="var">done</span>..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Lib.StdppListSet.html#set_remove_nodup"><span class="id" title="lemma">StdppListSet.set_remove_nodup</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">a</span> := <span class="id" title="var">j</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hnodup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hind</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqis_tr</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">pre</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.TraceableVLSM.html#sec_traceable_vlsm_composition"><span class="id" title="section">sec_traceable_vlsm_composition</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr">coqdoc</a> and improved with <a href="https://github.com/palmskog/coqdocjs">CoqdocJS</a> as adapted for <a href="https://github.com/coq-community">coq-community</a>
</div>
</div>
</body>

</html>
