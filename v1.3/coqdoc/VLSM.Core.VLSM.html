<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename">
	<script>
	  if (document.title === "Table of Contents") {
	      document.write("<a href='map.svg'>File dependency graph</a>");
	  } else if (document.title !== "Index") {
              document.write("<a href='" + document.title + ".svg'>" + document.title + " dependency graph</a>");
	  }
	</script>
      </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./../..">Project Website</a>
      <a href="./indexpage.html">Index</a>
      <a href="./toc.html">Table of Contents</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Lib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Lib.Itauto.html#"><span class="id" title="library">Itauto</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">stdpp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">prelude</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.Streams.html#"><span class="id" title="library">Streams</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Lib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Lib.Preamble.html#"><span class="id" title="library">Preamble</span></a> <a class="idref" href="VLSM.Lib.ListExtras.html#"><span class="id" title="library">ListExtras</span></a> <a class="idref" href="VLSM.Lib.StreamExtras.html#"><span class="id" title="library">StreamExtras</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab78"></a><h1 class="section">Core: VLSM Basics</h1>


<div class="paragraph"> </div>

  This module provides basic VLSM infrastructure.

<div class="paragraph"> </div>

<a id="lab79"></a><h2 class="section">VLSM definition</h2>

<div class="paragraph"> </div>

<a id="lab80"></a><h3 class="section">The type of a VLSM</h3>


<div class="paragraph"> </div>

  The type of a VLSM is a triple consisting of the underlying types of
  messages, states, and labels.

<div class="paragraph"> </div>

  In Coq it is defined as a record taking <code>message</code> as parameter and having
  <span class="inlinecode"><a class="idref" href="VLSM.Examples.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a></span> and <span class="inlinecode"><a class="idref" href="VLSM.Examples.ELMO.BaseELMO.html#label"><span class="id" title="projection">label</span></a></span> as fields.  <code>message</code> is a parameter to allow it to be
  easily shared by multiple VLSMs during composition.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Record</span> <a id="VLSMType" class="idref" href="#VLSMType"><span class="id" title="record">VLSMType</span></a> (<a id="message:1" class="idref" href="#message:1"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>) : <span class="id" title="keyword">Type</span> :=<br/>
{<br/>
&nbsp;&nbsp;<a id="state" class="idref" href="#state"><span class="id" title="projection">state</span></a> : <span class="id" title="keyword">Type</span>;<br/>
&nbsp;&nbsp;<a id="label" class="idref" href="#label"><span class="id" title="projection">label</span></a> : <span class="id" title="keyword">Type</span>;<br/>
}.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> {<span class="id" title="var">_</span>} <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> {<span class="id" title="var">_</span>} <span class="id" title="var">_</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab81"></a><h3 class="section">VLSM class definition</h3>


<div class="paragraph"> </div>

  <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#VLSMMachine"><span class="id" title="record">VLSMMachine</span></a></span> is parameterized by a <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#VLSMType"><span class="id" title="record">VLSMType</span></a></span>, and contains the
  remaining parameters to define a VLSM over the given types.
  These are the properties for initial states (<span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a></span>)
  and initial messages (<span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a></span>), from which we can
  immediately define the types <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#initial_state"><span class="id" title="projection">initial_state</span></a></span> (as <span class="inlinecode"><a class="idref" href="VLSM.Examples.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a></span>s having
  the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a></span>erty) and <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#initial_message"><span class="id" title="projection">initial_message</span></a></span> (as <code>message</code>s
  having the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a></span>erty), a witness <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#s0"><span class="id" title="projection">s0</span></a></span> that the
  <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#initial_state"><span class="id" title="projection">initial_state</span></a></span> is inhabited, and the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a></span> function and
  <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a></span>ity predicate.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Record</span> <a id="VLSMMachine" class="idref" href="#VLSMMachine"><span class="id" title="record">VLSMMachine</span></a> {<a id="message:5" class="idref" href="#message:5"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>} (<a id="T:6" class="idref" href="#T:6"><span class="id" title="binder">T</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMType"><span class="id" title="record">VLSMType</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:5"><span class="id" title="variable">message</span></a>) : <span class="id" title="keyword">Type</span> :=<br/>
{<br/>
&nbsp;&nbsp;<a id="initial_state_prop" class="idref" href="#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#T:6"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>;<br/>
&nbsp;&nbsp;<a id="initial_state" class="idref" href="#initial_state"><span class="id" title="projection">initial_state</span></a> : <span class="id" title="keyword">Type</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">{</span></a><a id="s:9" class="idref" href="#s:9"><span class="id" title="binder">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">:</span></a> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#T:6"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">|</span></a> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop:8"><span class="id" title="method">initial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:9"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">}</span></a>;<br/>
&nbsp;&nbsp;<a id="s0" class="idref" href="#s0"><span class="id" title="projection">s0</span></a> : <span class="id" title="class">Inhabited</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state:10"><span class="id" title="method">initial_state</span></a>;<br/>
&nbsp;&nbsp;<a id="initial_message_prop" class="idref" href="#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#message:5"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>;<br/>
&nbsp;&nbsp;<a id="initial_message" class="idref" href="#initial_message"><span class="id" title="projection">initial_message</span></a> : <span class="id" title="keyword">Type</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">{</span></a><a id="m:13" class="idref" href="#m:13"><span class="id" title="binder">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">:</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:5"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">|</span></a> <a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop:12"><span class="id" title="method">initial_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:13"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">}</span></a>;<br/>
&nbsp;&nbsp;<a id="transition" class="idref" href="#transition"><span class="id" title="projection">transition</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#T:6"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#T:6"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:5"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#T:6"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:5"><span class="id" title="variable">message</span></a>;<br/>
&nbsp;&nbsp;<a id="valid" class="idref" href="#valid"><span class="id" title="projection">valid</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#T:6"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#T:6"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:5"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>;<br/>
}.<br/>

<br/>
<span class="comment">(*&nbsp;The&nbsp;&amp;&nbsp;is&nbsp;a&nbsp;"bidirectionality&nbsp;hint",&nbsp;so&nbsp;that&nbsp;typechecking<br/>
&nbsp;&nbsp;&nbsp;a&nbsp;VLSMMachine&nbsp;record&nbsp;definition&nbsp;will&nbsp;try&nbsp;to&nbsp;use&nbsp;the&nbsp;expected<br/>
&nbsp;&nbsp;&nbsp;result&nbsp;type&nbsp;to&nbsp;determine&nbsp;&lt;&lt;T&gt;&gt;&nbsp;before&nbsp;typechecking&nbsp;the&nbsp;fields.<br/>
&nbsp;&nbsp;&nbsp;Without&nbsp;this,&nbsp;the&nbsp;types&nbsp;of&nbsp;the&nbsp;values&nbsp;given&nbsp;for&nbsp;the&nbsp;fields&nbsp;would<br/>
&nbsp;&nbsp;&nbsp;have&nbsp;to&nbsp;be&nbsp;written&nbsp;so&nbsp;they&nbsp;only&nbsp;mention&nbsp;the&nbsp;state&nbsp;and&nbsp;label&nbsp;type<br/>
&nbsp;&nbsp;&nbsp;in&nbsp;ways&nbsp;that&nbsp;can&nbsp;be&nbsp;matched&nbsp;with&nbsp;<span class="inlinecode"><span class="id" title="var">state</span></span> <span class="inlinecode">?<span class="id" title="var">T</span></span>&nbsp;and&nbsp;<span class="inlinecode"><span class="id" title="var">label</span></span> <span class="inlinecode">?<span class="id" title="var">T</span></span>.<br/>
*)</span><br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#Build_VLSMMachine"><span class="id" title="constructor">Build_VLSMMachine</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> {<span class="id" title="var">message</span> <span class="id" title="var">T</span>} <span class="id" title="var">VLSMMachine</span> <span class="id" title="var">_</span>, {<span class="id" title="var">message</span> <span class="id" title="var">T</span> <span class="id" title="var">VLSMMachine</span>} <span class="id" title="var">_</span> : <span class="id" title="tactic">rename</span>.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state"><span class="id" title="projection">initial_state</span></a> {<span class="id" title="var">message</span> <span class="id" title="var">T</span>} <span class="id" title="var">VLSMMachine</span> : <span class="id" title="tactic">rename</span>.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a> {<span class="id" title="var">message</span> <span class="id" title="var">T</span>} <span class="id" title="var">VLSMMachine</span> <span class="id" title="var">_</span>, {<span class="id" title="var">message</span> <span class="id" title="var">T</span> <span class="id" title="var">VLSMMachine</span>} <span class="id" title="var">_</span> : <span class="id" title="tactic">rename</span>.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_message"><span class="id" title="projection">initial_message</span></a> {<span class="id" title="var">message</span> <span class="id" title="var">T</span>} <span class="id" title="var">VLSMMachine</span> : <span class="id" title="tactic">rename</span>.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> {<span class="id" title="var">message</span> <span class="id" title="var">T</span>} <span class="id" title="var">VLSMMachine</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>, {<span class="id" title="var">message</span> <span class="id" title="var">T</span> <span class="id" title="var">VLSMMachine</span>} <span class="id" title="var">_</span> <span class="id" title="var">_</span> : <span class="id" title="tactic">rename</span>.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a> {<span class="id" title="var">message</span> <span class="id" title="var">T</span>} <span class="id" title="var">VLSMMachine</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>, {<span class="id" title="var">message</span> <span class="id" title="var">T</span> <span class="id" title="var">VLSMMachine</span>} <span class="id" title="var">_</span> <span class="id" title="var">_</span> : <span class="id" title="tactic">rename</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="option_initial_message_prop" class="idref" href="#option_initial_message_prop"><span class="id" title="definition">option_initial_message_prop</span></a><br/>
&nbsp;&nbsp;{<a id="message:17" class="idref" href="#message:17"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>} {<a id="T:18" class="idref" href="#T:18"><span class="id" title="binder">T</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMType"><span class="id" title="record">VLSMType</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:17"><span class="id" title="variable">message</span></a>} (<a id="M:19" class="idref" href="#M:19"><span class="id" title="binder">M</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMMachine"><span class="id" title="record">VLSMMachine</span></a> <a class="idref" href="VLSM.Core.VLSM.html#T:18"><span class="id" title="variable">T</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:17"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">from_option</span> (@<a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.VLSM.html#M:19"><span class="id" title="variable">M</span></a>) <span class="id" title="notation">True</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="decidable_initial_messages_prop" class="idref" href="#decidable_initial_messages_prop"><span class="id" title="definition">decidable_initial_messages_prop</span></a><br/>
&nbsp;&nbsp;{<a id="message:20" class="idref" href="#message:20"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>} {<a id="T:21" class="idref" href="#T:21"><span class="id" title="binder">T</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMType"><span class="id" title="record">VLSMType</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:20"><span class="id" title="variable">message</span></a>} (<a id="M:22" class="idref" href="#M:22"><span class="id" title="binder">M</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMMachine"><span class="id" title="record">VLSMMachine</span></a> <a class="idref" href="VLSM.Core.VLSM.html#T:21"><span class="id" title="variable">T</span></a>) : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="m:23" class="idref" href="#m:23"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#message:20"><span class="id" title="variable">message</span></a><span class="id" title="notation">),</span> <span class="id" title="class">Decision</span> (@<a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.VLSM.html#M:22"><span class="id" title="variable">M</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:23"><span class="id" title="variable">m</span></a>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab82"></a><h3 class="section">VLSM type definition</h3>


<div class="paragraph"> </div>

  For technical reasons, e.g., the need to easily talk about VLSMs over
  the same set of messages and about VLSMs of the same type (over the same
  set of messages, labels and states), the VLSM definition is split into
  two parts, <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#VLSMType"><span class="id" title="record">VLSMType</span></a></span> and <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#VLSMMachine"><span class="id" title="record">VLSMMachine</span></a></span>, which are packaged together by
  the following definition.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Record</span> <a id="VLSM" class="idref" href="#VLSM"><span class="id" title="record">VLSM</span></a> (<a id="message:24" class="idref" href="#message:24"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>) : <span class="id" title="keyword">Type</span> := <span class="id" title="var">mk_vlsm</span><br/>
{<br/>
&nbsp;&nbsp;<a id="vlsm_type" class="idref" href="#vlsm_type"><span class="id" title="projection">vlsm_type</span></a> :&gt; <a class="idref" href="VLSM.Core.VLSM.html#VLSMType"><span class="id" title="record">VLSMType</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:24"><span class="id" title="variable">message</span></a>;<br/>
&nbsp;&nbsp;<a id="vlsm_machine" class="idref" href="#vlsm_machine"><span class="id" title="projection">vlsm_machine</span></a> :&gt; <a class="idref" href="VLSM.Core.VLSM.html#VLSMMachine"><span class="id" title="record">VLSMMachine</span></a> <a class="idref" href="VLSM.Core.VLSM.html#vlsm_type:26"><span class="id" title="method">vlsm_type</span></a>;<br/>
}.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#vlsm_type"><span class="id" title="projection">vlsm_type</span></a> [<span class="id" title="var">message</span>] <span class="id" title="var">v</span>.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#vlsm_machine"><span class="id" title="projection">vlsm_machine</span></a> [<span class="id" title="var">message</span>] <span class="id" title="var">v</span>.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#mk_vlsm"><span class="id" title="constructor">mk_vlsm</span></a> [<span class="id" title="var">message</span>] [<span class="id" title="var">vlsm_type</span>] <span class="id" title="var">vlsm_machine</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_traces" class="idref" href="#sec_traces"><span class="id" title="section">sec_traces</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;{<a id="message:28" class="idref" href="#message:28"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;{<a id="T:29" class="idref" href="#T:29"><span class="id" title="binder">T</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMType"><span class="id" title="record">VLSMType</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:28"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;.<br/>

<br/>
</div>

<div class="doc">
<a id="lab83"></a><h2 class="section">Traces</h2>


<div class="paragraph"> </div>

  We introduce the concept of a trace to formalize an execution of the protocol.
  It is abstracted as a pair <code>(start, steps)</code> where <code>start</code> is a state
  and <code>steps</code> is a tuple of objects which fully describe the transitions
  underwent during execution. Notably, <code>steps</code> might be infinite.

<div class="paragraph"> </div>

  In Coq, we can define these objects (which we name <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a></span>s) as consisting of:
<ul class="doclist">
<li> the <span class="inlinecode"><a class="idref" href="VLSM.Examples.ELMO.BaseELMO.html#label"><span class="id" title="projection">label</span></a></span> <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#l"><span class="id" title="projection">l</span></a></span>

</li>
<li> the (optional) <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a></span> <code>message</code>

</li>
<li> the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a></span> <span class="inlinecode"><a class="idref" href="VLSM.Examples.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a></span> of the transition

</li>
<li> the (optional) <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a></span> <code>message</code> generated by the transition

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Record</span> <a id="transition_item" class="idref" href="#transition_item"><span class="id" title="record">transition_item</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
{<br/>
&nbsp;&nbsp;<a id="l" class="idref" href="#l"><span class="id" title="projection">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_traces.T"><span class="id" title="variable">T</span></a>;<br/>
&nbsp;&nbsp;<a id="input" class="idref" href="#input"><span class="id" title="projection">input</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_traces.message"><span class="id" title="variable">message</span></a>;<br/>
&nbsp;&nbsp;<a id="destination" class="idref" href="#destination"><span class="id" title="projection">destination</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_traces.T"><span class="id" title="variable">T</span></a>;<br/>
&nbsp;&nbsp;<a id="output" class="idref" href="#output"><span class="id" title="projection">output</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_traces.message"><span class="id" title="variable">message</span></a>;<br/>
}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="field_selector" class="idref" href="#field_selector"><span class="id" title="definition">field_selector</span></a><br/>
&nbsp;&nbsp;(<a id="field:35" class="idref" href="#field:35"><span class="id" title="binder">field</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_traces.message"><span class="id" title="variable">message</span></a>) (<a id="m:36" class="idref" href="#m:36"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#sec_traces.message"><span class="id" title="variable">message</span></a>) (<a id="item:37" class="idref" href="#item:37"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#field:35"><span class="id" title="variable">field</span></a> <a class="idref" href="VLSM.Core.VLSM.html#item:37"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:36"><span class="id" title="variable">m</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="item_sends_or_receives" class="idref" href="#item_sends_or_receives"><span class="id" title="definition">item_sends_or_receives</span></a> (<a id="m:38" class="idref" href="#m:38"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#sec_traces.message"><span class="id" title="variable">message</span></a>) (<a id="item:39" class="idref" href="#item:39"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a> <a class="idref" href="VLSM.Core.VLSM.html#item:39"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:38"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="VLSM.Core.VLSM.html#item:39"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:38"><span class="id" title="variable">m</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="trace_has_message" class="idref" href="#trace_has_message"><span class="id" title="definition">trace_has_message</span></a><br/>
&nbsp;&nbsp;(<a id="message_selector:40" class="idref" href="#message_selector:40"><span class="id" title="binder">message_selector</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#sec_traces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="msg:41" class="idref" href="#msg:41"><span class="id" title="binder">msg</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#sec_traces.message"><span class="id" title="variable">message</span></a>) (<a id="tr:42" class="idref" href="#tr:42"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Exists"><span class="id" title="inductive">List.Exists</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#message_selector:40"><span class="id" title="variable">message_selector</span></a> <a class="idref" href="VLSM.Core.VLSM.html#msg:41"><span class="id" title="variable">msg</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#tr:42"><span class="id" title="variable">tr</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trace_has_message_prefix" class="idref" href="#trace_has_message_prefix"><span class="id" title="lemma">trace_has_message_prefix</span></a><br/>
&nbsp;&nbsp;(<a id="message_selector:43" class="idref" href="#message_selector:43"><span class="id" title="binder">message_selector</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#sec_traces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="msg:44" class="idref" href="#msg:44"><span class="id" title="binder">msg</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#sec_traces.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="prefix:45" class="idref" href="#prefix:45"><span class="id" title="binder">prefix</span></a> <a id="suffix:46" class="idref" href="#suffix:46"><span class="id" title="binder">suffix</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#trace_has_message"><span class="id" title="definition">trace_has_message</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message_selector:43"><span class="id" title="variable">message_selector</span></a> <a class="idref" href="VLSM.Core.VLSM.html#msg:44"><span class="id" title="variable">msg</span></a> <a class="idref" href="VLSM.Core.VLSM.html#prefix:45"><span class="id" title="variable">prefix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#trace_has_message"><span class="id" title="definition">trace_has_message</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message_selector:43"><span class="id" title="variable">message_selector</span></a> <a class="idref" href="VLSM.Core.VLSM.html#msg:44"><span class="id" title="variable">msg</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#prefix:45"><span class="id" title="variable">prefix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Core.VLSM.html#suffix:46"><span class="id" title="variable">suffix</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intro</span> <span class="id" title="var">Hprefix</span>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">Exists_app</span>; <span class="id" title="tactic">left</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trace_has_message_observed_iff" class="idref" href="#trace_has_message_observed_iff"><span class="id" title="lemma">trace_has_message_observed_iff</span></a><br/>
&nbsp;&nbsp;(<a id="m:47" class="idref" href="#m:47"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#sec_traces.message"><span class="id" title="variable">message</span></a>) (<a id="tr:48" class="idref" href="#tr:48"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hobserved:49" class="idref" href="#Hobserved:49"><span class="id" title="binder">Hobserved</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#trace_has_message"><span class="id" title="definition">trace_has_message</span></a> <a class="idref" href="VLSM.Core.VLSM.html#item_sends_or_receives"><span class="id" title="definition">item_sends_or_receives</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:47"><span class="id" title="variable">m</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:48"><span class="id" title="variable">tr</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#trace_has_message"><span class="id" title="definition">trace_has_message</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#field_selector"><span class="id" title="definition">field_selector</span></a> <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#m:47"><span class="id" title="variable">m</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:48"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#trace_has_message"><span class="id" title="definition">trace_has_message</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#field_selector"><span class="id" title="definition">field_selector</span></a> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#m:47"><span class="id" title="variable">m</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:48"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#trace_has_message"><span class="id" title="definition">trace_has_message</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">rewrite</span> !<span class="id" title="lemma">Exists_exists</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">firstorder</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Defines a message received but not sent by within the trace. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="trace_received_not_sent_before_or_after" class="idref" href="#trace_received_not_sent_before_or_after"><span class="id" title="definition">trace_received_not_sent_before_or_after</span></a><br/>
&nbsp;&nbsp;(<a id="tr:50" class="idref" href="#tr:50"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) (<a id="m:51" class="idref" href="#m:51"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#sec_traces.message"><span class="id" title="variable">message</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#trace_has_message"><span class="id" title="definition">trace_has_message</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#field_selector"><span class="id" title="definition">field_selector</span></a> <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#m:51"><span class="id" title="variable">m</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:50"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="VLSM.Core.VLSM.html#trace_has_message"><span class="id" title="definition">trace_has_message</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#field_selector"><span class="id" title="definition">field_selector</span></a> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#m:51"><span class="id" title="variable">m</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:50"><span class="id" title="variable">tr</span></a>.<br/>

<br/>
</div>

<div class="doc">
States that a property holds for all messages received but not sent by a trace. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="trace_received_not_sent_before_or_after_invariant" class="idref" href="#trace_received_not_sent_before_or_after_invariant"><span class="id" title="definition">trace_received_not_sent_before_or_after_invariant</span></a><br/>
&nbsp;&nbsp;(<a id="tr:52" class="idref" href="#tr:52"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) (<a id="P:53" class="idref" href="#P:53"><span class="id" title="binder">P</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#sec_traces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="m:54" class="idref" href="#m:54"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#sec_traces.message"><span class="id" title="variable">message</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.VLSM.html#trace_received_not_sent_before_or_after"><span class="id" title="definition">trace_received_not_sent_before_or_after</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:52"><span class="id" title="variable">tr</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:54"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#P:53"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:54"><span class="id" title="variable">m</span></a>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="Trace" class="idref" href="#Trace"><span class="id" title="definition, inductive"><span id="Trace_rect" class="id"><span id="Trace_ind" class="id"><span id="Trace_rec" class="id"><span id="Trace_sind" class="id">Trace</span></span></span></span></span></a> : <span class="id" title="keyword">Type</span> :=<br/>
| <a id="Finite" class="idref" href="#Finite"><span class="id" title="constructor">Finite</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_traces.T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#Trace:55"><span class="id" title="inductive">Trace</span></a><br/>
| <a id="Infinite" class="idref" href="#Infinite"><span class="id" title="constructor">Infinite</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_traces.T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.Streams.html#Stream"><span class="id" title="inductive">Stream</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#Trace:55"><span class="id" title="inductive">Trace</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="trace_first" class="idref" href="#trace_first"><span class="id" title="definition">trace_first</span></a> (<a id="tr:57" class="idref" href="#tr:57"><span class="id" title="binder">tr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#Trace"><span class="id" title="inductive">Trace</span></a>) : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_traces.T"><span class="id" title="variable">T</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Core.VLSM.html#tr:57"><span class="id" title="variable">tr</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSM.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">s</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSM.html#Infinite"><span class="id" title="constructor">Infinite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">s</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="finite_trace_last" class="idref" href="#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> (<a id="si:59" class="idref" href="#si:59"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_traces.T"><span class="id" title="variable">T</span></a>) (<a id="tr:60" class="idref" href="#tr:60"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_traces.T"><span class="id" title="variable">T</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">List.last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:60"><span class="id" title="variable">tr</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#si:59"><span class="id" title="variable">si</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="finite_trace_last_output" class="idref" href="#finite_trace_last_output"><span class="id" title="definition">finite_trace_last_output</span></a> (<a id="tr:61" class="idref" href="#tr:61"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_traces.message"><span class="id" title="variable">message</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">List.last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:61"><span class="id" title="variable">tr</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="finite_trace_nth" class="idref" href="#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a><br/>
&nbsp;&nbsp;(<a id="si:62" class="idref" href="#si:62"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_traces.T"><span class="id" title="variable">T</span></a>) (<a id="tr:63" class="idref" href="#tr:63"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_traces.T"><span class="id" title="variable">T</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#si:62"><span class="id" title="variable">si</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:63"><span class="id" title="variable">tr</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="trace_last" class="idref" href="#trace_last"><span class="id" title="definition">trace_last</span></a> (<a id="tr:64" class="idref" href="#tr:64"><span class="id" title="binder">tr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#Trace"><span class="id" title="inductive">Trace</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_traces.T"><span class="id" title="variable">T</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Core.VLSM.html#tr:64"><span class="id" title="variable">tr</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSM.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">ls</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <span class="id" title="var">s</span> <span class="id" title="var">ls</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSM.html#Infinite"><span class="id" title="constructor">Infinite</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
  This function extracts the nth state of a trace, where the sequence of
  states of a trace is obtained by appending the all destination
  states in the transition list/stream to the initial state of the trace.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="trace_nth" class="idref" href="#trace_nth"><span class="id" title="definition">trace_nth</span></a> (<a id="tr:66" class="idref" href="#tr:66"><span class="id" title="binder">tr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#Trace"><span class="id" title="inductive">Trace</span></a>) (<a id="n:67" class="idref" href="#n:67"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_traces.T"><span class="id" title="variable">T</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Core.VLSM.html#tr:66"><span class="id" title="variable">tr</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSM.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">ls</span> =&gt; <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> <span class="id" title="var">s</span> <span class="id" title="var">ls</span> <a class="idref" href="VLSM.Core.VLSM.html#n:67"><span class="id" title="variable">n</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSM.html#Infinite"><span class="id" title="constructor">Infinite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">st</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.Streams.html#Str_nth"><span class="id" title="definition">Str_nth</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n:67"><span class="id" title="variable">n</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.Streams.html#Cons"><span class="id" title="constructor">Cons</span></a> <span class="id" title="var">s</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.Streams.html#map"><span class="id" title="definition">Streams.map</span></a> <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">st</span>)))<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.VLSM.html#sec_traces"><span class="id" title="section">sec_traces</span></a>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#Trace"><span class="id" title="inductive">Trace</span></a> {<span class="id" title="var">message</span> <span class="id" title="var">T</span>}, {<span class="id" title="var">message</span>} <span class="id" title="var">T</span>.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> {<span class="id" title="var">message</span>} {<span class="id" title="var">T</span>} , {<span class="id" title="var">message</span>} <span class="id" title="var">T</span>.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#Build_transition_item"><span class="id" title="constructor">Build_transition_item</span></a> {<span class="id" title="var">message</span> <span class="id" title="var">T</span>}, {<span class="id" title="var">message</span>} <span class="id" title="var">T</span>.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#field_selector"><span class="id" title="definition">field_selector</span></a> {<span class="id" title="var">_</span>} {<span class="id" title="var">T</span>} <span class="id" title="var">_</span> <span class="id" title="var">m</span> <span class="id" title="var">item</span> /.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#item_sends_or_receives"><span class="id" title="definition">item_sends_or_receives</span></a> {<span class="id" title="var">_</span>} {<span class="id" title="var">_</span>} <span class="id" title="var">m</span> <span class="id" title="var">item</span> /.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_trace_lemmas" class="idref" href="#sec_trace_lemmas"><span class="id" title="section">sec_trace_lemmas</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;[<a id="message:69" class="idref" href="#message:69"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>]<br/>
&nbsp;&nbsp;[<a id="T:70" class="idref" href="#T:70"><span class="id" title="binder">T</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMType"><span class="id" title="record">VLSMType</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:69"><span class="id" title="variable">message</span></a>]<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="last_error_destination_last" class="idref" href="#last_error_destination_last"><span class="id" title="lemma">last_error_destination_last</span></a><br/>
&nbsp;&nbsp;(<a id="tr:71" class="idref" href="#tr:71"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="s:72" class="idref" href="#s:72"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_trace_lemmas.T"><span class="id" title="variable">T</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hlast:73" class="idref" href="#Hlast:73"><span class="id" title="binder">Hlast</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option_map"><span class="id" title="definition">option_map</span></a> <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> (<a class="idref" href="VLSM.Lib.ListExtras.html#last_error"><span class="id" title="definition">last_error</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:71"><span class="id" title="variable">tr</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:72"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;(<a id="default:74" class="idref" href="#default:74"><span class="id" title="binder">default</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_trace_lemmas.T"><span class="id" title="variable">T</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#default:74"><span class="id" title="variable">default</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:71"><span class="id" title="variable">tr</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:72"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option_map"><span class="id" title="definition">option_map</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlast</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Lib.ListExtras.html#last_error"><span class="id" title="definition">last_error</span></a> <span class="id" title="var">tr</span>) <span class="id" title="var">eqn</span>: <span class="id" title="var">eq</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlast</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Lib.ListExtras.html#last_error"><span class="id" title="definition">last_error</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">tr</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.ListExtras.html#last_map"><span class="id" title="lemma">last_map</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_trace_last_cons" class="idref" href="#finite_trace_last_cons"><span class="id" title="lemma">finite_trace_last_cons</span></a><br/>
&nbsp;&nbsp;(<a id="s:75" class="idref" href="#s:75"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_trace_lemmas.T"><span class="id" title="variable">T</span></a>) (<a id="x:76" class="idref" href="#x:76"><span class="id" title="binder">x</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_trace_lemmas.T"><span class="id" title="variable">T</span></a>) (<a id="tl:77" class="idref" href="#tl:77"><span class="id" title="binder">tl</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_trace_lemmas.T"><span class="id" title="variable">T</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:75"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#x:76"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tl:77"><span class="id" title="variable">tl</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#x:76"><span class="id" title="variable">x</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#tl:77"><span class="id" title="variable">tl</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map_cons"><span class="id" title="lemma">map_cons</span></a>, <a class="idref" href="VLSM.Lib.ListExtras.html#unroll_last"><span class="id" title="lemma">unroll_last</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_trace_last_nil" class="idref" href="#finite_trace_last_nil"><span class="id" title="lemma">finite_trace_last_nil</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:78" class="idref" href="#s:78"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_trace_lemmas.T"><span class="id" title="variable">T</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:78"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:78"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">done</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_trace_last_app" class="idref" href="#finite_trace_last_app"><span class="id" title="lemma">finite_trace_last_app</span></a><br/>
&nbsp;&nbsp;(<a id="s:79" class="idref" href="#s:79"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_trace_lemmas.T"><span class="id" title="variable">T</span></a>) (<a id="t1:80" class="idref" href="#t1:80"><span class="id" title="binder">t1</span></a> <a id="t2:81" class="idref" href="#t2:81"><span class="id" title="binder">t2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_trace_lemmas.T"><span class="id" title="variable">T</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:79"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#t1:80"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Core.VLSM.html#t2:81"><span class="id" title="variable">t2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:79"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#t1:80"><span class="id" title="variable">t1</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#t2:81"><span class="id" title="variable">t2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>, <a class="idref" href="VLSM.Lib.ListExtras.html#last_app"><span class="id" title="lemma">last_app</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_trace_last_is_last" class="idref" href="#finite_trace_last_is_last"><span class="id" title="lemma">finite_trace_last_is_last</span></a><br/>
&nbsp;&nbsp;(<a id="s:82" class="idref" href="#s:82"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_trace_lemmas.T"><span class="id" title="variable">T</span></a>) (<a id="x:83" class="idref" href="#x:83"><span class="id" title="binder">x</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_trace_lemmas.T"><span class="id" title="variable">T</span></a>) (<a id="tl:84" class="idref" href="#tl:84"><span class="id" title="binder">tl</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_trace_lemmas.T"><span class="id" title="variable">T</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:82"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#tl:84"><span class="id" title="variable">tl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.VLSM.html#x:83"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#x:83"><span class="id" title="variable">x</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.ListExtras.html#last_app"><span class="id" title="lemma">last_app</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_trace_last_output_is_last" class="idref" href="#finite_trace_last_output_is_last"><span class="id" title="lemma">finite_trace_last_output_is_last</span></a><br/>
&nbsp;&nbsp;(<a id="x:85" class="idref" href="#x:85"><span class="id" title="binder">x</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_trace_lemmas.T"><span class="id" title="variable">T</span></a>) (<a id="tl:86" class="idref" href="#tl:86"><span class="id" title="binder">tl</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_trace_lemmas.T"><span class="id" title="variable">T</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_output"><span class="id" title="definition">finite_trace_last_output</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#tl:86"><span class="id" title="variable">tl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.VLSM.html#x:85"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="VLSM.Core.VLSM.html#x:85"><span class="id" title="variable">x</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_output"><span class="id" title="definition">finite_trace_last_output</span></a>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.ListExtras.html#last_app"><span class="id" title="lemma">last_app</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_trace_nth_first" class="idref" href="#finite_trace_nth_first"><span class="id" title="lemma">finite_trace_nth_first</span></a><br/>
&nbsp;&nbsp;(<a id="si:87" class="idref" href="#si:87"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_trace_lemmas.T"><span class="id" title="variable">T</span></a>) (<a id="tr:88" class="idref" href="#tr:88"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:87"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:88"><span class="id" title="variable">tr</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:87"><span class="id" title="variable">si</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">done</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_trace_nth_last" class="idref" href="#finite_trace_nth_last"><span class="id" title="lemma">finite_trace_nth_last</span></a><br/>
&nbsp;&nbsp;(<a id="si:89" class="idref" href="#si:89"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_trace_lemmas.T"><span class="id" title="variable">T</span></a>) (<a id="tr:90" class="idref" href="#tr:90"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:89"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:90"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:90"><span class="id" title="variable">tr</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:89"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:90"><span class="id" title="variable">tr</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a>, <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">tr</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.ListExtras.html#nth_error_last"><span class="id" title="lemma">nth_error_last</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_trace_nth_app1" class="idref" href="#finite_trace_nth_app1"><span class="id" title="lemma">finite_trace_nth_app1</span></a><br/>
&nbsp;&nbsp;(<a id="si:91" class="idref" href="#si:91"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_trace_lemmas.T"><span class="id" title="variable">T</span></a>) (<a id="t1:92" class="idref" href="#t1:92"><span class="id" title="binder">t1</span></a> <a id="t2:93" class="idref" href="#t2:93"><span class="id" title="binder">t2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) <a id="n:94" class="idref" href="#n:94"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#n:94"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="VLSM.Core.VLSM.html#t1:92"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:91"><span class="id" title="variable">si</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#t1:92"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Core.VLSM.html#t2:93"><span class="id" title="variable">t2</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#n:94"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:91"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#t1:92"><span class="id" title="variable">t1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n:94"><span class="id" title="variable">n</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hle</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_comm_cons"><span class="id" title="lemma">app_comm_cons</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#nth_error_app1"><span class="id" title="lemma">nth_error_app1</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_trace_nth_app2" class="idref" href="#finite_trace_nth_app2"><span class="id" title="lemma">finite_trace_nth_app2</span></a><br/>
&nbsp;&nbsp;(<a id="si:95" class="idref" href="#si:95"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_trace_lemmas.T"><span class="id" title="variable">T</span></a>) (<a id="t1:96" class="idref" href="#t1:96"><span class="id" title="binder">t1</span></a> <a id="t2:97" class="idref" href="#t2:97"><span class="id" title="binder">t2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) (<a id="n:98" class="idref" href="#n:98"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="VLSM.Core.VLSM.html#t1:96"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n:98"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:95"><span class="id" title="variable">si</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#t1:96"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Core.VLSM.html#t2:97"><span class="id" title="variable">t2</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#n:98"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:95"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#t1:96"><span class="id" title="variable">t1</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#t2:97"><span class="id" title="variable">t2</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#n:98"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="VLSM.Core.VLSM.html#t1:96"><span class="id" title="variable">t1</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Arith.Compare_dec.html#le_lt_eq_dec"><span class="id" title="definition">Compare_dec.le_lt_eq_dec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H</span> | &lt;-].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_comm_cons"><span class="id" title="lemma">app_comm_cons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#nth_error_app2"><span class="id" title="lemma">nth_error_app2</span></a>; <span class="id" title="tactic">simpl</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a>; [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">arith</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>; [<span class="id" title="tactic">by</span> <span class="id" title="var">exfalso</span>; <span class="id" title="var">lia</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.sub_succ_l"><span class="id" title="lemma">Nat.sub_succ_l</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <span class="id" title="var">t1</span>) <span class="id" title="var">n</span>); [| <span class="id" title="var">lia</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth_app1"><span class="id" title="lemma">finite_trace_nth_app1</span></a>, <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth_last"><span class="id" title="lemma">finite_trace_nth_last</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.sub_diag"><span class="id" title="lemma">Nat.sub_diag</span></a>, <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth_first"><span class="id" title="lemma">finite_trace_nth_first</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_trace_nth_length" class="idref" href="#finite_trace_nth_length"><span class="id" title="lemma">finite_trace_nth_length</span></a><br/>
&nbsp;&nbsp;(<a id="si:99" class="idref" href="#si:99"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_trace_lemmas.T"><span class="id" title="variable">T</span></a>) (<a id="tr:100" class="idref" href="#tr:100"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) (<a id="n:101" class="idref" href="#n:101"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="s:102" class="idref" href="#s:102"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_trace_lemmas.T"><span class="id" title="variable">T</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:99"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:100"><span class="id" title="variable">tr</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n:101"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:102"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n:101"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:100"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.ListExtras.html#nth_error_length"><span class="id" title="lemma">nth_error_length</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_trace_last_prefix" class="idref" href="#finite_trace_last_prefix"><span class="id" title="lemma">finite_trace_last_prefix</span></a><br/>
&nbsp;&nbsp;(<a id="s:103" class="idref" href="#s:103"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_trace_lemmas.T"><span class="id" title="variable">T</span></a>) (<a id="tr:104" class="idref" href="#tr:104"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) (<a id="n:105" class="idref" href="#n:105"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="s':106" class="idref" href="#s':106"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_trace_lemmas.T"><span class="id" title="variable">T</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:103"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:104"><span class="id" title="variable">tr</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n:105"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s':106"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:103"><span class="id" title="variable">s</span></a> (<span class="id" title="abbreviation">take</span> <a class="idref" href="VLSM.Core.VLSM.html#n:105"><span class="id" title="variable">n</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:104"><span class="id" title="variable">tr</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s':106"><span class="id" title="variable">s'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a>, <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#firstn_map"><span class="id" title="lemma">firstn_map</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">tr</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">tr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> [= &lt;-]; <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.ListExtras.html#take_nth_last"><span class="id" title="lemma">take_nth_last</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_trace_last_suffix" class="idref" href="#finite_trace_last_suffix"><span class="id" title="lemma">finite_trace_last_suffix</span></a><br/>
&nbsp;&nbsp;(<a id="s:107" class="idref" href="#s:107"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_trace_lemmas.T"><span class="id" title="variable">T</span></a>) (<a id="tr:108" class="idref" href="#tr:108"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) (<a id="n:109" class="idref" href="#n:109"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#n:109"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:108"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:107"><span class="id" title="variable">s</span></a> (<span class="id" title="abbreviation">drop</span> <a class="idref" href="VLSM.Core.VLSM.html#n:109"><span class="id" title="variable">n</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:108"><span class="id" title="variable">tr</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:107"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:108"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#skipn_map"><span class="id" title="lemma">skipn_map</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.ListExtras.html#drop_last"><span class="id" title="lemma">drop_last</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="unlock_finite_trace_last" class="idref" href="#unlock_finite_trace_last"><span class="id" title="lemma">unlock_finite_trace_last</span></a> (<a id="s:110" class="idref" href="#s:110"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_trace_lemmas.T"><span class="id" title="variable">T</span></a>) (<a id="tr:111" class="idref" href="#tr:111"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_trace_lemmas.T"><span class="id" title="variable">T</span></a>)) :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:110"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:111"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">List.last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:111"><span class="id" title="variable">tr</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#s:110"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">done</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.VLSM.html#sec_trace_lemmas"><span class="id" title="section">sec_trace_lemmas</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="vs0" class="idref" href="#vs0"><span class="id" title="definition">vs0</span></a> `(<a id="X:113" class="idref" href="#X:113"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a id="message:112" class="idref" href="#message:112"><span class="id" title="binder">message</span></a>) := @<span class="id" title="method">inhabitant</span> <span class="id" title="var">_</span> (@<a class="idref" href="VLSM.Core.VLSM.html#s0"><span class="id" title="projection">s0</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.VLSM.html#X:113"><span class="id" title="variable">X</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mk_vlsm_machine" class="idref" href="#mk_vlsm_machine"><span class="id" title="lemma">mk_vlsm_machine</span></a><br/>
&nbsp;&nbsp;{<a id="message:114" class="idref" href="#message:114"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;(<a id="X:115" class="idref" href="#X:115"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:114"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#mk_vlsm"><span class="id" title="constructor">mk_vlsm</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#vlsm_machine"><span class="id" title="projection">vlsm_machine</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:115"><span class="id" title="variable">X</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:115"><span class="id" title="variable">X</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_VLSM" class="idref" href="#sec_VLSM"><span class="id" title="section">sec_VLSM</span></a>.<br/>

<br/>
</div>

<div class="doc">
In this section we assume a fixed <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;{<a id="message:116" class="idref" href="#message:116"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;(<a id="X:117" class="idref" href="#X:117"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:116"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
</div>

<div class="doc">
<a id="lab84"></a><h3 class="section">Valid states and messages</h3>


<div class="paragraph"> </div>

  We further characterize certain objects as being <i>valid</i>, which means they can
  be witnessed or experienced during executions of the protocol. For example,
  a message is a <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_message"><span class="id" title="definition">valid_message</span></a></span> if there exists an execution of the protocol
  in which it is produced.

<div class="paragraph"> </div>

  We choose here to define valid states and messages together as the
  <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a></span>erty, inductively defined over the
  <span class="inlinecode"><a class="idref" href="VLSM.Examples.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a></span> <span class="inlinecode">*</span> <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a></span> <span class="inlinecode"><a class="idref" href="VLSM.Examples.ELMO.BaseELMO.html#message"><span class="id" title="projection">message</span></a></span> product type,
  as this definition avoids the need of using a mutually recursive definition.

<div class="paragraph"> </div>

  The inductive definition has three cases:
<ul class="doclist">
<li> if <code>s</code> is a <span class="inlinecode"><a class="idref" href="VLSM.Examples.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a></span> with the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a></span>erty, then <code>(s, None)</code>
    has the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a></span>erty;

</li>
<li> if <code>m</code> is a <code>message</code> with the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a></span>erty,
    then <code>(</code><span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#s0"><span class="id" title="projection">s0</span></a>,</span> <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a></span><code>m)</code> has the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a></span>erty;

</li>
<li> for all <span class="inlinecode"><a class="idref" href="VLSM.Examples.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a></span>s <code>s</code>, <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a></span>al <code>message</code> <code>om</code>, and <span class="inlinecode"><a class="idref" href="VLSM.Examples.ELMO.BaseELMO.html#label"><span class="id" title="projection">label</span></a></span> <code>l</code>:
<ul class="doclist">
<li> if there is an (optional) <code>message</code> <code>_om</code> such that <code>(s, _om)</code>
      has the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a></span>erty;

</li>
<li> and if there is a <span class="inlinecode"><a class="idref" href="VLSM.Examples.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a></span> <code>_s</code> such that <code>(_s, om)</code> has the
      <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a></span>erty;

</li>
<li> and if <code>l</code> <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a></span> <code>(s, om)</code>,

</li>
<li> then <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a></span> <code>l (s, om)</code> has the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a></span>erty.

</li>
</ul>

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a id="valid_state_message_prop" class="idref" href="#valid_state_message_prop"><span class="id" title="definition, inductive"><span id="valid_state_message_prop_ind" class="id"><span id="valid_state_message_prop_sind" class="id">valid_state_message_prop</span></span></span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="valid_initial_state_message" class="idref" href="#valid_initial_state_message"><span class="id" title="constructor">valid_initial_state_message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:120" class="idref" href="#s:120"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hs:121" class="idref" href="#Hs:121"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:120"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:122" class="idref" href="#om:122"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hom:123" class="idref" href="#Hom:123"><span class="id" title="binder">Hom</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#option_initial_message_prop"><span class="id" title="definition">option_initial_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:122"><span class="id" title="variable">om</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop:118"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:120"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:122"><span class="id" title="variable">om</span></a><br/>
| <a id="valid_generated_state_message" class="idref" href="#valid_generated_state_message"><span class="id" title="constructor">valid_generated_state_message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:124" class="idref" href="#s:124"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="_om:125" class="idref" href="#_om:125"><span class="id" title="binder">_om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hps:126" class="idref" href="#Hps:126"><span class="id" title="binder">Hps</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop:118"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:124"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#_om:125"><span class="id" title="variable">_om</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="_s:127" class="idref" href="#_s:127"><span class="id" title="binder">_s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:128" class="idref" href="#om:128"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hpm:129" class="idref" href="#Hpm:129"><span class="id" title="binder">Hpm</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop:118"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#_s:127"><span class="id" title="variable">_s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:128"><span class="id" title="variable">om</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:130" class="idref" href="#l:130"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hv:131" class="idref" href="#Hv:131"><span class="id" title="binder">Hv</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:130"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:124"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:128"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="s':132" class="idref" href="#s':132"><span class="id" title="binder">s'</span></a> <a id="om':133" class="idref" href="#om':133"><span class="id" title="binder">om'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:134" class="idref" href="#Ht:134"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:130"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:124"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:128"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':132"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':133"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop:118"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s':132"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':133"><span class="id" title="variable">om'</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="valid_initial_state" class="idref" href="#valid_initial_state"><span class="id" title="definition">valid_initial_state</span></a><br/>
&nbsp;&nbsp;[<a id="s:135" class="idref" href="#s:135"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>] (<a id="Hs:136" class="idref" href="#Hs:136"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:135"><span class="id" title="variable">s</span></a>) : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:135"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_initial_state_message"><span class="id" title="constructor">valid_initial_state_message</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:135"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#Hs:136"><span class="id" title="variable">Hs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>

<br/>
</div>

<div class="doc">
  The <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a></span>erty and the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a></span>erty are now
  definable as simple projections of the above definition.

<div class="paragraph"> </div>

  Moreover, we use these derived properties to define the corresponding
  dependent types <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state"><span class="id" title="definition">valid_state</span></a></span> and <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_message"><span class="id" title="definition">valid_message</span></a></span>.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="valid_state_prop" class="idref" href="#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> (<a id="s:137" class="idref" href="#s:137"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="om:138" class="idref" href="#om:138"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:137"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:138"><span class="id" title="variable">om</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="valid_message_prop" class="idref" href="#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> (<a id="m:139" class="idref" href="#m:139"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="s:140" class="idref" href="#s:140"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:140"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:139"><span class="id" title="variable">m</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="valid_state" class="idref" href="#valid_state"><span class="id" title="definition">valid_state</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">{</span></a><a id="s:141" class="idref" href="#s:141"><span class="id" title="binder">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">:</span></a> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">|</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:141"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">}</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="valid_message" class="idref" href="#valid_message"><span class="id" title="definition">valid_message</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">{</span></a><a id="m:142" class="idref" href="#m:142"><span class="id" title="binder">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">:</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">|</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:142"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">}</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="initial_state_is_valid" class="idref" href="#initial_state_is_valid"><span class="id" title="lemma">initial_state_is_valid</span></a><br/>
&nbsp;&nbsp;(<a id="s:143" class="idref" href="#s:143"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="Hinitial:144" class="idref" href="#Hinitial:144"><span class="id" title="binder">Hinitial</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:143"><span class="id" title="variable">s</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:143"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_initial_state_message"><span class="id" title="constructor">valid_initial_state_message</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="initial_message_is_valid" class="idref" href="#initial_message_is_valid"><span class="id" title="lemma">initial_message_is_valid</span></a><br/>
&nbsp;&nbsp;(<a id="m:145" class="idref" href="#m:145"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="Hinitial:146" class="idref" href="#Hinitial:146"><span class="id" title="binder">Hinitial</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:145"><span class="id" title="variable">m</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:145"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#vs0"><span class="id" title="definition">vs0</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_initial_state_message"><span class="id" title="constructor">valid_initial_state_message</span></a>; [<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#proj2_sig"><span class="id" title="definition">proj2_sig</span></a> |].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  As often times we work with optional valid messages, it is convenient
  to define a valid message property for optional messages.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="option_valid_message_prop" class="idref" href="#option_valid_message_prop"><span class="id" title="definition">option_valid_message_prop</span></a> (<a id="om:147" class="idref" href="#om:147"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="s:148" class="idref" href="#s:148"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:148"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:147"><span class="id" title="variable">om</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="option_valid_message_None" class="idref" href="#option_valid_message_None"><span class="id" title="lemma">option_valid_message_None</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_prop"><span class="id" title="definition">option_valid_message_prop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#vs0"><span class="id" title="definition">vs0</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_initial_state_message"><span class="id" title="constructor">valid_initial_state_message</span></a>; [<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#proj2_sig"><span class="id" title="definition">proj2_sig</span></a> |].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="option_valid_message_Some" class="idref" href="#option_valid_message_Some"><span class="id" title="lemma">option_valid_message_Some</span></a><br/>
&nbsp;&nbsp;(<a id="m:149" class="idref" href="#m:149"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="Hpm:150" class="idref" href="#Hpm:150"><span class="id" title="binder">Hpm</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:149"><span class="id" title="variable">m</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_prop"><span class="id" title="definition">option_valid_message_prop</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:149"><span class="id" title="variable">m</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hpm</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">Hpm</span>]; <span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="option_initial_message_is_valid" class="idref" href="#option_initial_message_is_valid"><span class="id" title="lemma">option_initial_message_is_valid</span></a><br/>
&nbsp;&nbsp;(<a id="om:151" class="idref" href="#om:151"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="Hinitial:152" class="idref" href="#Hinitial:152"><span class="id" title="binder">Hinitial</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#option_initial_message_prop"><span class="id" title="definition">option_initial_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:151"><span class="id" title="variable">om</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_prop"><span class="id" title="definition">option_valid_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:151"><span class="id" title="variable">om</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">om</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_Some"><span class="id" title="lemma">option_valid_message_Some</span></a>, <a class="idref" href="VLSM.Core.VLSM.html#initial_message_is_valid"><span class="id" title="lemma">initial_message_is_valid</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_None"><span class="id" title="lemma">option_valid_message_None</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  We also include the more intuitive, mutually recursive definition
  of valid states and messages.

<div class="paragraph"> </div>

  This definition has three cases for <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_message_mrec"><span class="id" title="inductive">valid_message_mrec</span></a></span>:

<div class="paragraph"> </div>

<ul class="doclist">
<li> <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a></span> is a valid message (<span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_message_mrec_None"><span class="id" title="constructor">valid_message_mrec_None</span></a></span>);

</li>
<li> if <code>m</code> is an optional <code>message</code> with the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a></span>erty,
    then it constitutes a valid message

</li>
<li> for all <span class="inlinecode"><a class="idref" href="VLSM.Examples.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a></span>s <code>st</code>, <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a></span>al <code>message</code>s <code>om</code>, and <span class="inlinecode"><a class="idref" href="VLSM.Examples.ELMO.BaseELMO.html#label"><span class="id" title="projection">label</span></a></span> <code>l</code>:
<ul class="doclist">
<li> if <code>om</code> is a valid message (<span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_message_mrec"><span class="id" title="inductive">valid_message_mrec</span></a></span>);

</li>
<li> and if <code>st</code> is a valid state (<span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_mrec"><span class="id" title="inductive">valid_state_mrec</span></a></span>);

</li>
<li> and if <code>l</code> <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a></span> <code>l (st, om)</code>;

</li>
<li> the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a></span> <code>l (st, om)</code> emits a message which has the
      <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_message_mrec"><span class="id" title="inductive">valid_message_mrec</span></a></span> property.

</li>
</ul>

</li>
</ul>

<div class="paragraph"> </div>

  There are also two cases for <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_mrec"><span class="id" title="inductive">valid_state_mrec</span></a></span>:

<div class="paragraph"> </div>

<ul class="doclist">
<li> if <code>s</code> is a <span class="inlinecode"><a class="idref" href="VLSM.Examples.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a></span> with the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a></span>erty, then it has the
    <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_mrec"><span class="id" title="inductive">valid_state_mrec</span></a></span>;

</li>
<li> for all <span class="inlinecode"><a class="idref" href="VLSM.Examples.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a></span>s <code>st</code>, <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a></span>al <code>message</code>s <code>om</code>, and <span class="inlinecode"><a class="idref" href="VLSM.Examples.ELMO.BaseELMO.html#label"><span class="id" title="projection">label</span></a></span> <code>l</code>:
<ul class="doclist">
<li> if <code>st</code> is a valid state (<span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_mrec"><span class="id" title="inductive">valid_state_mrec</span></a></span>);

</li>
<li> and if <code>om</code> is a valid message (<span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_message_mrec"><span class="id" title="inductive">valid_message_mrec</span></a></span>);

</li>
<li> and if <code>l</code> <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a></span> <code>l (st, om)</code>;

</li>
<li> then the state resulting from <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a></span> <code>l (st, om)</code> has the
      <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_mrec"><span class="id" title="inductive">valid_state_mrec</span></a></span> property.

</li>
</ul>

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a id="valid_message_mrec" class="idref" href="#valid_message_mrec"><span class="id" title="definition, inductive"><span id="valid_message_mrec_ind" class="id"><span id="valid_message_mrec_sind" class="id">valid_message_mrec</span></span></span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="valid_message_mrec_None" class="idref" href="#valid_message_mrec_None"><span class="id" title="constructor">valid_message_mrec_None</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_message_mrec:153"><span class="id" title="inductive">valid_message_mrec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
| <a id="valid_message_mrec_initial" class="idref" href="#valid_message_mrec_initial"><span class="id" title="constructor">valid_message_mrec_initial</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="m:157" class="idref" href="#m:157"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:157"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid_message_mrec:153"><span class="id" title="inductive">valid_message_mrec</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:157"><span class="id" title="variable">m</span></a>)<br/>
| <a id="valid_message_mrec_generated" class="idref" href="#valid_message_mrec_generated"><span class="id" title="constructor">valid_message_mrec_generated</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">{</span><a id="l:158" class="idref" href="#l:158"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>} {<a id="om:159" class="idref" href="#om:159"><span class="id" title="binder">om</span></a> <a id="om':160" class="idref" href="#om':160"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>} {<a id="st:161" class="idref" href="#st:161"><span class="id" title="binder">st</span></a> <a id="st':162" class="idref" href="#st':162"><span class="id" title="binder">st'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a><span class="id" title="notation">},</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:158"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#st:161"><span class="id" title="variable">st</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:159"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_mrec:154"><span class="id" title="inductive">valid_state_mrec</span></a> <a class="idref" href="VLSM.Core.VLSM.html#st:161"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid_message_mrec:153"><span class="id" title="inductive">valid_message_mrec</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:159"><span class="id" title="variable">om</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:158"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#st:161"><span class="id" title="variable">st</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:159"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#st':162"><span class="id" title="variable">st'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':160"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid_message_mrec:153"><span class="id" title="inductive">valid_message_mrec</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':160"><span class="id" title="variable">om'</span></a><br/>
<span class="id" title="keyword">with</span> <a id="valid_state_mrec" class="idref" href="#valid_state_mrec"><span class="id" title="definition, inductive"><span id="valid_state_mrec_ind" class="id"><span id="valid_state_mrec_sind" class="id">valid_state_mrec</span></span></span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="valid_state_mrec_initial" class="idref" href="#valid_state_mrec_initial"><span class="id" title="constructor">valid_state_mrec_initial</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:163" class="idref" href="#s:163"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:163"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_mrec:154"><span class="id" title="inductive">valid_state_mrec</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:163"><span class="id" title="variable">s</span></a><br/>
| <a id="valid_state_mrec_generated" class="idref" href="#valid_state_mrec_generated"><span class="id" title="constructor">valid_state_mrec_generated</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">{</span><a id="l:164" class="idref" href="#l:164"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>} {<a id="om:165" class="idref" href="#om:165"><span class="id" title="binder">om</span></a> <a id="om':166" class="idref" href="#om':166"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>} {<a id="st:167" class="idref" href="#st:167"><span class="id" title="binder">st</span></a> <a id="st':168" class="idref" href="#st':168"><span class="id" title="binder">st'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a><span class="id" title="notation">},</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:164"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#st:167"><span class="id" title="variable">st</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:165"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_mrec:154"><span class="id" title="inductive">valid_state_mrec</span></a> <a class="idref" href="VLSM.Core.VLSM.html#st:167"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid_message_mrec:153"><span class="id" title="inductive">valid_message_mrec</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:165"><span class="id" title="variable">om</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:164"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#st:167"><span class="id" title="variable">st</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:165"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#st':168"><span class="id" title="variable">st'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':166"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_mrec:154"><span class="id" title="inductive">valid_state_mrec</span></a> <a class="idref" href="VLSM.Core.VLSM.html#st':168"><span class="id" title="variable">st'</span></a>.<br/>

<br/>
</div>

<div class="doc">
  Reasoning about this mutually recursive definition is facilitated
  by a custom induction scheme.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Scheme</span> <a id="valid_message_ind" class="idref" href="#valid_message_ind"><span class="id" title="definition">valid_message_ind</span></a> := <span class="id" title="keyword">Induction</span> <span class="id" title="keyword">for</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_message_mrec"><span class="id" title="inductive">valid_message_mrec</span></a> <span class="id" title="keyword">Sort</span> <span class="id" title="keyword">Prop</span><br/>
<span class="id" title="keyword">with</span> <a id="valid_state_ind" class="idref" href="#valid_state_ind"><span class="id" title="definition">valid_state_ind</span></a> := <span class="id" title="keyword">Induction</span> <span class="id" title="keyword">for</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_mrec"><span class="id" title="inductive">valid_state_mrec</span></a> <span class="id" title="keyword">Sort</span> <span class="id" title="keyword">Prop</span>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_message_ind"><span class="id" title="definition">valid_message_ind</span></a> <span class="id" title="var">Pmsg</span> <span class="id" title="var">Pstate</span> : <span class="id" title="tactic">rename</span>.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_ind"><span class="id" title="definition">valid_state_ind</span></a> <span class="id" title="var">Pmsg</span> <span class="id" title="var">Pstate</span> : <span class="id" title="tactic">rename</span>.<br/>

<br/>
</div>

<div class="doc">
  To guarantee the equivalence between <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_message_mrec"><span class="id" title="inductive">valid_message_mrec</span></a></span> coupled with
  <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_mrec"><span class="id" title="inductive">valid_state_mrec</span></a></span> and <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a></span> we prove the
  following lemmas.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="valid_state_message_prop_impl_valid" class="idref" href="#valid_state_message_prop_impl_valid"><span class="id" title="lemma">valid_state_message_prop_impl_valid</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:169" class="idref" href="#s:169"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="om:170" class="idref" href="#om:170"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:169"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:170"><span class="id" title="variable">om</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_message_mrec"><span class="id" title="inductive">valid_message_mrec</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:170"><span class="id" title="variable">om</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_mrec"><span class="id" title="inductive">valid_state_mrec</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:169"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">om</span>; [<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_message_mrec_initial"><span class="id" title="constructor">valid_message_mrec_initial</span></a> | <span class="id" title="tactic">constructor</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_mrec_initial"><span class="id" title="constructor">valid_state_mrec_initial</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">replace</span> <span class="id" title="var">om'</span> <span class="id" title="keyword">with</span> <span class="id" title="notation">(</span><a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <span class="id" title="var">l0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">).2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht</span>; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_message_mrec_generated"><span class="id" title="constructor">valid_message_mrec_generated</span></a>; [<span class="id" title="var">done</span> | <span class="id" title="var">itauto</span>.. |].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">replace</span> <span class="id" title="var">s'</span> <span class="id" title="keyword">with</span> <span class="id" title="notation">(</span><a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <span class="id" title="var">l0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">).1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht</span>; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_mrec_generated"><span class="id" title="constructor">valid_state_mrec_generated</span></a>; [<span class="id" title="var">done</span> | ..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHvalid_state_message_prop1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHvalid_state_message_prop2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="valid_impl_valid_state_prop" class="idref" href="#valid_impl_valid_state_prop"><span class="id" title="lemma">valid_impl_valid_state_prop</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:171" class="idref" href="#s:171"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_mrec"><span class="id" title="inductive">valid_state_mrec</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:171"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:171"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_ind"><span class="id" title="definition">valid_state_ind</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">Pmsg</span> := <span class="id" title="keyword">fun</span> <a id="m:172" class="idref" href="#m:172"><span class="id" title="binder"><span id="m:173" class="id">m</span></span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_prop"><span class="id" title="definition">option_valid_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:172"><span class="id" title="variable">m</span></a>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_None"><span class="id" title="lemma">option_valid_message_None</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_message_is_valid"><span class="id" title="lemma">initial_message_is_valid</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> * ? ? [] ? [] <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_generated_state_message"><span class="id" title="constructor">valid_generated_state_message</span></a>; <span class="id" title="var">cycle</span> 1.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_is_valid"><span class="id" title="lemma">initial_state_is_valid</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> * ? ? [] ? [] <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_generated_state_message"><span class="id" title="constructor">valid_generated_state_message</span></a>; <span class="id" title="var">cycle</span> 1.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="valid_impl_valid_message_prop" class="idref" href="#valid_impl_valid_message_prop"><span class="id" title="lemma">valid_impl_valid_message_prop</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="om:174" class="idref" href="#om:174"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_message_mrec"><span class="id" title="inductive">valid_message_mrec</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:174"><span class="id" title="variable">om</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_prop"><span class="id" title="definition">option_valid_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:174"><span class="id" title="variable">om</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_message_ind"><span class="id" title="definition">valid_message_ind</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">Pstate</span> := <span class="id" title="keyword">fun</span> <a id="s:175" class="idref" href="#s:175"><span class="id" title="binder"><span id="s:176" class="id">s</span></span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:175"><span class="id" title="variable">s</span></a>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_None"><span class="id" title="lemma">option_valid_message_None</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_message_is_valid"><span class="id" title="lemma">initial_message_is_valid</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> * ? ? [] ? [] <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_generated_state_message"><span class="id" title="constructor">valid_generated_state_message</span></a>; <span class="id" title="var">cycle</span> 1.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_is_valid"><span class="id" title="lemma">initial_state_is_valid</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> * ? ? [] ? [] <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_generated_state_message"><span class="id" title="constructor">valid_generated_state_message</span></a>; <span class="id" title="var">cycle</span> 1.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="valid_iff_valid_message_prop" class="idref" href="#valid_iff_valid_message_prop"><span class="id" title="lemma">valid_iff_valid_message_prop</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="om:177" class="idref" href="#om:177"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_message_mrec"><span class="id" title="inductive">valid_message_mrec</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:177"><span class="id" title="variable">om</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_prop"><span class="id" title="definition">option_valid_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:177"><span class="id" title="variable">om</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_impl_valid_message_prop"><span class="id" title="lemma">valid_impl_valid_message_prop</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> []; <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop_impl_valid"><span class="id" title="lemma">valid_state_message_prop_impl_valid</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="valid_iff_valid_state_prop" class="idref" href="#valid_iff_valid_state_prop"><span class="id" title="lemma">valid_iff_valid_state_prop</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:178" class="idref" href="#s:178"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_mrec"><span class="id" title="inductive">valid_state_mrec</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:178"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:178"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_impl_valid_state_prop"><span class="id" title="lemma">valid_impl_valid_state_prop</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> []; <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop_impl_valid"><span class="id" title="lemma">valid_state_message_prop_impl_valid</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab85"></a><h3 class="section">Input validity and input valid transitions</h3>


<div class="paragraph"> </div>

  To specify that a particular (input of a) transition can actually be
  encountered as part of a protocol execution, we define the notions of
  <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#input_valid"><span class="id" title="definition">input_valid</span></a></span>ity and <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a></span>.

<div class="paragraph"> </div>

  Input validity requires that the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a></span> predicate holds for the
  given inputs and that they have a <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state"><span class="id" title="definition">valid_state</span></a></span> and a <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_message"><span class="id" title="definition">valid_message</span></a></span>.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="input_valid" class="idref" href="#input_valid"><span class="id" title="definition">input_valid</span></a> (<a id="l:179" class="idref" href="#l:179"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="som:180" class="idref" href="#som:180"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="s:181" class="idref" href="#s:181"><span class="id" title="binder">s</span></a>, <a id="om:182" class="idref" href="#om:182"><span class="id" title="binder">om</span></a>) := <a class="idref" href="VLSM.Core.VLSM.html#som:180"><span class="id" title="variable">som</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:181"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_prop"><span class="id" title="definition">option_valid_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:182"><span class="id" title="variable">om</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:179"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:181"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:182"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
</div>

<div class="doc">
Input valid transitions are transitions with <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#input_valid"><span class="id" title="definition">input_valid</span></a></span> inputs. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="input_valid_transition" class="idref" href="#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> (<a id="l:183" class="idref" href="#l:183"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="som:184" class="idref" href="#som:184"><span class="id" title="binder">som</span></a> <a id="som':185" class="idref" href="#som':185"><span class="id" title="binder">som'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid"><span class="id" title="definition">input_valid</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:183"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som:184"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:183"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som:184"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som':185"><span class="id" title="variable">som'</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="input_valid_transition_item" class="idref" href="#input_valid_transition_item"><span class="id" title="definition">input_valid_transition_item</span></a> (<a id="s:186" class="idref" href="#s:186"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="item:187" class="idref" href="#item:187"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#item:187"><span class="id" title="variable">item</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:186"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a> <a class="idref" href="VLSM.Core.VLSM.html#item:187"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#item:187"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="VLSM.Core.VLSM.html#item:187"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="input_valid_transition_preserving" class="idref" href="#input_valid_transition_preserving"><span class="id" title="definition">input_valid_transition_preserving</span></a> (<a id="R:188" class="idref" href="#R:188"><span class="id" title="binder">R</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s1:189" class="idref" href="#s1:189"><span class="id" title="binder">s1</span></a> <a id="s2:190" class="idref" href="#s2:190"><span class="id" title="binder">s2</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="l:191" class="idref" href="#l:191"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="om1:192" class="idref" href="#om1:192"><span class="id" title="binder">om1</span></a> <a id="om2:193" class="idref" href="#om2:193"><span class="id" title="binder">om2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:191"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s1:189"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om1:192"><span class="id" title="variable">om1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s2:190"><span class="id" title="variable">s2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om2:193"><span class="id" title="variable">om2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#R:188"><span class="id" title="variable">R</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:189"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s2:190"><span class="id" title="variable">s2</span></a>.<br/>

<br/>
</div>

<div class="doc">
Next three lemmas show the two definitions above are strongly related. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_valid" class="idref" href="#input_valid_transition_valid"><span class="id" title="lemma">input_valid_transition_valid</span></a><br/>
&nbsp;&nbsp;(<a id="l:194" class="idref" href="#l:194"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="som:195" class="idref" href="#som:195"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="som':196" class="idref" href="#som':196"><span class="id" title="binder">som'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Ht:197" class="idref" href="#Ht:197"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:194"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som:195"><span class="id" title="variable">som</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som':196"><span class="id" title="variable">som'</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid"><span class="id" title="definition">input_valid</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:194"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som:195"><span class="id" title="variable">som</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_can_transition" class="idref" href="#input_valid_can_transition"><span class="id" title="lemma">input_valid_can_transition</span></a><br/>
&nbsp;&nbsp;(<a id="l:198" class="idref" href="#l:198"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="som:199" class="idref" href="#som:199"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hv:200" class="idref" href="#Hv:200"><span class="id" title="binder">Hv</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid"><span class="id" title="definition">input_valid</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:198"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som:199"><span class="id" title="variable">som</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="som':201" class="idref" href="#som':201"><span class="id" title="binder">som'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:198"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som:199"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som':201"><span class="id" title="variable">som'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:198"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som:199"><span class="id" title="variable">som</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som':201"><span class="id" title="variable">som'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">done</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_iff" class="idref" href="#input_valid_transition_iff"><span class="id" title="lemma">input_valid_transition_iff</span></a><br/>
&nbsp;&nbsp;(<a id="l:202" class="idref" href="#l:202"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="som:203" class="idref" href="#som:203"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid"><span class="id" title="definition">input_valid</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:202"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som:203"><span class="id" title="variable">som</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="som':204" class="idref" href="#som':204"><span class="id" title="binder">som'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:202"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som:203"><span class="id" title="variable">som</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som':204"><span class="id" title="variable">som'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_can_transition"><span class="id" title="lemma">input_valid_can_transition</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">som'</span> <span class="id" title="var">Hivt</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_valid"><span class="id" title="lemma">input_valid_transition_valid</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">som'</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  The next couple of lemmas relate the two definitions above with
  pre-existing concepts.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_origin" class="idref" href="#input_valid_transition_origin"><span class="id" title="lemma">input_valid_transition_origin</span></a><br/>
&nbsp;&nbsp;{<a id="l:205" class="idref" href="#l:205"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>}<br/>
&nbsp;&nbsp;{<a id="s:206" class="idref" href="#s:206"><span class="id" title="binder">s</span></a> <a id="s':207" class="idref" href="#s':207"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>}<br/>
&nbsp;&nbsp;{<a id="om:208" class="idref" href="#om:208"><span class="id" title="binder">om</span></a> <a id="om':209" class="idref" href="#om':209"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;(<a id="Ht:210" class="idref" href="#Ht:210"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:205"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:206"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:208"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':207"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':209"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:206"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [[[<span class="id" title="var">_om</span> <span class="id" title="var">Hp</span>] <span class="id" title="var">_</span>] <span class="id" title="var">_</span>]; <span class="id" title="tactic">exists</span> <span class="id" title="var">_om</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_destination" class="idref" href="#input_valid_transition_destination"><span class="id" title="lemma">input_valid_transition_destination</span></a><br/>
&nbsp;&nbsp;{<a id="l:211" class="idref" href="#l:211"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>}<br/>
&nbsp;&nbsp;{<a id="s:212" class="idref" href="#s:212"><span class="id" title="binder">s</span></a> <a id="s':213" class="idref" href="#s':213"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>}<br/>
&nbsp;&nbsp;{<a id="om:214" class="idref" href="#om:214"><span class="id" title="binder">om</span></a> <a id="om':215" class="idref" href="#om':215"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;(<a id="Ht:216" class="idref" href="#Ht:216"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:211"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:212"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:214"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':213"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':215"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s':213"><span class="id" title="variable">s'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">om'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [[[<span class="id" title="var">_om</span> <span class="id" title="var">Hs</span>] [[<span class="id" title="var">_s</span> <span class="id" title="var">Hom</span>] <span class="id" title="var">Hv</span>]] <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_generated_state_message"><span class="id" title="constructor">valid_generated_state_message</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">s</span> <span class="id" title="var">_om</span> <span class="id" title="var">_s</span> <span class="id" title="var">om</span> <span class="id" title="var">l</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_in" class="idref" href="#input_valid_transition_in"><span class="id" title="lemma">input_valid_transition_in</span></a><br/>
&nbsp;&nbsp;{<a id="l:217" class="idref" href="#l:217"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>}<br/>
&nbsp;&nbsp;{<a id="s:218" class="idref" href="#s:218"><span class="id" title="binder">s</span></a> <a id="s':219" class="idref" href="#s':219"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>}<br/>
&nbsp;&nbsp;{<a id="om:220" class="idref" href="#om:220"><span class="id" title="binder">om</span></a> <a id="om':221" class="idref" href="#om':221"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;(<a id="Ht:222" class="idref" href="#Ht:222"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:217"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:218"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:220"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':219"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':221"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_prop"><span class="id" title="definition">option_valid_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:220"><span class="id" title="variable">om</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">_</span> [[<span class="id" title="var">_s</span> <span class="id" title="var">Hom</span>] <span class="id" title="var">_</span>]] <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">_s</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_outputs_valid_state_message" class="idref" href="#input_valid_transition_outputs_valid_state_message"><span class="id" title="lemma">input_valid_transition_outputs_valid_state_message</span></a><br/>
&nbsp;&nbsp;{<a id="l:223" class="idref" href="#l:223"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>}<br/>
&nbsp;&nbsp;{<a id="s:224" class="idref" href="#s:224"><span class="id" title="binder">s</span></a> <a id="s':225" class="idref" href="#s':225"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>}<br/>
&nbsp;&nbsp;{<a id="om:226" class="idref" href="#om:226"><span class="id" title="binder">om</span></a> <a id="om':227" class="idref" href="#om':227"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;(<a id="Ht:228" class="idref" href="#Ht:228"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:223"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:224"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:226"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':225"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':227"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s':225"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':227"><span class="id" title="variable">om'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [[[<span class="id" title="var">_om</span> <span class="id" title="var">Hps</span>] [[<span class="id" title="var">_s</span> <span class="id" title="var">Hpm</span>] <span class="id" title="var">Hv</span>]] <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_generated_state_message"><span class="id" title="constructor">valid_generated_state_message</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">s</span> <span class="id" title="var">_om</span> <span class="id" title="var">_s</span> <span class="id" title="var">om</span> <span class="id" title="var">l</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_out" class="idref" href="#input_valid_transition_out"><span class="id" title="lemma">input_valid_transition_out</span></a><br/>
&nbsp;&nbsp;{<a id="l:229" class="idref" href="#l:229"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>}<br/>
&nbsp;&nbsp;{<a id="s:230" class="idref" href="#s:230"><span class="id" title="binder">s</span></a> <a id="s':231" class="idref" href="#s':231"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>}<br/>
&nbsp;&nbsp;{<a id="om:232" class="idref" href="#om:232"><span class="id" title="binder">om</span></a> <a id="om':233" class="idref" href="#om':233"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;(<a id="Ht:234" class="idref" href="#Ht:234"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:229"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:230"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:232"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':231"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':233"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_prop"><span class="id" title="definition">option_valid_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':233"><span class="id" title="variable">om'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_outputs_valid_state_message"><span class="id" title="lemma">input_valid_transition_outputs_valid_state_message</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">s'</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_is_valid" class="idref" href="#input_valid_transition_is_valid"><span class="id" title="lemma">input_valid_transition_is_valid</span></a><br/>
&nbsp;&nbsp;{<a id="l:235" class="idref" href="#l:235"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>}<br/>
&nbsp;&nbsp;{<a id="s:236" class="idref" href="#s:236"><span class="id" title="binder">s</span></a> <a id="s':237" class="idref" href="#s':237"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>}<br/>
&nbsp;&nbsp;{<a id="om:238" class="idref" href="#om:238"><span class="id" title="binder">om</span></a> <a id="om':239" class="idref" href="#om':239"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;(<a id="Ht:240" class="idref" href="#Ht:240"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:235"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:236"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:238"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':237"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':239"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:235"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:236"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:238"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">_</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hv</span>]] <span class="id" title="var">_</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_transition" class="idref" href="#input_valid_transition_transition"><span class="id" title="lemma">input_valid_transition_transition</span></a><br/>
&nbsp;&nbsp;{<a id="l:241" class="idref" href="#l:241"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>}<br/>
&nbsp;&nbsp;{<a id="s:242" class="idref" href="#s:242"><span class="id" title="binder">s</span></a> <a id="s':243" class="idref" href="#s':243"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>}<br/>
&nbsp;&nbsp;{<a id="om:244" class="idref" href="#om:244"><span class="id" title="binder">om</span></a> <a id="om':245" class="idref" href="#om':245"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;(<a id="Ht:246" class="idref" href="#Ht:246"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:241"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:242"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:244"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':243"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':245"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:241"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:242"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:244"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':243"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':245"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Ht</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_state_message_outputs" class="idref" href="#input_valid_state_message_outputs"><span class="id" title="lemma">input_valid_state_message_outputs</span></a><br/>
&nbsp;&nbsp;(<a id="l:247" class="idref" href="#l:247"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="s:248" class="idref" href="#s:248"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="om:249" class="idref" href="#om:249"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hv:250" class="idref" href="#Hv:250"><span class="id" title="binder">Hv</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid"><span class="id" title="definition">input_valid</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:247"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:248"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:249"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;(<a id="s':251" class="idref" href="#s':251"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="om':252" class="idref" href="#om':252"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Ht:253" class="idref" href="#Ht:253"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:247"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:248"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:249"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':251"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':252"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s':251"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':252"><span class="id" title="variable">om'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hv</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">_om</span> <span class="id" title="var">Hs</span>] [[<span class="id" title="var">_s</span> <span class="id" title="var">Hom</span>] <span class="id" title="var">Hv</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_generated_state_message"><span class="id" title="constructor">valid_generated_state_message</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">s</span> <span class="id" title="var">_om</span> <span class="id" title="var">_s</span> <span class="id" title="var">om</span> <span class="id" title="var">l</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a></span>s are deterministic, i.e. the final state and output message
  are determined by the label, initial state and input message of the
  transition. This is because <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a></span> is a function.

<div class="paragraph"> </div>

  Because of the above, <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a></span>s are also deterministic.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_deterministic" class="idref" href="#input_valid_transition_deterministic"><span class="id" title="lemma">input_valid_transition_deterministic</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">{</span><a id="lbl:254" class="idref" href="#lbl:254"><span class="id" title="binder">lbl</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>} {<a id="s:255" class="idref" href="#s:255"><span class="id" title="binder">s</span></a> <a id="s1:256" class="idref" href="#s1:256"><span class="id" title="binder">s1</span></a> <a id="s2:257" class="idref" href="#s2:257"><span class="id" title="binder">s2</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>} {<a id="iom:258" class="idref" href="#iom:258"><span class="id" title="binder">iom</span></a> <a id="oom1:259" class="idref" href="#oom1:259"><span class="id" title="binder">oom1</span></a> <a id="oom2:260" class="idref" href="#oom2:260"><span class="id" title="binder">oom2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a><span class="id" title="notation">},</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#lbl:254"><span class="id" title="variable">lbl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:255"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:258"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s1:256"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom1:259"><span class="id" title="variable">oom1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#lbl:254"><span class="id" title="variable">lbl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:255"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:258"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s2:257"><span class="id" title="variable">s2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom2:260"><span class="id" title="variable">oom2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#s1:256"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s2:257"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom1:259"><span class="id" title="variable">oom1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom2:260"><span class="id" title="variable">oom2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">inversion</span> 1; <span class="id" title="var">itauto</span> <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  For VLSMs initialized with many initial messages such as
  the <span class="inlinecode"><a class="idref" href="VLSM.Core.ProjectionTraces.html#composite_vlsm_induced_projection"><span class="id" title="definition">composite_vlsm_induced_projection</span></a></span> the question of
  whether a <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a></span> <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a></span> a message <code>m</code> becomes more
  useful than that whether <code>m</code> is a <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_message"><span class="id" title="definition">valid_message</span></a></span>.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="option_can_produce" class="idref" href="#option_can_produce"><span class="id" title="definition">option_can_produce</span></a> (<a id="s:261" class="idref" href="#s:261"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="om:262" class="idref" href="#om:262"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="som:263" class="idref" href="#som:263"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="l:264" class="idref" href="#l:264"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:264"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som:263"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:261"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:262"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="can_produce" class="idref" href="#can_produce"><span class="id" title="definition">can_produce</span></a> (<a id="s:265" class="idref" href="#s:265"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="m:266" class="idref" href="#m:266"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#option_can_produce"><span class="id" title="definition">option_can_produce</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:265"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:266"><span class="id" title="variable">m</span></a>).<br/>

<br/>
</div>

<div class="doc">
Of course, if a VLSM <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a></span> <code>(s, m)</code>, then <code>(s, m)</code> is valid. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="option_can_produce_valid" class="idref" href="#option_can_produce_valid"><span class="id" title="lemma">option_can_produce_valid</span></a><br/>
&nbsp;&nbsp;(<a id="s:267" class="idref" href="#s:267"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="om:268" class="idref" href="#om:268"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hm:269" class="idref" href="#Hm:269"><span class="id" title="binder">Hm</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#option_can_produce"><span class="id" title="definition">option_can_produce</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:267"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:268"><span class="id" title="variable">om</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:267"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:268"><span class="id" title="variable">om</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hm</span> <span class="id" title="keyword">as</span> [(<span class="id" title="var">s0</span>, <span class="id" title="var">om0</span>) [<span class="id" title="var">l</span> [[[<span class="id" title="var">_om0</span> <span class="id" title="var">Hs0</span>] [[<span class="id" title="var">_s0</span> <span class="id" title="var">Hom0</span>] <span class="id" title="var">Hv</span>]] <span class="id" title="var">Ht</span>]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_generated_state_message"><span class="id" title="constructor">valid_generated_state_message</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">s0</span> <span class="id" title="var">_om0</span> <span class="id" title="var">_s0</span> <span class="id" title="var">om0</span> <span class="id" title="var">l</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="can_produce_valid" class="idref" href="#can_produce_valid"><span class="id" title="lemma">can_produce_valid</span></a><br/>
&nbsp;&nbsp;(<a id="s:270" class="idref" href="#s:270"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="m:271" class="idref" href="#m:271"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hm:272" class="idref" href="#Hm:272"><span class="id" title="binder">Hm</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#can_produce"><span class="id" title="definition">can_produce</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:270"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:271"><span class="id" title="variable">m</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:270"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:271"><span class="id" title="variable">m</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<a class="idref" href="VLSM.Core.VLSM.html#option_can_produce_valid"><span class="id" title="lemma">option_can_produce_valid</span></a> <span class="id" title="var">s</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">m</span>) <span class="id" title="var">Hm</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="option_can_produce_valid_iff" class="idref" href="#option_can_produce_valid_iff"><span class="id" title="lemma">option_can_produce_valid_iff</span></a><br/>
&nbsp;&nbsp;(<a id="s:273" class="idref" href="#s:273"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="om:274" class="idref" href="#om:274"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:273"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:274"><span class="id" title="variable">om</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#option_can_produce"><span class="id" title="definition">option_can_produce</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:273"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:274"><span class="id" title="variable">om</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:273"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.VLSM.html#option_initial_message_prop"><span class="id" title="definition">option_initial_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:274"><span class="id" title="variable">om</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hm</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hm</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">left</span>; <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>, <span class="id" title="var">l0</span>; <span class="id" title="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">Hem</span> | <span class="id" title="var">Him</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#option_can_produce_valid"><span class="id" title="lemma">option_can_produce_valid</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Him</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="can_produce_valid_iff" class="idref" href="#can_produce_valid_iff"><span class="id" title="lemma">can_produce_valid_iff</span></a><br/>
&nbsp;&nbsp;(<a id="s:275" class="idref" href="#s:275"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="m:276" class="idref" href="#m:276"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:275"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:276"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#can_produce"><span class="id" title="definition">can_produce</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:275"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:276"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:275"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:276"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<a class="idref" href="VLSM.Core.VLSM.html#option_can_produce_valid_iff"><span class="id" title="lemma">option_can_produce_valid_iff</span></a> <span class="id" title="var">s</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">m</span>)).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="can_emit" class="idref" href="#can_emit"><span class="id" title="definition">can_emit</span></a> (<a id="m:277" class="idref" href="#m:277"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="som:278" class="idref" href="#som:278"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="l:279" class="idref" href="#l:279"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="s:280" class="idref" href="#s:280"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:279"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som:278"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:280"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:277"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="can_emit_iff" class="idref" href="#can_emit_iff"><span class="id" title="lemma">can_emit_iff</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="m:281" class="idref" href="#m:281"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:281"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s:282" class="idref" href="#s:282"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#can_produce"><span class="id" title="definition">can_produce</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:282"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:281"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> [<span class="id" title="var">som</span> [<span class="id" title="var">l</span> [<span class="id" title="var">s</span> <span class="id" title="var">Ht</span>]]]; <span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>, <span class="id" title="var">som</span>, <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> [<span class="id" title="var">s</span> [<span class="id" title="var">som</span> [<span class="id" title="var">l</span> <span class="id" title="var">Ht</span>]]]; <span class="id" title="tactic">exists</span> <span class="id" title="var">som</span>, <span class="id" title="var">l</span>, <span class="id" title="var">s</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If a VLSM <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a></span> a message <code>m</code>, then <code>m</code> is valid. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="emitted_messages_are_valid" class="idref" href="#emitted_messages_are_valid"><span class="id" title="lemma">emitted_messages_are_valid</span></a><br/>
&nbsp;&nbsp;(<a id="m:283" class="idref" href="#m:283"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hm:284" class="idref" href="#Hm:284"><span class="id" title="binder">Hm</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:283"><span class="id" title="variable">m</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:283"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#can_emit_iff"><span class="id" title="lemma">can_emit_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hm</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">Hm</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#can_produce_valid"><span class="id" title="lemma">can_produce_valid</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
A characterization of valid messages in terms of <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="emitted_messages_are_valid_iff" class="idref" href="#emitted_messages_are_valid_iff"><span class="id" title="lemma">emitted_messages_are_valid_iff</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="m:285" class="idref" href="#m:285"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:285"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:285"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:285"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">s</span> <span class="id" title="var">Hm</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#can_produce_valid_iff"><span class="id" title="lemma">can_produce_valid_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hgen</span> | [<span class="id" title="var">_</span> <span class="id" title="var">Him</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">right</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#can_emit_iff"><span class="id" title="lemma">can_emit_iff</span></a>; <span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">Him</span> | <span class="id" title="var">Hm</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_message_is_valid"><span class="id" title="lemma">initial_message_is_valid</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#emitted_messages_are_valid"><span class="id" title="lemma">emitted_messages_are_valid</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab86"></a><h3 class="section">Valid state and valid message characterization</h3>


<div class="paragraph"> </div>

  The definition and results below show that the mutually-recursive definitions
  for <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state"><span class="id" title="definition">valid_state</span></a></span>s and <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_message"><span class="id" title="definition">valid_message</span></a></span>s can be derived from the
  prior definitions.

<div class="paragraph"> </div>

  The results below offers equivalent characterizations for <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state"><span class="id" title="definition">valid_state</span></a></span>s
  and <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_message"><span class="id" title="definition">valid_message</span></a></span>s, similar to their recursive definition.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="valid_state_prop_iff" class="idref" href="#valid_state_prop_iff"><span class="id" title="lemma">valid_state_prop_iff</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s':286" class="idref" href="#s':286"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s':286"><span class="id" title="variable">s'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="is:287" class="idref" href="#is:287"><span class="id" title="binder">is</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#initial_state"><span class="id" title="projection">initial_state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s':286"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:287"><span class="id" title="variable">is</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="l:288" class="idref" href="#l:288"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="som:289" class="idref" href="#som:289"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="om':290" class="idref" href="#om':290"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:288"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som:289"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':286"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':290"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">Hps'</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hps'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">om'</span> <span class="id" title="var">Hs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hs</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">left</span>; <span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hs0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">right</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">l0</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>, <span class="id" title="var">om'</span>; <span class="id" title="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [[[<span class="id" title="var">s</span> <span class="id" title="var">His</span>] <span class="id" title="var">Heq</span>] | [<span class="id" title="var">l</span> [[<span class="id" title="var">s</span> <span class="id" title="var">om</span>] [<span class="id" title="var">om'</span> [[[<span class="id" title="var">_om</span> <span class="id" title="var">Hps</span>] [[<span class="id" title="var">_s</span> <span class="id" title="var">Hpm</span>] <span class="id" title="var">Hv</span>]] <span class="id" title="var">Ht</span>]]]]]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_initial_state_message"><span class="id" title="constructor">valid_initial_state_message</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">om'</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_generated_state_message"><span class="id" title="constructor">valid_generated_state_message</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">s</span> <span class="id" title="var">_om</span> <span class="id" title="var">_s</span> <span class="id" title="var">om</span> <span class="id" title="var">l</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  A specialized induction principle for <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a></span>.

<div class="paragraph"> </div>

  Compared to opening the existential and using <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop_ind"><span class="id" title="definition">valid_state_message_prop_ind</span></a></span>,
  this expresses the inductive assumptions simply in terms of
  <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a></span>, rather than than having everything exploded
  as <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a></span> assumptions over witnesses <code>_s</code>
  and <code>_om</code>, and a spurious inductive assumption <code>P _s</code>.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="valid_state_prop_ind" class="idref" href="#valid_state_prop_ind"><span class="id" title="lemma">valid_state_prop_ind</span></a><br/>
&nbsp;&nbsp;(<a id="P:291" class="idref" href="#P:291"><span class="id" title="binder">P</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="IHinit:294" class="idref" href="#IHinit:294"><span class="id" title="binder">IHinit</span></a> : <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:292" class="idref" href="#s:292"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="Hs:293" class="idref" href="#Hs:293"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:292"><span class="id" title="variable">s</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.VLSM.html#P:291"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:292"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;(<a id="IHgen:302" class="idref" href="#IHgen:302"><span class="id" title="binder">IHgen</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s':295" class="idref" href="#s':295"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="l:296" class="idref" href="#l:296"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="om:297" class="idref" href="#om:297"><span class="id" title="binder">om</span></a> <a id="om':298" class="idref" href="#om':298"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="s:299" class="idref" href="#s:299"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:300" class="idref" href="#Ht:300"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:296"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:299"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:297"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':295"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':298"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) (<a id="Hs:301" class="idref" href="#Hs:301"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#P:291"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:299"><span class="id" title="variable">s</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#P:291"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s':295"><span class="id" title="variable">s'</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:303" class="idref" href="#s:303"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="Hs:304" class="idref" href="#Hs:304"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:303"><span class="id" title="variable">s</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.VLSM.html#P:291"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:303"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">om</span> <span class="id" title="var">Hs</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHinit</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHgen</span> <span class="id" title="var">s'</span> <span class="id" title="var">l0</span> <span class="id" title="var">om</span> <span class="id" title="var">om'</span> <span class="id" title="var">s</span>); <span class="id" title="tactic">firstorder</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Valid message characterization. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="valid_message_prop_iff" class="idref" href="#valid_message_prop_iff"><span class="id" title="lemma">valid_message_prop_iff</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="m':305" class="idref" href="#m':305"><span class="id" title="binder">m'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m':305"><span class="id" title="variable">m'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="im:306" class="idref" href="#im:306"><span class="id" title="binder">im</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#initial_message"><span class="id" title="projection">initial_message</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m':305"><span class="id" title="variable">m'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="VLSM.Core.VLSM.html#im:306"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="l:307" class="idref" href="#l:307"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="som:308" class="idref" href="#som:308"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="s':309" class="idref" href="#s':309"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:307"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som:308"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':309"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m':305"><span class="id" title="variable">m'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">s'</span> <span class="id" title="var">Hpm'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hpm'</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">left</span>; <span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">m'</span> <span class="id" title="var">Hom</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">right</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">l0</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>, <span class="id" title="var">s'</span>; <span class="id" title="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [[[<span class="id" title="var">s</span> <span class="id" title="var">His</span>] <span class="id" title="var">Heq</span>] | [<span class="id" title="var">l</span> [[<span class="id" title="var">s</span> <span class="id" title="var">om</span>] [<span class="id" title="var">s'</span> [[[<span class="id" title="var">_om</span> <span class="id" title="var">Hps</span>] [[<span class="id" title="var">_s</span> <span class="id" title="var">Hpm</span>] <span class="id" title="var">Hv</span>]] <span class="id" title="var">Ht</span>]]]]]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_message_is_valid"><span class="id" title="lemma">initial_message_is_valid</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">s'</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_generated_state_message"><span class="id" title="constructor">valid_generated_state_message</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">s</span> <span class="id" title="var">_om</span> <span class="id" title="var">_s</span> <span class="id" title="var">om</span> <span class="id" title="var">l</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab87"></a><h2 class="section">Trace Properties</h2>


<div class="paragraph"> </div>

  Note that it is unnecessary to specify the source state of the transition,
  as it is implied by the preceding <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a></span> (or by the <code>start</code> state,
  if such an item doesn't exist).

<div class="paragraph"> </div>

  We will now split our groundwork for defining traces into the finite case and
  the infinite case.

<div class="paragraph"> </div>

<a id="lab88"></a><h3 class="section">Finite valid traces</h3>


<div class="paragraph"> </div>

  A <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a></span> a <span class="inlinecode"><a class="idref" href="VLSM.Examples.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a></span> <code>start</code> is a pair <code>(start, steps)</code> where <code>steps</code>
  is a list of <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a></span>s, and is inductively defined by:

<div class="paragraph"> </div>

<ul class="doclist">
<li> <code>(s, [])</code> is a <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a></span> <code>s</code> if <code>s</code> is valid

</li>
<li> if there is an <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a></span> <code>l (s', iom) (s, oom)</code>,
    and if <code>(s, steps)</code> is a <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_trace_from"><span class="id" title="lemma">valid_trace_from</span></a></span> <code>s</code>,
    then <code>(s', ({| l := l; input := iom; destination := s; output := oom |} :: steps)</code>
    is a <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a></span> <code>s'</code>.

</li>
</ul>

<div class="paragraph"> </div>

  Note that the definition is designed so that it extends an existing trace by
  adding a transition to its front. The reason for this choice is to have this
  definition be similar to the one for infinite traces, which can only be extended
  at the front.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a id="finite_valid_trace_from" class="idref" href="#finite_valid_trace_from"><span class="id" title="definition, inductive"><span id="finite_valid_trace_from_ind" class="id"><span id="finite_valid_trace_from_sind" class="id">finite_valid_trace_from</span></span></span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="finite_valid_trace_from_empty" class="idref" href="#finite_valid_trace_from_empty"><span class="id" title="constructor">finite_valid_trace_from_empty</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:312" class="idref" href="#s:312"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="Hs:313" class="idref" href="#Hs:313"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:312"><span class="id" title="variable">s</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from:310"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:312"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
| <a id="finite_valid_trace_from_extend" class="idref" href="#finite_valid_trace_from_extend"><span class="id" title="constructor">finite_valid_trace_from_extend</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span>  <span class="id" title="notation">(</span><a id="s:314" class="idref" href="#s:314"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="tl:315" class="idref" href="#tl:315"><span class="id" title="binder">tl</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htl:316" class="idref" href="#Htl:316"><span class="id" title="binder">Htl</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from:310"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:314"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tl:315"><span class="id" title="variable">tl</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s':317" class="idref" href="#s':317"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="iom:318" class="idref" href="#iom:318"><span class="id" title="binder">iom</span></a> <a id="oom:319" class="idref" href="#oom:319"><span class="id" title="binder">oom</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="l:320" class="idref" href="#l:320"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:321" class="idref" href="#Ht:321"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:320"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':317"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:318"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:314"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:319"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from:310"><span class="id" title="inductive">finite_valid_trace_from</span></a>  <a class="idref" href="VLSM.Core.VLSM.html#s':317"><span class="id" title="variable">s'</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#Build_transition_item"><span class="id" title="constructor">Build_transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:320"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:318"><span class="id" title="variable">iom</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:314"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:319"><span class="id" title="variable">oom</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tl:315"><span class="id" title="variable">tl</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_singleton" class="idref" href="#finite_valid_trace_singleton"><span class="id" title="lemma">finite_valid_trace_singleton</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">{</span><a id="l:322" class="idref" href="#l:322"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>} {<a id="s:323" class="idref" href="#s:323"><span class="id" title="binder">s</span></a> <a id="s':324" class="idref" href="#s':324"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>} {<a id="iom:325" class="idref" href="#iom:325"><span class="id" title="binder">iom</span></a> <a id="oom:326" class="idref" href="#oom:326"><span class="id" title="binder">oom</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a><span class="id" title="notation">},</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:322"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:323"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:325"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':324"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:326"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a>  <a class="idref" href="VLSM.Core.VLSM.html#s:323"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.VLSM.html#Build_transition_item"><span class="id" title="constructor">Build_transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:322"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:325"><span class="id" title="variable">iom</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s':324"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:326"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">l</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> <span class="id" title="var">iom</span> <span class="id" title="var">oom</span> <span class="id" title="var">Hptrans</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_extend"><span class="id" title="constructor">finite_valid_trace_from_extend</span></a>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_destination"><span class="id" title="lemma">input_valid_transition_destination</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hptrans</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
  To complete our definition of a finite valid trace, we must also guarantee
  that <code>start</code> is an initial state according to the protocol.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="finite_valid_trace" class="idref" href="#finite_valid_trace"><span class="id" title="definition">finite_valid_trace</span></a> (<a id="s:327" class="idref" href="#s:327"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="ls:328" class="idref" href="#ls:328"><span class="id" title="binder">ls</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:327"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:328"><span class="id" title="variable">ls</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:327"><span class="id" title="variable">s</span></a>.<br/>

<br/>
</div>

<div class="doc">
  In the remainder of the section we provide various results allowing us to
  prove or decompose the above properties in proofs.

<div class="paragraph"> </div>


<div class="paragraph"> </div>

  <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_empty"><span class="id" title="lemma">finite_valid_trace_empty</span></a></span> is a bit more useful than the small proof suggests,
  because applying it always leaves just one subgoal.

<div class="paragraph"> </div>

  The tactical <code>by split; [constructor; apply initial_state_is_valid |]</code>
  only works if the premise is available in the context, which may
  require an <code>assert</code> and writing out the full VLSM and state expressions
  as part of the proof script.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_empty" class="idref" href="#finite_valid_trace_empty"><span class="id" title="lemma">finite_valid_trace_empty</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:329" class="idref" href="#s:329"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:329"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace"><span class="id" title="definition">finite_valid_trace</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:329"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_is_valid"><span class="id" title="lemma">initial_state_is_valid</span></a> |].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_first_valid_transition" class="idref" href="#finite_valid_trace_first_valid_transition"><span class="id" title="lemma">finite_valid_trace_first_valid_transition</span></a><br/>
&nbsp;&nbsp;(<a id="s:330" class="idref" href="#s:330"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:331" class="idref" href="#tr:331"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="te:332" class="idref" href="#te:332"><span class="id" title="binder">te</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:333" class="idref" href="#Htr:333"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:330"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#te:332"><span class="id" title="variable">te</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:331"><span class="id" title="variable">tr</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te:332"><span class="id" title="variable">te</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:330"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te:332"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te:332"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te:332"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_first_pstate" class="idref" href="#finite_valid_trace_first_pstate"><span class="id" title="lemma">finite_valid_trace_first_pstate</span></a><br/>
&nbsp;&nbsp;(<a id="s:334" class="idref" href="#s:334"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:335" class="idref" href="#tr:335"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:336" class="idref" href="#Htr:336"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:334"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:335"><span class="id" title="variable">tr</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:334"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">subst</span>; [| <span class="id" title="tactic">apply</span> <span class="id" title="var">Ht</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_tail" class="idref" href="#finite_valid_trace_tail"><span class="id" title="lemma">finite_valid_trace_tail</span></a><br/>
&nbsp;&nbsp;(<a id="s:337" class="idref" href="#s:337"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:338" class="idref" href="#tr:338"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="te:339" class="idref" href="#te:339"><span class="id" title="binder">te</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:340" class="idref" href="#Htr:340"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:337"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#te:339"><span class="id" title="variable">te</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:338"><span class="id" title="variable">tr</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te:339"><span class="id" title="variable">te</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#tr:338"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_last_pstate" class="idref" href="#finite_valid_trace_last_pstate"><span class="id" title="lemma">finite_valid_trace_last_pstate</span></a><br/>
&nbsp;&nbsp;(<a id="s:341" class="idref" href="#s:341"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:342" class="idref" href="#tr:342"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:343" class="idref" href="#Htr:343"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:341"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:342"><span class="id" title="variable">tr</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:341"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:342"><span class="id" title="variable">tr</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_first_pstate"><span class="id" title="lemma">finite_valid_trace_first_pstate</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_tail"><span class="id" title="lemma">finite_valid_trace_tail</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHtr</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <span class="id" title="var">s</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">tr</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">a</span>) <span class="id" title="var">tr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map_cons"><span class="id" title="lemma">map_cons</span></a>, <a class="idref" href="VLSM.Lib.ListExtras.html#unroll_last"><span class="id" title="lemma">unroll_last</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_to" class="idref" href="#input_valid_transition_to"><span class="id" title="lemma">input_valid_transition_to</span></a><br/>
&nbsp;&nbsp;(<a id="s:344" class="idref" href="#s:344"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:345" class="idref" href="#tr:345"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr1:346" class="idref" href="#tr1:346"><span class="id" title="binder">tr1</span></a> <a id="tr2:347" class="idref" href="#tr2:347"><span class="id" title="binder">tr2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="te:348" class="idref" href="#te:348"><span class="id" title="binder">te</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:349" class="idref" href="#Htr:349"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:344"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:345"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;(<a id="Heq:350" class="idref" href="#Heq:350"><span class="id" title="binder">Heq</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#tr:345"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr1:346"><span class="id" title="variable">tr1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.VLSM.html#te:348"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr2:347"><span class="id" title="variable">tr2</span></a>)<br/>
&nbsp;&nbsp;(<a id="lst1:351" class="idref" href="#lst1:351"><span class="id" title="binder">lst1</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:344"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr1:346"><span class="id" title="variable">tr1</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te:348"><span class="id" title="variable">te</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#lst1:351"><span class="id" title="variable">lst1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te:348"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te:348"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te:348"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">tr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">tr1</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> [= -&gt;] <span class="id" title="var">s</span>; <span class="id" title="tactic">inversion</span> 1.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHtr1</span> (<span class="id" title="var">tr1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">te</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">tr2</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">Heq</span> <span class="id" title="keyword">is</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_cons"><span class="id" title="lemma">finite_trace_last_cons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHtr1</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_consecutive_valid_transition" class="idref" href="#finite_valid_trace_consecutive_valid_transition"><span class="id" title="lemma">finite_valid_trace_consecutive_valid_transition</span></a><br/>
&nbsp;&nbsp;(<a id="s:352" class="idref" href="#s:352"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:353" class="idref" href="#tr:353"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr1:354" class="idref" href="#tr1:354"><span class="id" title="binder">tr1</span></a> <a id="tr2:355" class="idref" href="#tr2:355"><span class="id" title="binder">tr2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="te1:356" class="idref" href="#te1:356"><span class="id" title="binder">te1</span></a> <a id="te2:357" class="idref" href="#te2:357"><span class="id" title="binder">te2</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:358" class="idref" href="#Htr:358"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:352"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:353"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;(<a id="Heq:359" class="idref" href="#Heq:359"><span class="id" title="binder">Heq</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#tr:353"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr1:354"><span class="id" title="variable">tr1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.VLSM.html#te1:356"><span class="id" title="variable">te1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te2:357"><span class="id" title="variable">te2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr2:355"><span class="id" title="variable">tr2</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te2:357"><span class="id" title="variable">te2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te1:356"><span class="id" title="variable">te1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te2:357"><span class="id" title="variable">te2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te2:357"><span class="id" title="variable">te2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te2:357"><span class="id" title="variable">te2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><span class="id" title="var">te1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <span class="id" title="var">te2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">tr2</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">te1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">te2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">tr2</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_to"><span class="id" title="lemma">input_valid_transition_to</span></a> <span class="id" title="var">s</span> <span class="id" title="var">tr</span> (<span class="id" title="var">tr1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">te1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <span class="id" title="var">tr2</span> <span class="id" title="var">te2</span> <span class="id" title="var">Htr</span> <span class="id" title="var">Heq</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_is_last"><span class="id" title="lemma">finite_trace_last_is_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="valid_trace_output_is_valid" class="idref" href="#valid_trace_output_is_valid"><span class="id" title="lemma">valid_trace_output_is_valid</span></a><br/>
&nbsp;&nbsp;(<a id="is:360" class="idref" href="#is:360"><span class="id" title="binder">is</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:361" class="idref" href="#tr:361"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:362" class="idref" href="#Htr:362"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:360"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:361"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;(<a id="m:363" class="idref" href="#m:363"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Houtput:364" class="idref" href="#Houtput:364"><span class="id" title="binder">Houtput</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#trace_has_message"><span class="id" title="definition">trace_has_message</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#field_selector"><span class="id" title="definition">field_selector</span></a> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#m:363"><span class="id" title="variable">m</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:361"><span class="id" title="variable">tr</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:363"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="keyword">is</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Houtput</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">item</span> <span class="id" title="var">tr'</span> <span class="id" title="var">Hm</span> | <span class="id" title="var">item</span> <span class="id" title="var">tr'</span>]; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_out"><span class="id" title="lemma">input_valid_transition_out</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHHoutput</span> <span class="id" title="var">s</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="valid_trace_input_is_valid" class="idref" href="#valid_trace_input_is_valid"><span class="id" title="lemma">valid_trace_input_is_valid</span></a><br/>
&nbsp;&nbsp;(<a id="is:365" class="idref" href="#is:365"><span class="id" title="binder">is</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:366" class="idref" href="#tr:366"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:367" class="idref" href="#Htr:367"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:365"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:366"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;(<a id="m:368" class="idref" href="#m:368"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hinput:369" class="idref" href="#Hinput:369"><span class="id" title="binder">Hinput</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#trace_has_message"><span class="id" title="definition">trace_has_message</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#field_selector"><span class="id" title="definition">field_selector</span></a> <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#m:368"><span class="id" title="variable">m</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:366"><span class="id" title="variable">tr</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:368"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="keyword">is</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hinput</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">item</span> <span class="id" title="var">tr'</span> <span class="id" title="var">Hm</span> | <span class="id" title="var">item</span> <span class="id" title="var">tr'</span>]; <span class="id" title="tactic">intros</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">s</span> <span class="id" title="var">_tr'</span>  <span class="id" title="var">Htr'</span> <span class="id" title="var">_is</span> <span class="id" title="var">iom</span> <span class="id" title="var">oom</span> <span class="id" title="var">l</span> <span class="id" title="var">Ht</span>]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_in"><span class="id" title="lemma">input_valid_transition_in</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHHinput</span> <span class="id" title="var">s</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="valid_trace_observed_is_valid" class="idref" href="#valid_trace_observed_is_valid"><span class="id" title="lemma">valid_trace_observed_is_valid</span></a><br/>
&nbsp;&nbsp;(<a id="is:370" class="idref" href="#is:370"><span class="id" title="binder">is</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:371" class="idref" href="#tr:371"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:372" class="idref" href="#Htr:372"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:370"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:371"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;(<a id="m:373" class="idref" href="#m:373"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hobserved:374" class="idref" href="#Hobserved:374"><span class="id" title="binder">Hobserved</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#trace_has_message"><span class="id" title="definition">trace_has_message</span></a> <a class="idref" href="VLSM.Core.VLSM.html#item_sends_or_receives"><span class="id" title="definition">item_sends_or_receives</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:373"><span class="id" title="variable">m</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:371"><span class="id" title="variable">tr</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:373"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#trace_has_message_observed_iff"><span class="id" title="lemma">trace_has_message_observed_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hobserved</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hm</span> | <span class="id" title="var">Hm</span>]<br/>
&nbsp;&nbsp;; <span class="id" title="var">revert</span> <span class="id" title="var">Htr</span> <span class="id" title="var">m</span> <span class="id" title="var">Hm</span>; [<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_trace_input_is_valid"><span class="id" title="lemma">valid_trace_input_is_valid</span></a> | <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_trace_output_is_valid"><span class="id" title="lemma">valid_trace_output_is_valid</span></a>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="first_transition_valid" class="idref" href="#first_transition_valid"><span class="id" title="lemma">first_transition_valid</span></a><br/>
&nbsp;&nbsp;(<a id="s:375" class="idref" href="#s:375"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="te:376" class="idref" href="#te:376"><span class="id" title="binder">te</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:375"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.VLSM.html#te:376"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te:376"><span class="id" title="variable">te</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:375"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te:376"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te:376"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te:376"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> 1 |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">te</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_destination"><span class="id" title="lemma">input_valid_transition_destination</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hdestination0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">constructor</span>; [<span class="id" title="tactic">constructor</span> |].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="extend_right_finite_trace_from" class="idref" href="#extend_right_finite_trace_from"><span class="id" title="lemma">extend_right_finite_trace_from</span></a><br/>
&nbsp;&nbsp;(<a id="s1:377" class="idref" href="#s1:377"><span class="id" title="binder">s1</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="ts:378" class="idref" href="#ts:378"><span class="id" title="binder">ts</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Ht12:379" class="idref" href="#Ht12:379"><span class="id" title="binder">Ht12</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:377"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ts:378"><span class="id" title="variable">ts</span></a>)<br/>
&nbsp;&nbsp;(<a id="l3:380" class="idref" href="#l3:380"><span class="id" title="binder">l3</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="s2:381" class="idref" href="#s2:381"><span class="id" title="binder">s2</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:377"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ts:378"><span class="id" title="variable">ts</span></a>)<br/>
&nbsp;&nbsp;(<a id="iom3:382" class="idref" href="#iom3:382"><span class="id" title="binder">iom3</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="s3:383" class="idref" href="#s3:383"><span class="id" title="binder">s3</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="oom3:384" class="idref" href="#oom3:384"><span class="id" title="binder">oom3</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hv23:385" class="idref" href="#Hv23:385"><span class="id" title="binder">Hv23</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l3:380"><span class="id" title="variable">l3</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s2:381"><span class="id" title="variable">s2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom3:382"><span class="id" title="variable">iom3</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s3:383"><span class="id" title="variable">s3</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom3:384"><span class="id" title="variable">oom3</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:377"><span class="id" title="variable">s1</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#ts:378"><span class="id" title="variable">ts</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.VLSM.html#Build_transition_item"><span class="id" title="constructor">Build_transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l3:380"><span class="id" title="variable">l3</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom3:382"><span class="id" title="variable">iom3</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s3:383"><span class="id" title="variable">s3</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom3:384"><span class="id" title="variable">oom3</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Ht12</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_singleton"><span class="id" title="lemma">finite_valid_trace_singleton</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_comm_cons"><span class="id" title="lemma">app_comm_cons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_extend"><span class="id" title="constructor">finite_valid_trace_from_extend</span></a>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHHt12</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHHt12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">s2</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">clear</span> <span class="id" title="var">s2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_cons"><span class="id" title="lemma">finite_trace_last_cons</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv23</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  We can now prove several general properties of <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace"><span class="id" title="definition">finite_valid_trace</span></a></span>s. For example,
  the following lemma states that given two such traces, such that the latter's starting state
  is equal to the former's last state, it is possible to <i>concatenate</i> them into a single
  <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace"><span class="id" title="definition">finite_valid_trace</span></a></span>.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_from_app_iff" class="idref" href="#finite_valid_trace_from_app_iff"><span class="id" title="lemma">finite_valid_trace_from_app_iff</span></a><br/>
&nbsp;&nbsp;(<a id="s:386" class="idref" href="#s:386"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="ls:387" class="idref" href="#ls:387"><span class="id" title="binder">ls</span></a> <a id="ls':388" class="idref" href="#ls':388"><span class="id" title="binder">ls'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) (<a id="s':389" class="idref" href="#s':389"><span class="id" title="binder">s'</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:386"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:387"><span class="id" title="variable">ls</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:386"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:387"><span class="id" title="variable">ls</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s':389"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls':388"><span class="id" title="variable">ls'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:386"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#ls:387"><span class="id" title="variable">ls</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls':388"><span class="id" title="variable">ls'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">s'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ls</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_nil"><span class="id" title="lemma">finite_trace_last_nil</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">itauto</span> (<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_first_pstate"><span class="id" title="lemma">finite_valid_trace_first_pstate</span></a>, <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_empty"><span class="id" title="constructor">finite_valid_trace_from_empty</span></a>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_cons"><span class="id" title="lemma">finite_trace_last_cons</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHls</span> (<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> [<span class="id" title="var">Hal</span> <span class="id" title="var">Hl'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hal</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">constructor</span>; [<span class="id" title="tactic">apply</span> <span class="id" title="var">IHls</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHls</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htl</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hl</span> <span class="id" title="var">Hl'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">constructor</span> |].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_from_rev_ind" class="idref" href="#finite_valid_trace_from_rev_ind"><span class="id" title="lemma">finite_valid_trace_from_rev_ind</span></a><br/>
&nbsp;&nbsp;(<a id="P:390" class="idref" href="#P:390"><span class="id" title="binder">P</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="Hempty:393" class="idref" href="#Hempty:393"><span class="id" title="binder">Hempty</span></a> : <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:391" class="idref" href="#s:391"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="H:392" class="idref" href="#H:392"><span class="id" title="binder">H</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:391"><span class="id" title="variable">s</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.VLSM.html#P:390"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:391"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hextend:402" class="idref" href="#Hextend:402"><span class="id" title="binder">Hextend</span></a> : <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:394" class="idref" href="#s:394"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="tr:395" class="idref" href="#tr:395"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:394"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:395"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#P:390"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:394"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:395"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="sf:396" class="idref" href="#sf:396"><span class="id" title="binder">sf</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="iom:397" class="idref" href="#iom:397"><span class="id" title="binder">iom</span></a> <a id="oom:398" class="idref" href="#oom:398"><span class="id" title="binder">oom</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="l:399" class="idref" href="#l:399"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hx:400" class="idref" href="#Hx:400"><span class="id" title="binder">Hx</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:399"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:394"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:395"><span class="id" title="variable">tr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:397"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#sf:396"><span class="id" title="variable">sf</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:398"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="x:401" class="idref" href="#x:401"><span class="id" title="binder">x</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#Build_transition_item"><span class="id" title="constructor">Build_transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:399"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:397"><span class="id" title="variable">iom</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sf:396"><span class="id" title="variable">sf</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:398"><span class="id" title="variable">oom</span></a> <span class="id" title="tactic">in</span> <a class="idref" href="VLSM.Core.VLSM.html#P:390"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:394"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#tr:395"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.VLSM.html#x:401"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)) :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:403" class="idref" href="#s:403"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="tr:404" class="idref" href="#tr:404"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:403"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:404"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#P:390"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:403"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:404"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">tr</span> <span class="id" title="keyword">using</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#rev_ind"><span class="id" title="lemma">rev_ind</span></a>; <span class="id" title="tactic">intro</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hempty</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_app_iff"><span class="id" title="lemma">finite_valid_trace_from_app_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Hx</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">apply</span> (<span class="id" title="var">Hextend</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Htr</span> (<span class="id" title="var">IHtr</span> <span class="id" title="var">Htr</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hx</span>; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_rev_ind" class="idref" href="#finite_valid_trace_rev_ind"><span class="id" title="lemma">finite_valid_trace_rev_ind</span></a><br/>
&nbsp;&nbsp;(<a id="P:405" class="idref" href="#P:405"><span class="id" title="binder">P</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="Hempty:408" class="idref" href="#Hempty:408"><span class="id" title="binder">Hempty</span></a> : <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="si:406" class="idref" href="#si:406"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="Hsi:407" class="idref" href="#Hsi:407"><span class="id" title="binder">Hsi</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:406"><span class="id" title="variable">si</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.VLSM.html#P:405"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:406"><span class="id" title="variable">si</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hextend:417" class="idref" href="#Hextend:417"><span class="id" title="binder">Hextend</span></a> : <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="si:409" class="idref" href="#si:409"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="tr:410" class="idref" href="#tr:410"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace"><span class="id" title="definition">finite_valid_trace</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:409"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:410"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#P:405"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:409"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:410"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="sf:411" class="idref" href="#sf:411"><span class="id" title="binder">sf</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="iom:412" class="idref" href="#iom:412"><span class="id" title="binder">iom</span></a> <a id="oom:413" class="idref" href="#oom:413"><span class="id" title="binder">oom</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="l:414" class="idref" href="#l:414"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hx:415" class="idref" href="#Hx:415"><span class="id" title="binder">Hx</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:414"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:409"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:410"><span class="id" title="variable">tr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:412"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#sf:411"><span class="id" title="variable">sf</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:413"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="x:416" class="idref" href="#x:416"><span class="id" title="binder">x</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#Build_transition_item"><span class="id" title="constructor">Build_transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:414"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:412"><span class="id" title="variable">iom</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sf:411"><span class="id" title="variable">sf</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:413"><span class="id" title="variable">oom</span></a> <span class="id" title="tactic">in</span> <a class="idref" href="VLSM.Core.VLSM.html#P:405"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:409"><span class="id" title="variable">si</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#tr:410"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.VLSM.html#x:416"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)) :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="si:418" class="idref" href="#si:418"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="tr:419" class="idref" href="#tr:419"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace"><span class="id" title="definition">finite_valid_trace</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:418"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:419"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#P:405"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:418"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:419"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">si</span> <span class="id" title="var">tr</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Hinit</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_rev_ind"><span class="id" title="lemma">finite_valid_trace_from_rev_ind</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hempty</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hextend</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Several other lemmas in this vein are necessary for proving results regarding
  traces.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_from_prefix" class="idref" href="#finite_valid_trace_from_prefix"><span class="id" title="lemma">finite_valid_trace_from_prefix</span></a><br/>
&nbsp;&nbsp;(<a id="s:420" class="idref" href="#s:420"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="ls:421" class="idref" href="#ls:421"><span class="id" title="binder">ls</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:422" class="idref" href="#Htr:422"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:420"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:421"><span class="id" title="variable">ls</span></a>)<br/>
&nbsp;&nbsp;(<a id="n:423" class="idref" href="#n:423"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:420"><span class="id" title="variable">s</span></a> (<span class="id" title="abbreviation">take</span> <a class="idref" href="VLSM.Core.VLSM.html#n:423"><span class="id" title="variable">n</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:421"><span class="id" title="variable">ls</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="definition">take_drop</span> <span class="id" title="var">n</span> <span class="id" title="var">ls</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">Hdecompose</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hdecompose</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_app_iff"><span class="id" title="lemma">finite_valid_trace_from_app_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hpr</span> <span class="id" title="var">_</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_from_suffix" class="idref" href="#finite_valid_trace_from_suffix"><span class="id" title="lemma">finite_valid_trace_from_suffix</span></a><br/>
&nbsp;&nbsp;(<a id="s:424" class="idref" href="#s:424"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="ls:425" class="idref" href="#ls:425"><span class="id" title="binder">ls</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:426" class="idref" href="#Htr:426"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:424"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:425"><span class="id" title="variable">ls</span></a>)<br/>
&nbsp;&nbsp;(<a id="n:427" class="idref" href="#n:427"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;(<a id="nth:428" class="idref" href="#nth:428"><span class="id" title="binder">nth</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hnth:429" class="idref" href="#Hnth:429"><span class="id" title="binder">Hnth</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:424"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:425"><span class="id" title="variable">ls</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n:427"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#nth:428"><span class="id" title="variable">nth</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#nth:428"><span class="id" title="variable">nth</span></a> (<span class="id" title="abbreviation">drop</span> <a class="idref" href="VLSM.Core.VLSM.html#n:427"><span class="id" title="variable">n</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:425"><span class="id" title="variable">ls</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="definition">take_drop</span> <span class="id" title="var">n</span> <span class="id" title="var">ls</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_app_iff"><span class="id" title="lemma">finite_valid_trace_from_app_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Htr</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <span class="id" title="var">s</span> (<span class="id" title="abbreviation">take</span> <span class="id" title="var">n</span> <span class="id" title="var">ls</span>)) <span class="id" title="keyword">with</span> <span class="id" title="var">nth</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth_first"><span class="id" title="lemma">finite_trace_nth_first</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnth</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">ls</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#firstn_map"><span class="id" title="lemma">firstn_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.ListExtras.html#take_nth_last"><span class="id" title="lemma">take_nth_last</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_from_segment" class="idref" href="#finite_valid_trace_from_segment"><span class="id" title="lemma">finite_valid_trace_from_segment</span></a><br/>
&nbsp;&nbsp;(<a id="s:430" class="idref" href="#s:430"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="ls:431" class="idref" href="#ls:431"><span class="id" title="binder">ls</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:432" class="idref" href="#Htr:432"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:430"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:431"><span class="id" title="variable">ls</span></a>)<br/>
&nbsp;&nbsp;(<a id="n1:433" class="idref" href="#n1:433"><span class="id" title="binder">n1</span></a> <a id="n2:434" class="idref" href="#n2:434"><span class="id" title="binder">n2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hle:435" class="idref" href="#Hle:435"><span class="id" title="binder">Hle</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#n1:433"><span class="id" title="variable">n1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n2:434"><span class="id" title="variable">n2</span></a>)<br/>
&nbsp;&nbsp;(<a id="n1th:436" class="idref" href="#n1th:436"><span class="id" title="binder">n1th</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hnth:437" class="idref" href="#Hnth:437"><span class="id" title="binder">Hnth</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:430"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:431"><span class="id" title="variable">ls</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n1:433"><span class="id" title="variable">n1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n1th:436"><span class="id" title="variable">n1th</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n1th:436"><span class="id" title="variable">n1th</span></a> (<a class="idref" href="VLSM.Lib.ListExtras.html#list_segment"><span class="id" title="definition">list_segment</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:431"><span class="id" title="variable">ls</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n1:433"><span class="id" title="variable">n1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n2:434"><span class="id" title="variable">n2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_suffix"><span class="id" title="lemma">finite_valid_trace_from_suffix</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_prefix"><span class="id" title="lemma">finite_valid_trace_from_prefix</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">n1</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnth</span> |- *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnth</span> |- *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#firstn_map"><span class="id" title="lemma">firstn_map</span></a>, <a class="idref" href="VLSM.Lib.ListExtras.html#take_nth"><span class="id" title="lemma">take_nth</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="can_produce_from_valid_trace" class="idref" href="#can_produce_from_valid_trace"><span class="id" title="lemma">can_produce_from_valid_trace</span></a><br/>
&nbsp;&nbsp;(<a id="si:438" class="idref" href="#si:438"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="tr:439" class="idref" href="#tr:439"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:440" class="idref" href="#Htr:440"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:438"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:439"><span class="id" title="variable">tr</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="item:441" class="idref" href="#item:441"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#item:441"><span class="id" title="variable">item</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.VLSM.html#tr:439"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#option_can_produce"><span class="id" title="definition">option_can_produce</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#item:441"><span class="id" title="variable">item</span></a>) (<a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="VLSM.Core.VLSM.html#item:441"><span class="id" title="variable">item</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">item</span> <span class="id" title="var">Hitem</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_split</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hitem</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">l1</span> &amp; <span class="id" title="var">l2</span> &amp; <span class="id" title="var">Heq</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eexists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_to"><span class="id" title="lemma">input_valid_transition_to</span></a>; <span class="id" title="var">cbn</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="can_emit_from_valid_trace" class="idref" href="#can_emit_from_valid_trace"><span class="id" title="lemma">can_emit_from_valid_trace</span></a><br/>
&nbsp;&nbsp;(<a id="si:442" class="idref" href="#si:442"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="m:443" class="idref" href="#m:443"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:444" class="idref" href="#tr:444"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:445" class="idref" href="#Htr:445"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace"><span class="id" title="definition">finite_valid_trace</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:442"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:444"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hm:446" class="idref" href="#Hm:446"><span class="id" title="binder">Hm</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#trace_has_message"><span class="id" title="definition">trace_has_message</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#field_selector"><span class="id" title="definition">field_selector</span></a> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#m:443"><span class="id" title="variable">m</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:444"><span class="id" title="variable">tr</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:443"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#can_emit_iff"><span class="id" title="lemma">can_emit_iff</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="lemma">Exists_exists</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hm</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">item</span> &amp; <span class="id" title="var">Hitem</span> &amp; <span class="id" title="var">Houtput</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">item</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#can_produce"><span class="id" title="definition">can_produce</span></a>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Houtput</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#can_produce_from_valid_trace"><span class="id" title="lemma">can_produce_from_valid_trace</span></a>; [<span class="id" title="tactic">apply</span> <span class="id" title="var">Htr</span> |].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab89"></a><h2 class="section">Finite valid traces with a final state</h2>


<div class="paragraph"> </div>

  It is often necessary to refer to know ending state of a <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a></span>.
  This is either the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a></span> of the <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a></span> <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a></span> in the trace, or
  the starting state.

<div class="paragraph"> </div>

  To avoid repeating reasoning about <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a></span>, we define variants of
  <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a></span> and <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace"><span class="id" title="definition">finite_valid_trace</span></a></span>
  that include the final state, and give appropriate induction principles.

<div class="paragraph"> </div>

  The final state of a finite portion of a valid trace.
  This is defined over <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a></span> because
  an initial state is necessary in case <code>tr</code> is empty,
  and this allows the definition to have only one non-implicit
  parameter.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a id="finite_valid_trace_from_to" class="idref" href="#finite_valid_trace_from_to"><span class="id" title="definition, inductive"><span id="finite_valid_trace_from_to_ind" class="id"><span id="finite_valid_trace_from_to_sind" class="id">finite_valid_trace_from_to</span></span></span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="finite_valid_trace_from_to_empty" class="idref" href="#finite_valid_trace_from_to_empty"><span class="id" title="constructor">finite_valid_trace_from_to_empty</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:449" class="idref" href="#s:449"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hs:450" class="idref" href="#Hs:450"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:449"><span class="id" title="variable">s</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to:447"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:449"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:449"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
| <a id="finite_valid_trace_from_to_extend" class="idref" href="#finite_valid_trace_from_to_extend"><span class="id" title="constructor">finite_valid_trace_from_to_extend</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:451" class="idref" href="#s:451"><span class="id" title="binder">s</span></a> <a id="f:452" class="idref" href="#f:452"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="tl:453" class="idref" href="#tl:453"><span class="id" title="binder">tl</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htl:454" class="idref" href="#Htl:454"><span class="id" title="binder">Htl</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to:447"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:451"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:452"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tl:453"><span class="id" title="variable">tl</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s':455" class="idref" href="#s':455"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="iom:456" class="idref" href="#iom:456"><span class="id" title="binder">iom</span></a> <a id="oom:457" class="idref" href="#oom:457"><span class="id" title="binder">oom</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="l:458" class="idref" href="#l:458"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:459" class="idref" href="#Ht:459"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:458"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':455"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:456"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:451"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:457"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to:447"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s':455"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:452"><span class="id" title="variable">f</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#Build_transition_item"><span class="id" title="constructor">Build_transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:458"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:456"><span class="id" title="variable">iom</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:451"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:457"><span class="id" title="variable">oom</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tl:453"><span class="id" title="variable">tl</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_from_to_singleton" class="idref" href="#finite_valid_trace_from_to_singleton"><span class="id" title="lemma">finite_valid_trace_from_to_singleton</span></a><br/>
&nbsp;&nbsp;(<a id="s:460" class="idref" href="#s:460"><span class="id" title="binder">s</span></a> <a id="s':461" class="idref" href="#s':461"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="iom:462" class="idref" href="#iom:462"><span class="id" title="binder">iom</span></a> <a id="oom:463" class="idref" href="#oom:463"><span class="id" title="binder">oom</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="l:464" class="idref" href="#l:464"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:464"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:460"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:462"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':461"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:463"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:460"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s':461"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.VLSM.html#Build_transition_item"><span class="id" title="constructor">Build_transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:464"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:462"><span class="id" title="variable">iom</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s':461"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:463"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_destination"><span class="id" title="lemma">input_valid_transition_destination</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_from_to_forget_last" class="idref" href="#finite_valid_trace_from_to_forget_last"><span class="id" title="lemma">finite_valid_trace_from_to_forget_last</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:465" class="idref" href="#s:465"><span class="id" title="binder">s</span></a> <a id="f:466" class="idref" href="#f:466"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="tr:467" class="idref" href="#tr:467"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:465"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:466"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:467"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:465"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:467"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_from_to_last" class="idref" href="#finite_valid_trace_from_to_last"><span class="id" title="lemma">finite_valid_trace_from_to_last</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:468" class="idref" href="#s:468"><span class="id" title="binder">s</span></a> <a id="f:469" class="idref" href="#f:469"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="tr:470" class="idref" href="#tr:470"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:468"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:469"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:470"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:468"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:470"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:469"><span class="id" title="variable">f</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_nil"><span class="id" title="lemma">finite_trace_last_nil</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_cons"><span class="id" title="lemma">finite_trace_last_cons</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_from_add_last" class="idref" href="#finite_valid_trace_from_add_last"><span class="id" title="lemma">finite_valid_trace_from_add_last</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:471" class="idref" href="#s:471"><span class="id" title="binder">s</span></a> <a id="f:472" class="idref" href="#f:472"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="tr:473" class="idref" href="#tr:473"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:471"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:473"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:471"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:473"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:472"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:471"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:472"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:473"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_nil"><span class="id" title="lemma">finite_trace_last_nil</span></a>; <span class="id" title="tactic">intros</span> &lt;-; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_cons"><span class="id" title="lemma">finite_trace_last_cons</span></a>; <span class="id" title="tactic">intros</span> &lt;-; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_from_to_first_pstate" class="idref" href="#finite_valid_trace_from_to_first_pstate"><span class="id" title="lemma">finite_valid_trace_from_to_first_pstate</span></a><br/>
&nbsp;&nbsp;(<a id="s:474" class="idref" href="#s:474"><span class="id" title="binder">s</span></a> <a id="f:475" class="idref" href="#f:475"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="tr:476" class="idref" href="#tr:476"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:474"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:475"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:476"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:474"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_forget_last"><span class="id" title="lemma">finite_valid_trace_from_to_forget_last</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_first_pstate"><span class="id" title="lemma">finite_valid_trace_first_pstate</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_from_to_last_pstate" class="idref" href="#finite_valid_trace_from_to_last_pstate"><span class="id" title="lemma">finite_valid_trace_from_to_last_pstate</span></a><br/>
&nbsp;&nbsp;(<a id="s:477" class="idref" href="#s:477"><span class="id" title="binder">s</span></a> <a id="f:478" class="idref" href="#f:478"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="tr:479" class="idref" href="#tr:479"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:477"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:478"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:479"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:478"><span class="id" title="variable">f</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_last"><span class="id" title="lemma">finite_valid_trace_from_to_last</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Htr</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_last_pstate"><span class="id" title="lemma">finite_valid_trace_last_pstate</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_forget_last"><span class="id" title="lemma">finite_valid_trace_from_to_forget_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_from_to_app" class="idref" href="#finite_valid_trace_from_to_app"><span class="id" title="lemma">finite_valid_trace_from_to_app</span></a><br/>
&nbsp;&nbsp;(<a id="m:480" class="idref" href="#m:480"><span class="id" title="binder">m</span></a> <a id="s:481" class="idref" href="#s:481"><span class="id" title="binder">s</span></a> <a id="f:482" class="idref" href="#f:482"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="ls:483" class="idref" href="#ls:483"><span class="id" title="binder">ls</span></a> <a id="ls':484" class="idref" href="#ls':484"><span class="id" title="binder">ls'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:481"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:480"><span class="id" title="variable">m</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:483"><span class="id" title="variable">ls</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:480"><span class="id" title="variable">m</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:482"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls':484"><span class="id" title="variable">ls'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:481"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:482"><span class="id" title="variable">f</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#ls:483"><span class="id" title="variable">ls</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls':484"><span class="id" title="variable">ls'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">Hl</span> <span class="id" title="var">Hl'</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">Hl</span>; [| <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_from_to_app_split" class="idref" href="#finite_valid_trace_from_to_app_split"><span class="id" title="lemma">finite_valid_trace_from_to_app_split</span></a><br/>
&nbsp;&nbsp;(<a id="s:485" class="idref" href="#s:485"><span class="id" title="binder">s</span></a> <a id="f:486" class="idref" href="#f:486"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="ls:487" class="idref" href="#ls:487"><span class="id" title="binder">ls</span></a> <a id="ls':488" class="idref" href="#ls':488"><span class="id" title="binder">ls'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:485"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:486"><span class="id" title="variable">f</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#ls:487"><span class="id" title="variable">ls</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls':488"><span class="id" title="variable">ls'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="m:489" class="idref" href="#m:489"><span class="id" title="binder">m</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:485"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:487"><span class="id" title="variable">ls</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:485"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:489"><span class="id" title="variable">m</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:487"><span class="id" title="variable">ls</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:489"><span class="id" title="variable">m</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:486"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls':488"><span class="id" title="variable">ls'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">s</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">ls</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">s</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_nil"><span class="id" title="lemma">finite_trace_last_nil</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Htr</span>. <span class="id" title="tactic">split</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_first_pstate"><span class="id" title="lemma">finite_valid_trace_from_to_first_pstate</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_cons"><span class="id" title="lemma">finite_trace_last_cons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHls</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htl</span> <span class="id" title="keyword">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_extend"><span class="id" title="constructor">finite_valid_trace_from_to_extend</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_from_to_snoc" class="idref" href="#finite_valid_trace_from_to_snoc"><span class="id" title="lemma">finite_valid_trace_from_to_snoc</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:490" class="idref" href="#s:490"><span class="id" title="binder">s</span></a> <a id="f:491" class="idref" href="#f:491"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="ls:492" class="idref" href="#ls:492"><span class="id" title="binder">ls</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) (<a id="item:493" class="idref" href="#item:493"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:490"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:491"><span class="id" title="variable">f</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#ls:492"><span class="id" title="variable">ls</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.VLSM.html#item:493"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="m:494" class="idref" href="#m:494"><span class="id" title="binder">m</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:490"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:492"><span class="id" title="variable">ls</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:490"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:494"><span class="id" title="variable">m</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:492"><span class="id" title="variable">ls</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_item"><span class="id" title="definition">input_valid_transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:494"><span class="id" title="variable">m</span></a> <a class="idref" href="VLSM.Core.VLSM.html#item:493"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#item:493"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:491"><span class="id" title="variable">f</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_app_split"><span class="id" title="lemma">finite_valid_trace_from_to_app_split</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Hitem</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hitem</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htl</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> (<span class="id" title="var">Htr</span> &amp; <span class="id" title="var">Hitem</span> &amp; &lt;-).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_app"><span class="id" title="lemma">finite_valid_trace_from_to_app</span></a>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">item</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_singleton"><span class="id" title="lemma">finite_valid_trace_from_to_singleton</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="finite_valid_trace_init_to" class="idref" href="#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> (<a id="si:495" class="idref" href="#si:495"><span class="id" title="binder">si</span></a> <a id="sf:496" class="idref" href="#sf:496"><span class="id" title="binder">sf</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="tr:497" class="idref" href="#tr:497"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:495"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sf:496"><span class="id" title="variable">sf</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:497"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:495"><span class="id" title="variable">si</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_init_add_last" class="idref" href="#finite_valid_trace_init_add_last"><span class="id" title="lemma">finite_valid_trace_init_add_last</span></a><br/>
&nbsp;&nbsp;(<a id="si:498" class="idref" href="#si:498"><span class="id" title="binder">si</span></a> <a id="sf:499" class="idref" href="#sf:499"><span class="id" title="binder">sf</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="tr:500" class="idref" href="#tr:500"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace"><span class="id" title="definition">finite_valid_trace</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:498"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:500"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:498"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:500"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sf:499"><span class="id" title="variable">sf</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:498"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sf:499"><span class="id" title="variable">sf</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:500"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Hinit</span>] <span class="id" title="var">Hf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_add_last"><span class="id" title="lemma">finite_valid_trace_from_add_last</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_init_to_forget_last" class="idref" href="#finite_valid_trace_init_to_forget_last"><span class="id" title="lemma">finite_valid_trace_init_to_forget_last</span></a><br/>
&nbsp;&nbsp;(<a id="si:501" class="idref" href="#si:501"><span class="id" title="binder">si</span></a> <a id="sf:502" class="idref" href="#sf:502"><span class="id" title="binder">sf</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="tr:503" class="idref" href="#tr:503"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:501"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sf:502"><span class="id" title="variable">sf</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:503"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace"><span class="id" title="definition">finite_valid_trace</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:501"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:503"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hinit</span> <span class="id" title="var">Htr</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_forget_last"><span class="id" title="lemma">finite_valid_trace_from_to_forget_last</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_init_to_last" class="idref" href="#finite_valid_trace_init_to_last"><span class="id" title="lemma">finite_valid_trace_init_to_last</span></a><br/>
&nbsp;&nbsp;(<a id="si:504" class="idref" href="#si:504"><span class="id" title="binder">si</span></a> <a id="sf:505" class="idref" href="#sf:505"><span class="id" title="binder">sf</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="tr:506" class="idref" href="#tr:506"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:504"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sf:505"><span class="id" title="variable">sf</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:506"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:504"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:506"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sf:505"><span class="id" title="variable">sf</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_last"><span class="id" title="lemma">finite_valid_trace_from_to_last</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_init_to_snoc" class="idref" href="#finite_valid_trace_init_to_snoc"><span class="id" title="lemma">finite_valid_trace_init_to_snoc</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="si:507" class="idref" href="#si:507"><span class="id" title="binder">si</span></a> <a id="sf:508" class="idref" href="#sf:508"><span class="id" title="binder">sf</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="tr:509" class="idref" href="#tr:509"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) (<a id="item:510" class="idref" href="#item:510"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:507"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sf:508"><span class="id" title="variable">sf</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#tr:509"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.VLSM.html#item:510"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:507"><span class="id" title="variable">si</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:507"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:509"><span class="id" title="variable">tr</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#tr:509"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_item"><span class="id" title="definition">input_valid_transition_item</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:507"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:509"><span class="id" title="variable">tr</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#item:510"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#item:510"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sf:508"><span class="id" title="variable">sf</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_snoc"><span class="id" title="lemma">finite_valid_trace_from_to_snoc</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">itauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_init_to_snoc_rev" class="idref" href="#finite_valid_trace_init_to_snoc_rev"><span class="id" title="lemma">finite_valid_trace_init_to_snoc_rev</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">{</span><a id="si:511" class="idref" href="#si:511"><span class="id" title="binder">si</span></a> <a id="sf:512" class="idref" href="#sf:512"><span class="id" title="binder">sf</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>} {<a id="tr:513" class="idref" href="#tr:513"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>} {<a id="item:514" class="idref" href="#item:514"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a><span class="id" title="notation">},</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:511"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sf:512"><span class="id" title="variable">sf</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:513"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_item"><span class="id" title="definition">input_valid_transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sf:512"><span class="id" title="variable">sf</span></a> <a class="idref" href="VLSM.Core.VLSM.html#item:514"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:511"><span class="id" title="variable">si</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#item:514"><span class="id" title="variable">item</span></a>) (<a class="idref" href="VLSM.Core.VLSM.html#tr:513"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.VLSM.html#item:514"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * [<span class="id" title="var">Htr</span> <span class="id" title="var">Hinit</span>] <span class="id" title="var">Hivt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_snoc"><span class="id" title="lemma">finite_valid_trace_from_to_snoc</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_last"><span class="id" title="lemma">finite_valid_trace_from_to_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hsf</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">sf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">itauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_init_to_prefix" class="idref" href="#finite_valid_trace_init_to_prefix"><span class="id" title="lemma">finite_valid_trace_init_to_prefix</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">{</span><a id="si:515" class="idref" href="#si:515"><span class="id" title="binder">si</span></a> <a id="sf:516" class="idref" href="#sf:516"><span class="id" title="binder">sf</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>} {<a id="pre:517" class="idref" href="#pre:517"><span class="id" title="binder">pre</span></a> <a id="tr:518" class="idref" href="#tr:518"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<span class="id" title="notation">},</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:515"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sf:516"><span class="id" title="variable">sf</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:518"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#pre:517"><span class="id" title="variable">pre</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">prefix_of</span><span class="id" title="notation">`</span> <a class="idref" href="VLSM.Core.VLSM.html#tr:518"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:515"><span class="id" title="variable">si</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:515"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#pre:517"><span class="id" title="variable">pre</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#pre:517"><span class="id" title="variable">pre</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * [] [<span class="id" title="var">suf</span> -&gt;]; <span class="id" title="tactic">split</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_app_split"><span class="id" title="lemma">finite_valid_trace_from_to_app_split</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_init_to_prefix_1" class="idref" href="#finite_valid_trace_init_to_prefix_1"><span class="id" title="lemma">finite_valid_trace_init_to_prefix_1</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">{</span><a id="si:519" class="idref" href="#si:519"><span class="id" title="binder">si</span></a> <a id="sf:520" class="idref" href="#sf:520"><span class="id" title="binder">sf</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>} {<a id="pre:521" class="idref" href="#pre:521"><span class="id" title="binder">pre</span></a> <a id="suf:522" class="idref" href="#suf:522"><span class="id" title="binder">suf</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<span class="id" title="notation">},</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:519"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sf:520"><span class="id" title="variable">sf</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre:521"><span class="id" title="variable">pre</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Core.VLSM.html#suf:522"><span class="id" title="variable">suf</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:519"><span class="id" title="variable">si</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:519"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#pre:521"><span class="id" title="variable">pre</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#pre:521"><span class="id" title="variable">pre</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_prefix"><span class="id" title="lemma">finite_valid_trace_init_to_prefix</span></a>; [| <span class="id" title="tactic">eexists</span>]. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="extend_right_finite_trace_from_to" class="idref" href="#extend_right_finite_trace_from_to"><span class="id" title="lemma">extend_right_finite_trace_from_to</span></a><br/>
&nbsp;&nbsp;(<a id="s1:523" class="idref" href="#s1:523"><span class="id" title="binder">s1</span></a> <a id="s2:524" class="idref" href="#s2:524"><span class="id" title="binder">s2</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="ts:525" class="idref" href="#ts:525"><span class="id" title="binder">ts</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Ht12:526" class="idref" href="#Ht12:526"><span class="id" title="binder">Ht12</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:523"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s2:524"><span class="id" title="variable">s2</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ts:525"><span class="id" title="variable">ts</span></a>)<br/>
&nbsp;&nbsp;(<a id="l3:527" class="idref" href="#l3:527"><span class="id" title="binder">l3</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="iom3:528" class="idref" href="#iom3:528"><span class="id" title="binder">iom3</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="s3:529" class="idref" href="#s3:529"><span class="id" title="binder">s3</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="oom3:530" class="idref" href="#oom3:530"><span class="id" title="binder">oom3</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hv23:531" class="idref" href="#Hv23:531"><span class="id" title="binder">Hv23</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l3:527"><span class="id" title="variable">l3</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s2:524"><span class="id" title="variable">s2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom3:528"><span class="id" title="variable">iom3</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s3:529"><span class="id" title="variable">s3</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom3:530"><span class="id" title="variable">oom3</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:523"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s3:529"><span class="id" title="variable">s3</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#ts:525"><span class="id" title="variable">ts</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.VLSM.html#Build_transition_item"><span class="id" title="constructor">Build_transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l3:527"><span class="id" title="variable">l3</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom3:528"><span class="id" title="variable">iom3</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s3:529"><span class="id" title="variable">s3</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom3:530"><span class="id" title="variable">oom3</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Ht12</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_singleton"><span class="id" title="lemma">finite_valid_trace_from_to_singleton</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_comm_cons"><span class="id" title="lemma">app_comm_cons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_extend"><span class="id" title="constructor">finite_valid_trace_from_to_extend</span></a>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_from_to_rev_ind" class="idref" href="#finite_valid_trace_from_to_rev_ind"><span class="id" title="lemma">finite_valid_trace_from_to_rev_ind</span></a><br/>
&nbsp;&nbsp;(<a id="P:532" class="idref" href="#P:532"><span class="id" title="binder">P</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="Hempty:535" class="idref" href="#Hempty:535"><span class="id" title="binder">Hempty</span></a> : <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="si:533" class="idref" href="#si:533"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="Hsi:534" class="idref" href="#Hsi:534"><span class="id" title="binder">Hsi</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:533"><span class="id" title="variable">si</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.VLSM.html#P:532"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:533"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:533"><span class="id" title="variable">si</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hextend:546" class="idref" href="#Hextend:546"><span class="id" title="binder">Hextend</span></a> : <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="si:536" class="idref" href="#si:536"><span class="id" title="binder">si</span></a> <a id="s:537" class="idref" href="#s:537"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="tr:538" class="idref" href="#tr:538"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="IHtr:539" class="idref" href="#IHtr:539"><span class="id" title="binder">IHtr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#P:532"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:536"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:537"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:538"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:540" class="idref" href="#Htr:540"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:536"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:537"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:538"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="sf:541" class="idref" href="#sf:541"><span class="id" title="binder">sf</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="iom:542" class="idref" href="#iom:542"><span class="id" title="binder">iom</span></a> <a id="oom:543" class="idref" href="#oom:543"><span class="id" title="binder">oom</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="l:544" class="idref" href="#l:544"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:545" class="idref" href="#Ht:545"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:544"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:537"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:542"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#sf:541"><span class="id" title="variable">sf</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:543"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#P:532"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:536"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sf:541"><span class="id" title="variable">sf</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#tr:538"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.VLSM.html#Build_transition_item"><span class="id" title="constructor">Build_transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:544"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:542"><span class="id" title="variable">iom</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sf:541"><span class="id" title="variable">sf</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:543"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)) :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="si:547" class="idref" href="#si:547"><span class="id" title="binder">si</span></a> <a id="sf:548" class="idref" href="#sf:548"><span class="id" title="binder">sf</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="tr:549" class="idref" href="#tr:549"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:547"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sf:548"><span class="id" title="variable">sf</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:549"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#P:532"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:547"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sf:548"><span class="id" title="variable">sf</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:549"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">si</span> <span class="id" title="var">sf</span> <span class="id" title="var">tr</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">sf</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">tr</span> <span class="id" title="keyword">using</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#rev_ind"><span class="id" title="lemma">rev_ind</span></a>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">sf</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hempty</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_app_split"><span class="id" title="lemma">finite_valid_trace_from_to_app_split</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Hstep</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hstep</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htl</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hextend</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHtr</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_init_to_rev_ind" class="idref" href="#finite_valid_trace_init_to_rev_ind"><span class="id" title="lemma">finite_valid_trace_init_to_rev_ind</span></a><br/>
&nbsp;&nbsp;(<a id="P:550" class="idref" href="#P:550"><span class="id" title="binder">P</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="Hempty:553" class="idref" href="#Hempty:553"><span class="id" title="binder">Hempty</span></a> : <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="si:551" class="idref" href="#si:551"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="Hsi:552" class="idref" href="#Hsi:552"><span class="id" title="binder">Hsi</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:551"><span class="id" title="variable">si</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.VLSM.html#P:550"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:551"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:551"><span class="id" title="variable">si</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hextend:564" class="idref" href="#Hextend:564"><span class="id" title="binder">Hextend</span></a> : <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="si:554" class="idref" href="#si:554"><span class="id" title="binder">si</span></a> <a id="s:555" class="idref" href="#s:555"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="tr:556" class="idref" href="#tr:556"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="IHtr:557" class="idref" href="#IHtr:557"><span class="id" title="binder">IHtr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#P:550"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:554"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:555"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:556"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:558" class="idref" href="#Htr:558"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:554"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:555"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:556"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="sf:559" class="idref" href="#sf:559"><span class="id" title="binder">sf</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="iom:560" class="idref" href="#iom:560"><span class="id" title="binder">iom</span></a> <a id="oom:561" class="idref" href="#oom:561"><span class="id" title="binder">oom</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="l:562" class="idref" href="#l:562"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:563" class="idref" href="#Ht:563"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:562"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:555"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:560"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#sf:559"><span class="id" title="variable">sf</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:561"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#P:550"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:554"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sf:559"><span class="id" title="variable">sf</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#tr:556"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.VLSM.html#Build_transition_item"><span class="id" title="constructor">Build_transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:562"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:560"><span class="id" title="variable">iom</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sf:559"><span class="id" title="variable">sf</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:561"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)) :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="si:565" class="idref" href="#si:565"><span class="id" title="binder">si</span></a> <a id="sf:566" class="idref" href="#sf:566"><span class="id" title="binder">sf</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="tr:567" class="idref" href="#tr:567"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:565"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sf:566"><span class="id" title="variable">sf</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:567"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#P:550"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:565"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sf:566"><span class="id" title="variable">sf</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:567"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">si</span> <span class="id" title="var">sf</span> <span class="id" title="var">tr</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Hinit</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_rev_ind"><span class="id" title="lemma">finite_valid_trace_from_to_rev_ind</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hempty</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hextend</span> <span class="id" title="keyword">with</span> <span class="id" title="var">s</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  An inductive valid trace property which also identifies the final message.

<div class="paragraph"> </div>

  As shown by the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_emit_valid_state_message"><span class="id" title="lemma">finite_valid_trace_init_to_emit_valid_state_message</span></a></span>  and
  <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_emit_valid_state_message_rev"><span class="id" title="lemma">finite_valid_trace_init_to_emit_valid_state_message_rev</span></a></span> lemmas below, this definition
  is the trace-equivalent of the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a></span>erty.

<div class="paragraph"> </div>

  This inductive property is reflecting that fact that a that <code>valid_state_message_prop (s, om)</code>
  holds only if <code>s</code> and <code>om</code> are the final state and output of an initial valid
  trace, or a pair of an initial state and option-initial message.
  It follows the inductive structure of <code>valid_state_message_prop</code>, but augments every
  branch of the tree with such an exhibiting trace.

<div class="paragraph"> </div>

  Its main benefit is that when performing induction over it, one can also use the
  induction hypothesis for the (trace generating the) message being received.

<div class="paragraph"> </div>

  Although this definition could be used directly, we prefer to use it to derive
  a stronger induction principle (<span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_rev_strong_ind"><span class="id" title="lemma">finite_valid_trace_init_to_rev_strong_ind</span></a></span>)
  over <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a></span> traces.

</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a id="finite_valid_trace_init_to_emit" class="idref" href="#finite_valid_trace_init_to_emit"><span class="id" title="definition, inductive"><span id="finite_valid_trace_init_to_emit_ind" class="id"><span id="finite_valid_trace_init_to_emit_sind" class="id">finite_valid_trace_init_to_emit</span></span></span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="finite_valid_trace_init_to_emit_empty" class="idref" href="#finite_valid_trace_init_to_emit_empty"><span class="id" title="constructor">finite_valid_trace_init_to_emit_empty</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="is:570" class="idref" href="#is:570"><span class="id" title="binder">is</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="om:571" class="idref" href="#om:571"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="His:572" class="idref" href="#His:572"><span class="id" title="binder">His</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:570"><span class="id" title="variable">is</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Him:573" class="idref" href="#Him:573"><span class="id" title="binder">Him</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#option_initial_message_prop"><span class="id" title="definition">option_initial_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:571"><span class="id" title="variable">om</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_emit:568"><span class="id" title="inductive">finite_valid_trace_init_to_emit</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:570"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:570"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:571"><span class="id" title="variable">om</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
| <a id="finite_valid_trace_init_to_emit_extend" class="idref" href="#finite_valid_trace_init_to_emit_extend"><span class="id" title="constructor">finite_valid_trace_init_to_emit_extend</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="is:574" class="idref" href="#is:574"><span class="id" title="binder">is</span></a> <a id="s:575" class="idref" href="#s:575"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="_om:576" class="idref" href="#_om:576"><span class="id" title="binder">_om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="tl:577" class="idref" href="#tl:577"><span class="id" title="binder">tl</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hs:578" class="idref" href="#Hs:578"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_emit:568"><span class="id" title="inductive">finite_valid_trace_init_to_emit</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:574"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:575"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#_om:576"><span class="id" title="variable">_om</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tl:577"><span class="id" title="variable">tl</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="iom_is:579" class="idref" href="#iom_is:579"><span class="id" title="binder">iom_is</span></a> <a id="iom_s:580" class="idref" href="#iom_s:580"><span class="id" title="binder">iom_s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="iom:581" class="idref" href="#iom:581"><span class="id" title="binder">iom</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="iom_tl:582" class="idref" href="#iom_tl:582"><span class="id" title="binder">iom_tl</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hiom:583" class="idref" href="#Hiom:583"><span class="id" title="binder">Hiom</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_emit:568"><span class="id" title="inductive">finite_valid_trace_init_to_emit</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom_is:579"><span class="id" title="variable">iom_is</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom_s:580"><span class="id" title="variable">iom_s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:581"><span class="id" title="variable">iom</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom_tl:582"><span class="id" title="variable">iom_tl</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:584" class="idref" href="#l:584"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hv:585" class="idref" href="#Hv:585"><span class="id" title="binder">Hv</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:584"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:575"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:581"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s':586" class="idref" href="#s':586"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="oom:587" class="idref" href="#oom:587"><span class="id" title="binder">oom</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:588" class="idref" href="#Ht:588"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:584"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:575"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:581"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':586"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:587"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_emit:568"><span class="id" title="inductive">finite_valid_trace_init_to_emit</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:574"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s':586"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:587"><span class="id" title="variable">oom</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#tl:577"><span class="id" title="variable">tl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.VLSM.html#Build_transition_item"><span class="id" title="constructor">Build_transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:584"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:581"><span class="id" title="variable">iom</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s':586"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:587"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_init_to_emit_initial_state" class="idref" href="#finite_valid_trace_init_to_emit_initial_state"><span class="id" title="lemma">finite_valid_trace_init_to_emit_initial_state</span></a><br/>
&nbsp;&nbsp;(<a id="is:589" class="idref" href="#is:589"><span class="id" title="binder">is</span></a> <a id="f:590" class="idref" href="#f:590"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="om:591" class="idref" href="#om:591"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="tl:592" class="idref" href="#tl:592"><span class="id" title="binder">tl</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;(<a id="Htl:593" class="idref" href="#Htl:593"><span class="id" title="binder">Htl</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_emit"><span class="id" title="inductive">finite_valid_trace_init_to_emit</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:589"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:590"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:591"><span class="id" title="variable">om</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tl:592"><span class="id" title="variable">tl</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:589"><span class="id" title="variable">is</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Htl</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  A property characterizing the "emit" message of <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_emit"><span class="id" title="inductive">finite_valid_trace_init_to_emit</span></a></span>.

<div class="paragraph"> </div>

  There are two cases: (1) either the trace is empty, and then we require
  the message to be initial; or (2) the trace is not empty, and the message
  is the output of the last transition.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="empty_initial_message_or_final_output" class="idref" href="#empty_initial_message_or_final_output"><span class="id" title="definition">empty_initial_message_or_final_output</span></a><br/>
&nbsp;&nbsp;(<a id="tl:594" class="idref" href="#tl:594"><span class="id" title="binder">tl</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)) (<a id="om:595" class="idref" href="#om:595"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) : <span class="id" title="keyword">Prop</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Lib.ListExtras.html#has_last_or_null"><span class="id" title="lemma">has_last_or_null</span></a> <span class="id" title="var">tl</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">_</span> [<span class="id" title="var">item</span> <span class="id" title="var">_</span>]] | <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <span class="id" title="var">item</span>  <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">om</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<a class="idref" href="VLSM.Core.VLSM.html#option_initial_message_prop"><span class="id" title="definition">option_initial_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <span class="id" title="var">om</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_init_to_emit_output" class="idref" href="#finite_valid_trace_init_to_emit_output"><span class="id" title="lemma">finite_valid_trace_init_to_emit_output</span></a><br/>
&nbsp;&nbsp;(<a id="s:596" class="idref" href="#s:596"><span class="id" title="binder">s</span></a> <a id="f:597" class="idref" href="#f:597"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="om:598" class="idref" href="#om:598"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="tl:599" class="idref" href="#tl:599"><span class="id" title="binder">tl</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htl:600" class="idref" href="#Htl:600"><span class="id" title="binder">Htl</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_emit"><span class="id" title="inductive">finite_valid_trace_init_to_emit</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:596"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:597"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:598"><span class="id" title="variable">om</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tl:599"><span class="id" title="variable">tl</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#empty_initial_message_or_final_output"><span class="id" title="definition">empty_initial_message_or_final_output</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tl:599"><span class="id" title="variable">tl</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:598"><span class="id" title="variable">om</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#empty_initial_message_or_final_output"><span class="id" title="definition">empty_initial_message_or_final_output</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_list_last</span> <span class="id" title="var">tl</span> <span class="id" title="var">tl'</span> <span class="id" title="var">item</span> <span class="id" title="var">Heqtl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htl</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">tl0</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqtl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htl</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">tl'</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">congruence</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Heqtl</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">Heqtl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_inj_tail"><span class="id" title="lemma">app_inj_tail</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#proj2"><span class="id" title="lemma">proj2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqtl</span>; <span class="id" title="tactic">subst</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_init_to_emit_valid_state_message" class="idref" href="#finite_valid_trace_init_to_emit_valid_state_message"><span class="id" title="lemma">finite_valid_trace_init_to_emit_valid_state_message</span></a><br/>
&nbsp;&nbsp;(<a id="s:601" class="idref" href="#s:601"><span class="id" title="binder">s</span></a> <a id="f:602" class="idref" href="#f:602"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="om:603" class="idref" href="#om:603"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="tl:604" class="idref" href="#tl:604"><span class="id" title="binder">tl</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htl:605" class="idref" href="#Htl:605"><span class="id" title="binder">Htl</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_emit"><span class="id" title="inductive">finite_valid_trace_init_to_emit</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:601"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:602"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:603"><span class="id" title="variable">om</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tl:604"><span class="id" title="variable">tl</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:602"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:603"><span class="id" title="variable">om</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Htl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_initial_state_message"><span class="id" title="constructor">valid_initial_state_message</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_generated_state_message"><span class="id" title="constructor">valid_generated_state_message</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">s</span> <span class="id" title="var">_om</span> <span class="id" title="var">iom_s</span> <span class="id" title="var">iom</span> <span class="id" title="var">l0</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_init_to_emit_valid_state_message_rev" class="idref" href="#finite_valid_trace_init_to_emit_valid_state_message_rev"><span class="id" title="lemma">finite_valid_trace_init_to_emit_valid_state_message_rev</span></a><br/>
&nbsp;&nbsp;(<a id="sf:606" class="idref" href="#sf:606"><span class="id" title="binder">sf</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="om:607" class="idref" href="#om:607"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hp:608" class="idref" href="#Hp:608"><span class="id" title="binder">Hp</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sf:606"><span class="id" title="variable">sf</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:607"><span class="id" title="variable">om</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="s:609" class="idref" href="#s:609"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="tl:610" class="idref" href="#tl:610"><span class="id" title="binder">tl</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_emit"><span class="id" title="inductive">finite_valid_trace_init_to_emit</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:609"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sf:606"><span class="id" title="variable">sf</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:607"><span class="id" title="variable">om</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tl:610"><span class="id" title="variable">tl</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>; <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHHp1</span> <span class="id" title="keyword">as</span> [<span class="id" title="keyword">is</span> [<span class="id" title="var">tl</span> <span class="id" title="var">Hs</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHHp2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">om_is</span> [<span class="id" title="var">om_tl</span> <span class="id" title="var">Hom</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_emit_extend"><span class="id" title="constructor">finite_valid_trace_init_to_emit_extend</span></a>; <span class="id" title="var">cycle</span> 1.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_init_to_emit_forget_emit" class="idref" href="#finite_valid_trace_init_to_emit_forget_emit"><span class="id" title="lemma">finite_valid_trace_init_to_emit_forget_emit</span></a><br/>
&nbsp;&nbsp;(<a id="s:611" class="idref" href="#s:611"><span class="id" title="binder">s</span></a> <a id="f:612" class="idref" href="#f:612"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="_om:613" class="idref" href="#_om:613"><span class="id" title="binder">_om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="tl:614" class="idref" href="#tl:614"><span class="id" title="binder">tl</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htl:615" class="idref" href="#Htl:615"><span class="id" title="binder">Htl</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_emit"><span class="id" title="inductive">finite_valid_trace_init_to_emit</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:611"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:612"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#_om:613"><span class="id" title="variable">_om</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tl:614"><span class="id" title="variable">tl</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:611"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:612"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tl:614"><span class="id" title="variable">tl</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_emit_initial_state"><span class="id" title="lemma">finite_valid_trace_init_to_emit_initial_state</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htl</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hinit</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hinit</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Htl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_is_valid"><span class="id" title="lemma">initial_state_is_valid</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_app"><span class="id" title="lemma">finite_valid_trace_from_to_app</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">s</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_singleton"><span class="id" title="lemma">finite_valid_trace_from_to_singleton</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_emit_valid_state_message"><span class="id" title="lemma">finite_valid_trace_init_to_emit_valid_state_message</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htl1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_emit_valid_state_message"><span class="id" title="lemma">finite_valid_trace_init_to_emit_valid_state_message</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htl2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">firstorder</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_init_to_add_emit" class="idref" href="#finite_valid_trace_init_to_add_emit"><span class="id" title="lemma">finite_valid_trace_init_to_add_emit</span></a><br/>
&nbsp;&nbsp;(<a id="s:616" class="idref" href="#s:616"><span class="id" title="binder">s</span></a> <a id="f:617" class="idref" href="#f:617"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="tl:618" class="idref" href="#tl:618"><span class="id" title="binder">tl</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htl:619" class="idref" href="#Htl:619"><span class="id" title="binder">Htl</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:616"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:617"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tl:618"><span class="id" title="variable">tl</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_emit"><span class="id" title="inductive">finite_valid_trace_init_to_emit</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:616"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:617"><span class="id" title="variable">f</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_output"><span class="id" title="definition">finite_trace_last_output</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tl:618"><span class="id" title="variable">tl</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#tl:618"><span class="id" title="variable">tl</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Htl</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_rev_ind"><span class="id" title="lemma">finite_valid_trace_init_to_rev_ind</span></a>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">constructor</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_output_is_last"><span class="id" title="lemma">finite_trace_last_output_is_last</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">_</span> [[<span class="id" title="var">_s</span> <span class="id" title="var">Hiom</span>] <span class="id" title="var">Hv</span>]] <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_emit_valid_state_message_rev"><span class="id" title="lemma">finite_valid_trace_init_to_emit_valid_state_message_rev</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hiom</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [<span class="id" title="var">iom_s</span> [<span class="id" title="var">iom_tr</span> <span class="id" title="var">Hiom_tr</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_emit_extend"><span class="id" title="constructor">finite_valid_trace_init_to_emit_extend</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">IHHtl</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hiom_tr</span> <span class="id" title="var">_</span> <span class="id" title="var">Hv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Ht</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Inspired by <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_add_emit"><span class="id" title="lemma">finite_valid_trace_init_to_add_emit</span></a></span>, we can derive
  an induction principle for <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a></span> stronger than
  <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_rev_ind"><span class="id" title="lemma">finite_valid_trace_init_to_rev_ind</span></a></span>, which allows the induction hypothesis
  to be used for the trace generating the message received in the last transition.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_init_to_rev_strong_ind" class="idref" href="#finite_valid_trace_init_to_rev_strong_ind"><span class="id" title="lemma">finite_valid_trace_init_to_rev_strong_ind</span></a><br/>
&nbsp;&nbsp;(<a id="P:620" class="idref" href="#P:620"><span class="id" title="binder">P</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="Hempty:623" class="idref" href="#Hempty:623"><span class="id" title="binder">Hempty</span></a> : <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="is:621" class="idref" href="#is:621"><span class="id" title="binder">is</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="His:622" class="idref" href="#His:622"><span class="id" title="binder">His</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:621"><span class="id" title="variable">is</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.VLSM.html#P:620"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:621"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:621"><span class="id" title="variable">is</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hextend:640" class="idref" href="#Hextend:640"><span class="id" title="binder">Hextend</span></a> : <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="is:624" class="idref" href="#is:624"><span class="id" title="binder">is</span></a> <a id="s:625" class="idref" href="#s:625"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="tr:626" class="idref" href="#tr:626"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="IHs:627" class="idref" href="#IHs:627"><span class="id" title="binder">IHs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#P:620"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:624"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:625"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:626"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hs:628" class="idref" href="#Hs:628"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:624"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:625"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:626"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="iom:629" class="idref" href="#iom:629"><span class="id" title="binder">iom</span></a> <a id="iom_si:630" class="idref" href="#iom_si:630"><span class="id" title="binder">iom_si</span></a> <a id="iom_s:631" class="idref" href="#iom_s:631"><span class="id" title="binder">iom_s</span></a> <a id="iom_tr:632" class="idref" href="#iom_tr:632"><span class="id" title="binder">iom_tr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Heqiom:633" class="idref" href="#Heqiom:633"><span class="id" title="binder">Heqiom</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#empty_initial_message_or_final_output"><span class="id" title="definition">empty_initial_message_or_final_output</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom_tr:632"><span class="id" title="variable">iom_tr</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:629"><span class="id" title="variable">iom</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="IHiom:634" class="idref" href="#IHiom:634"><span class="id" title="binder">IHiom</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#P:620"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom_si:630"><span class="id" title="variable">iom_si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom_s:631"><span class="id" title="variable">iom_s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom_tr:632"><span class="id" title="variable">iom_tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hiom:635" class="idref" href="#Hiom:635"><span class="id" title="binder">Hiom</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom_si:630"><span class="id" title="variable">iom_si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom_s:631"><span class="id" title="variable">iom_s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom_tr:632"><span class="id" title="variable">iom_tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="sf:636" class="idref" href="#sf:636"><span class="id" title="binder">sf</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="oom:637" class="idref" href="#oom:637"><span class="id" title="binder">oom</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="l:638" class="idref" href="#l:638"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:639" class="idref" href="#Ht:639"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:638"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:625"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:629"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#sf:636"><span class="id" title="variable">sf</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:637"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#P:620"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:624"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sf:636"><span class="id" title="variable">sf</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#tr:626"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.VLSM.html#Build_transition_item"><span class="id" title="constructor">Build_transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:638"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:629"><span class="id" title="variable">iom</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sf:636"><span class="id" title="variable">sf</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:637"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)) :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="si:641" class="idref" href="#si:641"><span class="id" title="binder">si</span></a> <a id="sf:642" class="idref" href="#sf:642"><span class="id" title="binder">sf</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="tr:643" class="idref" href="#tr:643"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:641"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sf:642"><span class="id" title="variable">sf</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:643"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#P:620"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.VLSM.html#si:641"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sf:642"><span class="id" title="variable">sf</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:643"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="keyword">is</span> <span class="id" title="var">sf</span> <span class="id" title="var">tr</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_add_emit"><span class="id" title="lemma">finite_valid_trace_init_to_add_emit</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_output"><span class="id" title="definition">finite_trace_last_output</span></a> <span class="id" title="var">tr</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">om</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Heqom</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hempty</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hivt</span> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <span class="id" title="var">l0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">iom</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">oom</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_emit_valid_state_message"><span class="id" title="lemma">finite_valid_trace_init_to_emit_valid_state_message</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_emit_valid_state_message"><span class="id" title="lemma">finite_valid_trace_init_to_emit_valid_state_message</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_emit_output"><span class="id" title="lemma">finite_valid_trace_init_to_emit_output</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr2</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Houtput</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_emit_forget_emit"><span class="id" title="lemma">finite_valid_trace_init_to_emit_forget_emit</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_emit_forget_emit"><span class="id" title="lemma">finite_valid_trace_init_to_emit_forget_emit</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">Hextend</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">IHHtr1</span> <span class="id" title="var">Htr1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Houtput</span> <span class="id" title="var">IHHtr2</span> <span class="id" title="var">Htr2</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hivt</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab90"></a><h3 class="section">Infinite protocol traces</h3>


<div class="paragraph"> </div>

  We now define <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#infinite_valid_trace"><span class="id" title="definition">infinite_valid_trace</span></a></span>s. The definitions
  resemble their finite counterparts, adapted to the technical
  necessities of defining infinite objects. Notably, <code>steps</code> is
  stored as a stream, as opposed to a list.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">CoInductive</span> <a id="infinite_valid_trace_from" class="idref" href="#infinite_valid_trace_from"><span class="id" title="inductive">infinite_valid_trace_from</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.Streams.html#Stream"><span class="id" title="inductive">Stream</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="infinite_valid_trace_from_extend" class="idref" href="#infinite_valid_trace_from_extend"><span class="id" title="constructor">infinite_valid_trace_from_extend</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:646" class="idref" href="#s:646"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="tl:647" class="idref" href="#tl:647"><span class="id" title="binder">tl</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.Streams.html#Stream"><span class="id" title="inductive">Stream</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htl:648" class="idref" href="#Htl:648"><span class="id" title="binder">Htl</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#infinite_valid_trace_from:644"><span class="id" title="inductive">infinite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:646"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tl:647"><span class="id" title="variable">tl</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s':649" class="idref" href="#s':649"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="iom:650" class="idref" href="#iom:650"><span class="id" title="binder">iom</span></a> <a id="oom:651" class="idref" href="#oom:651"><span class="id" title="binder">oom</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="l:652" class="idref" href="#l:652"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:653" class="idref" href="#Ht:653"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:652"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':649"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:650"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:646"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:651"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#infinite_valid_trace_from:644"><span class="id" title="inductive">infinite_valid_trace_from</span></a>  <a class="idref" href="VLSM.Core.VLSM.html#s':649"><span class="id" title="variable">s'</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.Streams.html#Cons"><span class="id" title="constructor">Cons</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#Build_transition_item"><span class="id" title="constructor">Build_transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:652"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:650"><span class="id" title="variable">iom</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:646"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:651"><span class="id" title="variable">oom</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#tl:647"><span class="id" title="variable">tl</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="infinite_valid_trace" class="idref" href="#infinite_valid_trace"><span class="id" title="definition">infinite_valid_trace</span></a> (<a id="s:654" class="idref" href="#s:654"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="st:655" class="idref" href="#st:655"><span class="id" title="binder">st</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.Streams.html#Stream"><span class="id" title="inductive">Stream</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#infinite_valid_trace_from"><span class="id" title="inductive">infinite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:654"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#st:655"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:654"><span class="id" title="variable">s</span></a>.<br/>

<br/>
</div>

<div class="doc">
  As for the finite case, the following lemmas help decompose teh above
  definitions, mostly reducing them to properties about their finite segments.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="infinite_valid_trace_consecutive_valid_transition" class="idref" href="#infinite_valid_trace_consecutive_valid_transition"><span class="id" title="lemma">infinite_valid_trace_consecutive_valid_transition</span></a><br/>
&nbsp;&nbsp;(<a id="is:656" class="idref" href="#is:656"><span class="id" title="binder">is</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:657" class="idref" href="#tr:657"><span class="id" title="binder">tr</span></a> <a id="tr2:658" class="idref" href="#tr2:658"><span class="id" title="binder">tr2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.Streams.html#Stream"><span class="id" title="inductive">Stream</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr1:659" class="idref" href="#tr1:659"><span class="id" title="binder">tr1</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="te1:660" class="idref" href="#te1:660"><span class="id" title="binder">te1</span></a> <a id="te2:661" class="idref" href="#te2:661"><span class="id" title="binder">te2</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:662" class="idref" href="#Htr:662"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#infinite_valid_trace_from"><span class="id" title="inductive">infinite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:656"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:657"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;(<a id="Heq:663" class="idref" href="#Heq:663"><span class="id" title="binder">Heq</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#tr:657"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Lib.StreamExtras.html#stream_app"><span class="id" title="definition">stream_app</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#tr1:659"><span class="id" title="variable">tr1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.VLSM.html#te1:660"><span class="id" title="variable">te1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te2:661"><span class="id" title="variable">te2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#tr2:658"><span class="id" title="variable">tr2</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te2:661"><span class="id" title="variable">te2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te1:660"><span class="id" title="variable">te1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te2:661"><span class="id" title="variable">te2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te2:661"><span class="id" title="variable">te2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="VLSM.Core.VLSM.html#te2:661"><span class="id" title="variable">te2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="keyword">is</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">tr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">tr1</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> -&gt; <span class="id" title="keyword">is</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htl</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHtr1</span> (<a class="idref" href="VLSM.Lib.StreamExtras.html#stream_app"><span class="id" title="definition">stream_app</span></a> (<span class="id" title="var">tr1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><span class="id" title="var">te1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <span class="id" title="var">te2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a>) <span class="id" title="var">tr2</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">Heq</span> <span class="id" title="keyword">is</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHtr1</span> <span class="id" title="var">s</span> <span class="id" title="var">Htl</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="infinite_valid_trace_from_app_iff" class="idref" href="#infinite_valid_trace_from_app_iff"><span class="id" title="lemma">infinite_valid_trace_from_app_iff</span></a><br/>
&nbsp;&nbsp;(<a id="s:664" class="idref" href="#s:664"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="ls:665" class="idref" href="#ls:665"><span class="id" title="binder">ls</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="ls':666" class="idref" href="#ls':666"><span class="id" title="binder">ls'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.Streams.html#Stream"><span class="id" title="inductive">Stream</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="s':667" class="idref" href="#s':667"><span class="id" title="binder">s'</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:664"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:665"><span class="id" title="variable">ls</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:664"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:665"><span class="id" title="variable">ls</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.VLSM.html#infinite_valid_trace_from"><span class="id" title="inductive">infinite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s':667"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls':666"><span class="id" title="variable">ls'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#infinite_valid_trace_from"><span class="id" title="inductive">infinite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:664"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Lib.StreamExtras.html#stream_app"><span class="id" title="definition">stream_app</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:665"><span class="id" title="variable">ls</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls':666"><span class="id" title="variable">ls'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">ls'</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ls</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> 1.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">Hls'</span>; <span class="id" title="tactic">split</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hls'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_origin"><span class="id" title="lemma">input_valid_transition_origin</span></a> <span class="id" title="var">Ht</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Htr'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#infinite_valid_trace_from_extend"><span class="id" title="constructor">infinite_valid_trace_from_extend</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHls</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>. <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Htl</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">s'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_cons"><span class="id" title="lemma">finite_trace_last_cons</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">IHls</span> <span class="id" title="var">s1</span> <span class="id" title="var">ls'</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Htl</span> <span class="id" title="keyword">as</span> []; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">unfold</span> <span class="id" title="var">s'</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_cons"><span class="id" title="lemma">finite_trace_last_cons</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="infinite_valid_trace_from_prefix" class="idref" href="#infinite_valid_trace_from_prefix"><span class="id" title="lemma">infinite_valid_trace_from_prefix</span></a><br/>
&nbsp;&nbsp;(<a id="s:668" class="idref" href="#s:668"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="ls:669" class="idref" href="#ls:669"><span class="id" title="binder">ls</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.Streams.html#Stream"><span class="id" title="inductive">Stream</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:670" class="idref" href="#Htr:670"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#infinite_valid_trace_from"><span class="id" title="inductive">infinite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:668"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:669"><span class="id" title="variable">ls</span></a>)<br/>
&nbsp;&nbsp;(<a id="n:671" class="idref" href="#n:671"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:668"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Lib.StreamExtras.html#stream_prefix"><span class="id" title="definition">stream_prefix</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:669"><span class="id" title="variable">ls</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n:671"><span class="id" title="variable">n</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Lib.StreamExtras.html#stream_prefix_suffix"><span class="id" title="lemma">stream_prefix_suffix</span></a> <span class="id" title="var">ls</span> <span class="id" title="var">n</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">Hdecompose</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hdecompose</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#infinite_valid_trace_from_app_iff"><span class="id" title="lemma">infinite_valid_trace_from_app_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hpr</span> <span class="id" title="var">_</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="infinite_valid_trace_from_prefix_rev" class="idref" href="#infinite_valid_trace_from_prefix_rev"><span class="id" title="lemma">infinite_valid_trace_from_prefix_rev</span></a><br/>
&nbsp;&nbsp;(<a id="s:672" class="idref" href="#s:672"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="ls:673" class="idref" href="#ls:673"><span class="id" title="binder">ls</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.Streams.html#Stream"><span class="id" title="inductive">Stream</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hpref:675" class="idref" href="#Hpref:675"><span class="id" title="binder">Hpref</span></a> : <span class="id" title="notation">forall</span> <a id="n:674" class="idref" href="#n:674"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:672"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Lib.StreamExtras.html#stream_prefix"><span class="id" title="definition">stream_prefix</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:673"><span class="id" title="variable">ls</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n:674"><span class="id" title="variable">n</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#infinite_valid_trace_from"><span class="id" title="inductive">infinite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:672"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:673"><span class="id" title="variable">ls</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">s</span> <span class="id" title="var">ls</span> <span class="id" title="var">Hpref</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">cofix</span> <span class="id" title="var">Hls</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> (<span class="id" title="var">a</span>, <span class="id" title="var">ls</span>) <span class="id" title="var">Hpref</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hpref0</span> := <span class="id" title="var">Hpref</span> 1).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hpref0</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hls</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hpref</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hpref</span>; <span class="id" title="tactic">subst</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="infinite_valid_trace_from_EqSt" class="idref" href="#infinite_valid_trace_from_EqSt"><span class="id" title="lemma">infinite_valid_trace_from_EqSt</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:676" class="idref" href="#s:676"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="tl1:677" class="idref" href="#tl1:677"><span class="id" title="binder">tl1</span></a> <a id="tl2:678" class="idref" href="#tl2:678"><span class="id" title="binder">tl2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.Streams.html#Stream"><span class="id" title="inductive">Stream</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.Streams.html#EqSt"><span class="id" title="inductive">EqSt</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tl1:677"><span class="id" title="variable">tl1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tl2:678"><span class="id" title="variable">tl2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#infinite_valid_trace_from"><span class="id" title="inductive">infinite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:676"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tl1:677"><span class="id" title="variable">tl1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#infinite_valid_trace_from"><span class="id" title="inductive">infinite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:676"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tl2:678"><span class="id" title="variable">tl2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">tl1</span> <span class="id" title="var">tl2</span> <span class="id" title="var">Heq</span> <span class="id" title="var">Htl1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#infinite_valid_trace_from_prefix_rev"><span class="id" title="lemma">infinite_valid_trace_from_prefix_rev</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="VLSM.Lib.StreamExtras.html#stream_prefix_EqSt"><span class="id" title="lemma">stream_prefix_EqSt</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Heq</span> <span class="id" title="var">n</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#infinite_valid_trace_from_prefix"><span class="id" title="lemma">infinite_valid_trace_from_prefix</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="infinite_valid_trace_from_segment" class="idref" href="#infinite_valid_trace_from_segment"><span class="id" title="lemma">infinite_valid_trace_from_segment</span></a><br/>
&nbsp;&nbsp;(<a id="s:679" class="idref" href="#s:679"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="ls:680" class="idref" href="#ls:680"><span class="id" title="binder">ls</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.Streams.html#Stream"><span class="id" title="inductive">Stream</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:681" class="idref" href="#Htr:681"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#infinite_valid_trace_from"><span class="id" title="inductive">infinite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:679"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:680"><span class="id" title="variable">ls</span></a>)<br/>
&nbsp;&nbsp;(<a id="n1:682" class="idref" href="#n1:682"><span class="id" title="binder">n1</span></a> <a id="n2:683" class="idref" href="#n2:683"><span class="id" title="binder">n2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hle:684" class="idref" href="#Hle:684"><span class="id" title="binder">Hle</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#n1:682"><span class="id" title="variable">n1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n2:683"><span class="id" title="variable">n2</span></a>)<br/>
&nbsp;&nbsp;(<a id="n1th:685" class="idref" href="#n1th:685"><span class="id" title="binder">n1th</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.Streams.html#Str_nth"><span class="id" title="definition">Str_nth</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n1:682"><span class="id" title="variable">n1</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.Streams.html#Cons"><span class="id" title="constructor">Cons</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:679"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.Streams.html#map"><span class="id" title="definition">Streams.map</span></a> <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:680"><span class="id" title="variable">ls</span></a>))) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n1th:685"><span class="id" title="variable">n1th</span></a> (<a class="idref" href="VLSM.Lib.StreamExtras.html#stream_segment"><span class="id" title="definition">stream_segment</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ls:680"><span class="id" title="variable">ls</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n1:682"><span class="id" title="variable">n1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n2:683"><span class="id" title="variable">n2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_suffix"><span class="id" title="lemma">finite_valid_trace_from_suffix</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#infinite_valid_trace_from_prefix"><span class="id" title="lemma">infinite_valid_trace_from_prefix</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">n1</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">n1th</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.StreamExtras.html#stream_prefix_map"><span class="id" title="lemma">stream_prefix_map</span></a>, <a class="idref" href="VLSM.Lib.StreamExtras.html#stream_prefix_nth"><span class="id" title="lemma">stream_prefix_nth</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab91"></a><h3 class="section">Valid traces</h3>


<div class="paragraph"> </div>

  Finally, we define <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#Trace"><span class="id" title="inductive">Trace</span></a></span> as a sum-type of its finite/infinite variants.
  It inherits some previously introduced definitions, culminating with the
  <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_trace"><span class="id" title="definition">valid_trace</span></a></span>.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="valid_trace_from_prop" class="idref" href="#valid_trace_from_prop"><span class="id" title="definition">valid_trace_from_prop</span></a> (<a id="tr:686" class="idref" href="#tr:686"><span class="id" title="binder">tr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#Trace"><span class="id" title="inductive">Trace</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Core.VLSM.html#tr:686"><span class="id" title="variable">tr</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSM.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">ls</span> =&gt; <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <span class="id" title="var">s</span> <span class="id" title="var">ls</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSM.html#Infinite"><span class="id" title="constructor">Infinite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">sm</span> =&gt; <a class="idref" href="VLSM.Core.VLSM.html#infinite_valid_trace_from"><span class="id" title="inductive">infinite_valid_trace_from</span></a> <span class="id" title="var">s</span> <span class="id" title="var">sm</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="valid_trace_prop" class="idref" href="#valid_trace_prop"><span class="id" title="definition">valid_trace_prop</span></a> (<a id="tr:688" class="idref" href="#tr:688"><span class="id" title="binder">tr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#Trace"><span class="id" title="inductive">Trace</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Core.VLSM.html#tr:688"><span class="id" title="variable">tr</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSM.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">ls</span> =&gt; <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace"><span class="id" title="definition">finite_valid_trace</span></a> <span class="id" title="var">s</span> <span class="id" title="var">ls</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSM.html#Infinite"><span class="id" title="constructor">Infinite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">sm</span> =&gt; <a class="idref" href="VLSM.Core.VLSM.html#infinite_valid_trace"><span class="id" title="definition">infinite_valid_trace</span></a> <span class="id" title="var">s</span> <span class="id" title="var">sm</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="valid_trace" class="idref" href="#valid_trace"><span class="id" title="definition">valid_trace</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">{</span></a><a id="tr:690" class="idref" href="#tr:690"><span class="id" title="binder">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">:</span></a> <a class="idref" href="VLSM.Core.VLSM.html#Trace"><span class="id" title="inductive">Trace</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">|</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid_trace_prop"><span class="id" title="definition">valid_trace_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:690"><span class="id" title="variable">tr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">}</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="valid_trace_from" class="idref" href="#valid_trace_from"><span class="id" title="lemma">valid_trace_from</span></a><br/>
&nbsp;&nbsp;(<a id="tr:691" class="idref" href="#tr:691"><span class="id" title="binder">tr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#Trace"><span class="id" title="inductive">Trace</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:692" class="idref" href="#Htr:692"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_trace_prop"><span class="id" title="definition">valid_trace_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:691"><span class="id" title="variable">tr</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_from_prop"><span class="id" title="definition">valid_trace_from_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:691"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">tr</span>, <span class="id" title="var">Htr</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="valid_trace_initial" class="idref" href="#valid_trace_initial"><span class="id" title="lemma">valid_trace_initial</span></a><br/>
&nbsp;&nbsp;(<a id="tr:693" class="idref" href="#tr:693"><span class="id" title="binder">tr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#Trace"><span class="id" title="inductive">Trace</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:694" class="idref" href="#Htr:694"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_trace_prop"><span class="id" title="definition">valid_trace_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:693"><span class="id" title="variable">tr</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#trace_first"><span class="id" title="definition">trace_first</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:693"><span class="id" title="variable">tr</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">tr</span>, <span class="id" title="var">Htr</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="valid_trace_from_iff" class="idref" href="#valid_trace_from_iff"><span class="id" title="lemma">valid_trace_from_iff</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="tr:695" class="idref" href="#tr:695"><span class="id" title="binder">tr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#Trace"><span class="id" title="inductive">Trace</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_prop"><span class="id" title="definition">valid_trace_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:695"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_from_prop"><span class="id" title="definition">valid_trace_from_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:695"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#trace_first"><span class="id" title="definition">trace_first</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:695"><span class="id" title="variable">tr</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_trace_from"><span class="id" title="lemma">valid_trace_from</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_trace_initial"><span class="id" title="lemma">valid_trace_initial</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">tr</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Hinit</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Having defined <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_trace"><span class="id" title="definition">valid_trace</span></a></span>s, we now connect them to valid states
  and messages, in the following sense: for each state-message pair (<code>s</code>, <code>m</code>)
  that has the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a></span>erty, there exists a <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_trace"><span class="id" title="definition">valid_trace</span></a></span> which ends
  in <code>s</code> by outputting <code>m</code>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="valid_state_message_has_trace" class="idref" href="#valid_state_message_has_trace"><span class="id" title="lemma">valid_state_message_has_trace</span></a><br/>
&nbsp;&nbsp;(<a id="s:696" class="idref" href="#s:696"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="om:697" class="idref" href="#om:697"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hp:698" class="idref" href="#Hp:698"><span class="id" title="binder">Hp</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:696"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:697"><span class="id" title="variable">om</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:696"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.VLSM.html#option_initial_message_prop"><span class="id" title="definition">option_initial_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:697"><span class="id" title="variable">om</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="is:699" class="idref" href="#is:699"><span class="id" title="binder">is</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="tr:700" class="idref" href="#tr:700"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:699"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:696"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:700"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_output"><span class="id" title="definition">finite_trace_last_output</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:700"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:697"><span class="id" title="variable">om</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_emit_valid_state_message_rev"><span class="id" title="lemma">finite_valid_trace_init_to_emit_valid_state_message_rev</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span> <span class="id" title="keyword">as</span> [<span class="id" title="keyword">is</span> [<span class="id" title="var">tr</span> <span class="id" title="var">Htr</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_emit_output"><span class="id" title="lemma">finite_valid_trace_init_to_emit_output</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Houtput</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#empty_initial_message_or_final_output"><span class="id" title="definition">empty_initial_message_or_final_output</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Houtput</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_list_last</span> <span class="id" title="var">tr</span> <span class="id" title="var">tr'</span> <span class="id" title="var">item</span> <span class="id" title="var">Heqtr</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">left</span>; <span class="id" title="tactic">split</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">tl</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_emit_forget_emit"><span class="id" title="lemma">finite_valid_trace_init_to_emit_forget_emit</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">right</span>; <span class="id" title="tactic">eexists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_output_is_last"><span class="id" title="lemma">finite_trace_last_output_is_last</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Giving a trace for <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a></span> can be stated more
  simply than <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_has_trace"><span class="id" title="lemma">valid_state_message_has_trace</span></a></span>, because we don't need a
  disjunction because we are not making claims about <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a></span>
  messages.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="valid_state_has_trace" class="idref" href="#valid_state_has_trace"><span class="id" title="lemma">valid_state_has_trace</span></a><br/>
&nbsp;&nbsp;(<a id="s:701" class="idref" href="#s:701"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hp:702" class="idref" href="#Hp:702"><span class="id" title="binder">Hp</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:701"><span class="id" title="variable">s</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="is:703" class="idref" href="#is:703"><span class="id" title="binder">is</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="tr:704" class="idref" href="#tr:704"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:703"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:701"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:704"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_om</span> <span class="id" title="var">Hp</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_has_trace"><span class="id" title="lemma">valid_state_message_has_trace</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hp</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hinit</span> <span class="id" title="var">_</span>] | <span class="id" title="var">Htrace</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_is_valid"><span class="id" title="lemma">initial_state_is_valid</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">Htrace</span> <span class="id" title="keyword">as</span> [<span class="id" title="keyword">is</span> [<span class="id" title="var">tr</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">_</span>]]]; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
For any input valid transition there exists a valid trace ending in it. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="exists_right_finite_trace_from" class="idref" href="#exists_right_finite_trace_from"><span class="id" title="lemma">exists_right_finite_trace_from</span></a><br/>
&nbsp;&nbsp;(<a id="l:705" class="idref" href="#l:705"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="s1:706" class="idref" href="#s1:706"><span class="id" title="binder">s1</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="iom:707" class="idref" href="#iom:707"><span class="id" title="binder">iom</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="s2:708" class="idref" href="#s2:708"><span class="id" title="binder">s2</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="oom:709" class="idref" href="#oom:709"><span class="id" title="binder">oom</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Ht:710" class="idref" href="#Ht:710"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:705"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s1:706"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:707"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s2:708"><span class="id" title="variable">s2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:709"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="s0:711" class="idref" href="#s0:711"><span class="id" title="binder">s0</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="ts:712" class="idref" href="#ts:712"><span class="id" title="binder">ts</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s0:711"><span class="id" title="variable">s0</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s2:708"><span class="id" title="variable">s2</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#ts:712"><span class="id" title="variable">ts</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.VLSM.html#Build_transition_item"><span class="id" title="constructor">Build_transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:705"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:707"><span class="id" title="variable">iom</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s2:708"><span class="id" title="variable">s2</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:709"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s0:711"><span class="id" title="variable">s0</span></a> <a class="idref" href="VLSM.Core.VLSM.html#ts:712"><span class="id" title="variable">ts</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:706"><span class="id" title="variable">s1</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_origin"><span class="id" title="lemma">input_valid_transition_origin</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hs1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_has_trace"><span class="id" title="lemma">valid_state_has_trace</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hs1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s0</span> [<span class="id" title="var">ts</span> <span class="id" title="var">Hts</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">s0</span>, <span class="id" title="var">ts</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hts</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hts</span> <span class="id" title="var">Hinit</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; [| <span class="id" title="var">done</span> | <span class="id" title="tactic">by</span> <span class="id" title="var">revert</span> <span class="id" title="var">Hts</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_last"><span class="id" title="lemma">finite_valid_trace_from_to_last</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#extend_right_finite_trace_from_to"><span class="id" title="lemma">extend_right_finite_trace_from_to</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="can_emit_has_trace" class="idref" href="#can_emit_has_trace"><span class="id" title="lemma">can_emit_has_trace</span></a> (<a id="m:713" class="idref" href="#m:713"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:713"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="is:714" class="idref" href="#is:714"><span class="id" title="binder">is</span></a> <a id="tr:715" class="idref" href="#tr:715"><span class="id" title="binder">tr</span></a> <a id="item:716" class="idref" href="#item:716"><span class="id" title="binder">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace"><span class="id" title="definition">finite_valid_trace</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:714"><span class="id" title="variable">is</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#tr:715"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.VLSM.html#item:716"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="VLSM.Core.VLSM.html#item:716"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:713"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [(<span class="id" title="var">s</span>, <span class="id" title="var">im</span>) [<span class="id" title="var">l</span> [<span class="id" title="var">s'</span> <span class="id" title="var">Hm</span>]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#exists_right_finite_trace_from"><span class="id" title="lemma">exists_right_finite_trace_from</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span> <span class="id" title="keyword">as</span> [<span class="id" title="keyword">is</span> [<span class="id" title="var">tr</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">_</span>]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_forget_last"><span class="id" title="lemma">finite_valid_trace_init_to_forget_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span> <span class="id" title="keyword">is</span>, <span class="id" title="var">tr</span>, <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Any trace with the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a></span> property can be completed
  (to the left) to start in an initial state.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_from_complete_left" class="idref" href="#finite_valid_trace_from_complete_left"><span class="id" title="lemma">finite_valid_trace_from_complete_left</span></a><br/>
&nbsp;&nbsp;(<a id="s:717" class="idref" href="#s:717"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:718" class="idref" href="#tr:718"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:719" class="idref" href="#Htr:719"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:717"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:718"><span class="id" title="variable">tr</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="is:720" class="idref" href="#is:720"><span class="id" title="binder">is</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="trs:721" class="idref" href="#trs:721"><span class="id" title="binder">trs</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace"><span class="id" title="definition">finite_valid_trace</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:720"><span class="id" title="variable">is</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#trs:721"><span class="id" title="variable">trs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:718"><span class="id" title="variable">tr</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:720"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.VLSM.html#trs:721"><span class="id" title="variable">trs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:717"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_first_pstate"><span class="id" title="lemma">finite_valid_trace_first_pstate</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_has_trace"><span class="id" title="lemma">valid_state_has_trace</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">as</span> [<span class="id" title="keyword">is</span> [<span class="id" title="var">trs</span> [<span class="id" title="var">Htrs</span> <span class="id" title="var">His</span>]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="keyword">is</span>, <span class="id" title="var">trs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_last"><span class="id" title="lemma">finite_valid_trace_from_to_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htrs</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hlast</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hlast</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_forget_last"><span class="id" title="lemma">finite_valid_trace_from_to_forget_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htrs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">firstorder</span> <span class="id" title="keyword">using</span> <span class="id" title="var">finite_valid_trace_from_app_iff</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Any trace with the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a></span> property can be completed
  (to the left) to start in an initial state.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_from_to_complete_left" class="idref" href="#finite_valid_trace_from_to_complete_left"><span class="id" title="lemma">finite_valid_trace_from_to_complete_left</span></a><br/>
&nbsp;&nbsp;(<a id="s:722" class="idref" href="#s:722"><span class="id" title="binder">s</span></a> <a id="f:723" class="idref" href="#f:723"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:724" class="idref" href="#tr:724"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:725" class="idref" href="#Htr:725"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:722"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:723"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:724"><span class="id" title="variable">tr</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="is:726" class="idref" href="#is:726"><span class="id" title="binder">is</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="trs:727" class="idref" href="#trs:727"><span class="id" title="binder">trs</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:726"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:723"><span class="id" title="variable">f</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#trs:727"><span class="id" title="variable">trs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:724"><span class="id" title="variable">tr</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:726"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.VLSM.html#trs:727"><span class="id" title="variable">trs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:722"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hs</span> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_forget_last"><span class="id" title="lemma">finite_valid_trace_from_to_forget_last</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_first_pstate"><span class="id" title="lemma">finite_valid_trace_first_pstate</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_has_trace"><span class="id" title="lemma">valid_state_has_trace</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">as</span> (<span class="id" title="keyword">is</span> &amp; <span class="id" title="var">trs</span> &amp; <span class="id" title="var">Htrs</span> &amp; <span class="id" title="var">His</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="keyword">is</span>, <span class="id" title="var">trs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">split</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_app"><span class="id" title="lemma">finite_valid_trace_from_to_app</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_last"><span class="id" title="lemma">finite_valid_trace_from_to_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htrs</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Another benefit of defining traces is that we can succinctly
  describe indirect transitions between arbitrary pairs of states.

<div class="paragraph"> </div>

  We say that state <code>second</code> is in state <code>first</code>'s futures if
  there exists a finite (possibly empty) valid trace that begins
  with <code>first</code> and ends in <code>second</code>.

<div class="paragraph"> </div>

  This relation is often used in stating safety and liveness properties.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="in_futures" class="idref" href="#in_futures"><span class="id" title="definition">in_futures</span></a> (<a id="first:728" class="idref" href="#first:728"><span class="id" title="binder">first</span></a> <a id="second:729" class="idref" href="#second:729"><span class="id" title="binder">second</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="tr:730" class="idref" href="#tr:730"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#first:728"><span class="id" title="variable">first</span></a> <a class="idref" href="VLSM.Core.VLSM.html#second:729"><span class="id" title="variable">second</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:730"><span class="id" title="variable">tr</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="in_futures_preserving" class="idref" href="#in_futures_preserving"><span class="id" title="lemma">in_futures_preserving</span></a><br/>
&nbsp;&nbsp;(<a id="R:731" class="idref" href="#R:731"><span class="id" title="binder">R</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="Hpre:732" class="idref" href="#Hpre:732"><span class="id" title="binder">Hpre</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.RelationClasses.html#PreOrder"><span class="id" title="class">PreOrder</span></a> <a class="idref" href="VLSM.Core.VLSM.html#R:731"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;(<a id="Ht:733" class="idref" href="#Ht:733"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_preserving"><span class="id" title="definition">input_valid_transition_preserving</span></a> <a class="idref" href="VLSM.Core.VLSM.html#R:731"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;(<a id="s1:734" class="idref" href="#s1:734"><span class="id" title="binder">s1</span></a> <a id="s2:735" class="idref" href="#s2:735"><span class="id" title="binder">s2</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hin:736" class="idref" href="#Hin:736"><span class="id" title="binder">Hin</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#in_futures"><span class="id" title="definition">in_futures</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:734"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s2:735"><span class="id" title="variable">s2</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#R:731"><span class="id" title="variable">R</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:734"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s2:735"><span class="id" title="variable">s2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#in_futures"><span class="id" title="definition">in_futures</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">tr</span> <span class="id" title="var">Htr</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Htr</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Ht</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht0</span>; <span class="id" title="tactic">transitivity</span> <span class="id" title="var">s</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="eq_equiv" class="idref" href="#eq_equiv"><span class="id" title="instance">eq_equiv</span></a> : @<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.RelationClasses.html#Equivalence"><span class="id" title="class">Equivalence</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> := <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="in_futures_strict_preserving" class="idref" href="#in_futures_strict_preserving"><span class="id" title="lemma">in_futures_strict_preserving</span></a><br/>
&nbsp;&nbsp;(<a id="R:737" class="idref" href="#R:737"><span class="id" title="binder">R</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="Hpre:738" class="idref" href="#Hpre:738"><span class="id" title="binder">Hpre</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.RelationClasses.html#StrictOrder"><span class="id" title="class">StrictOrder</span></a> <a class="idref" href="VLSM.Core.VLSM.html#R:737"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;(<a id="Ht:739" class="idref" href="#Ht:739"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_preserving"><span class="id" title="definition">input_valid_transition_preserving</span></a> <a class="idref" href="VLSM.Core.VLSM.html#R:737"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;(<a id="s1:740" class="idref" href="#s1:740"><span class="id" title="binder">s1</span></a> <a id="s2:741" class="idref" href="#s2:741"><span class="id" title="binder">s2</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hin:742" class="idref" href="#Hin:742"><span class="id" title="binder">Hin</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#in_futures"><span class="id" title="definition">in_futures</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:740"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s2:741"><span class="id" title="variable">s2</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hneq:743" class="idref" href="#Hneq:743"><span class="id" title="binder">Hneq</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#s1:740"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s2:741"><span class="id" title="variable">s2</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#R:737"><span class="id" title="variable">R</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:740"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s2:741"><span class="id" title="variable">s2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#StrictOrder_PreOrder"><span class="id" title="lemma">StrictOrder_PreOrder</span></a> <a class="idref" href="VLSM.Core.VLSM.html#eq_equiv"><span class="id" title="instance">eq_equiv</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hpre</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.VLSM.html#in_futures_preserving"><span class="id" title="lemma">in_futures_preserving</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.RelationClasses.html#relation_disjunction"><span class="id" title="definition">relation_disjunction</span></a> <span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>) <span class="id" title="var">Hpre</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hpreserve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">Hpreserve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">left</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> (<span class="id" title="var">Hpreserve</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">x1</span> <span class="id" title="var">x2</span> -&gt; <span class="id" title="var">y1</span> <span class="id" title="var">y2</span> -&gt;.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="in_futures_valid_fst" class="idref" href="#in_futures_valid_fst"><span class="id" title="lemma">in_futures_valid_fst</span></a><br/>
&nbsp;&nbsp;(<a id="first:744" class="idref" href="#first:744"><span class="id" title="binder">first</span></a> <a id="second:745" class="idref" href="#second:745"><span class="id" title="binder">second</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hfuture:746" class="idref" href="#Hfuture:746"><span class="id" title="binder">Hfuture</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#in_futures"><span class="id" title="definition">in_futures</span></a> <a class="idref" href="VLSM.Core.VLSM.html#first:744"><span class="id" title="variable">first</span></a> <a class="idref" href="VLSM.Core.VLSM.html#second:745"><span class="id" title="variable">second</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#first:744"><span class="id" title="variable">first</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hfuture</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">tr</span> <span class="id" title="var">Htr</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_forget_last"><span class="id" title="lemma">finite_valid_trace_from_to_forget_last</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_first_pstate"><span class="id" title="lemma">finite_valid_trace_first_pstate</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="in_futures_refl" class="idref" href="#in_futures_refl"><span class="id" title="lemma">in_futures_refl</span></a><br/>
&nbsp;&nbsp;(<a id="first:747" class="idref" href="#first:747"><span class="id" title="binder">first</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hps:748" class="idref" href="#Hps:748"><span class="id" title="binder">Hps</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#first:747"><span class="id" title="variable">first</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#in_futures"><span class="id" title="definition">in_futures</span></a> <a class="idref" href="VLSM.Core.VLSM.html#first:747"><span class="id" title="variable">first</span></a> <a class="idref" href="VLSM.Core.VLSM.html#first:747"><span class="id" title="variable">first</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>; <span class="id" title="tactic">constructor</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="in_futures_trans" class="idref" href="#in_futures_trans"><span class="id" title="instance">in_futures_trans</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.RelationClasses.html#Transitive"><span class="id" title="class">Transitive</span></a> <a class="idref" href="VLSM.Core.VLSM.html#in_futures"><span class="id" title="definition">in_futures</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> <span class="id" title="var">s3</span> [<span class="id" title="var">tr12</span> <span class="id" title="var">Htr12</span>] [<span class="id" title="var">tr23</span> <span class="id" title="var">Htr23</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_app"><span class="id" title="lemma">finite_valid_trace_from_to_app</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_in_futures" class="idref" href="#input_valid_transition_in_futures"><span class="id" title="lemma">input_valid_transition_in_futures</span></a><br/>
&nbsp;&nbsp;{<a id="l:749" class="idref" href="#l:749"><span class="id" title="binder">l</span></a> <a id="s:750" class="idref" href="#s:750"><span class="id" title="binder">s</span></a> <a id="im:751" class="idref" href="#im:751"><span class="id" title="binder">im</span></a> <a id="s':752" class="idref" href="#s':752"><span class="id" title="binder">s'</span></a> <a id="om:753" class="idref" href="#om:753"><span class="id" title="binder">om</span></a>}<br/>
&nbsp;&nbsp;(<a id="Ht:754" class="idref" href="#Ht:754"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:749"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:750"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#im:751"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':752"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:753"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#in_futures"><span class="id" title="definition">in_futures</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:750"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s':752"><span class="id" title="variable">s'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_singleton"><span class="id" title="lemma">finite_valid_trace_singleton</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_add_last"><span class="id" title="lemma">finite_valid_trace_from_add_last</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">f</span> := <span class="id" title="var">s'</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>; [<span class="id" title="tactic">eexists</span> |].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="elem_of_trace_in_futures_left" class="idref" href="#elem_of_trace_in_futures_left"><span class="id" title="lemma">elem_of_trace_in_futures_left</span></a><br/>
&nbsp;&nbsp;(<a id="is:755" class="idref" href="#is:755"><span class="id" title="binder">is</span></a> <a id="s:756" class="idref" href="#s:756"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="tr:757" class="idref" href="#tr:757"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:758" class="idref" href="#Htr:758"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:755"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:756"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:757"><span class="id" title="variable">tr</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="item:759" class="idref" href="#item:759"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#item:759"><span class="id" title="variable">item</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.VLSM.html#tr:757"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#in_futures"><span class="id" title="definition">in_futures</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#item:759"><span class="id" title="variable">item</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#s:756"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">item</span> <span class="id" title="var">Hitem</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_split</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hitem</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">pre</span> &amp; <span class="id" title="var">suf</span> &amp; <span class="id" title="var">Heqtr</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">suf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;- <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_is_last"><span class="id" title="lemma">finite_trace_last_is_last</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_app_split"><span class="id" title="lemma">finite_valid_trace_from_to_app_split</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqtr</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="elem_of_trace_in_futures_right" class="idref" href="#elem_of_trace_in_futures_right"><span class="id" title="lemma">elem_of_trace_in_futures_right</span></a><br/>
&nbsp;&nbsp;(<a id="is:760" class="idref" href="#is:760"><span class="id" title="binder">is</span></a> <a id="s:761" class="idref" href="#s:761"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="tr:762" class="idref" href="#tr:762"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:763" class="idref" href="#Htr:763"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:760"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:761"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:762"><span class="id" title="variable">tr</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="item:764" class="idref" href="#item:764"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#item:764"><span class="id" title="variable">item</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.VLSM.html#tr:762"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#in_futures"><span class="id" title="definition">in_futures</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:760"><span class="id" title="variable">is</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#item:764"><span class="id" title="variable">item</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">item</span> <span class="id" title="var">Hitem</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_split</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hitem</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">pre</span> &amp; <span class="id" title="var">suf</span> &amp; <span class="id" title="var">Heqtr</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">pre</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">item</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;- <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_is_last"><span class="id" title="lemma">finite_trace_last_is_last</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_app_split"><span class="id" title="lemma">finite_valid_trace_from_to_app_split</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqtr</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="in_futures_witness" class="idref" href="#in_futures_witness"><span class="id" title="lemma">in_futures_witness</span></a><br/>
&nbsp;&nbsp;(<a id="first:765" class="idref" href="#first:765"><span class="id" title="binder">first</span></a> <a id="second:766" class="idref" href="#second:766"><span class="id" title="binder">second</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hfutures:767" class="idref" href="#Hfutures:767"><span class="id" title="binder">Hfutures</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#in_futures"><span class="id" title="definition">in_futures</span></a> <a class="idref" href="VLSM.Core.VLSM.html#first:765"><span class="id" title="variable">first</span></a> <a class="idref" href="VLSM.Core.VLSM.html#second:766"><span class="id" title="variable">second</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="tr:768" class="idref" href="#tr:768"><span class="id" title="binder">tr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_trace"><span class="id" title="definition">valid_trace</span></a>) (<a id="n1:769" class="idref" href="#n1:769"><span class="id" title="binder">n1</span></a> <a id="n2:770" class="idref" href="#n2:770"><span class="id" title="binder">n2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#n1:769"><span class="id" title="variable">n1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n2:770"><span class="id" title="variable">n2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#trace_nth"><span class="id" title="definition">trace_nth</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:768"><span class="id" title="variable">tr</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#n1:769"><span class="id" title="variable">n1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#first:765"><span class="id" title="variable">first</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#trace_nth"><span class="id" title="definition">trace_nth</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:768"><span class="id" title="variable">tr</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#n2:770"><span class="id" title="variable">n2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#second:766"><span class="id" title="variable">second</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.VLSM.html#in_futures_valid_fst"><span class="id" title="lemma">in_futures_valid_fst</span></a> <span class="id" title="tactic">first</span> <span class="id" title="var">second</span> <span class="id" title="var">Hfutures</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">Hps</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_has_trace"><span class="id" title="lemma">valid_state_has_trace</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hps</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hps</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">prefix_start</span> [<span class="id" title="var">prefix_tr</span> [<span class="id" title="var">Hprefix_tr</span> <span class="id" title="var">Hinit</span>]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hfutures</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">suffix_tr</span> <span class="id" title="var">Hsuffix_tr</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_app"><span class="id" title="lemma">finite_valid_trace_from_to_app</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hprefix_tr</span> <span class="id" title="var">Hsuffix_tr</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Happ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_forget_last"><span class="id" title="lemma">finite_valid_trace_from_to_forget_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Happ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Htr</span> : <a class="idref" href="VLSM.Core.VLSM.html#valid_trace_prop"><span class="id" title="definition">valid_trace_prop</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">prefix_start</span> (<span class="id" title="var">prefix_tr</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">suffix_tr</span>))) <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Htr</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <span class="id" title="var">prefix_tr</span>), (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <span class="id" title="var">prefix_tr</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <span class="id" title="var">suffix_tr</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="var">lia</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_last"><span class="id" title="lemma">finite_valid_trace_from_to_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hprefix_tr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_last"><span class="id" title="lemma">finite_valid_trace_from_to_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsuffix_tr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth_app1"><span class="id" title="lemma">finite_trace_nth_app1</span></a>; [| <span class="id" title="var">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth_last"><span class="id" title="lemma">finite_trace_nth_last</span></a>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth_app2"><span class="id" title="lemma">finite_trace_nth_app2</span></a>; [| <span class="id" title="var">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.add_sub"><span class="id" title="lemma">Nat.add_sub</span></a>, <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth_last"><span class="id" title="lemma">finite_trace_nth_last</span></a>; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="trace_segment" class="idref" href="#trace_segment"><span class="id" title="definition">trace_segment</span></a> (<a id="tr:771" class="idref" href="#tr:771"><span class="id" title="binder">tr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#Trace"><span class="id" title="inductive">Trace</span></a>) (<a id="n1:772" class="idref" href="#n1:772"><span class="id" title="binder">n1</span></a> <a id="n2:773" class="idref" href="#n2:773"><span class="id" title="binder">n2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Core.VLSM.html#tr:771"><span class="id" title="variable">tr</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSM.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">l</span> =&gt; <a class="idref" href="VLSM.Lib.ListExtras.html#list_segment"><span class="id" title="definition">list_segment</span></a> <span class="id" title="var">l</span> <a class="idref" href="VLSM.Core.VLSM.html#n1:772"><span class="id" title="variable">n1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n2:773"><span class="id" title="variable">n2</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSM.html#Infinite"><span class="id" title="constructor">Infinite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">l</span> =&gt; <a class="idref" href="VLSM.Lib.StreamExtras.html#stream_segment"><span class="id" title="definition">stream_segment</span></a> <span class="id" title="var">l</span> <a class="idref" href="VLSM.Core.VLSM.html#n1:772"><span class="id" title="variable">n1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n2:773"><span class="id" title="variable">n2</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="valid_trace_segment" class="idref" href="#valid_trace_segment"><span class="id" title="lemma">valid_trace_segment</span></a><br/>
&nbsp;&nbsp;(<a id="tr:775" class="idref" href="#tr:775"><span class="id" title="binder">tr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#Trace"><span class="id" title="inductive">Trace</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:776" class="idref" href="#Htr:776"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_trace_prop"><span class="id" title="definition">valid_trace_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:775"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;(<a id="n1:777" class="idref" href="#n1:777"><span class="id" title="binder">n1</span></a> <a id="n2:778" class="idref" href="#n2:778"><span class="id" title="binder">n2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hle:779" class="idref" href="#Hle:779"><span class="id" title="binder">Hle</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#n1:777"><span class="id" title="variable">n1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n2:778"><span class="id" title="variable">n2</span></a>)<br/>
&nbsp;&nbsp;(<a id="first:780" class="idref" href="#first:780"><span class="id" title="binder">first</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hfirst:781" class="idref" href="#Hfirst:781"><span class="id" title="binder">Hfirst</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#trace_nth"><span class="id" title="definition">trace_nth</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:775"><span class="id" title="variable">tr</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n1:777"><span class="id" title="variable">n1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#first:780"><span class="id" title="variable">first</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#first:780"><span class="id" title="variable">first</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#trace_segment"><span class="id" title="definition">trace_segment</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:775"><span class="id" title="variable">tr</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n1:777"><span class="id" title="variable">n1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n2:778"><span class="id" title="variable">n2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">tr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">tr</span> | <span class="id" title="var">s</span> <span class="id" title="var">tr</span>]; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Hinit</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_segment"><span class="id" title="lemma">finite_valid_trace_from_segment</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hfirst</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hfirst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSM.html#infinite_valid_trace_from_segment"><span class="id" title="lemma">infinite_valid_trace_from_segment</span></a> <span class="id" title="var">s</span> <span class="id" title="var">tr</span> <span class="id" title="var">Htr</span> <span class="id" title="var">n1</span> <span class="id" title="var">n2</span> <span class="id" title="var">Hle</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="Trace_messages" class="idref" href="#Trace_messages"><span class="id" title="definition, inductive"><span id="Trace_messages_rect" class="id"><span id="Trace_messages_ind" class="id"><span id="Trace_messages_rec" class="id"><span id="Trace_messages_sind" class="id">Trace_messages</span></span></span></span></span></a> : <span class="id" title="keyword">Type</span> :=<br/>
| <a id="Finite_messages" class="idref" href="#Finite_messages"><span class="id" title="constructor">Finite_messages</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#Trace_messages:782"><span class="id" title="inductive">Trace_messages</span></a><br/>
| <a id="Infinite_messages" class="idref" href="#Infinite_messages"><span class="id" title="constructor">Infinite_messages</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.Streams.html#Stream"><span class="id" title="inductive">Stream</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#Trace_messages:782"><span class="id" title="inductive">Trace_messages</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="protocol_output_messages_trace" class="idref" href="#protocol_output_messages_trace"><span class="id" title="definition">protocol_output_messages_trace</span></a> (<a id="tr:784" class="idref" href="#tr:784"><span class="id" title="binder">tr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_trace"><span class="id" title="definition">valid_trace</span></a>) : <a class="idref" href="VLSM.Core.VLSM.html#Trace_messages"><span class="id" title="inductive">Trace_messages</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:784"><span class="id" title="variable">tr</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSM.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">_</span> <span class="id" title="var">ls</span> =&gt; <a class="idref" href="VLSM.Core.VLSM.html#Finite_messages"><span class="id" title="constructor">Finite_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <span class="id" title="var">ls</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSM.html#Infinite"><span class="id" title="constructor">Infinite</span></a> <span class="id" title="var">_</span> <span class="id" title="var">st</span> =&gt; <a class="idref" href="VLSM.Core.VLSM.html#Infinite_messages"><span class="id" title="constructor">Infinite_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.Streams.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <span class="id" title="var">st</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="protocol_input_messages_trace" class="idref" href="#protocol_input_messages_trace"><span class="id" title="definition">protocol_input_messages_trace</span></a> (<a id="tr:785" class="idref" href="#tr:785"><span class="id" title="binder">tr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_trace"><span class="id" title="definition">valid_trace</span></a>) : <a class="idref" href="VLSM.Core.VLSM.html#Trace_messages"><span class="id" title="inductive">Trace_messages</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:785"><span class="id" title="variable">tr</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSM.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">_</span> <span class="id" title="var">ls</span> =&gt; <a class="idref" href="VLSM.Core.VLSM.html#Finite_messages"><span class="id" title="constructor">Finite_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a> <span class="id" title="var">ls</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSM.html#Infinite"><span class="id" title="constructor">Infinite</span></a> <span class="id" title="var">_</span> <span class="id" title="var">st</span> =&gt; <a class="idref" href="VLSM.Core.VLSM.html#Infinite_messages"><span class="id" title="constructor">Infinite_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.Streams.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a> <span class="id" title="var">st</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="trace_prefix" class="idref" href="#trace_prefix"><span class="id" title="definition">trace_prefix</span></a><br/>
&nbsp;&nbsp;(<a id="tr:786" class="idref" href="#tr:786"><span class="id" title="binder">tr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#Trace"><span class="id" title="inductive">Trace</span></a>) (<a id="last:787" class="idref" href="#last:787"><span class="id" title="binder">last</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="prefix:788" class="idref" href="#prefix:788"><span class="id" title="binder">prefix</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Core.VLSM.html#tr:786"><span class="id" title="variable">tr</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSM.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">ls</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="suffix:790" class="idref" href="#suffix:790"><span class="id" title="binder">suffix</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="var">ls</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#prefix:788"><span class="id" title="variable">prefix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#last:787"><span class="id" title="variable">last</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="VLSM.Core.VLSM.html#suffix:790"><span class="id" title="variable">suffix</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSM.html#Infinite"><span class="id" title="constructor">Infinite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">st</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="suffix:791" class="idref" href="#suffix:791"><span class="id" title="binder">suffix</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="var">st</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Lib.StreamExtras.html#stream_app"><span class="id" title="definition">stream_app</span></a> <a class="idref" href="VLSM.Core.VLSM.html#prefix:788"><span class="id" title="variable">prefix</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.Streams.html#Cons"><span class="id" title="constructor">Cons</span></a> <a class="idref" href="VLSM.Core.VLSM.html#last:787"><span class="id" title="variable">last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#suffix:791"><span class="id" title="variable">suffix</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="trace_prefix_fn" class="idref" href="#trace_prefix_fn"><span class="id" title="definition">trace_prefix_fn</span></a> (<a id="tr:792" class="idref" href="#tr:792"><span class="id" title="binder">tr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#Trace"><span class="id" title="inductive">Trace</span></a>) (<a id="n:793" class="idref" href="#n:793"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="VLSM.Core.VLSM.html#Trace"><span class="id" title="inductive">Trace</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Core.VLSM.html#tr:792"><span class="id" title="variable">tr</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSM.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">ls</span> =&gt; <a class="idref" href="VLSM.Core.VLSM.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">s</span> (<span class="id" title="abbreviation">take</span> <a class="idref" href="VLSM.Core.VLSM.html#n:793"><span class="id" title="variable">n</span></a> <span class="id" title="var">ls</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSM.html#Infinite"><span class="id" title="constructor">Infinite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">st</span> =&gt; <a class="idref" href="VLSM.Core.VLSM.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">s</span> (<a class="idref" href="VLSM.Lib.StreamExtras.html#stream_prefix"><span class="id" title="definition">stream_prefix</span></a> <span class="id" title="var">st</span> <a class="idref" href="VLSM.Core.VLSM.html#n:793"><span class="id" title="variable">n</span></a>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trace_prefix_valid" class="idref" href="#trace_prefix_valid"><span class="id" title="lemma">trace_prefix_valid</span></a><br/>
&nbsp;&nbsp;(<a id="tr:795" class="idref" href="#tr:795"><span class="id" title="binder">tr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_trace"><span class="id" title="definition">valid_trace</span></a>)<br/>
&nbsp;&nbsp;(<a id="last:796" class="idref" href="#last:796"><span class="id" title="binder">last</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="prefix:797" class="idref" href="#prefix:797"><span class="id" title="binder">prefix</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hprefix:798" class="idref" href="#Hprefix:798"><span class="id" title="binder">Hprefix</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#trace_prefix"><span class="id" title="definition">trace_prefix</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:795"><span class="id" title="variable">tr</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#last:796"><span class="id" title="variable">last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#prefix:797"><span class="id" title="variable">prefix</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_prop"><span class="id" title="definition">valid_trace_prop</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#Finite"><span class="id" title="constructor">Finite</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#trace_first"><span class="id" title="definition">trace_first</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:795"><span class="id" title="variable">tr</span></a>)) (<a class="idref" href="VLSM.Core.VLSM.html#prefix:797"><span class="id" title="variable">prefix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.VLSM.html#last:796"><span class="id" title="variable">last</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">tr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">tr</span> <span class="id" title="var">Htr</span>]. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">tr</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">last</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#rev_ind"><span class="id" title="lemma">rev_ind</span></a> (<span class="id" title="keyword">fun</span> <a id="prefix:799" class="idref" href="#prefix:799"><span class="id" title="binder"><span id="prefix:802" class="id">prefix</span></span></a> =&gt; <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="last:800" class="idref" href="#last:800"><span class="id" title="binder"><span id="last:803" class="id">last</span></span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) (<a id="tr:801" class="idref" href="#tr:801"><span class="id" title="binder"><span id="tr:804" class="id">tr</span></span></a> : <a class="idref" href="VLSM.Core.VLSM.html#Trace"><span class="id" title="inductive">Trace</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_prop"><span class="id" title="definition">valid_trace_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:801"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#trace_prefix"><span class="id" title="definition">trace_prefix</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:801"><span class="id" title="variable">tr</span></a> <a class="idref" href="VLSM.Core.VLSM.html#last:800"><span class="id" title="variable">last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#prefix:799"><span class="id" title="variable">prefix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace"><span class="id" title="definition">finite_valid_trace</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#trace_first"><span class="id" title="definition">trace_first</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:801"><span class="id" title="variable">tr</span></a>) (<a class="idref" href="VLSM.Core.VLSM.html#prefix:799"><span class="id" title="variable">prefix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.VLSM.html#last:800"><span class="id" title="variable">last</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>))).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">last</span> <span class="id" title="var">tr</span> <span class="id" title="var">Htr</span> <span class="id" title="var">Hprefix</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#trace_prefix"><span class="id" title="definition">trace_prefix</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hprefix</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hprefix</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hprefix</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">suffix</span> <span class="id" title="var">Heq</span>]; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Hinit</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#trace_first"><span class="id" title="definition">trace_first</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Htr</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_singleton"><span class="id" title="lemma">finite_valid_trace_singleton</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">last_p</span> <span class="id" title="var">p</span> <span class="id" title="var">Hind</span> <span class="id" title="var">last</span> <span class="id" title="var">tr</span> <span class="id" title="var">Htr</span> <span class="id" title="var">Hprefix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hind</span> <span class="id" title="var">last_p</span> <span class="id" title="var">tr</span> <span class="id" title="var">Htr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">tr</span> <span class="id" title="keyword">as</span> [|]; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#trace_prefix"><span class="id" title="definition">trace_prefix</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hprefix</span>;   <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hprefix</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hprefix</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">suffix</span> <span class="id" title="var">Heq</span>]; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Hinit</span>]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hind</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hex</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="suffix0:805" class="idref" href="#suffix0:805"><span class="id" title="binder"><span id="suffix0:806" class="id">suffix0</span></span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">(</span></a><span class="id" title="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">last_p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">last</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">suffix</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">last_p</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="VLSM.Core.VLSM.html#suffix0:805"><span class="id" title="variable">suffix0</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">exists</span> (<span class="id" title="var">last</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">suffix</span>); <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>; <span class="id" title="var">done</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hind</span> <span class="id" title="var">Hex</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">Hex</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hind</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hptr</span> <span class="id" title="var">_</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">last</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#extend_right_finite_trace_from"><span class="id" title="lemma">extend_right_finite_trace_from</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="VLSM.Lib.ListExtras.html#app_cons"><span class="id" title="lemma">app_cons</span></a> {| <a class="idref" href="VLSM.Core.VLSM.html#l"><span class="id" title="projection">l</span></a> := <span class="id" title="var">l0</span>; <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a> := <span class="id" title="var">input0</span>; <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> := <span class="id" title="var">destination0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> := <span class="id" title="var">output0</span> |} <span class="id" title="var">suffix</span>), <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>, &lt;- !(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> <span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_consecutive_valid_transition"><span class="id" title="lemma">finite_valid_trace_consecutive_valid_transition</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Htr</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_is_last"><span class="id" title="lemma">finite_trace_last_is_last</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hex</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="suffix0:807" class="idref" href="#suffix0:807"><span class="id" title="binder"><span id="suffix0:808" class="id">suffix0</span></span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.Streams.html#Stream"><span class="id" title="inductive">Stream</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Lib.StreamExtras.html#stream_app"><span class="id" title="definition">stream_app</span></a> (<span class="id" title="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">last_p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)  (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.Streams.html#Cons"><span class="id" title="constructor">Cons</span></a> <span class="id" title="var">last</span> <span class="id" title="var">suffix</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Lib.StreamExtras.html#stream_app"><span class="id" title="definition">stream_app</span></a> <span class="id" title="var">p</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.Streams.html#Cons"><span class="id" title="constructor">Cons</span></a> <span class="id" title="var">last_p</span> <a class="idref" href="VLSM.Core.VLSM.html#suffix0:807"><span class="id" title="variable">suffix0</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.Streams.html#Cons"><span class="id" title="constructor">Cons</span></a> <span class="id" title="var">last</span> <span class="id" title="var">suffix</span>); <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="VLSM.Lib.StreamExtras.html#stream_app_assoc"><span class="id" title="lemma">stream_app_assoc</span></a>; <span class="id" title="var">done</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hind</span> <span class="id" title="var">Hex</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">Hex</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hind</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hptr</span> <span class="id" title="var">_</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">last</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#extend_right_finite_trace_from"><span class="id" title="lemma">extend_right_finite_trace_from</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="VLSM.Lib.StreamExtras.html#stream_app_cons"><span class="id" title="definition">stream_app_cons</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.StreamExtras.html#stream_app_assoc"><span class="id" title="lemma">stream_app_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> <span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.VLSM.html#infinite_valid_trace_consecutive_valid_transition"><span class="id" title="lemma">infinite_valid_trace_consecutive_valid_transition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">s</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Lib.StreamExtras.html#stream_app"><span class="id" title="definition">stream_app</span></a> (<span class="id" title="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><span class="id" title="var">last_p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">{|</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l"><span class="id" title="projection">l</span></a> := <span class="id" title="var">l0</span>; <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a> := <span class="id" title="var">input0</span>; <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> := <span class="id" title="var">destination0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> := <span class="id" title="var">output0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">|}]</span></a>) <span class="id" title="var">suffix</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">suffix</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">p</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">last_p</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="VLSM.Core.VLSM.html#l"><span class="id" title="projection">l</span></a> := <span class="id" title="var">l0</span>; <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a> := <span class="id" title="var">input0</span>; <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> := <span class="id" title="var">destination0</span>; <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> := <span class="id" title="var">output0</span> |}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Htr</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_is_last"><span class="id" title="lemma">finite_trace_last_is_last</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="build_trace_prefix_valid" class="idref" href="#build_trace_prefix_valid"><span class="id" title="definition">build_trace_prefix_valid</span></a><br/>
&nbsp;&nbsp;{<a id="tr:809" class="idref" href="#tr:809"><span class="id" title="binder">tr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_trace"><span class="id" title="definition">valid_trace</span></a>}<br/>
&nbsp;&nbsp;{<a id="last:810" class="idref" href="#last:810"><span class="id" title="binder">last</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>}<br/>
&nbsp;&nbsp;{<a id="prefix:811" class="idref" href="#prefix:811"><span class="id" title="binder">prefix</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>}<br/>
&nbsp;&nbsp;(<a id="Hprefix:812" class="idref" href="#Hprefix:812"><span class="id" title="binder">Hprefix</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#trace_prefix"><span class="id" title="definition">trace_prefix</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:809"><span class="id" title="variable">tr</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#last:810"><span class="id" title="variable">last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#prefix:811"><span class="id" title="variable">prefix</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#valid_trace"><span class="id" title="definition">valid_trace</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> (<a class="idref" href="VLSM.Core.VLSM.html#Finite"><span class="id" title="constructor">Finite</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#trace_first"><span class="id" title="definition">trace_first</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:809"><span class="id" title="variable">tr</span></a>)) (<a class="idref" href="VLSM.Core.VLSM.html#prefix:811"><span class="id" title="variable">prefix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.VLSM.html#last:810"><span class="id" title="variable">last</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.VLSM.html#trace_prefix_valid"><span class="id" title="lemma">trace_prefix_valid</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:809"><span class="id" title="variable">tr</span></a> <a class="idref" href="VLSM.Core.VLSM.html#last:810"><span class="id" title="variable">last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#prefix:811"><span class="id" title="variable">prefix</span></a> <a class="idref" href="VLSM.Core.VLSM.html#Hprefix:812"><span class="id" title="variable">Hprefix</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trace_prefix_fn_valid" class="idref" href="#trace_prefix_fn_valid"><span class="id" title="lemma">trace_prefix_fn_valid</span></a><br/>
&nbsp;&nbsp;(<a id="tr:813" class="idref" href="#tr:813"><span class="id" title="binder">tr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#Trace"><span class="id" title="inductive">Trace</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:814" class="idref" href="#Htr:814"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_trace_prop"><span class="id" title="definition">valid_trace_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:813"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;(<a id="n:815" class="idref" href="#n:815"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_prop"><span class="id" title="definition">valid_trace_prop</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#trace_prefix_fn"><span class="id" title="definition">trace_prefix_fn</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:813"><span class="id" title="variable">tr</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n:815"><span class="id" title="variable">n</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.VLSM.html#trace_prefix_valid"><span class="id" title="lemma">trace_prefix_valid</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">tr</span> <span class="id" title="var">Htr</span>)); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">Hpref</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="VLSM.Core.VLSM.html#trace_prefix_fn"><span class="id" title="definition">trace_prefix_fn</span></a> <span class="id" title="var">tr</span> <span class="id" title="var">n</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">pref_tr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pref_tr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">l</span> | <span class="id" title="var">s</span> <span class="id" title="var">l</span>]; <span class="id" title="var">cycle</span> 1.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">tr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s'</span> <span class="id" title="var">l'</span> | <span class="id" title="var">s'</span> <span class="id" title="var">l'</span>]; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqpref_tr</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">item</span> <span class="id" title="var">l</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">tr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s'</span> <span class="id" title="var">l'</span> | <span class="id" title="var">s'</span> <span class="id" title="var">l'</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Hinit</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqpref_tr</span>; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; (<span class="id" title="tactic">split</span>; [| <span class="id" title="var">done</span>])<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">constructor</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_is_valid"><span class="id" title="lemma">initial_state_is_valid</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hnnil</span> : <span class="id" title="var">item</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">intro</span> <span class="id" title="var">Hnil</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hnil</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#exists_last"><span class="id" title="lemma">exists_last</span></a> <span class="id" title="var">Hnnil</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">prefix</span> [<span class="id" title="var">last</span> <span class="id" title="var">Heq</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hnnil</span> <span class="id" title="var">Heq</span> <span class="id" title="var">l</span> <span class="id" title="var">item</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">s</span> <span class="id" title="keyword">with</span> (<a class="idref" href="VLSM.Core.VLSM.html#trace_first"><span class="id" title="definition">trace_first</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">tr</span> <span class="id" title="var">Htr</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqpref_tr</span>; <span class="id" title="tactic">subst</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#trace_prefix_valid"><span class="id" title="lemma">trace_prefix_valid</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">prefix</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">last</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">prefix_last</span>. <span class="id" title="var">revert</span> <span class="id" title="var">Heqprefix_last</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">tr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s'</span> <span class="id" title="var">l'</span> | <span class="id" title="var">s'</span> <span class="id" title="var">l'</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqpref_tr</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">clear</span> <span class="id" title="var">Heqpref_tr</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">simpl</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">intro</span> <span class="id" title="var">Heqprefix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">specialize</span> (<span class="id" title="definition">take_drop</span> <span class="id" title="var">n</span> <span class="id" title="var">l'</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">Hl'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hl'</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqprefix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="abbreviation">drop</span> <span class="id" title="var">n</span> <span class="id" title="var">l'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Lib.StreamExtras.html#stream_prefix_suffix"><span class="id" title="lemma">stream_prefix_suffix</span></a> <span class="id" title="var">l'</span> <span class="id" title="var">n</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">Hl'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hl'</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqprefix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="VLSM.Lib.StreamExtras.html#stream_suffix"><span class="id" title="definition">stream_suffix</span></a> <span class="id" title="var">l'</span> <span class="id" title="var">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="VLSM.Lib.StreamExtras.html#stream_app_assoc"><span class="id" title="lemma">stream_app_assoc</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="valid_trace_nth" class="idref" href="#valid_trace_nth"><span class="id" title="lemma">valid_trace_nth</span></a><br/>
&nbsp;&nbsp;(<a id="tr:816" class="idref" href="#tr:816"><span class="id" title="binder">tr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#Trace"><span class="id" title="inductive">Trace</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:817" class="idref" href="#Htr:817"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_trace_prop"><span class="id" title="definition">valid_trace_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:816"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;(<a id="n:818" class="idref" href="#n:818"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;(<a id="s:819" class="idref" href="#s:819"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hnth:820" class="idref" href="#Hnth:820"><span class="id" title="binder">Hnth</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#trace_nth"><span class="id" title="definition">trace_nth</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:816"><span class="id" title="variable">tr</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n:818"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:819"><span class="id" title="variable">s</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:819"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">tr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s0</span> <span class="id" title="var">l</span> | <span class="id" title="var">s0</span> <span class="id" title="var">l</span>]; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Hinit</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_suffix"><span class="id" title="lemma">finite_valid_trace_from_suffix</span></a> <span class="id" title="var">s0</span> <span class="id" title="var">l</span> <span class="id" title="var">Htr</span> <span class="id" title="var">n</span> <span class="id" title="var">s</span> <span class="id" title="var">Hnth</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hsuf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_first_pstate"><span class="id" title="lemma">finite_valid_trace_first_pstate</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsuf</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hle</span> : <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="var">n</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.VLSM.html#infinite_valid_trace_from_segment"><span class="id" title="lemma">infinite_valid_trace_from_segment</span></a> <span class="id" title="var">s0</span> <span class="id" title="var">l</span> <span class="id" title="var">Htr</span> <span class="id" title="var">n</span> <span class="id" title="var">n</span> <span class="id" title="var">Hle</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">Hseg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hnth</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_first_pstate"><span class="id" title="lemma">finite_valid_trace_first_pstate</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hseg</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="in_futures_valid_snd" class="idref" href="#in_futures_valid_snd"><span class="id" title="lemma">in_futures_valid_snd</span></a><br/>
&nbsp;&nbsp;(<a id="first:821" class="idref" href="#first:821"><span class="id" title="binder">first</span></a> <a id="second:822" class="idref" href="#second:822"><span class="id" title="binder">second</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hfutures:823" class="idref" href="#Hfutures:823"><span class="id" title="binder">Hfutures</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#in_futures"><span class="id" title="definition">in_futures</span></a> <a class="idref" href="VLSM.Core.VLSM.html#first:821"><span class="id" title="variable">first</span></a> <a class="idref" href="VLSM.Core.VLSM.html#second:822"><span class="id" title="variable">second</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#second:822"><span class="id" title="variable">second</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.VLSM.html#in_futures_witness"><span class="id" title="lemma">in_futures_witness</span></a> <span class="id" title="tactic">first</span> <span class="id" title="var">second</span> <span class="id" title="var">Hfutures</span>)<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> [<span class="id" title="var">tr</span> [<span class="id" title="var">n1</span> [<span class="id" title="var">n2</span> [<span class="id" title="var">Hle</span> [<span class="id" title="var">Hn1</span> <span class="id" title="var">Hn2</span>]]]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">tr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">tr</span> <span class="id" title="var">Htr</span>]; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_trace_nth"><span class="id" title="lemma">valid_trace_nth</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">tr</span> <span class="id" title="var">n2</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="in_futures_witness_reverse" class="idref" href="#in_futures_witness_reverse"><span class="id" title="lemma">in_futures_witness_reverse</span></a><br/>
&nbsp;&nbsp;(<a id="first:824" class="idref" href="#first:824"><span class="id" title="binder">first</span></a> <a id="second:825" class="idref" href="#second:825"><span class="id" title="binder">second</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:826" class="idref" href="#tr:826"><span class="id" title="binder">tr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_trace"><span class="id" title="definition">valid_trace</span></a>)<br/>
&nbsp;&nbsp;(<a id="n1:827" class="idref" href="#n1:827"><span class="id" title="binder">n1</span></a> <a id="n2:828" class="idref" href="#n2:828"><span class="id" title="binder">n2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hle:829" class="idref" href="#Hle:829"><span class="id" title="binder">Hle</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#n1:827"><span class="id" title="variable">n1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#n2:828"><span class="id" title="variable">n2</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hs1:830" class="idref" href="#Hs1:830"><span class="id" title="binder">Hs1</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#trace_nth"><span class="id" title="definition">trace_nth</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:826"><span class="id" title="variable">tr</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#n1:827"><span class="id" title="variable">n1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#first:824"><span class="id" title="variable">first</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hs2:831" class="idref" href="#Hs2:831"><span class="id" title="binder">Hs2</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#trace_nth"><span class="id" title="definition">trace_nth</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:826"><span class="id" title="variable">tr</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#n2:828"><span class="id" title="variable">n2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#second:825"><span class="id" title="variable">second</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#in_futures"><span class="id" title="definition">in_futures</span></a> <a class="idref" href="VLSM.Core.VLSM.html#first:824"><span class="id" title="variable">first</span></a> <a class="idref" href="VLSM.Core.VLSM.html#second:825"><span class="id" title="variable">second</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">tr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">tr</span> <span class="id" title="var">Htr</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hle</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hle</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hs1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs2</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hs2</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hs2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_trace_nth"><span class="id" title="lemma">valid_trace_nth</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">tr</span> <span class="id" title="var">n2</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> (<a class="idref" href="VLSM.Core.VLSM.html#trace_segment"><span class="id" title="definition">trace_segment</span></a> <span class="id" title="var">tr</span> <span class="id" title="var">n1</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">m</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_add_last"><span class="id" title="lemma">finite_valid_trace_from_add_last</span></a>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_trace_segment"><span class="id" title="lemma">valid_trace_segment</span></a>; [| <span class="id" title="var">lia</span> |] |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">tr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">tr</span> | <span class="id" title="var">s</span> <span class="id" title="var">tr</span>]; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs1</span>, <span class="id" title="var">Hs2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Lib.ListExtras.html#list_segment"><span class="id" title="definition">list_segment</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_suffix"><span class="id" title="lemma">finite_trace_last_suffix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_prefix"><span class="id" title="lemma">finite_trace_last_prefix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_nth_length"><span class="id" title="lemma">finite_trace_nth_length</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">take_length</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Lib.StreamExtras.html#stream_segment"><span class="id" title="definition">stream_segment</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#unlock_finite_trace_last"><span class="id" title="lemma">unlock_finite_trace_last</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#skipn_map"><span class="id" title="lemma">skipn_map</span></a>, <a class="idref" href="VLSM.Lib.StreamExtras.html#stream_prefix_map"><span class="id" title="lemma">stream_prefix_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.ListExtras.html#drop_last"><span class="id" title="lemma">drop_last</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.StreamExtras.html#stream_prefix_nth_last"><span class="id" title="lemma">stream_prefix_nth_last</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.Streams.html#Str_nth"><span class="id" title="definition">Str_nth</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs2</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hs2</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Lib.StreamExtras.html#stream_prefix_length"><span class="id" title="lemma">stream_prefix_length</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.Streams.html#map"><span class="id" title="definition">Streams.map</span></a> <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">tr</span>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">m</span>)); <span class="id" title="tactic">intro</span> <span class="id" title="var">Hpref_len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hpref_len</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Stating liveness properties will require quantifying over complete
  executions of the protocol. To make this possible, we will now define
  <i>complete</i> <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_trace"><span class="id" title="definition">valid_trace</span></a></span>s.

<div class="paragraph"> </div>

  A <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_trace"><span class="id" title="definition">valid_trace</span></a></span> is <i>terminating</i> if there's no other <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_trace"><span class="id" title="definition">valid_trace</span></a></span>
  that contains it as a prefix.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="terminating_trace_prop" class="idref" href="#terminating_trace_prop"><span class="id" title="definition">terminating_trace_prop</span></a> (<a id="tr:832" class="idref" href="#tr:832"><span class="id" title="binder">tr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#Trace"><span class="id" title="inductive">Trace</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Core.VLSM.html#tr:832"><span class="id" title="variable">tr</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSM.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">ls</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="tr:834" class="idref" href="#tr:834"><span class="id" title="binder">tr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_trace"><span class="id" title="definition">valid_trace</span></a>) (<a id="last:835" class="idref" href="#last:835"><span class="id" title="binder">last</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#trace_prefix"><span class="id" title="definition">trace_prefix</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:834"><span class="id" title="variable">tr</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#last:835"><span class="id" title="variable">last</span></a> <span class="id" title="var">ls</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSM.html#Infinite"><span class="id" title="constructor">Infinite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">ls</span> =&gt; <span class="id" title="notation">False</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
A <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_trace"><span class="id" title="definition">valid_trace</span></a></span> is <i>complete</i>, if it is either <i>terminating</i> or infinite. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="complete_trace_prop" class="idref" href="#complete_trace_prop"><span class="id" title="definition">complete_trace_prop</span></a> (<a id="tr:836" class="idref" href="#tr:836"><span class="id" title="binder">tr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#Trace"><span class="id" title="inductive">Trace</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_prop"><span class="id" title="definition">valid_trace_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:836"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Core.VLSM.html#tr:836"><span class="id" title="variable">tr</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSM.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="VLSM.Core.VLSM.html#terminating_trace_prop"><span class="id" title="definition">terminating_trace_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:836"><span class="id" title="variable">tr</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="VLSM.Core.VLSM.html#Infinite"><span class="id" title="constructor">Infinite</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="notation">True</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(*<br/>
&nbsp;&nbsp;Implicitly,&nbsp;the&nbsp;state&nbsp;itself&nbsp;must&nbsp;be&nbsp;in&nbsp;the&nbsp;trace,&nbsp;and&nbsp;minimally&nbsp;the&nbsp;last<br/>
&nbsp;&nbsp;element&nbsp;of&nbsp;the&nbsp;trace.&nbsp;Also&nbsp;implicitly,&nbsp;the&nbsp;trace&nbsp;leading&nbsp;up&nbsp;to&nbsp;the&nbsp;state<br/>
&nbsp;&nbsp;is&nbsp;finite.<br/>
<br/>
&nbsp;&nbsp;Defining&nbsp;equivocation&nbsp;on&nbsp;these&nbsp;trace&nbsp;definitions<br/>
<br/>
&nbsp;&nbsp;Section&nbsp;7:<br/>
&nbsp;&nbsp;A&nbsp;message&nbsp;m&nbsp;received&nbsp;by&nbsp;a&nbsp;valid&nbsp;state&nbsp;s&nbsp;with&nbsp;a&nbsp;transition&nbsp;label&nbsp;l&nbsp;in&nbsp;a<br/>
&nbsp;&nbsp;valid&nbsp;execution&nbsp;trace&nbsp;is&nbsp;called&nbsp;"an&nbsp;equivocation"&nbsp;if&nbsp;it&nbsp;wasn't&nbsp;produced<br/>
&nbsp;&nbsp;in&nbsp;that&nbsp;trace<br/>
*)</span><br/>

<br/>
<span class="comment">(*&nbsp;6.2.2&nbsp;Equivocation-free&nbsp;as&nbsp;a&nbsp;composition&nbsp;constraint&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="composition_constraint" class="idref" href="#composition_constraint"><span class="id" title="definition">composition_constraint</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Decidable&nbsp;VLSMs&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Class</span> <a id="VLSM_vdecidable" class="idref" href="#VLSM_vdecidable"><span class="id" title="record">VLSM_vdecidable</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
{<br/>
&nbsp;&nbsp;<a id="valid_decidable" class="idref" href="#valid_decidable"><span class="id" title="projection">valid_decidable</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="l:839" class="idref" href="#l:839"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a>) (<a id="som:840" class="idref" href="#som:840"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.message"><span class="id" title="variable">message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">{</span></a><a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:839"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som:840"><span class="id" title="variable">som</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">{</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:839"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#som:840"><span class="id" title="variable">som</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">}</span></a><br/>
}.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.VLSM.html#sec_VLSM"><span class="id" title="section">sec_VLSM</span></a>.<br/>

<br/>
</div>

<div class="doc">
  Make all arguments of <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop_ind"><span class="id" title="lemma">valid_state_prop_ind</span></a></span> explicit
  so it will work with the <code>induction using</code> tactic
  (closing the section added <code>{message}</code> as an implicit argument).

</div>
<div class="code">
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop_ind"><span class="id" title="definition">valid_state_message_prop_ind</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop_ind"><span class="id" title="lemma">valid_state_prop_ind</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_ind"><span class="id" title="definition">finite_valid_trace_from_to_ind</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_rev_ind"><span class="id" title="lemma">finite_valid_trace_rev_ind</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_rev_ind"><span class="id" title="lemma">finite_valid_trace_from_rev_ind</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_rev_ind"><span class="id" title="lemma">finite_valid_trace_from_to_rev_ind</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_rev_ind"><span class="id" title="lemma">finite_valid_trace_init_to_rev_ind</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_rev_strong_ind"><span class="id" title="lemma">finite_valid_trace_init_to_rev_strong_ind</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#extend_right_finite_trace_from"><span class="id" title="lemma">extend_right_finite_trace_from</span></a> [<span class="id" title="var">message</span>] <span class="id" title="var">X</span> [<span class="id" title="var">s1</span> <span class="id" title="var">ts</span>] <span class="id" title="var">Ht12</span> [<span class="id" title="var">l3</span> <span class="id" title="var">iom3</span> <span class="id" title="var">s3</span> <span class="id" title="var">oom3</span>] <span class="id" title="var">Hv23</span>.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.VLSM.html#extend_right_finite_trace_from_to"><span class="id" title="lemma">extend_right_finite_trace_from_to</span></a> [<span class="id" title="var">message</span>] <span class="id" title="var">X</span> [<span class="id" title="var">s1</span> <span class="id" title="var">s2</span> <span class="id" title="var">ts</span>] <span class="id" title="var">Ht12</span> [<span class="id" title="var">l3</span> <span class="id" title="var">iom3</span> <span class="id" title="var">s3</span> <span class="id" title="var">oom3</span>] <span class="id" title="var">Hv23</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <a id="TraceWithLast" class="idref" href="#TraceWithLast"><span class="id" title="record">TraceWithLast</span></a><br/>
&nbsp;&nbsp;(<a id="base_prop:844" class="idref" href="#base_prop:844"><span class="id" title="binder">base_prop</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> {<a id="message:842" class="idref" href="#message:842"><span class="id" title="binder">message</span></a>} (<a id="X:843" class="idref" href="#X:843"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:842"><span class="id" title="variable">message</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:843"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="trace_prop:847" class="idref" href="#trace_prop:847"><span class="id" title="binder">trace_prop</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> {<a id="message:845" class="idref" href="#message:845"><span class="id" title="binder">message</span></a>} (<a id="X:846" class="idref" href="#X:846"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:845"><span class="id" title="variable">message</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:846"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:846"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span> :=<br/>
{<br/>
&nbsp;&nbsp;<a id="valid_trace_add_last" class="idref" href="#valid_trace_add_last"><span class="id" title="projection">valid_trace_add_last</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> [<a id="msg:849" class="idref" href="#msg:849"><span class="id" title="binder">msg</span></a>] [<a id="X:850" class="idref" href="#X:850"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#msg:849"><span class="id" title="variable">msg</span></a>] [<a id="s:851" class="idref" href="#s:851"><span class="id" title="binder">s</span></a> <a id="f:852" class="idref" href="#f:852"><span class="id" title="binder">f</span></a> <a id="tr:853" class="idref" href="#tr:853"><span class="id" title="binder">tr</span></a>]<span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#base_prop:844"><span class="id" title="variable">base_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:850"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:851"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:853"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:851"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:853"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:852"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#trace_prop:847"><span class="id" title="variable">trace_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:850"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:851"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:852"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:853"><span class="id" title="variable">tr</span></a>;<br/>
&nbsp;&nbsp;<a id="valid_trace_get_last" class="idref" href="#valid_trace_get_last"><span class="id" title="projection">valid_trace_get_last</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> [<a id="msg:855" class="idref" href="#msg:855"><span class="id" title="binder">msg</span></a>] [<a id="X:856" class="idref" href="#X:856"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#msg:855"><span class="id" title="variable">msg</span></a>] [<a id="s:857" class="idref" href="#s:857"><span class="id" title="binder">s</span></a> <a id="f:858" class="idref" href="#f:858"><span class="id" title="binder">f</span></a> <a id="tr:859" class="idref" href="#tr:859"><span class="id" title="binder">tr</span></a>]<span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#trace_prop:847"><span class="id" title="variable">trace_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:856"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:857"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:858"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:859"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:857"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:859"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:858"><span class="id" title="variable">f</span></a>;<br/>
&nbsp;&nbsp;<a id="valid_trace_last_pstate" class="idref" href="#valid_trace_last_pstate"><span class="id" title="projection">valid_trace_last_pstate</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> [<a id="msg:861" class="idref" href="#msg:861"><span class="id" title="binder">msg</span></a>] [<a id="X:862" class="idref" href="#X:862"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#msg:861"><span class="id" title="variable">msg</span></a>] [<a id="s:863" class="idref" href="#s:863"><span class="id" title="binder">s</span></a> <a id="f:864" class="idref" href="#f:864"><span class="id" title="binder">f</span></a> <a id="tr:865" class="idref" href="#tr:865"><span class="id" title="binder">tr</span></a>]<span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#trace_prop:847"><span class="id" title="variable">trace_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:862"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:863"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:864"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:865"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:862"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:864"><span class="id" title="variable">f</span></a>;<br/>
&nbsp;&nbsp;<a id="valid_trace_forget_last" class="idref" href="#valid_trace_forget_last"><span class="id" title="projection">valid_trace_forget_last</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> [<a id="msg:867" class="idref" href="#msg:867"><span class="id" title="binder">msg</span></a>] [<a id="X:868" class="idref" href="#X:868"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#msg:867"><span class="id" title="variable">msg</span></a>] [<a id="s:869" class="idref" href="#s:869"><span class="id" title="binder">s</span></a> <a id="f:870" class="idref" href="#f:870"><span class="id" title="binder">f</span></a> <a id="tr:871" class="idref" href="#tr:871"><span class="id" title="binder">tr</span></a>]<span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#trace_prop:847"><span class="id" title="variable">trace_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:868"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:869"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:870"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:871"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#base_prop:844"><span class="id" title="variable">base_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:868"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:869"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:871"><span class="id" title="variable">tr</span></a>;<br/>
}.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="var">Mode</span> <a class="idref" href="VLSM.Core.VLSM.html#TraceWithLast"><span class="id" title="class">TraceWithLast</span></a> - ! : <span class="id" title="var">typeclass_instances</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="var">Mode</span> <a class="idref" href="VLSM.Core.VLSM.html#TraceWithLast"><span class="id" title="class">TraceWithLast</span></a> ! - : <span class="id" title="var">typeclass_instances</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="valid_trace_add_default_last" class="idref" href="#valid_trace_add_default_last"><span class="id" title="definition">valid_trace_add_default_last</span></a><br/>
&nbsp;&nbsp;`{<a id="H:875" class="idref" href="#H:875"><span class="id" title="binder">TraceWithLast</span></a> <a id="base_prop:873" class="idref" href="#base_prop:873"><span class="id" title="binder"><span id="H:875" class="id">base_prop</span></span></a> <a id="trace_prop:874" class="idref" href="#trace_prop:874"><span class="id" title="binder"><span id="H:875" class="id">trace_prop</span></span></a>}<br/>
&nbsp;&nbsp;[<a id="msg:876" class="idref" href="#msg:876"><span class="id" title="binder">msg</span></a>] [<a id="X:877" class="idref" href="#X:877"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#msg:876"><span class="id" title="variable">msg</span></a>] [<a id="s:878" class="idref" href="#s:878"><span class="id" title="binder">s</span></a> <a id="tr:879" class="idref" href="#tr:879"><span class="id" title="binder">tr</span></a>] (<a id="Htr:880" class="idref" href="#Htr:880"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#base_prop:873"><span class="id" title="variable">base_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#msg:876"><span class="id" title="variable">msg</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:877"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:878"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:879"><span class="id" title="variable">tr</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#trace_prop:874"><span class="id" title="variable">trace_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#msg:876"><span class="id" title="variable">msg</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:877"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:878"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:878"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:879"><span class="id" title="variable">tr</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#tr:879"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_trace_add_last"><span class="id" title="method">valid_trace_add_last</span></a>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="trace_with_last_valid_trace_from" class="idref" href="#trace_with_last_valid_trace_from"><span class="id" title="instance">trace_with_last_valid_trace_from</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#TraceWithLast"><span class="id" title="class">TraceWithLast</span></a> (@<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a>) (@<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a>) :=<br/>
{<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_add_last"><span class="id" title="method">valid_trace_add_last</span></a> := @<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_add_last"><span class="id" title="lemma">finite_valid_trace_from_add_last</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_get_last"><span class="id" title="method">valid_trace_get_last</span></a> := @<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_last"><span class="id" title="lemma">finite_valid_trace_from_to_last</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_last_pstate"><span class="id" title="method">valid_trace_last_pstate</span></a> := @<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_last_pstate"><span class="id" title="lemma">finite_valid_trace_from_to_last_pstate</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_forget_last"><span class="id" title="method">valid_trace_forget_last</span></a> := @<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_forget_last"><span class="id" title="lemma">finite_valid_trace_from_to_forget_last</span></a>;<br/>
}.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="trace_with_last_valid_trace_init" class="idref" href="#trace_with_last_valid_trace_init"><span class="id" title="instance">trace_with_last_valid_trace_init</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#TraceWithLast"><span class="id" title="class">TraceWithLast</span></a> (@<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace"><span class="id" title="definition">finite_valid_trace</span></a>) (@<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a>) :=<br/>
{<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_add_last"><span class="id" title="method">valid_trace_add_last</span></a> := @<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_add_last"><span class="id" title="lemma">finite_valid_trace_init_add_last</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_get_last"><span class="id" title="method">valid_trace_get_last</span></a> := @<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_last"><span class="id" title="lemma">finite_valid_trace_init_to_last</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_last_pstate"><span class="id" title="method">valid_trace_last_pstate</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a id="H:881" class="idref" href="#H:881"><span class="id" title="binder">H</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#valid_trace_last_pstate"><span class="id" title="method">valid_trace_last_pstate</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#proj1"><span class="id" title="lemma">proj1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#H:881"><span class="id" title="variable">H</span></a>);<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_forget_last"><span class="id" title="method">valid_trace_forget_last</span></a> := @<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_forget_last"><span class="id" title="lemma">finite_valid_trace_init_to_forget_last</span></a>;<br/>
}.<br/>

<br/>
<span class="id" title="keyword">Class</span> <a id="TraceWithStart" class="idref" href="#TraceWithStart"><span class="id" title="record">TraceWithStart</span></a><br/>
&nbsp;&nbsp;{<a id="message:882" class="idref" href="#message:882"><span class="id" title="binder">message</span></a>} {<a id="X:883" class="idref" href="#X:883"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:882"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;(<a id="start:884" class="idref" href="#start:884"><span class="id" title="binder">start</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:883"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="trace_prop:885" class="idref" href="#trace_prop:885"><span class="id" title="binder">trace_prop</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:883"><span class="id" title="variable">X</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span> :=<br/>
{<br/>
&nbsp;&nbsp;<a id="valid_trace_first_pstate" class="idref" href="#valid_trace_first_pstate"><span class="id" title="projection">valid_trace_first_pstate</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> [<a id="tr:887" class="idref" href="#tr:887"><span class="id" title="binder">tr</span></a>]<span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#trace_prop:885"><span class="id" title="variable">trace_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:887"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:883"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#start:884"><span class="id" title="variable">start</span></a>;<br/>
}.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="var">Mode</span> <a class="idref" href="VLSM.Core.VLSM.html#TraceWithStart"><span class="id" title="class">TraceWithStart</span></a> - - - ! : <span class="id" title="var">typeclass_instances</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="trace_with_start_valid_trace_from" class="idref" href="#trace_with_start_valid_trace_from"><span class="id" title="instance">trace_with_start_valid_trace_from</span></a> <a id="message:889" class="idref" href="#message:889"><span class="id" title="binder">message</span></a> (<a id="X:890" class="idref" href="#X:890"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:889"><span class="id" title="variable">message</span></a>) <a id="s:891" class="idref" href="#s:891"><span class="id" title="binder">s</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#TraceWithStart"><span class="id" title="class">TraceWithStart</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:891"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from"><span class="id" title="inductive">finite_valid_trace_from</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:890"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:891"><span class="id" title="variable">s</span></a>) :=<br/>
{<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_first_pstate"><span class="id" title="method">valid_trace_first_pstate</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_first_pstate"><span class="id" title="lemma">finite_valid_trace_first_pstate</span></a> <span class="id" title="var">X</span> <span class="id" title="var">s</span><br/>
}.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="trace_with_start_valid_trace" class="idref" href="#trace_with_start_valid_trace"><span class="id" title="instance">trace_with_start_valid_trace</span></a> <a id="message:892" class="idref" href="#message:892"><span class="id" title="binder">message</span></a> (<a id="X:893" class="idref" href="#X:893"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:892"><span class="id" title="variable">message</span></a>) <a id="s:894" class="idref" href="#s:894"><span class="id" title="binder">s</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#TraceWithStart"><span class="id" title="class">TraceWithStart</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:894"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace"><span class="id" title="definition">finite_valid_trace</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:893"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:894"><span class="id" title="variable">s</span></a>) :=<br/>
{<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_first_pstate"><span class="id" title="method">valid_trace_first_pstate</span></a> <a id="tr:895" class="idref" href="#tr:895"><span class="id" title="binder">tr</span></a> <a id="H:896" class="idref" href="#H:896"><span class="id" title="binder">H</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#valid_trace_first_pstate"><span class="id" title="method">valid_trace_first_pstate</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#proj1"><span class="id" title="lemma">proj1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#H:896"><span class="id" title="variable">H</span></a>);<br/>
}.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="trace_with_start_valid_trace_from_to" class="idref" href="#trace_with_start_valid_trace_from_to"><span class="id" title="instance">trace_with_start_valid_trace_from_to</span></a> <a id="message:897" class="idref" href="#message:897"><span class="id" title="binder">message</span></a> (<a id="X:898" class="idref" href="#X:898"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:897"><span class="id" title="variable">message</span></a>) <a id="s:899" class="idref" href="#s:899"><span class="id" title="binder">s</span></a> <a id="f:900" class="idref" href="#f:900"><span class="id" title="binder">f</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#TraceWithStart"><span class="id" title="class">TraceWithStart</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:899"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:898"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:899"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:900"><span class="id" title="variable">f</span></a>) :=<br/>
{<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_first_pstate"><span class="id" title="method">valid_trace_first_pstate</span></a> <a id="tr:901" class="idref" href="#tr:901"><span class="id" title="binder">tr</span></a> <a id="H:902" class="idref" href="#H:902"><span class="id" title="binder">H</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#valid_trace_first_pstate"><span class="id" title="method">valid_trace_first_pstate</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_forget_last"><span class="id" title="method">valid_trace_forget_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#H:902"><span class="id" title="variable">H</span></a>);<br/>
}.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="trace_with_start_valid_trace_init_to" class="idref" href="#trace_with_start_valid_trace_init_to"><span class="id" title="instance">trace_with_start_valid_trace_init_to</span></a> <a id="message:903" class="idref" href="#message:903"><span class="id" title="binder">message</span></a> (<a id="X:904" class="idref" href="#X:904"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:903"><span class="id" title="variable">message</span></a>) <a id="s:905" class="idref" href="#s:905"><span class="id" title="binder">s</span></a> <a id="f:906" class="idref" href="#f:906"><span class="id" title="binder">f</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#TraceWithStart"><span class="id" title="class">TraceWithStart</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:905"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:904"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:905"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:906"><span class="id" title="variable">f</span></a>) :=<br/>
{<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_first_pstate"><span class="id" title="method">valid_trace_first_pstate</span></a> <a id="tr:907" class="idref" href="#tr:907"><span class="id" title="binder">tr</span></a> <a id="H:908" class="idref" href="#H:908"><span class="id" title="binder">H</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#valid_trace_first_pstate"><span class="id" title="method">valid_trace_first_pstate</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#valid_trace_forget_last"><span class="id" title="method">valid_trace_forget_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#H:908"><span class="id" title="variable">H</span></a>);<br/>
}.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="non_empty_valid_trace_from_can_produce" class="idref" href="#non_empty_valid_trace_from_can_produce"><span class="id" title="lemma">non_empty_valid_trace_from_can_produce</span></a><br/>
&nbsp;&nbsp;`(<a id="X:910" class="idref" href="#X:910"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a id="message:909" class="idref" href="#message:909"><span class="id" title="binder">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="s:911" class="idref" href="#s:911"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:910"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="m:912" class="idref" href="#m:912"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#message:909"><span class="id" title="variable">message</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#can_produce"><span class="id" title="definition">can_produce</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:910"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:911"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:912"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="is:913" class="idref" href="#is:913"><span class="id" title="binder">is</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:910"><span class="id" title="variable">X</span></a>) (<a id="tr:914" class="idref" href="#tr:914"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a>) (<a id="item:915" class="idref" href="#item:915"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace"><span class="id" title="definition">finite_valid_trace</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:910"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:913"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:914"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Lib.ListExtras.html#last_error"><span class="id" title="definition">last_error</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:914"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#item:915"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.VLSM.html#item:915"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:911"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="VLSM.Core.VLSM.html#item:915"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:912"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [(<span class="id" title="var">s'</span>, <span class="id" title="var">om'</span>) [<span class="id" title="var">l</span> <span class="id" title="var">Hsm</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <span class="id" title="var">Hsm</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hp</span> <span class="id" title="var">_</span>] <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_singleton"><span class="id" title="lemma">finite_valid_trace_singleton</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hsm</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_complete_left"><span class="id" title="lemma">finite_valid_trace_from_complete_left</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span>  <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="keyword">is</span> [<span class="id" title="var">trs</span> [<span class="id" title="var">Htrs</span> <span class="id" title="var">_</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span> <span class="id" title="keyword">is</span>, (<span class="id" title="var">trs</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">_</span>), <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.ListExtras.html#last_error_is_last"><span class="id" title="lemma">last_error_is_last</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="keyword">is</span> [<span class="id" title="var">tr</span> [<span class="id" title="var">item</span> [<span class="id" title="var">Htr</span> [<span class="id" title="var">Hitem</span> [<span class="id" title="var">Hs</span> <span class="id" title="var">Hm</span>]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_list_last</span> <span class="id" title="var">tr</span> <span class="id" title="var">tr'</span> <span class="id" title="var">item'</span> <span class="id" title="var">Heq</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hitem</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.ListExtras.html#last_error_is_last"><span class="id" title="lemma">last_error_is_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hitem</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hitem</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Hitem</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">item'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_app_iff"><span class="id" title="lemma">finite_valid_trace_from_app_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Htr</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Htr</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span> <span class="id" title="var">_</span>, <span class="id" title="var">l0</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Ht</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The last transition of a valid VLSM trace is valid 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_from_to_last_transition" class="idref" href="#finite_valid_trace_from_to_last_transition"><span class="id" title="lemma">finite_valid_trace_from_to_last_transition</span></a> `(<a id="X:917" class="idref" href="#X:917"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a id="message:916" class="idref" href="#message:916"><span class="id" title="binder">message</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:918" class="idref" href="#s:918"><span class="id" title="binder">s</span></a> <a id="f:919" class="idref" href="#f:919"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:917"><span class="id" title="variable">X</span></a>) (<a id="tr:920" class="idref" href="#tr:920"><span class="id" title="binder">tr</span></a> <a id="tr':921" class="idref" href="#tr':921"><span class="id" title="binder">tr'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:917"><span class="id" title="variable">X</span></a>)) (<a id="li:922" class="idref" href="#li:922"><span class="id" title="binder">li</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:917"><span class="id" title="variable">X</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:917"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:918"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:919"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr':921"><span class="id" title="variable">tr'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr':921"><span class="id" title="variable">tr'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:920"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.VLSM.html#li:922"><span class="id" title="variable">li</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_item"><span class="id" title="definition">input_valid_transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:917"><span class="id" title="variable">X</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:918"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:920"><span class="id" title="variable">tr</span></a>) <a class="idref" href="VLSM.Core.VLSM.html#li:922"><span class="id" title="variable">li</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> * <span class="id" title="var">Htr</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_to"><span class="id" title="lemma">input_valid_transition_to</span></a>, <a class="idref" href="VLSM.Core.VLSM.html#valid_trace_forget_last"><span class="id" title="method">valid_trace_forget_last</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab92"></a><h3 class="section">Properties of provably-equal VLSMs</h3>


<div class="paragraph"> </div>

  If we know that two VLSMs are provably equal, we could try rewriting by them.
  However, that gets usually quite technical. To go around that, we will prove
  that there is a <span class="inlinecode"><span class="id" title="var">VLSMProjections.VLSM_embedding</span></span> between them which will
  allow trace-based results to be easily moved between the two VLSMs.

<div class="paragraph"> </div>

  Below are some preliminary results; the actual projection is given in
  <span class="inlinecode"><span class="id" title="var">VLSMProjections.same_VLSM_embedding</span></span>.

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="sec_same_VLSM" class="idref" href="#sec_same_VLSM"><span class="id" title="section">sec_same_VLSM</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;{<a id="message:923" class="idref" href="#message:923"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_same_VLSM.sec_definitions" class="idref" href="#sec_same_VLSM.sec_definitions"><span class="id" title="section">sec_definitions</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;[<a id="X1:924" class="idref" href="#X1:924"><span class="id" title="binder">X1</span></a> <a id="X2:925" class="idref" href="#X2:925"><span class="id" title="binder">X2</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.message"><span class="id" title="variable">message</span></a>]<br/>
&nbsp;&nbsp;(<a id="Heq:926" class="idref" href="#Heq:926"><span class="id" title="binder">Heq</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#X1:924"><span class="id" title="variable">X1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X2:925"><span class="id" title="variable">X2</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="same_VLSM_label_rew" class="idref" href="#same_VLSM_label_rew"><span class="id" title="definition">same_VLSM_label_rew</span></a> (<a id="l1:927" class="idref" href="#l1:927"><span class="id" title="binder">l1</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.sec_definitions.X1"><span class="id" title="variable">X1</span></a>) : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.sec_definitions.X2"><span class="id" title="variable">X2</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq_rect"><span class="id" title="definition">eq_rect</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.sec_definitions.X1"><span class="id" title="variable">X1</span></a> (@<a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <span class="id" title="var">_</span>) <a class="idref" href="VLSM.Core.VLSM.html#l1:927"><span class="id" title="variable">l1</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.sec_definitions.Heq"><span class="id" title="variable">Heq</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="same_VLSM_state_rew" class="idref" href="#same_VLSM_state_rew"><span class="id" title="definition">same_VLSM_state_rew</span></a> (<a id="s1:928" class="idref" href="#s1:928"><span class="id" title="binder">s1</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.sec_definitions.X1"><span class="id" title="variable">X1</span></a>) : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.sec_definitions.X2"><span class="id" title="variable">X2</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq_rect"><span class="id" title="definition">eq_rect</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.sec_definitions.X1"><span class="id" title="variable">X1</span></a> (@<a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <span class="id" title="var">_</span>) <a class="idref" href="VLSM.Core.VLSM.html#s1:928"><span class="id" title="variable">s1</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.sec_definitions.Heq"><span class="id" title="variable">Heq</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.sec_definitions"><span class="id" title="section">sec_definitions</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;(<a id="X1:929" class="idref" href="#X1:929"><span class="id" title="binder">X1</span></a> <a id="X2:930" class="idref" href="#X2:930"><span class="id" title="binder">X2</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Heq:931" class="idref" href="#Heq:931"><span class="id" title="binder">Heq</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#X1:929"><span class="id" title="variable">X1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X2:930"><span class="id" title="variable">X2</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="same_VLSM_valid_preservation" class="idref" href="#same_VLSM_valid_preservation"><span class="id" title="lemma">same_VLSM_valid_preservation</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="l1:932" class="idref" href="#l1:932"><span class="id" title="binder">l1</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.X1"><span class="id" title="variable">X1</span></a>) (<a id="s1:933" class="idref" href="#s1:933"><span class="id" title="binder">s1</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.X1"><span class="id" title="variable">X1</span></a>) (<a id="om:934" class="idref" href="#om:934"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.message"><span class="id" title="variable">message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.X1"><span class="id" title="variable">X1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l1:932"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s1:933"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:934"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.X2"><span class="id" title="variable">X2</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#same_VLSM_label_rew"><span class="id" title="definition">same_VLSM_label_rew</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.Heq"><span class="id" title="variable">Heq</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l1:932"><span class="id" title="variable">l1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#same_VLSM_state_rew"><span class="id" title="definition">same_VLSM_state_rew</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.Heq"><span class="id" title="variable">Heq</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:933"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:934"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">subst</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="same_VLSM_transition_preservation" class="idref" href="#same_VLSM_transition_preservation"><span class="id" title="lemma">same_VLSM_transition_preservation</span></a><br/>
&nbsp;&nbsp;(<a id="l1:935" class="idref" href="#l1:935"><span class="id" title="binder">l1</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.X1"><span class="id" title="variable">X1</span></a>) (<a id="s1:936" class="idref" href="#s1:936"><span class="id" title="binder">s1</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.X1"><span class="id" title="variable">X1</span></a>) (<a id="om:937" class="idref" href="#om:937"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="s1':938" class="idref" href="#s1':938"><span class="id" title="binder">s1'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.X1"><span class="id" title="variable">X1</span></a>) (<a id="om':939" class="idref" href="#om':939"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.message"><span class="id" title="variable">message</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.X1"><span class="id" title="variable">X1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l1:935"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s1:936"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:937"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s1':938"><span class="id" title="variable">s1'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':939"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.X2"><span class="id" title="variable">X2</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#same_VLSM_label_rew"><span class="id" title="definition">same_VLSM_label_rew</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.Heq"><span class="id" title="variable">Heq</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l1:935"><span class="id" title="variable">l1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#same_VLSM_state_rew"><span class="id" title="definition">same_VLSM_state_rew</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.Heq"><span class="id" title="variable">Heq</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:936"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:937"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#same_VLSM_state_rew"><span class="id" title="definition">same_VLSM_state_rew</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.Heq"><span class="id" title="variable">Heq</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1':938"><span class="id" title="variable">s1'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':939"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">subst</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="same_VLSM_initial_state_preservation" class="idref" href="#same_VLSM_initial_state_preservation"><span class="id" title="lemma">same_VLSM_initial_state_preservation</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s1:940" class="idref" href="#s1:940"><span class="id" title="binder">s1</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.X1"><span class="id" title="variable">X1</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.X1"><span class="id" title="variable">X1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:940"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.X2"><span class="id" title="variable">X2</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#same_VLSM_state_rew"><span class="id" title="definition">same_VLSM_state_rew</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.Heq"><span class="id" title="variable">Heq</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:940"><span class="id" title="variable">s1</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">subst</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="same_VLSM_initial_message_preservation" class="idref" href="#same_VLSM_initial_message_preservation"><span class="id" title="lemma">same_VLSM_initial_message_preservation</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="m:941" class="idref" href="#m:941"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.message"><span class="id" title="variable">message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.X1"><span class="id" title="variable">X1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:941"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM.X2"><span class="id" title="variable">X2</span></a> <a class="idref" href="VLSM.Core.VLSM.html#m:941"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">subst</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.VLSM.html#sec_same_VLSM"><span class="id" title="section">sec_same_VLSM</span></a>.<br/>

<br/>
<span class="id" title="keyword">Record</span> <a id="valid_transition" class="idref" href="#valid_transition"><span class="id" title="record">valid_transition</span></a> `(<a id="X:943" class="idref" href="#X:943"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a id="message:942" class="idref" href="#message:942"><span class="id" title="binder">message</span></a>) <a id="l:944" class="idref" href="#l:944"><span class="id" title="binder">l</span></a> <a id="s1:945" class="idref" href="#s1:945"><span class="id" title="binder">s1</span></a> <a id="iom:946" class="idref" href="#iom:946"><span class="id" title="binder">iom</span></a> <a id="s2:947" class="idref" href="#s2:947"><span class="id" title="binder">s2</span></a> <a id="oom:948" class="idref" href="#oom:948"><span class="id" title="binder">oom</span></a> : <span class="id" title="keyword">Prop</span> :=<br/>
{<br/>
&nbsp;&nbsp;<a id="vt_valid" class="idref" href="#vt_valid"><span class="id" title="projection">vt_valid</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:943"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:944"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s1:945"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:946"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>;<br/>
&nbsp;&nbsp;<a id="vt_transition" class="idref" href="#vt_transition"><span class="id" title="projection">vt_transition</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:943"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:944"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s1:945"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:946"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s2:947"><span class="id" title="variable">s2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:948"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>;<br/>
}.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="valid_transition_next" class="idref" href="#valid_transition_next"><span class="id" title="definition, inductive"><span id="valid_transition_next_ind" class="id"><span id="valid_transition_next_sind" class="id">valid_transition_next</span></span></span></a> `(<a id="X:953" class="idref" href="#X:953"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a id="message:952" class="idref" href="#message:952"><span class="id" title="binder">message</span></a>) (<a id="s1:954" class="idref" href="#s1:954"><span class="id" title="binder">s1</span></a> <a id="s2:955" class="idref" href="#s2:955"><span class="id" title="binder">s2</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:953"><span class="id" title="variable">X</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="transition_next" class="idref" href="#transition_next"><span class="id" title="constructor">transition_next</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="l:958" class="idref" href="#l:958"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:953"><span class="id" title="variable">X</span></a>) (<a id="iom:959" class="idref" href="#iom:959"><span class="id" title="binder">iom</span></a> <a id="oom:960" class="idref" href="#oom:960"><span class="id" title="binder">oom</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.VLSM.html#message:952"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:961" class="idref" href="#Ht:961"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_transition"><span class="id" title="record">valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:953"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:958"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:954"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:959"><span class="id" title="variable">iom</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s2:955"><span class="id" title="variable">s2</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:960"><span class="id" title="variable">oom</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_transition_next:956"><span class="id" title="inductive">valid_transition_next</span></a> <a class="idref" href="VLSM.Core.VLSM.html#X:953"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:954"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s2:955"><span class="id" title="variable">s2</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_valid_transition_props" class="idref" href="#sec_valid_transition_props"><span class="id" title="section">sec_valid_transition_props</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;`(<a id="X:963" class="idref" href="#X:963"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a id="message:962" class="idref" href="#message:962"><span class="id" title="binder">message</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_forget_input" class="idref" href="#input_valid_transition_forget_input"><span class="id" title="lemma">input_valid_transition_forget_input</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="l:964" class="idref" href="#l:964"><span class="id" title="binder">l</span></a> <a id="s1:965" class="idref" href="#s1:965"><span class="id" title="binder">s1</span></a> <a id="iom:966" class="idref" href="#iom:966"><span class="id" title="binder">iom</span></a> <a id="s2:967" class="idref" href="#s2:967"><span class="id" title="binder">s2</span></a> <a id="oom:968" class="idref" href="#oom:968"><span class="id" title="binder">oom</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_valid_transition_props.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:964"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s1:965"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:966"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s2:967"><span class="id" title="variable">s2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:968"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_transition"><span class="id" title="record">valid_transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_valid_transition_props.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:964"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s1:965"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.VLSM.html#iom:966"><span class="id" title="variable">iom</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s2:967"><span class="id" title="variable">s2</span></a> <a class="idref" href="VLSM.Core.VLSM.html#oom:968"><span class="id" title="variable">oom</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">firstorder</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.VLSM.html#sec_valid_transition_props"><span class="id" title="section">sec_valid_transition_props</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_finite_valid_trace_init_to_alt" class="idref" href="#sec_finite_valid_trace_init_to_alt"><span class="id" title="section">sec_finite_valid_trace_init_to_alt</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab93"></a><h2 class="section">Alternate definitions of valid traces and states</h2>


<div class="paragraph"> </div>

  Inspired from the <span class="inlinecode"><a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_transitions_from_to"><span class="id" title="inductive">constrained_transitions_from_to</span></a></span> definition we can
  derive an alternate definition for valid traces which is easier to use
  when checking whether a concrete trace is valid.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;`(<a id="X:970" class="idref" href="#X:970"><span class="id" title="binder">X</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a id="message:969" class="idref" href="#message:969"><span class="id" title="binder">message</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="message_valid_transitions_from_to" class="idref" href="#message_valid_transitions_from_to"><span class="id" title="definition, inductive"><span id="message_valid_transitions_from_to_ind" class="id"><span id="message_valid_transitions_from_to_sind" class="id">message_valid_transitions_from_to</span></span></span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="mvt_empty" class="idref" href="#mvt_empty"><span class="id" title="constructor">mvt_empty</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:973" class="idref" href="#s:973"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#message_valid_transitions_from_to:971"><span class="id" title="inductive">message_valid_transitions_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:973"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:973"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
| <a id="mvt_extend" class="idref" href="#mvt_extend"><span class="id" title="constructor">mvt_extend</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:974" class="idref" href="#s:974"><span class="id" title="binder">s</span></a> <a id="s':975" class="idref" href="#s':975"><span class="id" title="binder">s'</span></a> <a id="om:976" class="idref" href="#om:976"><span class="id" title="binder">om</span></a> <a id="om':977" class="idref" href="#om':977"><span class="id" title="binder">om'</span></a> <a id="l:978" class="idref" href="#l:978"><span class="id" title="binder">l</span></a> <a id="f:979" class="idref" href="#f:979"><span class="id" title="binder">f</span></a> <a id="tr:980" class="idref" href="#tr:980"><span class="id" title="binder">tr</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_prop"><span class="id" title="definition">option_valid_message_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:976"><span class="id" title="variable">om</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:978"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:974"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:976"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s':975"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':977"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:978"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.VLSM.html#s:974"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:976"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#message_valid_transitions_from_to:971"><span class="id" title="inductive">message_valid_transitions_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s':975"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:979"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:980"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#message_valid_transitions_from_to:971"><span class="id" title="inductive">message_valid_transitions_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:974"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:979"><span class="id" title="variable">f</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#Build_transition_item"><span class="id" title="constructor">Build_transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l:978"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om:976"><span class="id" title="variable">om</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s':975"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.VLSM.html#om':977"><span class="id" title="variable">om'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:980"><span class="id" title="variable">tr</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="finite_valid_trace_init_to_alt" class="idref" href="#finite_valid_trace_init_to_alt"><span class="id" title="definition">finite_valid_trace_init_to_alt</span></a><br/>
&nbsp;&nbsp;(<a id="s:981" class="idref" href="#s:981"><span class="id" title="binder">s</span></a> <a id="f:982" class="idref" href="#f:982"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a>) (<a id="tr:983" class="idref" href="#tr:983"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a>)) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#message_valid_transitions_from_to"><span class="id" title="inductive">message_valid_transitions_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:981"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:982"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:983"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:981"><span class="id" title="variable">s</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_init_to_alt_left_impl" class="idref" href="#finite_valid_trace_init_to_alt_left_impl"><span class="id" title="lemma">finite_valid_trace_init_to_alt_left_impl</span></a><br/>
&nbsp;&nbsp;(<a id="s:984" class="idref" href="#s:984"><span class="id" title="binder">s</span></a> <a id="f:985" class="idref" href="#f:985"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a>) (<a id="tr:986" class="idref" href="#tr:986"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:984"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:985"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:986"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_alt"><span class="id" title="definition">finite_valid_trace_init_to_alt</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:984"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:985"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:986"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Hinit</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; [| <span class="id" title="var">done</span>]; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hinit</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">constructor</span>; [<span class="id" title="tactic">apply</span> <span class="id" title="var">Ht</span>.. |].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_init_to_alt_right_impl" class="idref" href="#finite_valid_trace_init_to_alt_right_impl"><span class="id" title="lemma">finite_valid_trace_init_to_alt_right_impl</span></a><br/>
&nbsp;&nbsp;(<a id="s:987" class="idref" href="#s:987"><span class="id" title="binder">s</span></a> <a id="f:988" class="idref" href="#f:988"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a>) (<a id="tr:989" class="idref" href="#tr:989"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_alt"><span class="id" title="definition">finite_valid_trace_init_to_alt</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:987"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:988"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:989"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:987"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:988"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:989"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Hs</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSM.html#initial_state_is_valid"><span class="id" title="lemma">initial_state_is_valid</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_empty"><span class="id" title="constructor">finite_valid_trace_from_to_empty</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_extend"><span class="id" title="constructor">finite_valid_trace_from_to_extend</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a>); [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHtr</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop_iff"><span class="id" title="lemma">valid_state_prop_iff</span></a>; <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">l0</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>, <span class="id" title="var">om'</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_init_to_alt_equiv" class="idref" href="#finite_valid_trace_init_to_alt_equiv"><span class="id" title="lemma">finite_valid_trace_init_to_alt_equiv</span></a><br/>
&nbsp;&nbsp;(<a id="s:990" class="idref" href="#s:990"><span class="id" title="binder">s</span></a> <a id="f:991" class="idref" href="#f:991"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a>) (<a id="tr:992" class="idref" href="#tr:992"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:990"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:991"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:992"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_alt"><span class="id" title="definition">finite_valid_trace_init_to_alt</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:990"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:991"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:992"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_alt_left_impl"><span class="id" title="lemma">finite_valid_trace_init_to_alt_left_impl</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_alt_right_impl"><span class="id" title="lemma">finite_valid_trace_init_to_alt_right_impl</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="finite_valid_trace_from_to_alt" class="idref" href="#finite_valid_trace_from_to_alt"><span class="id" title="definition">finite_valid_trace_from_to_alt</span></a><br/>
&nbsp;&nbsp;(<a id="s:993" class="idref" href="#s:993"><span class="id" title="binder">s</span></a> <a id="f:994" class="idref" href="#f:994"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a>) (<a id="tr:995" class="idref" href="#tr:995"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a>)) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#message_valid_transitions_from_to"><span class="id" title="inductive">message_valid_transitions_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:993"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:994"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:995"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:993"><span class="id" title="variable">s</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_from_to_alt_left_impl" class="idref" href="#finite_valid_trace_from_to_alt_left_impl"><span class="id" title="lemma">finite_valid_trace_from_to_alt_left_impl</span></a><br/>
&nbsp;&nbsp;(<a id="s:996" class="idref" href="#s:996"><span class="id" title="binder">s</span></a> <a id="f:997" class="idref" href="#f:997"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a>) (<a id="tr:998" class="idref" href="#tr:998"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:996"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:997"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:998"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_alt"><span class="id" title="definition">finite_valid_trace_from_to_alt</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:996"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:997"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:998"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Htr</span>. <span class="id" title="tactic">split</span>; [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_first_pstate"><span class="id" title="lemma">finite_valid_trace_from_to_first_pstate</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">constructor</span>; [<span class="id" title="tactic">apply</span> <span class="id" title="var">Ht</span>.. |].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_from_to_alt_right_impl" class="idref" href="#finite_valid_trace_from_to_alt_right_impl"><span class="id" title="lemma">finite_valid_trace_from_to_alt_right_impl</span></a><br/>
&nbsp;&nbsp;(<a id="s:999" class="idref" href="#s:999"><span class="id" title="binder">s</span></a> <a id="f:1000" class="idref" href="#f:1000"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a>) (<a id="tr:1001" class="idref" href="#tr:1001"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_alt"><span class="id" title="definition">finite_valid_trace_from_to_alt</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:999"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:1000"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:1001"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:999"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:1000"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:1001"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Hs</span>]; <span class="id" title="var">revert</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_empty"><span class="id" title="constructor">finite_valid_trace_from_to_empty</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_extend"><span class="id" title="constructor">finite_valid_trace_from_to_extend</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a>); [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHtr</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop_iff"><span class="id" title="lemma">valid_state_prop_iff</span></a>; <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">l0</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>, <span class="id" title="var">om'</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_valid_trace_from_to_alt_equiv" class="idref" href="#finite_valid_trace_from_to_alt_equiv"><span class="id" title="lemma">finite_valid_trace_from_to_alt_equiv</span></a><br/>
&nbsp;&nbsp;(<a id="s:1002" class="idref" href="#s:1002"><span class="id" title="binder">s</span></a> <a id="f:1003" class="idref" href="#f:1003"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a>) (<a id="tr:1004" class="idref" href="#tr:1004"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:1002"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:1003"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:1004"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_alt"><span class="id" title="definition">finite_valid_trace_from_to_alt</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:1002"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#f:1003"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:1004"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_alt_left_impl"><span class="id" title="lemma">finite_valid_trace_from_to_alt_left_impl</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_alt_right_impl"><span class="id" title="lemma">finite_valid_trace_from_to_alt_right_impl</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Similarly, we can alternately define valid states as states at the end of
  a trace satisfying <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_alt"><span class="id" title="definition">finite_valid_trace_init_to_alt</span></a></span>.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="valid_state_prop_alt" class="idref" href="#valid_state_prop_alt"><span class="id" title="definition">valid_state_prop_alt</span></a> (<a id="s:1005" class="idref" href="#s:1005"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="is:1006" class="idref" href="#is:1006"><span class="id" title="binder">is</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a>) (<a id="tr:1007" class="idref" href="#tr:1007"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_alt"><span class="id" title="definition">finite_valid_trace_init_to_alt</span></a> <a class="idref" href="VLSM.Core.VLSM.html#is:1006"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:1005"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.VLSM.html#tr:1007"><span class="id" title="variable">tr</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="valid_state_prop_alt_equiv" class="idref" href="#valid_state_prop_alt_equiv"><span class="id" title="lemma">valid_state_prop_alt_equiv</span></a> (<a id="s:1008" class="idref" href="#s:1008"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:1008"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop_alt"><span class="id" title="definition">valid_state_prop_alt</span></a> <a class="idref" href="VLSM.Core.VLSM.html#s:1008"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop_alt"><span class="id" title="definition">valid_state_prop_alt</span></a>; <span class="id" title="tactic">setoid_rewrite</span> &lt;- <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_alt_equiv"><span class="id" title="lemma">finite_valid_trace_init_to_alt_equiv</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">Hs</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_has_trace"><span class="id" title="lemma">valid_state_has_trace</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> (? &amp; ? &amp; <span class="id" title="var">Htr</span> &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_last_pstate"><span class="id" title="lemma">finite_valid_trace_from_to_last_pstate</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.VLSM.html#sec_finite_valid_trace_init_to_alt"><span class="id" title="section">sec_finite_valid_trace_init_to_alt</span></a>.<br/>

<br/>
</div>

<div class="doc">
Custom tactic used to simplify proofs of valid VLSM transitions. 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">app_valid_tran</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| |- <a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_prop"><span class="id" title="definition">option_valid_message_prop</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_message_is_valid"><span class="id" title="lemma">initial_message_is_valid</span></a><br/>
&nbsp;&nbsp;| |- <a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_prop"><span class="id" title="definition">option_valid_message_prop</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#emitted_messages_are_valid"><span class="id" title="lemma">emitted_messages_are_valid</span></a><br/>
&nbsp;&nbsp;| |- <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_is_valid"><span class="id" title="lemma">initial_state_is_valid</span></a><br/>
&nbsp;&nbsp;| |- <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_destination"><span class="id" title="lemma">input_valid_transition_destination</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr">coqdoc</a> and improved with <a href="https://github.com/palmskog/coqdocjs">CoqdocJS</a> as adapted for <a href="https://github.com/coq-community">coq-community</a>
</div>
</div>
</body>

</html>
