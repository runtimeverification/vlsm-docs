<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename">
	<script>
	  if (document.title === "Table of Contents") {
	      document.write("<a href='map.svg'>File dependency graph</a>");
	  } else if (document.title !== "Index") {
              document.write("<a href='" + document.title + ".svg'>" + document.title + " dependency graph</a>");
	  }
	</script>
      </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./../..">Project Website</a>
      <a href="./indexpage.html">Index</a>
      <a href="./toc.html">Table of Contents</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Lib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Lib.Itauto.html#"><span class="id" title="library">Itauto</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">stdpp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">prelude</span> <span class="id" title="library">finite</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.Streams.html#"><span class="id" title="library">Streams</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Logic.FunctionalExtensionality.html#"><span class="id" title="library">FunctionalExtensionality</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Logic.Eqdep_dec.html#"><span class="id" title="library">Eqdep_dec</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Lib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Lib.Preamble.html#"><span class="id" title="library">Preamble</span></a> <a class="idref" href="VLSM.Lib.ListExtras.html#"><span class="id" title="library">ListExtras</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Core</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Core.VLSM.html#"><span class="id" title="library">VLSM</span></a> <a class="idref" href="VLSM.Core.Plans.html#"><span class="id" title="library">Plans</span></a> <a class="idref" href="VLSM.Core.VLSMProjections.html#"><span class="id" title="library">VLSMProjections</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Core</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Core.PreloadedVLSM.html#"><span class="id" title="library">PreloadedVLSM</span></a> <a class="idref" href="VLSM.Core.ConstrainedVLSM.html#"><span class="id" title="library">ConstrainedVLSM</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab123"></a><h1 class="section">Core: VLSM Composition</h1>


<div class="paragraph"> </div>

  This module provides Coq definitions for composite VLSMs and their projections
  to components.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_VLSM_composition" class="idref" href="#sec_VLSM_composition"><span class="id" title="section">sec_VLSM_composition</span></a>.<br/>

<br/>
</div>

<div class="doc">
  Let us fix a type for <code>message</code>s, and an <code>index</code> type for the VLSM components
  such that equality on <code>index</code> is decidable and let IM be a family of VLSMs
  indexed by <code>index</code>. Note that all <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a></span>s share the same type of <code>message</code>s.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;{<a id="message:1" class="idref" href="#message:1"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;`{<a id="EqDecision0:3" class="idref" href="#EqDecision0:3"><span class="id" title="binder">EqDecision</span></a> <a id="index:2" class="idref" href="#index:2"><span class="id" title="binder"><span id="EqDecision0:3" class="id">index</span></span></a>}<br/>
&nbsp;&nbsp;(<a id="IM:4" class="idref" href="#IM:4"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Core.Composition.html#index:2"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:1"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
</div>

<div class="doc">
<a id="lab124"></a><h2 class="section">Free VLSM composition</h2>

</div>
<div class="code">

<br/>
<span class="comment">(*<br/>
&nbsp;&nbsp;A&nbsp;<span class="inlinecode"><span class="id" title="var">composite_state</span></span>&nbsp;is&nbsp;an&nbsp;indexed&nbsp;family&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">state</span></span>s,&nbsp;yielding&nbsp;for&nbsp;each<br/>
&nbsp;&nbsp;index&nbsp;&lt;&lt;n&gt;&gt;&nbsp;a&nbsp;<span class="inlinecode"><span class="id" title="var">state</span></span>&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="keyword">type</span></span>&nbsp;&lt;&lt;IT&nbsp;n&gt;&gt;,&nbsp;the&nbsp;<span class="inlinecode"><span class="id" title="var">VLSMType</span></span>&nbsp;corresponding&nbsp;to<br/>
&nbsp;&nbsp;machine&nbsp;&lt;&lt;n&gt;&gt;.<br/>
<br/>
&nbsp;&nbsp;Note&nbsp;that&nbsp;the&nbsp;<span class="inlinecode"><span class="id" title="var">composite_state</span></span>&nbsp;type&nbsp;is&nbsp;the&nbsp;dependent&nbsp;product&nbsp;type&nbsp;of&nbsp;the<br/>
&nbsp;&nbsp;family&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">state</span></span>&nbsp;types&nbsp;corresponding&nbsp;to&nbsp;each&nbsp;index.<br/>
*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="composite_state" class="idref" href="#composite_state"><span class="id" title="definition">composite_state</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="n:5" class="idref" href="#n:5"><span class="id" title="binder">n</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#n:5"><span class="id" title="variable">n</span></a>).<br/>

<br/>
</div>

<div class="doc">
  A <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a></span> is a pair between an index <code>N</code> and a <span class="inlinecode"><a class="idref" href="VLSM.Examples.ELMO.BaseELMO.html#label"><span class="id" title="projection">label</span></a></span> of <code>IT n</code>.

<div class="paragraph"> </div>

  Note that the <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a></span> type is the dependent sum of the family of
  types <code>[label (IT n) | n &lt;- index]</code>.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="composite_label" class="idref" href="#composite_label"><span class="id" title="definition">composite_label</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><a id="n:6" class="idref" href="#n:6"><span class="id" title="binder">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#n:6"><span class="id" title="variable">n</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>.<br/>

<br/>
<span class="comment">(*<br/>
&nbsp;&nbsp;Declaring&nbsp;this&nbsp;a&nbsp;"canonical&nbsp;structure"&nbsp;will&nbsp;make&nbsp;type&nbsp;checking<br/>
&nbsp;&nbsp;guess&nbsp;that&nbsp;a&nbsp;VLSMType&nbsp;should&nbsp;be&nbsp;composite_type&nbsp;instead&nbsp;of&nbsp;just<br/>
&nbsp;&nbsp;failing,&nbsp;if&nbsp;it&nbsp;has&nbsp;to&nbsp;compare&nbsp;composite_state&nbsp;with&nbsp;state&nbsp;or<br/>
&nbsp;&nbsp;state&nbsp;of&nbsp;an&nbsp;unsolved&nbsp;VLSMType&nbsp;or&nbsp;VLSM.<br/>
*)</span><br/>
<span class="id" title="keyword">Canonical</span> <span class="id" title="keyword">Structure</span> <a id="composite_type" class="idref" href="#composite_type"><span class="id" title="definition">composite_type</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMType"><span class="id" title="record">VLSMType</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.message"><span class="id" title="variable">message</span></a> :=<br/>
{|<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> := <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> := <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a>;<br/>
|}.<br/>

<br/>
</div>

<div class="doc">
  A <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a></span> has the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a></span>erty if all of its component
  states have the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a></span>erty in the corresponding component signature.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="composite_initial_state_prop" class="idref" href="#composite_initial_state_prop"><span class="id" title="definition">composite_initial_state_prop</span></a> (<a id="s:7" class="idref" href="#s:7"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="n:8" class="idref" href="#n:8"><span class="id" title="binder">n</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#n:8"><span class="id" title="variable">n</span></a>) (<a class="idref" href="VLSM.Core.Composition.html#s:7"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#n:8"><span class="id" title="variable">n</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="composite_initial_state" class="idref" href="#composite_initial_state"><span class="id" title="definition">composite_initial_state</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">{</span></a><a id="s:9" class="idref" href="#s:9"><span class="id" title="binder">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">:</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">|</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_initial_state_prop"><span class="id" title="definition">composite_initial_state_prop</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:9"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">}</span></a>.<br/>

<br/>
<span class="id" title="keyword">Program Definition</span> <a id="composite_s0" class="idref" href="#composite_s0"><span class="id" title="definition">composite_s0</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_initial_state"><span class="id" title="definition">composite_initial_state</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> (<a id="n:10" class="idref" href="#n:10"><span class="id" title="binder">n</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a>) =&gt; `(<a class="idref" href="VLSM.Core.VLSM.html#vs0"><span class="id" title="definition">vs0</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#n:10"><span class="id" title="variable">n</span></a>))) <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.VLSM.html#vs0"><span class="id" title="definition">vs0</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">i</span>)). <span class="id" title="keyword">Defined</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="composite_initial_state_inh" class="idref" href="#composite_initial_state_inh"><span class="id" title="instance">composite_initial_state_inh</span></a> : <span class="id" title="class">Inhabited</span> <a class="idref" href="VLSM.Core.Composition.html#composite_initial_state"><span class="id" title="definition">composite_initial_state</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="constructor">populate</span> <a class="idref" href="VLSM.Core.Composition.html#composite_s0"><span class="id" title="definition">composite_s0</span></a>.<br/>

<br/>
</div>

<div class="doc">
  A message has the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a></span>erty in the composite
  iff it has the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a></span>erty in any of the components.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="composite_initial_message_prop" class="idref" href="#composite_initial_message_prop"><span class="id" title="definition">composite_initial_message_prop</span></a> (<a id="m:11" class="idref" href="#m:11"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.message"><span class="id" title="variable">message</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="n:12" class="idref" href="#n:12"><span class="id" title="binder">n</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a>) (<a id="mi:13" class="idref" href="#mi:13"><span class="id" title="binder">mi</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#initial_message"><span class="id" title="projection">initial_message</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#n:12"><span class="id" title="variable">n</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="VLSM.Core.Composition.html#mi:13"><span class="id" title="variable">mi</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#m:11"><span class="id" title="variable">m</span></a>.<br/>

<br/>
</div>

<div class="doc">
  A very useful operation on <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a></span>s is updating the state corresponding
  to a component.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="state_update" class="idref" href="#state_update"><span class="id" title="definition">state_update</span></a><br/>
&nbsp;&nbsp;(<a id="s:14" class="idref" href="#s:14"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>) (<a id="i:15" class="idref" href="#i:15"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a>) (<a id="si:16" class="idref" href="#si:16"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:15"><span class="id" title="variable">i</span></a>)) (<a id="j:17" class="idref" href="#j:17"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a>) : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:17"><span class="id" title="variable">j</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="definition">decide</span> (<a class="idref" href="VLSM.Core.Composition.html#j:17"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:15"><span class="id" title="variable">i</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#left"><span class="id" title="constructor">left</span></a> <span class="id" title="var">e</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq_rect_r"><span class="id" title="definition">eq_rect_r</span></a> (<span class="id" title="keyword">fun</span> <a id="i:18" class="idref" href="#i:18"><span class="id" title="binder">i</span></a> =&gt; <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:18"><span class="id" title="variable">i</span></a>)) <a class="idref" href="VLSM.Core.Composition.html#si:16"><span class="id" title="variable">si</span></a> <span class="id" title="var">e</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="VLSM.Core.Composition.html#s:14"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:17"><span class="id" title="variable">j</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
  The <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a></span> function for the <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a></span> takes a transition in
  the component selected by the index in the given <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a></span>
  with the contained label, and returns the produced message together with
  the state updated on that component.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="composite_transition" class="idref" href="#composite_transition"><span class="id" title="definition">composite_transition</span></a><br/>
&nbsp;&nbsp;(<a id="l:19" class="idref" href="#l:19"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a>) (<a id="som:20" class="idref" href="#som:20"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.message"><span class="id" title="variable">message</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="s:21" class="idref" href="#s:21"><span class="id" title="binder">s</span></a>, <a id="om:22" class="idref" href="#om:22"><span class="id" title="binder">om</span></a>) := <a class="idref" href="VLSM.Core.Composition.html#som:20"><span class="id" title="variable">som</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="i:23" class="idref" href="#i:23"><span class="id" title="binder">i</span></a>, <a id="li:24" class="idref" href="#li:24"><span class="id" title="binder">li</span></a>) := <a class="idref" href="VLSM.Core.Composition.html#l:19"><span class="id" title="variable">l</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="si':25" class="idref" href="#si':25"><span class="id" title="binder">si'</span></a>, <a id="om':26" class="idref" href="#om':26"><span class="id" title="binder">om'</span></a>) := <a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:23"><span class="id" title="variable">i</span></a>) <a class="idref" href="VLSM.Core.Composition.html#li:24"><span class="id" title="variable">li</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:21"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:23"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:22"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:21"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:23"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#si':25"><span class="id" title="variable">si'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a>  <a class="idref" href="VLSM.Core.Composition.html#om':26"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
</div>

<div class="doc">
  Given a <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a></span> <code>(i, li)</code> and a <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a></span>-message
  pair <code>(s, om)</code>, <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#composite_valid"><span class="id" title="definition">composite_valid</span></a></span>ity is defined as <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a></span>ity in
  the <code>i</code>th component <code>IM i</code>.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="composite_valid" class="idref" href="#composite_valid"><span class="id" title="definition">composite_valid</span></a><br/>
&nbsp;&nbsp;(<a id="l:27" class="idref" href="#l:27"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a>) (<a id="som:28" class="idref" href="#som:28"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.message"><span class="id" title="variable">message</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="s:29" class="idref" href="#s:29"><span class="id" title="binder">s</span></a>, <a id="om:30" class="idref" href="#om:30"><span class="id" title="binder">om</span></a>) := <a class="idref" href="VLSM.Core.Composition.html#som:28"><span class="id" title="variable">som</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="i:31" class="idref" href="#i:31"><span class="id" title="binder">i</span></a>, <a id="li:32" class="idref" href="#li:32"><span class="id" title="binder">li</span></a>) := <a class="idref" href="VLSM.Core.Composition.html#l:27"><span class="id" title="variable">l</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:31"><span class="id" title="variable">i</span></a>) <a class="idref" href="VLSM.Core.Composition.html#li:32"><span class="id" title="variable">li</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:29"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:31"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:30"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="free_composite_vlsm_machine" class="idref" href="#free_composite_vlsm_machine"><span class="id" title="definition">free_composite_vlsm_machine</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMMachine"><span class="id" title="record">VLSMMachine</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a> :=<br/>
{|<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> := <a class="idref" href="VLSM.Core.Composition.html#composite_initial_state_prop"><span class="id" title="definition">composite_initial_state_prop</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a> := <a class="idref" href="VLSM.Core.Composition.html#composite_initial_message_prop"><span class="id" title="definition">composite_initial_message_prop</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> := <a class="idref" href="VLSM.Core.Composition.html#composite_transition"><span class="id" title="definition">composite_transition</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a> := <a class="idref" href="VLSM.Core.Composition.html#composite_valid"><span class="id" title="definition">composite_valid</span></a>;<br/>
|}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="free_composite_vlsm" class="idref" href="#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.message"><span class="id" title="variable">message</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#mk_vlsm"><span class="id" title="constructor">mk_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm_machine"><span class="id" title="definition">free_composite_vlsm_machine</span></a>.<br/>

<br/>
</div>

<div class="doc">
  Composite versions for <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a></span>, <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#option_initial_message_prop"><span class="id" title="definition">option_initial_message_prop</span></a></span> and
  things related to plans and plan items.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="composite_transition_item" class="idref" href="#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> : <span class="id" title="keyword">Type</span> := <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="option_composite_initial_message_prop" class="idref" href="#option_composite_initial_message_prop"><span class="id" title="definition">option_composite_initial_message_prop</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">from_option</span> <a class="idref" href="VLSM.Core.Composition.html#composite_initial_message_prop"><span class="id" title="definition">composite_initial_message_prop</span></a> <span class="id" title="notation">True</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="composite_plan_item" class="idref" href="#composite_plan_item"><span class="id" title="definition">composite_plan_item</span></a> : <span class="id" title="keyword">Type</span> := <a class="idref" href="VLSM.Core.Plans.html#plan_item"><span class="id" title="record">plan_item</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="composite_plan" class="idref" href="#composite_plan"><span class="id" title="definition">composite_plan</span></a> : <span class="id" title="keyword">Type</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_item"><span class="id" title="definition">composite_plan_item</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="composite_apply_plan" class="idref" href="#composite_apply_plan"><span class="id" title="definition">composite_apply_plan</span></a> := (@<a class="idref" href="VLSM.Core.Plans.html#_apply_plan"><span class="id" title="definition">_apply_plan</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_transition"><span class="id" title="definition">composite_transition</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="composite_apply_plan_app" class="idref" href="#composite_apply_plan_app"><span class="id" title="definition">composite_apply_plan_app</span></a><br/>
&nbsp;&nbsp;(<a id="start:33" class="idref" href="#start:33"><span class="id" title="binder">start</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>)<br/>
&nbsp;&nbsp;(<a id="a:34" class="idref" href="#a:34"><span class="id" title="binder">a</span></a> <a id="a':35" class="idref" href="#a':35"><span class="id" title="binder">a'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.Plans.html#plan_item"><span class="id" title="record">plan_item</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Composition.html#composite_apply_plan"><span class="id" title="definition">composite_apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#start:33"><span class="id" title="variable">start</span></a> (<a class="idref" href="VLSM.Core.Composition.html#a:34"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Core.Composition.html#a':35"><span class="id" title="variable">a'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="aitems:36" class="idref" href="#aitems:36"><span class="id" title="binder">aitems</span></a>, <a id="afinal:37" class="idref" href="#afinal:37"><span class="id" title="binder">afinal</span></a>) := <a class="idref" href="VLSM.Core.Composition.html#composite_apply_plan"><span class="id" title="definition">composite_apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#start:33"><span class="id" title="variable">start</span></a> <a class="idref" href="VLSM.Core.Composition.html#a:34"><span class="id" title="variable">a</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="a'items:38" class="idref" href="#a'items:38"><span class="id" title="binder">a'items</span></a>, <a id="a'final:39" class="idref" href="#a'final:39"><span class="id" title="binder">a'final</span></a>) := <a class="idref" href="VLSM.Core.Composition.html#composite_apply_plan"><span class="id" title="definition">composite_apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#afinal:37"><span class="id" title="variable">afinal</span></a> <a class="idref" href="VLSM.Core.Composition.html#a':35"><span class="id" title="variable">a'</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#aitems:36"><span class="id" title="variable">aitems</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Core.Composition.html#a'items:38"><span class="id" title="variable">a'items</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#a'final:39"><span class="id" title="variable">a'final</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;:= (@<a class="idref" href="VLSM.Core.Plans.html#_apply_plan_app"><span class="id" title="lemma">_apply_plan_app</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_transition"><span class="id" title="definition">composite_transition</span></a> <a class="idref" href="VLSM.Core.Composition.html#start:33"><span class="id" title="variable">start</span></a> <a class="idref" href="VLSM.Core.Composition.html#a:34"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Core.Composition.html#a':35"><span class="id" title="variable">a'</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="composite_apply_plan_last" class="idref" href="#composite_apply_plan_last"><span class="id" title="definition">composite_apply_plan_last</span></a><br/>
&nbsp;&nbsp;(<a id="start:40" class="idref" href="#start:40"><span class="id" title="binder">start</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>)<br/>
&nbsp;&nbsp;(<a id="a:41" class="idref" href="#a:41"><span class="id" title="binder">a</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.Plans.html#plan_item"><span class="id" title="record">plan_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="after_a:42" class="idref" href="#after_a:42"><span class="id" title="binder">after_a</span></a> := <a class="idref" href="VLSM.Core.Composition.html#composite_apply_plan"><span class="id" title="definition">composite_apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#start:40"><span class="id" title="variable">start</span></a> <a class="idref" href="VLSM.Core.Composition.html#a:41"><span class="id" title="variable">a</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.Composition.html#start:40"><span class="id" title="variable">start</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="VLSM.Core.Composition.html#after_a:42"><span class="id" title="variable">after_a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="VLSM.Core.Composition.html#after_a:42"><span class="id" title="variable">after_a</span></a><br/>
&nbsp;&nbsp;:= (@<a class="idref" href="VLSM.Core.Plans.html#_apply_plan_last"><span class="id" title="lemma">_apply_plan_last</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_transition"><span class="id" title="definition">composite_transition</span></a> <a class="idref" href="VLSM.Core.Composition.html#start:40"><span class="id" title="variable">start</span></a> <a class="idref" href="VLSM.Core.Composition.html#a:41"><span class="id" title="variable">a</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="composite_trace_to_plan" class="idref" href="#composite_trace_to_plan"><span class="id" title="definition">composite_trace_to_plan</span></a> := (@<a class="idref" href="VLSM.Core.Plans.html#_trace_to_plan"><span class="id" title="definition">_trace_to_plan</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab125"></a><h2 class="section">Constrained VLSM composition</h2>


<div class="paragraph"> </div>

  A constrained VLSM composition is a free composition which is further
  constrained with an additional validity constraint.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="composite_vlsm" class="idref" href="#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a><br/>
&nbsp;&nbsp;(<a id="constraint:43" class="idref" href="#constraint:43"><span class="id" title="binder">constraint</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>) : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.message"><span class="id" title="variable">message</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ConstrainedVLSM.html#constrained_vlsm"><span class="id" title="definition">constrained_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint:43"><span class="id" title="variable">constraint</span></a>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#free_constraint"><span class="id" title="definition">free_constraint</span></a></span> is the constraint that is always true. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="free_constraint" class="idref" href="#free_constraint"><span class="id" title="definition">free_constraint</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="notation">True</span>.<br/>

<br/>
</div>

<div class="doc">
  <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a></span> is equivalent to a <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a></span> with a free
  constraint.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="free_composite_vlsm_spec" class="idref" href="#free_composite_vlsm_spec"><span class="id" title="lemma">free_composite_vlsm_spec</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSMProjections.VLSMEquality.html#VLSM_eq"><span class="id" title="abbreviation">VLSM_eq</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_constraint"><span class="id" title="definition">free_constraint</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#VLSM_incl_embedding_iff"><span class="id" title="lemma">VLSM_incl_embedding_iff</span></a>); <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMEmbedding.html#basic_VLSM_strong_embedding"><span class="id" title="lemma">basic_VLSM_strong_embedding</span></a>; <span class="id" title="tactic">red</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#VLSM_incl_embedding_iff"><span class="id" title="lemma">VLSM_incl_embedding_iff</span></a>); <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMEmbedding.html#basic_VLSM_strong_embedding"><span class="id" title="lemma">basic_VLSM_strong_embedding</span></a>; <span class="id" title="tactic">red</span>; <span class="id" title="var">cbn</span>; [| <span class="id" title="var">done</span>..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">itauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a></span> is equivalent to <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a></span> with free constraint
  also when preloaded with messages.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="preloaded_free_composite_vlsm_spec" class="idref" href="#preloaded_free_composite_vlsm_spec"><span class="id" title="lemma">preloaded_free_composite_vlsm_spec</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="initial:44" class="idref" href="#initial:44"><span class="id" title="binder">initial</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSMProjections.VLSMEquality.html#VLSM_eq"><span class="id" title="abbreviation">VLSM_eq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_vlsm"><span class="id" title="definition">preloaded_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#initial:44"><span class="id" title="variable">initial</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_vlsm"><span class="id" title="definition">preloaded_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_constraint"><span class="id" title="definition">free_constraint</span></a>) <a class="idref" href="VLSM.Core.Composition.html#initial:44"><span class="id" title="variable">initial</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#VLSM_incl_embedding_iff"><span class="id" title="lemma">VLSM_incl_embedding_iff</span></a>); <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMEmbedding.html#basic_VLSM_strong_embedding"><span class="id" title="lemma">basic_VLSM_strong_embedding</span></a>; <span class="id" title="tactic">red</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#VLSM_incl_embedding_iff"><span class="id" title="lemma">VLSM_incl_embedding_iff</span></a>); <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMEmbedding.html#basic_VLSM_strong_embedding"><span class="id" title="lemma">basic_VLSM_strong_embedding</span></a>; <span class="id" title="tactic">red</span>; <span class="id" title="var">cbn</span>; [| <span class="id" title="var">done</span>..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">itauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="preloaded_with_all_messages_free_composite_vlsm_spec" class="idref" href="#preloaded_with_all_messages_free_composite_vlsm_spec"><span class="id" title="lemma">preloaded_with_all_messages_free_composite_vlsm_spec</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSMProjections.VLSMEquality.html#VLSM_eq"><span class="id" title="abbreviation">VLSM_eq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_with_all_messages_vlsm"><span class="id" title="definition">preloaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_with_all_messages_vlsm"><span class="id" title="definition">preloaded_with_all_messages_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_constraint"><span class="id" title="definition">free_constraint</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#VLSM_incl_embedding_iff"><span class="id" title="lemma">VLSM_incl_embedding_iff</span></a>); <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMEmbedding.html#basic_VLSM_strong_embedding"><span class="id" title="lemma">basic_VLSM_strong_embedding</span></a>; <span class="id" title="tactic">red</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#VLSM_incl_embedding_iff"><span class="id" title="lemma">VLSM_incl_embedding_iff</span></a>); <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMEmbedding.html#basic_VLSM_strong_embedding"><span class="id" title="lemma">basic_VLSM_strong_embedding</span></a>; <span class="id" title="tactic">red</span>; <span class="id" title="var">cbn</span>; [| <span class="id" title="var">done</span>..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">itauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab126"></a><h2 class="section">Lemmas about state_update</h2>


<div class="paragraph"> </div>

  The next few results describe several properties of the <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a></span> operation.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="state_update_neq" class="idref" href="#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:45" class="idref" href="#s:45"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>) (<a id="i:46" class="idref" href="#i:46"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a>) (<a id="si:47" class="idref" href="#si:47"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:46"><span class="id" title="variable">i</span></a>)) (<a id="j:48" class="idref" href="#j:48"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a>) (<a id="Hneq:49" class="idref" href="#Hneq:49"><span class="id" title="binder">Hneq</span></a> : <a class="idref" href="VLSM.Core.Composition.html#j:48"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:46"><span class="id" title="variable">i</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:45"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:46"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#si:47"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:48"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:45"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:48"><span class="id" title="variable">j</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a>; <span class="id" title="var">case_decide</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="state_update_eq" class="idref" href="#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:50" class="idref" href="#s:50"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>) (<a id="i:51" class="idref" href="#i:51"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a>) (<a id="si:52" class="idref" href="#si:52"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:51"><span class="id" title="variable">i</span></a>)<span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:50"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:51"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#si:52"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:51"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#si:52"><span class="id" title="variable">si</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">case_decide</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">replace</span> <span class="id" title="var">H</span> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> <span class="id" title="var">i</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Logic.Eqdep_dec.html#K_dec_type"><span class="id" title="lemma">K_dec_type</span></a>; <span class="id" title="var">done</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="state_update_id" class="idref" href="#state_update_id"><span class="id" title="lemma">state_update_id</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:53" class="idref" href="#s:53"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>) (<a id="i:54" class="idref" href="#i:54"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a>) (<a id="si:55" class="idref" href="#si:55"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:54"><span class="id" title="variable">i</span></a>)) (<a id="Heq:56" class="idref" href="#Heq:56"><span class="id" title="binder">Heq</span></a> : <a class="idref" href="VLSM.Core.Composition.html#s:53"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:54"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#si:55"><span class="id" title="variable">si</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:53"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:54"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#si:55"><span class="id" title="variable">si</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:53"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Logic.FunctionalExtensionality.html#functional_extensionality_dep_good"><span class="id" title="definition">functional_extensionality_dep_good</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">j</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>)); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="state_update_twice" class="idref" href="#state_update_twice"><span class="id" title="lemma">state_update_twice</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:57" class="idref" href="#s:57"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>) (<a id="i:58" class="idref" href="#i:58"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a>) (<a id="si:59" class="idref" href="#si:59"><span class="id" title="binder">si</span></a> <a id="si':60" class="idref" href="#si':60"><span class="id" title="binder">si'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:58"><span class="id" title="variable">i</span></a>)<span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> (<a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:57"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:58"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#si:59"><span class="id" title="variable">si</span></a>) <a class="idref" href="VLSM.Core.Composition.html#i:58"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#si':60"><span class="id" title="variable">si'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:57"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:58"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#si':60"><span class="id" title="variable">si'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Logic.FunctionalExtensionality.html#functional_extensionality_dep_good"><span class="id" title="definition">functional_extensionality_dep_good</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">j</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>; <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> !<a class="idref" href="VLSM.Core.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="state_update_twice_neq" class="idref" href="#state_update_twice_neq"><span class="id" title="lemma">state_update_twice_neq</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="s:61" class="idref" href="#s:61"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>) (<a id="i:62" class="idref" href="#i:62"><span class="id" title="binder">i</span></a> <a id="j:63" class="idref" href="#j:63"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a>) (<a id="si:64" class="idref" href="#si:64"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:62"><span class="id" title="variable">i</span></a>)) (<a id="sj:65" class="idref" href="#sj:65"><span class="id" title="binder">sj</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:63"><span class="id" title="variable">j</span></a>)) (<a id="Hij:66" class="idref" href="#Hij:66"><span class="id" title="binder">Hij</span></a> : <a class="idref" href="VLSM.Core.Composition.html#j:63"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:62"><span class="id" title="variable">i</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> (<a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:61"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:62"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#si:64"><span class="id" title="variable">si</span></a>) <a class="idref" href="VLSM.Core.Composition.html#j:63"><span class="id" title="variable">j</span></a> <a class="idref" href="VLSM.Core.Composition.html#sj:65"><span class="id" title="variable">sj</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> (<a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:61"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:63"><span class="id" title="variable">j</span></a> <a class="idref" href="VLSM.Core.Composition.html#sj:65"><span class="id" title="variable">sj</span></a>) <a class="idref" href="VLSM.Core.Composition.html#i:62"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#si:64"><span class="id" title="variable">si</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Logic.FunctionalExtensionality.html#functional_extensionality_dep_good"><span class="id" title="definition">functional_extensionality_dep_good</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">k</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">j</span>)); <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>)); <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a> ; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>))<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> !<a class="idref" href="VLSM.Core.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_transition_state_neq" class="idref" href="#composite_transition_state_neq"><span class="id" title="lemma">composite_transition_state_neq</span></a><br/>
&nbsp;&nbsp;(<a id="l:67" class="idref" href="#l:67"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a>)<br/>
&nbsp;&nbsp;(<a id="s:68" class="idref" href="#s:68"><span class="id" title="binder">s</span></a> <a id="s':69" class="idref" href="#s':69"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>)<br/>
&nbsp;&nbsp;(<a id="om:70" class="idref" href="#om:70"><span class="id" title="binder">om</span></a> <a id="om':71" class="idref" href="#om':71"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Ht:72" class="idref" href="#Ht:72"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_transition"><span class="id" title="definition">composite_transition</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:67"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:68"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:70"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':69"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om':71"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;(<a id="i:73" class="idref" href="#i:73"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hi:74" class="idref" href="#Hi:74"><span class="id" title="binder">Hi</span></a> : <a class="idref" href="VLSM.Core.Composition.html#i:73"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:67"><span class="id" title="variable">l</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Composition.html#s':69"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:73"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:68"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:73"><span class="id" title="variable">i</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_transition_state_eq" class="idref" href="#composite_transition_state_eq"><span class="id" title="lemma">composite_transition_state_eq</span></a><br/>
&nbsp;&nbsp;(<a id="i:75" class="idref" href="#i:75"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;(<a id="li:76" class="idref" href="#li:76"><span class="id" title="binder">li</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:75"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;(<a id="s:77" class="idref" href="#s:77"><span class="id" title="binder">s</span></a> <a id="s':78" class="idref" href="#s':78"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>)<br/>
&nbsp;&nbsp;(<a id="om:79" class="idref" href="#om:79"><span class="id" title="binder">om</span></a> <a id="om':80" class="idref" href="#om':80"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Ht:81" class="idref" href="#Ht:81"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_transition"><span class="id" title="definition">composite_transition</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:75"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#li:76"><span class="id" title="variable">li</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:77"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:79"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':78"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om':80"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Composition.html#s':78"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:75"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:75"><span class="id" title="variable">i</span></a>) <a class="idref" href="VLSM.Core.Composition.html#li:76"><span class="id" title="variable">li</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:77"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:75"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:79"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>); <span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Updating a composite initial state with a component initial state
  yields a composite initial state.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="composite_update_initial_state_with_initial" class="idref" href="#composite_update_initial_state_with_initial"><span class="id" title="lemma">composite_update_initial_state_with_initial</span></a><br/>
&nbsp;&nbsp;(<a id="s:82" class="idref" href="#s:82"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hs:83" class="idref" href="#Hs:83"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_initial_state_prop"><span class="id" title="definition">composite_initial_state_prop</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:82"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;(<a id="i:84" class="idref" href="#i:84"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;(<a id="si:85" class="idref" href="#si:85"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:84"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;(<a id="Hsi:86" class="idref" href="#Hsi:86"><span class="id" title="binder">Hsi</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:84"><span class="id" title="variable">i</span></a>) <a class="idref" href="VLSM.Core.Composition.html#si:85"><span class="id" title="variable">si</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Composition.html#composite_initial_state_prop"><span class="id" title="definition">composite_initial_state_prop</span></a> (<a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:82"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:84"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#si:85"><span class="id" title="variable">si</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">j</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>)); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab127"></a><h2 class="section">Lifting functions</h2>


<div class="paragraph"> </div>

  This section contains definitions of functions which lift labels, states,
  etc. from a single component to the composition, and lemmas about these
  functions.

<div class="paragraph"> </div>


<div class="paragraph"> </div>

  We can always "lift" state <code>sj</code> from component <code>j</code> to a composite state by
  updating an given composite state to <code>sj</code> on component <code>j</code>.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="lift_to_composite_state" class="idref" href="#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a><br/>
&nbsp;&nbsp;(<a id="s:87" class="idref" href="#s:87"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>) (<a id="j:88" class="idref" href="#j:88"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a>) (<a id="sj:89" class="idref" href="#sj:89"><span class="id" title="binder">sj</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:88"><span class="id" title="variable">j</span></a>)) : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:87"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:88"><span class="id" title="variable">j</span></a> <a class="idref" href="VLSM.Core.Composition.html#sj:89"><span class="id" title="variable">sj</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="lift_to_composite_label" class="idref" href="#lift_to_composite_label"><span class="id" title="definition">lift_to_composite_label</span></a> (<a id="j:90" class="idref" href="#j:90"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a>) (<a id="lj:91" class="idref" href="#lj:91"><span class="id" title="binder">lj</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:90"><span class="id" title="variable">j</span></a>)) : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:90"><span class="id" title="variable">j</span></a> <a class="idref" href="VLSM.Core.Composition.html#lj:91"><span class="id" title="variable">lj</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="lift_to_composite_transition_item" class="idref" href="#lift_to_composite_transition_item"><span class="id" title="definition">lift_to_composite_transition_item</span></a><br/>
&nbsp;&nbsp;(<a id="s:92" class="idref" href="#s:92"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>) (<a id="j:93" class="idref" href="#j:93"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a>) : <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:93"><span class="id" title="variable">j</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSMProjections.VLSMEmbedding.html#pre_VLSM_embedding_transition_item_project"><span class="id" title="definition">pre_VLSM_embedding_transition_item_project</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:93"><span class="id" title="variable">j</span></a>) <a class="idref" href="VLSM.Core.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_label"><span class="id" title="definition">lift_to_composite_label</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:93"><span class="id" title="variable">j</span></a>) (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:92"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:93"><span class="id" title="variable">j</span></a>).<br/>

<br/>
</div>

<div class="doc">
  A specialized version of <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a></span> using the initial composite
  state as the base for lifting.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="lift_to_composite_state'" class="idref" href="#lift_to_composite_state'"><span class="id" title="definition">lift_to_composite_state'</span></a> : <span class="id" title="notation">forall</span> <a id="j:94" class="idref" href="#j:94"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:94"><span class="id" title="variable">j</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_s0"><span class="id" title="definition">composite_s0</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="lift_to_composite_transition_item'" class="idref" href="#lift_to_composite_transition_item'"><span class="id" title="definition">lift_to_composite_transition_item'</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="j:95" class="idref" href="#j:95"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_transition_item"><span class="id" title="definition">lift_to_composite_transition_item</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_s0"><span class="id" title="definition">composite_s0</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="lift_to_composite_plan_item" class="idref" href="#lift_to_composite_plan_item"><span class="id" title="definition">lift_to_composite_plan_item</span></a><br/>
&nbsp;&nbsp;(<a id="i:96" class="idref" href="#i:96"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a>) (<a id="a:97" class="idref" href="#a:97"><span class="id" title="binder">a</span></a> : <a class="idref" href="VLSM.Core.Plans.html#plan_item"><span class="id" title="record">plan_item</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:96"><span class="id" title="variable">i</span></a>)) : <a class="idref" href="VLSM.Core.Composition.html#composite_plan_item"><span class="id" title="definition">composite_plan_item</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">i</span> <span class="id" title="var">label_a</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">input_a</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_initial_state_prop_lift" class="idref" href="#composite_initial_state_prop_lift"><span class="id" title="lemma">composite_initial_state_prop_lift</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="j:98" class="idref" href="#j:98"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a>) (<a id="sj:99" class="idref" href="#sj:99"><span class="id" title="binder">sj</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:98"><span class="id" title="variable">j</span></a>)) (<a id="Hinitj:100" class="idref" href="#Hinitj:100"><span class="id" title="binder">Hinitj</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:98"><span class="id" title="variable">j</span></a>) <a class="idref" href="VLSM.Core.Composition.html#sj:99"><span class="id" title="variable">sj</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#composite_initial_state_prop"><span class="id" title="definition">composite_initial_state_prop</span></a> (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state'"><span class="id" title="definition">lift_to_composite_state'</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:98"><span class="id" title="variable">j</span></a> <a class="idref" href="VLSM.Core.Composition.html#sj:99"><span class="id" title="variable">sj</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">j</span> <span class="id" title="var">sj</span> <span class="id" title="var">Hinitj</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state'"><span class="id" title="definition">lift_to_composite_state'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">j</span>)); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>; <span class="id" title="var">cbn</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.VLSM.html#vs0"><span class="id" title="definition">vs0</span></a> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">Hs</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lift_to_composite_VLSM_embedding" class="idref" href="#lift_to_composite_VLSM_embedding"><span class="id" title="lemma">lift_to_composite_VLSM_embedding</span></a> <a id="j:101" class="idref" href="#j:101"><span class="id" title="binder">j</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSMProjections.VLSMEmbedding.html#VLSM_embedding"><span class="id" title="record">VLSM_embedding</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:101"><span class="id" title="variable">j</span></a>) <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_label"><span class="id" title="definition">lift_to_composite_label</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:101"><span class="id" title="variable">j</span></a>) (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state'"><span class="id" title="definition">lift_to_composite_state'</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:101"><span class="id" title="variable">j</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMEmbedding.html#basic_VLSM_strong_embedding"><span class="id" title="lemma">basic_VLSM_strong_embedding</span></a>; <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state'"><span class="id" title="definition">lift_to_composite_state'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state'"><span class="id" title="definition">lift_to_composite_state'</span></a> <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state'"><span class="id" title="definition">lift_to_composite_state'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_twice"><span class="id" title="lemma">state_update_twice</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#composite_initial_state_prop_lift"><span class="id" title="lemma">composite_initial_state_prop_lift</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">j</span>, (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="lift_to_composite_finite_trace" class="idref" href="#lift_to_composite_finite_trace"><span class="id" title="definition">lift_to_composite_finite_trace</span></a><br/>
&nbsp;&nbsp;(<a id="j:102" class="idref" href="#j:102"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:102"><span class="id" title="variable">j</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSMProjections.VLSMEmbedding.html#VLSM_embedding_finite_trace_project"><span class="id" title="definition">VLSM_embedding_finite_trace_project</span></a> (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_VLSM_embedding"><span class="id" title="lemma">lift_to_composite_VLSM_embedding</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:102"><span class="id" title="variable">j</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="lift_to_composite_finite_trace_last" class="idref" href="#lift_to_composite_finite_trace_last"><span class="id" title="definition">lift_to_composite_finite_trace_last</span></a> (<a id="j:103" class="idref" href="#j:103"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSMProjections.VLSMEmbedding.html#VLSM_embedding_finite_trace_last"><span class="id" title="lemma">VLSM_embedding_finite_trace_last</span></a> (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_VLSM_embedding"><span class="id" title="lemma">lift_to_composite_VLSM_embedding</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:103"><span class="id" title="variable">j</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lift_to_composite_generalized_preloaded_VLSM_embedding" class="idref" href="#lift_to_composite_generalized_preloaded_VLSM_embedding"><span class="id" title="lemma">lift_to_composite_generalized_preloaded_VLSM_embedding</span></a><br/>
&nbsp;&nbsp;(<a id="P:104" class="idref" href="#P:104"><span class="id" title="binder">P</span></a> <a id="Q:105" class="idref" href="#Q:105"><span class="id" title="binder">Q</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="PimpliesQ:107" class="idref" href="#PimpliesQ:107"><span class="id" title="binder">PimpliesQ</span></a> : <span class="id" title="notation">forall</span> <a id="m:106" class="idref" href="#m:106"><span class="id" title="binder">m</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.Composition.html#P:104"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.Composition.html#m:106"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#Q:105"><span class="id" title="variable">Q</span></a> <a class="idref" href="VLSM.Core.Composition.html#m:106"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;(<a id="j:108" class="idref" href="#j:108"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSMProjections.VLSMEmbedding.html#VLSM_embedding"><span class="id" title="record">VLSM_embedding</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_vlsm"><span class="id" title="definition">preloaded_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:108"><span class="id" title="variable">j</span></a>) <a class="idref" href="VLSM.Core.Composition.html#P:104"><span class="id" title="variable">P</span></a>) (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_vlsm"><span class="id" title="definition">preloaded_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#Q:105"><span class="id" title="variable">Q</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_label"><span class="id" title="definition">lift_to_composite_label</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:108"><span class="id" title="variable">j</span></a>) (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state'"><span class="id" title="definition">lift_to_composite_state'</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:108"><span class="id" title="variable">j</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.PreloadedVLSM.html#basic_VLSM_embedding_preloaded_with"><span class="id" title="lemma">basic_VLSM_embedding_preloaded_with</span></a>; <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">PimpliesQ</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state'"><span class="id" title="definition">lift_to_composite_state'</span></a>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state'"><span class="id" title="definition">lift_to_composite_state'</span></a> <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">j</span>) <span class="id" title="var">l</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state'"><span class="id" title="definition">lift_to_composite_state'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_twice"><span class="id" title="lemma">state_update_twice</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#composite_initial_state_prop_lift"><span class="id" title="lemma">composite_initial_state_prop_lift</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">j</span>, (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lift_to_composite_preloaded_VLSM_embedding" class="idref" href="#lift_to_composite_preloaded_VLSM_embedding"><span class="id" title="lemma">lift_to_composite_preloaded_VLSM_embedding</span></a> (<a id="j:109" class="idref" href="#j:109"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSMProjections.VLSMEmbedding.html#VLSM_embedding"><span class="id" title="record">VLSM_embedding</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_with_all_messages_vlsm"><span class="id" title="definition">preloaded_with_all_messages_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:109"><span class="id" title="variable">j</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_with_all_messages_vlsm"><span class="id" title="definition">preloaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_label"><span class="id" title="definition">lift_to_composite_label</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:109"><span class="id" title="variable">j</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state'"><span class="id" title="definition">lift_to_composite_state'</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:109"><span class="id" title="variable">j</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.PreloadedVLSM.html#basic_VLSM_embedding_preloaded"><span class="id" title="lemma">basic_VLSM_embedding_preloaded</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state'"><span class="id" title="definition">lift_to_composite_state'</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state'"><span class="id" title="definition">lift_to_composite_state'</span></a> <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <span class="id" title="var">l</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state'"><span class="id" title="definition">lift_to_composite_state'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_twice"><span class="id" title="lemma">state_update_twice</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span>  <span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">H</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#composite_initial_state_prop_lift"><span class="id" title="lemma">composite_initial_state_prop_lift</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  If all messages described by a predicate <code>P</code> are valid for the free
  composition preloaded with messages described by a predicate <code>Q</code>, then
  any message which can be emitted by a component preloaded with <code>P</code> can
  also be emitted by the free composition preloaded with <code>Q</code>.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="valid_preloaded_lifts_can_be_emitted" class="idref" href="#valid_preloaded_lifts_can_be_emitted"><span class="id" title="lemma">valid_preloaded_lifts_can_be_emitted</span></a><br/>
&nbsp;&nbsp;(<a id="P:110" class="idref" href="#P:110"><span class="id" title="binder">P</span></a> <a id="Q:111" class="idref" href="#Q:111"><span class="id" title="binder">Q</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="HPvalid:113" class="idref" href="#HPvalid:113"><span class="id" title="binder">HPvalid</span></a> : <span class="id" title="notation">forall</span> <a id="dm:112" class="idref" href="#dm:112"><span class="id" title="binder">dm</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.Composition.html#P:110"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.Composition.html#dm:112"><span class="id" title="variable">dm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_vlsm"><span class="id" title="definition">preloaded_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#Q:111"><span class="id" title="variable">Q</span></a>) <a class="idref" href="VLSM.Core.Composition.html#dm:112"><span class="id" title="variable">dm</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="notation">forall</span> <a id="j:114" class="idref" href="#j:114"><span class="id" title="binder">j</span></a> <a id="m:115" class="idref" href="#m:115"><span class="id" title="binder">m</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a> (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_vlsm"><span class="id" title="definition">preloaded_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:114"><span class="id" title="variable">j</span></a>) <a class="idref" href="VLSM.Core.Composition.html#P:110"><span class="id" title="variable">P</span></a>) <a class="idref" href="VLSM.Core.Composition.html#m:115"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a> (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_vlsm"><span class="id" title="definition">preloaded_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#Q:111"><span class="id" title="variable">Q</span></a>) <a class="idref" href="VLSM.Core.Composition.html#m:115"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">j</span> <span class="id" title="var">m</span> <span class="id" title="var">Hm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#VLSM_incl_can_emit"><span class="id" title="lemma">VLSM_incl_can_emit</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_vlsm_incl_relaxed"><span class="id" title="lemma">preloaded_vlsm_incl_relaxed</span></a> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <a id="m:116" class="idref" href="#m:116"><span class="id" title="binder"><span id="m:117" class="id">m</span></span></a> =&gt; <span class="id" title="var">Q</span> <a class="idref" href="VLSM.Core.Composition.html#m:116"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <span class="id" title="var">P</span> <a class="idref" href="VLSM.Core.Composition.html#m:116"><span class="id" title="variable">m</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">itauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMEmbedding.html#VLSM_embedding_can_emit"><span class="id" title="lemma">VLSM_embedding_can_emit</span></a>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_generalized_preloaded_VLSM_embedding"><span class="id" title="lemma">lift_to_composite_generalized_preloaded_VLSM_embedding</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">itauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  As a specialization of <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#valid_preloaded_lifts_can_be_emitted"><span class="id" title="lemma">valid_preloaded_lifts_can_be_emitted</span></a></span>, if all
  messages described by a predicate <code>P</code> are valid for the free composition,
  then any message which can be emitted by a component preloaded with <code>P</code>
  can also be emitted by the free composition.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="free_valid_preloaded_lifts_can_be_emitted" class="idref" href="#free_valid_preloaded_lifts_can_be_emitted"><span class="id" title="lemma">free_valid_preloaded_lifts_can_be_emitted</span></a><br/>
&nbsp;&nbsp;(<a id="P:118" class="idref" href="#P:118"><span class="id" title="binder">P</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="Hdeps:120" class="idref" href="#Hdeps:120"><span class="id" title="binder">Hdeps</span></a> : <span class="id" title="notation">forall</span> <a id="dm:119" class="idref" href="#dm:119"><span class="id" title="binder">dm</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.Composition.html#P:118"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.Composition.html#dm:119"><span class="id" title="variable">dm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#dm:119"><span class="id" title="variable">dm</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="notation">forall</span> <a id="i:121" class="idref" href="#i:121"><span class="id" title="binder">i</span></a> <a id="m:122" class="idref" href="#m:122"><span class="id" title="binder">m</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a> (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_vlsm"><span class="id" title="definition">preloaded_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:121"><span class="id" title="variable">i</span></a>) <a class="idref" href="VLSM.Core.Composition.html#P:118"><span class="id" title="variable">P</span></a>) <a class="idref" href="VLSM.Core.Composition.html#m:122"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#m:122"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#VLSM_incl_can_emit"><span class="id" title="lemma">VLSM_incl_can_emit</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#vlsm_is_preloaded_with_False"><span class="id" title="lemma">vlsm_is_preloaded_with_False</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.Composition.html#valid_preloaded_lifts_can_be_emitted"><span class="id" title="lemma">valid_preloaded_lifts_can_be_emitted</span></a>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">dm</span> <span class="id" title="var">Hdm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#VLSM_incl_valid_message"><span class="id" title="lemma">VLSM_incl_valid_message</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#vlsm_is_preloaded_with_False"><span class="id" title="lemma">vlsm_is_preloaded_with_False</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">cbv</span>; <span class="id" title="var">itauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hdeps</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="valid_state_preloaded_composite_free_lift" class="idref" href="#valid_state_preloaded_composite_free_lift"><span class="id" title="lemma">valid_state_preloaded_composite_free_lift</span></a><br/>
&nbsp;&nbsp;(<a id="j:123" class="idref" href="#j:123"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;(<a id="sj:124" class="idref" href="#sj:124"><span class="id" title="binder">sj</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:123"><span class="id" title="variable">j</span></a>))<br/>
&nbsp;&nbsp;(<a id="Hp:125" class="idref" href="#Hp:125"><span class="id" title="binder">Hp</span></a> : <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:123"><span class="id" title="variable">j</span></a>) <a class="idref" href="VLSM.Core.Composition.html#sj:124"><span class="id" title="variable">sj</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state'"><span class="id" title="definition">lift_to_composite_state'</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:123"><span class="id" title="variable">j</span></a> <a class="idref" href="VLSM.Core.Composition.html#sj:124"><span class="id" title="variable">sj</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSMProjections.VLSMEmbedding.html#VLSM_embedding_valid_state"><span class="id" title="lemma">VLSM_embedding_valid_state</span></a> (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_preloaded_VLSM_embedding"><span class="id" title="lemma">lift_to_composite_preloaded_VLSM_embedding</span></a> <span class="id" title="var">j</span>)).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="can_emit_composite_free_lift" class="idref" href="#can_emit_composite_free_lift"><span class="id" title="lemma">can_emit_composite_free_lift</span></a><br/>
&nbsp;&nbsp;(<a id="P:126" class="idref" href="#P:126"><span class="id" title="binder">P</span></a> <a id="Q:127" class="idref" href="#Q:127"><span class="id" title="binder">Q</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="PimpliesQ:129" class="idref" href="#PimpliesQ:129"><span class="id" title="binder">PimpliesQ</span></a> : <span class="id" title="notation">forall</span> <a id="m:128" class="idref" href="#m:128"><span class="id" title="binder">m</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.Composition.html#P:126"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.Composition.html#m:128"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#Q:127"><span class="id" title="variable">Q</span></a> <a class="idref" href="VLSM.Core.Composition.html#m:128"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;(<a id="j:130" class="idref" href="#j:130"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;(<a id="m:131" class="idref" href="#m:131"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htrj:132" class="idref" href="#Htrj:132"><span class="id" title="binder">Htrj</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a> (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_vlsm"><span class="id" title="definition">preloaded_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:130"><span class="id" title="variable">j</span></a>) <a class="idref" href="VLSM.Core.Composition.html#P:126"><span class="id" title="variable">P</span></a>) <a class="idref" href="VLSM.Core.Composition.html#m:131"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a> (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_vlsm"><span class="id" title="definition">preloaded_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#Q:127"><span class="id" title="variable">Q</span></a>) <a class="idref" href="VLSM.Core.Composition.html#m:131"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMEmbedding.html#VLSM_embedding_can_emit"><span class="id" title="lemma">VLSM_embedding_can_emit</span></a>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_generalized_preloaded_VLSM_embedding"><span class="id" title="lemma">lift_to_composite_generalized_preloaded_VLSM_embedding</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Updating a composite <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state"><span class="id" title="definition">valid_state</span></a></span> for the free composition with
  a component initial state yields a composite <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state"><span class="id" title="definition">valid_state</span></a></span>.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="pre_composite_free_update_state_with_initial" class="idref" href="#pre_composite_free_update_state_with_initial"><span class="id" title="lemma">pre_composite_free_update_state_with_initial</span></a><br/>
&nbsp;&nbsp;(<a id="P:133" class="idref" href="#P:133"><span class="id" title="binder">P</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="s:134" class="idref" href="#s:134"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hs:135" class="idref" href="#Hs:135"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_vlsm"><span class="id" title="definition">preloaded_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#P:133"><span class="id" title="variable">P</span></a>) <a class="idref" href="VLSM.Core.Composition.html#s:134"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;(<a id="i:136" class="idref" href="#i:136"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;(<a id="si:137" class="idref" href="#si:137"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:136"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;(<a id="Hsi:138" class="idref" href="#Hsi:138"><span class="id" title="binder">Hsi</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:136"><span class="id" title="variable">i</span></a>) <a class="idref" href="VLSM.Core.Composition.html#si:137"><span class="id" title="variable">si</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_vlsm"><span class="id" title="definition">preloaded_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#P:133"><span class="id" title="variable">P</span></a>) (<a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:134"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:136"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#si:137"><span class="id" title="variable">si</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop_ind"><span class="id" title="lemma">valid_state_prop_ind</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_is_valid"><span class="id" title="lemma">initial_state_is_valid</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#composite_update_initial_state_with_initial"><span class="id" title="lemma">composite_update_initial_state_with_initial</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hps</span> [<span class="id" title="var">Hom</span> <span class="id" title="var">Hv</span>]] <span class="id" title="var">Ht</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>, <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">j</span> <span class="id" title="var">lj</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">sj'</span> <span class="id" title="var">omj'</span>] <span class="id" title="var">eqn</span>: <span class="id" title="var">Htj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion_clear</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">j</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_twice"><span class="id" title="lemma">state_update_twice</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_twice_neq"><span class="id" title="lemma">state_update_twice_neq</span></a> <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_destination"><span class="id" title="lemma">input_valid_transition_destination</span></a> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">j</span> <span class="id" title="var">lj</span>) (<a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">si</span>) <span class="id" title="var">om</span> <span class="id" title="var">omj'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; [<span class="id" title="var">done</span> | <span class="id" title="var">done</span> | ..]; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[.. | <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Htj</span> |].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lift_to_composite_valid_preservation" class="idref" href="#lift_to_composite_valid_preservation"><span class="id" title="lemma">lift_to_composite_valid_preservation</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:139" class="idref" href="#i:139"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a>) (<a id="cs:140" class="idref" href="#cs:140"><span class="id" title="binder">cs</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="l:141" class="idref" href="#l:141"><span class="id" title="binder">l</span></a> <a id="s:142" class="idref" href="#s:142"><span class="id" title="binder">s</span></a> <a id="om:143" class="idref" href="#om:143"><span class="id" title="binder">om</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:139"><span class="id" title="variable">i</span></a>) <a class="idref" href="VLSM.Core.Composition.html#l:141"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:142"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:143"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#composite_valid"><span class="id" title="definition">composite_valid</span></a> (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_label"><span class="id" title="definition">lift_to_composite_label</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:139"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:141"><span class="id" title="variable">l</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#cs:140"><span class="id" title="variable">cs</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:139"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:142"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:143"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lift_to_composite_transition_preservation" class="idref" href="#lift_to_composite_transition_preservation"><span class="id" title="lemma">lift_to_composite_transition_preservation</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:144" class="idref" href="#i:144"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a>) (<a id="cs:145" class="idref" href="#cs:145"><span class="id" title="binder">cs</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="l:146" class="idref" href="#l:146"><span class="id" title="binder">l</span></a> <a id="s:147" class="idref" href="#s:147"><span class="id" title="binder">s</span></a> <a id="om:148" class="idref" href="#om:148"><span class="id" title="binder">om</span></a> <a id="s':149" class="idref" href="#s':149"><span class="id" title="binder">s'</span></a> <a id="om':150" class="idref" href="#om':150"><span class="id" title="binder">om'</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:144"><span class="id" title="variable">i</span></a>) <a class="idref" href="VLSM.Core.Composition.html#l:146"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:147"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:148"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':149"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om':150"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#composite_transition"><span class="id" title="definition">composite_transition</span></a> (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_label"><span class="id" title="definition">lift_to_composite_label</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:144"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:146"><span class="id" title="variable">l</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#cs:145"><span class="id" title="variable">cs</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:144"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:147"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:148"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#cs:145"><span class="id" title="variable">cs</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:144"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#s':149"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om':150"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">replace</span> (<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_twice"><span class="id" title="lemma">state_update_twice</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lift_to_composite_initial_message_preservation" class="idref" href="#lift_to_composite_initial_message_preservation"><span class="id" title="lemma">lift_to_composite_initial_message_preservation</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:151" class="idref" href="#i:151"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="m:152" class="idref" href="#m:152"><span class="id" title="binder">m</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:151"><span class="id" title="variable">i</span></a>) <a class="idref" href="VLSM.Core.Composition.html#m:152"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#composite_initial_message_prop"><span class="id" title="definition">composite_initial_message_prop</span></a> <a class="idref" href="VLSM.Core.Composition.html#m:152"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">m</span> <span class="id" title="var">Hm</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">i</span>, (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hm</span>). <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="pre_lift_to_free_weak_embedding" class="idref" href="#pre_lift_to_free_weak_embedding"><span class="id" title="lemma">pre_lift_to_free_weak_embedding</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:153" class="idref" href="#i:153"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a>) (<a id="cs:154" class="idref" href="#cs:154"><span class="id" title="binder">cs</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>) (<a id="P:155" class="idref" href="#P:155"><span class="id" title="binder">P</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_vlsm"><span class="id" title="definition">preloaded_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#P:155"><span class="id" title="variable">P</span></a>) <a class="idref" href="VLSM.Core.Composition.html#cs:154"><span class="id" title="variable">cs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSMProjections.VLSMEmbedding.html#VLSM_weak_embedding"><span class="id" title="record">VLSM_weak_embedding</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_vlsm"><span class="id" title="definition">preloaded_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:153"><span class="id" title="variable">i</span></a>) <a class="idref" href="VLSM.Core.Composition.html#P:155"><span class="id" title="variable">P</span></a>) (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_vlsm"><span class="id" title="definition">preloaded_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#P:155"><span class="id" title="variable">P</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_label"><span class="id" title="definition">lift_to_composite_label</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:153"><span class="id" title="variable">i</span></a>) (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#cs:154"><span class="id" title="variable">cs</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:153"><span class="id" title="variable">i</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">cs</span> <span class="id" title="var">P</span> <span class="id" title="var">Hvsp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMEmbedding.html#basic_VLSM_weak_embedding"><span class="id" title="lemma">basic_VLSM_weak_embedding</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">l</span> <span class="id" title="var">s</span> <span class="id" title="var">om</span> (<span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Hv</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_valid_preservation"><span class="id" title="lemma">lift_to_composite_valid_preservation</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> 1; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_transition_preservation"><span class="id" title="lemma">lift_to_composite_transition_preservation</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#pre_composite_free_update_state_with_initial"><span class="id" title="lemma">pre_composite_free_update_state_with_initial</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">m</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> [<span class="id" title="var">Hm</span> | <span class="id" title="var">Hp</span>]; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_message_is_valid"><span class="id" title="lemma">initial_message_is_valid</span></a>; [<span class="id" title="tactic">left</span> | <span class="id" title="tactic">by</span> <span class="id" title="tactic">right</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_initial_message_preservation"><span class="id" title="lemma">lift_to_composite_initial_message_preservation</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lift_to_free_weak_embedding" class="idref" href="#lift_to_free_weak_embedding"><span class="id" title="lemma">lift_to_free_weak_embedding</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:156" class="idref" href="#i:156"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a>) (<a id="cs:157" class="idref" href="#cs:157"><span class="id" title="binder">cs</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#cs:157"><span class="id" title="variable">cs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSMProjections.VLSMEmbedding.html#VLSM_weak_embedding"><span class="id" title="record">VLSM_weak_embedding</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:156"><span class="id" title="variable">i</span></a>) <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_label"><span class="id" title="definition">lift_to_composite_label</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:156"><span class="id" title="variable">i</span></a>) (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#cs:157"><span class="id" title="variable">cs</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:156"><span class="id" title="variable">i</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSMProjections.VLSMEquality.html#VLSM_eq_finite_valid_trace_from"><span class="id" title="lemma">VLSM_eq_finite_valid_trace_from</span></a> (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#vlsm_is_preloaded_with_False"><span class="id" title="lemma">vlsm_is_preloaded_with_False</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#pre_lift_to_free_weak_embedding"><span class="id" title="lemma">pre_lift_to_free_weak_embedding</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSMProjections.VLSMEquality.html#VLSM_eq_valid_state"><span class="id" title="lemma">VLSM_eq_valid_state</span></a> (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#vlsm_is_preloaded_with_False"><span class="id" title="lemma">vlsm_is_preloaded_with_False</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSMProjections.VLSMEquality.html#VLSM_eq_finite_valid_trace_from"><span class="id" title="lemma">VLSM_eq_finite_valid_trace_from</span></a> (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#vlsm_is_preloaded_with_False"><span class="id" title="lemma">vlsm_is_preloaded_with_False</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">i</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">i</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lift_to_preloaded_free_weak_embedding" class="idref" href="#lift_to_preloaded_free_weak_embedding"><span class="id" title="lemma">lift_to_preloaded_free_weak_embedding</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:158" class="idref" href="#i:158"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.index"><span class="id" title="variable">index</span></a>) (<a id="cs:159" class="idref" href="#cs:159"><span class="id" title="binder">cs</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#cs:159"><span class="id" title="variable">cs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSMProjections.VLSMEmbedding.html#VLSM_weak_embedding"><span class="id" title="record">VLSM_weak_embedding</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_with_all_messages_vlsm"><span class="id" title="definition">preloaded_with_all_messages_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:158"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_with_all_messages_vlsm"><span class="id" title="definition">preloaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_label"><span class="id" title="definition">lift_to_composite_label</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:158"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#cs:159"><span class="id" title="variable">cs</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:158"><span class="id" title="variable">i</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#pre_lift_to_free_weak_embedding"><span class="id" title="lemma">pre_lift_to_free_weak_embedding</span></a>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">i</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.Composition.html#sec_VLSM_composition"><span class="id" title="section">sec_VLSM_composition</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab128"></a><h2 class="section">A tactic for working with the state_update function</h2>


<div class="paragraph"> </div>

  Hint database and tactic for dealing with updates and lifting via <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a></span>.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Create HintDb</span> <span class="id" title="var">state_update</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Rewrite</span> @<a class="idref" href="VLSM.Core.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a> <span class="id" title="keyword">using</span> <span class="id" title="var">done</span> : <span class="id" title="var">state_update</span>.<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Rewrite</span> @<a class="idref" href="VLSM.Core.Composition.html#state_update_id"><span class="id" title="lemma">state_update_id</span></a> <span class="id" title="keyword">using</span> <span class="id" title="var">done</span> : <span class="id" title="var">state_update</span>.<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Rewrite</span> @<a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a> : <span class="id" title="var">state_update</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Unfold</span> <a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> : <span class="id" title="var">state_update</span>.<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Unfold</span> <a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state'"><span class="id" title="definition">lift_to_composite_state'</span></a> : <span class="id" title="var">state_update</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">state_update_simpl</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">autounfold</span> <span class="id" title="keyword">with</span> <span class="id" title="var">state_update</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">state_update</span> <span class="id" title="tactic">in</span> *.<br/>

<br/>
</div>

<div class="doc">
<a id="lab129"></a><h2 class="section">Basic projection lemmas</h2>


<div class="paragraph"> </div>

  These basic projection lemmas relate
  the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a></span> and <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a></span> of
  a composite VLSM back to those conditions holding
  over projections to individual components of the state.

<div class="paragraph"> </div>

  Because the composition may have validly produced
  messages that are not valid for an individual
  component (by interaction between components),
  We cannot just use properties <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a></span> <span class="inlinecode">(<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#IM"><span class="id" title="definition">IM</span></a></span> <span class="inlinecode"><span class="id" title="var">i</span>)</span>
  or <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a></span> <span class="inlinecode">(<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#IM"><span class="id" title="definition">IM</span></a></span> <span class="inlinecode"><span class="id" title="var">i</span>)</span>.
  For simplicity these lemmas use
  <span class="inlinecode"><a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_with_all_messages_vlsm"><span class="id" title="definition">preloaded_with_all_messages_vlsm</span></a></span> <span class="inlinecode">(<a class="idref" href="VLSM.Examples.Paxos.Paxos.html#IM"><span class="id" title="definition">IM</span></a></span> <span class="inlinecode"><span class="id" title="var">i</span>)</span>.

<div class="paragraph"> </div>

  This does not precisely reflect the set of
  messages and transitions that can actually be
  seen in projections of transitions of the composite VLSM,
  but seems to be the best we can do with a result
  type that doesn't mention the other components or
  the composition constraint of the composite.

<div class="paragraph"> </div>

  Later in this file a
  <span class="inlinecode"><span class="id" title="var">composite_constrained_projection_vlsm</span></span> is defined
  that shares the states of <span class="inlinecode"><a class="idref" href="VLSM.Examples.Paxos.Paxos.html#IM"><span class="id" title="definition">IM</span></a></span> <span class="inlinecode"><span class="id" title="var">i</span></span> which is more
  precise.

<div class="paragraph"> </div>


<div class="paragraph"> </div>

  We call a <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a></span> constrained if it is constrained for the
  <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a></span>.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="composite_constrained_state_prop" class="idref" href="#composite_constrained_state_prop"><span class="id" title="definition">composite_constrained_state_prop</span></a><br/>
&nbsp;&nbsp;{<a id="message:160" class="idref" href="#message:160"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:162" class="idref" href="#EqDecision0:162"><span class="id" title="binder">EqDecision</span></a> <a id="index:161" class="idref" href="#index:161"><span class="id" title="binder"><span id="EqDecision0:162" class="id">index</span></span></a>}<br/>
&nbsp;&nbsp;(<a id="IM:163" class="idref" href="#IM:163"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Core.Composition.html#index:161"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:160"><span class="id" title="variable">message</span></a>) (<a id="s:164" class="idref" href="#s:164"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:163"><span class="id" title="variable">IM</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> (<a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:163"><span class="id" title="variable">IM</span></a>) <a class="idref" href="VLSM.Core.Composition.html#s:164"><span class="id" title="variable">s</span></a>.<br/>

<br/>
</div>

<div class="doc">
If a composite state is constrained, so are all of its component states. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="composite_constrained_state_project" class="idref" href="#composite_constrained_state_project"><span class="id" title="lemma">composite_constrained_state_project</span></a><br/>
&nbsp;&nbsp;{<a id="message:165" class="idref" href="#message:165"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:167" class="idref" href="#EqDecision0:167"><span class="id" title="binder">EqDecision</span></a> <a id="index:166" class="idref" href="#index:166"><span class="id" title="binder"><span id="EqDecision0:167" class="id">index</span></span></a>} (<a id="IM:168" class="idref" href="#IM:168"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Core.Composition.html#index:166"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:165"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="s:169" class="idref" href="#s:169"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:168"><span class="id" title="variable">IM</span></a>) <a id="i:170" class="idref" href="#i:170"><span class="id" title="binder">i</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#composite_constrained_state_prop"><span class="id" title="definition">composite_constrained_state_prop</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:168"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:169"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> (<a class="idref" href="VLSM.Core.Composition.html#IM:168"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:170"><span class="id" title="variable">i</span></a>) (<a class="idref" href="VLSM.Core.Composition.html#s:169"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:170"><span class="id" title="variable">i</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">om</span> <span class="id" title="var">Hproto</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hproto</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_is_valid"><span class="id" title="lemma">initial_state_is_valid</span></a>; <span class="id" title="var">cbn</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">j</span> <span class="id" title="var">lj</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>, <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <span class="id" title="var">lj</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span> <span class="id" title="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="var">eqn</span>: <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>)); <span class="id" title="tactic">subst</span>; <span class="id" title="var">state_update_simpl</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHHproto1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">om''</span> <span class="id" title="var">Hovmp</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">om'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_outputs_valid_state_message"><span class="id" title="lemma">input_valid_transition_outputs_valid_state_message</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">om''</span> | | <span class="id" title="var">done</span>..].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.PreloadedVLSM.html#any_message_is_valid_in_preloaded"><span class="id" title="lemma">any_message_is_valid_in_preloaded</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="valid_state_project_preloaded_to_preloaded" class="idref" href="#valid_state_project_preloaded_to_preloaded"><span class="id" title="lemma">valid_state_project_preloaded_to_preloaded</span></a><br/>
&nbsp;&nbsp;<a id="message:171" class="idref" href="#message:171"><span class="id" title="binder">message</span></a> `{<a id="EqDecision0:173" class="idref" href="#EqDecision0:173"><span class="id" title="binder">EqDecision</span></a> <a id="index:172" class="idref" href="#index:172"><span class="id" title="binder"><span id="EqDecision0:173" class="id">index</span></span></a>} (<a id="IM:174" class="idref" href="#IM:174"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Core.Composition.html#index:172"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:171"><span class="id" title="variable">message</span></a>) <a id="constraint:175" class="idref" href="#constraint:175"><span class="id" title="binder">constraint</span></a><br/>
&nbsp;&nbsp;(<a id="X:176" class="idref" href="#X:176"><span class="id" title="binder">X</span></a> := <a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:174"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint:175"><span class="id" title="variable">constraint</span></a>)<br/>
&nbsp;&nbsp;(<a id="s:177" class="idref" href="#s:177"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_with_all_messages_vlsm"><span class="id" title="definition">preloaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#X:176"><span class="id" title="variable">X</span></a>)) <a id="i:178" class="idref" href="#i:178"><span class="id" title="binder">i</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> <a class="idref" href="VLSM.Core.Composition.html#X:176"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:177"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> (<a class="idref" href="VLSM.Core.Composition.html#IM:174"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:178"><span class="id" title="variable">i</span></a>) (<a class="idref" href="VLSM.Core.Composition.html#s:177"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:178"><span class="id" title="variable">i</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.Composition.html#composite_constrained_state_project"><span class="id" title="lemma">composite_constrained_state_project</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#VLSM_incl_valid_state"><span class="id" title="lemma">VLSM_incl_valid_state</span></a>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.ConstrainedVLSM.html#constrained_preloaded_vlsm_incl_preloaded_with_all_messages"><span class="id" title="lemma">constrained_preloaded_vlsm_incl_preloaded_with_all_messages</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="valid_state_project_preloaded" class="idref" href="#valid_state_project_preloaded"><span class="id" title="lemma">valid_state_project_preloaded</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="message:179" class="idref" href="#message:179"><span class="id" title="binder">message</span></a> `{<a id="EqDecision0:181" class="idref" href="#EqDecision0:181"><span class="id" title="binder">EqDecision</span></a> <a id="index:180" class="idref" href="#index:180"><span class="id" title="binder"><span id="EqDecision0:181" class="id">index</span></span></a>} (<a id="IM:182" class="idref" href="#IM:182"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Core.Composition.html#index:180"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:179"><span class="id" title="variable">message</span></a>) <a id="constraint:183" class="idref" href="#constraint:183"><span class="id" title="binder">constraint</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:184" class="idref" href="#X:184"><span class="id" title="binder">X</span></a> := <a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:182"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint:183"><span class="id" title="variable">constraint</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:185" class="idref" href="#s:185"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.Composition.html#X:184"><span class="id" title="variable">X</span></a>) <a id="i:186" class="idref" href="#i:186"><span class="id" title="binder">i</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.Composition.html#X:184"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:185"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> (<a class="idref" href="VLSM.Core.Composition.html#IM:182"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:186"><span class="id" title="variable">i</span></a>) (<a class="idref" href="VLSM.Core.Composition.html#s:185"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:186"><span class="id" title="variable">i</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#valid_state_project_preloaded_to_preloaded"><span class="id" title="lemma">valid_state_project_preloaded_to_preloaded</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_with_all_messages_valid_state_prop"><span class="id" title="lemma">preloaded_with_all_messages_valid_state_prop</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_transition_project_active" class="idref" href="#composite_transition_project_active"><span class="id" title="lemma">composite_transition_project_active</span></a><br/>
&nbsp;&nbsp;<a id="message:187" class="idref" href="#message:187"><span class="id" title="binder">message</span></a> `{<a id="EqDecision0:189" class="idref" href="#EqDecision0:189"><span class="id" title="binder">EqDecision</span></a> <a id="index:188" class="idref" href="#index:188"><span class="id" title="binder"><span id="EqDecision0:189" class="id">index</span></span></a>} (<a id="IM:190" class="idref" href="#IM:190"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Core.Composition.html#index:188"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:187"><span class="id" title="variable">message</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="l:191" class="idref" href="#l:191"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:190"><span class="id" title="variable">IM</span></a>) (<a id="s:192" class="idref" href="#s:192"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:190"><span class="id" title="variable">IM</span></a>) (<a id="im:193" class="idref" href="#im:193"><span class="id" title="binder">im</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:187"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s':194" class="idref" href="#s':194"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:190"><span class="id" title="variable">IM</span></a>) (<a id="om:195" class="idref" href="#om:195"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:187"><span class="id" title="variable">message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#composite_transition"><span class="id" title="definition">composite_transition</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:190"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:191"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:192"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#im:193"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':194"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:195"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> (<a class="idref" href="VLSM.Core.Composition.html#IM:190"><span class="id" title="variable">IM</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:191"><span class="id" title="variable">l</span></a>)) (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:191"><span class="id" title="variable">l</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:192"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:191"><span class="id" title="variable">l</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#im:193"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':194"><span class="id" title="variable">s'</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:191"><span class="id" title="variable">l</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:195"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">x</span> <span class="id" title="var">l</span>]; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> (<span class="id" title="var">IM</span> <span class="id" title="var">x</span>) <span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span> <span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">im</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">state_update_simpl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_preloaded_project_active_free" class="idref" href="#input_valid_transition_preloaded_project_active_free"><span class="id" title="lemma">input_valid_transition_preloaded_project_active_free</span></a><br/>
&nbsp;&nbsp;{<a id="message:196" class="idref" href="#message:196"><span class="id" title="binder">message</span></a>} `{<a id="EqDecision0:198" class="idref" href="#EqDecision0:198"><span class="id" title="binder">EqDecision</span></a> <a id="V:197" class="idref" href="#V:197"><span class="id" title="binder"><span id="EqDecision0:198" class="id">V</span></span></a>} {<a id="IM:199" class="idref" href="#IM:199"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Core.Composition.html#V:197"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:196"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;(<a id="X:200" class="idref" href="#X:200"><span class="id" title="binder">X</span></a> := <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:199"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;<a id="l:201" class="idref" href="#l:201"><span class="id" title="binder">l</span></a> <a id="s:202" class="idref" href="#s:202"><span class="id" title="binder">s</span></a> <a id="im:203" class="idref" href="#im:203"><span class="id" title="binder">im</span></a> <a id="s':204" class="idref" href="#s':204"><span class="id" title="binder">s'</span></a> <a id="om:205" class="idref" href="#om:205"><span class="id" title="binder">om</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#input_constrained_transition"><span class="id" title="definition">input_constrained_transition</span></a> <a class="idref" href="VLSM.Core.Composition.html#X:200"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:201"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:202"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#im:203"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':204"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:205"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#input_constrained_transition"><span class="id" title="definition">input_constrained_transition</span></a> (<a class="idref" href="VLSM.Core.Composition.html#IM:199"><span class="id" title="variable">IM</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:201"><span class="id" title="variable">l</span></a>)) (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:201"><span class="id" title="variable">l</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:202"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:201"><span class="id" title="variable">l</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#im:203"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':204"><span class="id" title="variable">s'</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:201"><span class="id" title="variable">l</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:205"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hptrans</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hptrans</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hproto_s</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hcvalid</span>]] <span class="id" title="var">Htrans</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.Composition.html#composite_transition_project_active"><span class="id" title="lemma">composite_transition_project_active</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [| <span class="id" title="tactic">split</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.Composition.html#composite_constrained_state_project"><span class="id" title="lemma">composite_constrained_state_project</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.PreloadedVLSM.html#any_message_is_valid_in_preloaded"><span class="id" title="lemma">any_message_is_valid_in_preloaded</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hcvalid</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_preloaded_project_active" class="idref" href="#input_valid_transition_preloaded_project_active"><span class="id" title="lemma">input_valid_transition_preloaded_project_active</span></a><br/>
&nbsp;&nbsp;{<a id="message:206" class="idref" href="#message:206"><span class="id" title="binder">message</span></a>} `{<a id="EqDecision0:208" class="idref" href="#EqDecision0:208"><span class="id" title="binder">EqDecision</span></a> <a id="V:207" class="idref" href="#V:207"><span class="id" title="binder"><span id="EqDecision0:208" class="id">V</span></span></a>} {<a id="IM:209" class="idref" href="#IM:209"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Core.Composition.html#V:207"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:206"><span class="id" title="variable">message</span></a>} {<a id="constraint:210" class="idref" href="#constraint:210"><span class="id" title="binder">constraint</span></a>}<br/>
&nbsp;&nbsp;(<a id="X:211" class="idref" href="#X:211"><span class="id" title="binder">X</span></a> := <a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:209"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint:210"><span class="id" title="variable">constraint</span></a>)<br/>
&nbsp;&nbsp;<a id="l:212" class="idref" href="#l:212"><span class="id" title="binder">l</span></a> <a id="s:213" class="idref" href="#s:213"><span class="id" title="binder">s</span></a> <a id="im:214" class="idref" href="#im:214"><span class="id" title="binder">im</span></a> <a id="s':215" class="idref" href="#s':215"><span class="id" title="binder">s'</span></a> <a id="om:216" class="idref" href="#om:216"><span class="id" title="binder">om</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#input_constrained_transition"><span class="id" title="definition">input_constrained_transition</span></a> <a class="idref" href="VLSM.Core.Composition.html#X:211"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:212"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:213"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#im:214"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':215"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:216"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#input_constrained_transition"><span class="id" title="definition">input_constrained_transition</span></a> (<a class="idref" href="VLSM.Core.Composition.html#IM:209"><span class="id" title="variable">IM</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:212"><span class="id" title="variable">l</span></a>)) (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:212"><span class="id" title="variable">l</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:213"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:212"><span class="id" title="variable">l</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#im:214"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':215"><span class="id" title="variable">s'</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:212"><span class="id" title="variable">l</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:216"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#input_valid_transition_preloaded_project_active_free"><span class="id" title="lemma">input_valid_transition_preloaded_project_active_free</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (@<a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#VLSM_incl_input_valid_transition"><span class="id" title="lemma">VLSM_incl_input_valid_transition</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_with_all_messages_vlsm"><span class="id" title="definition">preloaded_with_all_messages_vlsm</span></a> <span class="id" title="var">X</span>)); [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.ConstrainedVLSM.html#constrained_preloaded_vlsm_incl_preloaded_with_all_messages"><span class="id" title="lemma">constrained_preloaded_vlsm_incl_preloaded_with_all_messages</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_project_active" class="idref" href="#input_valid_transition_project_active"><span class="id" title="lemma">input_valid_transition_project_active</span></a><br/>
&nbsp;&nbsp;{<a id="message:217" class="idref" href="#message:217"><span class="id" title="binder">message</span></a>} `{<a id="EqDecision0:219" class="idref" href="#EqDecision0:219"><span class="id" title="binder">EqDecision</span></a> <a id="V:218" class="idref" href="#V:218"><span class="id" title="binder"><span id="EqDecision0:219" class="id">V</span></span></a>} {<a id="IM:220" class="idref" href="#IM:220"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Core.Composition.html#V:218"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:217"><span class="id" title="variable">message</span></a>} {<a id="constraint:221" class="idref" href="#constraint:221"><span class="id" title="binder">constraint</span></a>}<br/>
&nbsp;&nbsp;(<a id="X:222" class="idref" href="#X:222"><span class="id" title="binder">X</span></a> := <a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:220"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint:221"><span class="id" title="variable">constraint</span></a>)<br/>
&nbsp;&nbsp;<a id="l:223" class="idref" href="#l:223"><span class="id" title="binder">l</span></a> <a id="s:224" class="idref" href="#s:224"><span class="id" title="binder">s</span></a> <a id="im:225" class="idref" href="#im:225"><span class="id" title="binder">im</span></a> <a id="s':226" class="idref" href="#s':226"><span class="id" title="binder">s'</span></a> <a id="om:227" class="idref" href="#om:227"><span class="id" title="binder">om</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.Composition.html#X:222"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:223"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:224"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#im:225"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':226"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:227"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#input_constrained_transition"><span class="id" title="definition">input_constrained_transition</span></a> (<a class="idref" href="VLSM.Core.Composition.html#IM:220"><span class="id" title="variable">IM</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:223"><span class="id" title="variable">l</span></a>)) (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:223"><span class="id" title="variable">l</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:224"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:223"><span class="id" title="variable">l</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#im:225"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':226"><span class="id" title="variable">s'</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:223"><span class="id" title="variable">l</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:227"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hptrans</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_weaken_input_valid_transition"><span class="id" title="lemma">preloaded_weaken_input_valid_transition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hptrans</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">revert</span> <span class="id" title="var">Hptrans</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#input_valid_transition_preloaded_project_active"><span class="id" title="lemma">input_valid_transition_preloaded_project_active</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_preloaded_project_any_free" class="idref" href="#input_valid_transition_preloaded_project_any_free"><span class="id" title="lemma">input_valid_transition_preloaded_project_any_free</span></a><br/>
&nbsp;&nbsp;{<a id="V:228" class="idref" href="#V:228"><span class="id" title="binder">V</span></a> : <span class="id" title="keyword">Type</span>} (<a id="i:229" class="idref" href="#i:229"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#V:228"><span class="id" title="variable">V</span></a>)<br/>
&nbsp;&nbsp;{<a id="message:230" class="idref" href="#message:230"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:231" class="idref" href="#EqDecision0:231"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:231" class="idref" href="#EqDecision0:231"><span class="id" title="binder">V</span></a>} {<a id="IM:232" class="idref" href="#IM:232"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Core.Composition.html#V:228"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:230"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;(<a id="X:233" class="idref" href="#X:233"><span class="id" title="binder">X</span></a> := <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:232"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;(<a id="l:234" class="idref" href="#l:234"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.Composition.html#X:233"><span class="id" title="variable">X</span></a>) <a id="s:235" class="idref" href="#s:235"><span class="id" title="binder">s</span></a> <a id="im:236" class="idref" href="#im:236"><span class="id" title="binder">im</span></a> <a id="s':237" class="idref" href="#s':237"><span class="id" title="binder">s'</span></a> <a id="om:238" class="idref" href="#om:238"><span class="id" title="binder">om</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#input_constrained_transition"><span class="id" title="definition">input_constrained_transition</span></a> <a class="idref" href="VLSM.Core.Composition.html#X:233"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:234"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:235"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#im:236"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':237"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:238"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#s:235"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:229"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#s':237"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:229"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="li:239" class="idref" href="#li:239"><span class="id" title="binder">li</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> (<a class="idref" href="VLSM.Core.Composition.html#IM:232"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:229"><span class="id" title="variable">i</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#l:234"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:229"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#li:239"><span class="id" title="variable">li</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#input_constrained_transition"><span class="id" title="definition">input_constrained_transition</span></a> (<a class="idref" href="VLSM.Core.Composition.html#IM:232"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:229"><span class="id" title="variable">i</span></a>) <a class="idref" href="VLSM.Core.Composition.html#li:239"><span class="id" title="variable">li</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:235"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:229"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#im:236"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':237"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:229"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:238"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hptrans</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">j</span> <span class="id" title="var">lj</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">j</span>)); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">lj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">revert</span> <span class="id" title="var">Hptrans</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#input_valid_transition_preloaded_project_active_free"><span class="id" title="lemma">input_valid_transition_preloaded_project_active_free</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hptrans</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hpvalid</span> <span class="id" title="var">Htrans</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> (<span class="id" title="var">IM</span> <span class="id" title="var">j</span>) <span class="id" title="var">lj</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span> <span class="id" title="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">im</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>); <span class="id" title="tactic">inversion_clear</span> <span class="id" title="var">Htrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">state_update_simpl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_preloaded_project_any" class="idref" href="#input_valid_transition_preloaded_project_any"><span class="id" title="lemma">input_valid_transition_preloaded_project_any</span></a><br/>
&nbsp;&nbsp;{<a id="V:240" class="idref" href="#V:240"><span class="id" title="binder">V</span></a> : <span class="id" title="keyword">Type</span>} (<a id="i:241" class="idref" href="#i:241"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#V:240"><span class="id" title="variable">V</span></a>)<br/>
&nbsp;&nbsp;{<a id="message:242" class="idref" href="#message:242"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:243" class="idref" href="#EqDecision0:243"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:243" class="idref" href="#EqDecision0:243"><span class="id" title="binder">V</span></a>} {<a id="IM:244" class="idref" href="#IM:244"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Core.Composition.html#V:240"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:242"><span class="id" title="variable">message</span></a>} {<a id="constraint:245" class="idref" href="#constraint:245"><span class="id" title="binder">constraint</span></a>}<br/>
&nbsp;&nbsp;(<a id="X:246" class="idref" href="#X:246"><span class="id" title="binder">X</span></a> := <a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:244"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint:245"><span class="id" title="variable">constraint</span></a>)<br/>
&nbsp;&nbsp;(<a id="l:247" class="idref" href="#l:247"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.Composition.html#X:246"><span class="id" title="variable">X</span></a>) <a id="s:248" class="idref" href="#s:248"><span class="id" title="binder">s</span></a> <a id="im:249" class="idref" href="#im:249"><span class="id" title="binder">im</span></a> <a id="s':250" class="idref" href="#s':250"><span class="id" title="binder">s'</span></a> <a id="om:251" class="idref" href="#om:251"><span class="id" title="binder">om</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#input_constrained_transition"><span class="id" title="definition">input_constrained_transition</span></a> <a class="idref" href="VLSM.Core.Composition.html#X:246"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:247"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:248"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#im:249"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':250"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:251"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#s:248"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:241"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#s':250"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:241"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="li:252" class="idref" href="#li:252"><span class="id" title="binder">li</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> (<a class="idref" href="VLSM.Core.Composition.html#IM:244"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:241"><span class="id" title="variable">i</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#l:247"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:241"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#li:252"><span class="id" title="variable">li</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#input_constrained_transition"><span class="id" title="definition">input_constrained_transition</span></a> (<a class="idref" href="VLSM.Core.Composition.html#IM:244"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:241"><span class="id" title="variable">i</span></a>) <a class="idref" href="VLSM.Core.Composition.html#li:252"><span class="id" title="variable">li</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:248"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:241"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#im:249"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':250"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:241"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:251"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#input_valid_transition_preloaded_project_any_free"><span class="id" title="lemma">input_valid_transition_preloaded_project_any_free</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (@<a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#VLSM_incl_input_valid_transition"><span class="id" title="lemma">VLSM_incl_input_valid_transition</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_with_all_messages_vlsm"><span class="id" title="definition">preloaded_with_all_messages_vlsm</span></a> <span class="id" title="var">X</span>)); [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.ConstrainedVLSM.html#constrained_preloaded_vlsm_incl_preloaded_with_all_messages"><span class="id" title="lemma">constrained_preloaded_vlsm_incl_preloaded_with_all_messages</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_project_any" class="idref" href="#input_valid_transition_project_any"><span class="id" title="lemma">input_valid_transition_project_any</span></a><br/>
&nbsp;&nbsp;{<a id="V:253" class="idref" href="#V:253"><span class="id" title="binder">V</span></a> : <span class="id" title="keyword">Type</span>} (<a id="i:254" class="idref" href="#i:254"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#V:253"><span class="id" title="variable">V</span></a>)<br/>
&nbsp;&nbsp;{<a id="message:255" class="idref" href="#message:255"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:256" class="idref" href="#EqDecision0:256"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:256" class="idref" href="#EqDecision0:256"><span class="id" title="binder">V</span></a>} {<a id="IM:257" class="idref" href="#IM:257"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Core.Composition.html#V:253"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:255"><span class="id" title="variable">message</span></a>} {<a id="constraint:258" class="idref" href="#constraint:258"><span class="id" title="binder">constraint</span></a>}<br/>
&nbsp;&nbsp;(<a id="X:259" class="idref" href="#X:259"><span class="id" title="binder">X</span></a> := <a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:257"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint:258"><span class="id" title="variable">constraint</span></a>)<br/>
&nbsp;&nbsp;(<a id="l:260" class="idref" href="#l:260"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.Composition.html#X:259"><span class="id" title="variable">X</span></a>) <a id="s:261" class="idref" href="#s:261"><span class="id" title="binder">s</span></a> <a id="im:262" class="idref" href="#im:262"><span class="id" title="binder">im</span></a> <a id="s':263" class="idref" href="#s':263"><span class="id" title="binder">s'</span></a> <a id="om:264" class="idref" href="#om:264"><span class="id" title="binder">om</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.Composition.html#X:259"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:260"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:261"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#im:262"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':263"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:264"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#s:261"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:254"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#s':263"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:254"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="li:265" class="idref" href="#li:265"><span class="id" title="binder">li</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> (<a class="idref" href="VLSM.Core.Composition.html#IM:257"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:254"><span class="id" title="variable">i</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#l:260"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:254"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#li:265"><span class="id" title="variable">li</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#input_constrained_transition"><span class="id" title="definition">input_constrained_transition</span></a> (<a class="idref" href="VLSM.Core.Composition.html#IM:257"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:254"><span class="id" title="variable">i</span></a>) <a class="idref" href="VLSM.Core.Composition.html#li:265"><span class="id" title="variable">li</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:261"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:254"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#im:262"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':263"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:254"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:264"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hproto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_weaken_input_valid_transition"><span class="id" title="lemma">preloaded_weaken_input_valid_transition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hproto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">revert</span> <span class="id" title="var">Hproto</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#input_valid_transition_preloaded_project_any"><span class="id" title="lemma">input_valid_transition_preloaded_project_any</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  If a message can be emitted by a composition, then it can be emitted by one of the
  components.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="can_emit_free_composite_project" class="idref" href="#can_emit_free_composite_project"><span class="id" title="lemma">can_emit_free_composite_project</span></a><br/>
&nbsp;&nbsp;{<a id="message:266" class="idref" href="#message:266"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:268" class="idref" href="#EqDecision0:268"><span class="id" title="binder">EqDecision</span></a> <a id="V:267" class="idref" href="#V:267"><span class="id" title="binder"><span id="EqDecision0:268" class="id">V</span></span></a>} {<a id="IM:269" class="idref" href="#IM:269"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Core.Composition.html#V:267"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:266"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;(<a id="X:270" class="idref" href="#X:270"><span class="id" title="binder">X</span></a> := <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:269"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;(<a id="m:271" class="idref" href="#m:271"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.Composition.html#message:266"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hemit:272" class="idref" href="#Hemit:272"><span class="id" title="binder">Hemit</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a> (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_with_all_messages_vlsm"><span class="id" title="definition">preloaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#X:270"><span class="id" title="variable">X</span></a>) <a class="idref" href="VLSM.Core.Composition.html#m:271"><span class="id" title="variable">m</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="j:273" class="idref" href="#j:273"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#V:267"><span class="id" title="variable">V</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a> (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_with_all_messages_vlsm"><span class="id" title="definition">preloaded_with_all_messages_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#IM:269"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:273"><span class="id" title="variable">j</span></a>)) <a class="idref" href="VLSM.Core.Composition.html#m:271"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#can_emit_iff"><span class="id" title="lemma">can_emit_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hemit</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">s2</span> &amp; [<span class="id" title="var">s1</span> <span class="id" title="var">oim</span>] &amp; <span class="id" title="var">l</span> &amp; <span class="id" title="var">Ht</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#can_emit_iff"><span class="id" title="lemma">can_emit_iff</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">s2</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <span class="id" title="var">l</span>)), <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s1</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <span class="id" title="var">l</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">oim</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>, (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> <span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.Composition.html#input_valid_transition_preloaded_project_active_free"><span class="id" title="lemma">input_valid_transition_preloaded_project_active_free</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="can_emit_composite_project" class="idref" href="#can_emit_composite_project"><span class="id" title="lemma">can_emit_composite_project</span></a><br/>
&nbsp;&nbsp;{<a id="message:274" class="idref" href="#message:274"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>} `{<a id="EqDecision0:276" class="idref" href="#EqDecision0:276"><span class="id" title="binder">EqDecision</span></a> <a id="V:275" class="idref" href="#V:275"><span class="id" title="binder"><span id="EqDecision0:276" class="id">V</span></span></a>} {<a id="IM:277" class="idref" href="#IM:277"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Core.Composition.html#V:275"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:274"><span class="id" title="variable">message</span></a>} {<a id="constraint:278" class="idref" href="#constraint:278"><span class="id" title="binder">constraint</span></a>}<br/>
&nbsp;&nbsp;(<a id="X:279" class="idref" href="#X:279"><span class="id" title="binder">X</span></a> := <a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:277"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint:278"><span class="id" title="variable">constraint</span></a>)<br/>
&nbsp;&nbsp;(<a id="m:280" class="idref" href="#m:280"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.Composition.html#message:274"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hemit:281" class="idref" href="#Hemit:281"><span class="id" title="binder">Hemit</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a> (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_with_all_messages_vlsm"><span class="id" title="definition">preloaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#X:279"><span class="id" title="variable">X</span></a>) <a class="idref" href="VLSM.Core.Composition.html#m:280"><span class="id" title="variable">m</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="j:282" class="idref" href="#j:282"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#V:275"><span class="id" title="variable">V</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a> (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_with_all_messages_vlsm"><span class="id" title="definition">preloaded_with_all_messages_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#IM:277"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:282"><span class="id" title="variable">j</span></a>)) <a class="idref" href="VLSM.Core.Composition.html#m:280"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#can_emit_free_composite_project"><span class="id" title="lemma">can_emit_free_composite_project</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#VLSM_incl_can_emit"><span class="id" title="lemma">VLSM_incl_can_emit</span></a>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.ConstrainedVLSM.html#constrained_preloaded_vlsm_incl_preloaded_with_all_messages"><span class="id" title="lemma">constrained_preloaded_vlsm_incl_preloaded_with_all_messages</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab130"></a><h2 class="section">Binary free composition</h2>


<div class="paragraph"> </div>

  This serves an example of how composition can be built, but is also being
  used in defining the <span class="inlinecode"><a class="idref" href="VLSM.Core.ByzantineTraces.html#byzantine_trace_prop"><span class="id" title="definition">byzantine_trace_prop</span></a></span>erties.

<div class="paragraph"> </div>

  This instantiates the regular composition using the <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a></span> type as an <code>index</code>.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_binary_free_composition" class="idref" href="#sec_binary_free_composition"><span class="id" title="section">sec_binary_free_composition</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;{<a id="message:283" class="idref" href="#message:283"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;(<a id="M1:284" class="idref" href="#M1:284"><span class="id" title="binder">M1</span></a> <a id="M2:285" class="idref" href="#M2:285"><span class="id" title="binder">M2</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:283"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="binary_index" class="idref" href="#binary_index"><span class="id" title="definition">binary_index</span></a> : <span class="id" title="keyword">Set</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="first" class="idref" href="#first"><span class="id" title="definition">first</span></a> : <a class="idref" href="VLSM.Core.Composition.html#binary_index"><span class="id" title="definition">binary_index</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="second" class="idref" href="#second"><span class="id" title="definition">second</span></a> : <a class="idref" href="VLSM.Core.Composition.html#binary_index"><span class="id" title="definition">binary_index</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="binary_index_dec" class="idref" href="#binary_index_dec"><span class="id" title="instance">binary_index_dec</span></a> :  <span class="id" title="abbreviation">EqDecision</span> <a class="idref" href="VLSM.Core.Composition.html#binary_index"><span class="id" title="definition">binary_index</span></a> := <span class="id" title="var">_</span>.<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="binary_index_inhabited" class="idref" href="#binary_index_inhabited"><span class="id" title="instance">binary_index_inhabited</span></a> : <span class="id" title="class">Inhabited</span> <a class="idref" href="VLSM.Core.Composition.html#binary_index"><span class="id" title="definition">binary_index</span></a> := <span class="id" title="constructor">populate</span> <a class="idref" href="VLSM.Core.Composition.html#first"><span class="id" title="definition">first</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="binary_IM" class="idref" href="#binary_IM"><span class="id" title="definition">binary_IM</span></a><br/>
&nbsp;&nbsp;(<a id="i:286" class="idref" href="#i:286"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#binary_index"><span class="id" title="definition">binary_index</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_binary_free_composition.message"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Core.Composition.html#i:286"><span class="id" title="variable">i</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> =&gt; <a class="idref" href="VLSM.Core.Composition.html#sec_binary_free_composition.M1"><span class="id" title="variable">M1</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> =&gt; <a class="idref" href="VLSM.Core.Composition.html#sec_binary_free_composition.M2"><span class="id" title="variable">M2</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="binary_free_composition" class="idref" href="#binary_free_composition"><span class="id" title="definition">binary_free_composition</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_binary_free_composition.message"><span class="id" title="variable">message</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#binary_IM"><span class="id" title="definition">binary_IM</span></a> (<a class="idref" href="VLSM.Core.Composition.html#free_constraint"><span class="id" title="definition">free_constraint</span></a> <a class="idref" href="VLSM.Core.Composition.html#binary_IM"><span class="id" title="definition">binary_IM</span></a>).<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.Composition.html#sec_binary_free_composition"><span class="id" title="section">sec_binary_free_composition</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab131"></a><h2 class="section">Composite decidable initial message</h2>


<div class="paragraph"> </div>

  Here we show that if the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a></span>erty is decidable for every
  component, then it is decidable for a finite composition as well.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_composite_decidable_initial_message" class="idref" href="#sec_composite_decidable_initial_message"><span class="id" title="section">sec_composite_decidable_initial_message</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;{<a id="message:288" class="idref" href="#message:288"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;`{<a id="H:291" class="idref" href="#H:291"><span class="id" title="binder">finite.Finite</span></a> <a id="index:289" class="idref" href="#index:289"><span class="id" title="binder"><span id="H:291" class="id">index</span></span></a>}<br/>
&nbsp;&nbsp;(<a id="IM:292" class="idref" href="#IM:292"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Core.Composition.html#index:289"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:288"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="constraint:293" class="idref" href="#constraint:293"><span class="id" title="binder">constraint</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:292"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:292"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:288"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_decidable_initial_message" class="idref" href="#composite_decidable_initial_message"><span class="id" title="lemma">composite_decidable_initial_message</span></a><br/>
&nbsp;&nbsp;(<a id="Hdec_init:295" class="idref" href="#Hdec_init:295"><span class="id" title="binder">Hdec_init</span></a> : <span class="id" title="notation">forall</span> <a id="i:294" class="idref" href="#i:294"><span class="id" title="binder">i</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#decidable_initial_messages_prop"><span class="id" title="definition">decidable_initial_messages_prop</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_composite_decidable_initial_message.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:294"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#decidable_initial_messages_prop"><span class="id" title="definition">decidable_initial_messages_prop</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_decidable_initial_message.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_decidable_initial_message.constraint"><span class="id" title="variable">constraint</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">m</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#composite_initial_message_prop"><span class="id" title="definition">composite_initial_message_prop</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Lib.Preamble.html#Decision_iff"><span class="id" title="lemma">Decision_iff</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">P</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Exists"><span class="id" title="inductive">List.Exists</span></a> (<span class="id" title="keyword">fun</span> <a id="i:296" class="idref" href="#i:296"><span class="id" title="binder"><span id="i:297" class="id">i</span></span></a> =&gt; <a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_composite_decidable_initial_message.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:296"><span class="id" title="variable">i</span></a>) <span class="id" title="var">m</span>) (<span class="id" title="method">enum</span> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_decidable_initial_message.index"><span class="id" title="variable">index</span></a>))).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">Exists_finite</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> [<span class="id" title="var">i</span> <span class="id" title="var">Hm</span>]; <span class="id" title="tactic">exists</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hm</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hm</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">im</span> <span class="id" title="var">Hinit</span>] [= -&gt;]].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> @<span class="id" title="instance">Exists_dec</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hdec_init</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_decidable_initial_message"><span class="id" title="section">sec_composite_decidable_initial_message</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab132"></a><h2 class="section">Composite plan properties</h2>


<div class="paragraph"> </div>

  The following results concern facts about applying a <span class="inlinecode"><a class="idref" href="VLSM.Core.Plans.html#plan"><span class="id" title="definition">plan</span></a></span> <span class="inlinecode"><span class="id" title="var">Free</span></span> <code>P</code>
  to a <span class="inlinecode"><a class="idref" href="VLSM.Examples.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a></span> <span class="inlinecode"><span class="id" title="var">Free</span></span> <code>s'</code>, knowing its effects on a different <span class="inlinecode"><a class="idref" href="VLSM.Examples.ELMO.BaseELMO.html#state"><span class="id" title="projection">state</span></a></span> <span class="inlinecode"><span class="id" title="var">Free</span></span> <code>s</code>
  which shares some relevant features with <code>s'</code>.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_composite_plan_properties" class="idref" href="#sec_composite_plan_properties"><span class="id" title="section">sec_composite_plan_properties</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;{<a id="message:298" class="idref" href="#message:298"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;{<a id="index:299" class="idref" href="#index:299"><span class="id" title="binder">index</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;`{<a id="EqDecision0:300" class="idref" href="#EqDecision0:300"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:300" class="idref" href="#EqDecision0:300"><span class="id" title="binder">index</span></a>}<br/>
&nbsp;&nbsp;(<a id="IM:301" class="idref" href="#IM:301"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Core.Composition.html#index:299"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:298"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Free:302" class="idref" href="#Free:302"><span class="id" title="binder">Free</span></a> := <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:301"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="comment">(*&nbsp;A&nbsp;transition&nbsp;on&nbsp;component&nbsp;&lt;&lt;i&gt;&gt;&nbsp;is&nbsp;<span class="inlinecode"><span class="id" title="var">input_valid</span></span>&nbsp;from&nbsp;&lt;&lt;s'&gt;&gt;&nbsp;if&nbsp;it&nbsp;is<br/>
&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">input_valid</span></span>&nbsp;from&nbsp;&lt;&lt;s&gt;&gt;&nbsp;and&nbsp;their&nbsp;&lt;&lt;i&gt;&gt;'th&nbsp;components&nbsp;are&nbsp;equal.&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="relevant_component_transition_free" class="idref" href="#relevant_component_transition_free"><span class="id" title="lemma">relevant_component_transition_free</span></a><br/>
&nbsp;&nbsp;(<a id="s:303" class="idref" href="#s:303"><span class="id" title="binder">s</span></a> <a id="s':304" class="idref" href="#s':304"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.Free"><span class="id" title="variable">Free</span></a>)<br/>
&nbsp;&nbsp;(<a id="l:305" class="idref" href="#l:305"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.Free"><span class="id" title="variable">Free</span></a>)<br/>
&nbsp;&nbsp;(<a id="input:306" class="idref" href="#input:306"><span class="id" title="binder">input</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="i:307" class="idref" href="#i:307"><span class="id" title="binder">i</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:305"><span class="id" title="variable">l</span></a>)<br/>
&nbsp;&nbsp;(<a id="Heq:308" class="idref" href="#Heq:308"><span class="id" title="binder">Heq</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:303"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:307"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':304"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:307"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hprs:309" class="idref" href="#Hprs:309"><span class="id" title="binder">Hprs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#s':304"><span class="id" title="variable">s'</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hiv:310" class="idref" href="#Hiv:310"><span class="id" title="binder">Hiv</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid"><span class="id" title="definition">input_valid</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:305"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:303"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#input:306"><span class="id" title="variable">input</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid"><span class="id" title="definition">input_valid</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:305"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':304"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#input:306"><span class="id" title="variable">input</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">split_and</span>!; [<span class="id" title="var">done</span> | <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hiv</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hiv</span> |- *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">i</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">itauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;The&nbsp;effect&nbsp;of&nbsp;the&nbsp;transition&nbsp;is&nbsp;also&nbsp;the&nbsp;same.&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="relevant_component_transition2_free" class="idref" href="#relevant_component_transition2_free"><span class="id" title="lemma">relevant_component_transition2_free</span></a><br/>
&nbsp;&nbsp;(<a id="s:311" class="idref" href="#s:311"><span class="id" title="binder">s</span></a> <a id="s':312" class="idref" href="#s':312"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.Free"><span class="id" title="variable">Free</span></a>)<br/>
&nbsp;&nbsp;(<a id="l:313" class="idref" href="#l:313"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.Free"><span class="id" title="variable">Free</span></a>)<br/>
&nbsp;&nbsp;(<a id="input:314" class="idref" href="#input:314"><span class="id" title="binder">input</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="i:315" class="idref" href="#i:315"><span class="id" title="binder">i</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:313"><span class="id" title="variable">l</span></a>)<br/>
&nbsp;&nbsp;(<a id="Heq:316" class="idref" href="#Heq:316"><span class="id" title="binder">Heq</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:311"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:315"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':312"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:315"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hprs:317" class="idref" href="#Hprs:317"><span class="id" title="binder">Hprs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#s':312"><span class="id" title="variable">s'</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="dest:318" class="idref" href="#dest:318"><span class="id" title="binder">dest</span></a>, <a id="output:319" class="idref" href="#output:319"><span class="id" title="binder">output</span></a>) := <a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:313"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:311"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#input:314"><span class="id" title="variable">input</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="dest':320" class="idref" href="#dest':320"><span class="id" title="binder">dest'</span></a>, <a id="output':321" class="idref" href="#output':321"><span class="id" title="binder">output'</span></a>) := <a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:313"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':312"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#input:314"><span class="id" title="variable">input</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#output:319"><span class="id" title="variable">output</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#output':321"><span class="id" title="variable">output'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#dest:318"><span class="id" title="variable">dest</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:315"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#dest':320"><span class="id" title="variable">dest'</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:315"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x</span> <span class="id" title="var">l</span>]; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">i</span> |- *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">i</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">x</span>) <span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s'</span> <span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">input</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">state_update_simpl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="relevant_components_one_free" class="idref" href="#relevant_components_one_free"><span class="id" title="lemma">relevant_components_one_free</span></a><br/>
&nbsp;&nbsp;(<a id="s:322" class="idref" href="#s:322"><span class="id" title="binder">s</span></a> <a id="s':323" class="idref" href="#s':323"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.Free"><span class="id" title="variable">Free</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hprs':324" class="idref" href="#Hprs':324"><span class="id" title="binder">Hprs'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#s':323"><span class="id" title="variable">s'</span></a>)<br/>
&nbsp;&nbsp;(<a id="ai:325" class="idref" href="#ai:325"><span class="id" title="binder">ai</span></a> : <a class="idref" href="VLSM.Core.Plans.html#plan_item"><span class="id" title="record">plan_item</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.Free"><span class="id" title="variable">Free</span></a>)<br/>
&nbsp;&nbsp;(<a id="i:326" class="idref" href="#i:326"><span class="id" title="binder">i</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> (<a class="idref" href="VLSM.Core.Plans.html#label_a"><span class="id" title="projection">label_a</span></a> <a class="idref" href="VLSM.Core.Composition.html#ai:325"><span class="id" title="variable">ai</span></a>))<br/>
&nbsp;&nbsp;(<a id="Heq:327" class="idref" href="#Heq:327"><span class="id" title="binder">Heq</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:322"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:326"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':323"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:326"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hpr:328" class="idref" href="#Hpr:328"><span class="id" title="binder">Hpr</span></a> : <a class="idref" href="VLSM.Core.Plans.html#finite_valid_plan_from"><span class="id" title="definition">finite_valid_plan_from</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:322"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.Composition.html#ai:325"><span class="id" title="variable">ai</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="res':329" class="idref" href="#res':329"><span class="id" title="binder">res'</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="VLSM.Core.Plans.html#apply_plan"><span class="id" title="definition">apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#s':323"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.Composition.html#ai:325"><span class="id" title="variable">ai</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="res:330" class="idref" href="#res:330"><span class="id" title="binder">res</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="VLSM.Core.Plans.html#apply_plan"><span class="id" title="definition">apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:322"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.Composition.html#ai:325"><span class="id" title="variable">ai</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Plans.html#finite_valid_plan_from"><span class="id" title="definition">finite_valid_plan_from</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#s':323"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.Composition.html#ai:325"><span class="id" title="variable">ai</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#res':329"><span class="id" title="variable">res'</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:326"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#res:330"><span class="id" title="variable">res</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:326"><span class="id" title="variable">i</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Plans.html#finite_valid_plan_from"><span class="id" title="definition">finite_valid_plan_from</span></a>, <a class="idref" href="VLSM.Core.Plans.html#apply_plan"><span class="id" title="definition">apply_plan</span></a>, <a class="idref" href="VLSM.Core.Plans.html#_apply_plan"><span class="id" title="definition">_apply_plan</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">ai</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;|- <span class="id" title="keyword">context</span> [<span class="id" title="keyword">let</span> (<span class="id" title="var">_</span>, <span class="id" title="var">_</span>) := <span class="id" title="keyword">let</span> (<span class="id" title="var">_</span>, <span class="id" title="var">_</span>) := ?<span class="id" title="var">t</span> <span class="id" title="tactic">in</span> <span class="id" title="var">_</span> <span class="id" title="tactic">in</span> <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span> <span class="id" title="var">eqn</span>: <span class="id" title="var">eq_trans'</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;|- <span class="id" title="keyword">context</span> [<span class="id" title="keyword">let</span> (<span class="id" title="var">_</span>, <span class="id" title="var">_</span>) := <span class="id" title="keyword">let</span> (<span class="id" title="var">_</span>, <span class="id" title="var">_</span>) := ?<span class="id" title="var">t</span> <span class="id" title="tactic">in</span> <span class="id" title="var">_</span> <span class="id" title="tactic">in</span> <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span> <span class="id" title="var">eqn</span>: <span class="id" title="var">eq_trans</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hpr</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">Ht'</span> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <span class="id" title="var">label_a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">input_a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">c</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">o</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hpr_valid</span> <span class="id" title="var">Htrans</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#relevant_component_transition_free"><span class="id" title="lemma">relevant_component_transition_free</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">s'</span> := <span class="id" title="var">s'</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hpr_valid</span>; <span class="id" title="var">itauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_extend"><span class="id" title="constructor">finite_valid_trace_from_extend</span></a>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_empty"><span class="id" title="constructor">finite_valid_trace_from_empty</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_destination"><span class="id" title="lemma">input_valid_transition_destination</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.Composition.html#relevant_component_transition2_free"><span class="id" title="lemma">relevant_component_transition2_free</span></a> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> <span class="id" title="var">label_a</span> <span class="id" title="var">input_a</span> <span class="id" title="var">Heq</span> <span class="id" title="var">Hprs'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hrel</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">case_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">i</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">itauto</span> <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Transitioning on some index different from <code>i</code> does not affect
  component <code>i</code>.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="irrelevant_components_one" class="idref" href="#irrelevant_components_one"><span class="id" title="lemma">irrelevant_components_one</span></a><br/>
&nbsp;&nbsp;(<a id="s:331" class="idref" href="#s:331"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.IM"><span class="id" title="variable">IM</span></a>))<br/>
&nbsp;&nbsp;(<a id="ai:332" class="idref" href="#ai:332"><span class="id" title="binder">ai</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_plan_item"><span class="id" title="definition">composite_plan_item</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;(<a id="i:333" class="idref" href="#i:333"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hdif:334" class="idref" href="#Hdif:334"><span class="id" title="binder">Hdif</span></a> : <a class="idref" href="VLSM.Core.Composition.html#i:333"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> (<a class="idref" href="VLSM.Core.Plans.html#label_a"><span class="id" title="projection">label_a</span></a> <a class="idref" href="VLSM.Core.Composition.html#ai:332"><span class="id" title="variable">ai</span></a>)) :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="res:335" class="idref" href="#res:335"><span class="id" title="binder">res</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_apply_plan"><span class="id" title="definition">composite_apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:331"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.Composition.html#ai:332"><span class="id" title="variable">ai</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#res:335"><span class="id" title="variable">res</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:333"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:331"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:333"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#composite_apply_plan"><span class="id" title="definition">composite_apply_plan</span></a>, <a class="idref" href="VLSM.Core.Plans.html#apply_plan"><span class="id" title="definition">apply_plan</span></a>, <a class="idref" href="VLSM.Core.Plans.html#_apply_plan"><span class="id" title="definition">_apply_plan</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">case_match</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">state_update_simpl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Same as <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#irrelevant_components_one"><span class="id" title="lemma">irrelevant_components_one</span></a></span>, but for
  multiple transitions.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="irrelevant_components" class="idref" href="#irrelevant_components"><span class="id" title="lemma">irrelevant_components</span></a><br/>
&nbsp;&nbsp;(<a id="s:336" class="idref" href="#s:336"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.IM"><span class="id" title="variable">IM</span></a>))<br/>
&nbsp;&nbsp;(<a id="a:337" class="idref" href="#a:337"><span class="id" title="binder">a</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_plan"><span class="id" title="definition">composite_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;(<a id="a_indices:338" class="idref" href="#a_indices:338"><span class="id" title="binder">a_indices</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> (@<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> (@<a class="idref" href="VLSM.Core.Plans.html#label_a"><span class="id" title="projection">label_a</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <a class="idref" href="VLSM.Core.Composition.html#a:337"><span class="id" title="variable">a</span></a>))<br/>
&nbsp;&nbsp;(<a id="i:339" class="idref" href="#i:339"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hdif:340" class="idref" href="#Hdif:340"><span class="id" title="binder">Hdif</span></a> : <a class="idref" href="VLSM.Core.Composition.html#i:339"><span class="id" title="variable">i</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="VLSM.Core.Composition.html#a_indices:338"><span class="id" title="variable">a_indices</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="res:341" class="idref" href="#res:341"><span class="id" title="binder">res</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_apply_plan"><span class="id" title="definition">composite_apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:336"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#a:337"><span class="id" title="variable">a</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#res:341"><span class="id" title="variable">res</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:339"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:336"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:339"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">a</span> <span class="id" title="keyword">using</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#rev_ind"><span class="id" title="lemma">rev_ind</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">simpl</span>; <span class="id" title="var">itauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="VLSM.Core.Composition.html#composite_apply_plan_app"><span class="id" title="definition">composite_apply_plan_app</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.IM"><span class="id" title="variable">IM</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.Composition.html#composite_apply_plan"><span class="id" title="definition">composite_apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">s</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">tra</span>, <span class="id" title="var">sa</span>) <span class="id" title="var">eqn</span>: <span class="id" title="var">eq_a</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.Composition.html#composite_apply_plan"><span class="id" title="definition">composite_apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">sa</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <span class="id" title="keyword">as</span> (<span class="id" title="var">trx</span>, <span class="id" title="var">sx</span>) <span class="id" title="var">eqn</span>: <span class="id" title="var">eq_x</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">a_indices</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdif</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdif</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdif</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">IHa</span>. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradict</span> <span class="id" title="var">Hdif</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_app</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHa</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">sx</span> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_apply_plan"><span class="id" title="definition">composite_apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">sa</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">rewrite</span> <span class="id" title="var">eq_x</span>; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#irrelevant_components_one"><span class="id" title="lemma">irrelevant_components_one</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">contra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">contra</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdif</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_app</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdif</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdif</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradict</span> <span class="id" title="var">Hdif</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">right</span>; <span class="id" title="tactic">left</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Same&nbsp;as&nbsp;relevant_components_one&nbsp;but&nbsp;for&nbsp;multiple&nbsp;transitions.&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="relevant_components_free" class="idref" href="#relevant_components_free"><span class="id" title="lemma">relevant_components_free</span></a><br/>
&nbsp;&nbsp;(<a id="s:342" class="idref" href="#s:342"><span class="id" title="binder">s</span></a> <a id="s':343" class="idref" href="#s':343"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.Free"><span class="id" title="variable">Free</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hprs':344" class="idref" href="#Hprs':344"><span class="id" title="binder">Hprs'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#s':343"><span class="id" title="variable">s'</span></a>)<br/>
&nbsp;&nbsp;(<a id="a:345" class="idref" href="#a:345"><span class="id" title="binder">a</span></a> : <a class="idref" href="VLSM.Core.Plans.html#plan"><span class="id" title="definition">plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.Free"><span class="id" title="variable">Free</span></a>)<br/>
&nbsp;&nbsp;(<a id="a_indices:346" class="idref" href="#a_indices:346"><span class="id" title="binder">a_indices</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> (@<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> (@<a class="idref" href="VLSM.Core.Plans.html#label_a"><span class="id" title="projection">label_a</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <a class="idref" href="VLSM.Core.Composition.html#a:345"><span class="id" title="variable">a</span></a>))<br/>
&nbsp;&nbsp;(<a id="li:347" class="idref" href="#li:347"><span class="id" title="binder">li</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;(<a id="Heq:349" class="idref" href="#Heq:349"><span class="id" title="binder">Heq</span></a> : <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:348" class="idref" href="#i:348"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.Composition.html#i:348"><span class="id" title="variable">i</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.Composition.html#li:347"><span class="id" title="variable">li</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':343"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:348"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:342"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:348"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hincl:350" class="idref" href="#Hincl:350"><span class="id" title="binder">Hincl</span></a> : <a class="idref" href="VLSM.Core.Composition.html#a_indices:346"><span class="id" title="variable">a_indices</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="VLSM.Core.Composition.html#li:347"><span class="id" title="variable">li</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hpr:351" class="idref" href="#Hpr:351"><span class="id" title="binder">Hpr</span></a> : <a class="idref" href="VLSM.Core.Plans.html#finite_valid_plan_from"><span class="id" title="definition">finite_valid_plan_from</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:342"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#a:345"><span class="id" title="variable">a</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="res':352" class="idref" href="#res':352"><span class="id" title="binder">res'</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="VLSM.Core.Plans.html#apply_plan"><span class="id" title="definition">apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#s':343"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.Composition.html#a:345"><span class="id" title="variable">a</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="res:353" class="idref" href="#res:353"><span class="id" title="binder">res</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="VLSM.Core.Plans.html#apply_plan"><span class="id" title="definition">apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:342"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#a:345"><span class="id" title="variable">a</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Plans.html#finite_valid_plan_from"><span class="id" title="definition">finite_valid_plan_from</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#s':343"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.Composition.html#a:345"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:354" class="idref" href="#i:354"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.Composition.html#i:354"><span class="id" title="variable">i</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.Composition.html#li:347"><span class="id" title="variable">li</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#res':352"><span class="id" title="variable">res'</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:354"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#res:353"><span class="id" title="variable">res</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:354"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">a</span> <span class="id" title="keyword">using</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#rev_ind"><span class="id" title="lemma">rev_ind</span></a>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">constructor</span> |] |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Plans.html#finite_valid_plan_from_app_iff"><span class="id" title="lemma">finite_valid_plan_from_app_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hrem</span> <span class="id" title="var">Hsingle</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">IHa</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> (@<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <a id="n:355" class="idref" href="#n:355"><span class="id" title="binder"><span id="n:356" class="id">n</span></span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.index"><span class="id" title="variable">index</span></a> =&gt; <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#n:355"><span class="id" title="variable">n</span></a>))) (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="VLSM.Core.Plans.html#label_a"><span class="id" title="projection">label_a</span></a> <span class="id" title="var">a</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">small</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> <span class="id" title="var">a_indices</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">a_indices</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">e</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>, <span class="id" title="lemma">elem_of_app</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">itauto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">IHa</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHa</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">IHapr</span> <span class="id" title="var">IHaind</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.Composition.html#relevant_components_one_free"><span class="id" title="lemma">relevant_components_one_free</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="VLSM.Core.Plans.html#apply_plan"><span class="id" title="definition">apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <span class="id" title="var">s</span> <span class="id" title="var">a</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="VLSM.Core.Plans.html#apply_plan"><span class="id" title="definition">apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <span class="id" title="var">s'</span> <span class="id" title="var">a</span>))) <span class="id" title="keyword">as</span> <span class="id" title="var">Hrel</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">Hrel</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Plans.html#apply_plan_last_valid"><span class="id" title="lemma">apply_plan_last_valid</span></a>; <span class="id" title="var">itauto</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hrel</span> <span class="id" title="var">x</span>); <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">Hrel</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHaind</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> (<a class="idref" href="VLSM.Core.Plans.html#label_a"><span class="id" title="projection">label_a</span></a> <span class="id" title="var">x</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHaind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hincl</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> (<a class="idref" href="VLSM.Core.Plans.html#label_a"><span class="id" title="projection">label_a</span></a> <span class="id" title="var">x</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hincl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">a_indices</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>, <span class="id" title="lemma">elem_of_app</span>; <span class="id" title="tactic">right</span>; <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hrel</span> <span class="id" title="var">Hsingle</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrel</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hrelpr</span> <span class="id" title="var">Hrelind</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Plans.html#finite_valid_plan_from_app_iff"><span class="id" title="lemma">finite_valid_plan_from_app_iff</span></a>; <span class="id" title="tactic">split</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">Hi</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="VLSM.Core.Plans.html#apply_plan_app"><span class="id" title="definition">apply_plan_app</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.Plans.html#apply_plan"><span class="id" title="definition">apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <span class="id" title="var">s'</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">tra'</span> <span class="id" title="var">sa'</span>] <span class="id" title="var">eqn</span>: <span class="id" title="var">eq_as'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.Plans.html#apply_plan"><span class="id" title="definition">apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <span class="id" title="var">s</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">tra</span> <span class="id" title="var">sa</span>] <span class="id" title="var">eqn</span>: <span class="id" title="var">eq_as</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.Plans.html#apply_plan"><span class="id" title="definition">apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <span class="id" title="var">sa</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">trx</span> <span class="id" title="var">sx</span>] <span class="id" title="var">eqn</span>: <span class="id" title="var">eq_xsa</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.Plans.html#apply_plan"><span class="id" title="definition">apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <span class="id" title="var">sa'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">trx'</span> <span class="id" title="var">sx'</span>] <span class="id" title="var">eqn</span>: <span class="id" title="var">eq_xsa'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> (<a class="idref" href="VLSM.Core.Plans.html#label_a"><span class="id" title="projection">label_a</span></a> <span class="id" title="var">x</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>)); [<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">e</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f_equal"><span class="id" title="lemma">f_equal</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">eq_xsa</span>, <span class="id" title="var">eq_xsa'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">sx'</span> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_apply_plan"><span class="id" title="definition">composite_apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">sa'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">sx</span> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_apply_plan"><span class="id" title="definition">composite_apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">sa</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.Composition.html#irrelevant_components_one"><span class="id" title="lemma">irrelevant_components_one</span></a> <span class="id" title="var">sa</span> <span class="id" title="var">x</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hdiff</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.Composition.html#irrelevant_components_one"><span class="id" title="lemma">irrelevant_components_one</span></a> <span class="id" title="var">sa'</span> <span class="id" title="var">x</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hdiff0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">Hdiff</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">Hdiff0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHaind</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_plan_properties"><span class="id" title="section">sec_composite_plan_properties</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab133"></a><h2 class="section">Properties of the empty composition</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_empty_composition_properties" class="idref" href="#sec_empty_composition_properties"><span class="id" title="section">sec_empty_composition_properties</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;{<a id="message:357" class="idref" href="#message:357"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;`{<a id="H:360" class="idref" href="#H:360"><span class="id" title="binder">finite.Finite</span></a> <a id="index:358" class="idref" href="#index:358"><span class="id" title="binder"><span id="H:360" class="id">index</span></span></a>}<br/>
&nbsp;&nbsp;(<a id="IM:361" class="idref" href="#IM:361"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Core.Composition.html#index:358"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:357"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="constraint:362" class="idref" href="#constraint:362"><span class="id" title="binder">constraint</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:361"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:361"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:357"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="X:363" class="idref" href="#X:363"><span class="id" title="binder">X</span></a> := <a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:361"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint:362"><span class="id" title="variable">constraint</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hempty_index:364" class="idref" href="#Hempty_index:364"><span class="id" title="binder">Hempty_index</span></a> : <span class="id" title="method">enum</span> <a class="idref" href="VLSM.Core.Composition.html#index:358"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="empty_composition_no_index" class="idref" href="#empty_composition_no_index"><span class="id" title="lemma">empty_composition_no_index</span></a><br/>
&nbsp;&nbsp;(<a id="i:365" class="idref" href="#i:365"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_empty_composition_properties.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="notation">False</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">specialize</span> (<span class="id" title="method">elem_of_enum</span> <span class="id" title="var">i</span>); <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#sec_empty_composition_properties.Hempty_index"><span class="id" title="variable">Hempty_index</span></a>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_nil</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="empty_composition_single_state" class="idref" href="#empty_composition_single_state"><span class="id" title="lemma">empty_composition_single_state</span></a><br/>
&nbsp;&nbsp;(<a id="s:366" class="idref" href="#s:366"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_empty_composition_properties.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Composition.html#s:366"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_s0"><span class="id" title="definition">composite_s0</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_empty_composition_properties.IM"><span class="id" title="variable">IM</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">extensionality</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">elim</span> (<a class="idref" href="VLSM.Core.Composition.html#empty_composition_no_index"><span class="id" title="lemma">empty_composition_no_index</span></a> <span class="id" title="var">i</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="empty_composition_no_label" class="idref" href="#empty_composition_no_label"><span class="id" title="lemma">empty_composition_no_label</span></a><br/>
&nbsp;&nbsp;(<a id="l:367" class="idref" href="#l:367"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_empty_composition_properties.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="notation">False</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">i</span> <span class="id" title="var">_</span>]; <span class="id" title="tactic">elim</span> (<a class="idref" href="VLSM.Core.Composition.html#empty_composition_no_index"><span class="id" title="lemma">empty_composition_no_index</span></a> <span class="id" title="var">i</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="empty_composition_no_initial_message" class="idref" href="#empty_composition_no_initial_message"><span class="id" title="lemma">empty_composition_no_initial_message</span></a><br/>
&nbsp;&nbsp;: <span class="id" title="notation">forall</span> <a id="m:368" class="idref" href="#m:368"><span class="id" title="binder">m</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_initial_message_prop"><span class="id" title="definition">composite_initial_message_prop</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_empty_composition_properties.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#m:368"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">m</span> [<span class="id" title="var">i</span> <span class="id" title="var">_</span>]; <span class="id" title="tactic">elim</span> (<a class="idref" href="VLSM.Core.Composition.html#empty_composition_no_index"><span class="id" title="lemma">empty_composition_no_index</span></a> <span class="id" title="var">i</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="empty_composition_no_emit" class="idref" href="#empty_composition_no_emit"><span class="id" title="lemma">empty_composition_no_emit</span></a><br/>
&nbsp;&nbsp;: <span class="id" title="notation">forall</span> <a id="m:369" class="idref" href="#m:369"><span class="id" title="binder">m</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_empty_composition_properties.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.Composition.html#m:369"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">m</span> [<span class="id" title="var">s'</span> [<span class="id" title="var">l</span> <span class="id" title="var">_</span>]]; <span class="id" title="tactic">elim</span> (<a class="idref" href="VLSM.Core.Composition.html#empty_composition_no_label"><span class="id" title="lemma">empty_composition_no_label</span></a> <span class="id" title="var">l</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="empty_composition_no_valid_message" class="idref" href="#empty_composition_no_valid_message"><span class="id" title="lemma">empty_composition_no_valid_message</span></a><br/>
&nbsp;&nbsp;: <span class="id" title="notation">forall</span> <a id="m:370" class="idref" href="#m:370"><span class="id" title="binder">m</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_empty_composition_properties.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.Composition.html#m:370"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">m</span> <span class="id" title="var">Hm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#emitted_messages_are_valid_iff"><span class="id" title="lemma">emitted_messages_are_valid_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hinit</span> | <span class="id" title="var">Hemit</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">elim</span> (<a class="idref" href="VLSM.Core.Composition.html#empty_composition_no_initial_message"><span class="id" title="lemma">empty_composition_no_initial_message</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hinit</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">elim</span> (<a class="idref" href="VLSM.Core.Composition.html#empty_composition_no_emit"><span class="id" title="lemma">empty_composition_no_emit</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hemit</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="preloaded_empty_composition_no_emit" class="idref" href="#preloaded_empty_composition_no_emit"><span class="id" title="lemma">preloaded_empty_composition_no_emit</span></a><br/>
&nbsp;&nbsp;(<a id="seed:371" class="idref" href="#seed:371"><span class="id" title="binder">seed</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_empty_composition_properties.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="PreX:372" class="idref" href="#PreX:372"><span class="id" title="binder">PreX</span></a> := <a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_vlsm"><span class="id" title="definition">preloaded_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_empty_composition_properties.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.Composition.html#seed:371"><span class="id" title="variable">seed</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="notation">forall</span> <a id="m:373" class="idref" href="#m:373"><span class="id" title="binder">m</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a> <a class="idref" href="VLSM.Core.Composition.html#PreX:372"><span class="id" title="variable">PreX</span></a> <a class="idref" href="VLSM.Core.Composition.html#m:373"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">m</span> [<span class="id" title="var">s'</span> [<span class="id" title="var">l</span> <span class="id" title="var">_</span>]]; <span class="id" title="tactic">elim</span> (<a class="idref" href="VLSM.Core.Composition.html#empty_composition_no_label"><span class="id" title="lemma">empty_composition_no_label</span></a> <span class="id" title="var">l</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="preloaded_empty_free_composition_no_emit" class="idref" href="#preloaded_empty_free_composition_no_emit"><span class="id" title="lemma">preloaded_empty_free_composition_no_emit</span></a><br/>
&nbsp;&nbsp;(<a id="seed:374" class="idref" href="#seed:374"><span class="id" title="binder">seed</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_empty_composition_properties.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="PreX:375" class="idref" href="#PreX:375"><span class="id" title="binder">PreX</span></a> := <a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_vlsm"><span class="id" title="definition">preloaded_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_empty_composition_properties.IM"><span class="id" title="variable">IM</span></a>) <a class="idref" href="VLSM.Core.Composition.html#seed:374"><span class="id" title="variable">seed</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="notation">forall</span> <a id="m:376" class="idref" href="#m:376"><span class="id" title="binder">m</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a> <a class="idref" href="VLSM.Core.Composition.html#PreX:375"><span class="id" title="variable">PreX</span></a> <a class="idref" href="VLSM.Core.Composition.html#m:376"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">m</span> [<span class="id" title="var">s'</span> [<span class="id" title="var">l</span> <span class="id" title="var">_</span>]]; <span class="id" title="tactic">elim</span> (<a class="idref" href="VLSM.Core.Composition.html#empty_composition_no_label"><span class="id" title="lemma">empty_composition_no_label</span></a> <span class="id" title="var">l</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="preloaded_with_all_empty_composition_no_emit" class="idref" href="#preloaded_with_all_empty_composition_no_emit"><span class="id" title="lemma">preloaded_with_all_empty_composition_no_emit</span></a><br/>
&nbsp;&nbsp;: <span class="id" title="notation">forall</span> <a id="m:377" class="idref" href="#m:377"><span class="id" title="binder">m</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a> (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_with_all_messages_vlsm"><span class="id" title="definition">preloaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_empty_composition_properties.X"><span class="id" title="variable">X</span></a>) <a class="idref" href="VLSM.Core.Composition.html#m:377"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">m</span> [<span class="id" title="var">s'</span> [<span class="id" title="var">l</span> <span class="id" title="var">_</span>]]; <span class="id" title="tactic">elim</span> (<a class="idref" href="VLSM.Core.Composition.html#empty_composition_no_label"><span class="id" title="lemma">empty_composition_no_label</span></a> <span class="id" title="var">l</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.Composition.html#sec_empty_composition_properties"><span class="id" title="section">sec_empty_composition_properties</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab134"></a><h2 class="section">Properties of extensionally-equal indexed compositions</h2>


<div class="paragraph"> </div>

  If two indexed sets of VLSMs are extensionally-equal, then we can establish a
  <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSMProjections.VLSMEmbedding.html#VLSM_embedding"><span class="id" title="record">VLSM_embedding</span></a></span> between their compositions with subsumable constraints
  (and preloaded with the same set of messages).

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_same_IM_embedding" class="idref" href="#sec_same_IM_embedding"><span class="id" title="section">sec_same_IM_embedding</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;{<a id="message:378" class="idref" href="#message:378"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;`{<a id="EqDecision0:380" class="idref" href="#EqDecision0:380"><span class="id" title="binder">EqDecision</span></a> <a id="index:379" class="idref" href="#index:379"><span class="id" title="binder"><span id="EqDecision0:380" class="id">index</span></span></a>}<br/>
&nbsp;&nbsp;(<a id="IM1:381" class="idref" href="#IM1:381"><span class="id" title="binder">IM1</span></a> <a id="IM2:382" class="idref" href="#IM2:382"><span class="id" title="binder">IM2</span></a> : <a class="idref" href="VLSM.Core.Composition.html#index:379"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:378"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Heq:384" class="idref" href="#Heq:384"><span class="id" title="binder">Heq</span></a> : <span class="id" title="notation">forall</span> <a id="i:383" class="idref" href="#i:383"><span class="id" title="binder">i</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.Composition.html#IM1:381"><span class="id" title="variable">IM1</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:383"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM2:382"><span class="id" title="variable">IM2</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:383"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="same_IM_label_rew" class="idref" href="#same_IM_label_rew"><span class="id" title="definition">same_IM_label_rew</span></a><br/>
&nbsp;&nbsp;(<a id="l1:385" class="idref" href="#l1:385"><span class="id" title="binder">l1</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_embedding.IM1"><span class="id" title="variable">IM1</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_embedding.IM2"><span class="id" title="variable">IM2</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l1:385"><span class="id" title="variable">l1</span></a>) (<a class="idref" href="VLSM.Core.VLSM.html#same_VLSM_label_rew"><span class="id" title="definition">same_VLSM_label_rew</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_embedding.Heq"><span class="id" title="variable">Heq</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l1:385"><span class="id" title="variable">l1</span></a>)) (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> <a class="idref" href="VLSM.Core.Composition.html#l1:385"><span class="id" title="variable">l1</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="same_IM_state_rew" class="idref" href="#same_IM_state_rew"><span class="id" title="definition">same_IM_state_rew</span></a><br/>
&nbsp;&nbsp;(<a id="s1:386" class="idref" href="#s1:386"><span class="id" title="binder">s1</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_embedding.IM1"><span class="id" title="variable">IM1</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_embedding.IM2"><span class="id" title="variable">IM2</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="i:387" class="idref" href="#i:387"><span class="id" title="binder">i</span></a> =&gt; <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM_state_rew"><span class="id" title="definition">same_VLSM_state_rew</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_embedding.Heq"><span class="id" title="variable">Heq</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:387"><span class="id" title="variable">i</span></a>) (<a class="idref" href="VLSM.Core.Composition.html#s1:386"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:387"><span class="id" title="variable">i</span></a>).<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_same_IM_embedding.sec_preloaded_constrained" class="idref" href="#sec_same_IM_embedding.sec_preloaded_constrained"><span class="id" title="section">sec_preloaded_constrained</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;(<a id="constraint1:388" class="idref" href="#constraint1:388"><span class="id" title="binder">constraint1</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_embedding.IM1"><span class="id" title="variable">IM1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_embedding.IM1"><span class="id" title="variable">IM1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_embedding.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="constraint2:389" class="idref" href="#constraint2:389"><span class="id" title="binder">constraint2</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_embedding.IM2"><span class="id" title="variable">IM2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_embedding.IM2"><span class="id" title="variable">IM2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_embedding.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="constraint_projection:393" class="idref" href="#constraint_projection:393"><span class="id" title="binder">constraint_projection</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="notation">forall</span> <a id="s1:390" class="idref" href="#s1:390"><span class="id" title="binder">s1</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.PreloadedVLSM.html#constrained_state_prop"><span class="id" title="definition">constrained_state_prop</span></a> (<a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_embedding.IM1"><span class="id" title="variable">IM1</span></a>) <a class="idref" href="VLSM.Core.Composition.html#s1:390"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="l1:391" class="idref" href="#l1:391"><span class="id" title="binder">l1</span></a> <a id="om:392" class="idref" href="#om:392"><span class="id" title="binder">om</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.Composition.html#constraint1:388"><span class="id" title="variable">constraint1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l1:391"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s1:390"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:392"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#constraint2:389"><span class="id" title="variable">constraint2</span></a> (<a class="idref" href="VLSM.Core.Composition.html#same_IM_label_rew"><span class="id" title="definition">same_IM_label_rew</span></a> <a class="idref" href="VLSM.Core.Composition.html#l1:391"><span class="id" title="variable">l1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#same_IM_state_rew"><span class="id" title="definition">same_IM_state_rew</span></a> <a class="idref" href="VLSM.Core.Composition.html#s1:390"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:392"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;(<a id="seed:394" class="idref" href="#seed:394"><span class="id" title="binder">seed</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_embedding.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="same_IM_embedding" class="idref" href="#same_IM_embedding"><span class="id" title="lemma">same_IM_embedding</span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSMProjections.VLSMEmbedding.html#VLSM_embedding"><span class="id" title="record">VLSM_embedding</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_vlsm"><span class="id" title="definition">preloaded_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_embedding.IM1"><span class="id" title="variable">IM1</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_embedding.sec_preloaded_constrained.constraint1"><span class="id" title="variable">constraint1</span></a>) <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_embedding.sec_preloaded_constrained.seed"><span class="id" title="variable">seed</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_vlsm"><span class="id" title="definition">preloaded_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_embedding.IM2"><span class="id" title="variable">IM2</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_embedding.sec_preloaded_constrained.constraint2"><span class="id" title="variable">constraint2</span></a>) <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_embedding.sec_preloaded_constrained.seed"><span class="id" title="variable">seed</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#same_IM_label_rew"><span class="id" title="definition">same_IM_label_rew</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#same_IM_state_rew"><span class="id" title="definition">same_IM_state_rew</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMEmbedding.html#basic_VLSM_embedding"><span class="id" title="lemma">basic_VLSM_embedding</span></a>; <span class="id" title="tactic">intros</span> <span class="id" title="var">l</span> **.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hs</span> [<span class="id" title="var">Hom</span> [<span class="id" title="var">Hv</span> <span class="id" title="var">Hc</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_embedding.sec_preloaded_constrained.constraint_projection"><span class="id" title="variable">constraint_projection</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hc</span>; <span class="id" title="var">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#VLSM_incl_valid_state"><span class="id" title="lemma">VLSM_incl_valid_state</span></a>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.ConstrainedVLSM.html#constrained_preloaded_vlsm_incl_preloaded_with_all_messages"><span class="id" title="lemma">constrained_preloaded_vlsm_incl_preloaded_with_all_messages</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hc</span>. <span class="id" title="var">revert</span> <span class="id" title="var">Hv</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i</span>, <span class="id" title="var">li</span>). <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM_valid_preservation"><span class="id" title="lemma">same_VLSM_valid_preservation</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#proj2"><span class="id" title="lemma">proj2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">revert</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i</span>, <span class="id" title="var">li</span>). <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_embedding.IM1"><span class="id" title="variable">IM1</span></a> <span class="id" title="var">i</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">si'1</span>, <span class="id" title="var">_om'</span>) <span class="id" title="var">eqn</span>: <span class="id" title="var">Ht1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#same_IM_state_rew"><span class="id" title="definition">same_IM_state_rew</span></a> <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM_transition_preservation"><span class="id" title="lemma">same_VLSM_transition_preservation</span></a>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">extensionality</span> <span class="id" title="var">j</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#same_IM_state_rew"><span class="id" title="definition">same_IM_state_rew</span></a> <span class="id" title="tactic">at</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">j</span>)); <span class="id" title="tactic">subst</span>; <span class="id" title="var">state_update_simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM_initial_state_preservation"><span class="id" title="lemma">same_VLSM_initial_state_preservation</span></a>, <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_message_is_valid"><span class="id" title="lemma">initial_message_is_valid</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HmX</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">i</span> [[<span class="id" title="var">im</span> <span class="id" title="var">Him</span>] <span class="id" title="var">Hi</span>]] | <span class="id" title="var">Hseed</span>]; [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">right</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hi</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">im</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#composite_initial_message_prop"><span class="id" title="definition">composite_initial_message_prop</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="var">esplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM_initial_message_preservation"><span class="id" title="lemma">same_VLSM_initial_message_preservation</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">done</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_embedding.sec_preloaded_constrained"><span class="id" title="section">sec_preloaded_constrained</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="same_IM_preloaded_free_embedding" class="idref" href="#same_IM_preloaded_free_embedding"><span class="id" title="lemma">same_IM_preloaded_free_embedding</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSMProjections.VLSMEmbedding.html#VLSM_embedding"><span class="id" title="record">VLSM_embedding</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_with_all_messages_vlsm"><span class="id" title="definition">preloaded_with_all_messages_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_embedding.IM1"><span class="id" title="variable">IM1</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_with_all_messages_vlsm"><span class="id" title="definition">preloaded_with_all_messages_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_embedding.IM2"><span class="id" title="variable">IM2</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#same_IM_label_rew"><span class="id" title="definition">same_IM_label_rew</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#same_IM_state_rew"><span class="id" title="definition">same_IM_state_rew</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s1</span> <span class="id" title="var">tr1</span> <span class="id" title="var">Htr1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#VLSM_incl_finite_valid_trace"><span class="id" title="lemma">VLSM_incl_finite_valid_trace</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr1</span>; [| <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#preloaded_free_composite_vlsm_spec"><span class="id" title="lemma">preloaded_free_composite_vlsm_spec</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Hproj</span> := <a class="idref" href="VLSM.Core.Composition.html#same_IM_embedding"><span class="id" title="lemma">same_IM_embedding</span></a> (<a class="idref" href="VLSM.Core.Composition.html#free_constraint"><span class="id" title="definition">free_constraint</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_embedding.IM1"><span class="id" title="variable">IM1</span></a>) (<a class="idref" href="VLSM.Core.Composition.html#free_constraint"><span class="id" title="definition">free_constraint</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_embedding.IM2"><span class="id" title="variable">IM2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">ltac</span>:(<span class="id" title="var">done</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="notation">True</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSMProjections.VLSMEmbedding.html#VLSM_embedding_finite_valid_trace"><span class="id" title="lemma">VLSM_embedding_finite_valid_trace</span></a> <span class="id" title="var">Hproj</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Htr1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMInclusion.html#VLSM_incl_finite_valid_trace"><span class="id" title="lemma">VLSM_incl_finite_valid_trace</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr1</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#preloaded_free_composite_vlsm_spec"><span class="id" title="lemma">preloaded_free_composite_vlsm_spec</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_embedding"><span class="id" title="section">sec_same_IM_embedding</span></a>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.Composition.html#same_IM_label_rew"><span class="id" title="definition">same_IM_label_rew</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>} <span class="id" title="var">_</span> <span class="id" title="var">_</span> : <span class="id" title="tactic">assert</span>.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="VLSM.Core.Composition.html#same_IM_state_rew"><span class="id" title="definition">same_IM_state_rew</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>} <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> : <span class="id" title="tactic">assert</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab135"></a><h2 class="section">Valid transitions in a composition</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_composite_valid_transition" class="idref" href="#sec_composite_valid_transition"><span class="id" title="section">sec_composite_valid_transition</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;{<a id="message:395" class="idref" href="#message:395"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;`{<a id="EqDecision0:397" class="idref" href="#EqDecision0:397"><span class="id" title="binder">EqDecision</span></a> <a id="index:396" class="idref" href="#index:396"><span class="id" title="binder"><span id="EqDecision0:397" class="id">index</span></span></a>}<br/>
&nbsp;&nbsp;(<a id="IM:398" class="idref" href="#IM:398"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Core.Composition.html#index:396"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:395"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Free:399" class="idref" href="#Free:399"><span class="id" title="binder">Free</span></a> := <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:398"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="composite_valid_transition" class="idref" href="#composite_valid_transition"><span class="id" title="definition">composite_valid_transition</span></a> <a id="l:400" class="idref" href="#l:400"><span class="id" title="binder">l</span></a> <a id="s1:401" class="idref" href="#s1:401"><span class="id" title="binder">s1</span></a> <a id="iom:402" class="idref" href="#iom:402"><span class="id" title="binder">iom</span></a> <a id="s2:403" class="idref" href="#s2:403"><span class="id" title="binder">s2</span></a> <a id="oom:404" class="idref" href="#oom:404"><span class="id" title="binder">oom</span></a> : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_transition"><span class="id" title="record">valid_transition</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_valid_transition.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:400"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.Composition.html#s1:401"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.Composition.html#iom:402"><span class="id" title="variable">iom</span></a> <a class="idref" href="VLSM.Core.Composition.html#s2:403"><span class="id" title="variable">s2</span></a> <a class="idref" href="VLSM.Core.Composition.html#oom:404"><span class="id" title="variable">oom</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="composite_valid_transition_item" class="idref" href="#composite_valid_transition_item"><span class="id" title="definition">composite_valid_transition_item</span></a><br/>
&nbsp;&nbsp;(<a id="s:405" class="idref" href="#s:405"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_valid_transition.IM"><span class="id" title="variable">IM</span></a>) (<a id="item:406" class="idref" href="#item:406"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_valid_transition.IM"><span class="id" title="variable">IM</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#composite_valid_transition"><span class="id" title="definition">composite_valid_transition</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="VLSM.Core.Composition.html#item:406"><span class="id" title="variable">item</span></a>) <a class="idref" href="VLSM.Core.Composition.html#s:405"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a> <a class="idref" href="VLSM.Core.Composition.html#item:406"><span class="id" title="variable">item</span></a>) (<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.Composition.html#item:406"><span class="id" title="variable">item</span></a>) (<a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="VLSM.Core.Composition.html#item:406"><span class="id" title="variable">item</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_valid_transition_reachable_iff" class="idref" href="#composite_valid_transition_reachable_iff"><span class="id" title="lemma">composite_valid_transition_reachable_iff</span></a> <a id="l:407" class="idref" href="#l:407"><span class="id" title="binder">l</span></a> <a id="s1:408" class="idref" href="#s1:408"><span class="id" title="binder">s1</span></a> <a id="iom:409" class="idref" href="#iom:409"><span class="id" title="binder">iom</span></a> <a id="s2:410" class="idref" href="#s2:410"><span class="id" title="binder">s2</span></a> <a id="oom:411" class="idref" href="#oom:411"><span class="id" title="binder">oom</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#composite_valid_transition"><span class="id" title="definition">composite_valid_transition</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:407"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.Composition.html#s1:408"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.Composition.html#iom:409"><span class="id" title="variable">iom</span></a> <a class="idref" href="VLSM.Core.Composition.html#s2:410"><span class="id" title="variable">s2</span></a> <a class="idref" href="VLSM.Core.Composition.html#oom:411"><span class="id" title="variable">oom</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_transition"><span class="id" title="record">valid_transition</span></a> (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_with_all_messages_vlsm"><span class="id" title="definition">preloaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_valid_transition.Free"><span class="id" title="variable">Free</span></a>) <a class="idref" href="VLSM.Core.Composition.html#l:407"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.Composition.html#s1:408"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.Composition.html#iom:409"><span class="id" title="variable">iom</span></a> <a class="idref" href="VLSM.Core.Composition.html#s2:410"><span class="id" title="variable">s2</span></a> <a class="idref" href="VLSM.Core.Composition.html#oom:411"><span class="id" title="variable">oom</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> []; <span class="id" title="tactic">constructor</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="composite_valid_transition_next" class="idref" href="#composite_valid_transition_next"><span class="id" title="definition">composite_valid_transition_next</span></a> <a id="s1:412" class="idref" href="#s1:412"><span class="id" title="binder">s1</span></a> <a id="s2:413" class="idref" href="#s2:413"><span class="id" title="binder">s2</span></a> : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_transition_next"><span class="id" title="inductive">valid_transition_next</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_valid_transition.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#s1:412"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.Composition.html#s2:413"><span class="id" title="variable">s2</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="composite_valid_transition_future" class="idref" href="#composite_valid_transition_future"><span class="id" title="definition">composite_valid_transition_future</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_valid_transition.IM"><span class="id" title="variable">IM</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="inductive">tc</span> <a class="idref" href="VLSM.Core.Composition.html#composite_valid_transition_next"><span class="id" title="definition">composite_valid_transition_next</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_valid_transition_next_reachable_iff" class="idref" href="#composite_valid_transition_next_reachable_iff"><span class="id" title="lemma">composite_valid_transition_next_reachable_iff</span></a> <a id="s1:414" class="idref" href="#s1:414"><span class="id" title="binder">s1</span></a> <a id="s2:415" class="idref" href="#s2:415"><span class="id" title="binder">s2</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#composite_valid_transition_next"><span class="id" title="definition">composite_valid_transition_next</span></a> <a class="idref" href="VLSM.Core.Composition.html#s1:414"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.Composition.html#s2:415"><span class="id" title="variable">s2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_transition_next"><span class="id" title="inductive">valid_transition_next</span></a> (<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_with_all_messages_vlsm"><span class="id" title="definition">preloaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_valid_transition.Free"><span class="id" title="variable">Free</span></a>) <a class="idref" href="VLSM.Core.Composition.html#s1:414"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.Composition.html#s2:415"><span class="id" title="variable">s2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> []; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#composite_valid_transition_reachable_iff"><span class="id" title="lemma">composite_valid_transition_reachable_iff</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_valid_transition_projection" class="idref" href="#composite_valid_transition_projection"><span class="id" title="lemma">composite_valid_transition_projection</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="l:416" class="idref" href="#l:416"><span class="id" title="binder">l</span></a> <a id="s1:417" class="idref" href="#s1:417"><span class="id" title="binder">s1</span></a> <a id="iom:418" class="idref" href="#iom:418"><span class="id" title="binder">iom</span></a> <a id="s2:419" class="idref" href="#s2:419"><span class="id" title="binder">s2</span></a> <a id="oom:420" class="idref" href="#oom:420"><span class="id" title="binder">oom</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#composite_valid_transition"><span class="id" title="definition">composite_valid_transition</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:416"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.Composition.html#s1:417"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.Composition.html#iom:418"><span class="id" title="variable">iom</span></a> <a class="idref" href="VLSM.Core.Composition.html#s2:419"><span class="id" title="variable">s2</span></a> <a class="idref" href="VLSM.Core.Composition.html#oom:420"><span class="id" title="variable">oom</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_transition"><span class="id" title="record">valid_transition</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_composite_valid_transition.IM"><span class="id" title="variable">IM</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:416"><span class="id" title="variable">l</span></a>)) (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:416"><span class="id" title="variable">l</span></a>) (<a class="idref" href="VLSM.Core.Composition.html#s1:417"><span class="id" title="variable">s1</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:416"><span class="id" title="variable">l</span></a>)) <a class="idref" href="VLSM.Core.Composition.html#iom:418"><span class="id" title="variable">iom</span></a> (<a class="idref" href="VLSM.Core.Composition.html#s2:419"><span class="id" title="variable">s2</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:416"><span class="id" title="variable">l</span></a>)) <a class="idref" href="VLSM.Core.Composition.html#oom:420"><span class="id" title="variable">oom</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#s2:419"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_valid_transition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#s1:417"><span class="id" title="variable">s1</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:416"><span class="id" title="variable">l</span></a>) (<a class="idref" href="VLSM.Core.Composition.html#s2:419"><span class="id" title="variable">s2</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:416"><span class="id" title="variable">l</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">i</span> <span class="id" title="var">li</span>] * [<span class="id" title="var">Hv</span> <span class="id" title="var">Ht</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">eqn</span>: <span class="id" title="var">Hti</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">cbn</span>; <span class="id" title="var">state_update_simpl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_valid_transition_projection_inv" class="idref" href="#composite_valid_transition_projection_inv"><span class="id" title="lemma">composite_valid_transition_projection_inv</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="i:421" class="idref" href="#i:421"><span class="id" title="binder">i</span></a> <a id="li:422" class="idref" href="#li:422"><span class="id" title="binder">li</span></a> <a id="si1:423" class="idref" href="#si1:423"><span class="id" title="binder">si1</span></a> <a id="iom:424" class="idref" href="#iom:424"><span class="id" title="binder">iom</span></a> <a id="si2:425" class="idref" href="#si2:425"><span class="id" title="binder">si2</span></a> <a id="oom:426" class="idref" href="#oom:426"><span class="id" title="binder">oom</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_transition"><span class="id" title="record">valid_transition</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_composite_valid_transition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:421"><span class="id" title="variable">i</span></a>) <a class="idref" href="VLSM.Core.Composition.html#li:422"><span class="id" title="variable">li</span></a> <a class="idref" href="VLSM.Core.Composition.html#si1:423"><span class="id" title="variable">si1</span></a> <a class="idref" href="VLSM.Core.Composition.html#iom:424"><span class="id" title="variable">iom</span></a> <a class="idref" href="VLSM.Core.Composition.html#si2:425"><span class="id" title="variable">si2</span></a> <a class="idref" href="VLSM.Core.Composition.html#oom:426"><span class="id" title="variable">oom</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s1:427" class="idref" href="#s1:427"><span class="id" title="binder">s1</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.Composition.html#s1:427"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:421"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#si1:423"><span class="id" title="variable">si1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">forall</span> <a id="s2:428" class="idref" href="#s2:428"><span class="id" title="binder">s2</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.Composition.html#s2:428"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_valid_transition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#s1:427"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:421"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#si2:425"><span class="id" title="variable">si2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#composite_valid_transition"><span class="id" title="definition">composite_valid_transition</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:421"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#li:422"><span class="id" title="variable">li</span></a>) <a class="idref" href="VLSM.Core.Composition.html#s1:427"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.Composition.html#iom:424"><span class="id" title="variable">iom</span></a> <a class="idref" href="VLSM.Core.Composition.html#s2:428"><span class="id" title="variable">s2</span></a> <a class="idref" href="VLSM.Core.Composition.html#oom:426"><span class="id" title="variable">oom</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * [<span class="id" title="var">Hv</span> <span class="id" title="var">Ht</span>] <span class="id" title="var">s1</span> &lt;- <span class="id" title="var">s2</span> -&gt;; <span class="id" title="tactic">split</span>; [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span>; <span class="id" title="tactic">replace</span> (<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">si2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">oom</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="composite_valid_transitions_from_to" class="idref" href="#composite_valid_transitions_from_to"><span class="id" title="definition, inductive"><span id="composite_valid_transitions_from_to_ind" class="id"><span id="composite_valid_transitions_from_to_sind" class="id">composite_valid_transitions_from_to</span></span></span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_valid_transition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_valid_transition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_valid_transition.IM"><span class="id" title="variable">IM</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="cvtft_empty" class="idref" href="#cvtft_empty"><span class="id" title="constructor">cvtft_empty</span></a> : <span class="id" title="notation">forall</span> <a id="s:431" class="idref" href="#s:431"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.Composition.html#composite_valid_transitions_from_to:429"><span class="id" title="inductive">composite_valid_transitions_from_to</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:431"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:431"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
| <a id="cvtft_cons" class="idref" href="#cvtft_cons"><span class="id" title="constructor">cvtft_cons</span></a> : <span class="id" title="notation">forall</span> <a id="s:432" class="idref" href="#s:432"><span class="id" title="binder">s</span></a> <a id="s':433" class="idref" href="#s':433"><span class="id" title="binder">s'</span></a> <a id="tr:434" class="idref" href="#tr:434"><span class="id" title="binder">tr</span></a> <a id="item:435" class="idref" href="#item:435"><span class="id" title="binder">item</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#composite_valid_transitions_from_to:429"><span class="id" title="inductive">composite_valid_transitions_from_to</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:432"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#s':433"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.Composition.html#tr:434"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#composite_valid_transition_item"><span class="id" title="definition">composite_valid_transition_item</span></a> <a class="idref" href="VLSM.Core.Composition.html#s':433"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.Composition.html#item:435"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#composite_valid_transitions_from_to:429"><span class="id" title="inductive">composite_valid_transitions_from_to</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:432"><span class="id" title="variable">s</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.Composition.html#item:435"><span class="id" title="variable">item</span></a>) (<a class="idref" href="VLSM.Core.Composition.html#tr:434"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.Composition.html#item:435"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_valid_transitions_from_to_trace" class="idref" href="#composite_valid_transitions_from_to_trace"><span class="id" title="lemma">composite_valid_transitions_from_to_trace</span></a> : <span class="id" title="notation">forall</span> <a id="s:436" class="idref" href="#s:436"><span class="id" title="binder">s</span></a> <a id="s':437" class="idref" href="#s':437"><span class="id" title="binder">s'</span></a> <a id="tr:438" class="idref" href="#tr:438"><span class="id" title="binder">tr</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.PreloadedVLSM.html#finite_constrained_trace_from_to"><span class="id" title="definition">finite_constrained_trace_from_to</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_valid_transition.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:436"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#s':437"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.Composition.html#tr:438"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#composite_valid_transitions_from_to"><span class="id" title="inductive">composite_valid_transitions_from_to</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:436"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#s':437"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.Composition.html#tr:438"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1 <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_rev_ind"><span class="id" title="lemma">finite_valid_trace_from_to_rev_ind</span></a>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">constructor</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> {| <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> := <span class="id" title="var">sf</span> |} <span class="id" title="keyword">as</span> <span class="id" title="var">item</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">sf</span> <span class="id" title="keyword">with</span> (<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">item</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">subst</span>; <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; [<span class="id" title="var">done</span> |]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#composite_valid_transition_reachable_iff"><span class="id" title="lemma">composite_valid_transition_reachable_iff</span></a>, <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_forget_input"><span class="id" title="lemma">input_valid_transition_forget_input</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_valid_transition"><span class="id" title="section">sec_composite_valid_transition</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab136"></a><h2 class="section">Valid composite states properties</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_composite_state" class="idref" href="#sec_composite_state"><span class="id" title="section">sec_composite_state</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;`{<a id="EqDecision0:440" class="idref" href="#EqDecision0:440"><span class="id" title="binder">EqDecision</span></a> <a id="index:439" class="idref" href="#index:439"><span class="id" title="binder"><span id="EqDecision0:440" class="id">index</span></span></a>}<br/>
&nbsp;&nbsp;`[<a id="IM:442" class="idref" href="#IM:442"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Core.Composition.html#index:439"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a id="message:441" class="idref" href="#message:441"><span class="id" title="binder">message</span></a>]<br/>
&nbsp;&nbsp;[<a id="constraint:443" class="idref" href="#constraint:443"><span class="id" title="binder">constraint</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:442"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:442"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:441"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>]<br/>
&nbsp;&nbsp;(<a id="X:444" class="idref" href="#X:444"><span class="id" title="binder">X</span></a> := <a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:442"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint:443"><span class="id" title="variable">constraint</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
</div>

<div class="doc">
  Given a valid state for the free composition and a constrained trace in one
  of the components receiving only valid messages of the free composition,
  the trace can be replayed on top of the given state to yield a valid trace
  segment for the free composition.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="pre_free_lift_to_free_weak_embedding" class="idref" href="#pre_free_lift_to_free_weak_embedding"><span class="id" title="lemma">pre_free_lift_to_free_weak_embedding</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:445" class="idref" href="#i:445"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_composite_state.index"><span class="id" title="variable">index</span></a>) (<a id="cs:446" class="idref" href="#cs:446"><span class="id" title="binder">cs</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_state.IM"><span class="id" title="variable">IM</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> (<a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_state.IM"><span class="id" title="variable">IM</span></a>) <a class="idref" href="VLSM.Core.Composition.html#cs:446"><span class="id" title="variable">cs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSMProjections.VLSMEmbedding.html#VLSM_weak_embedding"><span class="id" title="record">VLSM_weak_embedding</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.PreloadedVLSM.html#preloaded_vlsm"><span class="id" title="definition">preloaded_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_composite_state.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:445"><span class="id" title="variable">i</span></a>) (<a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> (<a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_state.IM"><span class="id" title="variable">IM</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_state.IM"><span class="id" title="variable">IM</span></a>) (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_label"><span class="id" title="definition">lift_to_composite_label</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_state.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:445"><span class="id" title="variable">i</span></a>) (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_state.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#cs:446"><span class="id" title="variable">cs</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:445"><span class="id" title="variable">i</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">cs</span> <span class="id" title="var">Hvsp</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">tr</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Heq</span> := <a class="idref" href="VLSM.Core.PreloadedVLSM.html#vlsm_is_preloaded_with_valid"><span class="id" title="lemma">vlsm_is_preloaded_with_valid</span></a> (<a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_state.IM"><span class="id" title="variable">IM</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSMProjections.VLSMEquality.html#VLSM_eq_valid_state"><span class="id" title="lemma">VLSM_eq_valid_state</span></a> <span class="id" title="var">Heq</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hvsp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSMProjections.VLSMEquality.html#VLSM_eq_finite_valid_trace_from"><span class="id" title="lemma">VLSM_eq_finite_valid_trace_from</span></a> <span class="id" title="var">Heq</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSMProjections.VLSMEmbedding.html#VLSM_weak_embedding_finite_valid_trace_from"><span class="id" title="lemma">VLSM_weak_embedding_finite_valid_trace_from</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>; <span class="id" title="var">cycle</span> 3;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#pre_lift_to_free_weak_embedding"><span class="id" title="lemma">pre_lift_to_free_weak_embedding</span></a> | ..].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="lift_to_composite_plan" class="idref" href="#lift_to_composite_plan"><span class="id" title="definition">lift_to_composite_plan</span></a> [<a id="i:447" class="idref" href="#i:447"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_composite_state.index"><span class="id" title="variable">index</span></a>] : <a class="idref" href="VLSM.Core.Plans.html#plan"><span class="id" title="definition">plan</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_composite_state.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:447"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan"><span class="id" title="definition">composite_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_state.IM"><span class="id" title="variable">IM</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_plan_item"><span class="id" title="definition">lift_to_composite_plan_item</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_state.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:447"><span class="id" title="variable">i</span></a>).<br/>

<br/>
</div>

<div class="doc">
  A component state for the final state of a valid trace of the composition
  is either initial, or there is a witness in the trace when a transition in
  that component led to the current component state.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="final_state_component_initial_or_transition" class="idref" href="#final_state_component_initial_or_transition"><span class="id" title="lemma">final_state_component_initial_or_transition</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:448" class="idref" href="#i:448"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_composite_state.index"><span class="id" title="variable">index</span></a>) (<a id="is:449" class="idref" href="#is:449"><span class="id" title="binder">is</span></a> <a id="f:450" class="idref" href="#f:450"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_state.IM"><span class="id" title="variable">IM</span></a>) (<a id="tr:451" class="idref" href="#tr:451"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_state.IM"><span class="id" title="variable">IM</span></a>)<span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_state.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.Composition.html#is:449"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.Composition.html#f:450"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.Composition.html#tr:451"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_composite_state.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:448"><span class="id" title="variable">i</span></a>) (<a class="idref" href="VLSM.Core.Composition.html#f:450"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:448"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="item:452" class="idref" href="#item:452"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_state.IM"><span class="id" title="variable">IM</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#item:452"><span class="id" title="variable">item</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.Composition.html#tr:451"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.Composition.html#item:452"><span class="id" title="variable">item</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:448"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#f:450"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:448"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="VLSM.Core.Composition.html#item:452"><span class="id" title="variable">item</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:448"><span class="id" title="variable">i</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Htr</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_rev_ind"><span class="id" title="lemma">finite_valid_trace_init_to_rev_ind</span></a>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">left</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">j</span> <span class="id" title="var">lj</span>], (<span class="id" title="definition">decide</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">j</span>)) <span class="id" title="keyword">as</span> [&lt;- |]; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">right</span>; <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_app</span>, <span class="id" title="lemma">elem_of_list_singleton</span>; <span class="id" title="tactic">right</span> |].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Ht</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a> <span class="id" title="var">lj</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span> <span class="id" title="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">iom</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">si'</span> <span class="id" title="var">om'</span>]; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">state_update_simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHHtr</span> <span class="id" title="keyword">as</span> [| (? &amp; ? &amp; ?)]; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">left</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">right</span>; <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_app</span>; <span class="id" title="tactic">left</span> |].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  A reformulation of <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#final_state_component_initial_or_transition"><span class="id" title="lemma">final_state_component_initial_or_transition</span></a></span> in terms of
  <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a></span> and <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#in_futures"><span class="id" title="definition">in_futures</span></a></span>.

<div class="paragraph"> </div>

  A component state from a valid state for a composition is either initial or
  there exists a valid transition in the composition from whose destination
  the given state is validly reachable and which corresponds to a transition
  in the component leading to the current component state.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="valid_state_component_initial_or_transition" class="idref" href="#valid_state_component_initial_or_transition"><span class="id" title="lemma">valid_state_component_initial_or_transition</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:453" class="idref" href="#i:453"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_composite_state.index"><span class="id" title="variable">index</span></a>) (<a id="f:454" class="idref" href="#f:454"><span class="id" title="binder">f</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_state.IM"><span class="id" title="variable">IM</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_state.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.Composition.html#f:454"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_composite_state.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:453"><span class="id" title="variable">i</span></a>) (<a class="idref" href="VLSM.Core.Composition.html#f:454"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:453"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="s1:455" class="idref" href="#s1:455"><span class="id" title="binder">s1</span></a> <a id="s2:456" class="idref" href="#s2:456"><span class="id" title="binder">s2</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_state.IM"><span class="id" title="variable">IM</span></a>) (<a id="li:457" class="idref" href="#li:457"><span class="id" title="binder">li</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_composite_state.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:453"><span class="id" title="variable">i</span></a>)) (<a id="om:458" class="idref" href="#om:458"><span class="id" title="binder">om</span></a> <a id="om':459" class="idref" href="#om':459"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_state.message"><span class="id" title="variable">message</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#in_futures"><span class="id" title="definition">in_futures</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_state.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.Composition.html#s2:456"><span class="id" title="variable">s2</span></a> <a class="idref" href="VLSM.Core.Composition.html#f:454"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.Composition.html#s2:456"><span class="id" title="variable">s2</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:453"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#f:454"><span class="id" title="variable">f</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:453"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_state.X"><span class="id" title="variable">X</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:453"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#li:457"><span class="id" title="variable">li</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s1:455"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:458"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s2:456"><span class="id" title="variable">s2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om':459"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">f</span> <span class="id" title="var">Hf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_has_trace"><span class="id" title="lemma">valid_state_has_trace</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hf</span> <span class="id" title="keyword">as</span> (<span class="id" title="keyword">is</span> &amp; <span class="id" title="var">tr</span> &amp; <span class="id" title="var">Htr</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.Composition.html#final_state_component_initial_or_transition"><span class="id" title="lemma">final_state_component_initial_or_transition</span></a> <span class="id" title="var">i</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hitem</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hitem</span> <span class="id" title="keyword">as</span> [| (<span class="id" title="var">item</span> &amp; <span class="id" title="var">Hitem</span> &amp; <span class="id" title="var">Hdest</span> &amp; <span class="id" title="var">Hl</span>)]; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">left</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_split</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hitem</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">pre</span> &amp; <span class="id" title="var">suf</span> &amp; -&gt;).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Hinit</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_app_split"><span class="id" title="lemma">finite_valid_trace_from_to_app_split</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Htr</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">i</span> <span class="id" title="var">li</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">right</span>; <span class="id" title="tactic">exists</span> (<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <span class="id" title="keyword">is</span> <span class="id" title="var">pre</span>), <span class="id" title="var">s</span>, <span class="id" title="var">li</span>, <span class="id" title="var">iom</span>, <span class="id" title="var">oom</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">eexists</span> |].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.Composition.html#sec_composite_state"><span class="id" title="section">sec_composite_state</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr">coqdoc</a> and improved with <a href="https://github.com/palmskog/coqdocjs">CoqdocJS</a> as adapted for <a href="https://github.com/coq-community">coq-community</a>
</div>
</div>
</body>

</html>
