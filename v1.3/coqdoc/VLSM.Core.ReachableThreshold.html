<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename">
	<script>
	  if (document.title === "Table of Contents") {
	      document.write("<a href='map.svg'>File dependency graph</a>");
	  } else if (document.title !== "Index") {
              document.write("<a href='" + document.title + ".svg'>" + document.title + " dependency graph</a>");
	  }
	</script>
      </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./../..">Project Website</a>
      <a href="./indexpage.html">Index</a>
      <a href="./toc.html">Table of Contents</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">stdpp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">prelude</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Reals.Reals.html#"><span class="id" title="library">Reals</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.micromega.Lra.html#"><span class="id" title="library">Lra</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM.Lib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Lib.RealsExtras.html#"><span class="id" title="library">RealsExtras</span></a> <a class="idref" href="VLSM.Lib.Measurable.html#"><span class="id" title="library">Measurable</span></a> <a class="idref" href="VLSM.Lib.ListExtras.html#"><span class="id" title="library">ListExtras</span></a> <a class="idref" href="VLSM.Lib.StdppListSet.html#"><span class="id" title="library">StdppListSet</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab150"></a><h1 class="section">Core: Reachable Threshold</h1>


<div class="paragraph"> </div>

  Given a set of validators and a <span class="inlinecode"><span class="id" title="var">threshold</span></span> (a positive real number), we say
  that the threshold is reachable (<span class="inlinecode"><a class="idref" href="VLSM.Core.ReachableThreshold.html#rt_reachable"><span class="id" title="projection">rt_reachable</span></a></span>) when there exists a
  set of validators whose combined weight passes the threshold.

<div class="paragraph"> </div>

  In this module we prove that there exist a <span class="inlinecode"><a class="idref" href="VLSM.Core.ReachableThreshold.html#potentially_pivotal"><span class="id" title="definition">potentially_pivotal</span></a></span> validator,
  i.e., a validator which added to a set of validators tips over the threshold.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Class</span> <a id="ReachableThreshold" class="idref" href="#ReachableThreshold"><span class="id" title="record">ReachableThreshold</span></a> <a id="V:1" class="idref" href="#V:1"><span class="id" title="binder">V</span></a> <a id="Cv:2" class="idref" href="#Cv:2"><span class="id" title="binder">Cv</span></a> (<a id="threshold:3" class="idref" href="#threshold:3"><span class="id" title="binder">threshold</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R"><span class="id" title="axiom">R</span></a>) `{<a id="Hm:4" class="idref" href="#Hm:4"><span class="id" title="binder">Hm</span></a> : <a class="idref" href="VLSM.Lib.Measurable.html#Measurable"><span class="id" title="class">Measurable</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#V:1"><span class="id" title="variable">V</span></a>} `{<a id="H6:13" class="idref" href="#H6:13"><span class="id" title="binder">FinSet</span></a> <a id="H6:13" class="idref" href="#H6:13"><span class="id" title="binder">V</span></a> <a id="H6:13" class="idref" href="#H6:13"><span class="id" title="binder">Cv</span></a>} : <span class="id" title="keyword">Prop</span> :=<br/>
{<br/>
&nbsp;&nbsp;<a id="rt_positive" class="idref" href="#rt_positive"><span class="id" title="projection">rt_positive</span></a> : (0 <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#threshold:3"><span class="id" title="variable">threshold</span></a>)%<span class="id" title="var">R</span>;<br/>
&nbsp;&nbsp;<a id="rt_reachable" class="idref" href="#rt_reachable"><span class="id" title="projection">rt_reachable</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="vs:16" class="idref" href="#vs:16"><span class="id" title="binder">vs</span></a> : <a class="idref" href="VLSM.Core.ReachableThreshold.html#Cv:2"><span class="id" title="variable">Cv</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> (<a class="idref" href="VLSM.Lib.Measurable.html#sum_weights"><span class="id" title="definition">sum_weights</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#vs:16"><span class="id" title="variable">vs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#threshold:3"><span class="id" title="variable">threshold</span></a>)%<span class="id" title="var">R</span>;<br/>
}.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="var">Mode</span> <a class="idref" href="VLSM.Core.ReachableThreshold.html#ReachableThreshold"><span class="id" title="class">ReachableThreshold</span></a> - - - ! ! ! ! ! ! ! ! ! ! : <span class="id" title="var">typeclass_instances</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_reachable_threshold_props" class="idref" href="#sec_reachable_threshold_props"><span class="id" title="section">sec_reachable_threshold_props</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;(<a id="threshold:18" class="idref" href="#threshold:18"><span class="id" title="binder">threshold</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R"><span class="id" title="axiom">R</span></a>)<br/>
&nbsp;&nbsp;`{<a id="Hrt:31" class="idref" href="#Hrt:31"><span class="id" title="binder">Hrt</span></a> : <a class="idref" href="VLSM.Core.ReachableThreshold.html#ReachableThreshold"><span class="id" title="class">ReachableThreshold</span></a> <a id="V:19" class="idref" href="#V:19"><span class="id" title="binder">V</span></a> <a id="Cv:20" class="idref" href="#Cv:20"><span class="id" title="binder">Cv</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#threshold:18"><span class="id" title="variable">threshold</span></a>}<br/>
&nbsp;&nbsp;.<br/>

<br/>
</div>

<div class="doc">
  Given a list with no duplicates and whose added weight does not pass the
  threshold, we can iteratively add elements into it until it passes the
  threshold.  Hence, the last element added will tip over the threshold.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="pivotal_validator_extension_list" class="idref" href="#pivotal_validator_extension_list"><span class="id" title="lemma">pivotal_validator_extension_list</span></a><br/>
&nbsp;&nbsp;: <span class="id" title="notation">forall</span> <a id="vsfix:32" class="idref" href="#vsfix:32"><span class="id" title="binder">vsfix</span></a> <a id="vss:33" class="idref" href="#vss:33"><span class="id" title="binder">vss</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="VLSM.Core.ReachableThreshold.html#vsfix:32"><span class="id" title="variable">vsfix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;(<a class="idref" href="VLSM.Lib.Measurable.html#sum_weights_list"><span class="id" title="definition">sum_weights_list</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#vsfix:32"><span class="id" title="variable">vsfix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#sec_reachable_threshold_props.threshold"><span class="id" title="variable">threshold</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> (<a class="idref" href="VLSM.Core.ReachableThreshold.html#vss:33"><span class="id" title="variable">vss</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#vsfix:32"><span class="id" title="variable">vsfix</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;(<a class="idref" href="VLSM.Lib.Measurable.html#sum_weights_list"><span class="id" title="definition">sum_weights_list</span></a> (<a class="idref" href="VLSM.Core.ReachableThreshold.html#vss:33"><span class="id" title="variable">vss</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#vsfix:32"><span class="id" title="variable">vsfix</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#sec_reachable_threshold_props.threshold"><span class="id" title="variable">threshold</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="vs:34" class="idref" href="#vs:34"><span class="id" title="binder">vs</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#sec_reachable_threshold_props.V"><span class="id" title="variable">V</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDup</span> <a class="idref" href="VLSM.Core.ReachableThreshold.html#vs:34"><span class="id" title="variable">vs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ReachableThreshold.html#vs:34"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="VLSM.Core.ReachableThreshold.html#vss:33"><span class="id" title="variable">vss</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;(<a class="idref" href="VLSM.Lib.Measurable.html#sum_weights_list"><span class="id" title="definition">sum_weights_list</span></a> (<a class="idref" href="VLSM.Core.ReachableThreshold.html#vs:34"><span class="id" title="variable">vs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#vsfix:32"><span class="id" title="variable">vsfix</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#sec_reachable_threshold_props.threshold"><span class="id" title="variable">threshold</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="v:35" class="idref" href="#v:35"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ReachableThreshold.html#v:35"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.ReachableThreshold.html#vs:34"><span class="id" title="variable">vs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Lib.Measurable.html#sum_weights_list"><span class="id" title="definition">sum_weights_list</span></a> (<a class="idref" href="VLSM.Lib.StdppListSet.html#set_remove"><span class="id" title="definition">set_remove</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#v:35"><span class="id" title="variable">v</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#vs:34"><span class="id" title="variable">vs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#vsfix:32"><span class="id" title="variable">vsfix</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#sec_reachable_threshold_props.threshold"><span class="id" title="variable">threshold</span></a>)%<span class="id" title="var">R</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">vss</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">Hnd_vsfix</span> <span class="id" title="var">Hvsfix</span> <span class="id" title="var">Hnd_all</span> <span class="id" title="var">Hall</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hall</span>; [<span class="id" title="tactic">by</span> <span class="id" title="var">lra</span> |].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Reals.RIneq.html#Rle_or_lt"><span class="id" title="lemma">Rle_or_lt</span></a> (<a class="idref" href="VLSM.Lib.Measurable.html#sum_weights_list"><span class="id" title="definition">sum_weights_list</span></a> (<span class="id" title="var">vss</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">vsfix</span>)) <a class="idref" href="VLSM.Core.ReachableThreshold.html#sec_reachable_threshold_props.threshold"><span class="id" title="variable">threshold</span></a>) <span class="id" title="keyword">as</span> [| <span class="id" title="var">Hgt</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">vss</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; [| <span class="id" title="var">done</span> | <span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.ListExtras.html#nodup_append_left"><span class="id" title="lemma">nodup_append_left</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnd_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">left</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">cbn</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">decide_True</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnd_all</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hnin</span> <span class="id" title="var">Hvss</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHvss</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hgt</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">vs</span> &amp; <span class="id" title="var">Hvs</span> &amp; <span class="id" title="var">Hincl</span> &amp; <span class="id" title="var">Hex</span>); [| <span class="id" title="var">done</span>..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">vs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">right</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hincl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  The <span class="inlinecode"><span class="id" title="class">FinSet</span></span> version of the <span class="inlinecode"><a class="idref" href="VLSM.Core.ReachableThreshold.html#pivotal_validator_extension_list"><span class="id" title="lemma">pivotal_validator_extension_list</span></a></span> result.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="pivotal_validator_extension" class="idref" href="#pivotal_validator_extension"><span class="id" title="lemma">pivotal_validator_extension</span></a><br/>
&nbsp;&nbsp;: <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="vsfix:36" class="idref" href="#vsfix:36"><span class="id" title="binder">vsfix</span></a> <a id="vss:37" class="idref" href="#vss:37"><span class="id" title="binder">vss</span></a> : <a class="idref" href="VLSM.Core.ReachableThreshold.html#sec_reachable_threshold_props.Cv"><span class="id" title="variable">Cv</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;(<a class="idref" href="VLSM.Lib.Measurable.html#sum_weights"><span class="id" title="definition">sum_weights</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#vsfix:36"><span class="id" title="variable">vsfix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#sec_reachable_threshold_props.threshold"><span class="id" title="variable">threshold</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ReachableThreshold.html#vss:37"><span class="id" title="variable">vss</span></a> <span class="id" title="notation">##</span> <a class="idref" href="VLSM.Core.ReachableThreshold.html#vsfix:36"><span class="id" title="variable">vsfix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;(<a class="idref" href="VLSM.Lib.Measurable.html#sum_weights"><span class="id" title="definition">sum_weights</span></a> (<a class="idref" href="VLSM.Core.ReachableThreshold.html#vss:37"><span class="id" title="variable">vss</span></a> <span class="id" title="notation">∪</span> <a class="idref" href="VLSM.Core.ReachableThreshold.html#vsfix:36"><span class="id" title="variable">vsfix</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#sec_reachable_threshold_props.threshold"><span class="id" title="variable">threshold</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="vs:38" class="idref" href="#vs:38"><span class="id" title="binder">vs</span></a> : <a class="idref" href="VLSM.Core.ReachableThreshold.html#sec_reachable_threshold_props.Cv"><span class="id" title="variable">Cv</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ReachableThreshold.html#vs:38"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="VLSM.Core.ReachableThreshold.html#vss:37"><span class="id" title="variable">vss</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;(<a class="idref" href="VLSM.Lib.Measurable.html#sum_weights"><span class="id" title="definition">sum_weights</span></a> (<a class="idref" href="VLSM.Core.ReachableThreshold.html#vs:38"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">∪</span> <a class="idref" href="VLSM.Core.ReachableThreshold.html#vsfix:36"><span class="id" title="variable">vsfix</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#sec_reachable_threshold_props.threshold"><span class="id" title="variable">threshold</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="v:39" class="idref" href="#v:39"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ReachableThreshold.html#v:39"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.ReachableThreshold.html#vs:38"><span class="id" title="variable">vs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Lib.Measurable.html#sum_weights"><span class="id" title="definition">sum_weights</span></a> (<a class="idref" href="VLSM.Core.ReachableThreshold.html#vs:38"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span> <a class="idref" href="VLSM.Core.ReachableThreshold.html#v:39"><span class="id" title="variable">v</span></a> <span class="id" title="notation">]}</span> <span class="id" title="notation">∪</span> <a class="idref" href="VLSM.Core.ReachableThreshold.html#vsfix:36"><span class="id" title="variable">vsfix</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#sec_reachable_threshold_props.threshold"><span class="id" title="variable">threshold</span></a>)%<span class="id" title="var">R</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">vsfix</span> <span class="id" title="var">vss</span> <span class="id" title="var">Hvsfix</span> <span class="id" title="var">Hdisj</span> <span class="id" title="var">Hall</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.ReachableThreshold.html#pivotal_validator_extension_list"><span class="id" title="lemma">pivotal_validator_extension_list</span></a> (<span class="id" title="definition">elements</span> <span class="id" title="var">vsfix</span>) (<span class="id" title="definition">elements</span> <span class="id" title="var">vss</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> (<span class="id" title="var">vs</span> &amp; <span class="id" title="var">Hnd_vs</span> &amp; <span class="id" title="var">Hincl</span> &amp; <span class="id" title="var">Hvs</span> &amp; <span class="id" title="var">v</span> &amp; <span class="id" title="var">Hv</span> &amp; <span class="id" title="var">Hvs_v</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="method">NoDup_elements</span> | <span class="id" title="var">done</span> | ..].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_app</span>; <span class="id" title="var">split_and</span>!; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="method">NoDup_elements</span> | | <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="method">NoDup_elements</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">rewrite</span> !<span class="id" title="method">elem_of_elements</span>; <span class="id" title="tactic">intros</span> ? ?; <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hdisj</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.Measurable.html#sum_weights_app_list"><span class="id" title="lemma">sum_weights_app_list</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.Measurable.html#sum_weights_disj_union"><span class="id" title="lemma">sum_weights_disj_union</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hall</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> (<span class="id" title="definition">list_to_set</span> <span class="id" title="var">vs</span>); <span class="id" title="var">split_and</span>!.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_to_set</span>, <span class="id" title="var">Hincl</span>, <span class="id" title="method">elem_of_elements</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.Measurable.html#sum_weights_app_list"><span class="id" title="lemma">sum_weights_app_list</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.Measurable.html#sum_weights_disj_union"><span class="id" title="lemma">sum_weights_disj_union</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">replace</span> (<a class="idref" href="VLSM.Lib.Measurable.html#sum_weights"><span class="id" title="definition">sum_weights</span></a> (<span class="id" title="definition">list_to_set</span> <span class="id" title="var">vs</span>)) <span class="id" title="keyword">with</span> (<a class="idref" href="VLSM.Lib.Measurable.html#sum_weights_list"><span class="id" title="definition">sum_weights_list</span></a> <span class="id" title="var">vs</span>); [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.Measurable.html#sum_weights_list_permutation_proper"><span class="id" title="instance">sum_weights_list_permutation_proper</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elements_list_to_set</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_list_to_set</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hx_vs</span> <span class="id" title="var">Hx_vsfix</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hdisj</span>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="method">elem_of_elements</span>, <span class="id" title="var">Hincl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">v</span>; <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_to_set</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="VLSM.Lib.Measurable.html#sum_weights"><span class="id" title="definition">sum_weights</span></a> <span class="id" title="var">_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="VLSM.Lib.Measurable.html#sum_weights_list"><span class="id" title="definition">sum_weights_list</span></a> (<a class="idref" href="VLSM.Lib.StdppListSet.html#set_remove"><span class="id" title="definition">StdppListSet.set_remove</span></a> <span class="id" title="var">v</span> <span class="id" title="var">vs</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="definition">elements</span> <span class="id" title="var">vsfix</span>)); [<span class="id" title="var">done</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.Measurable.html#sum_weights_list_permutation_proper"><span class="id" title="instance">sum_weights_list_permutation_proper</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elements_disj_union</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Sorting.Permutation.html#Permutation_app_tail"><span class="id" title="lemma">Permutation_app_tail</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">etransitivity</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> (<span class="id" title="lemma">elements_list_to_set</span> (<span class="id" title="var">H6</span> := <a class="idref" href="VLSM.Core.ReachableThreshold.html#sec_reachable_threshold_props.H6"><span class="id" title="variable">H6</span></a>)), <a class="idref" href="VLSM.Lib.StdppListSet.html#set_remove_nodup"><span class="id" title="lemma">set_remove_nodup</span></a> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="instance">elements_proper</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="method">elem_of_difference</span>, !<span class="id" title="lemma">elem_of_list_to_set</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.StdppListSet.html#set_remove_iff"><span class="id" title="lemma">set_remove_iff</span></a>, <span class="id" title="method">elem_of_singleton</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="method">elem_of_difference</span>, <span class="id" title="lemma">elem_of_list_to_set</span>, <span class="id" title="method">elem_of_singleton</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> [] ?; <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hdisj</span>; [<span class="id" title="tactic">apply</span> <span class="id" title="method">elem_of_elements</span>, <span class="id" title="var">Hincl</span> |].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Given a set of validators whose combined weight passes the threshold, we can
  iteratively remove elements until the combined weight decreases below the
  threshold. The last element removed tips over the threshold.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="validators_pivotal_ind" class="idref" href="#validators_pivotal_ind"><span class="id" title="lemma">validators_pivotal_ind</span></a><br/>
&nbsp;&nbsp;: <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="vss:40" class="idref" href="#vss:40"><span class="id" title="binder">vss</span></a> : <a class="idref" href="VLSM.Core.ReachableThreshold.html#sec_reachable_threshold_props.Cv"><span class="id" title="variable">Cv</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;(<a class="idref" href="VLSM.Lib.Measurable.html#sum_weights"><span class="id" title="definition">sum_weights</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#vss:40"><span class="id" title="variable">vss</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#sec_reachable_threshold_props.threshold"><span class="id" title="variable">threshold</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="vs:41" class="idref" href="#vs:41"><span class="id" title="binder">vs</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ReachableThreshold.html#vs:41"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="VLSM.Core.ReachableThreshold.html#vss:40"><span class="id" title="variable">vss</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;(<a class="idref" href="VLSM.Lib.Measurable.html#sum_weights"><span class="id" title="definition">sum_weights</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#vs:41"><span class="id" title="variable">vs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#sec_reachable_threshold_props.threshold"><span class="id" title="variable">threshold</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="v:42" class="idref" href="#v:42"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ReachableThreshold.html#v:42"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.ReachableThreshold.html#vs:41"><span class="id" title="variable">vs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Lib.Measurable.html#sum_weights"><span class="id" title="definition">sum_weights</span></a> (<a class="idref" href="VLSM.Core.ReachableThreshold.html#vs:41"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span> <a class="idref" href="VLSM.Core.ReachableThreshold.html#v:42"><span class="id" title="variable">v</span></a> <span class="id" title="notation">]}</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#sec_reachable_threshold_props.threshold"><span class="id" title="variable">threshold</span></a>)%<span class="id" title="var">R</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">vss</span> <span class="id" title="var">Hvss</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.ReachableThreshold.html#pivotal_validator_extension"><span class="id" title="lemma">pivotal_validator_extension</span></a> <span class="id" title="notation">∅</span> <span class="id" title="var">vss</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> (<span class="id" title="var">vs</span> &amp; <span class="id" title="var">Hincl</span> &amp; <span class="id" title="var">Hvs</span> &amp; <span class="id" title="var">v</span> &amp; <span class="id" title="var">Hv</span> &amp; <span class="id" title="var">Hvs'</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.Measurable.html#sum_weights_empty"><span class="id" title="lemma">sum_weights_empty</span></a>; [| <span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.ReachableThreshold.html#rt_positive"><span class="id" title="method">rt_positive</span></a> (<span class="id" title="var">H6</span> := <a class="idref" href="VLSM.Core.ReachableThreshold.html#sec_reachable_threshold_props.H6"><span class="id" title="variable">H6</span></a>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">disjoint_empty_r</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.Measurable.html#sum_weights_union_empty"><span class="id" title="lemma">sum_weights_union_empty</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.Measurable.html#sum_weights_union_empty"><span class="id" title="lemma">sum_weights_union_empty</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvs</span>, <span class="id" title="var">Hvs'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">repeat</span> <span class="id" title="var">esplit</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  There exists a set whose combined weight passes the threshold and containing
  an element such that, if the element is removed, the combined weight decreases
  below the threshold.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="sufficient_validators_pivotal" class="idref" href="#sufficient_validators_pivotal"><span class="id" title="lemma">sufficient_validators_pivotal</span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="vs:43" class="idref" href="#vs:43"><span class="id" title="binder">vs</span></a> : <a class="idref" href="VLSM.Core.ReachableThreshold.html#sec_reachable_threshold_props.Cv"><span class="id" title="variable">Cv</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Lib.Measurable.html#sum_weights"><span class="id" title="definition">sum_weights</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#vs:43"><span class="id" title="variable">vs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#sec_reachable_threshold_props.threshold"><span class="id" title="variable">threshold</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="v:44" class="idref" href="#v:44"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ReachableThreshold.html#v:44"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.ReachableThreshold.html#vs:43"><span class="id" title="variable">vs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Lib.Measurable.html#sum_weights"><span class="id" title="definition">sum_weights</span></a> (<a class="idref" href="VLSM.Core.ReachableThreshold.html#vs:43"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span> <a class="idref" href="VLSM.Core.ReachableThreshold.html#v:44"><span class="id" title="variable">v</span></a> <span class="id" title="notation">]}</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#sec_reachable_threshold_props.threshold"><span class="id" title="variable">threshold</span></a>)%<span class="id" title="var">R</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.ReachableThreshold.html#rt_reachable"><span class="id" title="method">rt_reachable</span></a> (1 := <a class="idref" href="VLSM.Core.ReachableThreshold.html#sec_reachable_threshold_props.Hrt"><span class="id" title="variable">Hrt</span></a>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">vs</span> <span class="id" title="var">Hweight</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.ReachableThreshold.html#validators_pivotal_ind"><span class="id" title="lemma">validators_pivotal_ind</span></a> <span class="id" title="var">vs</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hweight</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">vs'</span> &amp; <span class="id" title="var">Hincl</span> &amp; <span class="id" title="var">Hvs'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">vs'</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  A validator <code>v</code> is called potentially pivotal if there exists a set of
  validators whose combined weight is below the threshold such that, if
  adding <code>v</code> to the set, the combine weight would pass over the threshold.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="potentially_pivotal" class="idref" href="#potentially_pivotal"><span class="id" title="definition">potentially_pivotal</span></a> (<a id="v:45" class="idref" href="#v:45"><span class="id" title="binder">v</span></a> : <a class="idref" href="VLSM.Core.ReachableThreshold.html#sec_reachable_threshold_props.V"><span class="id" title="variable">V</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="vs:46" class="idref" href="#vs:46"><span class="id" title="binder">vs</span></a> : <a class="idref" href="VLSM.Core.ReachableThreshold.html#sec_reachable_threshold_props.Cv"><span class="id" title="variable">Cv</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.ReachableThreshold.html#v:45"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="VLSM.Core.ReachableThreshold.html#vs:46"><span class="id" title="variable">vs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Lib.Measurable.html#sum_weights"><span class="id" title="definition">sum_weights</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#vs:46"><span class="id" title="variable">vs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#sec_reachable_threshold_props.threshold"><span class="id" title="variable">threshold</span></a>)%<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Lib.Measurable.html#sum_weights"><span class="id" title="definition">sum_weights</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#vs:46"><span class="id" title="variable">vs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#sec_reachable_threshold_props.threshold"><span class="id" title="variable">threshold</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="VLSM.Lib.Measurable.html#weight"><span class="id" title="definition">weight</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#v:45"><span class="id" title="variable">v</span></a>)%<span class="id" title="var">R</span>.<br/>

<br/>
</div>

<div class="doc">
  The main result of this section proves the existence of a <span class="inlinecode"><a class="idref" href="VLSM.Core.ReachableThreshold.html#potentially_pivotal"><span class="id" title="definition">potentially_pivotal</span></a></span>
  validator.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="exists_pivotal_validator" class="idref" href="#exists_pivotal_validator"><span class="id" title="lemma">exists_pivotal_validator</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="v:47" class="idref" href="#v:47"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#potentially_pivotal"><span class="id" title="definition">potentially_pivotal</span></a> <a class="idref" href="VLSM.Core.ReachableThreshold.html#v:47"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="VLSM.Core.ReachableThreshold.html#sufficient_validators_pivotal"><span class="id" title="lemma">sufficient_validators_pivotal</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">vs</span> &amp; <span class="id" title="var">Hgt</span> &amp; <span class="id" title="var">v</span> &amp; <span class="id" title="var">Hin</span> &amp; <span class="id" title="var">Hlte</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">v</span>, (<span class="id" title="var">vs</span> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span> <span class="id" title="var">v</span> <span class="id" title="notation">]}</span>); <span class="id" title="var">split_and</span>!.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="method">elem_of_difference</span>, <span class="id" title="method">elem_of_singleton</span>; <span class="id" title="tactic">intros</span> [].<br/>
&nbsp;&nbsp;- <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> (<a class="idref" href="VLSM.Lib.Measurable.html#sum_weights_in"><span class="id" title="lemma">sum_weights_in</span></a> <span class="id" title="var">v</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hgt</span> <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">clear</span> <span class="id" title="var">Hlte</span>; <span class="id" title="tactic">cbv</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">lra</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.ReachableThreshold.html#sec_reachable_threshold_props"><span class="id" title="section">sec_reachable_threshold_props</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr">coqdoc</a> and improved with <a href="https://github.com/palmskog/coqdocjs">CoqdocJS</a> as adapted for <a href="https://github.com/coq-community">coq-community</a>
</div>
</div>
</body>

</html>
