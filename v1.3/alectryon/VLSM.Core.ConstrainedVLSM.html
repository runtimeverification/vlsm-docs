<!DOCTYPE html>
<html class="alectryon-standalone"><head><title>ConstrainedVLSM.v</title><meta charset="utf-8"><meta content="Alectryon" name="generator"><meta name="viewport" content="width=device-width, initial-scale=1"><link href="alectryon.css" rel="stylesheet"><link href="pygments.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" /><script src="alectryon.js"></script></head><body><article class="alectryon-root alectryon-windowed alectryon-coqdoc"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.18.0+0.18.1. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk0"><span class="kn">From</span> VLSM.Lib <span class="kn">Require Import</span> Itauto.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">[Loading ML file ring_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file zify_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file micromega_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file btauto_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file coq-itauto.plugin ... <span class="bp">done</span>]</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> stdpp <span class="kn">Require Import</span> prelude.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> Coq <span class="kn">Require Import</span> Streams.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> VLSM.Lib <span class="kn">Require Import</span> Preamble.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> VLSM.Core <span class="kn">Require Import</span> VLSM PreloadedVLSM VLSMInclusion VLSMEmbedding VLSMEquality.</span></span></pre><div class="doc">
<a id="lab1"></a><h1 class="section">Core: Constrained VLSMs</h1>
<div class="paragraph"> </div>

  Given a base VLSM <code>X</code>, we can further constrain its validity
  condition with the given predicate, producing a new VLSM.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sec_constrained_vlsm</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  (<span class="nv">X</span> : VLSM message)
  (<span class="nv">constraint</span> : label X -&gt; state X * option message -&gt; <span class="kt">Prop</span>)
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">constrained_vlsm_type</span> : VLSMType message :=
  vlsm_type X.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">constrained_vlsm_machine</span> : VLSMMachine X :=
{|
  initial_state_prop := @initial_state_prop _ _ X;
  initial_message_prop := @initial_message_prop _ _ X;
  s0 := @s0 _ _ X;
  transition := @transition _ _ X;
  valid := <span class="kr">fun</span> <span class="nv">l</span> <span class="nv">som</span> =&gt; valid X l som /\ constraint l som;
|}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">constrained_vlsm</span> : VLSM message :=
{|
  vlsm_type := vlsm_type X;
  vlsm_machine := constrained_vlsm_machine;
|}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sec_constrained_vlsm</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk1"><span class="kn">Lemma</span> <span class="nf">VLSM_embedding_constrained_vlsm</span> :
  <span class="kr">forall</span> `(X : VLSM message) (constraint : label X -&gt; state X * option message -&gt; <span class="kt">Prop</span>),
    VLSM_embedding (constrained_vlsm X constraint) X id id.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">message</span> : <span class="kt">Type</span>) (<span class="nv">X</span> : VLSM message) (<span class="nv">constraint</span> : 
                                       label X
                                       ‚Üí state X *
                                         option
                                           message
                                         ‚Üí <span class="kt">Prop</span>),
  VLSM_embedding (constrained_vlsm X constraint) X id
    id</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">message</span> : <span class="kt">Type</span>) (<span class="nv">X</span> : VLSM message) (<span class="nv">constraint</span> : 
                                       label X
                                       ‚Üí state X *
                                         option
                                           message
                                         ‚Üí <span class="kt">Prop</span>),
  VLSM_embedding (constrained_vlsm X constraint) X id
    id</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk3"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_embedding (constrained_vlsm X constraint) X id id</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk4"><span class="nb">apply</span> basic_VLSM_strong_embedding; <span class="nb">red</span>; <span class="nb">cbn</span>; [| <span class="bp">done</span>..].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label X) (<span class="nv">s</span> : state X) (<span class="nv">om</span> : option message),
  valid l (s, om) ‚àß constraint l (s, om)
  ‚Üí valid l (s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk5"><span class="kn">Lemma</span> <span class="nf">VLSM_incl_constrained_vlsm</span> :
  <span class="kr">forall</span> `(X : VLSM message) (constraint : label X -&gt; state X * option message -&gt; <span class="kt">Prop</span>),
    VLSM_incl (constrained_vlsm X constraint) X.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">message</span> : <span class="kt">Type</span>) (<span class="nv">X</span> : VLSM message) (<span class="nv">constraint</span> : 
                                       label X
                                       ‚Üí state X *
                                         option
                                           message
                                         ‚Üí <span class="kt">Prop</span>),
  VLSM_incl (constrained_vlsm X constraint) X</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">message</span> : <span class="kt">Type</span>) (<span class="nv">X</span> : VLSM message) (<span class="nv">constraint</span> : 
                                       label X
                                       ‚Üí state X *
                                         option
                                           message
                                         ‚Üí <span class="kt">Prop</span>),
  VLSM_incl (constrained_vlsm X constraint) X</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk7"><span class="nb">intros</span> message X.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">constraint</span> : label X
               ‚Üí state X * option message ‚Üí <span class="kt">Prop</span>,
  VLSM_incl (constrained_vlsm X constraint) X</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk8"><span class="nb">rewrite</span> &lt;- (mk_vlsm_machine X); <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">constraint</span> : label X
               ‚Üí state X * option message ‚Üí <span class="kt">Prop</span>,
  VLSM_incl_part
    (constrained_vlsm_machine
       {| vlsm_type := X; vlsm_machine := X |}
       constraint) X</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk9"><span class="nb">intros</span> constraint.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl_part
  (constrained_vlsm_machine
     {| vlsm_type := X; vlsm_machine := X |}
     constraint) X</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chka"><span class="nb">apply</span> (VLSMInclusion.VLSM_incl_embedding_iff (constrained_vlsm_machine X constraint)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_embedding
  {|
    vlsm_type := X;
    vlsm_machine :=
      constrained_vlsm_machine X constraint
  |}
  {|
    vlsm_type := X;
    vlsm_machine :=
      <span class="kr">let</span>
        (<span class="nv">vlsm_type</span>, vlsm_machine) <span class="nv">as</span> <span class="nv">v</span>
         <span class="nv">return</span> (<span class="nv">VLSMMachine</span> <span class="nv">v</span>) := X <span class="kr">in</span>
      vlsm_machine
  |} id id</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (VLSM_embedding_constrained_vlsm {| vlsm_type := X; vlsm_machine := X; |}).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sec_constrained_vlsm_lemmas</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  (<span class="nv">X</span> : VLSM message)
  (<span class="nv">constraint</span> : label X -&gt; state X * option message -&gt; <span class="kt">Prop</span>)
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chkb"><span class="kn">Lemma</span> <span class="nf">option_initial_message_prop_constrained_vlsm</span> :
  <span class="kr">forall</span> <span class="nv">om</span> : option message,
    @option_initial_message_prop _ _ (constrained_vlsm X constraint) om
      &lt;-&gt;
    @option_initial_message_prop _ _ X om.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">om</span> : option message,
  option_initial_message_prop
    (constrained_vlsm X constraint) om
  ‚Üî option_initial_message_prop X om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chkc"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">om</span> : option message,
  option_initial_message_prop
    (constrained_vlsm X constraint) om
  ‚Üî option_initial_message_prop X om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">done</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chkd"><span class="kn">Lemma</span> <span class="nf">valid_state_message_prop_constrained_vlsm</span> :
  <span class="kr">forall</span>
    (<span class="nv">s</span> : state _) (<span class="nv">om</span> : option message),
      valid_state_message_prop (constrained_vlsm X constraint) s om -&gt;
        valid_state_message_prop X s om.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state (constrained_vlsm X constraint)) (<span class="nv">om</span> : 
                                               option
                                                 message),
  valid_state_message_prop
    (constrained_vlsm X constraint) s om
  ‚Üí valid_state_message_prop X s om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chke"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state (constrained_vlsm X constraint)) (<span class="nv">om</span> : 
                                               option
                                                 message),
  valid_state_message_prop
    (constrained_vlsm X constraint) s om
  ‚Üí valid_state_message_prop X s om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chkf"><span class="nb">intros</span> s om H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (constrained_vlsm X constraint)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop
  (constrained_vlsm X constraint) s om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop X s om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk10"><span class="nb">destruct</span> X.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>vlsm_type</var><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span><br><span><var>vlsm_machine</var><span class="hyp-type"><b>: </b><span>VLSMMachine vlsm_type</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |}
‚Üí state
    {|
      vlsm_type := vlsm_type;
      vlsm_machine := vlsm_machine
    |} * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) s om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |} s om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk11"><span class="nb">eapply</span> VLSM_incl_valid_state_message; [.. | <span class="bp">by</span> <span class="kp">do</span> <span class="mi">2</span> <span class="nb">red</span> | <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>vlsm_type</var><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span><br><span><var>vlsm_machine</var><span class="hyp-type"><b>: </b><span>VLSMMachine vlsm_type</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |}
‚Üí state
    {|
      vlsm_type := vlsm_type;
      vlsm_machine := vlsm_machine
    |} * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) s om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl_part
  (constrained_vlsm_machine
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) vlsm_machine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (VLSM_incl_constrained_vlsm {| vlsm_type := vlsm_type; vlsm_machine := vlsm_machine; |}).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk12"><span class="kn">Lemma</span> <span class="nf">valid_state_prop_constrained_vlsm</span> :
  <span class="kr">forall</span> (<span class="nv">s</span> : state _),
    valid_state_prop (constrained_vlsm X constraint) s -&gt;
      valid_state_prop X s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state (constrained_vlsm X constraint),
  valid_state_prop (constrained_vlsm X constraint) s
  ‚Üí valid_state_prop X s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk13"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state (constrained_vlsm X constraint),
  valid_state_prop (constrained_vlsm X constraint) s
  ‚Üí valid_state_prop X s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk14"><span class="nb">intros</span> s [om Hvsmp].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (constrained_vlsm X constraint)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvsmp</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop
  (constrained_vlsm X constraint) s om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk15"><span class="kr">exists</span> <span class="nv">om</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (constrained_vlsm X constraint)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hvsmp</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop
  (constrained_vlsm X constraint) s om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop X s om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> valid_state_message_prop_constrained_vlsm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk16"><span class="kn">Lemma</span> <span class="nf">valid_message_prop_constrained_vlsm</span> :
  <span class="kr">forall</span> (<span class="nv">m</span> : message),
    valid_message_prop (constrained_vlsm X constraint) m -&gt;
      valid_message_prop X m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  valid_message_prop (constrained_vlsm X constraint) m
  ‚Üí valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk17"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  valid_message_prop (constrained_vlsm X constraint) m
  ‚Üí valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk18"><span class="nb">intros</span> m [s Hvsmp].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (constrained_vlsm X constraint)</span></span></span><br><span><var>Hvsmp</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop
  (constrained_vlsm X constraint) s 
  (Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk19"><span class="kr">exists</span> <span class="nv">s</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (constrained_vlsm X constraint)</span></span></span><br><span><var>Hvsmp</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop
  (constrained_vlsm X constraint) s 
  (Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop X s (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> valid_state_message_prop_constrained_vlsm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk1a"><span class="kn">Lemma</span> <span class="nf">option_valid_message_prop_constrained_vlsm</span> :
  <span class="kr">forall</span> (<span class="nv">om</span> : option message),
    option_valid_message_prop (constrained_vlsm X constraint) om -&gt;
      option_valid_message_prop X om.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">om</span> : option message,
  option_valid_message_prop
    (constrained_vlsm X constraint) om
  ‚Üí option_valid_message_prop X om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk1b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">om</span> : option message,
  option_valid_message_prop
    (constrained_vlsm X constraint) om
  ‚Üí option_valid_message_prop X om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk1c"><span class="nb">intros</span> om [s Hvsmp].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (constrained_vlsm X constraint)</span></span></span><br><span><var>Hvsmp</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop
  (constrained_vlsm X constraint) s om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk1d"><span class="kr">exists</span> <span class="nv">s</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (constrained_vlsm X constraint)</span></span></span><br><span><var>Hvsmp</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop
  (constrained_vlsm X constraint) s om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop X s om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> valid_state_message_prop_constrained_vlsm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk1e"><span class="kn">Lemma</span> <span class="nf">input_valid_constrained_vlsm</span> :
  <span class="kr">forall</span> (<span class="nv">l</span> : label _) (<span class="nv">som</span> : state _ * option message),
    input_valid (constrained_vlsm X constraint) l som -&gt;
      input_valid X l som.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label (constrained_vlsm X constraint)) (<span class="nv">som</span> : 
                                               state
                                                 (constrained_vlsm
                                                 X
                                                 constraint) *
                                               option
                                                 message),
  input_valid (constrained_vlsm X constraint) l som
  ‚Üí input_valid X l som</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk1f" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk1f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label (constrained_vlsm X constraint)) (<span class="nv">som</span> : 
                                               state
                                                 (constrained_vlsm
                                                 X
                                                 constraint) *
                                               option
                                                 message),
  input_valid (constrained_vlsm X constraint) l som
  ‚Üí input_valid X l som</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk20"><span class="nb">intros</span> l [s om] Hiv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (constrained_vlsm X constraint)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (constrained_vlsm X constraint)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hiv</var><span class="hyp-type"><b>: </b><span>input_valid (constrained_vlsm X constraint) l
  (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid X l (s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk21"><span class="nb">destruct</span> X.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>vlsm_type</var><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span><br><span><var>vlsm_machine</var><span class="hyp-type"><b>: </b><span>VLSMMachine vlsm_type</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |}
‚Üí state
    {|
      vlsm_type := vlsm_type;
      vlsm_machine := vlsm_machine
    |} * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hiv</var><span class="hyp-type"><b>: </b><span>input_valid
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) l (
  s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |} l (s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk22"><span class="nb">apply</span> VLSM_incl_input_valid; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>vlsm_type</var><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span><br><span><var>vlsm_machine</var><span class="hyp-type"><b>: </b><span>VLSMMachine vlsm_type</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |}
‚Üí state
    {|
      vlsm_type := vlsm_type;
      vlsm_machine := vlsm_machine
    |} * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hiv</var><span class="hyp-type"><b>: </b><span>input_valid
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) l (
  s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl_part
  (constrained_vlsm_machine
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) vlsm_machine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (VLSM_incl_constrained_vlsm {| vlsm_type := vlsm_type; vlsm_machine := vlsm_machine; |}).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk23"><span class="kn">Lemma</span> <span class="nf">input_valid_transition_constrained_vlsm</span> :
  <span class="kr">forall</span> (<span class="nv">l</span> : label _) (<span class="nv">som</span> <span class="nv">som&#39;</span> : state _ * option message),
    input_valid_transition (constrained_vlsm X constraint) l som som&#39; -&gt;
      input_valid_transition X l som som&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label (constrained_vlsm X constraint)) (<span class="nv">som</span>
                                               <span class="nv">som&#39;</span> : 
                                               state
                                                 (constrained_vlsm
                                                 X
                                                 constraint) *
                                               option
                                                 message),
  input_valid_transition
    (constrained_vlsm X constraint) l som som&#39;
  ‚Üí input_valid_transition X l som som&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk24"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label (constrained_vlsm X constraint)) (<span class="nv">som</span>
                                               <span class="nv">som&#39;</span> : 
                                               state
                                                 (constrained_vlsm
                                                 X
                                                 constraint) *
                                               option
                                                 message),
  input_valid_transition
    (constrained_vlsm X constraint) l som som&#39;
  ‚Üí input_valid_transition X l som som&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk25"><span class="nb">intros</span> l [s om] [s&#39; om&#39;] Hivt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (constrained_vlsm X constraint)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (constrained_vlsm X constraint)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (constrained_vlsm X constraint)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (constrained_vlsm X constraint) l (
  s, om) (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition X l (s, om) (s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk26"><span class="nb">destruct</span> X.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>vlsm_type</var><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span><br><span><var>vlsm_machine</var><span class="hyp-type"><b>: </b><span>VLSMMachine vlsm_type</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |}
‚Üí state
    {|
      vlsm_type := vlsm_type;
      vlsm_machine := vlsm_machine
    |} * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) l (
  s, om) (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |} l (s, om) (s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk27" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk27"><span class="nb">apply</span> VLSM_incl_input_valid_transition; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>vlsm_type</var><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span><br><span><var>vlsm_machine</var><span class="hyp-type"><b>: </b><span>VLSMMachine vlsm_type</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |}
‚Üí state
    {|
      vlsm_type := vlsm_type;
      vlsm_machine := vlsm_machine
    |} * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) l (
  s, om) (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl_part
  (constrained_vlsm_machine
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) vlsm_machine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (VLSM_incl_constrained_vlsm {| vlsm_type := vlsm_type; vlsm_machine := vlsm_machine; |}).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk28" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk28"><span class="kn">Lemma</span> <span class="nf">option_can_produce_constrained_vlsm</span> :
  <span class="kr">forall</span> (<span class="nv">s</span> : state _) (<span class="nv">om</span> : option message),
    option_can_produce (constrained_vlsm X constraint) s om -&gt;
      option_can_produce X s om.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state (constrained_vlsm X constraint)) (<span class="nv">om</span> : 
                                               option
                                                 message),
  option_can_produce (constrained_vlsm X constraint) s
    om ‚Üí option_can_produce X s om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk29" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk29"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state (constrained_vlsm X constraint)) (<span class="nv">om</span> : 
                                               option
                                                 message),
  option_can_produce (constrained_vlsm X constraint) s
    om ‚Üí option_can_produce X s om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk2a"><span class="nb">intros</span> s om Hocp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (constrained_vlsm X constraint)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hocp</var><span class="hyp-type"><b>: </b><span>option_can_produce
  (constrained_vlsm X constraint) s om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_can_produce X s om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk2b"><span class="nb">destruct</span> X.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>vlsm_type</var><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span><br><span><var>vlsm_machine</var><span class="hyp-type"><b>: </b><span>VLSMMachine vlsm_type</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |}
‚Üí state
    {|
      vlsm_type := vlsm_type;
      vlsm_machine := vlsm_machine
    |} * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hocp</var><span class="hyp-type"><b>: </b><span>option_can_produce
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) s om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_can_produce
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |} s om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk2c"><span class="nb">eapply</span> VLSM_incl_can_produce; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>vlsm_type</var><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span><br><span><var>vlsm_machine</var><span class="hyp-type"><b>: </b><span>VLSMMachine vlsm_type</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |}
‚Üí state
    {|
      vlsm_type := vlsm_type;
      vlsm_machine := vlsm_machine
    |} * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hocp</var><span class="hyp-type"><b>: </b><span>option_can_produce
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) s om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl_part
  (constrained_vlsm_machine
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) vlsm_machine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (VLSM_incl_constrained_vlsm {| vlsm_type := vlsm_type; vlsm_machine := vlsm_machine; |}).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk2d" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk2d"><span class="kn">Lemma</span> <span class="nf">can_produce_constrained_vlsm</span> :
  <span class="kr">forall</span> (<span class="nv">s</span> : state _) (<span class="nv">m</span> : message),
    can_produce (constrained_vlsm X constraint) s m -&gt;
      can_produce X s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state (constrained_vlsm X constraint)) (<span class="nv">m</span> : message),
  can_produce (constrained_vlsm X constraint) s m
  ‚Üí can_produce X s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk2e" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk2e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state (constrained_vlsm X constraint)) (<span class="nv">m</span> : message),
  can_produce (constrained_vlsm X constraint) s m
  ‚Üí can_produce X s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span>; <span class="nb">apply</span> option_can_produce_constrained_vlsm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk2f"><span class="kn">Lemma</span> <span class="nf">can_emit_constrained_vlsm</span> :
  <span class="kr">forall</span> (<span class="nv">m</span> : message),
    can_emit (constrained_vlsm X constraint) m -&gt;
      can_emit X m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  can_emit (constrained_vlsm X constraint) m
  ‚Üí can_emit X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk30" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk30"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  can_emit (constrained_vlsm X constraint) m
  ‚Üí can_emit X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk31" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk31"><span class="nb">intros</span> m Hce.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hce</var><span class="hyp-type"><b>: </b><span>can_emit (constrained_vlsm X constraint) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">can_emit X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk32"><span class="nb">destruct</span> X.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>vlsm_type</var><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span><br><span><var>vlsm_machine</var><span class="hyp-type"><b>: </b><span>VLSMMachine vlsm_type</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |}
‚Üí state
    {|
      vlsm_type := vlsm_type;
      vlsm_machine := vlsm_machine
    |} * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hce</var><span class="hyp-type"><b>: </b><span>can_emit
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">can_emit
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |} m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk33"><span class="nb">eapply</span> VLSM_incl_can_emit; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>vlsm_type</var><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span><br><span><var>vlsm_machine</var><span class="hyp-type"><b>: </b><span>VLSMMachine vlsm_type</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |}
‚Üí state
    {|
      vlsm_type := vlsm_type;
      vlsm_machine := vlsm_machine
    |} * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hce</var><span class="hyp-type"><b>: </b><span>can_emit
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl_part
  (constrained_vlsm_machine
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) vlsm_machine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (VLSM_incl_constrained_vlsm {| vlsm_type := vlsm_type; vlsm_machine := vlsm_machine; |}).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk34" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk34"><span class="kn">Lemma</span> <span class="nf">finite_valid_trace_from_constrained_vlsm</span> :
  <span class="kr">forall</span> (<span class="nv">s</span> : state _) (<span class="nv">tr</span> : list transition_item),
    finite_valid_trace_from (constrained_vlsm X constraint) s tr -&gt;
      finite_valid_trace_from X s tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state (constrained_vlsm X constraint)) (<span class="nv">tr</span> : 
                                               list
                                                 transition_item),
  finite_valid_trace_from
    (constrained_vlsm X constraint) s tr
  ‚Üí finite_valid_trace_from X s tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk35" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk35"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state (constrained_vlsm X constraint)) (<span class="nv">tr</span> : 
                                               list
                                                 transition_item),
  finite_valid_trace_from
    (constrained_vlsm X constraint) s tr
  ‚Üí finite_valid_trace_from X s tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk36"><span class="nb">intros</span> s tr Hfvtf.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (constrained_vlsm X constraint)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvtf</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  (constrained_vlsm X constraint) s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from X s tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk37"><span class="nb">destruct</span> X.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>vlsm_type</var><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span><br><span><var>vlsm_machine</var><span class="hyp-type"><b>: </b><span>VLSMMachine vlsm_type</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |}
‚Üí state
    {|
      vlsm_type := vlsm_type;
      vlsm_machine := vlsm_machine
    |} * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvtf</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |} s tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk38" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk38"><span class="nb">apply</span> VLSM_incl_finite_valid_trace_from; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>vlsm_type</var><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span><br><span><var>vlsm_machine</var><span class="hyp-type"><b>: </b><span>VLSMMachine vlsm_type</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |}
‚Üí state
    {|
      vlsm_type := vlsm_type;
      vlsm_machine := vlsm_machine
    |} * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvtf</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl_part
  (constrained_vlsm_machine
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) vlsm_machine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (VLSM_incl_constrained_vlsm {| vlsm_type := vlsm_type; vlsm_machine := vlsm_machine; |}).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk39" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk39"><span class="kn">Lemma</span> <span class="nf">finite_valid_trace_constrained_vlsm</span> :
  <span class="kr">forall</span> (<span class="nv">s</span> : state _) (<span class="nv">tr</span> : list transition_item),
    finite_valid_trace (constrained_vlsm X constraint) s tr -&gt;
      finite_valid_trace X s tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state (constrained_vlsm X constraint)) (<span class="nv">tr</span> : 
                                               list
                                                 transition_item),
  finite_valid_trace (constrained_vlsm X constraint) s
    tr ‚Üí finite_valid_trace X s tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk3a" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk3a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state (constrained_vlsm X constraint)) (<span class="nv">tr</span> : 
                                               list
                                                 transition_item),
  finite_valid_trace (constrained_vlsm X constraint) s
    tr ‚Üí finite_valid_trace X s tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk3b" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk3b"><span class="nb">intros</span> s tr Hfvt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (constrained_vlsm X constraint)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (constrained_vlsm X constraint) s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace X s tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk3c"><span class="nb">destruct</span> X.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>vlsm_type</var><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span><br><span><var>vlsm_machine</var><span class="hyp-type"><b>: </b><span>VLSMMachine vlsm_type</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |}
‚Üí state
    {|
      vlsm_type := vlsm_type;
      vlsm_machine := vlsm_machine
    |} * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |} s tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk3d" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk3d"><span class="nb">apply</span> VLSM_incl_finite_valid_trace; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>vlsm_type</var><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span><br><span><var>vlsm_machine</var><span class="hyp-type"><b>: </b><span>VLSMMachine vlsm_type</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |}
‚Üí state
    {|
      vlsm_type := vlsm_type;
      vlsm_machine := vlsm_machine
    |} * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl_part
  (constrained_vlsm_machine
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) vlsm_machine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (VLSM_incl_constrained_vlsm {| vlsm_type := vlsm_type; vlsm_machine := vlsm_machine; |}).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk3e" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk3e"><span class="kn">Lemma</span> <span class="nf">finite_valid_trace_from_to_constrained_vlsm</span> :
  <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : state _) (<span class="nv">tr</span> : list transition_item),
    finite_valid_trace_from_to (constrained_vlsm X constraint) s1 s2 tr -&gt;
      finite_valid_trace_from_to X s1 s2 tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> : state (constrained_vlsm X constraint)) 
  (<span class="nv">tr</span> : list transition_item),
  finite_valid_trace_from_to
    (constrained_vlsm X constraint) s1 s2 tr
  ‚Üí finite_valid_trace_from_to X s1 s2 tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk3f" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk3f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> : state (constrained_vlsm X constraint)) 
  (<span class="nv">tr</span> : list transition_item),
  finite_valid_trace_from_to
    (constrained_vlsm X constraint) s1 s2 tr
  ‚Üí finite_valid_trace_from_to X s1 s2 tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk40" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk40"><span class="nb">intros</span> s1 s2 tr Hfvtft.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>state (constrained_vlsm X constraint)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvtft</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (constrained_vlsm X constraint) s1 s2 tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to X s1 s2 tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk41" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk41"><span class="nb">destruct</span> X.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>vlsm_type</var><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span><br><span><var>vlsm_machine</var><span class="hyp-type"><b>: </b><span>VLSMMachine vlsm_type</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |}
‚Üí state
    {|
      vlsm_type := vlsm_type;
      vlsm_machine := vlsm_machine
    |} * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>state
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvtft</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) s1 s2 tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |} s1 s2 tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk42" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk42"><span class="nb">apply</span> VLSM_incl_finite_valid_trace_from_to; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>vlsm_type</var><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span><br><span><var>vlsm_machine</var><span class="hyp-type"><b>: </b><span>VLSMMachine vlsm_type</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |}
‚Üí state
    {|
      vlsm_type := vlsm_type;
      vlsm_machine := vlsm_machine
    |} * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>state
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvtft</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) s1 s2 tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl_part
  (constrained_vlsm_machine
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) vlsm_machine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (VLSM_incl_constrained_vlsm {| vlsm_type := vlsm_type; vlsm_machine := vlsm_machine; |}).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk43" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk43"><span class="kn">Lemma</span> <span class="nf">finite_valid_trace_init_to_constrained_vlsm</span> :
  <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : state _) (<span class="nv">tr</span> : list transition_item),
    finite_valid_trace_init_to (constrained_vlsm X constraint) s1 s2 tr -&gt;
      finite_valid_trace_init_to X s1 s2 tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> : state (constrained_vlsm X constraint)) 
  (<span class="nv">tr</span> : list transition_item),
  finite_valid_trace_init_to
    (constrained_vlsm X constraint) s1 s2 tr
  ‚Üí finite_valid_trace_init_to X s1 s2 tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk44" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk44"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> : state (constrained_vlsm X constraint)) 
  (<span class="nv">tr</span> : list transition_item),
  finite_valid_trace_init_to
    (constrained_vlsm X constraint) s1 s2 tr
  ‚Üí finite_valid_trace_init_to X s1 s2 tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk45" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk45"><span class="nb">intros</span> s1 s2 tr Hfvtit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>state (constrained_vlsm X constraint)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvtit</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (constrained_vlsm X constraint) s1 s2 tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to X s1 s2 tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk46" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk46"><span class="nb">destruct</span> X.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>vlsm_type</var><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span><br><span><var>vlsm_machine</var><span class="hyp-type"><b>: </b><span>VLSMMachine vlsm_type</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |}
‚Üí state
    {|
      vlsm_type := vlsm_type;
      vlsm_machine := vlsm_machine
    |} * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>state
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvtit</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) s1 s2 tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |} s1 s2 tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk47" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk47"><span class="nb">apply</span> VLSM_incl_finite_valid_trace_init_to; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>vlsm_type</var><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span><br><span><var>vlsm_machine</var><span class="hyp-type"><b>: </b><span>VLSMMachine vlsm_type</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |}
‚Üí state
    {|
      vlsm_type := vlsm_type;
      vlsm_machine := vlsm_machine
    |} * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>state
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvtit</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) s1 s2 tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl_part
  (constrained_vlsm_machine
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) vlsm_machine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (VLSM_incl_constrained_vlsm {| vlsm_type := vlsm_type; vlsm_machine := vlsm_machine; |}).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk48" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk48"><span class="kn">Lemma</span> <span class="nf">finite_valid_trace_init_to_emit_constrained_vlsm</span> :
  <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : state _) (<span class="nv">om</span> : option message) (<span class="nv">tr</span> : list transition_item),
    finite_valid_trace_init_to_emit (constrained_vlsm X constraint) s1 s2 om tr -&gt;
      finite_valid_trace_init_to_emit X s1 s2 om tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> : state (constrained_vlsm X constraint)) 
  (<span class="nv">om</span> : option message) (<span class="nv">tr</span> : list transition_item),
  finite_valid_trace_init_to_emit
    (constrained_vlsm X constraint) s1 s2 om tr
  ‚Üí finite_valid_trace_init_to_emit X s1 s2 om tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk49" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk49"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> : state (constrained_vlsm X constraint)) 
  (<span class="nv">om</span> : option message) (<span class="nv">tr</span> : list transition_item),
  finite_valid_trace_init_to_emit
    (constrained_vlsm X constraint) s1 s2 om tr
  ‚Üí finite_valid_trace_init_to_emit X s1 s2 om tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk4a" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk4a"><span class="nb">induction</span> <span class="mi">1</span>; <span class="nb">cbn</span>; [<span class="bp">by</span> <span class="nb">constructor</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state (constrained_vlsm X constraint)</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to_emit
  (constrained_vlsm X constraint) <span class="kr">is</span> s _om tl</span></span></span><br><span><var>iom_is, iom_s</var><span class="hyp-type"><b>: </b><span>state (constrained_vlsm X constraint)</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>iom_tl</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to_emit
  (constrained_vlsm X constraint) iom_is iom_s
  iom iom_tl</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (constrained_vlsm X constraint)</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid l (s, iom)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (constrained_vlsm X constraint)</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, iom) = (s&#39;, oom)</span></span></span><br><span><var>IHfinite_valid_trace_init_to_emit1</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to_emit
  X <span class="kr">is</span> s _om tl</span></span></span><br><span><var>IHfinite_valid_trace_init_to_emit2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to_emit
  X iom_is iom_s
  iom iom_tl</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to_emit X <span class="kr">is</span> s&#39; oom
  (tl ++
   [{|
      l := l;
      input := iom;
      destination := s&#39;;
      output := oom
    |}])</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> Hv; <span class="nb">econstructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk4b" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk4b"><span class="kn">Lemma</span> <span class="nf">empty_initial_message_or_final_output_constrained_vlsm</span> :
  <span class="kr">forall</span> (<span class="nv">tr</span> : list transition_item) (<span class="nv">om</span> : option message),
    empty_initial_message_or_final_output (constrained_vlsm X constraint) tr om -&gt;
      empty_initial_message_or_final_output X tr om.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">tr</span> : list transition_item) (<span class="nv">om</span> : option message),
  empty_initial_message_or_final_output
    (constrained_vlsm X constraint) tr om
  ‚Üí empty_initial_message_or_final_output X tr om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk4c" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk4c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">tr</span> : list transition_item) (<span class="nv">om</span> : option message),
  empty_initial_message_or_final_output
    (constrained_vlsm X constraint) tr om
  ‚Üí empty_initial_message_or_final_output X tr om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk4d" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk4d"><span class="nb">intros</span> tr om.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">empty_initial_message_or_final_output
  (constrained_vlsm X constraint) tr om
‚Üí empty_initial_message_or_final_output X tr om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk4e" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk4e"><span class="nb">unfold</span> empty_initial_message_or_final_output; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> ListExtras.has_last_or_null tr <span class="kr">with</span>
| inleft (existT x (x0 ‚Üæ _)) =&gt; output x0 = om
| inright _ =&gt;
    option_initial_message_prop
      (constrained_vlsm_machine X constraint) om
<span class="kr">end</span>
‚Üí <span class="kr">match</span> ListExtras.has_last_or_null tr <span class="kr">with</span>
  | inleft (existT x (x0 ‚Üæ _)) =&gt; output x0 = om
  | inright _ =&gt; option_initial_message_prop X om
  <span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> case_match.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk4f" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk4f"><span class="kn">Lemma</span> <span class="nf">infinite_valid_trace_from_constrained_vlsm</span> :
  <span class="kr">forall</span> (<span class="nv">s</span> : state _) (<span class="nv">tr</span> : Stream transition_item),
    infinite_valid_trace_from (constrained_vlsm X constraint) s tr -&gt;
      infinite_valid_trace_from X s tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state (constrained_vlsm X constraint)) (<span class="nv">tr</span> : 
                                               Stream
                                                 transition_item),
  infinite_valid_trace_from
    (constrained_vlsm X constraint) s tr
  ‚Üí infinite_valid_trace_from X s tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk50" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk50"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state (constrained_vlsm X constraint)) (<span class="nv">tr</span> : 
                                               Stream
                                                 transition_item),
  infinite_valid_trace_from
    (constrained_vlsm X constraint) s tr
  ‚Üí infinite_valid_trace_from X s tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk51" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk51"><span class="nb">intros</span> s tr Hivtf.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (constrained_vlsm X constraint)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>Stream transition_item</span></span></span><br><span><var>Hivtf</var><span class="hyp-type"><b>: </b><span>infinite_valid_trace_from
  (constrained_vlsm X constraint) s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">infinite_valid_trace_from X s tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk52" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk52"><span class="nb">destruct</span> X.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>vlsm_type</var><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span><br><span><var>vlsm_machine</var><span class="hyp-type"><b>: </b><span>VLSMMachine vlsm_type</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |}
‚Üí state
    {|
      vlsm_type := vlsm_type;
      vlsm_machine := vlsm_machine
    |} * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>Stream transition_item</span></span></span><br><span><var>Hivtf</var><span class="hyp-type"><b>: </b><span>infinite_valid_trace_from
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">infinite_valid_trace_from
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |} s tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk53" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk53"><span class="nb">apply</span> VLSM_incl_infinite_valid_trace_from; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>vlsm_type</var><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span><br><span><var>vlsm_machine</var><span class="hyp-type"><b>: </b><span>VLSMMachine vlsm_type</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |}
‚Üí state
    {|
      vlsm_type := vlsm_type;
      vlsm_machine := vlsm_machine
    |} * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>Stream transition_item</span></span></span><br><span><var>Hivtf</var><span class="hyp-type"><b>: </b><span>infinite_valid_trace_from
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl_part
  (constrained_vlsm_machine
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) vlsm_machine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (VLSM_incl_constrained_vlsm {| vlsm_type := vlsm_type; vlsm_machine := vlsm_machine; |}).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk54" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk54"><span class="kn">Lemma</span> <span class="nf">infinite_valid_trace_constrained_vlsm</span> :
  <span class="kr">forall</span> (<span class="nv">s</span> : state _) (<span class="nv">tr</span> : Stream transition_item),
    infinite_valid_trace (constrained_vlsm X constraint) s tr -&gt;
      infinite_valid_trace X s tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state (constrained_vlsm X constraint)) (<span class="nv">tr</span> : 
                                               Stream
                                                 transition_item),
  infinite_valid_trace (constrained_vlsm X constraint)
    s tr ‚Üí infinite_valid_trace X s tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk55" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk55"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state (constrained_vlsm X constraint)) (<span class="nv">tr</span> : 
                                               Stream
                                                 transition_item),
  infinite_valid_trace (constrained_vlsm X constraint)
    s tr ‚Üí infinite_valid_trace X s tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk56" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk56"><span class="nb">intros</span> s tr Hivt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (constrained_vlsm X constraint)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>Stream transition_item</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>infinite_valid_trace
  (constrained_vlsm X constraint) s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">infinite_valid_trace X s tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk57" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk57"><span class="nb">destruct</span> X.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>vlsm_type</var><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span><br><span><var>vlsm_machine</var><span class="hyp-type"><b>: </b><span>VLSMMachine vlsm_type</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |}
‚Üí state
    {|
      vlsm_type := vlsm_type;
      vlsm_machine := vlsm_machine
    |} * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>Stream transition_item</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>infinite_valid_trace
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">infinite_valid_trace
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |} s tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk58" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk58"><span class="nb">apply</span> VLSM_incl_infinite_valid_trace; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>vlsm_type</var><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span><br><span><var>vlsm_machine</var><span class="hyp-type"><b>: </b><span>VLSMMachine vlsm_type</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |}
‚Üí state
    {|
      vlsm_type := vlsm_type;
      vlsm_machine := vlsm_machine
    |} * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>Stream transition_item</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>infinite_valid_trace
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl_part
  (constrained_vlsm_machine
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) vlsm_machine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (VLSM_incl_constrained_vlsm {| vlsm_type := vlsm_type; vlsm_machine := vlsm_machine; |}).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk59" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk59"><span class="kn">Lemma</span> <span class="nf">valid_trace_from_prop_constrained_vlsm</span> :
  <span class="kr">forall</span> (<span class="nv">tr</span> : Trace),
    valid_trace_from_prop (constrained_vlsm X constraint) tr -&gt;
      valid_trace_from_prop X tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">tr</span> : Trace,
  valid_trace_from_prop
    (constrained_vlsm X constraint) tr
  ‚Üí valid_trace_from_prop X tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk5a" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk5a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">tr</span> : Trace,
  valid_trace_from_prop
    (constrained_vlsm X constraint) tr
  ‚Üí valid_trace_from_prop X tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk5b" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk5b"><span class="nb">intros</span> [] Hvtfp; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (constrained_vlsm X constraint)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hvtfp</var><span class="hyp-type"><b>: </b><span>valid_trace_from_prop
  (constrained_vlsm X constraint) 
  (Finite s l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from X s l</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ConstrainedVLSM-v-chk5c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (constrained_vlsm X constraint)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>Stream transition_item</span></span></span><br><span><var>Hvtfp</var><span class="hyp-type"><b>: </b><span>valid_trace_from_prop
  (constrained_vlsm X constraint)
  (Infinite s s0)</span></span></span><br></div><label class="goal-separator" for="ConstrainedVLSM-v-chk5c"><hr></label><div class="goal-conclusion">infinite_valid_trace_from X s s0</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk5d" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk5d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (constrained_vlsm X constraint)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hvtfp</var><span class="hyp-type"><b>: </b><span>valid_trace_from_prop
  (constrained_vlsm X constraint) 
  (Finite s l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from X s l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> finite_valid_trace_from_constrained_vlsm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk5e" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk5e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (constrained_vlsm X constraint)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>Stream transition_item</span></span></span><br><span><var>Hvtfp</var><span class="hyp-type"><b>: </b><span>valid_trace_from_prop
  (constrained_vlsm X constraint)
  (Infinite s s0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">infinite_valid_trace_from X s s0</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> infinite_valid_trace_from_constrained_vlsm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk5f" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk5f"><span class="kn">Lemma</span> <span class="nf">valid_trace_prop_constrained_vlsm</span> :
  <span class="kr">forall</span> (<span class="nv">tr</span> : Trace),
    valid_trace_prop (constrained_vlsm X constraint) tr -&gt;
      valid_trace_prop X tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">tr</span> : Trace,
  valid_trace_prop (constrained_vlsm X constraint) tr
  ‚Üí valid_trace_prop X tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk60" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk60"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">tr</span> : Trace,
  valid_trace_prop (constrained_vlsm X constraint) tr
  ‚Üí valid_trace_prop X tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk61" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk61"><span class="nb">intros</span> tr Hvtp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>Trace</span></span></span><br><span><var>Hvtp</var><span class="hyp-type"><b>: </b><span>valid_trace_prop
  (constrained_vlsm X constraint) tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_trace_prop X tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk62" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk62"><span class="nb">destruct</span> X.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>vlsm_type</var><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span><br><span><var>vlsm_machine</var><span class="hyp-type"><b>: </b><span>VLSMMachine vlsm_type</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |}
‚Üí state
    {|
      vlsm_type := vlsm_type;
      vlsm_machine := vlsm_machine
    |} * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>Trace</span></span></span><br><span><var>Hvtp</var><span class="hyp-type"><b>: </b><span>valid_trace_prop
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_trace_prop
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |} tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk63" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk63"><span class="nb">apply</span> VLSM_incl_valid_trace; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>vlsm_type</var><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span><br><span><var>vlsm_machine</var><span class="hyp-type"><b>: </b><span>VLSMMachine vlsm_type</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |}
‚Üí state
    {|
      vlsm_type := vlsm_type;
      vlsm_machine := vlsm_machine
    |} * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>Trace</span></span></span><br><span><var>Hvtp</var><span class="hyp-type"><b>: </b><span>valid_trace_prop
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl_part
  (constrained_vlsm_machine
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) vlsm_machine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (VLSM_incl_constrained_vlsm {| vlsm_type := vlsm_type; vlsm_machine := vlsm_machine; |}).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk64" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk64"><span class="kn">Lemma</span> <span class="nf">in_futures_constrained_vlsm</span> :
  <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : state _),
    in_futures (constrained_vlsm X constraint) s1 s2 -&gt;
      in_futures X s1 s2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : state (constrained_vlsm X constraint),
  in_futures (constrained_vlsm X constraint) s1 s2
  ‚Üí in_futures X s1 s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk65" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk65"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : state (constrained_vlsm X constraint),
  in_futures (constrained_vlsm X constraint) s1 s2
  ‚Üí in_futures X s1 s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk66" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk66"><span class="nb">intros</span> s1 s2 Hif.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>state (constrained_vlsm X constraint)</span></span></span><br><span><var>Hif</var><span class="hyp-type"><b>: </b><span>in_futures (constrained_vlsm X constraint) s1 s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">in_futures X s1 s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk67" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk67"><span class="nb">destruct</span> X.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>vlsm_type</var><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span><br><span><var>vlsm_machine</var><span class="hyp-type"><b>: </b><span>VLSMMachine vlsm_type</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |}
‚Üí state
    {|
      vlsm_type := vlsm_type;
      vlsm_machine := vlsm_machine
    |} * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>state
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint)</span></span></span><br><span><var>Hif</var><span class="hyp-type"><b>: </b><span>in_futures
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) s1 s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">in_futures
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |} s1 s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk68" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk68"><span class="nb">apply</span> VLSM_incl_in_futures; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>vlsm_type</var><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span><br><span><var>vlsm_machine</var><span class="hyp-type"><b>: </b><span>VLSMMachine vlsm_type</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := vlsm_type;
    vlsm_machine := vlsm_machine
  |}
‚Üí state
    {|
      vlsm_type := vlsm_type;
      vlsm_machine := vlsm_machine
    |} * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>state
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint)</span></span></span><br><span><var>Hif</var><span class="hyp-type"><b>: </b><span>in_futures
  (constrained_vlsm
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) s1 s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl_part
  (constrained_vlsm_machine
     {|
       vlsm_type := vlsm_type;
       vlsm_machine := vlsm_machine
     |} constraint) vlsm_machine</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (VLSM_incl_constrained_vlsm {| vlsm_type := vlsm_type; vlsm_machine := vlsm_machine; |}).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sec_constrained_vlsm_lemmas</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sec_constrained_vlsm_commutation_lemmas</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk69" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk69"><span class="kn">Lemma</span> <span class="nf">constrained_preloaded_comm</span> :
  <span class="kr">forall</span> `(X : VLSM message) (constraint : label X -&gt; state X * option message -&gt; <span class="kt">Prop</span>)
    (initial : message -&gt; <span class="kt">Prop</span>),
      VLSM_eq
        (constrained_vlsm (preloaded_vlsm X initial) constraint)
        (preloaded_vlsm (constrained_vlsm X constraint) initial).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">message</span> : <span class="kt">Type</span>) (<span class="nv">X</span> : VLSM message) (<span class="nv">constraint</span> : 
                                       label X
                                       ‚Üí state X *
                                         option
                                           message
                                         ‚Üí <span class="kt">Prop</span>) (<span class="nv">initial</span> : 
                                                 message
                                                 ‚Üí <span class="kt">Prop</span>),
  VLSM_eq
    (constrained_vlsm (preloaded_vlsm X initial)
       constraint)
    (preloaded_vlsm (constrained_vlsm X constraint)
       initial)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk6a" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk6a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">message</span> : <span class="kt">Type</span>) (<span class="nv">X</span> : VLSM message) (<span class="nv">constraint</span> : 
                                       label X
                                       ‚Üí state X *
                                         option
                                           message
                                         ‚Üí <span class="kt">Prop</span>) (<span class="nv">initial</span> : 
                                                 message
                                                 ‚Üí <span class="kt">Prop</span>),
  VLSM_eq
    (constrained_vlsm (preloaded_vlsm X initial)
       constraint)
    (preloaded_vlsm (constrained_vlsm X constraint)
       initial)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk6b" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk6b"><span class="nb">intros</span> message X.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">constraint</span> : label X
                ‚Üí state X * option message ‚Üí <span class="kt">Prop</span>) 
  (<span class="nv">initial</span> : message ‚Üí <span class="kt">Prop</span>),
  VLSM_eq
    (constrained_vlsm (preloaded_vlsm X initial)
       constraint)
    (preloaded_vlsm (constrained_vlsm X constraint)
       initial)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk6c" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk6c"><span class="nb">rewrite</span> &lt;- (mk_vlsm_machine X); <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">constraint</span> : label X
                ‚Üí state X * option message ‚Üí <span class="kt">Prop</span>) 
  (<span class="nv">initial</span> : message ‚Üí <span class="kt">Prop</span>),
  VLSM_eq_part
    (constrained_vlsm_machine
       (preloaded_vlsm
          {| vlsm_type := X; vlsm_machine := X |}
          initial) constraint)
    (preloaded_vlsm_machine
       (constrained_vlsm
          {| vlsm_type := X; vlsm_machine := X |}
          constraint) initial)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk6d" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk6d"><span class="nb">intros</span> constraint initial.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>initial</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_eq_part
  (constrained_vlsm_machine
     (preloaded_vlsm
        {| vlsm_type := X; vlsm_machine := X |}
        initial) constraint)
  (preloaded_vlsm_machine
     (constrained_vlsm
        {| vlsm_type := X; vlsm_machine := X |}
        constraint) initial)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">split</span>; <span class="nb">apply</span> (VLSM_incl_embedding_iff (constrained_vlsm_machine
    (preloaded_vlsm X initial) constraint)), basic_VLSM_strong_embedding; <span class="nb">red</span>; <span class="nb">cbn</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk6e" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk6e"><span class="kn">Lemma</span> <span class="nf">VLSM_incl_constrained_preloaded</span> :
  <span class="kr">forall</span> `(X : VLSM message) (constraint : label X -&gt; state X * option message -&gt; <span class="kt">Prop</span>)
    (initial : message -&gt; <span class="kt">Prop</span>),
      VLSM_incl
        (constrained_vlsm (preloaded_vlsm X initial) constraint)
        (preloaded_vlsm (constrained_vlsm X constraint) initial).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">message</span> : <span class="kt">Type</span>) (<span class="nv">X</span> : VLSM message) (<span class="nv">constraint</span> : 
                                       label X
                                       ‚Üí state X *
                                         option
                                           message
                                         ‚Üí <span class="kt">Prop</span>) (<span class="nv">initial</span> : 
                                                 message
                                                 ‚Üí <span class="kt">Prop</span>),
  VLSM_incl
    (constrained_vlsm (preloaded_vlsm X initial)
       constraint)
    (preloaded_vlsm (constrained_vlsm X constraint)
       initial)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk6f" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk6f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">message</span> : <span class="kt">Type</span>) (<span class="nv">X</span> : VLSM message) (<span class="nv">constraint</span> : 
                                       label X
                                       ‚Üí state X *
                                         option
                                           message
                                         ‚Üí <span class="kt">Prop</span>) (<span class="nv">initial</span> : 
                                                 message
                                                 ‚Üí <span class="kt">Prop</span>),
  VLSM_incl
    (constrained_vlsm (preloaded_vlsm X initial)
       constraint)
    (preloaded_vlsm (constrained_vlsm X constraint)
       initial)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span>; <span class="nb">apply</span> constrained_preloaded_comm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk70" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk70"><span class="kn">Lemma</span> <span class="nf">VLSM_incl_preloaded_constrained</span> :
  <span class="kr">forall</span> `(X : VLSM message) (constraint : label X -&gt; state X * option message -&gt; <span class="kt">Prop</span>)
    (initial : message -&gt; <span class="kt">Prop</span>),
      VLSM_incl
        (preloaded_vlsm (constrained_vlsm X constraint) initial)
        (constrained_vlsm (preloaded_vlsm X initial) constraint).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">message</span> : <span class="kt">Type</span>) (<span class="nv">X</span> : VLSM message) (<span class="nv">constraint</span> : 
                                       label X
                                       ‚Üí state X *
                                         option
                                           message
                                         ‚Üí <span class="kt">Prop</span>) (<span class="nv">initial</span> : 
                                                 message
                                                 ‚Üí <span class="kt">Prop</span>),
  VLSM_incl
    (preloaded_vlsm (constrained_vlsm X constraint)
       initial)
    (constrained_vlsm (preloaded_vlsm X initial)
       constraint)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk71" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk71"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">message</span> : <span class="kt">Type</span>) (<span class="nv">X</span> : VLSM message) (<span class="nv">constraint</span> : 
                                       label X
                                       ‚Üí state X *
                                         option
                                           message
                                         ‚Üí <span class="kt">Prop</span>) (<span class="nv">initial</span> : 
                                                 message
                                                 ‚Üí <span class="kt">Prop</span>),
  VLSM_incl
    (preloaded_vlsm (constrained_vlsm X constraint)
       initial)
    (constrained_vlsm (preloaded_vlsm X initial)
       constraint)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span>; <span class="nb">apply</span> constrained_preloaded_comm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sec_constrained_vlsm_commutation_lemmas</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sec_constraint_subsumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  `(X : VLSM message)
  (constraint : label X -&gt; state X * option message -&gt; <span class="kt">Prop</span>)
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk72" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk72"><span class="kn">Lemma</span> <span class="nf">constrained_preloaded_vlsm_incl_preloaded_with_all_messages</span> :
  <span class="kr">forall</span> (<span class="nv">P</span> : message -&gt; <span class="kt">Prop</span>),
    VLSM_incl
      (preloaded_vlsm (constrained_vlsm X constraint) P)
      (preloaded_with_all_messages_vlsm X).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">P</span> : message ‚Üí <span class="kt">Prop</span>,
  VLSM_incl
    (preloaded_vlsm (constrained_vlsm X constraint) P)
    (preloaded_with_all_messages_vlsm X)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk73" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk73"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">P</span> : message ‚Üí <span class="kt">Prop</span>,
  VLSM_incl
    (preloaded_vlsm (constrained_vlsm X constraint) P)
    (preloaded_with_all_messages_vlsm X)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span>; <span class="nb">apply</span> basic_VLSM_strong_incl; <span class="nb">cbv</span>; [| itauto.. |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk74" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk74"><span class="kn">Lemma</span> <span class="nf">constrained_preloaded_incl</span> :
  VLSM_incl (constrained_vlsm X constraint) (preloaded_with_all_messages_vlsm X).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl (constrained_vlsm X constraint)
  (preloaded_with_all_messages_vlsm X)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk75" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk75"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl (constrained_vlsm X constraint)
  (preloaded_with_all_messages_vlsm X)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk76" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk76"><span class="nb">apply</span> (@VLSM_incl_trans _ _ _ X).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl
  {|
    vlsm_type := X;
    vlsm_machine :=
      constrained_vlsm_machine X constraint
  |} {| vlsm_type := X; vlsm_machine := X |}</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ConstrainedVLSM-v-chk77" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><label class="goal-separator" for="ConstrainedVLSM-v-chk77"><hr></label><div class="goal-conclusion">VLSM_incl {| vlsm_type := X; vlsm_machine := X |}
  {|
    vlsm_type := X;
    vlsm_machine :=
      preloaded_vlsm_machine X (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |}</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk78" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk78">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl
  {|
    vlsm_type := X;
    vlsm_machine :=
      constrained_vlsm_machine X constraint
  |} {| vlsm_type := X; vlsm_machine := X |}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">cbn</span>; <span class="nb">apply</span> VLSM_incl_constrained_vlsm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk79" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk79">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl {| vlsm_type := X; vlsm_machine := X |}
  {|
    vlsm_type := X;
    vlsm_machine :=
      preloaded_vlsm_machine X (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (vlsm_incl_preloaded_with_all_messages_vlsm X).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  (<span class="nv">constraint1</span> <span class="nv">constraint2</span> : label X -&gt; state X * option message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">X1</span> := constrained_vlsm X constraint1)
  (<span class="nv">X2</span> := constrained_vlsm X constraint2)
  .</span></span></pre><div class="doc">
  A <code>constraint1</code> is subsumed by <code>constraint2</code> if <code>constraint1</code> is stronger
  than <code>constraint2</code> for any input.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">strong_constraint_subsumption</span> : <span class="kt">Prop</span> :=
  <span class="kr">forall</span> (<span class="nv">l</span> : label X) (<span class="nv">som</span> : state X * option message),
    constraint1 l som -&gt; constraint2 l som.</span></span></pre><div class="doc">
  A weaker version of <span class="inlinecode"><span class="id" title="var">strong_constraint_subsumption</span></span> requiring <span class="inlinecode"><span class="id" title="var">input_valid</span></span>ity
  w.r.t. <span class="inlinecode"><span class="id" title="var">preloaded_with_all_messages_vlsm</span></span> as a precondition for the subsumption
  property.

<div class="paragraph"> </div>

  This definition is useful in proving <span class="inlinecode"><span class="id" title="var">VLSM_incl</span></span>usions between <span class="inlinecode"><span class="id" title="var">VLSM</span></span>s
  preloaded with all messages (Lemma <span class="inlinecode"><span class="id" title="var">preloaded_constraint_subsumption_incl</span></span>).

<div class="paragraph"> </div>

  Although there are currently no explicit cases for its usage, it might be more
  useful than the <span class="inlinecode"><span class="id" title="var">strong_constraint_subsumption</span></span> property in cases where proving
  constraint subsumption relies on the state being valid and/or the message
  being valid.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">preloaded_constraint_subsumption</span> : <span class="kt">Prop</span> :=
  <span class="kr">forall</span> (<span class="nv">l</span> : label X) (<span class="nv">som</span> : state _ * option message),
    input_constrained (constrained_vlsm X constraint1) l som -&gt;
      constraint2 l som.</span></span></pre><div class="doc">
  A weaker version of <span class="inlinecode"><span class="id" title="var">preloaded_constraint_subsumption</span></span> requiring <span class="inlinecode"><span class="id" title="var">input_valid</span></span>ity
  as a precondition for the subsumption property.

<div class="paragraph"> </div>

  This definition is usually useful in proving <span class="inlinecode"><span class="id" title="var">VLSM_incl</span></span>usions between regular
  <span class="inlinecode"><span class="id" title="var">VLSM</span></span>s (Lemma <span class="inlinecode"><span class="id" title="var">constraint_subsumption_incl</span></span>).

<div class="paragraph"> </div>

  It is more useful than the <span class="inlinecode"><span class="id" title="var">strong_constraint_subsumption</span></span> property in cases
  where proving constraint subsumption relies on the state/message being valid
  and/or the message being valid (e.g., Lemma <span class="inlinecode"><span class="id" title="var">Fixed_incl_StrongFixed</span></span>).

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">input_valid_constraint_subsumption</span> : <span class="kt">Prop</span> :=
  <span class="kr">forall</span> (<span class="nv">l</span> : label X) (<span class="nv">som</span> : state X * option message),
    input_valid (constrained_vlsm X constraint1) l som -&gt; constraint2 l som.</span></span></pre><div class="doc">
  The weakest form of constraint subsumption also requires that the input
  state and message are valid for the composition under the second constraint.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">weak_input_valid_constraint_subsumption</span> : <span class="kt">Prop</span> :=
  <span class="kr">forall</span> (<span class="nv">l</span> : label X) (<span class="nv">som</span> : state X * option message),
    input_valid (constrained_vlsm X constraint1) l som -&gt;
    valid_state_prop (constrained_vlsm X constraint2) som.<span class="mi">1</span> -&gt;
    option_valid_message_prop (constrained_vlsm X constraint2) som.<span class="mi">2</span> -&gt;
      constraint2 l som.</span></span></pre><div class="doc">
  Let <code>X1</code>, <code>X2</code> be two constrained VLSMs constraints <code>constraint1</code>
  and <code>constraint2</code>, respectively. Further assume that <code>constraint1</code>
  is subsumed by <code>constraint2</code>.

<div class="paragraph"> </div>

  We will show that <code>X1</code> is trace-included into <code>X2</code> by applying
  the lemma <span class="inlinecode"><span class="id" title="var">basic_VLSM_incl</span></span>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk7a" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk7a"><span class="kn">Lemma</span> <span class="nf">weak_constraint_subsumption_incl</span>
  (<span class="nv">Hsubsumption</span> : weak_input_valid_constraint_subsumption)
  : VLSM_incl X1 X2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>weak_input_valid_constraint_subsumption</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl X1 X2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk7b" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk7b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>weak_input_valid_constraint_subsumption</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl X1 X2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk7c" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk7c"><span class="nb">apply</span> basic_VLSM_incl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>weak_input_valid_constraint_subsumption</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_incl_initial_state_preservation
  (constrained_vlsm_machine X constraint1)
  (constrained_vlsm_machine X constraint2)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ConstrainedVLSM-v-chk7d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>weak_input_valid_constraint_subsumption</span></span></span><br></div><label class="goal-separator" for="ConstrainedVLSM-v-chk7d"><hr></label><div class="goal-conclusion">weak_incl_initial_message_preservation
  (constrained_vlsm_machine X constraint1)
  (constrained_vlsm_machine X constraint2)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ConstrainedVLSM-v-chk7e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>weak_input_valid_constraint_subsumption</span></span></span><br></div><label class="goal-separator" for="ConstrainedVLSM-v-chk7e"><hr></label><div class="goal-conclusion">weak_incl_valid_preservation
  (constrained_vlsm_machine X constraint1)
  (constrained_vlsm_machine X constraint2)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ConstrainedVLSM-v-chk7f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>weak_input_valid_constraint_subsumption</span></span></span><br></div><label class="goal-separator" for="ConstrainedVLSM-v-chk7f"><hr></label><div class="goal-conclusion">weak_incl_transition_preservation
  (constrained_vlsm_machine X constraint1)
  (constrained_vlsm_machine X constraint2)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk80" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk80">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>weak_input_valid_constraint_subsumption</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_incl_initial_state_preservation
  (constrained_vlsm_machine X constraint1)
  (constrained_vlsm_machine X constraint2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> s Hs.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk81" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk81">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>weak_input_valid_constraint_subsumption</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_incl_initial_message_preservation
  (constrained_vlsm_machine X constraint1)
  (constrained_vlsm_machine X constraint2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> _ _ m _ _ Hm; <span class="nb">apply</span> initial_message_is_valid.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk82" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk82">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>weak_input_valid_constraint_subsumption</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_incl_valid_preservation
  (constrained_vlsm_machine X constraint1)
  (constrained_vlsm_machine X constraint2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">split</span>; [<span class="nb">apply</span> Hv | <span class="nb">auto</span>].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk83" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk83">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>weak_input_valid_constraint_subsumption</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_incl_transition_preservation
  (constrained_vlsm_machine X constraint1)
  (constrained_vlsm_machine X constraint2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> l s om s&#39; om&#39; Ht; <span class="nb">apply</span> Ht.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk84" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk84"><span class="kn">Lemma</span> <span class="nf">constraint_subsumption_input_valid</span>
  (<span class="nv">Hsubsumption</span> : input_valid_constraint_subsumption)
  (<span class="nv">l</span> : label X1)
  (<span class="nv">s</span> : state X1)
  (<span class="nv">om</span> : option message)
  (<span class="nv">Hv</span> : input_valid X1 l (s, om))
  : valid X2 l (s, om).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>input_valid_constraint_subsumption</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label X1</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X1</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid X1 l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid l (s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk85" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk85"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>input_valid_constraint_subsumption</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label X1</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X1</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid X1 l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid l (s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">split</span>; [<span class="nb">apply</span> Hv | <span class="nb">apply</span> Hsubsumption].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk86" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk86"><span class="kn">Lemma</span> <span class="nf">constraint_subsumption_valid_state_message_preservation</span>
  (<span class="nv">Hsubsumption</span> : input_valid_constraint_subsumption)
  (<span class="nv">s</span> : state X1)
  (<span class="nv">om</span> : option message)
  (<span class="nv">Hps</span> : valid_state_message_prop X1 s om)
  : valid_state_message_prop X2 s om.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>input_valid_constraint_subsumption</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X1</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop X1 s om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop X2 s om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk87" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk87"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>input_valid_constraint_subsumption</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X1</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop X1 s om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop X2 s om</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk88" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk88"><span class="nb">induction</span> Hps; [<span class="bp">by</span> <span class="nb">apply</span> valid_initial_state_message |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>input_valid_constraint_subsumption</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X1</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop X1 s _om</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state X1</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop X1 _s om</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label X1</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state X1</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>IHHps1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop X2 s _om</span></span></span><br><span><var>IHHps2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop X2 _s om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop X2 s&#39; om&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk89" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk89"><span class="nb">apply</span> (valid_generated_state_message X2) <span class="kr">with</span> s _om _s om l; <span class="kp">only</span> <span class="mi">1</span>-<span class="mi">2</span>, <span class="mi">4</span>: <span class="bp">done</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>input_valid_constraint_subsumption</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X1</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop X1 s _om</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state X1</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop X1 _s om</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label X1</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state X1</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>IHHps1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop X2 s _om</span></span></span><br><span><var>IHHps2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop X2 _s om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid l (s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk8a" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk8a"><span class="nb">apply</span> constraint_subsumption_input_valid; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>input_valid_constraint_subsumption</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X1</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop X1 s _om</span></span></span><br><span><var>_s</var><span class="hyp-type"><b>: </b><span>state X1</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hps2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop X1 _s om</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label X1</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid l (s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state X1</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition l (s, om) = (s&#39;, om&#39;)</span></span></span><br><span><var>IHHps1</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop X2 s _om</span></span></span><br><span><var>IHHps2</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop X2 _s om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid X1 l (s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> split_and!; [<span class="kr">exists</span> <span class="nv">_om</span> | <span class="kr">exists</span> <span class="nv">_s</span> |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk8b" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk8b"><span class="kn">Lemma</span> <span class="nf">constraint_subsumption_incl</span>
  (<span class="nv">Hsubsumption</span> : input_valid_constraint_subsumption)
  : VLSM_incl X1 X2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>input_valid_constraint_subsumption</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl X1 X2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk8c" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk8c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>input_valid_constraint_subsumption</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl X1 X2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk8d" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk8d"><span class="nb">apply</span> basic_VLSM_incl; <span class="nb">intro</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>input_valid_constraint_subsumption</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  {|
    vlsm_type := X;
    vlsm_machine :=
      constrained_vlsm_machine X constraint1
  |}</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">initial_state_prop (id s)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ConstrainedVLSM-v-chk8e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>input_valid_constraint_subsumption</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := X;
    vlsm_machine :=
      constrained_vlsm_machine X constraint1
  |}</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  {|
    vlsm_type := X;
    vlsm_machine :=
      constrained_vlsm_machine X constraint1
  |}</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid
  {|
    vlsm_type := X;
    vlsm_machine :=
      constrained_vlsm_machine X constraint1
  |} l (s, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vlsm_type := X;
    vlsm_machine :=
      constrained_vlsm_machine X constraint2
  |} (id s)</span></span></span><br><span><var>HmX</var><span class="hyp-type"><b>: </b><span>initial_message_prop m</span></span></span><br></div><label class="goal-separator" for="ConstrainedVLSM-v-chk8e"><hr></label><div class="goal-conclusion">valid_message_prop
  {|
    vlsm_type := X;
    vlsm_machine :=
      constrained_vlsm_machine X constraint2
  |} m</div></blockquote><input class="alectryon-extra-goal-toggle" id="ConstrainedVLSM-v-chk8f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>input_valid_constraint_subsumption</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := X;
    vlsm_machine :=
      constrained_vlsm_machine X constraint1
  |}</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  {|
    vlsm_type := X;
    vlsm_machine :=
      constrained_vlsm_machine X constraint1
  |}</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid
  {|
    vlsm_type := X;
    vlsm_machine :=
      constrained_vlsm_machine X constraint1
  |} l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vlsm_type := X;
    vlsm_machine :=
      constrained_vlsm_machine X constraint2
  |} (id s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  {|
    vlsm_type := X;
    vlsm_machine :=
      constrained_vlsm_machine X constraint2
  |} om</span></span></span><br></div><label class="goal-separator" for="ConstrainedVLSM-v-chk8f"><hr></label><div class="goal-conclusion">valid (id l) (id s, om)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ConstrainedVLSM-v-chk90" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>input_valid_constraint_subsumption</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := X;
    vlsm_machine :=
      constrained_vlsm_machine X constraint1
  |}</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  {|
    vlsm_type := X;
    vlsm_machine :=
      constrained_vlsm_machine X constraint1
  |}</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state
  {|
    vlsm_type := X;
    vlsm_machine :=
      constrained_vlsm_machine X constraint1
  |}</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  {|
    vlsm_type := X;
    vlsm_machine :=
      constrained_vlsm_machine X constraint1
  |} l (s, om) (s&#39;, om&#39;)</span></span></span><br></div><label class="goal-separator" for="ConstrainedVLSM-v-chk90"><hr></label><div class="goal-conclusion">transition (id l) (id s, om) = (id s&#39;, om&#39;)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk91" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk91">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>input_valid_constraint_subsumption</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  {|
    vlsm_type := X;
    vlsm_machine :=
      constrained_vlsm_machine X constraint1
  |}</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">initial_state_prop (id s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">done</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk92" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk92">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>input_valid_constraint_subsumption</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := X;
    vlsm_machine :=
      constrained_vlsm_machine X constraint1
  |}</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  {|
    vlsm_type := X;
    vlsm_machine :=
      constrained_vlsm_machine X constraint1
  |}</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid
  {|
    vlsm_type := X;
    vlsm_machine :=
      constrained_vlsm_machine X constraint1
  |} l (s, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vlsm_type := X;
    vlsm_machine :=
      constrained_vlsm_machine X constraint2
  |} (id s)</span></span></span><br><span><var>HmX</var><span class="hyp-type"><b>: </b><span>initial_message_prop m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop
  {|
    vlsm_type := X;
    vlsm_machine :=
      constrained_vlsm_machine X constraint2
  |} m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> initial_message_is_valid.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk93" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk93">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>input_valid_constraint_subsumption</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := X;
    vlsm_machine :=
      constrained_vlsm_machine X constraint1
  |}</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  {|
    vlsm_type := X;
    vlsm_machine :=
      constrained_vlsm_machine X constraint1
  |}</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid
  {|
    vlsm_type := X;
    vlsm_machine :=
      constrained_vlsm_machine X constraint1
  |} l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vlsm_type := X;
    vlsm_machine :=
      constrained_vlsm_machine X constraint2
  |} (id s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  {|
    vlsm_type := X;
    vlsm_machine :=
      constrained_vlsm_machine X constraint2
  |} om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid (id l) (id s, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> constraint_subsumption_input_valid.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk94" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk94">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>input_valid_constraint_subsumption</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := X;
    vlsm_machine :=
      constrained_vlsm_machine X constraint1
  |}</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  {|
    vlsm_type := X;
    vlsm_machine :=
      constrained_vlsm_machine X constraint1
  |}</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state
  {|
    vlsm_type := X;
    vlsm_machine :=
      constrained_vlsm_machine X constraint1
  |}</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  {|
    vlsm_type := X;
    vlsm_machine :=
      constrained_vlsm_machine X constraint1
  |} l (s, om) (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transition (id l) (id s, om) = (id s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> H.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk95" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk95"><span class="kn">Lemma</span> <span class="nf">preloaded_constraint_subsumption_input_valid</span>
  (<span class="nv">Hpre_subsumption</span> : preloaded_constraint_subsumption)
  (<span class="nv">l</span> : label X1)
  (<span class="nv">s</span> : state X1)
  (<span class="nv">om</span> : option message)
  (<span class="nv">Hv</span> : input_constrained X1 l (s, om))
  : valid X2 l (s, om).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hpre_subsumption</var><span class="hyp-type"><b>: </b><span>preloaded_constraint_subsumption</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label X1</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X1</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_constrained X1 l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid l (s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk96" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk96"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hpre_subsumption</var><span class="hyp-type"><b>: </b><span>preloaded_constraint_subsumption</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label X1</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X1</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_constrained X1 l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid l (s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">split</span>; [<span class="nb">apply</span> Hv | <span class="nb">apply</span> Hpre_subsumption].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk97" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk97"><span class="kn">Lemma</span> <span class="nf">preloaded_constraint_subsumption_incl</span>
  (<span class="nv">Hpre_subsumption</span> : preloaded_constraint_subsumption)
  : VLSM_incl (preloaded_with_all_messages_vlsm X1) (preloaded_with_all_messages_vlsm X2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hpre_subsumption</var><span class="hyp-type"><b>: </b><span>preloaded_constraint_subsumption</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl (preloaded_with_all_messages_vlsm X1)
  (preloaded_with_all_messages_vlsm X2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk98" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk98"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hpre_subsumption</var><span class="hyp-type"><b>: </b><span>preloaded_constraint_subsumption</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl (preloaded_with_all_messages_vlsm X1)
  (preloaded_with_all_messages_vlsm X2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk99" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk99"><span class="nb">apply</span> basic_VLSM_incl; <span class="nb">intro</span>; <span class="nb">intros</span>; [<span class="bp">done</span> | | | <span class="nb">apply</span> H].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hpre_subsumption</var><span class="hyp-type"><b>: </b><span>preloaded_constraint_subsumption</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X1
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |}</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X1
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |}</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X1
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |} l (s, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X2
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |} (id s)</span></span></span><br><span><var>HmX</var><span class="hyp-type"><b>: </b><span>initial_message_prop m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X2 (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |} m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ConstrainedVLSM-v-chk9a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hpre_subsumption</var><span class="hyp-type"><b>: </b><span>preloaded_constraint_subsumption</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X1
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |}</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X1
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |}</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X1
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |} l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X2
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |} (id s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X2
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |} om</span></span></span><br></div><label class="goal-separator" for="ConstrainedVLSM-v-chk9a"><hr></label><div class="goal-conclusion">valid (id l) (id s, om)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk9b" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk9b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hpre_subsumption</var><span class="hyp-type"><b>: </b><span>preloaded_constraint_subsumption</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X1
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |}</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X1
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |}</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X1
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |} l (s, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X2
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |} (id s)</span></span></span><br><span><var>HmX</var><span class="hyp-type"><b>: </b><span>initial_message_prop m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X2 (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |} m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> initial_message_is_valid.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk9c" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk9c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hpre_subsumption</var><span class="hyp-type"><b>: </b><span>preloaded_constraint_subsumption</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X1
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |}</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X1
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |}</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X1
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |} l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X2
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |} (id s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X2
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |} om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid (id l) (id s, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> preloaded_constraint_subsumption_input_valid.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk9d" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk9d"><span class="kn">Lemma</span> <span class="nf">preloaded_constraint_subsumption_incl_free</span> :
  VLSM_incl
    (preloaded_with_all_messages_vlsm X1)
    (preloaded_with_all_messages_vlsm X).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl (preloaded_with_all_messages_vlsm X1)
  (preloaded_with_all_messages_vlsm X)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk9e" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk9e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl (preloaded_with_all_messages_vlsm X1)
  (preloaded_with_all_messages_vlsm X)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chk9f" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chk9f"><span class="nb">apply</span> basic_VLSM_incl; <span class="nb">intro</span>; <span class="nb">intros</span>; [<span class="bp">done</span> | ..].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X1
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |}</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X1
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |}</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X1
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |} l (s, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |} (id s)</span></span></span><br><span><var>HmX</var><span class="hyp-type"><b>: </b><span>initial_message_prop m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |} m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ConstrainedVLSM-v-chka0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X1
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |}</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X1
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |}</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X1
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |} l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |} (id s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |} om</span></span></span><br></div><label class="goal-separator" for="ConstrainedVLSM-v-chka0"><hr></label><div class="goal-conclusion">valid (id l) (id s, om)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ConstrainedVLSM-v-chka1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X1
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |}</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X1
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |}</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X1
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |}</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X1
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |} l (s, om) (s&#39;, om&#39;)</span></span></span><br></div><label class="goal-separator" for="ConstrainedVLSM-v-chka1"><hr></label><div class="goal-conclusion">transition (id l) (id s, om) = (id s&#39;, om&#39;)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chka2" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chka2">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X1
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |}</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X1
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |}</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X1
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |} l (s, Some m)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |} (id s)</span></span></span><br><span><var>HmX</var><span class="hyp-type"><b>: </b><span>initial_message_prop m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |} m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> initial_message_is_valid.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chka3" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chka3">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X1
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |}</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X1
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |}</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X1
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |} l (s, om)</span></span></span><br><span><var>HsY</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |} (id s)</span></span></span><br><span><var>HomY</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |} om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid (id l) (id s, om)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> Hv.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chka4" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chka4">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X1
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |}</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X1
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |}</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X1
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |}</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  {|
    vlsm_type := X1;
    vlsm_machine :=
      preloaded_vlsm_machine X1
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |} l (s, om) (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transition (id l) (id s, om) = (id s&#39;, om&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> H.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chka5" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chka5"><span class="kn">Lemma</span> <span class="nf">weak_constraint_subsumption_weakest</span>
  (<span class="nv">Hsubsumption</span> : input_valid_constraint_subsumption)
  : weak_input_valid_constraint_subsumption.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>input_valid_constraint_subsumption</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_input_valid_constraint_subsumption</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chka6" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chka6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumption</var><span class="hyp-type"><b>: </b><span>input_valid_constraint_subsumption</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">weak_input_valid_constraint_subsumption</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> l som Hv _ _; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chka7" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chka7"><span class="kn">Lemma</span> <span class="nf">preloaded_constraint_subsumption_stronger</span>
  (<span class="nv">Hpre_subsumption</span> : preloaded_constraint_subsumption)
  : input_valid_constraint_subsumption.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hpre_subsumption</var><span class="hyp-type"><b>: </b><span>preloaded_constraint_subsumption</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_constraint_subsumption</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chka8" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chka8"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hpre_subsumption</var><span class="hyp-type"><b>: </b><span>preloaded_constraint_subsumption</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_constraint_subsumption</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chka9" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chka9"><span class="nb">intros</span> l som Hv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hpre_subsumption</var><span class="hyp-type"><b>: </b><span>preloaded_constraint_subsumption</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label X</span></span></span><br><span><var>som</var><span class="hyp-type"><b>: </b><span>(state X * option message)%type</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid (constrained_vlsm X constraint1) l
  som</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">constraint2 l som</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chkaa" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chkaa"><span class="nb">apply</span> Hpre_subsumption.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hpre_subsumption</var><span class="hyp-type"><b>: </b><span>preloaded_constraint_subsumption</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label X</span></span></span><br><span><var>som</var><span class="hyp-type"><b>: </b><span>(state X * option message)%type</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid (constrained_vlsm X constraint1) l
  som</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_constrained (constrained_vlsm X constraint1) l
  som</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chkab" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chkab"><span class="nb">destruct</span> som.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hpre_subsumption</var><span class="hyp-type"><b>: </b><span>preloaded_constraint_subsumption</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label X</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>o</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid (constrained_vlsm X constraint1) l
  (s, o)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_constrained (constrained_vlsm X constraint1) l
  (s, o)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chkac" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chkac"><span class="nb">eapply</span> VLSM_incl_input_valid; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hpre_subsumption</var><span class="hyp-type"><b>: </b><span>preloaded_constraint_subsumption</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label X</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>o</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid (constrained_vlsm X constraint1) l
  (s, o)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl_part
  (constrained_vlsm_machine X constraint1)
  (preloaded_vlsm_machine
     (constrained_vlsm X constraint1)
     (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (vlsm_incl_preloaded_with_all_messages_vlsm X1).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chkad" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chkad"><span class="kn">Lemma</span> <span class="nf">strong_constraint_subsumption_strongest</span>
  (<span class="nv">Hstrong_subsumption</span> : strong_constraint_subsumption)
  : preloaded_constraint_subsumption.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hstrong_subsumption</var><span class="hyp-type"><b>: </b><span>strong_constraint_subsumption</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">preloaded_constraint_subsumption</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chkae" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chkae"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hstrong_subsumption</var><span class="hyp-type"><b>: </b><span>strong_constraint_subsumption</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">preloaded_constraint_subsumption</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chkaf" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chkaf"><span class="nb">intros</span> l [s om] (_ &amp; _ &amp; _ &amp; Hc).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hstrong_subsumption</var><span class="hyp-type"><b>: </b><span>strong_constraint_subsumption</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label X</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (constrained_vlsm X constraint1))</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>constraint1 l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">constraint2 l (s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> Hstrong_subsumption.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chkb0" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chkb0"><span class="kn">Lemma</span> <span class="nf">constraint_subsumption_byzantine_message_prop</span>
  (<span class="nv">Hpre_subsumption</span> : preloaded_constraint_subsumption)
  (<span class="nv">m</span> : message)
  (<span class="nv">Hm</span> : byzantine_message_prop X1 m)
  : byzantine_message_prop X2 m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hpre_subsumption</var><span class="hyp-type"><b>: </b><span>preloaded_constraint_subsumption</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>byzantine_message_prop X1 m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">byzantine_message_prop X2 m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ConstrainedVLSM-v-chkb1" style="display: none" type="checkbox"><label class="alectryon-input" for="ConstrainedVLSM-v-chkb1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>constraint, constraint1, constraint2</var><span class="hyp-type"><b>: </b><span>label X
‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X1</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint1</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X2</var><span><span class="hyp-body"><b>:= </b><span>constrained_vlsm X constraint2</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hpre_subsumption</var><span class="hyp-type"><b>: </b><span>preloaded_constraint_subsumption</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>byzantine_message_prop X1 m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">byzantine_message_prop X2 m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (VLSM_incl_can_emit (preloaded_constraint_subsumption_incl Hpre_subsumption)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sec_constraint_subsumption</span>.</span></span></pre></article></body></html>