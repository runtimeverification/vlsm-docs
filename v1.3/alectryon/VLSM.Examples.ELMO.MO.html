<!DOCTYPE html>
<html class="alectryon-standalone"><head><title>MO.v</title><meta charset="utf-8"><meta content="Alectryon" name="generator"><meta name="viewport" content="width=device-width, initial-scale=1"><link href="alectryon.css" rel="stylesheet"><link href="pygments.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" /><script src="alectryon.js"></script></head><body><article class="alectryon-root alectryon-windowed alectryon-coqdoc"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.18.0+0.18.1. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk0"><span class="kn">From</span> VLSM.Lib <span class="kn">Require Import</span> Itauto.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">[Loading ML file ring_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file zify_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file micromega_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file btauto_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file coq-itauto.plugin ... <span class="bp">done</span>]</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> Coq <span class="kn">Require Import</span> FunctionalExtensionality.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> stdpp <span class="kn">Require Import</span> prelude finite.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> VLSM.Lib <span class="kn">Require Import</span> Preamble ListExtras StdppExtras.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> VLSM.Core <span class="kn">Require Import</span> VLSM PreloadedVLSM VLSMProjections Composition.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> VLSM.Core <span class="kn">Require Import</span> Equivocation Validator ProjectionTraces.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> VLSM.Core <span class="kn">Require Import</span> MessageDependencies FreeCompositionValidator.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1"><span class="kn">From</span> VLSM.Examples <span class="kn">Require Import</span> BaseELMO UMO.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">[Loading ML file extraction_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file equations_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote></div></div></small></span></pre><div class="doc">
<a id="lab1"></a><h1 class="section">ELMO: Protocol Definitions and Properties for MO</h1>
<div class="paragraph"> </div>

  This module contains definitions and properties of MO components and
  the MO protocol.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sec_MO</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">Address</span> : <span class="kt">Type</span>}
  `{EqDecision Address}
  (State := @State Address)
  (Observation := @Observation Address)
  (Message := @Message Address).</span></span></pre><div class="doc">
  A message is valid for MO if one of the following is the case:

<div class="paragraph"> </div>
<ul class="doclist">
<li> it has no observations and its address belongs to the set of allowed
    addresses (as determined by the predicate <code>P</code>)

</li>
<li> its last observation was another valid message which was sent

</li>
<li> its last observation was another valid message which was received
    and the messages observed previously are also valid

</li>
</ul>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Inductive</span> <span class="nf">MO_msg_valid</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) : Message -&gt; <span class="kt">Prop</span> :=
| MO_mv_nil :
    <span class="kr">forall</span> <span class="nv">m</span> : Message,
      obs (state m) = [] -&gt; P (adr (state m)) -&gt; MO_msg_valid P m
| MO_mv_send :
    <span class="kr">forall</span> <span class="nv">m</span> : Message,
      MO_msg_valid P m -&gt; MO_msg_valid P (m &lt;*&gt; MkObservation Send m)
| MO_mv_recv :
    <span class="kr">forall</span> <span class="nv">m</span> <span class="nv">mr</span> : Message,
      MO_msg_valid P m -&gt; MO_msg_valid P mr -&gt; MO_msg_valid P (m &lt;*&gt; MkObservation Receive mr).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk2"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid_P_adr</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) (<span class="nv">m</span> : Message) :
  MO_msg_valid P m -&gt; P (adr (state m)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid P m ‚Üí P (adr (state m))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid P m ‚Üí P (adr (state m))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">induction</span> <span class="mi">1</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk4"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid_dep</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) (<span class="nv">m</span> : Message) :
  MO_msg_valid P m -&gt;
  <span class="kr">forall</span> <span class="nv">dm</span>, dm ‚àà Message_dependencies m -&gt; MO_msg_valid P dm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid P m
‚Üí <span class="kr">‚àÄ</span> <span class="nv">dm</span> : Message,
    dm ‚àà Message_dependencies m ‚Üí MO_msg_valid P dm</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk5"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid P m
‚Üí <span class="kr">‚àÄ</span> <span class="nv">dm</span> : Message,
    dm ‚àà Message_dependencies m ‚Üí MO_msg_valid P dm</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk6"><span class="nb">unfold</span> Message_dependencies.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid P m
‚Üí <span class="kr">‚àÄ</span> <span class="nv">dm</span> : Message,
    dm ‚àà list_to_set (map message (obs (state m)))
    ‚Üí MO_msg_valid P dm</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk7"><span class="nb">intros</span> Hv dm Hdm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br><span><var>dm</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hdm</var><span class="hyp-type"><b>: </b><span>dm ‚àà list_to_set (map message (obs (state m)))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid P dm</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk8"><span class="nb">apply</span> elem_of_list_to_set, elem_of_list_fmap <span class="kr">in</span> Hdm <span class="kr">as</span> (o &amp; -&gt; &amp; Ho).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br><span><var>o</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>Ho</var><span class="hyp-type"><b>: </b><span>o ‚àà obs (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid P (message o)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk9"><span class="nb">revert</span> o Ho; <span class="nb">induction</span> Hv; <span class="nb">cbn</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>obs (state m) = []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>P (adr (state m))</span></span></span><br><span><var>o</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>Ho</var><span class="hyp-type"><b>: </b><span>o ‚àà obs (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid P (message o)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chka" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br><span><var>IHHv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">o</span> : BaseELMO.Observation,
  o ‚àà obs (state m)
  ‚Üí MO_msg_valid P (message o)</span></span></span><br><span><var>o</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>Ho</var><span class="hyp-type"><b>: </b><span>o
‚àà addObservation&#39; (MkObservation Send m)
    (obs (state m))</span></span></span><br></div><label class="goal-separator" for="MO-v-chka"><hr></label><div class="goal-conclusion">MO_msg_valid P (message o)</div></blockquote><input class="alectryon-extra-goal-toggle" id="MO-v-chkb" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv1</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br><span><var>Hv2</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P mr</span></span></span><br><span><var>IHHv1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">o</span> : BaseELMO.Observation,
  o ‚àà obs (state m)
  ‚Üí MO_msg_valid P (message o)</span></span></span><br><span><var>IHHv2</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">o</span> : BaseELMO.Observation,
  o ‚àà obs (state mr)
  ‚Üí MO_msg_valid P (message o)</span></span></span><br><span><var>o</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>Ho</var><span class="hyp-type"><b>: </b><span>o
‚àà addObservation&#39; (MkObservation Receive mr)
    (obs (state m))</span></span></span><br></div><label class="goal-separator" for="MO-v-chkb"><hr></label><div class="goal-conclusion">MO_msg_valid P (message o)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkc">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>obs (state m) = []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>P (adr (state m))</span></span></span><br><span><var>o</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>Ho</var><span class="hyp-type"><b>: </b><span>o ‚àà obs (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid P (message o)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> m, state; <span class="nb">cbn</span> <span class="kr">in</span> *; <span class="nb">subst</span>; <span class="nb">inversion</span> Ho.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkd">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br><span><var>IHHv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">o</span> : BaseELMO.Observation,
  o ‚àà obs (state m)
  ‚Üí MO_msg_valid P (message o)</span></span></span><br><span><var>o</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>Ho</var><span class="hyp-type"><b>: </b><span>o
‚àà addObservation&#39; (MkObservation Send m)
    (obs (state m))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid P (message o)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> elem_of_addObservation <span class="kr">in</span> Ho <span class="kr">as</span> [-&gt; |]; [| <span class="nb">apply</span> IHHv].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chke">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv1</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br><span><var>Hv2</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P mr</span></span></span><br><span><var>IHHv1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">o</span> : BaseELMO.Observation,
  o ‚àà obs (state m)
  ‚Üí MO_msg_valid P (message o)</span></span></span><br><span><var>IHHv2</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">o</span> : BaseELMO.Observation,
  o ‚àà obs (state mr)
  ‚Üí MO_msg_valid P (message o)</span></span></span><br><span><var>o</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>Ho</var><span class="hyp-type"><b>: </b><span>o
‚àà addObservation&#39; (MkObservation Receive mr)
    (obs (state m))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid P (message o)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> elem_of_addObservation <span class="kr">in</span> Ho <span class="kr">as</span> [-&gt; |]; [| <span class="nb">apply</span> IHHv1].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sec_alternative_definition_of_validity</span>.</span></span></pre><div class="doc">
<a id="lab2"></a><h2 class="section">Alternative definition of validity</h2>
<div class="paragraph"> </div>

  The above constructors of <span class="inlinecode"><span class="id" title="var">MO_msg_valid</span></span> may not be the most readable,
  so we will provide an alternative version of this inductive
  definition (called <span class="inlinecode"><span class="id" title="var">MO_msg_valid_alt</span></span>) and prove them equivalent.

<div class="paragraph"> </div>

  If <span class="inlinecode"><span class="id" title="var">MO_msg_valid_alt_sends</span></span> holds for <code>m</code>, then every possible suffix of
  observations from <code>m</code> is the same as the observations from a message <code>m'</code>
  which was the next message that was sent after the suffix. Also, the addresses
  of <code>m</code> and <code>m'</code> have to agree.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">MO_msg_valid_alt_sends</span> (<span class="nv">m</span> : Message) : <span class="kt">Prop</span> :=
  <span class="kr">forall</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
    lastn k (obs (state m)) = addObservation&#39; (MkObservation Send m&#39;) suffix -&gt;
      obs (state m&#39;) = suffix /\ adr (state m&#39;) = adr (state m).</span></span></pre><div class="doc">
  If <span class="inlinecode"><span class="id" title="var">MO_msg_valid_alt_recvs'</span></span> holds for <code>valid</code> and <code>m</code>, this means
  that for every suffix of observations from <code>m</code>, the message <code>m'</code>, which
  was the next message received after the suffix, is valid.

<div class="paragraph"> </div>

  Here, validity is determined by an arbitrary predicate. Ultimately, we want
  to replace this arbitrary predicate with <span class="inlinecode"><span class="id" title="var">MO_msg_valid_alt</span></span>, the alternative
  definition of message validity for MO.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">MO_msg_valid_alt_recvs&#39;</span> (<span class="nv">valid</span> : Message -&gt; <span class="kt">Prop</span>) (<span class="nv">m</span> : Message) : <span class="kt">Prop</span> :=
  <span class="kr">forall</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
    lastn k (obs (state m)) = addObservation&#39; (MkObservation Receive m&#39;) suffix -&gt;
      valid m&#39;.</span></span></pre><div class="doc">
  A message is valid for MO (according to the alternative definition) if one
  of the following holds:

<div class="paragraph"> </div>
<ul class="doclist">
<li> its address belongs to the set of allowed addresses (as determined by <code>P</code>)

</li>
<li> it satisfies <span class="inlinecode"><span class="id" title="var">MO_msg_valid_alt_sends</span></span>
</li>
<li> it satisfies <span class="inlinecode"><span class="id" title="var">MO_msg_valid_alt_recvs'</span></span>, with <span class="inlinecode"><span class="id" title="var">MO_msg_valid_alt</span></span> applied to
    <code>P</code> used as the validity predicate

</li>
</ul>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Inductive</span> <span class="nf">MO_msg_valid_alt</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) (<span class="nv">m</span> : Message) : <span class="kt">Prop</span> :=
{
  P_adr_state : P (adr (state m));
  MO_msg_valid_alt_sends&#39; : MO_msg_valid_alt_sends m;
  MO_msg_valid_alt_recvs&#39;&#39; : MO_msg_valid_alt_recvs&#39; (MO_msg_valid_alt P) m;
}.</span></span></pre><div class="doc">
  Now we just need to define the final version of <span class="inlinecode"><span class="id" title="var">MO_msg_valid_alt_recvs</span></span>,
  in which the validity predicate is set to <span class="inlinecode"><span class="id" title="var">MO_msg_valid_alt</span></span>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">MO_msg_valid_alt_recvs</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) (<span class="nv">m</span> : Message) : <span class="kt">Prop</span> :=
  MO_msg_valid_alt_recvs&#39; (MO_msg_valid_alt P) m.</span></span></pre><div class="doc">
  For some proofs to go through, we will need "bounded" versions of the
  <span class="inlinecode"><span class="id" title="var">Send</span></span> and <span class="inlinecode"><span class="id" title="var">Receive</span></span> parts of the alternative definition.

<div class="paragraph"> </div>

  By bounded, we mean that we will only look for suffixes at most as long
  as the whole list of observations of the given message (the suffix can't
  be any longer than that of course; this matters for purely technical
  reasons).

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">MO_msg_valid_alt_sends_bounded</span> (<span class="nv">m</span> : Message) : <span class="kt">Prop</span> :=
  <span class="kr">forall</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
    k &lt;= length (obs (state m)) -&gt;
    lastn k (obs (state m)) = addObservation&#39; (MkObservation Send m&#39;) suffix -&gt;
      obs (state m&#39;) = suffix /\ adr (state m&#39;) = adr (state m).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">MO_msg_valid_alt_recvs_bounded</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) (<span class="nv">m</span> : Message) : <span class="kt">Prop</span> :=
  <span class="kr">forall</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
    k &lt;= length (obs (state m)) -&gt;
    lastn k (obs (state m)) = addObservation&#39; (MkObservation Receive m&#39;) suffix -&gt;
      MO_msg_valid_alt P m&#39;.</span></span></pre><div class="doc">
The bounded versions are equivalent to the original ones. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkf"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid_alt_sends_shorten</span> :
  <span class="kr">forall</span> (<span class="nv">m</span> : Message),
    MO_msg_valid_alt_sends m &lt;-&gt; MO_msg_valid_alt_sends_bounded m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message,
  MO_msg_valid_alt_sends m
  ‚Üî MO_msg_valid_alt_sends_bounded m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk10"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message,
  MO_msg_valid_alt_sends m
  ‚Üî MO_msg_valid_alt_sends_bounded m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk11"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_sends m
‚Üí MO_msg_valid_alt_sends_bounded m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk12" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><label class="goal-separator" for="MO-v-chk12"><hr></label><div class="goal-conclusion">MO_msg_valid_alt_sends_bounded m
‚Üí MO_msg_valid_alt_sends m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk13">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_sends m
‚Üí MO_msg_valid_alt_sends_bounded m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk14"><span class="nb">unfold</span> MO_msg_valid_alt_sends, MO_msg_valid_alt_sends_bounded.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
   lastn k (obs (state m)) =
   addObservation&#39; (MkObservation Send m&#39;) suffix
   ‚Üí obs (state m&#39;) = suffix
     ‚àß adr (state m&#39;) = adr (state m))
‚Üí <span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
    k ‚â§ length (obs (state m))
    ‚Üí lastn k (obs (state m)) =
      addObservation&#39; (MkObservation Send m&#39;) suffix
      ‚Üí obs (state m&#39;) = suffix
        ‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> Hs k suffix m&#39; _ Hlast; <span class="nb">eapply</span> Hs.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk15">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_sends_bounded m
‚Üí MO_msg_valid_alt_sends m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk16"><span class="nb">unfold</span> MO_msg_valid_alt_sends, MO_msg_valid_alt_sends_bounded.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
   k ‚â§ length (obs (state m))
   ‚Üí lastn k (obs (state m)) =
     addObservation&#39; (MkObservation Send m&#39;) suffix
     ‚Üí obs (state m&#39;) = suffix
       ‚àß adr (state m&#39;) = adr (state m))
‚Üí <span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
    lastn k (obs (state m)) =
    addObservation&#39; (MkObservation Send m&#39;) suffix
    ‚Üí obs (state m&#39;) = suffix
      ‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk17"><span class="nb">intros</span> Hs k suffix m&#39; Hlast.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  k ‚â§ length (obs (state m))
  ‚Üí lastn k (obs (state m)) =
    addObservation&#39; (MkObservation Send m&#39;)
      suffix
    ‚Üí obs (state m&#39;) = suffix
      ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Send m&#39;) suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk18"><span class="nb">destruct</span> (decide (k &lt;= length (obs (state m)))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  k ‚â§ length (obs (state m))
  ‚Üí lastn k (obs (state m)) =
    addObservation&#39; (MkObservation Send m&#39;)
      suffix
    ‚Üí obs (state m&#39;) = suffix
      ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Send m&#39;) suffix</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk19" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  k ‚â§ length (obs (state m))
  ‚Üí lastn k (obs (state m)) =
    addObservation&#39; (MkObservation Send m&#39;)
      suffix
    ‚Üí obs (state m&#39;) = suffix
      ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Send m&#39;) suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ k ‚â§ length (obs (state m))</span></span></span><br></div><label class="goal-separator" for="MO-v-chk19"><hr></label><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1a">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  k ‚â§ length (obs (state m))
  ‚Üí lastn k (obs (state m)) =
    addObservation&#39; (MkObservation Send m&#39;)
      suffix
    ‚Üí obs (state m&#39;) = suffix
      ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Send m&#39;) suffix</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> Hs.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1b">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  k ‚â§ length (obs (state m))
  ‚Üí lastn k (obs (state m)) =
    addObservation&#39; (MkObservation Send m&#39;)
      suffix
    ‚Üí obs (state m&#39;) = suffix
      ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Send m&#39;) suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ k ‚â§ length (obs (state m))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1c"><span class="nb">apply</span> (Hs (length (obs (state m)))); [<span class="bp">lia</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  k ‚â§ length (obs (state m))
  ‚Üí lastn k (obs (state m)) =
    addObservation&#39; (MkObservation Send m&#39;)
      suffix
    ‚Üí obs (state m&#39;) = suffix
      ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Send m&#39;) suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ k ‚â§ length (obs (state m))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lastn (length (obs (state m))) (obs (state m)) =
addObservation&#39; (MkObservation Send m&#39;) suffix</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> lastn_ge <span class="kr">in</span> *; [| <span class="bp">lia</span> | <span class="bp">lia</span>].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1d"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid_alt_recvs_shorten</span> :
  <span class="kr">forall</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
    MO_msg_valid_alt_recvs P m &lt;-&gt; MO_msg_valid_alt_recvs_bounded P m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
  MO_msg_valid_alt_recvs P m
  ‚Üî MO_msg_valid_alt_recvs_bounded P m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
  MO_msg_valid_alt_recvs P m
  ‚Üî MO_msg_valid_alt_recvs_bounded P m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1f"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_recvs P m
‚Üí MO_msg_valid_alt_recvs_bounded P m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk20" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><label class="goal-separator" for="MO-v-chk20"><hr></label><div class="goal-conclusion">MO_msg_valid_alt_recvs_bounded P m
‚Üí MO_msg_valid_alt_recvs P m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk21">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_recvs P m
‚Üí MO_msg_valid_alt_recvs_bounded P m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk22"><span class="nb">unfold</span> MO_msg_valid_alt_recvs, MO_msg_valid_alt_recvs&#39;, MO_msg_valid_alt_recvs_bounded.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
   lastn k (obs (state m)) =
   addObservation&#39; (MkObservation Receive m&#39;) suffix
   ‚Üí MO_msg_valid_alt P m&#39;)
‚Üí <span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
    k ‚â§ length (obs (state m))
    ‚Üí lastn k (obs (state m)) =
      addObservation&#39; (MkObservation Receive m&#39;)
        suffix ‚Üí MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> Hr k suffix m&#39; _ Hlast; <span class="nb">eapply</span> Hr.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk23">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_recvs_bounded P m
‚Üí MO_msg_valid_alt_recvs P m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk24"><span class="nb">unfold</span> MO_msg_valid_alt_recvs, MO_msg_valid_alt_recvs&#39;, MO_msg_valid_alt_recvs_bounded.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
   k ‚â§ length (obs (state m))
   ‚Üí lastn k (obs (state m)) =
     addObservation&#39; (MkObservation Receive m&#39;) suffix
     ‚Üí MO_msg_valid_alt P m&#39;)
‚Üí <span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
    lastn k (obs (state m)) =
    addObservation&#39; (MkObservation Receive m&#39;) suffix
    ‚Üí MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk25"><span class="nb">intros</span> Hr k suffix m&#39; Hlast.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  k ‚â§ length (obs (state m))
  ‚Üí lastn k (obs (state m)) =
    addObservation&#39; (MkObservation Receive m&#39;)
      suffix ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Receive m&#39;)
  suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk26"><span class="nb">destruct</span> (decide (k &lt;= length (obs (state m)))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  k ‚â§ length (obs (state m))
  ‚Üí lastn k (obs (state m)) =
    addObservation&#39; (MkObservation Receive m&#39;)
      suffix ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Receive m&#39;)
  suffix</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk27" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  k ‚â§ length (obs (state m))
  ‚Üí lastn k (obs (state m)) =
    addObservation&#39; (MkObservation Receive m&#39;)
      suffix ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Receive m&#39;)
  suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ k ‚â§ length (obs (state m))</span></span></span><br></div><label class="goal-separator" for="MO-v-chk27"><hr></label><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk28" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk28">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  k ‚â§ length (obs (state m))
  ‚Üí lastn k (obs (state m)) =
    addObservation&#39; (MkObservation Receive m&#39;)
      suffix ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Receive m&#39;)
  suffix</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> Hr.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk29" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk29">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  k ‚â§ length (obs (state m))
  ‚Üí lastn k (obs (state m)) =
    addObservation&#39; (MkObservation Receive m&#39;)
      suffix ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Receive m&#39;)
  suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ k ‚â§ length (obs (state m))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk2a"><span class="nb">apply</span> (Hr (length (obs (state m))) suffix); [<span class="bp">lia</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  k ‚â§ length (obs (state m))
  ‚Üí lastn k (obs (state m)) =
    addObservation&#39; (MkObservation Receive m&#39;)
      suffix ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Receive m&#39;)
  suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ k ‚â§ length (obs (state m))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lastn (length (obs (state m))) (obs (state m)) =
addObservation&#39; (MkObservation Receive m&#39;) suffix</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> lastn_ge <span class="kr">in</span> *; [| <span class="bp">lia</span> | <span class="bp">lia</span>].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  Now we need a collection of lemmas that tell us what happens when we extend
  a message with a new observation of a sent message. We need to do this
  separately for both the "sends" and the "recvs" parts of the alternative
  definition.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk2b"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid_alt_sends_Send</span> :
  <span class="kr">forall</span> <span class="nv">m</span> : Message,
    MO_msg_valid_alt_sends m -&gt; MO_msg_valid_alt_sends (m &lt;*&gt; MkObservation Send m).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message,
  MO_msg_valid_alt_sends m
  ‚Üí MO_msg_valid_alt_sends
      (m &lt;*&gt; MkObservation Send m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk2c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message,
  MO_msg_valid_alt_sends m
  ‚Üí MO_msg_valid_alt_sends
      (m &lt;*&gt; MkObservation Send m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk2d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk2d"><span class="nb">unfold</span> MO_msg_valid_alt_sends; <span class="nb">cbn</span>; <span class="nb">unfold</span> addObservation&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message,
  (<span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
     lastn k (obs (state m)) =
     MkObservation Send m&#39; :: suffix
     ‚Üí obs (state m&#39;) = suffix
       ‚àß adr (state m&#39;) = adr (state m))
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
      lastn k (MkObservation Send m :: obs (state m)) =
      MkObservation Send m&#39; :: suffix
      ‚Üí obs (state m&#39;) = suffix
        ‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk2e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk2e"><span class="nb">intros</span> m Hvalid k suffix m&#39; Hlast.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k
  (MkObservation Send m :: obs (state m)) =
MkObservation Send m&#39; :: suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk2f"><span class="nb">rewrite</span> lastn_cons <span class="kr">in</span> Hlast; case_decide.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>S (length (obs (state m))) ‚â§ k</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>MkObservation Send m :: obs (state m) =
MkObservation Send m&#39; :: suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk30" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>¬¨ S (length (obs (state m))) ‚â§ k</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
MkObservation Send m&#39; :: suffix</span></span></span><br></div><label class="goal-separator" for="MO-v-chk30"><hr></label><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk31" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk31">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>S (length (obs (state m))) ‚â§ k</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>MkObservation Send m :: obs (state m) =
MkObservation Send m&#39; :: suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">inversion</span> Hlast.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk32">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>¬¨ S (length (obs (state m))) ‚â§ k</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
MkObservation Send m&#39; :: suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> Hvalid.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk33"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid_alt_recvs_Send</span> :
  <span class="kr">forall</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
    MO_msg_valid_alt_recvs P m -&gt; MO_msg_valid_alt_recvs P (m &lt;*&gt; MkObservation Send m).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
  MO_msg_valid_alt_recvs P m
  ‚Üí MO_msg_valid_alt_recvs P
      (m &lt;*&gt; MkObservation Send m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk34" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk34"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
  MO_msg_valid_alt_recvs P m
  ‚Üí MO_msg_valid_alt_recvs P
      (m &lt;*&gt; MkObservation Send m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk35" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk35"><span class="nb">unfold</span> MO_msg_valid_alt_recvs, MO_msg_valid_alt_recvs&#39;; <span class="nb">cbn</span>; <span class="nb">unfold</span> addObservation&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
  (<span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
     lastn k (obs (state m)) =
     MkObservation Receive m&#39; :: suffix
     ‚Üí MO_msg_valid_alt P m&#39;)
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
      lastn k (MkObservation Send m :: obs (state m)) =
      MkObservation Receive m&#39; :: suffix
      ‚Üí MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk36"><span class="nb">intros</span> P m Hvalid k suffix m&#39; Hlast.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k
  (MkObservation Send m :: obs (state m)) =
MkObservation Receive m&#39; :: suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk37"><span class="nb">rewrite</span> lastn_cons <span class="kr">in</span> Hlast; case_decide.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>S (length (obs (state m))) ‚â§ k</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>MkObservation Send m :: obs (state m) =
MkObservation Receive m&#39; :: suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk38" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>¬¨ S (length (obs (state m))) ‚â§ k</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
MkObservation Receive m&#39; :: suffix</span></span></span><br></div><label class="goal-separator" for="MO-v-chk38"><hr></label><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk39" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk39">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>S (length (obs (state m))) ‚â§ k</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>MkObservation Send m :: obs (state m) =
MkObservation Receive m&#39; :: suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">inversion</span> Hlast.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk3a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk3a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>¬¨ S (length (obs (state m))) ‚â§ k</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
MkObservation Receive m&#39; :: suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> Hvalid.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  When we put the above lemmas together, we get a lemma for <span class="inlinecode"><span class="id" title="var">MO_msg_valid_alt</span></span>
  which corresponds to one of the constructors of <span class="inlinecode"><span class="id" title="var">MO_msg_valid</span></span>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk3b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk3b"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid_alt_Send</span> :
  <span class="kr">forall</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
    MO_msg_valid_alt P m -&gt; MO_msg_valid_alt P (m &lt;*&gt; MkObservation Send m).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
  MO_msg_valid_alt P m
  ‚Üí MO_msg_valid_alt P (m &lt;*&gt; MkObservation Send m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk3c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
  MO_msg_valid_alt P m
  ‚Üí MO_msg_valid_alt P (m &lt;*&gt; MkObservation Send m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk3d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk3d"><span class="nb">intros</span> P m [Hs Hr]; <span class="nb">constructor</span>; <span class="nb">cbn</span>; [<span class="bp">done</span> | |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>P (adr (state m))</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_sends m</span></span></span><br><span><var>MO_msg_valid_alt_recvs''0</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_recvs&#39;
  (MO_msg_valid_alt P) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_sends (m &lt;*&gt; MkObservation Send m)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk3e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>P (adr (state m))</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_sends m</span></span></span><br><span><var>MO_msg_valid_alt_recvs''0</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_recvs&#39;
  (MO_msg_valid_alt P) m</span></span></span><br></div><label class="goal-separator" for="MO-v-chk3e"><hr></label><div class="goal-conclusion">MO_msg_valid_alt_recvs&#39; 
  (MO_msg_valid_alt P) 
  (m &lt;*&gt; MkObservation Send m)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk3f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk3f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>P (adr (state m))</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_sends m</span></span></span><br><span><var>MO_msg_valid_alt_recvs''0</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_recvs&#39;
  (MO_msg_valid_alt P) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_sends (m &lt;*&gt; MkObservation Send m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> MO_msg_valid_alt_sends_Send.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk40" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk40">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>P (adr (state m))</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_sends m</span></span></span><br><span><var>MO_msg_valid_alt_recvs''0</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_recvs&#39;
  (MO_msg_valid_alt P) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_recvs&#39; (MO_msg_valid_alt P)
  (m &lt;*&gt; MkObservation Send m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> MO_msg_valid_alt_recvs_Send.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
We will also need the converses of all these lemmas. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk41" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk41"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid_alt_sends_Send_conv</span> :
  <span class="kr">forall</span> <span class="nv">m</span> : Message,
    MO_msg_valid_alt_sends (m &lt;*&gt; MkObservation Send m) -&gt; MO_msg_valid_alt_sends m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message,
  MO_msg_valid_alt_sends (m &lt;*&gt; MkObservation Send m)
  ‚Üí MO_msg_valid_alt_sends m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk42" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk42"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message,
  MO_msg_valid_alt_sends (m &lt;*&gt; MkObservation Send m)
  ‚Üí MO_msg_valid_alt_sends m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk43" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk43"><span class="nb">intros</span> m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_sends (m &lt;*&gt; MkObservation Send m)
‚Üí MO_msg_valid_alt_sends m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk44" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk44"><span class="nb">rewrite</span> (MO_msg_valid_alt_sends_shorten m).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_sends (m &lt;*&gt; MkObservation Send m)
‚Üí MO_msg_valid_alt_sends_bounded m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk45" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk45"><span class="nb">unfold</span> MO_msg_valid_alt_sends; <span class="nb">cbn</span>; <span class="nb">unfold</span> addObservation&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
   lastn k (MkObservation Send m :: obs (state m)) =
   MkObservation Send m&#39; :: suffix
   ‚Üí obs (state m&#39;) = suffix
     ‚àß adr (state m&#39;) = adr (state m))
‚Üí MO_msg_valid_alt_sends_bounded m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk46" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk46"><span class="nb">intros</span> Hv k suffix m&#39; Hlen Hlast.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (MkObservation Send m :: obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Send m&#39;) suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk47" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk47"><span class="nb">destruct</span> (decide (<span class="mi">1</span> + length (obs (state m)) &lt;= k)); [<span class="bp">lia</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (MkObservation Send m :: obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Send m&#39;) suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ <span class="mi">1</span> + length (obs (state m)) ‚â§ k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk48" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk48"><span class="nb">apply</span> Hv <span class="kr">with</span> k.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (MkObservation Send m :: obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Send m&#39;) suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ <span class="mi">1</span> + length (obs (state m)) ‚â§ k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lastn k (MkObservation Send m :: obs (state m)) =
MkObservation Send m&#39; :: suffix</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk49" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk49"><span class="nb">rewrite</span> lastn_cons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (MkObservation Send m :: obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Send m&#39;) suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ <span class="mi">1</span> + length (obs (state m)) ‚â§ k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> decide (S (length (obs (state m))) ‚â§ k)
 <span class="kr">then</span> MkObservation Send m :: obs (state m)
 <span class="kr">else</span> lastn k (obs (state m))) =
MkObservation Send m&#39; :: suffix</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> case_decide; [<span class="bp">lia</span> |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk4a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk4a"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid_alt_recvs_Send_conv</span> :
  <span class="kr">forall</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
    MO_msg_valid_alt_recvs P (m &lt;*&gt; MkObservation Send m) -&gt; MO_msg_valid_alt_recvs P m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
  MO_msg_valid_alt_recvs P
    (m &lt;*&gt; MkObservation Send m)
  ‚Üí MO_msg_valid_alt_recvs P m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk4b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk4b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
  MO_msg_valid_alt_recvs P
    (m &lt;*&gt; MkObservation Send m)
  ‚Üí MO_msg_valid_alt_recvs P m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk4c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk4c"><span class="nb">intros</span> P m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_recvs P (m &lt;*&gt; MkObservation Send m)
‚Üí MO_msg_valid_alt_recvs P m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk4d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk4d"><span class="nb">rewrite</span> (MO_msg_valid_alt_recvs_shorten P m).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_recvs P (m &lt;*&gt; MkObservation Send m)
‚Üí MO_msg_valid_alt_recvs_bounded P m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk4e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk4e"><span class="nb">unfold</span> MO_msg_valid_alt_recvs, MO_msg_valid_alt_recvs&#39;; <span class="nb">cbn</span>; <span class="nb">unfold</span> addObservation&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
   lastn k (MkObservation Send m :: obs (state m)) =
   MkObservation Receive m&#39; :: suffix
   ‚Üí MO_msg_valid_alt P m&#39;)
‚Üí MO_msg_valid_alt_recvs_bounded P m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk4f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk4f"><span class="nb">intros</span> Hv k suffix m&#39; Hlen Hlast.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (MkObservation Send m :: obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Receive m&#39;)
  suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk50" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk50"><span class="nb">destruct</span> (decide (<span class="mi">1</span> + length (obs (state m)) &lt;= k)); [<span class="bp">lia</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (MkObservation Send m :: obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Receive m&#39;)
  suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ <span class="mi">1</span> + length (obs (state m)) ‚â§ k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk51" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk51"><span class="nb">apply</span> (Hv k suffix).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (MkObservation Send m :: obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Receive m&#39;)
  suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ <span class="mi">1</span> + length (obs (state m)) ‚â§ k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lastn k (MkObservation Send m :: obs (state m)) =
MkObservation Receive m&#39; :: suffix</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk52" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk52"><span class="nb">rewrite</span> lastn_cons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (MkObservation Send m :: obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Receive m&#39;)
  suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ <span class="mi">1</span> + length (obs (state m)) ‚â§ k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> decide (S (length (obs (state m))) ‚â§ k)
 <span class="kr">then</span> MkObservation Send m :: obs (state m)
 <span class="kr">else</span> lastn k (obs (state m))) =
MkObservation Receive m&#39; :: suffix</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> case_decide; [<span class="bp">lia</span> |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk53" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk53"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid_alt_Send_conv</span> :
  <span class="kr">forall</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
    MO_msg_valid_alt P (m &lt;*&gt; MkObservation Send m) -&gt; MO_msg_valid_alt P m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
  MO_msg_valid_alt P (m &lt;*&gt; MkObservation Send m)
  ‚Üí MO_msg_valid_alt P m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk54" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk54"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
  MO_msg_valid_alt P (m &lt;*&gt; MkObservation Send m)
  ‚Üí MO_msg_valid_alt P m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk55" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk55"><span class="nb">intros</span> P m [Hvs Hvr]; <span class="nb">split</span>; [<span class="bp">done</span> | |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvs</var><span class="hyp-type"><b>: </b><span>P (adr (state (m &lt;*&gt; MkObservation Send m)))</span></span></span><br><span><var>Hvr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_sends
  (m &lt;*&gt; MkObservation Send m)</span></span></span><br><span><var>MO_msg_valid_alt_recvs''0</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_recvs&#39;
  (MO_msg_valid_alt P)
  (m &lt;*&gt;
   MkObservation Send m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_sends m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk56" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvs</var><span class="hyp-type"><b>: </b><span>P (adr (state (m &lt;*&gt; MkObservation Send m)))</span></span></span><br><span><var>Hvr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_sends
  (m &lt;*&gt; MkObservation Send m)</span></span></span><br><span><var>MO_msg_valid_alt_recvs''0</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_recvs&#39;
  (MO_msg_valid_alt P)
  (m &lt;*&gt;
   MkObservation Send m)</span></span></span><br></div><label class="goal-separator" for="MO-v-chk56"><hr></label><div class="goal-conclusion">MO_msg_valid_alt_recvs&#39; (MO_msg_valid_alt P) m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk57" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk57">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvs</var><span class="hyp-type"><b>: </b><span>P (adr (state (m &lt;*&gt; MkObservation Send m)))</span></span></span><br><span><var>Hvr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_sends
  (m &lt;*&gt; MkObservation Send m)</span></span></span><br><span><var>MO_msg_valid_alt_recvs''0</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_recvs&#39;
  (MO_msg_valid_alt P)
  (m &lt;*&gt;
   MkObservation Send m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_sends m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> MO_msg_valid_alt_sends_Send_conv.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk58" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk58">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvs</var><span class="hyp-type"><b>: </b><span>P (adr (state (m &lt;*&gt; MkObservation Send m)))</span></span></span><br><span><var>Hvr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_sends
  (m &lt;*&gt; MkObservation Send m)</span></span></span><br><span><var>MO_msg_valid_alt_recvs''0</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_recvs&#39;
  (MO_msg_valid_alt P)
  (m &lt;*&gt;
   MkObservation Send m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_recvs&#39; (MO_msg_valid_alt P) m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> MO_msg_valid_alt_recvs_Send_conv.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  We need another collection of lemmas, but this time for the case when a new
  observation was a received message.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk59" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk59"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid_alt_sends_Receive</span> :
  <span class="kr">forall</span> <span class="nv">m</span> <span class="nv">mr</span> : Message,
    MO_msg_valid_alt_sends m -&gt;
      MO_msg_valid_alt_sends (m &lt;*&gt; MkObservation Receive mr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> <span class="nv">mr</span> : Message,
  MO_msg_valid_alt_sends m
  ‚Üí MO_msg_valid_alt_sends
      (m &lt;*&gt; MkObservation Receive mr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk5a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk5a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> <span class="nv">mr</span> : Message,
  MO_msg_valid_alt_sends m
  ‚Üí MO_msg_valid_alt_sends
      (m &lt;*&gt; MkObservation Receive mr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk5b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk5b"><span class="nb">unfold</span> MO_msg_valid_alt_sends; <span class="nb">cbn</span>; <span class="nb">unfold</span> addObservation&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> <span class="nv">mr</span> : Message,
  (<span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
     lastn k (obs (state m)) =
     MkObservation Send m&#39; :: suffix
     ‚Üí obs (state m&#39;) = suffix
       ‚àß adr (state m&#39;) = adr (state m))
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
      lastn k
        (MkObservation Receive mr :: obs (state m)) =
      MkObservation Send m&#39; :: suffix
      ‚Üí obs (state m&#39;) = suffix
        ‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk5c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk5c"><span class="nb">intros</span> m mr Hm k suffix m&#39; Hlast.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k
  (MkObservation Receive mr :: obs (state m)) =
MkObservation Send m&#39; :: suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk5d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk5d"><span class="nb">rewrite</span> lastn_cons <span class="kr">in</span> Hlast; case_decide.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>S (length (obs (state m))) ‚â§ k</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>MkObservation Receive mr :: obs (state m) =
MkObservation Send m&#39; :: suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk5e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>¬¨ S (length (obs (state m))) ‚â§ k</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
MkObservation Send m&#39; :: suffix</span></span></span><br></div><label class="goal-separator" for="MO-v-chk5e"><hr></label><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk5f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk5f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>S (length (obs (state m))) ‚â§ k</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>MkObservation Receive mr :: obs (state m) =
MkObservation Send m&#39; :: suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">inversion</span> Hlast.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk60" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk60">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>¬¨ S (length (obs (state m))) ‚â§ k</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
MkObservation Send m&#39; :: suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> Hm <span class="kr">with</span> k.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk61" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk61"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid_alt_recvs_Receive</span> :
  <span class="kr">forall</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) (<span class="nv">m</span> <span class="nv">mr</span> : Message),
    MO_msg_valid_alt_recvs P m -&gt; MO_msg_valid_alt P mr -&gt;
      MO_msg_valid_alt_recvs P (m &lt;*&gt; MkObservation Receive mr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> <span class="nv">mr</span> : Message),
  MO_msg_valid_alt_recvs P m
  ‚Üí MO_msg_valid_alt P mr
    ‚Üí MO_msg_valid_alt_recvs P
        (m &lt;*&gt; MkObservation Receive mr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk62" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk62"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> <span class="nv">mr</span> : Message),
  MO_msg_valid_alt_recvs P m
  ‚Üí MO_msg_valid_alt P mr
    ‚Üí MO_msg_valid_alt_recvs P
        (m &lt;*&gt; MkObservation Receive mr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk63" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk63"><span class="nb">unfold</span> MO_msg_valid_alt_recvs, MO_msg_valid_alt_recvs&#39;; <span class="nb">cbn</span>; <span class="nb">unfold</span> addObservation&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> <span class="nv">mr</span> : Message),
  (<span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
     lastn k (obs (state m)) =
     MkObservation Receive m&#39; :: suffix
     ‚Üí MO_msg_valid_alt P m&#39;)
  ‚Üí MO_msg_valid_alt P mr
    ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
        lastn k
          (MkObservation Receive mr :: obs (state m)) =
        MkObservation Receive m&#39; :: suffix
        ‚Üí MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk64" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk64"><span class="nb">intros</span> P m mr Hm Hmr k suffix m&#39; Hlast.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>Hmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P mr</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k
  (MkObservation Receive mr :: obs (state m)) =
MkObservation Receive m&#39; :: suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk65" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk65"><span class="nb">rewrite</span> lastn_cons <span class="kr">in</span> Hlast; case_decide.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>Hmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P mr</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>S (length (obs (state m))) ‚â§ k</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>MkObservation Receive mr :: obs (state m) =
MkObservation Receive m&#39; :: suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk66" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>Hmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P mr</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>¬¨ S (length (obs (state m))) ‚â§ k</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
MkObservation Receive m&#39; :: suffix</span></span></span><br></div><label class="goal-separator" for="MO-v-chk66"><hr></label><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk67" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk67">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>Hmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P mr</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>S (length (obs (state m))) ‚â§ k</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>MkObservation Receive mr :: obs (state m) =
MkObservation Receive m&#39; :: suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">inversion</span> Hlast; <span class="nb">subst</span>; <span class="nb">clear</span> Hlast.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk68" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk68">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>Hmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P mr</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>¬¨ S (length (obs (state m))) ‚â§ k</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
MkObservation Receive m&#39; :: suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (Hm k suffix).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk69" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk69"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid_alt_Receive</span> :
  <span class="kr">forall</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) (<span class="nv">m</span> <span class="nv">mr</span> : Message),
    MO_msg_valid_alt P m -&gt; MO_msg_valid_alt P mr -&gt;
      MO_msg_valid_alt P (m &lt;*&gt; MkObservation Receive mr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> <span class="nv">mr</span> : Message),
  MO_msg_valid_alt P m
  ‚Üí MO_msg_valid_alt P mr
    ‚Üí MO_msg_valid_alt P
        (m &lt;*&gt; MkObservation Receive mr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk6a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk6a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> <span class="nv">mr</span> : Message),
  MO_msg_valid_alt P m
  ‚Üí MO_msg_valid_alt P mr
    ‚Üí MO_msg_valid_alt P
        (m &lt;*&gt; MkObservation Receive mr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk6b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk6b"><span class="nb">intros</span> P m mr [Hs Hr] Hmr; <span class="nb">split</span>; <span class="nb">cbn</span>; [<span class="bp">done</span> | |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>P (adr (state m))</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_sends m</span></span></span><br><span><var>MO_msg_valid_alt_recvs''0</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_recvs&#39;
  (MO_msg_valid_alt P) m</span></span></span><br><span><var>Hmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P mr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_sends
  (m &lt;*&gt; MkObservation Receive mr)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk6c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>P (adr (state m))</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_sends m</span></span></span><br><span><var>MO_msg_valid_alt_recvs''0</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_recvs&#39;
  (MO_msg_valid_alt P) m</span></span></span><br><span><var>Hmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P mr</span></span></span><br></div><label class="goal-separator" for="MO-v-chk6c"><hr></label><div class="goal-conclusion">MO_msg_valid_alt_recvs&#39; 
  (MO_msg_valid_alt P)
  (m &lt;*&gt; MkObservation Receive mr)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk6d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk6d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>P (adr (state m))</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_sends m</span></span></span><br><span><var>MO_msg_valid_alt_recvs''0</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_recvs&#39;
  (MO_msg_valid_alt P) m</span></span></span><br><span><var>Hmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P mr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_sends
  (m &lt;*&gt; MkObservation Receive mr)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> MO_msg_valid_alt_sends_Receive.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk6e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk6e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>P (adr (state m))</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_sends m</span></span></span><br><span><var>MO_msg_valid_alt_recvs''0</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_recvs&#39;
  (MO_msg_valid_alt P) m</span></span></span><br><span><var>Hmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P mr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_recvs&#39; (MO_msg_valid_alt P)
  (m &lt;*&gt; MkObservation Receive mr)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> MO_msg_valid_alt_recvs_Receive.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
We need the converses of these lemmas too. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk6f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk6f"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid_alt_sends_Receive_conv</span> :
  <span class="kr">forall</span> <span class="nv">m</span> <span class="nv">mr</span> : Message,
    MO_msg_valid_alt_sends (m &lt;*&gt; MkObservation Receive mr) -&gt;
      MO_msg_valid_alt_sends m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> <span class="nv">mr</span> : Message,
  MO_msg_valid_alt_sends
    (m &lt;*&gt; MkObservation Receive mr)
  ‚Üí MO_msg_valid_alt_sends m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk70" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk70"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> <span class="nv">mr</span> : Message,
  MO_msg_valid_alt_sends
    (m &lt;*&gt; MkObservation Receive mr)
  ‚Üí MO_msg_valid_alt_sends m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk71" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk71"><span class="nb">intros</span> m mr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_sends
  (m &lt;*&gt; MkObservation Receive mr)
‚Üí MO_msg_valid_alt_sends m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk72" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk72"><span class="nb">rewrite</span> (MO_msg_valid_alt_sends_shorten m).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_sends
  (m &lt;*&gt; MkObservation Receive mr)
‚Üí MO_msg_valid_alt_sends_bounded m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk73" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk73"><span class="nb">unfold</span> MO_msg_valid_alt_sends; <span class="nb">cbn</span>; <span class="nb">unfold</span> addObservation&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
   lastn k (MkObservation Receive mr :: obs (state m)) =
   MkObservation Send m&#39; :: suffix
   ‚Üí obs (state m&#39;) = suffix
     ‚àß adr (state m&#39;) = adr (state m))
‚Üí MO_msg_valid_alt_sends_bounded m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk74" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk74"><span class="nb">intros</span> Hv k suffix m&#39; Hlen Hlast.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k
    (MkObservation Receive mr :: obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Send m&#39;) suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk75" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk75"><span class="nb">destruct</span> (decide (<span class="mi">1</span> + length (obs (state m)) &lt;= k)); [<span class="bp">lia</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k
    (MkObservation Receive mr :: obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Send m&#39;) suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ <span class="mi">1</span> + length (obs (state m)) ‚â§ k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m&#39;) = suffix
‚àß adr (state m&#39;) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk76" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk76"><span class="nb">apply</span> Hv <span class="kr">with</span> k.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k
    (MkObservation Receive mr :: obs (state m)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Send m&#39;) suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ <span class="mi">1</span> + length (obs (state m)) ‚â§ k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lastn k (MkObservation Receive mr :: obs (state m)) =
MkObservation Send m&#39; :: suffix</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> lastn_cons; case_decide; [<span class="bp">lia</span> |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk77" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk77"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid_alt_recvs_Receive_conv</span> :
  <span class="kr">forall</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) (<span class="nv">m</span> <span class="nv">mr</span> : Message),
    MO_msg_valid_alt_recvs P (m &lt;*&gt; MkObservation Receive mr) -&gt;
      MO_msg_valid_alt_recvs P m /\ MO_msg_valid_alt P mr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> <span class="nv">mr</span> : Message),
  MO_msg_valid_alt_recvs P
    (m &lt;*&gt; MkObservation Receive mr)
  ‚Üí MO_msg_valid_alt_recvs P m ‚àß MO_msg_valid_alt P mr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk78" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk78"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> <span class="nv">mr</span> : Message),
  MO_msg_valid_alt_recvs P
    (m &lt;*&gt; MkObservation Receive mr)
  ‚Üí MO_msg_valid_alt_recvs P m ‚àß MO_msg_valid_alt P mr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk79" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk79"><span class="nb">intros</span> P m mr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_recvs P
  (m &lt;*&gt; MkObservation Receive mr)
‚Üí MO_msg_valid_alt_recvs P m ‚àß MO_msg_valid_alt P mr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk7a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk7a"><span class="nb">rewrite</span> (MO_msg_valid_alt_recvs_shorten P m).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_recvs P
  (m &lt;*&gt; MkObservation Receive mr)
‚Üí MO_msg_valid_alt_recvs_bounded P m
  ‚àß MO_msg_valid_alt P mr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk7b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk7b"><span class="nb">unfold</span> MO_msg_valid_alt_recvs, MO_msg_valid_alt_recvs&#39;; <span class="nb">cbn</span>; <span class="nb">unfold</span> addObservation&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
   lastn k (MkObservation Receive mr :: obs (state m)) =
   MkObservation Receive m&#39; :: suffix
   ‚Üí MO_msg_valid_alt P m&#39;)
‚Üí MO_msg_valid_alt_recvs_bounded P m
  ‚àß MO_msg_valid_alt P mr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk7c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk7c"><span class="nb">intros</span> Hv; <span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k
    (MkObservation Receive mr :: obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_recvs_bounded P m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk7d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k
    (MkObservation Receive mr :: obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br></div><label class="goal-separator" for="MO-v-chk7d"><hr></label><div class="goal-conclusion">MO_msg_valid_alt P mr</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk7e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk7e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k
    (MkObservation Receive mr :: obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt_recvs_bounded P m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk7f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk7f"><span class="nb">intros</span> k suffix m&#39; Hlen Hlast.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k
    (MkObservation Receive mr :: obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Receive m&#39;)
  suffix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk80" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk80"><span class="nb">destruct</span> (decide (<span class="mi">1</span> + length (obs (state m)) &lt;= k)); [<span class="bp">lia</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k
    (MkObservation Receive mr :: obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Receive m&#39;)
  suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ <span class="mi">1</span> + length (obs (state m)) ‚â§ k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk81" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk81"><span class="nb">apply</span> (Hv k suffix).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k
    (MkObservation Receive mr :: obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Receive m&#39;)
  suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ <span class="mi">1</span> + length (obs (state m)) ‚â§ k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lastn k (MkObservation Receive mr :: obs (state m)) =
MkObservation Receive m&#39; :: suffix</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk82" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk82"><span class="nb">rewrite</span> lastn_cons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k
    (MkObservation Receive mr :: obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>k ‚â§ length (obs (state m))</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>lastn k (obs (state m)) =
addObservation&#39; (MkObservation Receive m&#39;)
  suffix</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ <span class="mi">1</span> + length (obs (state m)) ‚â§ k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> decide (S (length (obs (state m))) ‚â§ k)
 <span class="kr">then</span> MkObservation Receive mr :: obs (state m)
 <span class="kr">else</span> lastn k (obs (state m))) =
MkObservation Receive m&#39; :: suffix</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> case_decide; [<span class="bp">lia</span> |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk83" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk83">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k
    (MkObservation Receive mr :: obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P mr</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk84" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk84"><span class="nb">apply</span> (Hv (<span class="mi">1</span> + length (obs (state m))) (obs (state m))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k
    (MkObservation Receive mr :: obs (state m)) =
  MkObservation Receive m&#39; :: suffix
  ‚Üí MO_msg_valid_alt P m&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lastn (<span class="mi">1</span> + length (obs (state m)))
  (MkObservation Receive mr :: obs (state m)) =
MkObservation Receive mr :: obs (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> lastn_ge; <span class="nb">cbn</span>; [| <span class="bp">lia</span>].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk85" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk85"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid_alt_Receive_conv</span> :
  <span class="kr">forall</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) (<span class="nv">m</span> <span class="nv">mr</span> : Message),
    MO_msg_valid_alt P (m &lt;*&gt; MkObservation Receive mr) -&gt;
      MO_msg_valid_alt P m /\ MO_msg_valid_alt P mr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> <span class="nv">mr</span> : Message),
  MO_msg_valid_alt P (m &lt;*&gt; MkObservation Receive mr)
  ‚Üí MO_msg_valid_alt P m ‚àß MO_msg_valid_alt P mr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk86" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk86"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> <span class="nv">mr</span> : Message),
  MO_msg_valid_alt P (m &lt;*&gt; MkObservation Receive mr)
  ‚Üí MO_msg_valid_alt P m ‚àß MO_msg_valid_alt P mr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk87" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk87"><span class="nb">intros</span> P m mr [HP Hms Hmr]; <span class="nb">cbn</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>P (adr (state m))</span></span></span><br><span><var>Hms</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_sends
  (m &lt;*&gt; MkObservation Receive mr)</span></span></span><br><span><var>Hmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_recvs&#39; 
  (MO_msg_valid_alt P)
  (m &lt;*&gt; MkObservation Receive mr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m ‚àß MO_msg_valid_alt P mr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk88" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk88"><span class="nb">apply</span> MO_msg_valid_alt_sends_Receive_conv <span class="kr">in</span> Hms.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>P (adr (state m))</span></span></span><br><span><var>Hms</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_sends m</span></span></span><br><span><var>Hmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_recvs&#39; 
  (MO_msg_valid_alt P)
  (m &lt;*&gt; MkObservation Receive mr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m ‚àß MO_msg_valid_alt P mr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk89" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk89"><span class="nb">apply</span> MO_msg_valid_alt_recvs_Receive_conv <span class="kr">in</span> Hmr <span class="kr">as</span> [].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>P (adr (state m))</span></span></span><br><span><var>Hms</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_sends m</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_recvs P m</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P mr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m ‚àß MO_msg_valid_alt P mr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">split</span>; [<span class="nb">constructor</span> |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  Last but not least, we need an inversion lemma which tells us that,
  if from the state of a message <code>m1</code> we sent the message <code>m2</code>, then
  <code>m1</code> must be equal to <code>m2</code>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk8a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk8a"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid_alt_Send_inv</span> :
  <span class="kr">forall</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) (<span class="nv">m1</span> <span class="nv">m2</span> : Message),
    MO_msg_valid_alt P (m1 &lt;*&gt; MkObservation Send m2) -&gt; m1 = m2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m1</span> <span class="nv">m2</span> : Message),
  MO_msg_valid_alt P (m1 &lt;*&gt; MkObservation Send m2)
  ‚Üí m1 = m2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk8b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk8b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m1</span> <span class="nv">m2</span> : Message),
  MO_msg_valid_alt P (m1 &lt;*&gt; MkObservation Send m2)
  ‚Üí m1 = m2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk8c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk8c"><span class="nb">intros</span> P m1 m2 [_ Hvs _].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvs</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_sends
  (m1 &lt;*&gt; MkObservation Send m2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">m1 = m2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk8d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk8d"><span class="nb">unfold</span> MO_msg_valid_alt_sends <span class="kr">in</span> Hvs; <span class="nb">cbn</span> <span class="kr">in</span> *; <span class="nb">unfold</span> addObservation&#39; <span class="kr">in</span> Hvs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k
    (MkObservation Send m2 :: obs (state m1)) =
  MkObservation Send m&#39; :: suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m1)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">m1 = m2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk8e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk8e"><span class="nb">specialize</span> (Hvs (<span class="mi">1</span> + length (obs (state m1))) (obs (state m1)) m2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvs</var><span class="hyp-type"><b>: </b><span>lastn (<span class="mi">1</span> + length (obs (state m1)))
  (MkObservation Send m2 :: obs (state m1)) =
MkObservation Send m2 :: obs (state m1)
‚Üí obs (state m2) = obs (state m1)
  ‚àß adr (state m2) = adr (state m1)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">m1 = m2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk8f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk8f"><span class="nb">rewrite</span> lastn_cons <span class="kr">in</span> Hvs; case_decide; [| <span class="bp">lia</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>S (length (obs (state m1)))
‚â§ <span class="mi">1</span> + length (obs (state m1))</span></span></span><br><span><var>Hvs</var><span class="hyp-type"><b>: </b><span>MkObservation Send m2 :: obs (state m1) =
MkObservation Send m2 :: obs (state m1)
‚Üí obs (state m2) = obs (state m1)
  ‚àß adr (state m2) = adr (state m1)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">m1 = m2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk90" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk90"><span class="nb">destruct</span> (Hvs eq_refl) <span class="kr">as</span> [].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>S (length (obs (state m1)))
‚â§ <span class="mi">1</span> + length (obs (state m1))</span></span></span><br><span><var>Hvs</var><span class="hyp-type"><b>: </b><span>MkObservation Send m2 :: obs (state m1) =
MkObservation Send m2 :: obs (state m1)
‚Üí obs (state m2) = obs (state m1)
  ‚àß adr (state m2) = adr (state m1)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>obs (state m2) = obs (state m1)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>adr (state m2) = adr (state m1)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">m1 = m2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> m1 <span class="kr">as</span> [[]], m2 <span class="kr">as</span> [[]]; <span class="nb">cbn</span> <span class="kr">in</span> *; <span class="bp">congruence</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  We now have, by previous lemmas, that <span class="inlinecode"><span class="id" title="var">MO_msg_valid</span></span> and <span class="inlinecode"><span class="id" title="var">MO_msg_valid_alt</span></span>
  are equivalent. The proof of the equivalence lemma is structured as follows:

<div class="paragraph"> </div>
<ul class="doclist">
<li> the <span class="inlinecode"><span class="id" title="var">MO_msg_valid</span></span> to <span class="inlinecode"><span class="id" title="var">MO_msg_valid_alt</span></span> direction is by induction on
    <span class="inlinecode"><span class="id" title="var">MO_msg_valid</span></span> for <code>P</code> and <code>m</code>
</li>
<li> the <span class="inlinecode"><span class="id" title="var">MO_msg_valid_alt</span></span> to <span class="inlinecode"><span class="id" title="var">MO_msg_valid</span></span> direction is by well-founded
    induction on the size of the message <code>m</code>
</li>
</ul>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk91" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk91"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid__MO_msg_valid_alt</span> :
  <span class="kr">forall</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
    MO_msg_valid P m &lt;-&gt; MO_msg_valid_alt P m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
  MO_msg_valid P m ‚Üî MO_msg_valid_alt P m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk92" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk92"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">P</span> : Address ‚Üí <span class="kt">Prop</span>) (<span class="nv">m</span> : Message),
  MO_msg_valid P m ‚Üî MO_msg_valid_alt P m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk93" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk93"><span class="nb">split</span>; [| <span class="nb">revert</span> m].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid P m ‚Üí MO_msg_valid_alt P m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk94" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br></div><label class="goal-separator" for="MO-v-chk94"><hr></label><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message, MO_msg_valid_alt P m ‚Üí MO_msg_valid P m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk95" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk95">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid P m ‚Üí MO_msg_valid_alt P m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk96" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk96"><span class="nb">induction</span> <span class="mi">1</span> <span class="kr">as</span> [m Hobs | m Hm IH | m mr Hm IHm Hmr IHmr].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>obs (state m) = []</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>P (adr (state m))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk97" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P m</span></span></span><br></div><label class="goal-separator" for="MO-v-chk97"><hr></label><div class="goal-conclusion">MO_msg_valid_alt P (m &lt;*&gt; MkObservation Send m)</div></blockquote><input class="alectryon-extra-goal-toggle" id="MO-v-chk98" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br><span><var>Hmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P mr</span></span></span><br><span><var>IHm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P m</span></span></span><br><span><var>IHmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P mr</span></span></span><br></div><label class="goal-separator" for="MO-v-chk98"><hr></label><div class="goal-conclusion">MO_msg_valid_alt P (m &lt;*&gt; MkObservation Receive mr)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk99" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk99">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>obs (state m) = []</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>P (adr (state m))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">constructor</span>; [<span class="bp">done</span> | |]
      ; <span class="nb">intros</span> k suffix m&#39; Hlast
      ; <span class="nb">rewrite</span> Hobs, lastn_nil <span class="kr">in</span> Hlast; <span class="nb">inversion</span> Hlast.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk9a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk9a">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P (m &lt;*&gt; MkObservation Send m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> MO_msg_valid_alt_Send.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk9b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk9b">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br><span><var>Hmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P mr</span></span></span><br><span><var>IHm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P m</span></span></span><br><span><var>IHmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P mr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid_alt P (m &lt;*&gt; MkObservation Receive mr)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> MO_msg_valid_alt_Receive.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk9c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk9c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message, MO_msg_valid_alt P m ‚Üí MO_msg_valid P m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk9d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk9d"><span class="nb">assert</span> (Hwf := well_founded_lt_compat _ (<span class="kr">fun</span> <span class="nv">m</span> =&gt; @sizeMessage Address m)
      (<span class="kr">fun</span> <span class="nv">m1</span> <span class="nv">m2</span> =&gt; sizeMessage m1 &lt; sizeMessage m2) (<span class="kr">fun</span> <span class="nv">_</span> <span class="nv">_</span> <span class="nv">H</span> =&gt; H)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hwf</var><span class="hyp-type"><b>: </b><span><span class="kn">wf</span>
  (<span class="kr">Œª</span> <span class="nv">m1</span> <span class="nv">m2</span> : BaseELMO.Message,
     sizeMessage m1 &lt; sizeMessage m2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message, MO_msg_valid_alt P m ‚Üí MO_msg_valid P m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk9e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk9e"><span class="nb">apply</span> (@well_founded_induction _ (<span class="kr">fun</span> <span class="nv">m1</span> <span class="nv">m2</span> =&gt; sizeMessage m1 &lt; sizeMessage m2) Hwf
      (<span class="kr">fun</span> <span class="nv">m</span> =&gt; MO_msg_valid_alt P m -&gt; MO_msg_valid P m)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hwf</var><span class="hyp-type"><b>: </b><span><span class="kn">wf</span>
  (<span class="kr">Œª</span> <span class="nv">m1</span> <span class="nv">m2</span> : BaseELMO.Message,
     sizeMessage m1 &lt; sizeMessage m2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">x</span> : BaseELMO.Message,
  (<span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
     sizeMessage y &lt; sizeMessage x
     ‚Üí MO_msg_valid_alt P y ‚Üí MO_msg_valid P y)
  ‚Üí MO_msg_valid_alt P x ‚Üí MO_msg_valid P x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk9f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk9f"><span class="nb">intros</span> [[[| [[] m&#39;] obs&#39;] adr&#39;]] IH Hvalid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hwf</var><span class="hyp-type"><b>: </b><span><span class="kn">wf</span>
  (<span class="kr">Œª</span> <span class="nv">m1</span> <span class="nv">m2</span> : BaseELMO.Message,
     sizeMessage m1 &lt; sizeMessage m2)</span></span></span><br><span><var>adr'</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  sizeMessage y &lt;
  sizeMessage (MkMessage (MkState [] adr&#39;))
  ‚Üí MO_msg_valid_alt P y ‚Üí MO_msg_valid P y</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P
  (MkMessage (MkState [] adr&#39;))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid P (MkMessage (MkState [] adr&#39;))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chka0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hwf</var><span class="hyp-type"><b>: </b><span><span class="kn">wf</span>
  (<span class="kr">Œª</span> <span class="nv">m1</span> <span class="nv">m2</span> : BaseELMO.Message,
     sizeMessage m1 &lt; sizeMessage m2)</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>obs'</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>adr'</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  sizeMessage y &lt;
  sizeMessage
    (MkMessage
       (MkState
          (MkObservation Receive m&#39; :: obs&#39;) adr&#39;))
  ‚Üí MO_msg_valid_alt P y ‚Üí MO_msg_valid P y</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P
  (MkMessage
     (MkState
        (MkObservation Receive m&#39; :: obs&#39;)
        adr&#39;))</span></span></span><br></div><label class="goal-separator" for="MO-v-chka0"><hr></label><div class="goal-conclusion">MO_msg_valid P
  (MkMessage
     (MkState (MkObservation Receive m&#39; :: obs&#39;) adr&#39;))</div></blockquote><input class="alectryon-extra-goal-toggle" id="MO-v-chka1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hwf</var><span class="hyp-type"><b>: </b><span><span class="kn">wf</span>
  (<span class="kr">Œª</span> <span class="nv">m1</span> <span class="nv">m2</span> : BaseELMO.Message,
     sizeMessage m1 &lt; sizeMessage m2)</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>obs'</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>adr'</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  sizeMessage y &lt;
  sizeMessage
    (MkMessage
       (MkState (MkObservation Send m&#39; :: obs&#39;)
          adr&#39;))
  ‚Üí MO_msg_valid_alt P y ‚Üí MO_msg_valid P y</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P
  (MkMessage
     (MkState (MkObservation Send m&#39; :: obs&#39;)
        adr&#39;))</span></span></span><br></div><label class="goal-separator" for="MO-v-chka1"><hr></label><div class="goal-conclusion">MO_msg_valid P
  (MkMessage
     (MkState (MkObservation Send m&#39; :: obs&#39;) adr&#39;))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chka2" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chka2">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hwf</var><span class="hyp-type"><b>: </b><span><span class="kn">wf</span>
  (<span class="kr">Œª</span> <span class="nv">m1</span> <span class="nv">m2</span> : BaseELMO.Message,
     sizeMessage m1 &lt; sizeMessage m2)</span></span></span><br><span><var>adr'</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  sizeMessage y &lt;
  sizeMessage (MkMessage (MkState [] adr&#39;))
  ‚Üí MO_msg_valid_alt P y ‚Üí MO_msg_valid P y</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P
  (MkMessage (MkState [] adr&#39;))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid P (MkMessage (MkState [] adr&#39;))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">constructor</span>; [| <span class="nb">inversion</span> Hvalid].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chka3" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chka3">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hwf</var><span class="hyp-type"><b>: </b><span><span class="kn">wf</span>
  (<span class="kr">Œª</span> <span class="nv">m1</span> <span class="nv">m2</span> : BaseELMO.Message,
     sizeMessage m1 &lt; sizeMessage m2)</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>obs'</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>adr'</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  sizeMessage y &lt;
  sizeMessage
    (MkMessage
       (MkState
          (MkObservation Receive m&#39; :: obs&#39;) adr&#39;))
  ‚Üí MO_msg_valid_alt P y ‚Üí MO_msg_valid P y</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P
  (MkMessage
     (MkState
        (MkObservation Receive m&#39; :: obs&#39;)
        adr&#39;))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid P
  (MkMessage
     (MkState (MkObservation Receive m&#39; :: obs&#39;) adr&#39;))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chka4" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chka4"><span class="nb">change</span> (MkMessage _) <span class="kr">with</span> (MkMessage (MkState obs&#39; adr&#39;) &lt;*&gt; MkObservation Receive m&#39;) <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hwf</var><span class="hyp-type"><b>: </b><span><span class="kn">wf</span>
  (<span class="kr">Œª</span> <span class="nv">m1</span> <span class="nv">m2</span> : BaseELMO.Message,
     sizeMessage m1 &lt; sizeMessage m2)</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>obs'</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>adr'</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  sizeMessage y &lt;
  sizeMessage
    (MkMessage (MkState obs&#39; adr&#39;) &lt;*&gt;
     MkObservation Receive m&#39;)
  ‚Üí MO_msg_valid_alt P y ‚Üí MO_msg_valid P y</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P
  (MkMessage (MkState obs&#39; adr&#39;) &lt;*&gt;
   MkObservation Receive m&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid P
  (MkMessage (MkState obs&#39; adr&#39;) &lt;*&gt;
   MkObservation Receive m&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chka5" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chka5"><span class="nb">apply</span> MO_msg_valid_alt_Receive_conv <span class="kr">in</span> Hvalid <span class="kr">as</span> [].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hwf</var><span class="hyp-type"><b>: </b><span><span class="kn">wf</span>
  (<span class="kr">Œª</span> <span class="nv">m1</span> <span class="nv">m2</span> : BaseELMO.Message,
     sizeMessage m1 &lt; sizeMessage m2)</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>obs'</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>adr'</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  sizeMessage y &lt;
  sizeMessage
    (MkMessage (MkState obs&#39; adr&#39;) &lt;*&gt;
     MkObservation Receive m&#39;)
  ‚Üí MO_msg_valid_alt P y ‚Üí MO_msg_valid P y</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P (MkMessage (MkState obs&#39; adr&#39;))</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P m&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid P
  (MkMessage (MkState obs&#39; adr&#39;) &lt;*&gt;
   MkObservation Receive m&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">constructor</span> <span class="mi">3</span>; (<span class="nb">apply</span> IH; [<span class="nb">unfold</span> sizeMessage; <span class="nb">cbn</span>; <span class="bp">lia</span> |]).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chka6" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chka6">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hwf</var><span class="hyp-type"><b>: </b><span><span class="kn">wf</span>
  (<span class="kr">Œª</span> <span class="nv">m1</span> <span class="nv">m2</span> : BaseELMO.Message,
     sizeMessage m1 &lt; sizeMessage m2)</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>obs'</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>adr'</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  sizeMessage y &lt;
  sizeMessage
    (MkMessage
       (MkState (MkObservation Send m&#39; :: obs&#39;)
          adr&#39;))
  ‚Üí MO_msg_valid_alt P y ‚Üí MO_msg_valid P y</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P
  (MkMessage
     (MkState (MkObservation Send m&#39; :: obs&#39;)
        adr&#39;))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid P
  (MkMessage
     (MkState (MkObservation Send m&#39; :: obs&#39;) adr&#39;))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chka7" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chka7"><span class="nb">change</span> (MkMessage _) <span class="kr">with</span> (MkMessage (MkState obs&#39; adr&#39;) &lt;*&gt; MkObservation Send m&#39;) <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hwf</var><span class="hyp-type"><b>: </b><span><span class="kn">wf</span>
  (<span class="kr">Œª</span> <span class="nv">m1</span> <span class="nv">m2</span> : BaseELMO.Message,
     sizeMessage m1 &lt; sizeMessage m2)</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>obs'</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>adr'</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  sizeMessage y &lt;
  sizeMessage
    (MkMessage (MkState obs&#39; adr&#39;) &lt;*&gt;
     MkObservation Send m&#39;)
  ‚Üí MO_msg_valid_alt P y ‚Üí MO_msg_valid P y</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P
  (MkMessage (MkState obs&#39; adr&#39;) &lt;*&gt;
   MkObservation Send m&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid P
  (MkMessage (MkState obs&#39; adr&#39;) &lt;*&gt;
   MkObservation Send m&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chka8" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chka8"><span class="nb">replace</span> (MkMessage (MkState obs&#39; adr&#39;)) <span class="kr">with</span> m&#39; <span class="kr">in</span> *
        <span class="bp">by</span> (<span class="nb">apply</span> MO_msg_valid_alt_Send_inv <span class="kr">in</span> Hvalid; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hwf</var><span class="hyp-type"><b>: </b><span><span class="kn">wf</span>
  (<span class="kr">Œª</span> <span class="nv">m1</span> <span class="nv">m2</span> : BaseELMO.Message,
     sizeMessage m1 &lt; sizeMessage m2)</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>obs'</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>adr'</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  sizeMessage y &lt;
  sizeMessage (m&#39; &lt;*&gt; MkObservation Send m&#39;)
  ‚Üí MO_msg_valid_alt P y ‚Üí MO_msg_valid P y</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P
  (m&#39; &lt;*&gt; MkObservation Send m&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid P (m&#39; &lt;*&gt; MkObservation Send m&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chka9" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chka9"><span class="nb">apply</span> MO_msg_valid_alt_Send_conv <span class="kr">in</span> Hvalid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hwf</var><span class="hyp-type"><b>: </b><span><span class="kn">wf</span>
  (<span class="kr">Œª</span> <span class="nv">m1</span> <span class="nv">m2</span> : BaseELMO.Message,
     sizeMessage m1 &lt; sizeMessage m2)</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>obs'</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>adr'</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  sizeMessage y &lt;
  sizeMessage (m&#39; &lt;*&gt; MkObservation Send m&#39;)
  ‚Üí MO_msg_valid_alt P y ‚Üí MO_msg_valid P y</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt P m&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid P (m&#39; &lt;*&gt; MkObservation Send m&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">constructor</span> <span class="mi">2</span>; <span class="nb">apply</span> IH; [<span class="nb">unfold</span> sizeMessage; <span class="nb">cbn</span>; <span class="bp">lia</span> |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sec_alternative_definition_of_validity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Inductive</span> <span class="nf">MO_component_valid</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) : Label -&gt; State -&gt; option Message -&gt; <span class="kt">Prop</span> :=
| MOCV_Receive :
    <span class="kr">forall</span> (<span class="nv">s</span> : State) (<span class="nv">m</span> : Message),
      MO_msg_valid P m -&gt; MO_component_valid P Receive s (Some m)
| MOCV_Send :
    <span class="kr">forall</span> <span class="nv">s</span> : State,
      MO_component_valid P Send s None.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Ltac</span> <span class="nf">invert_MO_component_valid</span> :=
<span class="kp">repeat</span> <span class="kr">match goal with</span>
| H : MO_component_valid _ Receive _ None  |- _ =&gt; <span class="nb">inversion</span> H; <span class="nb">subst</span>; <span class="nb">clear</span> H
| H : MO_component_valid _ Send _ (Some _) |- _ =&gt; <span class="nb">inversion</span> H; <span class="nb">subst</span>; <span class="nb">clear</span> H
<span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">MO_component_machine</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) (<span class="nv">i</span> : Address) : VLSMMachine ELMO_component_type :=
{|
  initial_state_prop := UMO_component_initial_state_prop i;
  initial_message_prop := const <span class="kt">False</span>;
  s0 := Inhabited_UMO_component_initial_state_type i;
  transition := <span class="kr">fun</span> <span class="nv">l</span> &#39;(st, om) =&gt; UMO_component_transition l st om;
  valid := <span class="kr">fun</span> <span class="nv">l</span> &#39;(st, om) =&gt; MO_component_valid P l st om;
|}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">MO_component</span> (<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>) (<span class="nv">i</span> : Address) : VLSM Message :=
{|
  vlsm_type := ELMO_component_type;
  vlsm_machine := MO_component_machine P i;
|}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sec_MO_component_lemmas</span>.</span></span></pre><div class="doc">
<a id="lab3"></a><h2 class="section">Component lemmas</h2>
<div class="paragraph"> </div>

  We will use the notation <span class="inlinecode"><span class="id" title="var">Mi</span></span> for a <span class="inlinecode"><span class="id" title="var">MO_component</span></span> of address <span class="inlinecode"><span class="id" title="var">i</span></span>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">i</span> : Address}
  {<span class="nv">P</span> : Address -&gt; <span class="kt">Prop</span>}
  (<span class="nv">Mi</span> : VLSM Message := MO_component P i)
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkaa" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkaa"><span class="kn">Lemma</span> <span class="nf">VLSM_incl_UMO_MOComponent</span> : VLSM_incl Mi (UMO_component i).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl Mi (UMO_component i)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkab" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkab"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl Mi (UMO_component i)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkac" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkac"><span class="nb">intros</span>; <span class="nb">apply</span> basic_VLSM_strong_incl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_incl_initial_state_preservation
  (MO_component_machine P i) (UMO_component_machine i)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chkad" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><label class="goal-separator" for="MO-v-chkad"><hr></label><div class="goal-conclusion">strong_incl_initial_message_preservation
  (MO_component_machine P i) 
  (UMO_component_machine i)</div></blockquote><input class="alectryon-extra-goal-toggle" id="MO-v-chkae" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><label class="goal-separator" for="MO-v-chkae"><hr></label><div class="goal-conclusion">strong_incl_valid_preservation
  (MO_component_machine P i) 
  (UMO_component_machine i)</div></blockquote><input class="alectryon-extra-goal-toggle" id="MO-v-chkaf" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><label class="goal-separator" for="MO-v-chkaf"><hr></label><div class="goal-conclusion">strong_incl_transition_preservation
  (MO_component_machine P i) 
  (UMO_component_machine i)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkb0" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkb0">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_incl_initial_state_preservation
  (MO_component_machine P i) (UMO_component_machine i)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intro</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkb1" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkb1">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_incl_initial_message_preservation
  (MO_component_machine P i) (UMO_component_machine i)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intro</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkb2" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkb2">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_incl_valid_preservation
  (MO_component_machine P i) (UMO_component_machine i)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">inversion</span> <span class="mi">1</span>; <span class="nb">subst</span>; <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkb3" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkb3">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strong_incl_transition_preservation
  (MO_component_machine P i) (UMO_component_machine i)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intro</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkb4" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkb4">#[export] <span class="kn">Instance</span> <span class="nf">HasBeenSentCapability_MOComponent</span> : HasBeenSentCapability Mi.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">HasBeenSentCapability Mi</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkb5" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkb5"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">HasBeenSentCapability Mi</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkb6" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkb6"><span class="nb">constructor</span> <span class="mi">1</span> <span class="kr">with</span> (<span class="kr">fun</span> <span class="nv">s</span> <span class="nv">m</span> =&gt; m ‚àà sentMessages s);
    [<span class="bp">by</span> <span class="nb">intros</span> s m; <span class="nb">typeclasses eauto</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent_stepwise_prop
  (<span class="kr">Œª</span> (<span class="nv">s</span> : BaseELMO.State) (<span class="nv">m</span> : Message),
     m ‚àà sentMessages s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkb7" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkb7"><span class="nb">split</span>; [<span class="bp">by</span> <span class="nb">intros</span> [] []; <span class="nb">cbn</span> <span class="kr">in</span> *; <span class="nb">subst</span>; <span class="nb">cbn</span>; <span class="nb">apply</span> not_elem_of_nil |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : VLSM.label
         (preloaded_with_all_messages_vlsm Mi)) (<span class="nv">s</span> : 
                                                 VLSM.state
                                                 (preloaded_with_all_messages_vlsm
                                                 Mi)) 
  (<span class="nv">im</span> : option Message) (<span class="nv">s&#39;</span> : VLSM.state
                                (preloaded_with_all_messages_vlsm
                                   Mi)) (<span class="nv">om</span> : option
                                                Message),
  input_constrained_transition Mi l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : Message,
      msg ‚àà sentMessages s&#39;
      ‚Üî field_selector output msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |} ‚à® msg ‚àà sentMessages s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkb8" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkb8"><span class="nb">intros</span> l s im s&#39; om [(Hvsp &amp; Hovmp &amp; Hv) Ht] m; <span class="nb">cbn</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Mi) s</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (preloaded_with_all_messages_vlsm Mi) im</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>MO_component_valid P l s im</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>UMO_component_transition l s im = (s&#39;, om)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">m ‚àà sentMessages s&#39; ‚Üî om = Some m ‚à® m ‚àà sentMessages s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkb9" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkb9"><span class="nb">destruct</span> l, im; <span class="nb">cbn</span> <span class="kr">in</span> *; invert_MO_component_valid;
    <span class="nb">inversion</span> Ht; <span class="nb">subst</span>; <span class="nb">clear</span> Ht; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Mi) s</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (preloaded_with_all_messages_vlsm Mi)
  (Some m0)</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>MO_component_valid P Receive s (Some m0)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">m
‚àà map message
    (<span class="kr">if</span> decide <span class="kt">False</span>
     <span class="kr">then</span>
      MkObservation Receive m0
      :: filter isSend (obs s)
     <span class="kr">else</span> filter isSend (obs s))
‚Üî None = Some m ‚à® m ‚àà sentMessages s</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chkba" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Mi) s</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (preloaded_with_all_messages_vlsm Mi) None</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>MO_component_valid P Send s None</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><label class="goal-separator" for="MO-v-chkba"><hr></label><div class="goal-conclusion">m
‚àà map message
    (<span class="kr">if</span> decide <span class="kt">True</span>
     <span class="kr">then</span>
      MkObservation Send (MkMessage s)
      :: filter isSend (obs s)
     <span class="kr">else</span> filter isSend (obs s))
‚Üî Some (MkMessage s) = Some m ‚à® m ‚àà sentMessages s</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkbb" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkbb">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Mi) s</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (preloaded_with_all_messages_vlsm Mi)
  (Some m0)</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>MO_component_valid P Receive s (Some m0)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">m
‚àà map message
    (<span class="kr">if</span> decide <span class="kt">False</span>
     <span class="kr">then</span>
      MkObservation Receive m0
      :: filter isSend (obs s)
     <span class="kr">else</span> filter isSend (obs s))
‚Üî None = Some m ‚à® m ‚àà sentMessages s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> decide_False; <span class="nb">cbn</span>; <span class="nb">firstorder</span> <span class="bp">congruence</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkbc" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkbc">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Mi) s</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (preloaded_with_all_messages_vlsm Mi) None</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>MO_component_valid P Send s None</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">m
‚àà map message
    (<span class="kr">if</span> decide <span class="kt">True</span>
     <span class="kr">then</span>
      MkObservation Send (MkMessage s)
      :: filter isSend (obs s)
     <span class="kr">else</span> filter isSend (obs s))
‚Üî Some (MkMessage s) = Some m ‚à® m ‚àà sentMessages s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkbd" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkbd"><span class="nb">rewrite</span> decide_True <span class="bp">by</span> <span class="bp">done</span>; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Mi) s</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (preloaded_with_all_messages_vlsm Mi) None</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>MO_component_valid P Send s None</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">m ‚àà MkMessage s :: map message (filter isSend (obs s))
‚Üî Some (MkMessage s) = Some m ‚à® m ‚àà sentMessages s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkbe" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkbe"><span class="nb">unfold</span> Message; <span class="nb">rewrite</span> elem_of_cons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Mi) s</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (preloaded_with_all_messages_vlsm Mi) None</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>MO_component_valid P Send s None</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">m = MkMessage s
‚à® m ‚àà map message (filter isSend (obs s))
‚Üî Some (MkMessage s) = Some m ‚à® m ‚àà sentMessages s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">firstorder</span> <span class="bp">congruence</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkbf" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkbf">#[export] <span class="kn">Instance</span> <span class="nf">HasBeenReceivedCapability_MOComponent</span> : HasBeenReceivedCapability Mi.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">HasBeenReceivedCapability Mi</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkc0" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkc0"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">HasBeenReceivedCapability Mi</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkc1" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkc1"><span class="nb">constructor</span> <span class="mi">1</span> <span class="kr">with</span> (<span class="kr">fun</span> <span class="nv">s</span> <span class="nv">m</span> =&gt; m ‚àà receivedMessages s);
    [<span class="bp">by</span> <span class="nb">intros</span> s m; <span class="nb">typeclasses eauto</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received_stepwise_prop
  (<span class="kr">Œª</span> (<span class="nv">s</span> : BaseELMO.State) (<span class="nv">m</span> : Message),
     m ‚àà receivedMessages s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkc2" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkc2"><span class="nb">split</span>; [<span class="bp">by</span> <span class="nb">intros</span> [] []; <span class="nb">cbn</span> <span class="kr">in</span> *; <span class="nb">subst</span>; <span class="nb">cbn</span>; <span class="nb">apply</span> not_elem_of_nil |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : VLSM.label
         (preloaded_with_all_messages_vlsm Mi)) (<span class="nv">s</span> : 
                                                 VLSM.state
                                                 (preloaded_with_all_messages_vlsm
                                                 Mi)) 
  (<span class="nv">im</span> : option Message) (<span class="nv">s&#39;</span> : VLSM.state
                                (preloaded_with_all_messages_vlsm
                                   Mi)) (<span class="nv">om</span> : option
                                                Message),
  input_constrained_transition Mi l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : Message,
      msg ‚àà receivedMessages s&#39;
      ‚Üî field_selector input msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |} ‚à® msg ‚àà receivedMessages s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkc3" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkc3"><span class="nb">intros</span> l s im s&#39; om [(Hvsp &amp; Hovmp &amp; Hv) Ht] m; <span class="nb">cbn</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Mi) s</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (preloaded_with_all_messages_vlsm Mi) im</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>MO_component_valid P l s im</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>UMO_component_transition l s im = (s&#39;, om)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">m ‚àà receivedMessages s&#39;
‚Üî im = Some m ‚à® m ‚àà receivedMessages s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkc4" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkc4"><span class="nb">destruct</span> l, im; <span class="nb">cbn</span> <span class="kr">in</span> *; invert_MO_component_valid;
    <span class="nb">inversion</span> Ht; <span class="nb">subst</span>; <span class="nb">clear</span> Ht; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Mi) s</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (preloaded_with_all_messages_vlsm Mi)
  (Some m0)</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>MO_component_valid P Receive s (Some m0)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">m
‚àà map message
    (<span class="kr">if</span> decide <span class="kt">True</span>
     <span class="kr">then</span>
      MkObservation Receive m0
      :: filter isReceive (obs s)
     <span class="kr">else</span> filter isReceive (obs s))
‚Üî Some m0 = Some m ‚à® m ‚àà receivedMessages s</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chkc5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Mi) s</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (preloaded_with_all_messages_vlsm Mi) None</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>MO_component_valid P Send s None</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><label class="goal-separator" for="MO-v-chkc5"><hr></label><div class="goal-conclusion">m
‚àà map message
    (<span class="kr">if</span> decide <span class="kt">False</span>
     <span class="kr">then</span>
      MkObservation Send (MkMessage s)
      :: filter isReceive (obs s)
     <span class="kr">else</span> filter isReceive (obs s))
‚Üî None = Some m ‚à® m ‚àà receivedMessages s</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkc6" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkc6">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Mi) s</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (preloaded_with_all_messages_vlsm Mi)
  (Some m0)</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>MO_component_valid P Receive s (Some m0)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">m
‚àà map message
    (<span class="kr">if</span> decide <span class="kt">True</span>
     <span class="kr">then</span>
      MkObservation Receive m0
      :: filter isReceive (obs s)
     <span class="kr">else</span> filter isReceive (obs s))
‚Üî Some m0 = Some m ‚à® m ‚àà receivedMessages s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkc7" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkc7"><span class="nb">rewrite</span> decide_True <span class="bp">by</span> <span class="bp">done</span>; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Mi) s</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (preloaded_with_all_messages_vlsm Mi)
  (Some m0)</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>MO_component_valid P Receive s (Some m0)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">m ‚àà m0 :: map message (filter isReceive (obs s))
‚Üî Some m0 = Some m ‚à® m ‚àà receivedMessages s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkc8" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkc8"><span class="nb">unfold</span> Message; <span class="nb">rewrite</span> elem_of_cons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Mi) s</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (preloaded_with_all_messages_vlsm Mi)
  (Some m0)</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>MO_component_valid P Receive s (Some m0)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">m = m0 ‚à® m ‚àà map message (filter isReceive (obs s))
‚Üî Some m0 = Some m ‚à® m ‚àà receivedMessages s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">firstorder</span> <span class="bp">congruence</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkc9" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkc9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Mi) s</span></span></span><br><span><var>Hovmp</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (preloaded_with_all_messages_vlsm Mi) None</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>MO_component_valid P Send s None</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">m
‚àà map message
    (<span class="kr">if</span> decide <span class="kt">False</span>
     <span class="kr">then</span>
      MkObservation Send (MkMessage s)
      :: filter isReceive (obs s)
     <span class="kr">else</span> filter isReceive (obs s))
‚Üî None = Some m ‚à® m ‚àà receivedMessages s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> decide_False; <span class="nb">cbn</span>; <span class="nb">firstorder</span> <span class="bp">congruence</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Instance</span> <span class="nf">HasBeenDirectlyObservedCapability_MOComponent</span> :
  HasBeenDirectlyObservedCapability Mi :=
    HasBeenDirectlyObservedCapability_from_sent_received Mi.</span></span></pre><div class="doc">
The initial state of <span class="inlinecode"><span class="id" title="var">Mi</span></span> is unique. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkca" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkca"><span class="kn">Lemma</span> <span class="nf">vs0_uniqueness</span> :
  <span class="kr">forall</span> <span class="nv">is</span> : State,
    UMO_component_initial_state_prop i <span class="kr">is</span> -&gt;
      <span class="kr">is</span> = ``(vs0 Mi).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">is</span> : State,
  UMO_component_initial_state_prop i <span class="kr">is</span>
  ‚Üí <span class="kr">is</span> = `(vs0 Mi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkcb" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkcb"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">is</span> : State,
  UMO_component_initial_state_prop i <span class="kr">is</span>
  ‚Üí <span class="kr">is</span> = `(vs0 Mi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> []; <span class="nb">inversion</span> <span class="mi">1</span>; <span class="nb">cbv</span> <span class="kr">in</span> *; <span class="nb">subst</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab4"></a><h3 class="section">Properties of transitions and traces</h3>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --></pre><div class="doc">
In a valid state <code>s</code>, we can send a message containing this state. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkcc" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkcc"><span class="kn">Lemma</span> <span class="nf">input_constrained_transition_Send</span> :
  <span class="kr">forall</span> <span class="nv">s</span> : State,
    constrained_state_prop Mi s -&gt;
      input_constrained_transition Mi Send
        (s, None)
        (s &lt;+&gt; MkObservation Send (MkMessage s), Some (MkMessage s)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : State,
  constrained_state_prop Mi s
  ‚Üí input_constrained_transition Mi Send (s, None)
      (s &lt;+&gt; MkObservation Send (MkMessage s),
       Some (MkMessage s))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkcd" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkcd"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : State,
  constrained_state_prop Mi s
  ‚Üí input_constrained_transition Mi Send (s, None)
      (s &lt;+&gt; MkObservation Send (MkMessage s),
       Some (MkMessage s))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkce" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkce"><span class="nb">intros</span> s Hvsp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Mi s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_constrained_transition Mi Send (s, None)
  (s &lt;+&gt; MkObservation Send (MkMessage s),
   Some (MkMessage s))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkcf" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkcf"><span class="kp">do</span> <span class="mi">2</span> <span class="nb">red</span>; <span class="nb">cbn</span>; split_and!; [<span class="bp">done</span> | | | <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Mi s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop
  (preloaded_with_all_messages_vlsm Mi) None</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chkd0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Mi s</span></span></span><br></div><label class="goal-separator" for="MO-v-chkd0"><hr></label><div class="goal-conclusion">MO_component_valid P Send s None</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkd1" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkd1">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Mi s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop
  (preloaded_with_all_messages_vlsm Mi) None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="kr">exists</span> (<span class="nv">MkState</span> [] i); <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkd2" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkd2">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Mi s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_component_valid P Send s None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="kp">do</span> <span class="mi">2</span> <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
In a valid state <code>s</code>, we can receive any valid message. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkd3" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkd3"><span class="kn">Lemma</span> <span class="nf">input_constrained_transition_Receive</span> :
  <span class="kr">forall</span> (<span class="nv">s</span> : State) (<span class="nv">m</span> : Message),
    constrained_state_prop Mi s -&gt; MO_msg_valid P m -&gt;
      input_constrained_transition Mi Receive
        (s, Some m)
        (s &lt;+&gt; MkObservation Receive m, None).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : State) (<span class="nv">m</span> : Message),
  constrained_state_prop Mi s
  ‚Üí MO_msg_valid P m
    ‚Üí input_constrained_transition Mi Receive
        (s, Some m)
        (s &lt;+&gt; MkObservation Receive m, None)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkd4" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkd4"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : State) (<span class="nv">m</span> : Message),
  constrained_state_prop Mi s
  ‚Üí MO_msg_valid P m
    ‚Üí input_constrained_transition Mi Receive
        (s, Some m)
        (s &lt;+&gt; MkObservation Receive m, None)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkd5" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkd5"><span class="nb">intros</span> s m Hvsp Hvalid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Mi s</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_constrained_transition Mi Receive (s, Some m)
  (s &lt;+&gt; MkObservation Receive m, None)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkd6" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkd6"><span class="kp">do</span> <span class="mi">2</span> <span class="nb">red</span>; <span class="nb">cbn</span>; split_and!; [<span class="bp">done</span> | | | <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Mi s</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop
  (preloaded_with_all_messages_vlsm Mi) (Some m)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chkd7" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Mi s</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br></div><label class="goal-separator" for="MO-v-chkd7"><hr></label><div class="goal-conclusion">MO_component_valid P Receive s (Some m)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkd8" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkd8">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Mi s</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop
  (preloaded_with_all_messages_vlsm Mi) (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="kr">exists</span> (<span class="nv">MkState</span> [] i); <span class="nb">constructor</span>; <span class="nb">cbn</span>; [| <span class="nb">right</span>].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkd9" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkd9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Mi s</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_component_valid P Receive s (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
If a message <code>m</code> is valid, its <span class="inlinecode"><span class="id" title="var">state</span></span> is reachable. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkda" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkda"><span class="kn">Lemma</span> <span class="nf">constrained_state_prop_MO_msg_valid</span> :
  <span class="kr">forall</span> <span class="nv">m</span> : Message,
    MO_msg_valid P m -&gt; adr (state m) = i -&gt;
      constrained_state_prop Mi (state m).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message,
  MO_msg_valid P m
  ‚Üí adr (state m) = i
    ‚Üí constrained_state_prop Mi (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkdb" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkdb"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message,
  MO_msg_valid P m
  ‚Üí adr (state m) = i
    ‚Üí constrained_state_prop Mi (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkdc" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkdc"><span class="nb">induction</span> <span class="mi">1</span> <span class="kr">as</span> [m Hobs | m Hm IH | m mr Hm IHm Hmr IHmr]; <span class="nb">cbn</span>; <span class="nb">intros</span> Hadr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>obs (state m) = []</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>P (adr (state m))</span></span></span><br><span><var>Hadr</var><span class="hyp-type"><b>: </b><span>adr (state m) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">constrained_state_prop Mi (state m)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chkdd" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>adr (state m) = i
‚Üí constrained_state_prop Mi (state m)</span></span></span><br><span><var>Hadr</var><span class="hyp-type"><b>: </b><span>adr (state m) = i</span></span></span><br></div><label class="goal-separator" for="MO-v-chkdd"><hr></label><div class="goal-conclusion">constrained_state_prop Mi
  (state m &lt;+&gt; MkObservation Send m)</div></blockquote><input class="alectryon-extra-goal-toggle" id="MO-v-chkde" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br><span><var>Hmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P mr</span></span></span><br><span><var>IHm</var><span class="hyp-type"><b>: </b><span>adr (state m) = i
‚Üí constrained_state_prop Mi (state m)</span></span></span><br><span><var>IHmr</var><span class="hyp-type"><b>: </b><span>adr (state mr) = i
‚Üí constrained_state_prop Mi (state mr)</span></span></span><br><span><var>Hadr</var><span class="hyp-type"><b>: </b><span>adr (state m) = i</span></span></span><br></div><label class="goal-separator" for="MO-v-chkde"><hr></label><div class="goal-conclusion">constrained_state_prop Mi
  (state m &lt;+&gt; MkObservation Receive mr)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkdf" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkdf">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>obs (state m) = []</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>P (adr (state m))</span></span></span><br><span><var>Hadr</var><span class="hyp-type"><b>: </b><span>adr (state m) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">constrained_state_prop Mi (state m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="kr">exists</span> <span class="nv">None</span>; <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chke0" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chke0">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>adr (state m) = i
‚Üí constrained_state_prop Mi (state m)</span></span></span><br><span><var>Hadr</var><span class="hyp-type"><b>: </b><span>adr (state m) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">constrained_state_prop Mi
  (state m &lt;+&gt; MkObservation Send m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chke1" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chke1"><span class="nb">apply</span> (@input_valid_transition_destination _ (preloaded_with_all_messages_vlsm Mi)
      Send (state m) _ None (Some m)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>adr (state m) = i
‚Üí constrained_state_prop Mi (state m)</span></span></span><br><span><var>Hadr</var><span class="hyp-type"><b>: </b><span>adr (state m) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition
  (preloaded_with_all_messages_vlsm Mi) Send
  (state m, None)
  (state m &lt;+&gt; MkObservation Send m, Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chke2" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chke2"><span class="nb">destruct</span> m <span class="kr">as</span> [s]; <span class="nb">cbn</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P (MkMessage s)</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>adr s = i ‚Üí constrained_state_prop Mi s</span></span></span><br><span><var>Hadr</var><span class="hyp-type"><b>: </b><span>adr s = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition
  (preloaded_with_all_messages_vlsm Mi) Send (s, None)
  (s &lt;+&gt; MkObservation Send (MkMessage s),
   Some (MkMessage s))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> input_constrained_transition_Send, IH.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chke3" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chke3">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br><span><var>Hmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P mr</span></span></span><br><span><var>IHm</var><span class="hyp-type"><b>: </b><span>adr (state m) = i
‚Üí constrained_state_prop Mi (state m)</span></span></span><br><span><var>IHmr</var><span class="hyp-type"><b>: </b><span>adr (state mr) = i
‚Üí constrained_state_prop Mi (state mr)</span></span></span><br><span><var>Hadr</var><span class="hyp-type"><b>: </b><span>adr (state m) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">constrained_state_prop Mi
  (state m &lt;+&gt; MkObservation Receive mr)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chke4" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chke4"><span class="nb">apply</span> (@input_valid_transition_destination _ (preloaded_with_all_messages_vlsm Mi)
      Receive (state m) _ (Some mr) None).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br><span><var>Hmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P mr</span></span></span><br><span><var>IHm</var><span class="hyp-type"><b>: </b><span>adr (state m) = i
‚Üí constrained_state_prop Mi (state m)</span></span></span><br><span><var>IHmr</var><span class="hyp-type"><b>: </b><span>adr (state mr) = i
‚Üí constrained_state_prop Mi (state mr)</span></span></span><br><span><var>Hadr</var><span class="hyp-type"><b>: </b><span>adr (state m) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition
  (preloaded_with_all_messages_vlsm Mi) Receive
  (state m, Some mr)
  (state m &lt;+&gt; MkObservation Receive mr, None)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chke5" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chke5"><span class="nb">destruct</span> m <span class="kr">as</span> [s]; <span class="nb">cbn</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>mr</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P (MkMessage s)</span></span></span><br><span><var>Hmr</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P mr</span></span></span><br><span><var>IHm</var><span class="hyp-type"><b>: </b><span>adr s = i ‚Üí constrained_state_prop Mi s</span></span></span><br><span><var>IHmr</var><span class="hyp-type"><b>: </b><span>adr (state mr) = i
‚Üí constrained_state_prop Mi (state mr)</span></span></span><br><span><var>Hadr</var><span class="hyp-type"><b>: </b><span>adr s = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition
  (preloaded_with_all_messages_vlsm Mi) Receive
  (s, Some mr) (s &lt;+&gt; MkObservation Receive mr, None)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> input_constrained_transition_Receive; itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
Valid transitions and valid traces lead to bigger states. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chke6" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chke6"><span class="kn">Lemma</span> <span class="nf">MO_component_valid_transition_size</span> :
  <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">iom</span> <span class="nv">oom</span> : option Message) (<span class="nv">lbl</span> : Label),
    MO_component_valid P lbl s1 iom -&gt;
    UMO_component_transition lbl s1 iom = (s2, oom) -&gt;
      sizeState s1 &lt; sizeState s2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">iom</span> <span class="nv">oom</span> : option Message) (<span class="nv">lbl</span> : Label),
  MO_component_valid P lbl s1 iom
  ‚Üí UMO_component_transition lbl s1 iom = (s2, oom)
    ‚Üí sizeState s1 &lt; sizeState s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chke7" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chke7"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">iom</span> <span class="nv">oom</span> : option Message) (<span class="nv">lbl</span> : Label),
  MO_component_valid P lbl s1 iom
  ‚Üí UMO_component_transition lbl s1 iom = (s2, oom)
    ‚Üí sizeState s1 &lt; sizeState s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> [] s2 [im |] oom []; <span class="kp">do</span> <span class="mi">2</span> <span class="nb">inversion_clear</span> <span class="mi">1</span>; <span class="nb">cbn</span>; <span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chke8" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chke8"><span class="kn">Lemma</span> <span class="nf">input_constrained_transition_size</span> :
  <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">iom</span> <span class="nv">oom</span> : option Message) (<span class="nv">lbl</span> : Label),
    input_constrained_transition Mi lbl (s1, iom) (s2, oom) -&gt;
      sizeState s1 &lt; sizeState s2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">iom</span> <span class="nv">oom</span> : option Message) (<span class="nv">lbl</span> : Label),
  input_constrained_transition Mi lbl (s1, iom)
    (s2, oom) ‚Üí sizeState s1 &lt; sizeState s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chke9" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chke9"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">iom</span> <span class="nv">oom</span> : option Message) (<span class="nv">lbl</span> : Label),
  input_constrained_transition Mi lbl (s1, iom)
    (s2, oom) ‚Üí sizeState s1 &lt; sizeState s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> s1 s2 iom oom lbl [(_ &amp; _ &amp; ?) Ht]; <span class="nb">cbn</span> <span class="kr">in</span> *
  ; <span class="nb">eapply</span> MO_component_valid_transition_size.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkea" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkea"><span class="kn">Lemma</span> <span class="nf">finite_constrained_trace_from_to_size</span> :
  <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">tr</span> : list transition_item),
    finite_constrained_trace_from_to Mi s1 s2 tr -&gt;
      s1 = s2 /\ tr = []
        \/
      sizeState s1 &lt; sizeState s2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">tr</span> : list transition_item),
  finite_constrained_trace_from_to Mi s1 s2 tr
  ‚Üí s1 = s2 ‚àß tr = [] ‚à® sizeState s1 &lt; sizeState s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkeb" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkeb"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">tr</span> : list transition_item),
  finite_constrained_trace_from_to Mi s1 s2 tr
  ‚Üí s1 = s2 ‚àß tr = [] ‚à® sizeState s1 &lt; sizeState s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkec" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkec"><span class="nb">induction</span> <span class="mi">1</span>; [<span class="bp">by</span> <span class="nb">left</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s, f</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm Mi) s f tl</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm Mi) l
  (s&#39;, iom) (s, oom)</span></span></span><br><span><var>IHfinite_valid_trace_from_to</var><span class="hyp-type"><b>: </b><span>s = f ‚àß tl = []
‚à® sizeState s &lt;
  sizeState f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s&#39; = f
‚àß {|
    l := l;
    input := iom;
    destination := s;
    output := oom
  |} :: tl = [] ‚à® sizeState s&#39; &lt; sizeState f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chked" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chked"><span class="nb">assert</span> (sizeState s&#39; &lt; sizeState s)
    <span class="bp">by</span> (<span class="nb">eapply</span> input_constrained_transition_size; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s, f</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm Mi) s f tl</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm Mi) l
  (s&#39;, iom) (s, oom)</span></span></span><br><span><var>IHfinite_valid_trace_from_to</var><span class="hyp-type"><b>: </b><span>s = f ‚àß tl = []
‚à® sizeState s &lt;
  sizeState f</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>sizeState s&#39; &lt; sizeState s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s&#39; = f
‚àß {|
    l := l;
    input := iom;
    destination := s;
    output := oom
  |} :: tl = [] ‚à® sizeState s&#39; &lt; sizeState f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> IHfinite_valid_trace_from_to; [itauto <span class="bp">congruence</span> | itauto <span class="bp">lia</span>].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  The final state of a valid transition determines the label, initial state,
  input message and output message.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkee" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkee"><span class="kn">Lemma</span> <span class="nf">input_constrained_transition_deterministic_conv</span> :
  <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> <span class="nv">f</span> : State) (<span class="nv">iom1</span> <span class="nv">iom2</span> <span class="nv">oom1</span> <span class="nv">oom2</span> : option Message) (<span class="nv">lbl1</span> <span class="nv">lbl2</span> : Label),
    input_constrained_transition Mi lbl1 (s1, iom1) (f, oom1) -&gt;
    input_constrained_transition Mi lbl2 (s2, iom2) (f, oom2) -&gt;
      lbl1 = lbl2 /\ s1 = s2 /\ iom1 = iom2 /\ oom1 = oom2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> <span class="nv">f</span> : State) (<span class="nv">iom1</span> <span class="nv">iom2</span> <span class="nv">oom1</span>
                     <span class="nv">oom2</span> : option Message) (<span class="nv">lbl1</span>
                                             <span class="nv">lbl2</span> : Label),
  input_constrained_transition Mi lbl1 (s1, iom1)
    (f, oom1)
  ‚Üí input_constrained_transition Mi lbl2 (s2, iom2)
      (f, oom2)
    ‚Üí lbl1 = lbl2
      ‚àß s1 = s2 ‚àß iom1 = iom2 ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkef" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkef"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> <span class="nv">f</span> : State) (<span class="nv">iom1</span> <span class="nv">iom2</span> <span class="nv">oom1</span>
                     <span class="nv">oom2</span> : option Message) (<span class="nv">lbl1</span>
                                             <span class="nv">lbl2</span> : Label),
  input_constrained_transition Mi lbl1 (s1, iom1)
    (f, oom1)
  ‚Üí input_constrained_transition Mi lbl2 (s2, iom2)
      (f, oom2)
    ‚Üí lbl1 = lbl2
      ‚àß s1 = s2 ‚àß iom1 = iom2 ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkf0" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkf0"><span class="nb">intros</span> s1 s2 f iom1 iom2 oom1 oom2 lbl1 lbl2 Hivt1 Hivt2
  ; <span class="nb">inversion</span> Hivt1 <span class="kr">as</span> [(_ &amp; _ &amp; Hvalid1) Ht1]; <span class="nb">subst</span>
  ; <span class="nb">inversion</span> Hivt2 <span class="kr">as</span> [(_ &amp; _ &amp; Hvalid2) Ht2]; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s1, s2, f</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>iom1, iom2, oom1, oom2</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>lbl1, lbl2</var><span class="hyp-type"><b>: </b><span>Label</span></span></span><br><span><var>Hivt1</var><span class="hyp-type"><b>: </b><span>input_constrained_transition Mi lbl1
  (s1, iom1) (f, oom1)</span></span></span><br><span><var>Hivt2</var><span class="hyp-type"><b>: </b><span>input_constrained_transition Mi lbl2
  (s2, iom2) (f, oom2)</span></span></span><br><span><var>Hvalid1</var><span class="hyp-type"><b>: </b><span>valid lbl1 (s1, iom1)</span></span></span><br><span><var>Ht1</var><span class="hyp-type"><b>: </b><span>transition lbl1 (s1, iom1) = (f, oom1)</span></span></span><br><span><var>Hvalid2</var><span class="hyp-type"><b>: </b><span>valid lbl2 (s2, iom2)</span></span></span><br><span><var>Ht2</var><span class="hyp-type"><b>: </b><span>transition lbl2 (s2, iom2) = (f, oom2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lbl1 = lbl2 ‚àß s1 = s2 ‚àß iom1 = iom2 ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkf1" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkf1"><span class="nb">destruct</span> lbl1, lbl2, iom1, iom2; <span class="nb">cbn</span> <span class="kr">in</span> *
  ; <span class="nb">inversion</span> Ht1; <span class="nb">subst</span>; <span class="nb">clear</span> Ht1
  ; <span class="nb">inversion</span> Ht2; <span class="nb">subst</span>; <span class="nb">clear</span> Ht2
  ; <span class="nb">inversion</span> Hvalid1; <span class="nb">inversion</span> Hvalid2; invert_MO_component_valid; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hivt2</var><span class="hyp-type"><b>: </b><span>input_constrained_transition Mi Receive
  (s2, Some m)
  (s1 &lt;+&gt; MkObservation Receive m, None)</span></span></span><br><span><var>Hivt1</var><span class="hyp-type"><b>: </b><span>input_constrained_transition Mi Receive
  (s1, Some m)
  (s1 &lt;+&gt; MkObservation Receive m, None)</span></span></span><br><span><var>Hvalid1</var><span class="hyp-type"><b>: </b><span>MO_component_valid P Receive s1 (Some m)</span></span></span><br><span><var>Hvalid2</var><span class="hyp-type"><b>: </b><span>MO_component_valid P Receive s2 (Some m)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>obs s2 = obs s1</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>adr s2 = adr s1</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m0</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>s = s1</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>m0 = m</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m1</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P m</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>s0 = s2</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>m1 = m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Receive = Receive
‚àß s1 = s2 ‚àß Some m = Some m ‚àß None = None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> s1, s2; <span class="nb">cbn</span> <span class="kr">in</span> *; <span class="nb">subst</span>; itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
Trace segments between any two states are unique. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkf2" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkf2"><span class="kn">Lemma</span> <span class="nf">finite_constrained_trace_from_to_unique</span> :
  <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">tr1</span> <span class="nv">tr2</span> : list transition_item),
    finite_constrained_trace_from_to Mi s1 s2 tr1 -&gt;
    finite_constrained_trace_from_to Mi s1 s2 tr2 -&gt;
      tr1 = tr2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">tr1</span> <span class="nv">tr2</span> : list transition_item),
  finite_constrained_trace_from_to Mi s1 s2 tr1
  ‚Üí finite_constrained_trace_from_to Mi s1 s2 tr2
    ‚Üí tr1 = tr2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkf3" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkf3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">tr1</span> <span class="nv">tr2</span> : list transition_item),
  finite_constrained_trace_from_to Mi s1 s2 tr1
  ‚Üí finite_constrained_trace_from_to Mi s1 s2 tr2
    ‚Üí tr1 = tr2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkf4" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkf4"><span class="nb">intros</span> s1 s2 tr1 tr2 Hfvt1 Hfvt2; <span class="nb">revert</span> tr2 Hfvt2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>tr1</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt1</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_from_to Mi s1 s2 tr1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">tr2</span> : list transition_item,
  finite_constrained_trace_from_to Mi s1 s2 tr2
  ‚Üí tr1 = tr2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkf5" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkf5"><span class="nb">induction</span> Hfvt1 <span class="nb">using</span> finite_valid_trace_from_to_rev_ind; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Mi) si</span></span></span><br><span><var>tr2</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt2</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_from_to Mi si si tr2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">[] = tr2</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chkf6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt1</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm Mi) si s
  tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm Mi) l
  (s, iom) (sf, oom)</span></span></span><br><span><var>IHHfvt1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">tr2</span> : list transition_item,
  finite_constrained_trace_from_to Mi si s
    tr2 ‚Üí tr = tr2</span></span></span><br><span><var>tr2</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt2</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_from_to Mi si sf tr2</span></span></span><br></div><label class="goal-separator" for="MO-v-chkf6"><hr></label><div class="goal-conclusion">tr ++
[{|
   l := l;
   input := iom;
   destination := sf;
   output := oom
 |}] = tr2</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkf7" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkf7">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Mi) si</span></span></span><br><span><var>tr2</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt2</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_from_to Mi si si tr2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">[] = tr2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> finite_constrained_trace_from_to_size <span class="kr">in</span> Hfvt2; itauto (<span class="bp">congruence</span> + <span class="bp">lia</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkf8" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkf8">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt1</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm Mi) si s
  tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm Mi) l
  (s, iom) (sf, oom)</span></span></span><br><span><var>IHHfvt1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">tr2</span> : list transition_item,
  finite_constrained_trace_from_to Mi si s
    tr2 ‚Üí tr = tr2</span></span></span><br><span><var>tr2</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt2</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_from_to Mi si sf tr2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tr ++
[{|
   l := l;
   input := iom;
   destination := sf;
   output := oom
 |}] = tr2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkf9" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkf9"><span class="nb">destruct</span> Hfvt2 <span class="nb">using</span> finite_valid_trace_from_to_rev_ind; [| <span class="nb">clear</span> IHHfvt2].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>Hfvt1</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm Mi) si s
  tr</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm Mi) l
  (s, iom) (si, oom)</span></span></span><br><span><var>IHHfvt1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">tr2</span> : list transition_item,
  finite_constrained_trace_from_to Mi si s
    tr2 ‚Üí tr = tr2</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Mi) si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tr ++
[{|
   l := l;
   input := iom;
   destination := si;
   output := oom
 |}] = []</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chkfa" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>Hfvt1</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm Mi) si s
  tr</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm Mi) l
  (s, iom) (sf, oom)</span></span></span><br><span><var>IHHfvt1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">tr2</span> : list transition_item,
  finite_constrained_trace_from_to Mi si s
    tr2 ‚Üí tr = tr2</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>tr0</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm Mi) si s0
  tr0</span></span></span><br><span><var>iom0, oom0</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>VLSM.label (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>Ht0</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm Mi) l0
  (s0, iom0) (sf, oom0)</span></span></span><br></div><label class="goal-separator" for="MO-v-chkfa"><hr></label><div class="goal-conclusion">tr ++
[{|
   l := l;
   input := iom;
   destination := sf;
   output := oom
 |}] =
tr0 ++
[{|
   l := l0;
   input := iom0;
   destination := sf;
   output := oom0
 |}]</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkfb" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkfb">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>Hfvt1</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm Mi) si s
  tr</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm Mi) l
  (s, iom) (si, oom)</span></span></span><br><span><var>IHHfvt1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">tr2</span> : list transition_item,
  finite_constrained_trace_from_to Mi si s
    tr2 ‚Üí tr = tr2</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Mi) si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tr ++
[{|
   l := l;
   input := iom;
   destination := si;
   output := oom
 |}] = []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkfc" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkfc"><span class="nb">apply</span> finite_constrained_trace_from_to_size <span class="kr">in</span> Hfvt1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>Hfvt1</var><span class="hyp-type"><b>: </b><span>si = s ‚àß tr = [] ‚à® sizeState si &lt; sizeState s</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm Mi) l
  (s, iom) (si, oom)</span></span></span><br><span><var>IHHfvt1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">tr2</span> : list transition_item,
  finite_constrained_trace_from_to Mi si s
    tr2 ‚Üí tr = tr2</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Mi) si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tr ++
[{|
   l := l;
   input := iom;
   destination := si;
   output := oom
 |}] = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkfd" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkfd"><span class="nb">apply</span> input_constrained_transition_size <span class="kr">in</span> Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>Hfvt1</var><span class="hyp-type"><b>: </b><span>si = s ‚àß tr = [] ‚à® sizeState si &lt; sizeState s</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>sizeState s &lt; sizeState si</span></span></span><br><span><var>IHHfvt1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">tr2</span> : list transition_item,
  finite_constrained_trace_from_to Mi si s
    tr2 ‚Üí tr = tr2</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Mi) si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tr ++
[{|
   l := l;
   input := iom;
   destination := si;
   output := oom
 |}] = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">decompose</span> [<span class="kn">and</span> or] Hfvt1; <span class="nb">subst</span>; <span class="nb">clear</span> Hfvt1; <span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkfe" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkfe">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>Hfvt1</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm Mi) si s
  tr</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm Mi) l
  (s, iom) (sf, oom)</span></span></span><br><span><var>IHHfvt1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">tr2</span> : list transition_item,
  finite_constrained_trace_from_to Mi si s
    tr2 ‚Üí tr = tr2</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>tr0</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm Mi) si s0
  tr0</span></span></span><br><span><var>iom0, oom0</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>VLSM.label (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>Ht0</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm Mi) l0
  (s0, iom0) (sf, oom0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tr ++
[{|
   l := l;
   input := iom;
   destination := sf;
   output := oom
 |}] =
tr0 ++
[{|
   l := l0;
   input := iom0;
   destination := sf;
   output := oom0
 |}]</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chkff" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chkff"><span class="nb">assert</span> (l = l0 /\ s = s0 /\ iom = iom0 /\ oom = oom0)
          <span class="bp">by</span> (<span class="nb">eapply</span> input_constrained_transition_deterministic_conv; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>Hfvt1</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm Mi) si s
  tr</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm Mi) l
  (s, iom) (sf, oom)</span></span></span><br><span><var>IHHfvt1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">tr2</span> : list transition_item,
  finite_constrained_trace_from_to Mi si s
    tr2 ‚Üí tr = tr2</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>tr0</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm Mi) si s0
  tr0</span></span></span><br><span><var>iom0, oom0</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>VLSM.label (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>Ht0</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm Mi) l0
  (s0, iom0) (sf, oom0)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>l = l0 ‚àß s = s0 ‚àß iom = iom0 ‚àß oom = oom0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tr ++
[{|
   l := l;
   input := iom;
   destination := sf;
   output := oom
 |}] =
tr0 ++
[{|
   l := l0;
   input := iom0;
   destination := sf;
   output := oom0
 |}]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk100" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk100"><span class="nb">decompose</span> [<span class="kn">and</span>] H; <span class="nb">subst</span>; <span class="nb">clear</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>si, s0</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>Hfvt1</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm Mi) si s0
  tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>VLSM.label (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>IHHfvt1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">tr2</span> : list transition_item,
  finite_constrained_trace_from_to Mi si s0
    tr2 ‚Üí tr = tr2</span></span></span><br><span><var>iom0, oom0</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm Mi) l0
  (s0, iom0) (sf, oom0)</span></span></span><br><span><var>tr0</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm Mi) si s0
  tr0</span></span></span><br><span><var>Ht0</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm Mi) l0
  (s0, iom0) (sf, oom0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tr ++
[{|
   l := l0;
   input := iom0;
   destination := sf;
   output := oom0
 |}] =
tr0 ++
[{|
   l := l0;
   input := iom0;
   destination := sf;
   output := oom0
 |}]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">f_equal</span>; <span class="nb">apply</span> IHHfvt1.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
Traces between any two states are unique. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk101" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk101"><span class="kn">Lemma</span> <span class="nf">finite_constrained_trace_init_to_unique</span> :
  <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> <span class="nv">s</span> : State) (<span class="nv">tr1</span> <span class="nv">tr2</span> : list transition_item),
    finite_constrained_trace_init_to Mi s1 s tr1 -&gt;
    finite_constrained_trace_init_to Mi s2 s tr2 -&gt;
      tr1 = tr2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> <span class="nv">s</span> : State) (<span class="nv">tr1</span> <span class="nv">tr2</span> : list transition_item),
  finite_constrained_trace_init_to Mi s1 s tr1
  ‚Üí finite_constrained_trace_init_to Mi s2 s tr2
    ‚Üí tr1 = tr2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk102" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk102"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> <span class="nv">s</span> : State) (<span class="nv">tr1</span> <span class="nv">tr2</span> : list transition_item),
  finite_constrained_trace_init_to Mi s1 s tr1
  ‚Üí finite_constrained_trace_init_to Mi s2 s tr2
    ‚Üí tr1 = tr2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk103" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk103"><span class="nb">intros</span> [] [] s tr1 tr2 [Ht1 []] [Ht2 []]; <span class="nb">cbn</span> <span class="kr">in</span> *; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>tr1, tr2</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Ht1</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm Mi)
  (MkState [] i) s tr1</span></span></span><br><span><var>Ht2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm Mi)
  (MkState [] i) s tr2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tr1 = tr2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> finite_constrained_trace_from_to_unique.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
All above properties also hold for <span class="inlinecode"><span class="id" title="var">Mi</span></span>. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk104" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk104"><span class="kn">Lemma</span> <span class="nf">input_valid_transition_Send</span> :
  <span class="kr">forall</span> <span class="nv">s</span> : State,
    valid_state_prop Mi s -&gt;
      input_valid_transition Mi Send
        (s, None)
        (s &lt;+&gt; MkObservation Send (MkMessage s), Some (MkMessage s)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : State,
  valid_state_prop Mi s
  ‚Üí input_valid_transition Mi Send (s, None)
      (s &lt;+&gt; MkObservation Send (MkMessage s),
       Some (MkMessage s))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk105" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk105"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : State,
  valid_state_prop Mi s
  ‚Üí input_valid_transition Mi Send (s, None)
      (s &lt;+&gt; MkObservation Send (MkMessage s),
       Some (MkMessage s))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk106" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk106"><span class="nb">intros</span> s Hvsp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Mi s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition Mi Send (s, None)
  (s &lt;+&gt; MkObservation Send (MkMessage s),
   Some (MkMessage s))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk107" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk107"><span class="nb">red</span>; <span class="nb">cbn</span>; split_and!; [<span class="bp">done</span> | | | <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Mi s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop Mi None</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk108" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Mi s</span></span></span><br></div><label class="goal-separator" for="MO-v-chk108"><hr></label><div class="goal-conclusion">MO_component_valid P Send s None</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk109" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk109">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Mi s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop Mi None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="kr">exists</span> (<span class="nv">MkState</span> [] i); <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk10a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk10a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop Mi s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_component_valid P Send s None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="kp">do</span> <span class="mi">2</span> <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk10b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk10b"><span class="kn">Lemma</span> <span class="nf">input_valid_transition_size</span> :
  <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">iom</span> <span class="nv">oom</span> : option Message) (<span class="nv">lbl</span> : Label),
    input_valid_transition Mi lbl (s1, iom) (s2, oom) -&gt;
      sizeState s1 &lt; sizeState s2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">iom</span> <span class="nv">oom</span> : option Message) (<span class="nv">lbl</span> : Label),
  input_valid_transition Mi lbl (s1, iom) (s2, oom)
  ‚Üí sizeState s1 &lt; sizeState s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk10c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk10c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">iom</span> <span class="nv">oom</span> : option Message) (<span class="nv">lbl</span> : Label),
  input_valid_transition Mi lbl (s1, iom) (s2, oom)
  ‚Üí sizeState s1 &lt; sizeState s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk10d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk10d"><span class="nb">intros</span> s1 s2 iom oom lbl Hivt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>lbl</var><span class="hyp-type"><b>: </b><span>Label</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition Mi lbl (
  s1, iom) (s2, oom)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sizeState s1 &lt; sizeState s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk10e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk10e"><span class="nb">eapply</span> input_constrained_transition_size.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>lbl</var><span class="hyp-type"><b>: </b><span>Label</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition Mi lbl (
  s1, iom) (s2, oom)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_constrained_transition Mi <span class="nl">?lbl</span> (s1, <span class="nl">?iom</span>)
  (s2, <span class="nl">?oom</span>)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk10f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk10f"><span class="nb">apply</span> (@VLSM_incl_input_valid_transition _ Mi Mi); [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>lbl</var><span class="hyp-type"><b>: </b><span>Label</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_valid_transition Mi lbl (
  s1, iom) (s2, oom)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl_part Mi
  (preloaded_vlsm_machine Mi (<span class="kr">Œª</span> <span class="nv">_</span> : Message, <span class="kt">True</span>))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> vlsm_incl_preloaded_with_all_messages_vlsm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk110" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk110"><span class="kn">Lemma</span> <span class="nf">finite_valid_trace_from_to_size</span> :
  <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">tr</span> : list transition_item),
    finite_valid_trace_from_to Mi s1 s2 tr -&gt;
      s1 = s2 /\ tr = []
        \/
      sizeState s1 &lt; sizeState s2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">tr</span> : list transition_item),
  finite_valid_trace_from_to Mi s1 s2 tr
  ‚Üí s1 = s2 ‚àß tr = [] ‚à® sizeState s1 &lt; sizeState s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk111" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk111"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">tr</span> : list transition_item),
  finite_valid_trace_from_to Mi s1 s2 tr
  ‚Üí s1 = s2 ‚àß tr = [] ‚à® sizeState s1 &lt; sizeState s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk112" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk112"><span class="nb">intros</span> s1 s2 tr Hfvt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to Mi s1 s2 tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 = s2 ‚àß tr = [] ‚à® sizeState s1 &lt; sizeState s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk113" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk113"><span class="nb">eapply</span> finite_constrained_trace_from_to_size.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to Mi s1 s2 tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_constrained_trace_from_to Mi s1 s2 tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk114" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk114"><span class="nb">apply</span> (@VLSM_incl_finite_valid_trace_from_to _ Mi Mi); [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to Mi s1 s2 tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl_part Mi
  (preloaded_vlsm_machine Mi (<span class="kr">Œª</span> <span class="nv">_</span> : Message, <span class="kt">True</span>))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> vlsm_incl_preloaded_with_all_messages_vlsm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk115" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk115"><span class="kn">Lemma</span> <span class="nf">input_valid_transition_deterministic_conv</span> :
  <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> <span class="nv">f</span> : State) (<span class="nv">iom1</span> <span class="nv">iom2</span> <span class="nv">oom1</span> <span class="nv">oom2</span> : option Message) (<span class="nv">lbl1</span> <span class="nv">lbl2</span> : Label),
    input_valid_transition Mi lbl1 (s1, iom1) (f, oom1) -&gt;
    input_valid_transition Mi lbl2 (s2, iom2) (f, oom2) -&gt;
      lbl1 = lbl2 /\ s1 = s2 /\ iom1 = iom2 /\ oom1 = oom2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> <span class="nv">f</span> : State) (<span class="nv">iom1</span> <span class="nv">iom2</span> <span class="nv">oom1</span>
                     <span class="nv">oom2</span> : option Message) (<span class="nv">lbl1</span>
                                             <span class="nv">lbl2</span> : Label),
  input_valid_transition Mi lbl1 (s1, iom1) (f, oom1)
  ‚Üí input_valid_transition Mi lbl2 (s2, iom2)
      (f, oom2)
    ‚Üí lbl1 = lbl2
      ‚àß s1 = s2 ‚àß iom1 = iom2 ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk116" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk116"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> <span class="nv">f</span> : State) (<span class="nv">iom1</span> <span class="nv">iom2</span> <span class="nv">oom1</span>
                     <span class="nv">oom2</span> : option Message) (<span class="nv">lbl1</span>
                                             <span class="nv">lbl2</span> : Label),
  input_valid_transition Mi lbl1 (s1, iom1) (f, oom1)
  ‚Üí input_valid_transition Mi lbl2 (s2, iom2)
      (f, oom2)
    ‚Üí lbl1 = lbl2
      ‚àß s1 = s2 ‚àß iom1 = iom2 ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk117" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk117"><span class="nb">intros</span> s1 s2 f iom1 iom2 oom1 oom2 lbl1 lbl2 Hivt1 Hivt2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s1, s2, f</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>iom1, iom2, oom1, oom2</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>lbl1, lbl2</var><span class="hyp-type"><b>: </b><span>Label</span></span></span><br><span><var>Hivt1</var><span class="hyp-type"><b>: </b><span>input_valid_transition Mi lbl1 (
  s1, iom1) (f, oom1)</span></span></span><br><span><var>Hivt2</var><span class="hyp-type"><b>: </b><span>input_valid_transition Mi lbl2 (
  s2, iom2) (f, oom2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lbl1 = lbl2 ‚àß s1 = s2 ‚àß iom1 = iom2 ‚àß oom1 = oom2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> input_constrained_transition_deterministic_conv;
    <span class="nb">apply</span> (@VLSM_incl_input_valid_transition _ Mi Mi); [| <span class="bp">done</span> | | <span class="bp">done</span>];
    <span class="nb">apply</span> vlsm_incl_preloaded_with_all_messages_vlsm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk118" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk118"><span class="kn">Lemma</span> <span class="nf">finite_valid_trace_from_to_unique</span> :
  <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">l1</span> <span class="nv">l2</span> : list transition_item),
    finite_valid_trace_from_to Mi s1 s2 l1 -&gt;
    finite_valid_trace_from_to Mi s1 s2 l2 -&gt;
      l1 = l2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">l1</span> <span class="nv">l2</span> : list transition_item),
  finite_valid_trace_from_to Mi s1 s2 l1
  ‚Üí finite_valid_trace_from_to Mi s1 s2 l2 ‚Üí l1 = l2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk119" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk119"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">l1</span> <span class="nv">l2</span> : list transition_item),
  finite_valid_trace_from_to Mi s1 s2 l1
  ‚Üí finite_valid_trace_from_to Mi s1 s2 l2 ‚Üí l1 = l2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> s1 s2 l1 l2 Hfvt1 Hfvt2;
    <span class="nb">eapply</span> finite_constrained_trace_from_to_unique;
    <span class="nb">apply</span> VLSM_incl_finite_valid_trace_from_to; [| <span class="bp">done</span> | | <span class="bp">done</span>];
    <span class="nb">apply</span> vlsm_incl_preloaded_with_all_messages_vlsm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk11a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk11a"><span class="kn">Lemma</span> <span class="nf">finite_valid_trace_init_to_unique</span> :
  <span class="kr">forall</span> (<span class="nv">s</span> <span class="nv">f</span> : State) (<span class="nv">l1</span> <span class="nv">l2</span> : list transition_item),
    finite_valid_trace_init_to Mi s f l1 -&gt;
    finite_valid_trace_init_to Mi s f l2 -&gt;
      l1 = l2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> <span class="nv">f</span> : State) (<span class="nv">l1</span> <span class="nv">l2</span> : list transition_item),
  finite_valid_trace_init_to Mi s f l1
  ‚Üí finite_valid_trace_init_to Mi s f l2 ‚Üí l1 = l2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk11b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk11b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> <span class="nv">f</span> : State) (<span class="nv">l1</span> <span class="nv">l2</span> : list transition_item),
  finite_valid_trace_init_to Mi s f l1
  ‚Üí finite_valid_trace_init_to Mi s f l2 ‚Üí l1 = l2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> s f l1 l2 Hfvit1 Hfvit2;
    <span class="nb">eapply</span> finite_constrained_trace_init_to_unique;
    <span class="nb">apply</span> VLSM_incl_finite_valid_trace_init_to; [| <span class="bp">done</span> | | <span class="bp">done</span>];
    <span class="nb">apply</span> vlsm_incl_preloaded_with_all_messages_vlsm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab5"></a><h3 class="section">Extracting a trace from a state</h3>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --></pre><div class="doc">
If a valid trace leads to state s, the trace extracted from s also leads to s. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk11c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk11c"><span class="kn">Lemma</span> <span class="nf">finite_constrained_trace_init_to_state2trace</span> :
  <span class="kr">forall</span> (<span class="nv">is</span> <span class="nv">s</span> : State) (<span class="nv">tr</span> : list transition_item),
    finite_constrained_trace_init_to Mi <span class="kr">is</span> s tr -&gt;
      finite_constrained_trace_init_to Mi <span class="kr">is</span> s (state2trace s).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">is</span> <span class="nv">s</span> : State) (<span class="nv">tr</span> : list transition_item),
  finite_constrained_trace_init_to Mi <span class="kr">is</span> s tr
  ‚Üí finite_constrained_trace_init_to Mi <span class="kr">is</span> s
      (state2trace s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk11d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk11d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">is</span> <span class="nv">s</span> : State) (<span class="nv">tr</span> : list transition_item),
  finite_constrained_trace_init_to Mi <span class="kr">is</span> s tr
  ‚Üí finite_constrained_trace_init_to Mi <span class="kr">is</span> s
      (state2trace s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk11e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk11e"><span class="nb">intros</span> <span class="kr">is</span> s tr [Hfv Hinit]; <span class="nb">cbn</span> <span class="kr">in</span> *; <span class="nb">revert</span> Hinit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfv</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm Mi) <span class="kr">is</span> s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">UMO_component_initial_state_prop i <span class="kr">is</span>
‚Üí finite_constrained_trace_init_to Mi <span class="kr">is</span> s
    (state2trace s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk11f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk11f"><span class="nb">induction</span> Hfv <span class="nb">using</span> finite_valid_trace_from_to_rev_ind; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Mi) si</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>UMO_component_initial_state_prop i si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_constrained_trace_init_to Mi si si
  (state2trace si)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk120" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfv</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm Mi) si s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm Mi) l
  (s, iom) (sf, oom)</span></span></span><br><span><var>IHHfv</var><span class="hyp-type"><b>: </b><span>UMO_component_initial_state_prop i si
‚Üí finite_constrained_trace_init_to Mi si s
    (state2trace s)</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>UMO_component_initial_state_prop i si</span></span></span><br></div><label class="goal-separator" for="MO-v-chk120"><hr></label><div class="goal-conclusion">finite_constrained_trace_init_to Mi si sf
  (state2trace sf)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk121" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk121">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Mi) si</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>UMO_component_initial_state_prop i si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_constrained_trace_init_to Mi si si
  (state2trace si)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk122" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk122"><span class="nb">inversion</span> Hinit; <span class="nb">clear</span> Hinit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Mi) si</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>obs si = []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>adr si = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_constrained_trace_init_to Mi si si
  (state2trace si)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk123" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk123"><span class="nb">destruct</span> si; <span class="nb">cbn</span> <span class="kr">in</span> *; <span class="nb">subst</span>; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Mi)
  (MkState [] i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_constrained_trace_init_to Mi (MkState [] i)
  (MkState [] i) []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk124" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk124"><span class="kp">repeat</span> <span class="nb">constructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Mi)
  (MkState [] i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop (preloaded_with_all_messages_vlsm Mi)
  (MkState [] i)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk125" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk125"><span class="kr">exists</span> <span class="nv">None</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Mi)
  (MkState [] i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_message_prop
  (preloaded_with_all_messages_vlsm Mi) (MkState [] i)
  None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="kp">repeat</span> <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk126" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk126">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfv</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm Mi) si s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm Mi) l
  (s, iom) (sf, oom)</span></span></span><br><span><var>IHHfv</var><span class="hyp-type"><b>: </b><span>UMO_component_initial_state_prop i si
‚Üí finite_constrained_trace_init_to Mi si s
    (state2trace s)</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>UMO_component_initial_state_prop i si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_constrained_trace_init_to Mi si sf
  (state2trace sf)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk127" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk127"><span class="nb">specialize</span> (IHHfv Hinit).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfv</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm Mi) si s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm Mi) l
  (s, iom) (sf, oom)</span></span></span><br><span><var>IHHfv</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to Mi si s
  (state2trace s)</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>UMO_component_initial_state_prop i si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_constrained_trace_init_to Mi si sf
  (state2trace sf)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk128" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk128"><span class="nb">destruct</span> Ht <span class="kr">as</span> [Hvalid Ht]; <span class="nb">cbn</span> <span class="kr">in</span> Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>si, s</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfv</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm Mi) si s tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>input_valid
  (preloaded_with_all_messages_vlsm Mi) l
  (s, iom)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>UMO_component_transition l s iom = (sf, oom)</span></span></span><br><span><var>IHHfv</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to Mi si s
  (state2trace s)</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>UMO_component_initial_state_prop i si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_constrained_trace_init_to Mi si sf
  (state2trace sf)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk129" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk129"><span class="nb">destruct</span> s <span class="kr">as</span> [obs adr], l, iom <span class="kr">as</span> [im |]
    ; <span class="nb">inversion</span> Ht; <span class="nb">subst</span>; <span class="nb">clear</span> Ht; <span class="nb">cbn</span> <span class="kr">in</span> *
    ; <span class="nb">cycle</span> <span class="mi">1</span>; [<span class="bp">done</span> | <span class="bp">done</span> | |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>obs</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>adr</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfv</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm Mi) si
  (MkState obs adr) tr</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Mi)
  (MkState obs adr)
‚àß option_valid_message_prop
    (preloaded_with_all_messages_vlsm Mi)
    None
  ‚àß MO_component_valid P Send
      (MkState obs adr) None</span></span></span><br><span><var>IHHfv</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to Mi si
  (MkState obs adr)
  (observations2trace obs adr)</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>UMO_component_initial_state_prop i si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_constrained_trace_init_to Mi si
  (MkState obs adr &lt;+&gt;
   MkObservation Send (MkMessage (MkState obs adr)))
  (observations2trace obs adr ++
   [{|
      l := Send;
      input := None;
      destination :=
        MkState
          (addObservation&#39;
             (MkObservation Send
                (MkMessage (MkState obs adr))) obs)
          adr;
      output := Some (MkMessage (MkState obs adr))
    |}])</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk12a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>obs</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>adr</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfv</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm Mi) si
  (MkState obs adr) tr</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Mi)
  (MkState obs adr)
‚àß option_valid_message_prop
    (preloaded_with_all_messages_vlsm Mi)
    (Some im)
  ‚àß MO_component_valid P Receive
      (MkState obs adr) 
      (Some im)</span></span></span><br><span><var>IHHfv</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to Mi si
  (MkState obs adr)
  (observations2trace obs adr)</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>UMO_component_initial_state_prop i si</span></span></span><br></div><label class="goal-separator" for="MO-v-chk12a"><hr></label><div class="goal-conclusion">finite_constrained_trace_init_to Mi si
  (MkState obs adr &lt;+&gt; MkObservation Receive im)
  (observations2trace obs adr ++
   [{|
      l := Receive;
      input := Some im;
      destination :=
        MkState (MkObservation Receive im :: obs) adr;
      output := None
    |}])</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk12b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk12b">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>obs</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>adr</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfv</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm Mi) si
  (MkState obs adr) tr</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Mi)
  (MkState obs adr)
‚àß option_valid_message_prop
    (preloaded_with_all_messages_vlsm Mi)
    None
  ‚àß MO_component_valid P Send
      (MkState obs adr) None</span></span></span><br><span><var>IHHfv</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to Mi si
  (MkState obs adr)
  (observations2trace obs adr)</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>UMO_component_initial_state_prop i si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_constrained_trace_init_to Mi si
  (MkState obs adr &lt;+&gt;
   MkObservation Send (MkMessage (MkState obs adr)))
  (observations2trace obs adr ++
   [{|
      l := Send;
      input := None;
      destination :=
        MkState
          (addObservation&#39;
             (MkObservation Send
                (MkMessage (MkState obs adr))) obs)
          adr;
      output := Some (MkMessage (MkState obs adr))
    |}])</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk12c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk12c"><span class="nb">constructor</span>; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>obs</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>adr</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfv</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm Mi) si
  (MkState obs adr) tr</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Mi)
  (MkState obs adr)
‚àß option_valid_message_prop
    (preloaded_with_all_messages_vlsm Mi)
    None
  ‚àß MO_component_valid P Send
      (MkState obs adr) None</span></span></span><br><span><var>IHHfv</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to Mi si
  (MkState obs adr)
  (observations2trace obs adr)</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>UMO_component_initial_state_prop i si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm Mi) si
  (MkState obs adr &lt;+&gt;
   MkObservation Send (MkMessage (MkState obs adr)))
  (observations2trace obs adr ++
   [{|
      l := Send;
      input := None;
      destination :=
        MkState
          (addObservation&#39;
             (MkObservation Send
                (MkMessage (MkState obs adr))) obs)
          adr;
      output := Some (MkMessage (MkState obs adr))
    |}])</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> extend_right_finite_trace_from_to; [<span class="nb">apply</span> IHHfv |]; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk12d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk12d">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>obs</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>adr</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfv</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm Mi) si
  (MkState obs adr) tr</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Mi)
  (MkState obs adr)
‚àß option_valid_message_prop
    (preloaded_with_all_messages_vlsm Mi)
    (Some im)
  ‚àß MO_component_valid P Receive
      (MkState obs adr) 
      (Some im)</span></span></span><br><span><var>IHHfv</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to Mi si
  (MkState obs adr)
  (observations2trace obs adr)</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>UMO_component_initial_state_prop i si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_constrained_trace_init_to Mi si
  (MkState obs adr &lt;+&gt; MkObservation Receive im)
  (observations2trace obs adr ++
   [{|
      l := Receive;
      input := Some im;
      destination :=
        MkState (MkObservation Receive im :: obs) adr;
      output := None
    |}])</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk12e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk12e"><span class="nb">constructor</span>; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>obs</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>adr</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfv</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm Mi) si
  (MkState obs adr) tr</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Mi)
  (MkState obs adr)
‚àß option_valid_message_prop
    (preloaded_with_all_messages_vlsm Mi)
    (Some im)
  ‚àß MO_component_valid P Receive
      (MkState obs adr) 
      (Some im)</span></span></span><br><span><var>IHHfv</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to Mi si
  (MkState obs adr)
  (observations2trace obs adr)</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>UMO_component_initial_state_prop i si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm Mi) si
  (MkState obs adr &lt;+&gt; MkObservation Receive im)
  (observations2trace obs adr ++
   [{|
      l := Receive;
      input := Some im;
      destination :=
        MkState (MkObservation Receive im :: obs) adr;
      output := None
    |}])</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> extend_right_finite_trace_from_to; [<span class="nb">apply</span> IHHfv |]; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
The trace extracted from the final state of another trace is equal to that trace. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk12f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk12f"><span class="kn">Lemma</span> <span class="nf">finite_constrained_trace_init_to_state2trace_inv</span> :
  <span class="kr">forall</span> (<span class="nv">is</span> <span class="nv">s</span> : State) (<span class="nv">tr</span> : list transition_item),
    finite_constrained_trace_init_to Mi <span class="kr">is</span> s tr -&gt;
      state2trace s = tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">is</span> <span class="nv">s</span> : State) (<span class="nv">tr</span> : list transition_item),
  finite_constrained_trace_init_to Mi <span class="kr">is</span> s tr
  ‚Üí state2trace s = tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk130" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk130"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">is</span> <span class="nv">s</span> : State) (<span class="nv">tr</span> : list transition_item),
  finite_constrained_trace_init_to Mi <span class="kr">is</span> s tr
  ‚Üí state2trace s = tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk131" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk131"><span class="nb">intros</span> <span class="kr">is</span> s tr Hfvti.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvti</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to Mi <span class="kr">is</span> s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state2trace s = tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk132" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk132"><span class="nb">assert</span> (Hfvti&#39; : finite_constrained_trace_init_to Mi <span class="kr">is</span> s (state2trace s))
    <span class="bp">by</span> (<span class="nb">eapply</span> finite_constrained_trace_init_to_state2trace; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvti</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to Mi <span class="kr">is</span> s tr</span></span></span><br><span><var>Hfvti'</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to Mi <span class="kr">is</span> s
  (state2trace s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state2trace s = tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> finite_constrained_trace_init_to_unique.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
The trace extracted from a constrained state <code>s</code> leads to <code>s</code>. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk133" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk133"><span class="kn">Lemma</span> <span class="nf">finite_constrained_trace_init_to_state2trace&#39;</span> :
  <span class="kr">forall</span> (<span class="nv">s</span> : State),
    constrained_state_prop Mi s -&gt;
      finite_constrained_trace_init_to Mi (``(vs0 Mi)) s (state2trace s).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : State,
  constrained_state_prop Mi s
  ‚Üí finite_constrained_trace_init_to Mi (`(vs0 Mi)) s
      (state2trace s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk134" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk134"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : State,
  constrained_state_prop Mi s
  ‚Üí finite_constrained_trace_init_to Mi (`(vs0 Mi)) s
      (state2trace s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk135" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk135"><span class="nb">intros</span> s Hs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Mi s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_constrained_trace_init_to Mi (`(vs0 Mi)) s
  (state2trace s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk136" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk136"><span class="nb">apply</span> valid_state_has_trace <span class="kr">in</span> Hs <span class="kr">as</span> (<span class="kr">is</span> &amp; tr &amp; Htr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm Mi) <span class="kr">is</span> s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_constrained_trace_init_to Mi (`(vs0 Mi)) s
  (state2trace s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk137" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk137"><span class="nb">apply</span> finite_constrained_trace_init_to_state2trace_inv <span class="kr">in</span> Htr <span class="kr">as</span> Heqtr; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm Mi) <span class="kr">is</span> s
  (state2trace s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_constrained_trace_init_to Mi (`(vs0 Mi)) s
  (state2trace s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk138" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk138"><span class="nb">replace</span> (``(vs0 Mi)) <span class="kr">with</span> <span class="kr">is</span>; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>VLSM.state (preloaded_with_all_messages_vlsm Mi)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm Mi) <span class="kr">is</span> s
  (state2trace s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">is</span> = `(vs0 Mi)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> vs0_uniqueness, Htr.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk139" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk139"><span class="kn">Lemma</span> <span class="nf">constrained_state_contains_unique_constrained_trace</span> :
  <span class="kr">forall</span> <span class="nv">s</span> : State,
    constrained_state_prop Mi s -&gt;
      <span class="kr">exists</span> <span class="nv">tr</span> : list transition_item,
        finite_constrained_trace_init_to Mi (``(vs0 Mi)) s tr
          /\
        <span class="kr">forall</span> <span class="nv">tr&#39;</span> : list transition_item,
          finite_constrained_trace_init_to Mi (``(vs0 Mi)) s tr&#39; -&gt; tr&#39; = tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : State,
  constrained_state_prop Mi s
  ‚Üí <span class="kr">‚àÉ</span> <span class="nv">tr</span> : list transition_item,
      finite_constrained_trace_init_to Mi (`(vs0 Mi))
        s tr
      ‚àß (<span class="kr">‚àÄ</span> <span class="nv">tr&#39;</span> : list transition_item,
           finite_constrained_trace_init_to Mi
             (`(vs0 Mi)) s tr&#39; ‚Üí tr&#39; = tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk13a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk13a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : State,
  constrained_state_prop Mi s
  ‚Üí <span class="kr">‚àÉ</span> <span class="nv">tr</span> : list transition_item,
      finite_constrained_trace_init_to Mi (`(vs0 Mi))
        s tr
      ‚àß (<span class="kr">‚àÄ</span> <span class="nv">tr&#39;</span> : list transition_item,
           finite_constrained_trace_init_to Mi
             (`(vs0 Mi)) s tr&#39; ‚Üí tr&#39; = tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk13b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk13b"><span class="nb">intros</span> s Hvsp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Mi s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">tr</span> : list transition_item,
  finite_constrained_trace_init_to Mi (`(vs0 Mi)) s tr
  ‚àß (<span class="kr">‚àÄ</span> <span class="nv">tr&#39;</span> : list transition_item,
       finite_constrained_trace_init_to Mi (`(vs0 Mi))
         s tr&#39; ‚Üí tr&#39; = tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk13c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk13c"><span class="kr">exists</span> (<span class="nv">state2trace</span> <span class="nv">s</span>); <span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Mi s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_constrained_trace_init_to Mi (`(vs0 Mi)) s
  (state2trace s)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk13d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Mi s</span></span></span><br></div><label class="goal-separator" for="MO-v-chk13d"><hr></label><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">tr&#39;</span> : list transition_item,
  finite_constrained_trace_init_to Mi 
    (`(vs0 Mi)) s tr&#39; ‚Üí 
  tr&#39; = state2trace s</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk13e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk13e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Mi s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_constrained_trace_init_to Mi (`(vs0 Mi)) s
  (state2trace s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> finite_constrained_trace_init_to_state2trace&#39;.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk13f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk13f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Mi s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">tr&#39;</span> : list transition_item,
  finite_constrained_trace_init_to Mi (`(vs0 Mi)) s
    tr&#39; ‚Üí tr&#39; = state2trace s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk140" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk140"><span class="nb">intros</span> tr&#39; Hfvt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Mi s</span></span></span><br><span><var>tr'</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to Mi 
  (`(vs0 Mi)) s tr&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tr&#39; = state2trace s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk141" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk141"><span class="nb">symmetry</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hvsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Mi s</span></span></span><br><span><var>tr'</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hfvt</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to Mi 
  (`(vs0 Mi)) s tr&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state2trace s = tr&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> finite_constrained_trace_init_to_state2trace_inv.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab6"></a><h3 class="section">State and message suffix relations</h3>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk142" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk142"><span class="kn">Lemma</span> <span class="nf">state_suffix_totally_orders_valid_sent_messages</span> :
  <span class="kr">forall</span> (<span class="nv">m</span> <span class="nv">m1</span> <span class="nv">m2</span> : Message) (<span class="nv">obs1</span> <span class="nv">obs2</span> <span class="nv">obs3</span> : list Observation),
    m = MkMessage (MkState [] i) &lt;**&gt;
      obs1 &lt;*&gt; MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt; MkObservation Send m2 &lt;**&gt; obs3 -&gt;
    MO_msg_valid_alt_sends m -&gt;
      state_suffix (state m1) (state m2) /\ state_suffix (state m2) (state m).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">m</span> <span class="nv">m1</span> <span class="nv">m2</span> : Message) (<span class="nv">obs1</span> <span class="nv">obs2</span>
                       <span class="nv">obs3</span> : list Observation),
  m =
  MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
  MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
  MkObservation Send m2 &lt;**&gt; obs3
  ‚Üí MO_msg_valid_alt_sends m
    ‚Üí state_suffix (state m1) (state m2)
      ‚àß state_suffix (state m2) (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk143" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk143"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">m</span> <span class="nv">m1</span> <span class="nv">m2</span> : Message) (<span class="nv">obs1</span> <span class="nv">obs2</span>
                       <span class="nv">obs3</span> : list Observation),
  m =
  MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
  MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
  MkObservation Send m2 &lt;**&gt; obs3
  ‚Üí MO_msg_valid_alt_sends m
    ‚Üí state_suffix (state m1) (state m2)
      ‚àß state_suffix (state m2) (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk144" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk144"><span class="nb">intros</span> m m1 m2 obs1 obs2 obs3 Heq Hvalid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_msg_valid_alt_sends m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_suffix (state m1) (state m2)
‚àß state_suffix (state m2) (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk145" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk145"><span class="nb">red</span> <span class="kr">in</span> Hvalid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_suffix (state m1) (state m2)
‚àß state_suffix (state m2) (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk146" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk146"><span class="nb">assert</span> (H2 :
    obs (state m2) =
    obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt; MkObservation Send m1 &lt;**&gt; obs2))
    /\ adr (state m2) = i).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))
‚àß adr (state m2) = i</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk147" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))
‚àß adr (state m2) = i</span></span></span><br></div><label class="goal-separator" for="MO-v-chk147"><hr></label><div class="goal-conclusion">state_suffix (state m1) (state m2)
‚àß state_suffix (state m2) (state m)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk148" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk148">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))
‚àß adr (state m2) = i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk149" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk149"><span class="nb">replace</span> i <span class="kr">with</span> (adr (state m)) <span class="nb">at</span> <span class="mi">2</span> <span class="bp">by</span> (<span class="nb">subst</span>; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))
‚àß adr (state m2) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk14a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk14a"><span class="nb">apply</span> (Hvalid (<span class="mi">1</span> + length
      (obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt; MkObservation Send m1 &lt;**&gt; obs2))))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lastn
  (<span class="mi">1</span> +
   length
     (obs
        (state
           (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
            MkObservation Send m1 &lt;**&gt; obs2))))
  (obs (state m)) =
addObservation&#39; (MkObservation Send m2)
  (obs
     (state
        (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
         MkObservation Send m1 &lt;**&gt; obs2)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk14b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk14b"><span class="nb">rewrite</span> Heq; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lastn
  (S
     (length
        (obs2 ++
         addObservation&#39; (MkObservation Send m1)
           (obs1 ++ []))))
  (obs3 ++
   addObservation&#39; (MkObservation Send m2)
     (obs2 ++
      addObservation&#39; (MkObservation Send m1)
        (obs1 ++ []))) =
addObservation&#39; (MkObservation Send m2)
  (obs2 ++
   addObservation&#39; (MkObservation Send m1)
     (obs1 ++ []))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk14c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk14c"><span class="nb">rewrite</span> lastn_app_le <span class="bp">by</span> (<span class="nb">cbn</span>; <span class="bp">lia</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lastn
  (S
     (length
        (obs2 ++
         addObservation&#39; (MkObservation Send m1)
           (obs1 ++ []))))
  (addObservation&#39; (MkObservation Send m2)
     (obs2 ++
      addObservation&#39; (MkObservation Send m1)
        (obs1 ++ []))) =
addObservation&#39; (MkObservation Send m2)
  (obs2 ++
   addObservation&#39; (MkObservation Send m1)
     (obs1 ++ []))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> lastn_ge; [| <span class="nb">cbn</span>; <span class="bp">lia</span>].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk14d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk14d">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))
‚àß adr (state m2) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_suffix (state m1) (state m2)
‚àß state_suffix (state m2) (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk14e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk14e"><span class="nb">assert</span> (H1 :
    obs (state m1) = obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))
    /\ adr (state m1) = i).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))
‚àß adr (state m2) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))
‚àß adr (state m1) = i</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk14f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))
‚àß adr (state m2) = i</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))
‚àß adr (state m1) = i</span></span></span><br></div><label class="goal-separator" for="MO-v-chk14f"><hr></label><div class="goal-conclusion">state_suffix (state m1) (state m2)
‚àß state_suffix (state m2) (state m)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk150" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk150">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))
‚àß adr (state m2) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))
‚àß adr (state m1) = i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk151" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk151"><span class="nb">replace</span> i <span class="kr">with</span> (adr (state m)) <span class="nb">at</span> <span class="mi">2</span> <span class="bp">by</span> (<span class="nb">subst</span>; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))
‚àß adr (state m2) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))
‚àß adr (state m1) = adr (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk152" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk152"><span class="nb">apply</span> (Hvalid (<span class="mi">1</span> + length (obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))
‚àß adr (state m2) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lastn
  (<span class="mi">1</span> +
   length
     (obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))))
  (obs (state m)) =
addObservation&#39; (MkObservation Send m1)
  (obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk153" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk153"><span class="nb">rewrite</span> Heq; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))
‚àß adr (state m2) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lastn (S (length (obs1 ++ [])))
  (obs3 ++
   addObservation&#39; (MkObservation Send m2)
     (obs2 ++
      addObservation&#39; (MkObservation Send m1)
        (obs1 ++ []))) =
addObservation&#39; (MkObservation Send m1) (obs1 ++ [])</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk154" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk154"><span class="nb">unfold</span> addObservation&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))
‚àß adr (state m2) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lastn (S (length (obs1 ++ [])))
  (obs3 ++
   MkObservation Send m2
   :: obs2 ++ MkObservation Send m1 :: obs1 ++ []) =
MkObservation Send m1 :: obs1 ++ []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk155" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk155"><span class="nb">rewrite</span> &lt;- (app_cons (MkObservation Send m2)),
            &lt;- (app_cons (MkObservation Send m1)), <span class="mi">2</span>!app_assoc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))
‚àß adr (state m2) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lastn (S (length (obs1 ++ [])))
  (((obs3 ++ [MkObservation Send m2]) ++ obs2) ++
   [MkObservation Send m1] ++ obs1 ++ []) =
[MkObservation Send m1] ++ obs1 ++ []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk156" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk156"><span class="nb">rewrite</span> lastn_app_le <span class="bp">by</span> (<span class="nb">cbn</span>; <span class="bp">lia</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))
‚àß adr (state m2) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lastn (S (length (obs1 ++ [])))
  ([MkObservation Send m1] ++ obs1 ++ []) =
[MkObservation Send m1] ++ obs1 ++ []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> lastn_ge; [| <span class="nb">cbn</span>; <span class="bp">lia</span>].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk157" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk157">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))
‚àß adr (state m2) = i</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))
‚àß adr (state m1) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_suffix (state m1) (state m2)
‚àß state_suffix (state m2) (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk158" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk158"><span class="nb">destruct</span> H1 <span class="kr">as</span> [H11 H12], H2 <span class="kr">as</span> [H21 H22].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_suffix (state m1) (state m2)
‚àß state_suffix (state m2) (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk159" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk159"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_suffix (state m1) (state m2)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk15a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br></div><label class="goal-separator" for="MO-v-chk15a"><hr></label><div class="goal-conclusion">state_suffix (state m2) (state m)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk15b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk15b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_suffix (state m1) (state m2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk15c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk15c"><span class="nb">constructor</span>; [<span class="bp">by</span> <span class="bp">congruence</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strict suffix (obs (state m1)) (obs (state m2))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk15d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk15d"><span class="nb">rewrite</span> H11, H21; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strict suffix (obs1 ++ [])
  (obs2 ++
   addObservation&#39; (MkObservation Send m1)
     (obs1 ++ []))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk15e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk15e"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs1 ++ []
`suffix_of` obs2 ++
            addObservation&#39; (MkObservation Send m1)
              (obs1 ++ [])</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk15f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br></div><label class="goal-separator" for="MO-v-chk15f"><hr></label><div class="goal-conclusion">¬¨ obs2 ++
  addObservation&#39; (MkObservation Send m1) (obs1 ++ [])
  `suffix_of` obs1 ++ []</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk160" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk160">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs1 ++ []
`suffix_of` obs2 ++
            addObservation&#39; (MkObservation Send m1)
              (obs1 ++ [])</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> suffix_app_r, suffix_cons_r.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk161" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk161">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ obs2 ++
  addObservation&#39; (MkObservation Send m1) (obs1 ++ [])
  `suffix_of` obs1 ++ []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk162" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk162"><span class="nb">intros</span> [].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>obs1 ++ [] =
x ++
obs2 ++
addObservation&#39; (MkObservation Send m1)
  (obs1 ++ [])</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk163" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk163"><span class="nb">apply</span> (<span class="nb">f_equal</span> length) <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>length (obs1 ++ []) =
length
  (x ++
   obs2 ++
   addObservation&#39; (MkObservation Send m1)
     (obs1 ++ []))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk164" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk164"><span class="nb">rewrite</span> !app_length <span class="kr">in</span> H; <span class="nb">cbn</span> <span class="kr">in</span> H; <span class="nb">rewrite</span> app_length <span class="kr">in</span> H; <span class="nb">cbn</span> <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>length obs1 + <span class="mi">0</span> =
length x + (length obs2 + S (length obs1 + <span class="mi">0</span>))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk165" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk165">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_suffix (state m2) (state m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk166" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk166"><span class="nb">constructor</span>; [<span class="bp">by</span> <span class="nb">subst</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strict suffix (obs (state m2)) (obs (state m))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk167" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk167"><span class="nb">rewrite</span> H21, Heq; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strict suffix
  (obs2 ++
   addObservation&#39; (MkObservation Send m1)
     (obs1 ++ []))
  (obs3 ++
   addObservation&#39; (MkObservation Send m2)
     (obs2 ++
      addObservation&#39; (MkObservation Send m1)
        (obs1 ++ [])))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk168" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk168"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs2 ++
addObservation&#39; (MkObservation Send m1) (obs1 ++ [])
`suffix_of` obs3 ++
            addObservation&#39; (MkObservation Send m2)
              (obs2 ++
               addObservation&#39; (MkObservation Send m1)
                 (obs1 ++ []))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk169" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br></div><label class="goal-separator" for="MO-v-chk169"><hr></label><div class="goal-conclusion">¬¨ obs3 ++
  addObservation&#39; (MkObservation Send m2)
    (obs2 ++
     addObservation&#39; (MkObservation Send m1)
       (obs1 ++ []))
  `suffix_of` obs2 ++
              addObservation&#39; 
                (MkObservation Send m1) 
                (obs1 ++ [])</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk16a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk16a">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">obs2 ++
addObservation&#39; (MkObservation Send m1) (obs1 ++ [])
`suffix_of` obs3 ++
            addObservation&#39; (MkObservation Send m2)
              (obs2 ++
               addObservation&#39; (MkObservation Send m1)
                 (obs1 ++ []))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> suffix_app_r, suffix_cons_r.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk16b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk16b">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ obs3 ++
  addObservation&#39; (MkObservation Send m2)
    (obs2 ++
     addObservation&#39; (MkObservation Send m1)
       (obs1 ++ []))
  `suffix_of` obs2 ++
              addObservation&#39; (MkObservation Send m1)
                (obs1 ++ [])</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk16c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk16c"><span class="nb">intros</span> [].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>obs2 ++
addObservation&#39; (MkObservation Send m1)
  (obs1 ++ []) =
x ++
obs3 ++
addObservation&#39; (MkObservation Send m2)
  (obs2 ++
   addObservation&#39; (MkObservation Send m1)
     (obs1 ++ []))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk16d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk16d"><span class="nb">apply</span> (<span class="nb">f_equal</span> length) <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>length
  (obs2 ++
   addObservation&#39; (MkObservation Send m1)
     (obs1 ++ [])) =
length
  (x ++
   obs3 ++
   addObservation&#39; (MkObservation Send m2)
     (obs2 ++
      addObservation&#39; (MkObservation Send m1)
        (obs1 ++ [])))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk16e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk16e"><span class="nb">unfold</span> addObservation&#39; <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m, m1, m2</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>obs1, obs2, obs3</var><span class="hyp-type"><b>: </b><span>list Observation</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>m =
MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
MkObservation Send m1 &lt;**&gt; obs2 &lt;*&gt;
MkObservation Send m2 &lt;**&gt; obs3</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;)
    suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>H21</var><span class="hyp-type"><b>: </b><span>obs (state m2) =
obs
  (state
     (MkMessage (MkState [] i) &lt;**&gt; obs1 &lt;*&gt;
      MkObservation Send m1 &lt;**&gt; obs2))</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>adr (state m2) = i</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>obs (state m1) =
obs (state (MkMessage (MkState [] i) &lt;**&gt; obs1))</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>adr (state m1) = i</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>length
  (obs2 ++ MkObservation Send m1 :: obs1 ++ []) =
length
  (x ++
   obs3 ++
   MkObservation Send m2
   :: obs2 ++ MkObservation Send m1 :: obs1 ++ [])</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> &lt;- (app_cons (MkObservation _ m1)),
                 &lt;- (app_cons (MkObservation _ m2)), !app_length <span class="kr">in</span> H
      ; <span class="nb">cbn</span> <span class="kr">in</span> H; <span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">MO_msg_suffix</span> (<span class="nv">m</span> : Message) : <span class="kt">Prop</span> :=
  <span class="kr">forall</span> <span class="nv">k1</span> <span class="nv">k2</span> : nat, k1 &lt; k2 -&gt;
  <span class="kr">forall</span> <span class="nv">ob1</span> <span class="nv">ob2</span> : Observation,
    obs (state m) !! k1 = Some ob1 -&gt; label ob1 = Send -&gt;
    obs (state m) !! k2 = Some ob2 -&gt; label ob2 = Send -&gt;
      state_suffix (state (message ob2)) (state (message ob1)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk16f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk16f"><span class="kn">Lemma</span> <span class="nf">state_suffix_totally_orders_valid_sent_messages&#39;</span> :
  <span class="kr">forall</span> <span class="nv">m</span> : Message, MO_msg_valid_alt_sends m -&gt; MO_msg_suffix m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message,
  MO_msg_valid_alt_sends m ‚Üí MO_msg_suffix m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk170" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk170"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message,
  MO_msg_valid_alt_sends m ‚Üí MO_msg_suffix m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk171" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk171"><span class="nb">unfold</span> MO_msg_valid_alt_sends, MO_msg_suffix.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message,
  (<span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) (<span class="nv">m&#39;</span> : Message),
     lastn k (obs (state m)) =
     addObservation&#39; (MkObservation Send m&#39;) suffix
     ‚Üí obs (state m&#39;) = suffix
       ‚àß adr (state m&#39;) = adr (state m))
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">k1</span> <span class="nv">k2</span> : nat,
      k1 &lt; k2
      ‚Üí <span class="kr">‚àÄ</span> <span class="nv">ob1</span> <span class="nv">ob2</span> : Observation,
          obs (state m) !! k1 = Some ob1
          ‚Üí label ob1 = Send
            ‚Üí obs (state m) !! k2 = Some ob2
              ‚Üí label ob2 = Send
                ‚Üí state_suffix (state (message ob2))
                    (state (message ob1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk172" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk172"><span class="nb">intros</span> m H k1 k2 Hlt ob1 ob2 Heq1 Hlbl1 Heq2 Hlbl2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;) suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hlt</var><span class="hyp-type"><b>: </b><span>k1 &lt; k2</span></span></span><br><span><var>ob1, ob2</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k1 = Some ob1</span></span></span><br><span><var>Hlbl1</var><span class="hyp-type"><b>: </b><span>label ob1 = Send</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k2 = Some ob2</span></span></span><br><span><var>Hlbl2</var><span class="hyp-type"><b>: </b><span>label ob2 = Send</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_suffix (state (message ob2))
  (state (message ob1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk173" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk173"><span class="nb">remember</span> (length (obs (state m))) <span class="kr">as</span> K.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;) suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hlt</var><span class="hyp-type"><b>: </b><span>k1 &lt; k2</span></span></span><br><span><var>ob1, ob2</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k1 = Some ob1</span></span></span><br><span><var>Hlbl1</var><span class="hyp-type"><b>: </b><span>label ob1 = Send</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k2 = Some ob2</span></span></span><br><span><var>Hlbl2</var><span class="hyp-type"><b>: </b><span>label ob2 = Send</span></span></span><br><span><var>K</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HeqK</var><span class="hyp-type"><b>: </b><span>K = length (obs (state m))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_suffix (state (message ob2))
  (state (message ob1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk174" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk174"><span class="nb">destruct</span> (H (K - k1) (lastn (K - S k1) (obs (state m))) (message ob1)) <span class="kr">as</span> [Hobs1 Hadr1]
  ; [<span class="bp">by</span> <span class="nb">destruct</span> ob1; <span class="nb">cbn</span> <span class="kr">in</span> *; <span class="nb">subst</span>; <span class="nb">apply</span> lastn_length_cons |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;) suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hlt</var><span class="hyp-type"><b>: </b><span>k1 &lt; k2</span></span></span><br><span><var>ob1, ob2</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k1 = Some ob1</span></span></span><br><span><var>Hlbl1</var><span class="hyp-type"><b>: </b><span>label ob1 = Send</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k2 = Some ob2</span></span></span><br><span><var>Hlbl2</var><span class="hyp-type"><b>: </b><span>label ob2 = Send</span></span></span><br><span><var>K</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HeqK</var><span class="hyp-type"><b>: </b><span>K = length (obs (state m))</span></span></span><br><span><var>Hobs1</var><span class="hyp-type"><b>: </b><span>obs (state (message ob1)) =
lastn (K - S k1) (obs (state m))</span></span></span><br><span><var>Hadr1</var><span class="hyp-type"><b>: </b><span>adr (state (message ob1)) = adr (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_suffix (state (message ob2))
  (state (message ob1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk175" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk175"><span class="nb">destruct</span> (H (K - k2) (lastn (K - S k2) (obs (state m))) (message ob2)) <span class="kr">as</span> [Hobs2 Hadr2]
  ; [<span class="bp">by</span> <span class="nb">destruct</span> ob2; <span class="nb">cbn</span> <span class="kr">in</span> *; <span class="nb">subst</span>; <span class="nb">apply</span> lastn_length_cons |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;) suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hlt</var><span class="hyp-type"><b>: </b><span>k1 &lt; k2</span></span></span><br><span><var>ob1, ob2</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k1 = Some ob1</span></span></span><br><span><var>Hlbl1</var><span class="hyp-type"><b>: </b><span>label ob1 = Send</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k2 = Some ob2</span></span></span><br><span><var>Hlbl2</var><span class="hyp-type"><b>: </b><span>label ob2 = Send</span></span></span><br><span><var>K</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HeqK</var><span class="hyp-type"><b>: </b><span>K = length (obs (state m))</span></span></span><br><span><var>Hobs1</var><span class="hyp-type"><b>: </b><span>obs (state (message ob1)) =
lastn (K - S k1) (obs (state m))</span></span></span><br><span><var>Hadr1</var><span class="hyp-type"><b>: </b><span>adr (state (message ob1)) = adr (state m)</span></span></span><br><span><var>Hobs2</var><span class="hyp-type"><b>: </b><span>obs (state (message ob2)) =
lastn (K - S k2) (obs (state m))</span></span></span><br><span><var>Hadr2</var><span class="hyp-type"><b>: </b><span>adr (state (message ob2)) = adr (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_suffix (state (message ob2))
  (state (message ob1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk176" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk176"><span class="nb">constructor</span>; [<span class="bp">by</span> <span class="bp">congruence</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;) suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hlt</var><span class="hyp-type"><b>: </b><span>k1 &lt; k2</span></span></span><br><span><var>ob1, ob2</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k1 = Some ob1</span></span></span><br><span><var>Hlbl1</var><span class="hyp-type"><b>: </b><span>label ob1 = Send</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k2 = Some ob2</span></span></span><br><span><var>Hlbl2</var><span class="hyp-type"><b>: </b><span>label ob2 = Send</span></span></span><br><span><var>K</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HeqK</var><span class="hyp-type"><b>: </b><span>K = length (obs (state m))</span></span></span><br><span><var>Hobs1</var><span class="hyp-type"><b>: </b><span>obs (state (message ob1)) =
lastn (K - S k1) (obs (state m))</span></span></span><br><span><var>Hadr1</var><span class="hyp-type"><b>: </b><span>adr (state (message ob1)) = adr (state m)</span></span></span><br><span><var>Hobs2</var><span class="hyp-type"><b>: </b><span>obs (state (message ob2)) =
lastn (K - S k2) (obs (state m))</span></span></span><br><span><var>Hadr2</var><span class="hyp-type"><b>: </b><span>adr (state (message ob2)) = adr (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">strict suffix (obs (state (message ob2)))
  (obs (state (message ob1)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk177" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk177"><span class="nb">constructor</span>; <span class="nb">rewrite</span> Hobs1, Hobs2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;) suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hlt</var><span class="hyp-type"><b>: </b><span>k1 &lt; k2</span></span></span><br><span><var>ob1, ob2</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k1 = Some ob1</span></span></span><br><span><var>Hlbl1</var><span class="hyp-type"><b>: </b><span>label ob1 = Send</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k2 = Some ob2</span></span></span><br><span><var>Hlbl2</var><span class="hyp-type"><b>: </b><span>label ob2 = Send</span></span></span><br><span><var>K</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HeqK</var><span class="hyp-type"><b>: </b><span>K = length (obs (state m))</span></span></span><br><span><var>Hobs1</var><span class="hyp-type"><b>: </b><span>obs (state (message ob1)) =
lastn (K - S k1) (obs (state m))</span></span></span><br><span><var>Hadr1</var><span class="hyp-type"><b>: </b><span>adr (state (message ob1)) = adr (state m)</span></span></span><br><span><var>Hobs2</var><span class="hyp-type"><b>: </b><span>obs (state (message ob2)) =
lastn (K - S k2) (obs (state m))</span></span></span><br><span><var>Hadr2</var><span class="hyp-type"><b>: </b><span>adr (state (message ob2)) = adr (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lastn (K - S k2) (obs (state m))
`suffix_of` lastn (K - S k1) (obs (state m))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk178" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;) suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hlt</var><span class="hyp-type"><b>: </b><span>k1 &lt; k2</span></span></span><br><span><var>ob1, ob2</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k1 = Some ob1</span></span></span><br><span><var>Hlbl1</var><span class="hyp-type"><b>: </b><span>label ob1 = Send</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k2 = Some ob2</span></span></span><br><span><var>Hlbl2</var><span class="hyp-type"><b>: </b><span>label ob2 = Send</span></span></span><br><span><var>K</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HeqK</var><span class="hyp-type"><b>: </b><span>K = length (obs (state m))</span></span></span><br><span><var>Hobs1</var><span class="hyp-type"><b>: </b><span>obs (state (message ob1)) =
lastn (K - S k1) (obs (state m))</span></span></span><br><span><var>Hadr1</var><span class="hyp-type"><b>: </b><span>adr (state (message ob1)) = adr (state m)</span></span></span><br><span><var>Hobs2</var><span class="hyp-type"><b>: </b><span>obs (state (message ob2)) =
lastn (K - S k2) (obs (state m))</span></span></span><br><span><var>Hadr2</var><span class="hyp-type"><b>: </b><span>adr (state (message ob2)) = adr (state m)</span></span></span><br></div><label class="goal-separator" for="MO-v-chk178"><hr></label><div class="goal-conclusion">¬¨ lastn (K - S k1) (obs (state m))
  `suffix_of` lastn (K - S k2) (obs (state m))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk179" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk179">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;) suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hlt</var><span class="hyp-type"><b>: </b><span>k1 &lt; k2</span></span></span><br><span><var>ob1, ob2</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k1 = Some ob1</span></span></span><br><span><var>Hlbl1</var><span class="hyp-type"><b>: </b><span>label ob1 = Send</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k2 = Some ob2</span></span></span><br><span><var>Hlbl2</var><span class="hyp-type"><b>: </b><span>label ob2 = Send</span></span></span><br><span><var>K</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HeqK</var><span class="hyp-type"><b>: </b><span>K = length (obs (state m))</span></span></span><br><span><var>Hobs1</var><span class="hyp-type"><b>: </b><span>obs (state (message ob1)) =
lastn (K - S k1) (obs (state m))</span></span></span><br><span><var>Hadr1</var><span class="hyp-type"><b>: </b><span>adr (state (message ob1)) = adr (state m)</span></span></span><br><span><var>Hobs2</var><span class="hyp-type"><b>: </b><span>obs (state (message ob2)) =
lastn (K - S k2) (obs (state m))</span></span></span><br><span><var>Hadr2</var><span class="hyp-type"><b>: </b><span>adr (state (message ob2)) = adr (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lastn (K - S k2) (obs (state m))
`suffix_of` lastn (K - S k1) (obs (state m))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> suffix_lastn; <span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk17a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk17a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;) suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hlt</var><span class="hyp-type"><b>: </b><span>k1 &lt; k2</span></span></span><br><span><var>ob1, ob2</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k1 = Some ob1</span></span></span><br><span><var>Hlbl1</var><span class="hyp-type"><b>: </b><span>label ob1 = Send</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k2 = Some ob2</span></span></span><br><span><var>Hlbl2</var><span class="hyp-type"><b>: </b><span>label ob2 = Send</span></span></span><br><span><var>K</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HeqK</var><span class="hyp-type"><b>: </b><span>K = length (obs (state m))</span></span></span><br><span><var>Hobs1</var><span class="hyp-type"><b>: </b><span>obs (state (message ob1)) =
lastn (K - S k1) (obs (state m))</span></span></span><br><span><var>Hadr1</var><span class="hyp-type"><b>: </b><span>adr (state (message ob1)) = adr (state m)</span></span></span><br><span><var>Hobs2</var><span class="hyp-type"><b>: </b><span>obs (state (message ob2)) =
lastn (K - S k2) (obs (state m))</span></span></span><br><span><var>Hadr2</var><span class="hyp-type"><b>: </b><span>adr (state (message ob2)) = adr (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ lastn (K - S k1) (obs (state m))
  `suffix_of` lastn (K - S k2) (obs (state m))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk17b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk17b"><span class="nb">intros</span> Hsuf.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;) suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hlt</var><span class="hyp-type"><b>: </b><span>k1 &lt; k2</span></span></span><br><span><var>ob1, ob2</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k1 = Some ob1</span></span></span><br><span><var>Hlbl1</var><span class="hyp-type"><b>: </b><span>label ob1 = Send</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k2 = Some ob2</span></span></span><br><span><var>Hlbl2</var><span class="hyp-type"><b>: </b><span>label ob2 = Send</span></span></span><br><span><var>K</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HeqK</var><span class="hyp-type"><b>: </b><span>K = length (obs (state m))</span></span></span><br><span><var>Hobs1</var><span class="hyp-type"><b>: </b><span>obs (state (message ob1)) =
lastn (K - S k1) (obs (state m))</span></span></span><br><span><var>Hadr1</var><span class="hyp-type"><b>: </b><span>adr (state (message ob1)) = adr (state m)</span></span></span><br><span><var>Hobs2</var><span class="hyp-type"><b>: </b><span>obs (state (message ob2)) =
lastn (K - S k2) (obs (state m))</span></span></span><br><span><var>Hadr2</var><span class="hyp-type"><b>: </b><span>adr (state (message ob2)) = adr (state m)</span></span></span><br><span><var>Hsuf</var><span class="hyp-type"><b>: </b><span>lastn (K - S k1) (obs (state m))
`suffix_of` lastn (K - S k2) (obs (state m))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk17c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk17c"><span class="nb">apply</span> suffix_length <span class="kr">in</span> Hsuf.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;) suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hlt</var><span class="hyp-type"><b>: </b><span>k1 &lt; k2</span></span></span><br><span><var>ob1, ob2</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k1 = Some ob1</span></span></span><br><span><var>Hlbl1</var><span class="hyp-type"><b>: </b><span>label ob1 = Send</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k2 = Some ob2</span></span></span><br><span><var>Hlbl2</var><span class="hyp-type"><b>: </b><span>label ob2 = Send</span></span></span><br><span><var>K</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HeqK</var><span class="hyp-type"><b>: </b><span>K = length (obs (state m))</span></span></span><br><span><var>Hobs1</var><span class="hyp-type"><b>: </b><span>obs (state (message ob1)) =
lastn (K - S k1) (obs (state m))</span></span></span><br><span><var>Hadr1</var><span class="hyp-type"><b>: </b><span>adr (state (message ob1)) = adr (state m)</span></span></span><br><span><var>Hobs2</var><span class="hyp-type"><b>: </b><span>obs (state (message ob2)) =
lastn (K - S k2) (obs (state m))</span></span></span><br><span><var>Hadr2</var><span class="hyp-type"><b>: </b><span>adr (state (message ob2)) = adr (state m)</span></span></span><br><span><var>Hsuf</var><span class="hyp-type"><b>: </b><span>length (lastn (K - S k1) (obs (state m)))
‚â§ length (lastn (K - S k2) (obs (state m)))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk17d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk17d"><span class="nb">rewrite</span> <span class="mi">2</span>!length_lastn <span class="kr">in</span> Hsuf.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;) suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hlt</var><span class="hyp-type"><b>: </b><span>k1 &lt; k2</span></span></span><br><span><var>ob1, ob2</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k1 = Some ob1</span></span></span><br><span><var>Hlbl1</var><span class="hyp-type"><b>: </b><span>label ob1 = Send</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>obs (state m) !! k2 = Some ob2</span></span></span><br><span><var>Hlbl2</var><span class="hyp-type"><b>: </b><span>label ob2 = Send</span></span></span><br><span><var>K</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HeqK</var><span class="hyp-type"><b>: </b><span>K = length (obs (state m))</span></span></span><br><span><var>Hobs1</var><span class="hyp-type"><b>: </b><span>obs (state (message ob1)) =
lastn (K - S k1) (obs (state m))</span></span></span><br><span><var>Hadr1</var><span class="hyp-type"><b>: </b><span>adr (state (message ob1)) = adr (state m)</span></span></span><br><span><var>Hobs2</var><span class="hyp-type"><b>: </b><span>obs (state (message ob2)) =
lastn (K - S k2) (obs (state m))</span></span></span><br><span><var>Hadr2</var><span class="hyp-type"><b>: </b><span>adr (state (message ob2)) = adr (state m)</span></span></span><br><span><var>Hsuf</var><span class="hyp-type"><b>: </b><span>(K - S k1) `min` length (obs (state m))
‚â§ (K - S k2) `min` length (obs (state m))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk17e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk17e"><span class="nb">apply</span> lookup_lt_Some <span class="kr">in</span> Heq1, Heq2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;) suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hlt</var><span class="hyp-type"><b>: </b><span>k1 &lt; k2</span></span></span><br><span><var>ob1, ob2</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>k1 &lt; length (obs (state m))</span></span></span><br><span><var>Hlbl1</var><span class="hyp-type"><b>: </b><span>label ob1 = Send</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>k2 &lt; length (obs (state m))</span></span></span><br><span><var>Hlbl2</var><span class="hyp-type"><b>: </b><span>label ob2 = Send</span></span></span><br><span><var>K</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HeqK</var><span class="hyp-type"><b>: </b><span>K = length (obs (state m))</span></span></span><br><span><var>Hobs1</var><span class="hyp-type"><b>: </b><span>obs (state (message ob1)) =
lastn (K - S k1) (obs (state m))</span></span></span><br><span><var>Hadr1</var><span class="hyp-type"><b>: </b><span>adr (state (message ob1)) = adr (state m)</span></span></span><br><span><var>Hobs2</var><span class="hyp-type"><b>: </b><span>obs (state (message ob2)) =
lastn (K - S k2) (obs (state m))</span></span></span><br><span><var>Hadr2</var><span class="hyp-type"><b>: </b><span>adr (state (message ob2)) = adr (state m)</span></span></span><br><span><var>Hsuf</var><span class="hyp-type"><b>: </b><span>(K - S k1) `min` length (obs (state m))
‚â§ (K - S k2) `min` length (obs (state m))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk17f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk17f"><span class="nb">unfold</span> Observation <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Mi</var><span><span class="hyp-body"><b>:= </b><span>MO_component P i</span></span><span class="hyp-type"><b>: </b><span>VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">k</span> : nat) (<span class="nv">suffix</span> : list BaseELMO.Observation) 
  (<span class="nv">m&#39;</span> : Message),
  lastn k (obs (state m)) =
  addObservation&#39; (MkObservation Send m&#39;) suffix
  ‚Üí obs (state m&#39;) = suffix
    ‚àß adr (state m&#39;) = adr (state m)</span></span></span><br><span><var>k1, k2</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hlt</var><span class="hyp-type"><b>: </b><span>k1 &lt; k2</span></span></span><br><span><var>ob1, ob2</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>Heq1</var><span class="hyp-type"><b>: </b><span>k1 &lt; length (obs (state m))</span></span></span><br><span><var>Hlbl1</var><span class="hyp-type"><b>: </b><span>label ob1 = Send</span></span></span><br><span><var>Heq2</var><span class="hyp-type"><b>: </b><span>k2 &lt; length (obs (state m))</span></span></span><br><span><var>Hlbl2</var><span class="hyp-type"><b>: </b><span>label ob2 = Send</span></span></span><br><span><var>K</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HeqK</var><span class="hyp-type"><b>: </b><span>K = length (obs (state m))</span></span></span><br><span><var>Hobs1</var><span class="hyp-type"><b>: </b><span>obs (state (message ob1)) =
lastn (K - S k1) (obs (state m))</span></span></span><br><span><var>Hadr1</var><span class="hyp-type"><b>: </b><span>adr (state (message ob1)) = adr (state m)</span></span></span><br><span><var>Hobs2</var><span class="hyp-type"><b>: </b><span>obs (state (message ob2)) =
lastn (K - S k2) (obs (state m))</span></span></span><br><span><var>Hadr2</var><span class="hyp-type"><b>: </b><span>adr (state (message ob2)) = adr (state m)</span></span></span><br><span><var>Hsuf</var><span class="hyp-type"><b>: </b><span>(K - S k1) `min` length (obs (state m))
‚â§ (K - S k2) `min` length (obs (state m))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> (Nat.min_spec (K - S k1) (length (obs (state m)))) <span class="kr">as</span> [[H11 H12] | [H11 H12]],
             (Nat.min_spec (K - S k2) (length (obs (state m)))) <span class="kr">as</span> [[H21 H22] | [H21 H22]]
    ; <span class="nb">rewrite</span> <span class="nl">?H12</span>, <span class="nl">?H22</span> <span class="kr">in</span> Hsuf; <span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sec_MO_component_lemmas</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sec_MOProtocol</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  (<span class="nv">index</span> : <span class="kt">Type</span>)
  `{finite.Finite index}
  (idx : index -&gt; Address)
  `{!Inj (=) (=) idx}
  (P : Address -&gt; <span class="kt">Prop</span>)
  (P&#39; := <span class="kr">fun</span> <span class="nv">adr</span> =&gt; P adr /\ <span class="kr">exists</span> <span class="nv">i</span> : index, idx i = adr)
  (M : index -&gt; VLSM Message := <span class="kr">fun</span> <span class="nv">i</span> =&gt; MO_component P&#39; (idx i))
  .</span></span></pre><div class="doc">
<a id="lab7"></a><h2 class="section">Protocol</h2>
<div class="paragraph"> </div>

  The MO protocol is a free composition of finitely many MO components (each
  with the same predicate <code>P</code>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">MO</span> : VLSM Message := free_composite_vlsm M.</span></span></pre><div class="doc">
<a id="lab8"></a><h3 class="section">Validators</h3>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk180" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk180"><span class="kn">Lemma</span> <span class="nf">MO_reachable_view</span> (<span class="nv">s</span> : State) <span class="nv">i</span> :
  constrained_state_prop (M i) s
    &lt;-&gt;
  UMO_reachable (const (MO_msg_valid P&#39;))  s /\ adr s = idx i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">constrained_state_prop (M i) s
‚Üî UMO_reachable (const (MO_msg_valid P&#39;)) s
  ‚àß adr s = idx i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk181" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk181"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">constrained_state_prop (M i) s
‚Üî UMO_reachable (const (MO_msg_valid P&#39;)) s
  ‚àß adr s = idx i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk182" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk182"><span class="nb">eapply</span> iff_trans.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">constrained_state_prop (M i) s ‚Üî <span class="nl">?B</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk183" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><label class="goal-separator" for="MO-v-chk183"><hr></label><div class="goal-conclusion"><span class="nl">?B</span>
‚Üî UMO_reachable (const (MO_msg_valid P&#39;)) s
  ‚àß adr s = idx i</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk184" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk184">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">constrained_state_prop (M i) s ‚Üî <span class="nl">?B</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk185" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk185"><span class="nb">apply</span> UMO_based_valid_reachable; <span class="nb">cbn</span>; [<span class="bp">by</span> <span class="nb">inversion</span> <span class="mi">1</span> | | <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : BaseELMO.State) (<span class="nv">om</span> : option BaseELMO.Message),
  constrained_state_prop
    {|
      vlsm_type :=
        {|
          VLSM.state := BaseELMO.State;
          VLSM.label := Label
        |};
      vlsm_machine := MO_component_machine P&#39; (idx i)
    |} s ‚Üí MO_component_valid P&#39; Send s om ‚Üî om = None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">cbn</span>; <span class="nb">split</span>; <span class="nb">inversion</span> <span class="mi">1</span>; [| <span class="nb">constructor</span>].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk186" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk186">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">UMO_reachable
  (<span class="kr">Œª</span> (<span class="nv">s</span> : BaseELMO.State) (<span class="nv">m</span> : BaseELMO.Message),
     valid Receive (s, Some m)) s
‚àß initial_state_prop (MkState [] (adr s))
‚Üî UMO_reachable (const (MO_msg_valid P&#39;)) s
  ‚àß adr s = idx i</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk187" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk187"><span class="nb">apply</span> Morphisms_Prop.and_iff_morphism; <span class="nb">cbn</span>; [| <span class="bp">by</span> <span class="nb">firstorder</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">UMO_reachable
  (<span class="kr">Œª</span> (<span class="nv">s</span> : BaseELMO.State) (<span class="nv">m</span> : BaseELMO.Message),
     MO_component_valid P&#39; Receive s (Some m)) s
‚Üî UMO_reachable (const (MO_msg_valid P&#39;)) s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">split</span>; <span class="nb">apply</span> UMO_reachable_impl; <span class="nb">inversion</span> <span class="mi">1</span>; <span class="nb">subst</span>; [| <span class="nb">constructor</span>..].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk188" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk188"><span class="kn">Lemma</span> <span class="nf">MO_reachable_adr</span> (<span class="nv">s</span> : State) <span class="nv">i</span> :
  constrained_state_prop (M i) s -&gt; adr s = idx i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">constrained_state_prop (M i) s ‚Üí adr s = idx i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk189" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk189"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">constrained_state_prop (M i) s ‚Üí adr s = idx i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> Hadr; <span class="nb">apply</span> MO_reachable_view <span class="kr">in</span> Hadr <span class="kr">as</span> [].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk18a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk18a"><span class="kn">Lemma</span> <span class="nf">MO_channel_authentication_prop</span> :
  channel_authentication_prop M (Message_sender_index idx) (Message_sender idx).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">channel_authentication_prop M
  (Message_sender_index idx) (Message_sender idx)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk18b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk18b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">channel_authentication_prop M
  (Message_sender_index idx) (Message_sender idx)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk18c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk18c"><span class="nb">intros</span> i m ((s &amp; []) &amp; [] &amp; s&#39; &amp; [(Hs &amp; _ &amp; Hv) Ht]);
    <span class="nb">inversion</span> Hv; <span class="nb">subst</span>; <span class="nb">inversion</span> Ht; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm (M i)) s</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid Send (s, None)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition Send (s, None) =
(s &lt;+&gt; MkObservation Send (MkMessage s),
 Some (MkMessage s))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">channel_authenticated_message
  (Message_sender_index idx) (Message_sender idx) i
  (MkMessage s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk18d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk18d"><span class="nb">unfold</span> channel_authenticated_message, Message_sender.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm (M i)) s</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid Send (s, None)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition Send (s, None) =
(s &lt;+&gt; MkObservation Send (MkMessage s),
 Some (MkMessage s))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_map (Message_sender_index idx)
  <span class="kr">match</span>
    decide
      (is_Some
         (adr2idx idx (adr (state (MkMessage s)))))
  <span class="kr">with</span>
  | <span class="nb">left</span> Ha =&gt;
      Some (dexist (adr (state (MkMessage s))) Ha)
  | <span class="nb">right</span> _ =&gt; None
  <span class="kr">end</span> = Some i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk18e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk18e"><span class="nb">erewrite</span> MO_reachable_adr <span class="bp">by</span> <span class="bp">done</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm (M i)) s</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid Send (s, None)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition Send (s, None) =
(s &lt;+&gt; MkObservation Send (MkMessage s),
 Some (MkMessage s))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_map (Message_sender_index idx)
  <span class="kr">match</span> decide (is_Some (adr2idx idx (idx i))) <span class="kr">with</span>
  | <span class="nb">left</span> Ha =&gt; Some (dexist (idx i) Ha)
  | <span class="nb">right</span> _ =&gt; None
  <span class="kr">end</span> = Some i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk18f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk18f">case_decide <span class="kr">as</span> Hadr; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm (M i)) s</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid Send (s, None)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition Send (s, None) =
(s &lt;+&gt; MkObservation Send (MkMessage s),
 Some (MkMessage s))</span></span></span><br><span><var>Hadr</var><span class="hyp-type"><b>: </b><span>is_Some (adr2idx idx (idx i))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Some (Message_sender_index idx (dexist (idx i) Hadr)) =
Some i</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk190" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm (M i)) s</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid Send (s, None)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition Send (s, None) =
(s &lt;+&gt; MkObservation Send (MkMessage s),
 Some (MkMessage s))</span></span></span><br><span><var>Hadr</var><span class="hyp-type"><b>: </b><span>¬¨ is_Some (adr2idx idx (idx i))</span></span></span><br></div><label class="goal-separator" for="MO-v-chk190"><hr></label><div class="goal-conclusion">None = Some i</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk191" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk191">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm (M i)) s</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid Send (s, None)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition Send (s, None) =
(s &lt;+&gt; MkObservation Send (MkMessage s),
 Some (MkMessage s))</span></span></span><br><span><var>Hadr</var><span class="hyp-type"><b>: </b><span>is_Some (adr2idx idx (idx i))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Some (Message_sender_index idx (dexist (idx i) Hadr)) =
Some i</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">f_equal</span>; <span class="nb">apply</span> Message_sender_index_inv.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk192" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk192">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm (M i)) s</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid Send (s, None)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition Send (s, None) =
(s &lt;+&gt; MkObservation Send (MkMessage s),
 Some (MkMessage s))</span></span></span><br><span><var>Hadr</var><span class="hyp-type"><b>: </b><span>¬¨ is_Some (adr2idx idx (idx i))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">None = Some i</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="bp">contradict</span> Hadr; <span class="nb">rewrite</span> adr2idx_idx.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk193" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk193"><span class="kn">Lemma</span> <span class="nf">cannot_resend_message_stepwise_MO_component</span> <span class="nv">i</span> :
  cannot_resend_message_stepwise_prop (M i).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">cannot_resend_message_stepwise_prop (M i)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk194" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk194"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">cannot_resend_message_stepwise_prop (M i)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk195" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk195"><span class="nb">intros</span> ? * [(Hs &amp; _ &amp; Hv) Ht];
    <span class="nb">inversion</span> Hv; <span class="nb">subst</span>; <span class="nb">inversion</span> Ht; <span class="nb">subst</span>;
    <span class="nb">simpl</span>; <span class="nb">split</span>; <span class="nb">intros</span> Hobs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm (M i)) s</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid Send (s, None)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition Send (s, None) =
(s &lt;+&gt; MkObservation Send (MkMessage s),
 Some (MkMessage s))</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>MkMessage s ‚àà sentMessages s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk196" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm (M i)) s</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid Send (s, None)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition Send (s, None) =
(s &lt;+&gt; MkObservation Send (MkMessage s),
 Some (MkMessage s))</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>MkMessage s
‚àà receivedMessages
    (s &lt;+&gt; MkObservation Send (MkMessage s))</span></span></span><br></div><label class="goal-separator" for="MO-v-chk196"><hr></label><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk197" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk197">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm (M i)) s</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid Send (s, None)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition Send (s, None) =
(s &lt;+&gt; MkObservation Send (MkMessage s),
 Some (MkMessage s))</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>MkMessage s ‚àà sentMessages s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> elem_of_sentMessages, obs_sizeState <span class="kr">in</span> Hobs; <span class="nb">cbn</span> <span class="kr">in</span> Hobs; <span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk198" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk198">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm (M i)) s</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid Send (s, None)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition Send (s, None) =
(s &lt;+&gt; MkObservation Send (MkMessage s),
 Some (MkMessage s))</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>MkMessage s
‚àà receivedMessages
    (s &lt;+&gt; MkObservation Send (MkMessage s))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk199" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk199"><span class="nb">rewrite</span> receivedMessages_addObservation, decide_False <span class="kr">in</span> Hobs <span class="bp">by</span> (<span class="nb">intro</span>; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm (M i)) s</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid Send (s, None)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition Send (s, None) =
(s &lt;+&gt; MkObservation Send (MkMessage s),
 Some (MkMessage s))</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>MkMessage s ‚àà receivedMessages s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> elem_of_receivedMessages, obs_sizeState <span class="kr">in</span> Hobs; <span class="nb">cbn</span> <span class="kr">in</span> Hobs; <span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk19a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk19a">#[export] <span class="kn">Instance</span> <span class="nf">MessageDependencies_MO_component</span> <span class="nv">i</span> :
  MessageDependencies (M i) Message_dependencies.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MessageDependencies (M i) Message_dependencies</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk19b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk19b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MessageDependencies (M i) Message_dependencies</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk19c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk19c"><span class="nb">constructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">m</span> : Message) (<span class="nv">s&#39;</span> : VLSM.state
                        (preloaded_with_all_messages_vlsm
                           (M i))),
  can_produce (preloaded_with_all_messages_vlsm (M i))
    s&#39; m
  ‚Üí message_dependencies_full_node_condition (M i)
      Message_dependencies s&#39; m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk19d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><label class="goal-separator" for="MO-v-chk19d"><hr></label><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message,
  can_emit (preloaded_with_all_messages_vlsm (M i)) m
  ‚Üí can_emit
      (preloaded_vlsm (M i)
         (<span class="kr">Œª</span> <span class="nv">msg</span> : Message,
            msg ‚àà Message_dependencies m)) m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk19e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk19e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">m</span> : Message) (<span class="nv">s&#39;</span> : VLSM.state
                        (preloaded_with_all_messages_vlsm
                           (M i))),
  can_produce (preloaded_with_all_messages_vlsm (M i))
    s&#39; m
  ‚Üí message_dependencies_full_node_condition (M i)
      Message_dependencies s&#39; m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk19f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk19f"><span class="nb">intros</span> m s&#39; ((s, iom) &amp; l &amp; [(_ &amp; _ &amp; Hv) Ht]) dm Hdm; <span class="nb">cbn</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>s', s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Label</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>MO_component_valid P&#39; l s iom</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>UMO_component_transition l s iom = (s&#39;, Some m)</span></span></span><br><span><var>dm</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hdm</var><span class="hyp-type"><b>: </b><span>dm ‚àà Message_dependencies m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_directly_observed_from_sent_received (M i) s&#39;
  dm</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1a0" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1a0"><span class="nb">apply</span> elem_of_list_to_set, elem_of_list_fmap <span class="kr">in</span> Hdm <span class="kr">as</span> (o &amp; -&gt; &amp; Hy).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>s', s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Label</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>MO_component_valid P&#39; l s iom</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>UMO_component_transition l s iom = (s&#39;, Some m)</span></span></span><br><span><var>o</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>Hy</var><span class="hyp-type"><b>: </b><span>o ‚àà obs (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_directly_observed_from_sent_received (M i) s&#39;
  (message o)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1a1" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1a1"><span class="nb">inversion</span> Hv; <span class="nb">subst</span>; <span class="nb">inversion</span> Ht; <span class="nb">subst</span>; <span class="nb">cbn</span> <span class="kr">in</span> *; <span class="nb">clear</span> Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>MO_component_valid P&#39; Send s None</span></span></span><br><span><var>o</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>Hy</var><span class="hyp-type"><b>: </b><span>o ‚àà obs s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_directly_observed_from_sent_received (M i)
  (s &lt;+&gt; MkObservation Send (MkMessage s)) (message o)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1a2" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1a2"><span class="nb">red</span>; <span class="nb">unfold</span> Message; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>MO_component_valid P&#39; Send s None</span></span></span><br><span><var>o</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>Hy</var><span class="hyp-type"><b>: </b><span>o ‚àà obs s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">message o
‚àà sentMessages
    (s &lt;+&gt; MkObservation Send (MkMessage s))
‚à® message o
  ‚àà receivedMessages
      (s &lt;+&gt; MkObservation Send (MkMessage s))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1a3" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1a3"><span class="nb">destruct</span> o <span class="kr">as</span> [[] ?].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>MO_component_valid P&#39; Send s None</span></span></span><br><span><var>message</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>Hy</var><span class="hyp-type"><b>: </b><span>MkObservation Receive message ‚àà obs s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">BaseELMO.message (MkObservation Receive message)
‚àà sentMessages
    (s &lt;+&gt; MkObservation Send (MkMessage s))
‚à® BaseELMO.message (MkObservation Receive message)
  ‚àà receivedMessages
      (s &lt;+&gt; MkObservation Send (MkMessage s))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk1a4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>MO_component_valid P&#39; Send s None</span></span></span><br><span><var>message</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>Hy</var><span class="hyp-type"><b>: </b><span>MkObservation Send message ‚àà obs s</span></span></span><br></div><label class="goal-separator" for="MO-v-chk1a4"><hr></label><div class="goal-conclusion">BaseELMO.message (MkObservation Send message)
‚àà sentMessages
    (s &lt;+&gt; MkObservation Send (MkMessage s))
‚à® BaseELMO.message (MkObservation Send message)
  ‚àà receivedMessages
      (s &lt;+&gt; MkObservation Send (MkMessage s))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1a5" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1a5">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>MO_component_valid P&#39; Send s None</span></span></span><br><span><var>message</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>Hy</var><span class="hyp-type"><b>: </b><span>MkObservation Receive message ‚àà obs s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">BaseELMO.message (MkObservation Receive message)
‚àà sentMessages
    (s &lt;+&gt; MkObservation Send (MkMessage s))
‚à® BaseELMO.message (MkObservation Receive message)
  ‚àà receivedMessages
      (s &lt;+&gt; MkObservation Send (MkMessage s))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1a6" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1a6"><span class="nb">right</span>; <span class="nb">apply</span> elem_of_receivedMessages_addObservation.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>MO_component_valid P&#39; Send s None</span></span></span><br><span><var>message</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>Hy</var><span class="hyp-type"><b>: </b><span>MkObservation Receive message ‚àà obs s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">BaseELMO.message (MkObservation Receive message) =
BaseELMO.message (MkObservation Send (MkMessage s))
‚àß isReceive (MkObservation Send (MkMessage s))
‚à® BaseELMO.message (MkObservation Receive message)
  ‚àà receivedMessages s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">right</span>; <span class="nb">apply</span> elem_of_receivedMessages.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1a7" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1a7">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>MO_component_valid P&#39; Send s None</span></span></span><br><span><var>message</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>Hy</var><span class="hyp-type"><b>: </b><span>MkObservation Send message ‚àà obs s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">BaseELMO.message (MkObservation Send message)
‚àà sentMessages
    (s &lt;+&gt; MkObservation Send (MkMessage s))
‚à® BaseELMO.message (MkObservation Send message)
  ‚àà receivedMessages
      (s &lt;+&gt; MkObservation Send (MkMessage s))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1a8" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1a8"><span class="nb">left</span>; <span class="nb">apply</span> elem_of_sentMessages_addObservation.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>MO_component_valid P&#39; Send s None</span></span></span><br><span><var>message</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>Hy</var><span class="hyp-type"><b>: </b><span>MkObservation Send message ‚àà obs s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">BaseELMO.message (MkObservation Send message) =
BaseELMO.message (MkObservation Send (MkMessage s))
‚àß isSend (MkObservation Send (MkMessage s))
‚à® BaseELMO.message (MkObservation Send message)
  ‚àà sentMessages s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">right</span>; <span class="nb">apply</span> elem_of_sentMessages.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1a9" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1a9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message,
  can_emit (preloaded_with_all_messages_vlsm (M i)) m
  ‚Üí can_emit
      (preloaded_vlsm (M i)
         (<span class="kr">Œª</span> <span class="nv">msg</span> : Message,
            msg ‚àà Message_dependencies m)) m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1aa" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1aa"><span class="nb">intros</span> m Hm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>can_emit (preloaded_with_all_messages_vlsm (M i))
  m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">can_emit
  (preloaded_vlsm (M i)
     (<span class="kr">Œª</span> <span class="nv">msg</span> : Message, msg ‚àà Message_dependencies m))
  m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1ab" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1ab"><span class="nb">apply</span> can_emit_has_trace <span class="kr">in</span> Hm <span class="kr">as</span> (<span class="kr">is</span> &amp; tr &amp; item &amp; Htr &amp; Houtput).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm (M i)) <span class="kr">is</span>
  (tr ++ [item])</span></span></span><br><span><var>Houtput</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">can_emit
  (preloaded_vlsm (M i)
     (<span class="kr">Œª</span> <span class="nv">msg</span> : Message, msg ‚àà Message_dependencies m))
  m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1ac" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1ac"><span class="nb">apply</span> (can_emit_from_valid_trace
      (preloaded_vlsm (M i) (<span class="kr">fun</span> <span class="nv">msg</span> : Message =&gt; msg ‚àà Message_dependencies m)))
      <span class="kr">with</span> <span class="kr">is</span> (tr ++ [item]); <span class="nb">cycle</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm (M i)) <span class="kr">is</span>
  (tr ++ [item])</span></span></span><br><span><var>Houtput</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message (field_selector output) m
  (tr ++ [item])</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk1ad" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm (M i)) <span class="kr">is</span>
  (tr ++ [item])</span></span></span><br><span><var>Houtput</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br></div><label class="goal-separator" for="MO-v-chk1ad"><hr></label><div class="goal-conclusion">finite_valid_trace
  (preloaded_vlsm (M i)
     (<span class="kr">Œª</span> <span class="nv">msg</span> : Message, msg ‚àà Message_dependencies m))
  <span class="kr">is</span> (tr ++ [item])</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1ae" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1ae">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm (M i)) <span class="kr">is</span>
  (tr ++ [item])</span></span></span><br><span><var>Houtput</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message (field_selector output) m
  (tr ++ [item])</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1af" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1af"><span class="nb">apply</span> Exists_exists; <span class="nb">eexists</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm (M i)) <span class="kr">is</span>
  (tr ++ [item])</span></span></span><br><span><var>Houtput</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="nl">?x</span> ‚àà tr ++ [item] ‚àß field_selector output m <span class="nl">?x</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">split</span>; [<span class="nb">apply</span> elem_of_app; <span class="nb">right</span>; <span class="nb">left</span> |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1b0" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1b0">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm (M i)) <span class="kr">is</span>
  (tr ++ [item])</span></span></span><br><span><var>Houtput</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace
  (preloaded_vlsm (M i)
     (<span class="kr">Œª</span> <span class="nv">msg</span> : Message, msg ‚àà Message_dependencies m))
  <span class="kr">is</span> (tr ++ [item])</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1b1" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1b1"><span class="nb">eapply</span> lift_preloaded_trace_to_seeded;
        [<span class="bp">by</span> <span class="nb">apply</span> cannot_resend_message_stepwise_MO_component | | <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm (M i)) <span class="kr">is</span>
  (tr ++ [item])</span></span></span><br><span><var>Houtput</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_received_not_sent_before_or_after_invariant
  (tr ++ [item])
  (<span class="kr">Œª</span> <span class="nv">msg</span> : Message, msg ‚àà Message_dependencies m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1b2" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1b2"><span class="nb">intros</span> dm [Hrcv Hnsnd].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm (M i)) <span class="kr">is</span>
  (tr ++ [item])</span></span></span><br><span><var>Houtput</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>dm</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hrcv</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) dm
  (tr ++ [item])</span></span></span><br><span><var>Hnsnd</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output) dm
    (tr ++ [item])</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">dm ‚àà Message_dependencies m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1b3" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1b3"><span class="nb">apply</span> elem_of_list_to_set, elem_of_list_fmap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm (M i)) <span class="kr">is</span>
  (tr ++ [item])</span></span></span><br><span><var>Houtput</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>dm</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hrcv</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) dm
  (tr ++ [item])</span></span></span><br><span><var>Hnsnd</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output) dm
    (tr ++ [item])</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">y</span> : BaseELMO.Observation,
  dm = message y ‚àß y ‚àà obs (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1b4" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1b4"><span class="kr">exists</span> (<span class="nv">MkObservation</span> <span class="nv">Receive</span> <span class="nv">dm</span>); <span class="nb">split</span>; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm (M i)) <span class="kr">is</span>
  (tr ++ [item])</span></span></span><br><span><var>Houtput</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>dm</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hrcv</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) dm
  (tr ++ [item])</span></span></span><br><span><var>Hnsnd</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output) dm
    (tr ++ [item])</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MkObservation Receive dm ‚àà obs (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1b5" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1b5"><span class="nb">apply</span> elem_of_receivedMessages.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm (M i)) <span class="kr">is</span>
  (tr ++ [item])</span></span></span><br><span><var>Houtput</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>dm</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hrcv</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) dm
  (tr ++ [item])</span></span></span><br><span><var>Hnsnd</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output) dm
    (tr ++ [item])</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">dm ‚àà receivedMessages (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1b6" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1b6"><span class="nb">destruct</span> Htr <span class="kr">as</span> [Htr His].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  (preloaded_with_all_messages_vlsm (M i)) <span class="kr">is</span>
  (tr ++ [item])</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>Houtput</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>dm</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hrcv</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) dm
  (tr ++ [item])</span></span></span><br><span><var>Hnsnd</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output) dm
    (tr ++ [item])</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">dm ‚àà receivedMessages (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1b7" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1b7"><span class="nb">apply</span> finite_valid_trace_from_app_iff <span class="kr">in</span> Htr <span class="kr">as</span> [Htr Hitem].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  (preloaded_with_all_messages_vlsm (M i)) <span class="kr">is</span> tr</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  (preloaded_with_all_messages_vlsm (M i))
  (finite_trace_last <span class="kr">is</span> tr) [item]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>Houtput</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>dm</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hrcv</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) dm
  (tr ++ [item])</span></span></span><br><span><var>Hnsnd</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output) dm
    (tr ++ [item])</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">dm ‚àà receivedMessages (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1b8" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1b8"><span class="nb">apply</span> valid_trace_add_default_last <span class="kr">in</span> Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm (M i)) <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> tr) tr</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from
  (preloaded_with_all_messages_vlsm (M i))
  (finite_trace_last <span class="kr">is</span> tr) [item]</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>Houtput</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>dm</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hrcv</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) dm
  (tr ++ [item])</span></span></span><br><span><var>Hnsnd</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output) dm
    (tr ++ [item])</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">dm ‚àà receivedMessages (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1b9" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1b9"><span class="nb">apply</span> first_transition_valid <span class="kr">in</span> Hitem <span class="kr">as</span> [(_ &amp; _ &amp; Hv) Ht].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm (M i)) <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> tr) tr</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid (l item)
  (finite_trace_last <span class="kr">is</span> tr, input item)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>transition (l item)
  (finite_trace_last <span class="kr">is</span> tr, input item) =
(destination item, output item)</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>Houtput</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>dm</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hrcv</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) dm
  (tr ++ [item])</span></span></span><br><span><var>Hnsnd</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output) dm
    (tr ++ [item])</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">dm ‚àà receivedMessages (state m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1ba" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1ba"><span class="nb">destruct</span> item, l, input; <span class="nb">cbn</span> <span class="kr">in</span> *; <span class="nb">inversion</span> Hv; <span class="nb">subst</span>; <span class="nb">inversion</span> Ht; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm (M i)) <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> tr) tr</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>MO_component_valid P&#39; Send
  (finite_trace_last <span class="kr">is</span> tr) None</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>(finite_trace_last <span class="kr">is</span> tr &lt;+&gt;
 MkObservation Send
   (MkMessage (finite_trace_last <span class="kr">is</span> tr)),
 Some (MkMessage (finite_trace_last <span class="kr">is</span> tr))) =
(finite_trace_last <span class="kr">is</span> tr &lt;+&gt;
 MkObservation Send
   (MkMessage (finite_trace_last <span class="kr">is</span> tr)),
 Some (MkMessage (finite_trace_last <span class="kr">is</span> tr)))</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>UMO_component_initial_state_prop (idx i) <span class="kr">is</span></span></span></span><br><span><var>dm</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hnsnd</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output) dm
    (tr ++
     [{|
        l := Send;
        input := None;
        destination :=
          finite_trace_last <span class="kr">is</span> tr &lt;+&gt;
          MkObservation Send
            (MkMessage
               (finite_trace_last <span class="kr">is</span> tr));
        output :=
          Some
            (MkMessage
               (finite_trace_last <span class="kr">is</span> tr))
      |}])</span></span></span><br><span><var>Hrcv</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) dm
  (tr ++
   [{|
      l := Send;
      input := None;
      destination :=
        finite_trace_last <span class="kr">is</span> tr &lt;+&gt;
        MkObservation Send
          (MkMessage (finite_trace_last <span class="kr">is</span> tr));
      output :=
        Some
          (MkMessage (finite_trace_last <span class="kr">is</span> tr))
    |}])</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">dm
‚àà receivedMessages
    (state (MkMessage (finite_trace_last <span class="kr">is</span> tr)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1bb" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1bb"><span class="nb">clear</span> Hv Ht Hnsnd; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm (M i)) <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> tr) tr</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>UMO_component_initial_state_prop (idx i) <span class="kr">is</span></span></span></span><br><span><var>dm</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hrcv</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) dm
  (tr ++
   [{|
      l := Send;
      input := None;
      destination :=
        finite_trace_last <span class="kr">is</span> tr &lt;+&gt;
        MkObservation Send
          (MkMessage (finite_trace_last <span class="kr">is</span> tr));
      output :=
        Some
          (MkMessage (finite_trace_last <span class="kr">is</span> tr))
    |}])</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">dm ‚àà receivedMessages (finite_trace_last <span class="kr">is</span> tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1bc" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1bc"><span class="nb">assert</span> (Hrcv&#39; : trace_has_message (field_selector input) dm tr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm (M i)) <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> tr) tr</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>UMO_component_initial_state_prop (idx i) <span class="kr">is</span></span></span></span><br><span><var>dm</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hrcv</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) dm
  (tr ++
   [{|
      l := Send;
      input := None;
      destination :=
        finite_trace_last <span class="kr">is</span> tr &lt;+&gt;
        MkObservation Send
          (MkMessage (finite_trace_last <span class="kr">is</span> tr));
      output :=
        Some
          (MkMessage (finite_trace_last <span class="kr">is</span> tr))
    |}])</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message (field_selector input) dm tr</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk1bd" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm (M i)) <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> tr) tr</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>UMO_component_initial_state_prop (idx i) <span class="kr">is</span></span></span></span><br><span><var>dm</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hrcv</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) dm
  (tr ++
   [{|
      l := Send;
      input := None;
      destination :=
        finite_trace_last <span class="kr">is</span> tr &lt;+&gt;
        MkObservation Send
          (MkMessage (finite_trace_last <span class="kr">is</span> tr));
      output :=
        Some
          (MkMessage (finite_trace_last <span class="kr">is</span> tr))
    |}])</span></span></span><br><span><var>Hrcv'</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) dm tr</span></span></span><br></div><label class="goal-separator" for="MO-v-chk1bd"><hr></label><div class="goal-conclusion">dm ‚àà receivedMessages (finite_trace_last <span class="kr">is</span> tr)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1be" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1be">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm (M i)) <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> tr) tr</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>UMO_component_initial_state_prop (idx i) <span class="kr">is</span></span></span></span><br><span><var>dm</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hrcv</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) dm
  (tr ++
   [{|
      l := Send;
      input := None;
      destination :=
        finite_trace_last <span class="kr">is</span> tr &lt;+&gt;
        MkObservation Send
          (MkMessage (finite_trace_last <span class="kr">is</span> tr));
      output :=
        Some
          (MkMessage (finite_trace_last <span class="kr">is</span> tr))
    |}])</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message (field_selector input) dm tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1bf" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1bf"><span class="nb">apply</span> Exists_exists <span class="kr">in</span> Hrcv <span class="kr">as</span> (dm_item &amp; Hdm_item &amp; Hdm).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm (M i)) <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> tr) tr</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>UMO_component_initial_state_prop (idx i) <span class="kr">is</span></span></span></span><br><span><var>dm</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>dm_item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hdm_item</var><span class="hyp-type"><b>: </b><span>dm_item
‚àà tr ++
  [{|
     l := Send;
     input := None;
     destination :=
       finite_trace_last <span class="kr">is</span> tr &lt;+&gt;
       MkObservation Send
         (MkMessage
            (finite_trace_last <span class="kr">is</span> tr));
     output :=
       Some
         (MkMessage
            (finite_trace_last <span class="kr">is</span> tr))
   |}]</span></span></span><br><span><var>Hdm</var><span class="hyp-type"><b>: </b><span>field_selector input dm dm_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message (field_selector input) dm tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1c0" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1c0"><span class="nb">rewrite</span> elem_of_app, elem_of_list_singleton <span class="kr">in</span> Hdm_item.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm (M i)) <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> tr) tr</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>UMO_component_initial_state_prop (idx i) <span class="kr">is</span></span></span></span><br><span><var>dm</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>dm_item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hdm_item</var><span class="hyp-type"><b>: </b><span>dm_item ‚àà tr
‚à® dm_item =
  {|
    l := Send;
    input := None;
    destination :=
      finite_trace_last <span class="kr">is</span> tr &lt;+&gt;
      MkObservation Send
        (MkMessage
           (finite_trace_last <span class="kr">is</span> tr));
    output :=
      Some
        (MkMessage
           (finite_trace_last <span class="kr">is</span> tr))
  |}</span></span></span><br><span><var>Hdm</var><span class="hyp-type"><b>: </b><span>field_selector input dm dm_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message (field_selector input) dm tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1c1" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1c1"><span class="nb">destruct</span> Hdm_item <span class="kr">as</span> [Hdm_item | -&gt;]; <span class="nb">cbn</span> <span class="kr">in</span> Hdm; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm (M i)) <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> tr) tr</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>UMO_component_initial_state_prop (idx i) <span class="kr">is</span></span></span></span><br><span><var>dm</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>dm_item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hdm_item</var><span class="hyp-type"><b>: </b><span>dm_item ‚àà tr</span></span></span><br><span><var>Hdm</var><span class="hyp-type"><b>: </b><span>input dm_item = Some dm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message (field_selector input) dm tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> Exists_exists; <span class="nb">eexists</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1c2" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1c2">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm (M i)) <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> tr) tr</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>UMO_component_initial_state_prop (idx i) <span class="kr">is</span></span></span></span><br><span><var>dm</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hrcv</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) dm
  (tr ++
   [{|
      l := Send;
      input := None;
      destination :=
        finite_trace_last <span class="kr">is</span> tr &lt;+&gt;
        MkObservation Send
          (MkMessage (finite_trace_last <span class="kr">is</span> tr));
      output :=
        Some
          (MkMessage (finite_trace_last <span class="kr">is</span> tr))
    |}])</span></span></span><br><span><var>Hrcv'</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) dm tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">dm ‚àà receivedMessages (finite_trace_last <span class="kr">is</span> tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> @has_been_received_examine_one_trace <span class="kr">with</span> (vlsm := M i) <span class="kr">in</span> Hrcv&#39;; <span class="nb">cycle</span> <span class="mi">1</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1c3" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1c3"><span class="kn">Lemma</span> <span class="nf">MO_msg_valid_free</span> :
  <span class="kr">forall</span> (<span class="nv">m</span> : Message),
    MO_msg_valid P&#39; m -&gt;
    free_valid_message M Message_dependencies m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message,
  MO_msg_valid P&#39; m
  ‚Üí free_valid_message M Message_dependencies m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1c4" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1c4"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : Message,
  MO_msg_valid P&#39; m
  ‚Üí free_valid_message M Message_dependencies m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1c5" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1c5"><span class="nb">induction</span> m <span class="kr">as</span> (m &amp; Hind) <span class="nb">using</span> (well_founded_ind
    (msg_dep_happens_before_wf Message_dependencies Message_full_dependencies _)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>Hind</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  msg_dep_happens_before Message_dependencies y
    m
  ‚Üí MO_msg_valid P&#39; y
    ‚Üí free_valid_message M Message_dependencies
        y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MO_msg_valid P&#39; m
‚Üí free_valid_message M Message_dependencies m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1c6" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1c6"><span class="nb">intros</span> Hm; <span class="nb">constructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>Hind</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  msg_dep_happens_before Message_dependencies y
    m
  ‚Üí MO_msg_valid P&#39; y
    ‚Üí free_valid_message M Message_dependencies
        y</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emittable M m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk1c7" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>Hind</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  msg_dep_happens_before Message_dependencies y
    m
  ‚Üí MO_msg_valid P&#39; y
    ‚Üí free_valid_message M Message_dependencies
        y</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; m</span></span></span><br></div><label class="goal-separator" for="MO-v-chk1c7"><hr></label><div class="goal-conclusion">set_Forall (free_valid_message M Message_dependencies)
  (Message_dependencies m)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1c8" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1c8">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>Hind</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  msg_dep_happens_before Message_dependencies y
    m
  ‚Üí MO_msg_valid P&#39; y
    ‚Üí free_valid_message M Message_dependencies
        y</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emittable M m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1c9" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1c9"><span class="nb">remember</span> (adr (state m)) <span class="kr">as</span> a; <span class="nb">symmetry in</span> Heqa.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>Hind</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  msg_dep_happens_before Message_dependencies y
    m
  ‚Üí MO_msg_valid P&#39; y
    ‚Üí free_valid_message M Message_dependencies
        y</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; m</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>Heqa</var><span class="hyp-type"><b>: </b><span>adr (state m) = a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emittable M m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1ca" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1ca"><span class="nb">eapply</span> constrained_state_prop_MO_msg_valid <span class="kr">in</span> Heqa <span class="kr">as</span> Hstate_m; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>Hind</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  msg_dep_happens_before Message_dependencies y
    m
  ‚Üí MO_msg_valid P&#39; y
    ‚Üí free_valid_message M Message_dependencies
        y</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; m</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>Heqa</var><span class="hyp-type"><b>: </b><span>adr (state m) = a</span></span></span><br><span><var>Hstate_m</var><span class="hyp-type"><b>: </b><span>constrained_state_prop 
  (MO_component P&#39; a) (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emittable M m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1cb" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1cb"><span class="nb">apply</span> MO_msg_valid_P_adr <span class="kr">in</span> Hm <span class="kr">as</span> (_  &amp; i &amp; Hi).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>Hind</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  msg_dep_happens_before Message_dependencies y
    m
  ‚Üí MO_msg_valid P&#39; y
    ‚Üí free_valid_message M Message_dependencies
        y</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>idx i = adr (state m)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>Heqa</var><span class="hyp-type"><b>: </b><span>adr (state m) = a</span></span></span><br><span><var>Hstate_m</var><span class="hyp-type"><b>: </b><span>constrained_state_prop 
  (MO_component P&#39; a) (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emittable M m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1cc" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1cc"><span class="nb">rewrite</span> &lt;- Heqa, &lt;- Hi <span class="kr">in</span> Hstate_m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>Hind</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  msg_dep_happens_before Message_dependencies y
    m
  ‚Üí MO_msg_valid P&#39; y
    ‚Üí free_valid_message M Message_dependencies
        y</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>idx i = adr (state m)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>Heqa</var><span class="hyp-type"><b>: </b><span>adr (state m) = a</span></span></span><br><span><var>Hstate_m</var><span class="hyp-type"><b>: </b><span>constrained_state_prop
  (MO_component P&#39; (idx i)) 
  (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emittable M m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1cd" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1cd"><span class="nb">red</span>; <span class="nb">unfold</span> can_emit; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>Hind</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  msg_dep_happens_before Message_dependencies y
    m
  ‚Üí MO_msg_valid P&#39; y
    ‚Üí free_valid_message M Message_dependencies
        y</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>idx i = adr (state m)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>Heqa</var><span class="hyp-type"><b>: </b><span>adr (state m) = a</span></span></span><br><span><var>Hstate_m</var><span class="hyp-type"><b>: </b><span>constrained_state_prop
  (MO_component P&#39; (idx i)) 
  (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">i</span> : index) (<span class="nv">som</span> : BaseELMO.State * option Message) 
  (<span class="nv">l</span> : Label) (<span class="nv">s</span> : BaseELMO.State),
  input_valid_transition
    (preloaded_with_all_messages_vlsm (M i)) l som
    (s, Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1ce" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1ce"><span class="kr">exists</span> <span class="nv">i</span>, (state m, None), Send, (state m &lt;+&gt; MkObservation Send m).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>Hind</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  msg_dep_happens_before Message_dependencies y
    m
  ‚Üí MO_msg_valid P&#39; y
    ‚Üí free_valid_message M Message_dependencies
        y</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>idx i = adr (state m)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>Heqa</var><span class="hyp-type"><b>: </b><span>adr (state m) = a</span></span></span><br><span><var>Hstate_m</var><span class="hyp-type"><b>: </b><span>constrained_state_prop
  (MO_component P&#39; (idx i)) 
  (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition
  (preloaded_with_all_messages_vlsm (M i)) Send
  (state m, None)
  (state m &lt;+&gt; MkObservation Send m, Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1cf" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1cf"><span class="kp">repeat</span> <span class="nb">split</span>; [<span class="bp">done</span> | ..].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>Hind</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  msg_dep_happens_before Message_dependencies y
    m
  ‚Üí MO_msg_valid P&#39; y
    ‚Üí free_valid_message M Message_dependencies
        y</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>idx i = adr (state m)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>Heqa</var><span class="hyp-type"><b>: </b><span>adr (state m) = a</span></span></span><br><span><var>Hstate_m</var><span class="hyp-type"><b>: </b><span>constrained_state_prop
  (MO_component P&#39; (idx i)) 
  (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop
  (preloaded_with_all_messages_vlsm (M i)) None</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk1d0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>Hind</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  msg_dep_happens_before Message_dependencies y
    m
  ‚Üí MO_msg_valid P&#39; y
    ‚Üí free_valid_message M Message_dependencies
        y</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>idx i = adr (state m)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>Heqa</var><span class="hyp-type"><b>: </b><span>adr (state m) = a</span></span></span><br><span><var>Hstate_m</var><span class="hyp-type"><b>: </b><span>constrained_state_prop
  (MO_component P&#39; (idx i)) 
  (state m)</span></span></span><br></div><label class="goal-separator" for="MO-v-chk1d0"><hr></label><div class="goal-conclusion">valid Send (state m, None)</div></blockquote><input class="alectryon-extra-goal-toggle" id="MO-v-chk1d1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>Hind</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  msg_dep_happens_before Message_dependencies y
    m
  ‚Üí MO_msg_valid P&#39; y
    ‚Üí free_valid_message M Message_dependencies
        y</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>idx i = adr (state m)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>Heqa</var><span class="hyp-type"><b>: </b><span>adr (state m) = a</span></span></span><br><span><var>Hstate_m</var><span class="hyp-type"><b>: </b><span>constrained_state_prop
  (MO_component P&#39; (idx i)) 
  (state m)</span></span></span><br></div><label class="goal-separator" for="MO-v-chk1d1"><hr></label><div class="goal-conclusion">transition Send (state m, None) =
(state m &lt;+&gt; MkObservation Send m, Some m)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1d2" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1d2">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>Hind</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  msg_dep_happens_before Message_dependencies y
    m
  ‚Üí MO_msg_valid P&#39; y
    ‚Üí free_valid_message M Message_dependencies
        y</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>idx i = adr (state m)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>Heqa</var><span class="hyp-type"><b>: </b><span>adr (state m) = a</span></span></span><br><span><var>Hstate_m</var><span class="hyp-type"><b>: </b><span>constrained_state_prop
  (MO_component P&#39; (idx i)) 
  (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop
  (preloaded_with_all_messages_vlsm (M i)) None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> any_message_is_valid_in_preloaded.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1d3" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1d3">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>Hind</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  msg_dep_happens_before Message_dependencies y
    m
  ‚Üí MO_msg_valid P&#39; y
    ‚Üí free_valid_message M Message_dependencies
        y</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>idx i = adr (state m)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>Heqa</var><span class="hyp-type"><b>: </b><span>adr (state m) = a</span></span></span><br><span><var>Hstate_m</var><span class="hyp-type"><b>: </b><span>constrained_state_prop
  (MO_component P&#39; (idx i)) 
  (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid Send (state m, None)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1d4" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1d4">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>Hind</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  msg_dep_happens_before Message_dependencies y
    m
  ‚Üí MO_msg_valid P&#39; y
    ‚Üí free_valid_message M Message_dependencies
        y</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>idx i = adr (state m)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>Heqa</var><span class="hyp-type"><b>: </b><span>adr (state m) = a</span></span></span><br><span><var>Hstate_m</var><span class="hyp-type"><b>: </b><span>constrained_state_prop
  (MO_component P&#39; (idx i)) 
  (state m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transition Send (state m, None) =
(state m &lt;+&gt; MkObservation Send m, Some m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> m <span class="kr">as</span> [[]].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1d5" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1d5">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>Hind</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">y</span> : BaseELMO.Message,
  msg_dep_happens_before Message_dependencies y
    m
  ‚Üí MO_msg_valid P&#39; y
    ‚Üí free_valid_message M Message_dependencies
        y</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_Forall (free_valid_message M Message_dependencies)
  (Message_dependencies m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> dm Hdm; <span class="nb">apply</span> Hind; [<span class="nb">constructor</span> | <span class="nb">eapply</span> MO_msg_valid_dep].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1d6" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1d6"><span class="kn">Lemma</span> <span class="nf">MO_component_validating</span> :
  <span class="kr">forall</span> (<span class="nv">i</span> : index),
    component_projection_validator_prop M (free_constraint M) i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_projection_validator_prop M
    (free_constraint M) i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1d7" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1d7"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  component_projection_validator_prop M
    (free_constraint M) i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1d8" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1d8"><span class="nb">intros</span> i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">component_projection_validator_prop M
  (free_constraint M) i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1d9" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1d9"><span class="nb">eapply</span> free_valid_message_yields_projection_validator;
    [<span class="bp">by</span> <span class="nb">apply</span> MO_channel_authentication_prop | <span class="bp">by</span> <span class="nb">typeclasses eauto</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">free_valid_message_condition M Message_dependencies i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1da" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1da"><span class="nb">intros</span> li si m (_ &amp; _ &amp; Hv).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>VLSM.label
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>valid li (si, Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">free_valid_message M Message_dependencies m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1db" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1db"><span class="nb">inversion</span> Hv <span class="kr">as</span> [? ? Hm |]; <span class="nb">subst</span>; <span class="nb">clear</span> i si Hv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>MO_msg_valid P&#39; m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">free_valid_message M Message_dependencies m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> MO_msg_valid_free.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab9"></a><h3 class="section">Equivocation</h3>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1dc" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1dc"><span class="kn">Lemma</span> <span class="nf">rec_obs_input_constrained_transition</span> :
  <span class="kr">forall</span> (<span class="nv">i</span> : index) (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">m1</span> <span class="nv">m2</span> : option Message) (<span class="nv">lbl</span> : Label),
    input_constrained_transition (M i) lbl (s1, m1) (s2, m2) -&gt;
      <span class="kr">forall</span> <span class="nv">ob</span> : Observation, rec_obs s1 ob -&gt; rec_obs s2 ob.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">i</span> : index) (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">m1</span> <span class="nv">m2</span> : option Message) 
  (<span class="nv">lbl</span> : Label),
  input_constrained_transition (M i) lbl (s1, m1)
    (s2, m2)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">ob</span> : Observation, rec_obs s1 ob ‚Üí rec_obs s2 ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1dd" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1dd"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">i</span> : index) (<span class="nv">s1</span> <span class="nv">s2</span> : State) (<span class="nv">m1</span> <span class="nv">m2</span> : option Message) 
  (<span class="nv">lbl</span> : Label),
  input_constrained_transition (M i) lbl (s1, m1)
    (s2, m2)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">ob</span> : Observation, rec_obs s1 ob ‚Üí rec_obs s2 ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1de" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1de"><span class="nb">intros</span> i s1 s2 m1 m2 lbl Hivt ob Hro.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m1, m2</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>lbl</var><span class="hyp-type"><b>: </b><span>Label</span></span></span><br><span><var>Hivt</var><span class="hyp-type"><b>: </b><span>input_constrained_transition 
  (M i) lbl (s1, m1) (s2, m2)</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hro</var><span class="hyp-type"><b>: </b><span>rec_obs s1 ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs s2 ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1df" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1df"><span class="nb">destruct</span> Hivt <span class="kr">as</span> [(_ &amp; _ &amp; Hvalid) Ht]; <span class="nb">cbn</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m1, m2</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>lbl</var><span class="hyp-type"><b>: </b><span>Label</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>MO_component_valid P&#39; lbl s1 m1</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>UMO_component_transition lbl s1 m1 = (s2, m2)</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hro</var><span class="hyp-type"><b>: </b><span>rec_obs s1 ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs s2 ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">inversion</span> Hvalid; <span class="nb">subst</span>; <span class="nb">inversion</span> Ht; <span class="nb">subst</span>; <span class="nb">cbn</span> <span class="kr">in</span> *; <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Record</span> <span class="nf">incomparable_state</span> (<span class="nv">s1</span> <span class="nv">s2</span> : State) : <span class="kt">Prop</span> :=
{
  incs_not_state_suffix12 : ~ state_suffix s1 s2;
  incs_not_state_suffix21 : ~ state_suffix s2 s1;
  incs_not_equal : s1 &lt;&gt; s2;
}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1e0" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1e0"><span class="kn">Lemma</span> <span class="nf">rec_obs_send_inv</span>
  (<span class="nv">Q</span> : State -&gt; Observation -&gt; <span class="kt">Prop</span>) <span class="nv">s</span> <span class="nv">ob</span>
  (<span class="nv">Hnew</span> : Q s (MkObservation Send (MkMessage s)))
  (<span class="nv">Hprev</span> : rec_obs s ob -&gt; Q s ob) :
  rec_obs (s &lt;+&gt; MkObservation Send (MkMessage s)) ob -&gt; Q s ob.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>State ‚Üí Observation ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>Hnew</var><span class="hyp-type"><b>: </b><span>Q s (MkObservation Send (MkMessage s))</span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>rec_obs s ob ‚Üí Q s ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Send (MkMessage s)) ob
‚Üí Q s ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1e1" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1e1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>State ‚Üí Observation ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>Hnew</var><span class="hyp-type"><b>: </b><span>Q s (MkObservation Send (MkMessage s))</span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>rec_obs s ob ‚Üí Q s ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Send (MkMessage s)) ob
‚Üí Q s ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">inversion</span> <span class="mi">1</span>; (<span class="nb">replace</span> s <span class="kr">with</span> s0 <span class="kr">in</span> *; [<span class="nb">auto</span> | <span class="nb">apply</span> eq_State]).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1e2" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1e2"><span class="kn">Lemma</span> <span class="nf">rec_obs_recv_inv</span>
  (<span class="nv">Q</span> : State -&gt; Message -&gt; Observation -&gt; <span class="kt">Prop</span>) <span class="nv">s</span> <span class="nv">m</span> <span class="nv">ob</span>
  (<span class="nv">Hnew</span> : Q s m (MkObservation Receive m))
  (<span class="nv">Hprev</span> : rec_obs s ob -&gt; Q s m ob)
  (<span class="nv">Hrecv</span> : rec_obs (state m) ob -&gt; Q s m ob) :
  rec_obs (s &lt;+&gt; MkObservation Receive m) ob -&gt; Q s m ob.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>State ‚Üí Message ‚Üí Observation ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>Hnew</var><span class="hyp-type"><b>: </b><span>Q s m (MkObservation Receive m)</span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>rec_obs s ob ‚Üí Q s m ob</span></span></span><br><span><var>Hrecv</var><span class="hyp-type"><b>: </b><span>rec_obs (state m) ob ‚Üí Q s m ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Receive m) ob ‚Üí Q s m ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1e3" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1e3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>State ‚Üí Message ‚Üí Observation ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>Hnew</var><span class="hyp-type"><b>: </b><span>Q s m (MkObservation Receive m)</span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>rec_obs s ob ‚Üí Q s m ob</span></span></span><br><span><var>Hrecv</var><span class="hyp-type"><b>: </b><span>rec_obs (state m) ob ‚Üí Q s m ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Receive m) ob ‚Üí Q s m ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">inversion</span> <span class="mi">1</span>; (<span class="nb">replace</span> s <span class="kr">with</span> s0 <span class="kr">in</span> *; [<span class="nb">auto</span> | <span class="nb">apply</span> eq_State]).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1e4" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1e4"><span class="kn">Lemma</span> <span class="nf">rec_obs_addObservation_iff</span> (<span class="nv">s</span> : State) (<span class="nv">ob&#39;</span> <span class="nv">ob</span> : Observation) :
  rec_obs (s &lt;+&gt; ob) ob&#39;
    &lt;-&gt;
  rec_obs s ob&#39; \/ ob&#39; = ob \/ label ob = Receive /\ rec_obs (state (message ob)) ob&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob', ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; ob) ob&#39;
‚Üî rec_obs s ob&#39;
  ‚à® ob&#39; = ob
    ‚à® label ob = Receive
      ‚àß rec_obs (state (message ob)) ob&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1e5" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1e5"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob', ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; ob) ob&#39;
‚Üî rec_obs s ob&#39;
  ‚à® ob&#39; = ob
    ‚à® label ob = Receive
      ‚àß rec_obs (state (message ob)) ob&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1e6" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1e6"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob', ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; ob) ob&#39;
‚Üí rec_obs s ob&#39;
  ‚à® ob&#39; = ob
    ‚à® label ob = Receive
      ‚àß rec_obs (state (message ob)) ob&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk1e7" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob', ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br></div><label class="goal-separator" for="MO-v-chk1e7"><hr></label><div class="goal-conclusion">rec_obs s ob&#39;
‚à® ob&#39; = ob
  ‚à® label ob = Receive
    ‚àß rec_obs (state (message ob)) ob&#39;
‚Üí rec_obs (s &lt;+&gt; ob) ob&#39;</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1e8" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1e8">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob', ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; ob) ob&#39;
‚Üí rec_obs s ob&#39;
  ‚à® ob&#39; = ob
    ‚à® label ob = Receive
      ‚àß rec_obs (state (message ob)) ob&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1e9" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1e9"><span class="nb">inversion</span> <span class="mi">1</span>; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob'</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>rec_obs (s &lt;+&gt; ob&#39;) ob&#39;</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>obs s0 = obs s</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>adr s0 = adr s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs s ob&#39;
‚à® ob&#39; = ob&#39;
  ‚à® label ob&#39; = Receive
    ‚àß rec_obs (state (message ob&#39;)) ob&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk1ea" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob', ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>rec_obs (s &lt;+&gt; ob) ob&#39;</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>rec_obs s0 ob&#39;</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>obs s0 = obs s</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>adr s0 = adr s</span></span></span><br></div><label class="goal-separator" for="MO-v-chk1ea"><hr></label><div class="goal-conclusion">rec_obs s ob&#39;
‚à® ob&#39; = ob
  ‚à® label ob = Receive
    ‚àß rec_obs (state (message ob)) ob&#39;</div></blockquote><input class="alectryon-extra-goal-toggle" id="MO-v-chk1eb" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob'</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>rec_obs (s &lt;+&gt; MkObservation Receive m) ob&#39;</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>rec_obs (state m) ob&#39;</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>obs s0 = obs s</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>adr s0 = adr s</span></span></span><br></div><label class="goal-separator" for="MO-v-chk1eb"><hr></label><div class="goal-conclusion">rec_obs s ob&#39;
‚à® ob&#39; = MkObservation Receive m
  ‚à® label (MkObservation Receive m) = Receive
    ‚àß rec_obs
        (state (message (MkObservation Receive m)))
        ob&#39;</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1ec" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1ec">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob'</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>rec_obs (s &lt;+&gt; ob&#39;) ob&#39;</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>obs s0 = obs s</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>adr s0 = adr s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs s ob&#39;
‚à® ob&#39; = ob&#39;
  ‚à® label ob&#39; = Receive
    ‚àß rec_obs (state (message ob&#39;)) ob&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">right</span>; <span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1ed" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1ed">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob', ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>rec_obs (s &lt;+&gt; ob) ob&#39;</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>rec_obs s0 ob&#39;</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>obs s0 = obs s</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>adr s0 = adr s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs s ob&#39;
‚à® ob&#39; = ob
  ‚à® label ob = Receive
    ‚àß rec_obs (state (message ob)) ob&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">left</span>; <span class="nb">replace</span> s <span class="kr">with</span> s0 <span class="bp">by</span> (<span class="nb">apply</span> eq_State; <span class="bp">done</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1ee" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1ee">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob'</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>rec_obs (s &lt;+&gt; MkObservation Receive m) ob&#39;</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>rec_obs (state m) ob&#39;</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>obs s0 = obs s</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>adr s0 = adr s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs s ob&#39;
‚à® ob&#39; = MkObservation Receive m
  ‚à® label (MkObservation Receive m) = Receive
    ‚àß rec_obs
        (state (message (MkObservation Receive m)))
        ob&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">right</span>; <span class="nb">right</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1ef" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1ef">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob', ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs s ob&#39;
‚à® ob&#39; = ob
  ‚à® label ob = Receive
    ‚àß rec_obs (state (message ob)) ob&#39;
‚Üí rec_obs (s &lt;+&gt; ob) ob&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1f0" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1f0"><span class="nb">destruct</span> <span class="mi">1</span> <span class="kr">as</span> [Hprev | [-&gt; | Hob]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob', ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>rec_obs s ob&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; ob) ob&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk1f1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br></div><label class="goal-separator" for="MO-v-chk1f1"><hr></label><div class="goal-conclusion">rec_obs (s &lt;+&gt; ob) ob</div></blockquote><input class="alectryon-extra-goal-toggle" id="MO-v-chk1f2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob', ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>label ob = Receive
‚àß rec_obs (state (message ob)) ob&#39;</span></span></span><br></div><label class="goal-separator" for="MO-v-chk1f2"><hr></label><div class="goal-conclusion">rec_obs (s &lt;+&gt; ob) ob&#39;</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1f3" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1f3">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob', ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>rec_obs s ob&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; ob) ob&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> rec_prev.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1f4" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1f4">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; ob) ob</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> rec_new.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1f5" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1f5">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob', ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>label ob = Receive
‚àß rec_obs (state (message ob)) ob&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; ob) ob&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1f6" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1f6"><span class="nb">destruct</span> ob <span class="kr">as</span> [l m]; <span class="nb">cbn</span> <span class="kr">in</span> Hob.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob'</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Label</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>l = Receive ‚àß rec_obs (state m) ob&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation l m) ob&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1f7" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1f7"><span class="nb">destruct</span> Hob <span class="kr">as</span> [-&gt; Hm].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob'</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>rec_obs (state m) ob&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Receive m) ob&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> rec_recv.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1f8" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1f8"><span class="kn">Lemma</span> <span class="nf">unfold_rec_obs</span> :
  <span class="kr">forall</span> (<span class="nv">s</span> : State) (<span class="nv">ob</span> : Observation),
    rec_obs s ob
      &lt;-&gt;
    ob ‚àà obs s \/ <span class="kr">exists</span> <span class="nv">m</span>, MkObservation Receive m ‚àà obs s /\ rec_obs (state m) ob.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : State) (<span class="nv">ob</span> : Observation),
  rec_obs s ob
  ‚Üî ob ‚àà obs s
    ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
         MkObservation Receive m ‚àà obs s
         ‚àß rec_obs (state m) ob)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1f9" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1f9"><span class="kn">Proof using</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : State) (<span class="nv">ob</span> : Observation),
  rec_obs s ob
  ‚Üî ob ‚àà obs s
    ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
         MkObservation Receive m ‚àà obs s
         ‚àß rec_obs (state m) ob)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1fa" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1fa"><span class="nb">clear</span>. <span class="c">(* avoid unneccessary dependence on section variables *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : State) (<span class="nv">ob</span> : Observation),
  rec_obs s ob
  ‚Üî ob ‚àà obs s
    ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
         MkObservation Receive m ‚àà obs s
         ‚àß rec_obs (state m) ob)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1fb" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1fb"><span class="nb">intros</span> s ob; <span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
       MkObservation Receive m ‚àà obs s
       ‚àß rec_obs (state m) ob)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk1fc" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br></div><label class="goal-separator" for="MO-v-chk1fc"><hr></label><div class="goal-conclusion">ob ‚àà obs s
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
     MkObservation Receive m ‚àà obs s
     ‚àß rec_obs (state m) ob) ‚Üí 
rec_obs s ob</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1fd" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1fd">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
       MkObservation Receive m ‚àà obs s
       ‚àß rec_obs (state m) ob)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk1fe" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk1fe"><span class="nb">induction</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>rec_obs (s &lt;+&gt; ob) ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; ob)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
     MkObservation Receive m ‚àà obs (s &lt;+&gt; ob)
     ‚àß rec_obs (state m) ob)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk1ff" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>ob', ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>rec_obs (s &lt;+&gt; ob&#39;) ob</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>rec_obs s ob</span></span></span><br><span><var>IHr</var><span class="hyp-type"><b>: </b><span>rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
       MkObservation Receive m ‚àà obs s
       ‚àß rec_obs (state m) ob)</span></span></span><br></div><label class="goal-separator" for="MO-v-chk1ff"><hr></label><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; ob&#39;)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
     MkObservation Receive m ‚àà obs (s &lt;+&gt; ob&#39;)
     ‚àß rec_obs (state m) ob)</div></blockquote><input class="alectryon-extra-goal-toggle" id="MO-v-chk200" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>rec_obs (s &lt;+&gt; MkObservation Receive m) ob</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>rec_obs (state m) ob</span></span></span><br><span><var>IHr</var><span class="hyp-type"><b>: </b><span>rec_obs (state m) ob
‚Üí ob ‚àà obs (state m)
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m0</span> : BaseELMO.Message,
       MkObservation Receive m0 ‚àà obs (state m)
       ‚àß rec_obs (state m0) ob)</span></span></span><br></div><label class="goal-separator" for="MO-v-chk200"><hr></label><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; MkObservation Receive m)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m0</span> : BaseELMO.Message,
     MkObservation Receive m0
     ‚àà obs (s &lt;+&gt; MkObservation Receive m)
     ‚àß rec_obs (state m0) ob)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk201" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk201">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>rec_obs (s &lt;+&gt; ob) ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; ob)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
     MkObservation Receive m ‚àà obs (s &lt;+&gt; ob)
     ‚àß rec_obs (state m) ob)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">left</span>; <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk202" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk202">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>ob', ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>rec_obs (s &lt;+&gt; ob&#39;) ob</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>rec_obs s ob</span></span></span><br><span><var>IHr</var><span class="hyp-type"><b>: </b><span>rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
       MkObservation Receive m ‚àà obs s
       ‚àß rec_obs (state m) ob)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; ob&#39;)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
     MkObservation Receive m ‚àà obs (s &lt;+&gt; ob&#39;)
     ‚àß rec_obs (state m) ob)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">setoid_rewrite</span> elem_of_addObservation; <span class="nb">firstorder</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk203" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk203">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>rec_obs (s &lt;+&gt; MkObservation Receive m) ob</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>rec_obs (state m) ob</span></span></span><br><span><var>IHr</var><span class="hyp-type"><b>: </b><span>rec_obs (state m) ob
‚Üí ob ‚àà obs (state m)
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m0</span> : BaseELMO.Message,
       MkObservation Receive m0 ‚àà obs (state m)
       ‚àß rec_obs (state m0) ob)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; MkObservation Receive m)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m0</span> : BaseELMO.Message,
     MkObservation Receive m0
     ‚àà obs (s &lt;+&gt; MkObservation Receive m)
     ‚àß rec_obs (state m0) ob)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">setoid_rewrite</span> elem_of_addObservation; <span class="nb">firstorder</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk204" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk204">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs s
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
     MkObservation Receive m ‚àà obs s
     ‚àß rec_obs (state m) ob) ‚Üí rec_obs s ob</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk205" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk205"><span class="nb">induction</span> s <span class="nb">using</span> addObservation_ind.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs (MkState [] a)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
     MkObservation Receive m ‚àà obs (MkState [] a)
     ‚àß rec_obs (state m) ob)
‚Üí rec_obs (MkState [] a) ob</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk206" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>ob0</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>ob ‚àà obs s
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
     MkObservation Receive m ‚àà obs s
     ‚àß rec_obs (state m) ob) ‚Üí 
rec_obs s ob</span></span></span><br></div><label class="goal-separator" for="MO-v-chk206"><hr></label><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; ob0)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
     MkObservation Receive m ‚àà obs (s &lt;+&gt; ob0)
     ‚àß rec_obs (state m) ob) ‚Üí 
rec_obs (s &lt;+&gt; ob0) ob</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk207" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk207">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs (MkState [] a)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
     MkObservation Receive m ‚àà obs (MkState [] a)
     ‚àß rec_obs (state m) ob)
‚Üí rec_obs (MkState [] a) ob</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">firstorder using</span> elem_of_nil.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk208" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk208">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>ob0</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>ob ‚àà obs s
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
     MkObservation Receive m ‚àà obs s
     ‚àß rec_obs (state m) ob) ‚Üí 
rec_obs s ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; ob0)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
     MkObservation Receive m ‚àà obs (s &lt;+&gt; ob0)
     ‚àß rec_obs (state m) ob) ‚Üí rec_obs (s &lt;+&gt; ob0) ob</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk209" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk209"><span class="nb">setoid_rewrite</span> elem_of_addObservation.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>ob0</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>ob ‚àà obs s
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
     MkObservation Receive m ‚àà obs s
     ‚àß rec_obs (state m) ob) ‚Üí 
rec_obs s ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(ob = ob0 ‚à® ob ‚àà obs s)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
     (MkObservation Receive m = ob0
      ‚à® MkObservation Receive m ‚àà obs s)
     ‚àß rec_obs (state m) ob) ‚Üí rec_obs (s &lt;+&gt; ob0) ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk20a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk20a"><span class="nb">rewrite</span> rec_obs_addObservation_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>ob0</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>ob ‚àà obs s
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
     MkObservation Receive m ‚àà obs s
     ‚àß rec_obs (state m) ob) ‚Üí 
rec_obs s ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(ob = ob0 ‚à® ob ‚àà obs s)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m</span> : BaseELMO.Message,
     (MkObservation Receive m = ob0
      ‚à® MkObservation Receive m ‚àà obs s)
     ‚àß rec_obs (state m) ob)
‚Üí rec_obs s ob
  ‚à® ob = ob0
    ‚à® label ob0 = Receive
      ‚àß rec_obs (state (message ob0)) ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">firstorder</span>; <span class="nb">subst</span>; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Set Warnings</span> <span class="s2">&quot;-cannot-define-projection&quot;</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Record</span> <span class="nf">local_equivocators</span> (<span class="nv">s</span> : State) (<span class="nv">i</span> : Address) : <span class="kt">Prop</span> :=
{
  lceqv_ob1 : Observation;
  lceqv_ob2 : Observation;
  lceqv_adr1 : adr (state (message lceqv_ob1)) = i;
  lceqv_adr2 : adr (state (message lceqv_ob2)) = i;
  lceqv_rec_obs1 : rec_obs s lceqv_ob1;
  lceqv_rec_obs2 : rec_obs s lceqv_ob2;
  lceqv_incomparable : incomparable (message lceqv_ob1) (message lceqv_ob2);
}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Set Warnings</span> <span class="s2">&quot;cannot-define-projection&quot;</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">composite_rec_observation</span>
  (<span class="nv">s</span> : VLSM.state MO) (<span class="nv">ob</span> : Observation) : <span class="kt">Prop</span> :=
    <span class="kr">exists</span> <span class="nv">i</span> : index, rec_obs (s i) ob.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">state_after_sending</span> (<span class="nv">m</span> : Message) : State :=
  state m &lt;+&gt; MkObservation Send m.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Set Warnings</span> <span class="s2">&quot;-cannot-define-projection&quot;</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Record</span> <span class="nf">global_equivocators</span>
  (<span class="nv">sigma</span> : VLSM.state MO) (<span class="nv">i</span> : index) : <span class="kt">Prop</span> :=
{
  globeqv_ob : Observation;
  globeqv_adr : adr (state (message globeqv_ob)) = idx i;
  globeqv_cro : composite_rec_observation sigma globeqv_ob;
  s := state_after_sending (message globeqv_ob);
  globeqv_nss : ~ state_suffix s (sigma i);
  globeqv_neq : s &lt;&gt; sigma i;
}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Set Warnings</span> <span class="s2">&quot;cannot-define-projection&quot;</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk20b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk20b"><span class="kn">Lemma</span> <span class="nf">obs_rec_obs</span> :
  <span class="kr">forall</span> (<span class="nv">s</span> : State) <span class="nv">ob</span>,
    ob ‚àà obs s -&gt; rec_obs s ob.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : State) (<span class="nv">ob</span> : BaseELMO.Observation),
  ob ‚àà obs s ‚Üí rec_obs s ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk20c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk20c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : State) (<span class="nv">ob</span> : BaseELMO.Observation),
  ob ‚àà obs s ‚Üí rec_obs s ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk20d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk20d"><span class="nb">intros</span> s ob.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs s ‚Üí rec_obs s ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk20e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk20e"><span class="nb">induction</span> s <span class="nb">using</span> addObservation_ind.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs (MkState [] a) ‚Üí rec_obs (MkState [] a) ob</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk20f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob, ob0</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>ob ‚àà obs s ‚Üí rec_obs s ob</span></span></span><br></div><label class="goal-separator" for="MO-v-chk20f"><hr></label><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; ob0) ‚Üí rec_obs (s &lt;+&gt; ob0) ob</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk210" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk210">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs (MkState [] a) ‚Üí rec_obs (MkState [] a) ob</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">inversion</span> <span class="mi">1</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk211" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk211">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob, ob0</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>ob ‚àà obs s ‚Üí rec_obs s ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; ob0) ‚Üí rec_obs (s &lt;+&gt; ob0) ob</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk212" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk212"><span class="nb">intros</span> [&lt;- | Hob]%elem_of_cons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>ob ‚àà obs s ‚Üí rec_obs s ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; ob) ob</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk213" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob, ob0</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>ob ‚àà obs s ‚Üí rec_obs s ob</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>ob ‚àà obs s</span></span></span><br></div><label class="goal-separator" for="MO-v-chk213"><hr></label><div class="goal-conclusion">rec_obs (s &lt;+&gt; ob0) ob</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk214" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk214">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>ob ‚àà obs s ‚Üí rec_obs s ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; ob) ob</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> rec_new.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk215" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk215">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob, ob0</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>ob ‚àà obs s ‚Üí rec_obs s ob</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>ob ‚àà obs s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; ob0) ob</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> rec_prev, IHs, Hob.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk216" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk216"><span class="kn">Lemma</span> <span class="nf">messages_rec_obs</span> :
  <span class="kr">forall</span> <span class="nv">i</span> (<span class="nv">s</span> : VLSM.state (M i)),
    constrained_state_prop (M i) s -&gt;
    <span class="kr">forall</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
      m&#39; ‚àà messages s -&gt;
      rec_obs (state m&#39;) ob -&gt;
      rec_obs s ob.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">i</span> : index) (<span class="nv">s</span> : VLSM.state (M i)),
  constrained_state_prop (M i) s
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
      m&#39; ‚àà messages s
      ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk217" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk217"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">i</span> : index) (<span class="nv">s</span> : VLSM.state (M i)),
  constrained_state_prop (M i) s
  ‚Üí <span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
      m&#39; ‚àà messages s
      ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk218" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk218"><span class="nb">intros</span> i s Hs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state (M i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (M i) s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk219" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk219"><span class="nb">induction</span> Hs <span class="nb">using</span> valid_state_prop_ind.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk21a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm (M i)) l
  (s, om) (s&#39;, om&#39;)</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</span></span></span><br></div><label class="goal-separator" for="MO-v-chk21a"><hr></label><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s&#39;
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s&#39; ob</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk21b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk21b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk21c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk21c"><span class="nb">destruct</span> s <span class="kr">as</span> [ol a].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>ol</var><span class="hyp-type"><b>: </b><span>list BaseELMO.Observation</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop (MkState ol a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages (MkState ol a)
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs (MkState ol a) ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk21d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk21d"><span class="nb">assert</span> (ol = []) <span class="kr">as</span> -&gt; <span class="bp">by</span> <span class="nb">apply</span> Hs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>Address</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop (MkState [] a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages (MkState [] a)
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs (MkState [] a) ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">inversion</span> <span class="mi">1</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk21e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk21e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm (M i)) l
  (s, om) (s&#39;, om&#39;)</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s&#39;
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s&#39; ob</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk21f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk21f"><span class="nb">intros</span> m&#39; ob Hm&#39; Hob.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>VLSM.label
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option Message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>VLSM.state
  (preloaded_with_all_messages_vlsm (M i))</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm (M i)) l
  (s, om) (s&#39;, om&#39;)</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hm'</var><span class="hyp-type"><b>: </b><span>m&#39; ‚àà messages s&#39;</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>rec_obs (state m&#39;) ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs s&#39; ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk220" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk220"><span class="nb">destruct</span> Ht <span class="kr">as</span> [(_ &amp; _ &amp; Hvalid) Ht], Hvalid <span class="kr">as</span> [s m _ | s];
      <span class="nb">cbn</span> <span class="kr">in</span> Ht; <span class="nb">injection</span> Ht <span class="kr">as</span> [= &lt;- &lt;-].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hm'</var><span class="hyp-type"><b>: </b><span>m&#39; ‚àà messages (s &lt;+&gt; MkObservation Receive m)</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>rec_obs (state m&#39;) ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Receive m) ob</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk221" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hm'</var><span class="hyp-type"><b>: </b><span>m&#39;
‚àà messages
    (s &lt;+&gt; MkObservation Send (MkMessage s))</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>rec_obs (state m&#39;) ob</span></span></span><br></div><label class="goal-separator" for="MO-v-chk221"><hr></label><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Send (MkMessage s)) ob</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk222" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk222">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hm'</var><span class="hyp-type"><b>: </b><span>m&#39; ‚àà messages (s &lt;+&gt; MkObservation Receive m)</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>rec_obs (state m&#39;) ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Receive m) ob</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk223" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk223"><span class="nb">change</span> (m&#39; ‚àà m :: messages s) <span class="kr">in</span> Hm&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hm'</var><span class="hyp-type"><b>: </b><span>m&#39; ‚àà m :: messages s</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>rec_obs (state m&#39;) ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Receive m) ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk224" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk224"><span class="nb">apply</span> elem_of_cons <span class="kr">in</span> Hm&#39; <span class="kr">as</span> [-&gt; | Hm&#39;].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>rec_obs (state m) ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Receive m) ob</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk225" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hm'</var><span class="hyp-type"><b>: </b><span>m&#39; ‚àà messages s</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>rec_obs (state m&#39;) ob</span></span></span><br></div><label class="goal-separator" for="MO-v-chk225"><hr></label><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Receive m) ob</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk226" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk226">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>rec_obs (state m) ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Receive m) ob</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> rec_recv.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk227" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk227">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hm'</var><span class="hyp-type"><b>: </b><span>m&#39; ‚àà messages s</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>rec_obs (state m&#39;) ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Receive m) ob</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> rec_prev, IHHs.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk228" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk228">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hm'</var><span class="hyp-type"><b>: </b><span>m&#39;
‚àà messages
    (s &lt;+&gt; MkObservation Send (MkMessage s))</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>rec_obs (state m&#39;) ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Send (MkMessage s)) ob</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk229" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk229"><span class="nb">change</span> (m&#39; ‚àà MkMessage s :: messages s) <span class="kr">in</span> Hm&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hm'</var><span class="hyp-type"><b>: </b><span>m&#39; ‚àà MkMessage s :: messages s</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>rec_obs (state m&#39;) ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Send (MkMessage s)) ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk22a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk22a"><span class="nb">apply</span> elem_of_cons <span class="kr">in</span> Hm&#39; <span class="kr">as</span> [-&gt; | Hm&#39;].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>rec_obs (state (MkMessage s)) ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Send (MkMessage s)) ob</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk22b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hm'</var><span class="hyp-type"><b>: </b><span>m&#39; ‚àà messages s</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>rec_obs (state m&#39;) ob</span></span></span><br></div><label class="goal-separator" for="MO-v-chk22b"><hr></label><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Send (MkMessage s)) ob</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk22c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk22c">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>rec_obs (state (MkMessage s)) ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Send (MkMessage s)) ob</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> rec_prev.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk22d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk22d">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">m&#39;</span> : Message) (<span class="nv">ob</span> : Observation),
  m&#39; ‚àà messages s
  ‚Üí rec_obs (state m&#39;) ob ‚Üí rec_obs s ob</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br><span><var>Hm'</var><span class="hyp-type"><b>: </b><span>m&#39; ‚àà messages s</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>rec_obs (state m&#39;) ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; MkObservation Send (MkMessage s)) ob</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> rec_prev, IHHs.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk22e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk22e"><span class="kn">Lemma</span> <span class="nf">unfold_robs_fwd</span> :
  <span class="kr">forall</span> (<span class="nv">s</span> : State) <span class="nv">ob</span>,
    rec_obs s ob -&gt;
      ob ‚àà obs s \/ <span class="kr">exists</span> (<span class="nv">m&#39;</span> : Message), m&#39; ‚àà messages s /\ rec_obs (state m&#39;) ob.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : State) (<span class="nv">ob</span> : BaseELMO.Observation),
  rec_obs s ob
  ‚Üí ob ‚àà obs s
    ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
         m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk22f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk22f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : State) (<span class="nv">ob</span> : BaseELMO.Observation),
  rec_obs s ob
  ‚Üí ob ‚àà obs s
    ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
         m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk230" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk230"><span class="nb">intros</span> s ob.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
       m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk231" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk231"><span class="nb">induction</span> s <span class="nb">using</span> addObservation_ind; [<span class="bp">by</span> <span class="nb">inversion</span> <span class="mi">1</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob, ob0</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
       m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs (s &lt;+&gt; ob0) ob
‚Üí ob ‚àà obs (s &lt;+&gt; ob0)
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
       m&#39; ‚àà messages (s &lt;+&gt; ob0)
       ‚àß rec_obs (state m&#39;) ob)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk232" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk232"><span class="nb">intro</span> Hob; <span class="nb">inversion</span> Hob; <span class="nb">subst</span>; <span class="nb">clear</span> Hob
  ; <span class="nb">replace</span> s0 <span class="kr">with</span> s <span class="kr">in</span> * <span class="bp">by</span> (<span class="nb">apply</span> eq_State; <span class="bp">done</span>); <span class="nb">clear</span> H2 H3.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
       m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; ob)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
     m&#39; ‚àà messages (s &lt;+&gt; ob) ‚àß rec_obs (state m&#39;) ob)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk233" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob, ob0</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
       m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>rec_obs s ob</span></span></span><br></div><label class="goal-separator" for="MO-v-chk233"><hr></label><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; ob0)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
     m&#39; ‚àà messages (s &lt;+&gt; ob0) ‚àß rec_obs (state m&#39;) ob)</div></blockquote><input class="alectryon-extra-goal-toggle" id="MO-v-chk234" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
       m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>rec_obs (state m) ob</span></span></span><br></div><label class="goal-separator" for="MO-v-chk234"><hr></label><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; MkObservation Receive m)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
     m&#39; ‚àà messages (s &lt;+&gt; MkObservation Receive m)
     ‚àß rec_obs (state m&#39;) ob)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk235" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk235">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
       m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; ob)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
     m&#39; ‚àà messages (s &lt;+&gt; ob) ‚àß rec_obs (state m&#39;) ob)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">left</span>; <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk236" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk236">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob, ob0</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
       m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>rec_obs s ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; ob0)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
     m&#39; ‚àà messages (s &lt;+&gt; ob0) ‚àß rec_obs (state m&#39;) ob)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk237" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk237"><span class="nb">destruct</span> (IHs H4) <span class="kr">as</span> [Hob | (m&#39; &amp; Hm &amp; Hob)].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob, ob0</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
       m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>rec_obs s ob</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>ob ‚àà obs s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; ob0)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
     m&#39; ‚àà messages (s &lt;+&gt; ob0) ‚àß rec_obs (state m&#39;) ob)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk238" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob, ob0</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
       m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>rec_obs s ob</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>m&#39; ‚àà messages s</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>rec_obs (state m&#39;) ob</span></span></span><br></div><label class="goal-separator" for="MO-v-chk238"><hr></label><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; ob0)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
     m&#39; ‚àà messages (s &lt;+&gt; ob0) ‚àß rec_obs (state m&#39;) ob)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk239" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk239">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob, ob0</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
       m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>rec_obs s ob</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>ob ‚àà obs s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; ob0)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
     m&#39; ‚àà messages (s &lt;+&gt; ob0) ‚àß rec_obs (state m&#39;) ob)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">left</span>; <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk23a" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk23a">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob, ob0</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
       m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>rec_obs s ob</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>Message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>m&#39; ‚àà messages s</span></span></span><br><span><var>Hob</var><span class="hyp-type"><b>: </b><span>rec_obs (state m&#39;) ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; ob0)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
     m&#39; ‚àà messages (s &lt;+&gt; ob0) ‚àß rec_obs (state m&#39;) ob)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">right</span>; <span class="kr">exists</span> <span class="nv">m&#39;</span>; <span class="nb">split</span>; [<span class="nb">constructor</span> |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk23b" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk23b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
       m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>BaseELMO.Message</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>BaseELMO.State</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>rec_obs (state m) ob</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs (s &lt;+&gt; MkObservation Receive m)
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
     m&#39; ‚àà messages (s &lt;+&gt; MkObservation Receive m)
     ‚àß rec_obs (state m&#39;) ob)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">right</span>; <span class="kr">exists</span> <span class="nv">m</span>; <span class="nb">split</span>; [<span class="nb">constructor</span> |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk23c" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk23c"><span class="kn">Lemma</span> <span class="nf">unfold_robs_rev</span> :
  <span class="kr">forall</span> [Q : State -&gt; Message -&gt; <span class="kt">Prop</span>] [s : State],
    UMO_reachable Q s -&gt;
    <span class="kr">forall</span> <span class="nv">ob</span>,
      (ob ‚àà obs s \/ <span class="kr">exists</span> (<span class="nv">m&#39;</span> : Message), m&#39; ‚àà messages s /\ rec_obs (state m&#39;) ob) -&gt;
        rec_obs s ob.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">Q</span> : State ‚Üí Message ‚Üí <span class="kt">Prop</span>) (<span class="nv">s</span> : State),
  UMO_reachable Q s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">ob</span> : BaseELMO.Observation,
      ob ‚àà obs s
      ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
           m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)
      ‚Üí rec_obs s ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk23d" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk23d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">Q</span> : State ‚Üí Message ‚Üí <span class="kt">Prop</span>) (<span class="nv">s</span> : State),
  UMO_reachable Q s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">ob</span> : BaseELMO.Observation,
      ob ‚àà obs s
      ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
           m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)
      ‚Üí rec_obs s ob</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">induction</span> <span class="mi">1</span>; <span class="nb">intros</span> ob [Hob | [m&#39; [Hob ?]]];
    <span class="nb">apply</span> (@not_elem_of_nil, @elem_of_addObservation, @elem_of_messages_addObservation) <span class="kr">in</span> Hob;
    <span class="nb">destruct</span> Hob; <span class="nb">subst</span>; <span class="nb">constructor</span>; <span class="nb">eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk23e" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk23e"><span class="kn">Lemma</span> <span class="nf">unfold_robs</span> :
  <span class="kr">forall</span> (<span class="nv">Q</span> : State -&gt; Message -&gt; <span class="kt">Prop</span>) (<span class="nv">s</span> : State),
    UMO_reachable Q s -&gt;
    <span class="kr">forall</span> <span class="nv">ob</span>,
      rec_obs s ob
        &lt;-&gt;
      ob ‚àà obs s \/ <span class="kr">exists</span> (<span class="nv">m&#39;</span> : Message), m&#39; ‚àà messages s /\ rec_obs (state m&#39;) ob.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">Q</span> : State ‚Üí Message ‚Üí <span class="kt">Prop</span>) (<span class="nv">s</span> : State),
  UMO_reachable Q s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">ob</span> : BaseELMO.Observation,
      rec_obs s ob
      ‚Üî ob ‚àà obs s
        ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
             m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk23f" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk23f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">Q</span> : State ‚Üí Message ‚Üí <span class="kt">Prop</span>) (<span class="nv">s</span> : State),
  UMO_reachable Q s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">ob</span> : BaseELMO.Observation,
      rec_obs s ob
      ‚Üî ob ‚àà obs s
        ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
             m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk240" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk240"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>State ‚Üí Message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>UMO_reachable Q s</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
       m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="MO-v-chk241" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>State ‚Üí Message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>UMO_reachable Q s</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br></div><label class="goal-separator" for="MO-v-chk241"><hr></label><div class="goal-conclusion">ob ‚àà obs s
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
     m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)
‚Üí rec_obs s ob</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk242" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk242">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>State ‚Üí Message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>UMO_reachable Q s</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs s ob
‚Üí ob ‚àà obs s
  ‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
       m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> unfold_robs_fwd.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk243" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk243">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>State ‚Üí Message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>UMO_reachable Q s</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>BaseELMO.Observation</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ob ‚àà obs s
‚à® (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : Message,
     m&#39; ‚àà messages s ‚àß rec_obs (state m&#39;) ob)
‚Üí rec_obs s ob</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> unfold_robs_rev.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk244" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk244"><span class="kn">Lemma</span> <span class="nf">rec_obs_size_desc</span> (<span class="nv">s</span> : State) (<span class="nv">ob</span> : Observation) :
  rec_obs s ob -&gt; sizeState (state (message ob)) &lt; sizeState s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs s ob
‚Üí sizeState (state (message ob)) &lt; sizeState s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk245" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk245"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ob</var><span class="hyp-type"><b>: </b><span>Observation</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">rec_obs s ob
‚Üí sizeState (state (message ob)) &lt; sizeState s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">induction</span> <span class="mi">1</span>; <span class="nb">rewrite</span> addObservation_size, sizeObservation_unfold; <span class="nb">cbn</span>; <span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk246" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk246"><span class="kn">Lemma</span> <span class="nf">rec_obs_acyclic</span> (<span class="nv">s</span> : State) :
  <span class="kr">forall</span> <span class="nv">l</span>, ~ rec_obs s (MkObservation l (MkMessage s)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">l</span> : Label,
  ¬¨ rec_obs s (MkObservation l (MkMessage s))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="MO-v-chk247" style="display: none" type="checkbox"><label class="alectryon-input" for="MO-v-chk247"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Address</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision Address</span></span></span><br><span><var>State</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.State</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Observation</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Observation</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>Message</var><span><span class="hyp-body"><b>:= </b><span>BaseELMO.Message</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>idx</var><span class="hyp-type"><b>: </b><span>index ‚Üí Address</span></span></span><br><span><var>Inj0</var><span class="hyp-type"><b>: </b><span>Inj eq eq idx</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">adr</span> : Address,
  P adr ‚àß (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, idx i = adr)</span></span><span class="hyp-type"><b>: </b><span>Address ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> <span class="nv">i</span> : index, MO_component P&#39; (idx i)</span></span><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM Message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">l</span> : Label,
  ¬¨ rec_obs s (MkObservation l (MkMessage s))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> l Hrobs; <span class="nb">apply</span> rec_obs_size_desc, Nat.lt_irrefl <span class="kr">in</span> Hrobs.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sec_MOProtocol</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sec_MO</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> rec_obs_send_inv : <span class="kn">clear implicits</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> rec_obs_recv_inv : <span class="kn">clear implicits</span>.</span></span></pre></article></body></html>