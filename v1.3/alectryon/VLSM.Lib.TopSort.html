<!DOCTYPE html>
<html class="alectryon-standalone"><head><title>TopSort.v</title><meta charset="utf-8"><meta content="Alectryon" name="generator"><meta name="viewport" content="width=device-width, initial-scale=1"><link href="alectryon.css" rel="stylesheet"><link href="pygments.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" /><script src="alectryon.js"></script></head><body><article class="alectryon-root alectryon-windowed alectryon-coqdoc"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.18.0+0.18.1. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk0"><span class="kn">From</span> VLSM.Lib <span class="kn">Require Import</span> Itauto.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">[Loading ML file ring_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file zify_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file micromega_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file btauto_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file coq-itauto.plugin ... <span class="bp">done</span>]</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> stdpp <span class="kn">Require Import</span> prelude.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> VLSM.Lib <span class="kn">Require Import</span> Preamble ListExtras ListSetExtras StdppListSet StdppExtras.</span></span></pre><div class="doc">
<a id="lab1"></a><h1 class="section">Utility: Topological Sorting</h1>
<div class="paragraph"> </div>

  This module implements an algorithm producing a linear extension for a
  given partial order using an approach similar to that of Kahn's topological
  sorting algorithm.

<div class="paragraph"> </div>

  The algorithm extracts an element with a minimal number of predecessors
  among the current elements, then recurses on the remaining elements.

<div class="paragraph"> </div>

  To begin with, we assume an unconstrained <code>precedes</code> function to say
  whether an element precedes another. The proofs will show that if
  <code>precedes</code> determines a strict order on the set of elements in the list,
  then the <span class="inlinecode"><span class="id" title="var">top_sort</span></span> algorithm produces a linear extension of that ordering
  (Lemmas <span class="inlinecode"><span class="id" title="var">top_sort_precedes</span></span> and <span class="inlinecode"><span class="id" title="var">top_sort_precedes_before</span></span>).

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sec_min_predecessors</span>.</span></span></pre><div class="doc">
<a id="lab2"></a><h2 class="section">Finding an element with a minimal number of predecessors</h2>
<div class="paragraph"> </div>

  For this section we will fix a list <code>l</code> and count the predecessors
  occurring in that list.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">A</span> : <span class="kt">Type</span>}
  (<span class="nv">precedes</span> : relation A)
  `{!RelDecision precedes}
  (l : list A)
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">count_predecessors</span>
  (<span class="nv">a</span> : A)
  : nat
  := length (filter (<span class="kr">fun</span> <span class="nv">b</span> =&gt; precedes b a) l).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk1"><span class="kn">Lemma</span> <span class="nf">zero_predecessors</span>
  (<span class="nv">a</span> : A)
  (<span class="nv">Ha</span> : count_predecessors a = <span class="mi">0</span>)
  : Forall (<span class="kr">fun</span> <span class="nv">b</span> =&gt; ~ precedes b a) l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>count_predecessors a = <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Forall (<span class="kr">Œª</span> <span class="nv">b</span> : A, ¬¨ precedes b a) l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>count_predecessors a = <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Forall (<span class="kr">Œª</span> <span class="nv">b</span> : A, ¬¨ precedes b a) l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk3"><span class="nb">apply</span> length_zero_iff_nil <span class="kr">in</span> Ha.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a) l = []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Forall (<span class="kr">Œª</span> <span class="nv">b</span> : A, ¬¨ precedes b a) l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk4"><span class="nb">apply</span> Forall_filter_nil <span class="kr">in</span> Ha.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>Forall (<span class="kr">Œª</span> <span class="nv">a0</span> : A, ¬¨ precedes a0 a) l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Forall (<span class="kr">Œª</span> <span class="nv">b</span> : A, ¬¨ precedes b a) l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> Ha.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
Finds an element minimizing <span class="inlinecode"><span class="id" title="var">count_predecessors</span></span> in <code>min :: remainder</code>. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Fixpoint</span> <span class="nf">min_predecessors</span>
  (<span class="nv">remainder</span> : list A)
  (<span class="nv">min</span> : A)
  : A
  :=
  <span class="kr">match</span> remainder <span class="kr">with</span>
  | [] =&gt; min
  | h :: t =&gt;
    <span class="kr">if</span> decide (count_predecessors h &lt; count_predecessors min)
    <span class="kr">then</span> min_predecessors t h
    <span class="kr">else</span> min_predecessors t min
  <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk5"><span class="kn">Lemma</span> <span class="nf">min_predecessors_in</span>
  (<span class="nv">l&#39;</span> : list A)
  (<span class="nv">a</span> : A)
  (<span class="nv">min</span> := min_predecessors l&#39; a)
  : min = a \/ min ‚àà l&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l, l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>min</var><span><span class="hyp-body"><b>:= </b><span>min_predecessors l&#39; a</span></span><span class="hyp-type"><b>: </b><span>A</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">min = a ‚à® min ‚àà l&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l, l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>min</var><span><span class="hyp-body"><b>:= </b><span>min_predecessors l&#39; a</span></span><span class="hyp-type"><b>: </b><span>A</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">min = a ‚à® min ‚àà l&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk7"><span class="nb">unfold</span> min; <span class="nb">clear</span> min.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l, l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">min_predecessors l&#39; a = a ‚à® min_predecessors l&#39; a ‚àà l&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk8"><span class="nb">revert</span> a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l, l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">a</span> : A,
  min_predecessors l&#39; a = a
  ‚à® min_predecessors l&#39; a ‚àà l&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk9"><span class="nb">induction</span> l&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">a</span> : A,
  min_predecessors [] a = a
  ‚à® min_predecessors [] a ‚àà []</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="TopSort-v-chka" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> : A,
  min_predecessors l&#39; a = a
  ‚à® min_predecessors l&#39; a ‚àà l&#39;</span></span></span><br></div><label class="goal-separator" for="TopSort-v-chka"><hr></label><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">a0</span> : A,
  min_predecessors (a :: l&#39;) a0 = a0
  ‚à® min_predecessors (a :: l&#39;) a0 ‚àà a :: l&#39;</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkb">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">a</span> : A,
  min_predecessors [] a = a
  ‚à® min_predecessors [] a ‚àà []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span>; <span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkc">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> : A,
  min_predecessors l&#39; a = a
  ‚à® min_predecessors l&#39; a ‚àà l&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">a0</span> : A,
  min_predecessors (a :: l&#39;) a0 = a0
  ‚à® min_predecessors (a :: l&#39;) a0 ‚àà a :: l&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkd"><span class="nb">intro</span> a0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> : A,
  min_predecessors l&#39; a = a
  ‚à® min_predecessors l&#39; a ‚àà l&#39;</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">min_predecessors (a :: l&#39;) a0 = a0
‚à® min_predecessors (a :: l&#39;) a0 ‚àà a :: l&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chke"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> : A,
  min_predecessors l&#39; a = a
  ‚à® min_predecessors l&#39; a ‚àà l&#39;</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span>
  decide
    (count_predecessors a &lt; count_predecessors a0)
 <span class="kr">then</span> min_predecessors l&#39; a
 <span class="kr">else</span> min_predecessors l&#39; a0) = a0
‚à® (<span class="kr">if</span>
    decide
      (count_predecessors a &lt; count_predecessors a0)
   <span class="kr">then</span> min_predecessors l&#39; a
   <span class="kr">else</span> min_predecessors l&#39; a0) ‚àà a :: l&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> (decide (count_predecessors a &lt; count_predecessors a0));
      [<span class="nb">destruct</span> (IHl&#39; a) | <span class="nb">destruct</span> (IHl&#39; a0)]; <span class="nb">rewrite</span> elem_of_cons; itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkf"><span class="kn">Lemma</span> <span class="nf">min_predecessors_correct</span>
  (<span class="nv">l&#39;</span> : list A)
  (<span class="nv">a</span> : A)
  (<span class="nv">min</span> := min_predecessors l&#39; a)
  (<span class="nv">mins</span> := count_predecessors min)
  : Forall (<span class="kr">fun</span> <span class="nv">b</span> =&gt; mins &lt;= count_predecessors b) (a :: l&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l, l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>min</var><span><span class="hyp-body"><b>:= </b><span>min_predecessors l&#39; a</span></span><span class="hyp-type"><b>: </b><span>A</span></span></span></span><br><span><var>mins</var><span><span class="hyp-body"><b>:= </b><span>count_predecessors min</span></span><span class="hyp-type"><b>: </b><span>nat</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Forall (<span class="kr">Œª</span> <span class="nv">b</span> : A, mins ‚â§ count_predecessors b)
  (a :: l&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk10"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l, l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>min</var><span><span class="hyp-body"><b>:= </b><span>min_predecessors l&#39; a</span></span><span class="hyp-type"><b>: </b><span>A</span></span></span></span><br><span><var>mins</var><span><span class="hyp-body"><b>:= </b><span>count_predecessors min</span></span><span class="hyp-type"><b>: </b><span>nat</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Forall (<span class="kr">Œª</span> <span class="nv">b</span> : A, mins ‚â§ count_predecessors b)
  (a :: l&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk11"><span class="nb">unfold</span> mins, min; <span class="nb">clear</span> mins min.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l, l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Forall
  (<span class="kr">Œª</span> <span class="nv">b</span> : A,
     count_predecessors (min_predecessors l&#39; a)
     ‚â§ count_predecessors b) (a :: l&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk12"><span class="nb">rewrite</span> Forall_forall.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l, l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">x</span> : A,
  x ‚àà a :: l&#39;
  ‚Üí count_predecessors (min_predecessors l&#39; a)
    ‚â§ count_predecessors x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk13"><span class="nb">revert</span> a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l, l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">x</span> : A,
  x ‚àà a :: l&#39;
  ‚Üí count_predecessors (min_predecessors l&#39; a)
    ‚â§ count_predecessors x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk14"><span class="nb">induction</span> l&#39;; <span class="nb">intros</span> a0 x Hin; [<span class="bp">by</span> <span class="nb">cbn</span>; <span class="nb">apply</span> elem_of_list_singleton <span class="kr">in</span> Hin <span class="kr">as</span> -&gt; |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">x</span> : A,
  x ‚àà a :: l&#39;
  ‚Üí count_predecessors (min_predecessors l&#39; a)
    ‚â§ count_predecessors x</span></span></span><br><span><var>a0, x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ‚àà a0 :: a :: l&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">count_predecessors (min_predecessors (a :: l&#39;) a0)
‚â§ count_predecessors x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk15"><span class="nb">apply</span> elem_of_cons <span class="kr">in</span> Hin <span class="kr">as</span> [-&gt; | Hin]; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">x</span> : A,
  x ‚àà a :: l&#39;
  ‚Üí count_predecessors (min_predecessors l&#39; a)
    ‚â§ count_predecessors x</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">count_predecessors
  (<span class="kr">if</span>
    decide
      (count_predecessors a &lt; count_predecessors a0)
   <span class="kr">then</span> min_predecessors l&#39; a
   <span class="kr">else</span> min_predecessors l&#39; a0)
‚â§ count_predecessors a0</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="TopSort-v-chk16" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">x</span> : A,
  x ‚àà a :: l&#39;
  ‚Üí count_predecessors (min_predecessors l&#39; a)
    ‚â§ count_predecessors x</span></span></span><br><span><var>a0, x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ‚àà a :: l&#39;</span></span></span><br></div><label class="goal-separator" for="TopSort-v-chk16"><hr></label><div class="goal-conclusion">count_predecessors
  (<span class="kr">if</span>
    decide
      (count_predecessors a &lt; count_predecessors a0)
   <span class="kr">then</span> min_predecessors l&#39; a
   <span class="kr">else</span> min_predecessors l&#39; a0) ‚â§ 
count_predecessors x</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk17">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">x</span> : A,
  x ‚àà a :: l&#39;
  ‚Üí count_predecessors (min_predecessors l&#39; a)
    ‚â§ count_predecessors x</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">count_predecessors
  (<span class="kr">if</span>
    decide
      (count_predecessors a &lt; count_predecessors a0)
   <span class="kr">then</span> min_predecessors l&#39; a
   <span class="kr">else</span> min_predecessors l&#39; a0)
‚â§ count_predecessors a0</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk18"><span class="nb">destruct</span> (decide (count_predecessors a &lt; count_predecessors a0)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">x</span> : A,
  x ‚àà a :: l&#39;
  ‚Üí count_predecessors (min_predecessors l&#39; a)
    ‚â§ count_predecessors x</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>count_predecessors a &lt; count_predecessors a0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">count_predecessors (min_predecessors l&#39; a)
‚â§ count_predecessors a0</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="TopSort-v-chk19" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">x</span> : A,
  x ‚àà a :: l&#39;
  ‚Üí count_predecessors (min_predecessors l&#39; a)
    ‚â§ count_predecessors x</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ count_predecessors a &lt; count_predecessors a0</span></span></span><br></div><label class="goal-separator" for="TopSort-v-chk19"><hr></label><div class="goal-conclusion">count_predecessors (min_predecessors l&#39; a0)
‚â§ count_predecessors a0</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk1a">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">x</span> : A,
  x ‚àà a :: l&#39;
  ‚Üí count_predecessors (min_predecessors l&#39; a)
    ‚â§ count_predecessors x</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>count_predecessors a &lt; count_predecessors a0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">count_predecessors (min_predecessors l&#39; a)
‚â§ count_predecessors a0</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk1b"><span class="nb">transitivity</span> (count_predecessors a); [| <span class="bp">lia</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">x</span> : A,
  x ‚àà a :: l&#39;
  ‚Üí count_predecessors (min_predecessors l&#39; a)
    ‚â§ count_predecessors x</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>count_predecessors a &lt; count_predecessors a0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">count_predecessors (min_predecessors l&#39; a)
‚â§ count_predecessors a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> IHl&#39;; <span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk1c">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">x</span> : A,
  x ‚àà a :: l&#39;
  ‚Üí count_predecessors (min_predecessors l&#39; a)
    ‚â§ count_predecessors x</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ count_predecessors a &lt; count_predecessors a0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">count_predecessors (min_predecessors l&#39; a0)
‚â§ count_predecessors a0</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> IHl&#39;; <span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk1d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">x</span> : A,
  x ‚àà a :: l&#39;
  ‚Üí count_predecessors (min_predecessors l&#39; a)
    ‚â§ count_predecessors x</span></span></span><br><span><var>a0, x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ‚àà a :: l&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">count_predecessors
  (<span class="kr">if</span>
    decide
      (count_predecessors a &lt; count_predecessors a0)
   <span class="kr">then</span> min_predecessors l&#39; a
   <span class="kr">else</span> min_predecessors l&#39; a0) ‚â§ count_predecessors x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk1e"><span class="nb">destruct</span> (decide (count_predecessors a &lt; count_predecessors a0)); [<span class="bp">by</span> <span class="nb">apply</span> IHl&#39; |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">x</span> : A,
  x ‚àà a :: l&#39;
  ‚Üí count_predecessors (min_predecessors l&#39; a)
    ‚â§ count_predecessors x</span></span></span><br><span><var>a0, x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ‚àà a :: l&#39;</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ count_predecessors a &lt; count_predecessors a0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">count_predecessors (min_predecessors l&#39; a0)
‚â§ count_predecessors x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk1f" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk1f"><span class="nb">apply</span> not_lt <span class="kr">in</span> n; <span class="nb">unfold</span> ge <span class="kr">in</span> n.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">x</span> : A,
  x ‚àà a :: l&#39;
  ‚Üí count_predecessors (min_predecessors l&#39; a)
    ‚â§ count_predecessors x</span></span></span><br><span><var>a0, x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ‚àà a :: l&#39;</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>count_predecessors a0 ‚â§ count_predecessors a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">count_predecessors (min_predecessors l&#39; a0)
‚â§ count_predecessors x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk20"><span class="nb">apply</span> elem_of_cons <span class="kr">in</span> Hin <span class="kr">as</span> [-&gt; | Hin].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">x</span> : A,
  x ‚àà a :: l&#39;
  ‚Üí count_predecessors (min_predecessors l&#39; a)
    ‚â§ count_predecessors x</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>count_predecessors a0 ‚â§ count_predecessors a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">count_predecessors (min_predecessors l&#39; a0)
‚â§ count_predecessors a</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="TopSort-v-chk21" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">x</span> : A,
  x ‚àà a :: l&#39;
  ‚Üí count_predecessors (min_predecessors l&#39; a)
    ‚â§ count_predecessors x</span></span></span><br><span><var>a0, x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ‚àà l&#39;</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>count_predecessors a0 ‚â§ count_predecessors a</span></span></span><br></div><label class="goal-separator" for="TopSort-v-chk21"><hr></label><div class="goal-conclusion">count_predecessors (min_predecessors l&#39; a0)
‚â§ count_predecessors x</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk22">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">x</span> : A,
  x ‚àà a :: l&#39;
  ‚Üí count_predecessors (min_predecessors l&#39; a)
    ‚â§ count_predecessors x</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>count_predecessors a0 ‚â§ count_predecessors a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">count_predecessors (min_predecessors l&#39; a0)
‚â§ count_predecessors a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk23"><span class="nb">transitivity</span> (count_predecessors a0); [| <span class="bp">lia</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">x</span> : A,
  x ‚àà a :: l&#39;
  ‚Üí count_predecessors (min_predecessors l&#39; a)
    ‚â§ count_predecessors x</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>count_predecessors a0 ‚â§ count_predecessors a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">count_predecessors (min_predecessors l&#39; a0)
‚â§ count_predecessors a0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> IHl&#39;; <span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk24">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl'</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">x</span> : A,
  x ‚àà a :: l&#39;
  ‚Üí count_predecessors (min_predecessors l&#39; a)
    ‚â§ count_predecessors x</span></span></span><br><span><var>a0, x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ‚àà l&#39;</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>count_predecessors a0 ‚â§ count_predecessors a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">count_predecessors (min_predecessors l&#39; a0)
‚â§ count_predecessors x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> IHl&#39;; <span class="nb">right</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  Given <code>P</code> a property on <code>A</code>, <span class="inlinecode"><span class="id" title="var">precedes_P</span></span> is the relation
  induced by <code>precedes</code> on the subset of <code>A</code> determined by <code>P</code>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">precedes_P</span>
  (<span class="nv">P</span> : A -&gt; <span class="kt">Prop</span>)
  (<span class="nv">x</span> <span class="nv">y</span> : sig P)
  : <span class="kt">Prop</span>
  := precedes (proj1_sig x) (proj1_sig y).</span></span></pre><div class="doc">
  In what follows, let us fix a property <code>P</code> satisfied by all elements
  of <code>l</code>, such that <span class="inlinecode"><span class="id" title="var">precedes_P</span></span> <code>P</code> is a <span class="inlinecode"><span class="id" title="var">StrictOrder</span></span>.

<div class="paragraph"> </div>

  Consequently, this means that <code>precedes</code> is a <span class="inlinecode"><span class="id" title="var">StrictOrder</span></span> on the
  elements of <code>l</code>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  (<span class="nv">P</span> : A -&gt; <span class="kt">Prop</span>)
  (<span class="nv">HPl</span> : Forall P l)
  {<span class="nv">Hso</span> : StrictOrder (precedes_P P)}
  .</span></span></pre><div class="doc">
  Next we derive easier to work with formulations for the <span class="inlinecode"><span class="id" title="var">StrictOrder</span></span>
  properties associated with <span class="inlinecode"><span class="id" title="var">precedes_P</span></span>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk25"><span class="kn">Lemma</span> <span class="nf">precedes_irreflexive</span>
  (<span class="nv">a</span> : A)
  (<span class="nv">Ha</span> : P a)
  : ~ precedes a a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>HPl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ precedes a a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk26"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>HPl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ precedes a a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk27" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk27"><span class="nb">specialize</span> (StrictOrder_Irreflexive (exist P a Ha)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>HPl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">complement (precedes_P P) (a ‚Üæ Ha) (a ‚Üæ Ha)
‚Üí ¬¨ precedes a a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk28" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk28"><span class="nb">unfold</span> complement; <span class="nb">unfold</span> precedes_P; <span class="nb">simpl</span>; <span class="nb">intro</span> Hirr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>HPl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>Hirr</var><span class="hyp-type"><b>: </b><span>precedes a a ‚Üí <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ precedes a a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> (decide (precedes a a)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk29" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk29"><span class="kn">Lemma</span> <span class="nf">precedes_asymmetric</span>
  (<span class="nv">a</span> <span class="nv">b</span> : A)
  (<span class="nv">Ha</span> : P a)
  (<span class="nv">Hb</span> : P b)
  (<span class="nv">Hab</span> : precedes a b)
  : ~ precedes b a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>HPl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>Hb</var><span class="hyp-type"><b>: </b><span>P b</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ precedes b a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk2a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>HPl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>Hb</var><span class="hyp-type"><b>: </b><span>P b</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ precedes b a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk2b"><span class="nb">intro</span> Hba.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>HPl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>Hb</var><span class="hyp-type"><b>: </b><span>P b</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>Hba</var><span class="hyp-type"><b>: </b><span>precedes b a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span>
    (StrictOrder_Asymmetric Hso
      (exist P a Ha) (exist P b Hb)
      Hab Hba).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk2c"><span class="kn">Lemma</span> <span class="nf">precedes_transitive</span>
  (<span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> : A)
  (<span class="nv">Ha</span> : P a)
  (<span class="nv">Hb</span> : P b)
  (<span class="nv">Hc</span> : P c)
  (<span class="nv">Hab</span> : precedes a b)
  (<span class="nv">Hbc</span> : precedes b c)
  : precedes a c.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>HPl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>a, b, c</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>Hb</var><span class="hyp-type"><b>: </b><span>P b</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>P c</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>Hbc</var><span class="hyp-type"><b>: </b><span>precedes b c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">precedes a c</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk2d" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk2d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>HPl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>a, b, c</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>Hb</var><span class="hyp-type"><b>: </b><span>P b</span></span></span><br><span><var>Hc</var><span class="hyp-type"><b>: </b><span>P c</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>Hbc</var><span class="hyp-type"><b>: </b><span>precedes b c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">precedes a c</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span>
    (RelationClasses.StrictOrder_Transitive
      (exist P a Ha) (exist P b Hb) (exist P c Hc)
      Hab Hbc).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  If <code>precedes</code> is a <span class="inlinecode"><span class="id" title="var">StrictOrder</span></span> on <code>l</code>, then there must exist an
  element of <code>l</code> with no predecessors in <code>l</code>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk2e" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk2e"><span class="kn">Lemma</span> <span class="nf">count_predecessors_zero</span>
  (<span class="nv">Hl</span> : l &lt;&gt; [])
  : Exists (<span class="kr">fun</span> <span class="nv">a</span> =&gt; count_predecessors a = <span class="mi">0</span>) l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>HPl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>l ‚â† []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Exists (<span class="kr">Œª</span> <span class="nv">a</span> : A, count_predecessors a = <span class="mi">0</span>) l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk2f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>HPl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>l ‚â† []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Exists (<span class="kr">Œª</span> <span class="nv">a</span> : A, count_predecessors a = <span class="mi">0</span>) l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk30" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk30"><span class="nb">unfold</span> count_predecessors.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>HPl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>l ‚â† []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Exists
  (<span class="kr">Œª</span> <span class="nv">a</span> : A,
     length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a) l) = <span class="mi">0</span>) l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk31" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk31"><span class="nb">induction</span> l; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HPl</var><span class="hyp-type"><b>: </b><span>Forall P (a :: l0)</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>a :: l0 ‚â† []</span></span></span><br><span><var>IHl0</var><span class="hyp-type"><b>: </b><span>Forall P l0
‚Üí l0 ‚â† []
  ‚Üí Exists
      (<span class="kr">Œª</span> <span class="nv">a</span> : A,
         length
           (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a) l0) =
         <span class="mi">0</span>) l0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Exists
  (<span class="kr">Œª</span> <span class="nv">a0</span> : A,
     length
       (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a0) (a :: l0)) = <span class="mi">0</span>)
  (a :: l0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk32"><span class="nb">inversion_clear</span> HPl <span class="kr">as</span> [| ? ? HPa HPl0].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>a :: l0 ‚â† []</span></span></span><br><span><var>IHl0</var><span class="hyp-type"><b>: </b><span>Forall P l0
‚Üí l0 ‚â† []
  ‚Üí Exists
      (<span class="kr">Œª</span> <span class="nv">a</span> : A,
         length
           (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a) l0) =
         <span class="mi">0</span>) l0</span></span></span><br><span><var>HPa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>HPl0</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Exists
  (<span class="kr">Œª</span> <span class="nv">a0</span> : A,
     length
       (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a0) (a :: l0)) = <span class="mi">0</span>)
  (a :: l0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk33"><span class="nb">specialize</span> (IHl0 HPl0).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>a :: l0 ‚â† []</span></span></span><br><span><var>IHl0</var><span class="hyp-type"><b>: </b><span>l0 ‚â† []
‚Üí Exists
    (<span class="kr">Œª</span> <span class="nv">a</span> : A,
       length
         (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a) l0) =
       <span class="mi">0</span>) l0</span></span></span><br><span><var>HPa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>HPl0</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Exists
  (<span class="kr">Œª</span> <span class="nv">a0</span> : A,
     length
       (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a0) (a :: l0)) = <span class="mi">0</span>)
  (a :: l0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk34" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk34"><span class="nb">apply</span> Exists_cons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>a :: l0 ‚â† []</span></span></span><br><span><var>IHl0</var><span class="hyp-type"><b>: </b><span>l0 ‚â† []
‚Üí Exists
    (<span class="kr">Œª</span> <span class="nv">a</span> : A,
       length
         (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a) l0) =
       <span class="mi">0</span>) l0</span></span></span><br><span><var>HPa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>HPl0</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a) (a :: l0)) = <span class="mi">0</span>
‚à® Exists
    (<span class="kr">Œª</span> <span class="nv">a0</span> : A,
       length
         (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a0) (a :: l0)) =
       <span class="mi">0</span>) l0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk35" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk35"><span class="nb">rewrite</span> filter_cons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>a :: l0 ‚â† []</span></span></span><br><span><var>IHl0</var><span class="hyp-type"><b>: </b><span>l0 ‚â† []
‚Üí Exists
    (<span class="kr">Œª</span> <span class="nv">a</span> : A,
       length
         (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a) l0) =
       <span class="mi">0</span>) l0</span></span></span><br><span><var>HPa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>HPl0</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length
  (<span class="kr">if</span> decide (precedes a a)
   <span class="kr">then</span> a :: filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a) l0
   <span class="kr">else</span> filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a) l0) = <span class="mi">0</span>
‚à® Exists
    (<span class="kr">Œª</span> <span class="nv">a0</span> : A,
       length
         (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a0) (a :: l0)) =
       <span class="mi">0</span>) l0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk36"><span class="nb">destruct</span> (decide (precedes a a)); [<span class="bp">by</span> <span class="bp">contradict</span> p; <span class="nb">apply</span> precedes_irreflexive |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>a :: l0 ‚â† []</span></span></span><br><span><var>IHl0</var><span class="hyp-type"><b>: </b><span>l0 ‚â† []
‚Üí Exists
    (<span class="kr">Œª</span> <span class="nv">a</span> : A,
       length
         (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a) l0) =
       <span class="mi">0</span>) l0</span></span></span><br><span><var>HPa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>HPl0</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ precedes a a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a) l0) = <span class="mi">0</span>
‚à® Exists
    (<span class="kr">Œª</span> <span class="nv">a0</span> : A,
       length
         (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a0) (a :: l0)) =
       <span class="mi">0</span>) l0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk37"><span class="nb">assert</span> ({ l0=[] }+{l0 &lt;&gt; [] }) <span class="bp">by</span> (<span class="nb">destruct</span> l0; <span class="nb">clear</span>; [<span class="nb">left</span> | <span class="nb">right</span>]; <span class="bp">congruence</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>a :: l0 ‚â† []</span></span></span><br><span><var>IHl0</var><span class="hyp-type"><b>: </b><span>l0 ‚â† []
‚Üí Exists
    (<span class="kr">Œª</span> <span class="nv">a</span> : A,
       length
         (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a) l0) =
       <span class="mi">0</span>) l0</span></span></span><br><span><var>HPa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>HPl0</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ precedes a a</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>{l0 = []} + {l0 ‚â† []}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a) l0) = <span class="mi">0</span>
‚à® Exists
    (<span class="kr">Œª</span> <span class="nv">a0</span> : A,
       length
         (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a0) (a :: l0)) =
       <span class="mi">0</span>) l0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk38" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk38"><span class="nb">destruct</span> H <span class="kr">as</span> [? | Hl0]; [<span class="nb">subst</span> l0 |]; [<span class="bp">by</span> <span class="nb">left</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>a :: l0 ‚â† []</span></span></span><br><span><var>IHl0</var><span class="hyp-type"><b>: </b><span>l0 ‚â† []
‚Üí Exists
    (<span class="kr">Œª</span> <span class="nv">a</span> : A,
       length
         (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a) l0) =
       <span class="mi">0</span>) l0</span></span></span><br><span><var>HPa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>HPl0</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ precedes a a</span></span></span><br><span><var>Hl0</var><span class="hyp-type"><b>: </b><span>l0 ‚â† []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a) l0) = <span class="mi">0</span>
‚à® Exists
    (<span class="kr">Œª</span> <span class="nv">a0</span> : A,
       length
         (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a0) (a :: l0)) =
       <span class="mi">0</span>) l0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk39" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk39"><span class="nb">specialize</span> (IHl0 Hl0).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>a :: l0 ‚â† []</span></span></span><br><span><var>IHl0</var><span class="hyp-type"><b>: </b><span>Exists
  (<span class="kr">Œª</span> <span class="nv">a</span> : A,
     length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a) l0) =
     <span class="mi">0</span>) l0</span></span></span><br><span><var>HPa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>HPl0</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ precedes a a</span></span></span><br><span><var>Hl0</var><span class="hyp-type"><b>: </b><span>l0 ‚â† []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a) l0) = <span class="mi">0</span>
‚à® Exists
    (<span class="kr">Œª</span> <span class="nv">a0</span> : A,
       length
         (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a0) (a :: l0)) =
       <span class="mi">0</span>) l0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk3a" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk3a"><span class="nb">apply</span> Exists_exists <span class="kr">in</span> IHl0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>a :: l0 ‚â† []</span></span></span><br><span><var>IHl0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">x</span> : A,
  x ‚àà l0
  ‚àß length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b x) l0) =
    <span class="mi">0</span></span></span></span><br><span><var>HPa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>HPl0</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ precedes a a</span></span></span><br><span><var>Hl0</var><span class="hyp-type"><b>: </b><span>l0 ‚â† []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a) l0) = <span class="mi">0</span>
‚à® Exists
    (<span class="kr">Œª</span> <span class="nv">a0</span> : A,
       length
         (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a0) (a :: l0)) =
       <span class="mi">0</span>) l0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk3b" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk3b"><span class="nb">destruct</span> IHl0 <span class="kr">as</span> [x [Hin Hlen]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>a :: l0 ‚â† []</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ‚àà l0</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b x) l0) = <span class="mi">0</span></span></span></span><br><span><var>HPa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>HPl0</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ precedes a a</span></span></span><br><span><var>Hl0</var><span class="hyp-type"><b>: </b><span>l0 ‚â† []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a) l0) = <span class="mi">0</span>
‚à® Exists
    (<span class="kr">Œª</span> <span class="nv">a0</span> : A,
       length
         (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a0) (a :: l0)) =
       <span class="mi">0</span>) l0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk3c"><span class="nb">destruct</span> (decide (precedes a x)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>a :: l0 ‚â† []</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ‚àà l0</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b x) l0) = <span class="mi">0</span></span></span></span><br><span><var>HPa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>HPl0</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ precedes a a</span></span></span><br><span><var>Hl0</var><span class="hyp-type"><b>: </b><span>l0 ‚â† []</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>precedes a x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a) l0) = <span class="mi">0</span>
‚à® Exists
    (<span class="kr">Œª</span> <span class="nv">a0</span> : A,
       length
         (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a0) (a :: l0)) =
       <span class="mi">0</span>) l0</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="TopSort-v-chk3d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>a :: l0 ‚â† []</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ‚àà l0</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b x) l0) = <span class="mi">0</span></span></span></span><br><span><var>HPa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>HPl0</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ precedes a a</span></span></span><br><span><var>Hl0</var><span class="hyp-type"><b>: </b><span>l0 ‚â† []</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>¬¨ precedes a x</span></span></span><br></div><label class="goal-separator" for="TopSort-v-chk3d"><hr></label><div class="goal-conclusion">length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a) l0) = <span class="mi">0</span>
‚à® Exists
    (<span class="kr">Œª</span> <span class="nv">a0</span> : A,
       length
         (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a0) (a :: l0)) =
       <span class="mi">0</span>) l0</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk3e" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk3e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>a :: l0 ‚â† []</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ‚àà l0</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b x) l0) = <span class="mi">0</span></span></span></span><br><span><var>HPa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>HPl0</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ precedes a a</span></span></span><br><span><var>Hl0</var><span class="hyp-type"><b>: </b><span>l0 ‚â† []</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>precedes a x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a) l0) = <span class="mi">0</span>
‚à® Exists
    (<span class="kr">Œª</span> <span class="nv">a0</span> : A,
       length
         (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a0) (a :: l0)) =
       <span class="mi">0</span>) l0</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk3f" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk3f"><span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>a :: l0 ‚â† []</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ‚àà l0</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b x) l0) = <span class="mi">0</span></span></span></span><br><span><var>HPa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>HPl0</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ precedes a a</span></span></span><br><span><var>Hl0</var><span class="hyp-type"><b>: </b><span>l0 ‚â† []</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>precedes a x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a) l0) = <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk40" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk40"><span class="nb">specialize</span> (Forall_forall P l0); <span class="nb">intros</span> [Hall _].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>a :: l0 ‚â† []</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ‚àà l0</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b x) l0) = <span class="mi">0</span></span></span></span><br><span><var>HPa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>HPl0</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ precedes a a</span></span></span><br><span><var>Hl0</var><span class="hyp-type"><b>: </b><span>l0 ‚â† []</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>precedes a x</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span>Forall P l0 ‚Üí <span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà l0 ‚Üí P x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a) l0) = <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk41" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk41"><span class="nb">specialize</span> (Hall HPl0 x Hin).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>a :: l0 ‚â† []</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ‚àà l0</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b x) l0) = <span class="mi">0</span></span></span></span><br><span><var>HPa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>HPl0</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ precedes a a</span></span></span><br><span><var>Hl0</var><span class="hyp-type"><b>: </b><span>l0 ‚â† []</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>precedes a x</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span>P x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a) l0) = <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk42" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk42"><span class="kr">match goal with</span> |- <span class="nl">?X</span> = <span class="mi">0</span>  =&gt; <span class="nb">cut</span> (X &lt;= <span class="mi">0</span>) <span class="kr">end</span>; [<span class="bp">by</span> <span class="bp">lia</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>a :: l0 ‚â† []</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ‚àà l0</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b x) l0) = <span class="mi">0</span></span></span></span><br><span><var>HPa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>HPl0</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ precedes a a</span></span></span><br><span><var>Hl0</var><span class="hyp-type"><b>: </b><span>l0 ‚â† []</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>precedes a x</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span>P x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a) l0) ‚â§ <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk43" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk43"><span class="nb">rewrite</span> &lt;- Hlen; <span class="nb">clear</span> Hlen.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>a :: l0 ‚â† []</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ‚àà l0</span></span></span><br><span><var>HPa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>HPl0</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ precedes a a</span></span></span><br><span><var>Hl0</var><span class="hyp-type"><b>: </b><span>l0 ‚â† []</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>precedes a x</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span>P x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a) l0)
‚â§ length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b x) l0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk44" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk44"><span class="nb">apply</span> filter_length_fn.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>a :: l0 ‚â† []</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ‚àà l0</span></span></span><br><span><var>HPa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>HPl0</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ precedes a a</span></span></span><br><span><var>Hl0</var><span class="hyp-type"><b>: </b><span>l0 ‚â† []</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>precedes a x</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span>P x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Forall (<span class="kr">Œª</span> <span class="nv">a0</span> : A, precedes a0 a ‚Üí precedes a0 x) l0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk45" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk45"><span class="nb">revert</span> HPl0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>a :: l0 ‚â† []</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ‚àà l0</span></span></span><br><span><var>HPa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ precedes a a</span></span></span><br><span><var>Hl0</var><span class="hyp-type"><b>: </b><span>l0 ‚â† []</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>precedes a x</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span>P x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Forall P l0
‚Üí Forall (<span class="kr">Œª</span> <span class="nv">a0</span> : A, precedes a0 a ‚Üí precedes a0 x) l0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk46" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk46"><span class="nb">intro</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>a :: l0 ‚â† []</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ‚àà l0</span></span></span><br><span><var>HPa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ precedes a a</span></span></span><br><span><var>Hl0</var><span class="hyp-type"><b>: </b><span>l0 ‚â† []</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>precedes a x</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span>P x</span></span></span><br><span><var>HPl0</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Forall (<span class="kr">Œª</span> <span class="nv">a0</span> : A, precedes a0 a ‚Üí precedes a0 x) l0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk47" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk47"><span class="nb">apply</span> (Forall_impl P); [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>a :: l0 ‚â† []</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ‚àà l0</span></span></span><br><span><var>HPa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ precedes a a</span></span></span><br><span><var>Hl0</var><span class="hyp-type"><b>: </b><span>l0 ‚â† []</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>precedes a x</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span>P x</span></span></span><br><span><var>HPl0</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">x0</span> : A, P x0 ‚Üí precedes x0 a ‚Üí precedes x0 x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk48" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk48"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>a :: l0 ‚â† []</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ‚àà l0</span></span></span><br><span><var>HPa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ precedes a a</span></span></span><br><span><var>Hl0</var><span class="hyp-type"><b>: </b><span>l0 ‚â† []</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>precedes a x</span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span>P x</span></span></span><br><span><var>HPl0</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>x0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>P x0</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>precedes x0 a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">precedes x0 x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> precedes_transitive <span class="kr">with</span> a.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk49" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk49">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>a :: l0 ‚â† []</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ‚àà l0</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b x) l0) = <span class="mi">0</span></span></span></span><br><span><var>HPa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>HPl0</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ precedes a a</span></span></span><br><span><var>Hl0</var><span class="hyp-type"><b>: </b><span>l0 ‚â† []</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>¬¨ precedes a x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a) l0) = <span class="mi">0</span>
‚à® Exists
    (<span class="kr">Œª</span> <span class="nv">a0</span> : A,
       length
         (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a0) (a :: l0)) =
       <span class="mi">0</span>) l0</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk4a" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk4a"><span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>a :: l0 ‚â† []</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ‚àà l0</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b x) l0) = <span class="mi">0</span></span></span></span><br><span><var>HPa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>HPl0</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ precedes a a</span></span></span><br><span><var>Hl0</var><span class="hyp-type"><b>: </b><span>l0 ‚â† []</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>¬¨ precedes a x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Exists
  (<span class="kr">Œª</span> <span class="nv">a0</span> : A,
     length
       (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b a0) (a :: l0)) = <span class="mi">0</span>)
  l0</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk4b" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk4b"><span class="nb">apply</span> Exists_exists.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>a :: l0 ‚â† []</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ‚àà l0</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b x) l0) = <span class="mi">0</span></span></span></span><br><span><var>HPa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>HPl0</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ precedes a a</span></span></span><br><span><var>Hl0</var><span class="hyp-type"><b>: </b><span>l0 ‚â† []</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>¬¨ precedes a x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">x</span> : A,
  x ‚àà l0
  ‚àß length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b x) (a :: l0)) =
    <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk4c" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk4c"><span class="kr">exists</span> <span class="nv">x</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>a :: l0 ‚â† []</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ‚àà l0</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b x) l0) = <span class="mi">0</span></span></span></span><br><span><var>HPa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>HPl0</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ precedes a a</span></span></span><br><span><var>Hl0</var><span class="hyp-type"><b>: </b><span>l0 ‚â† []</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>¬¨ precedes a x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà l0
‚àß length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b x) (a :: l0)) =
  <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk4d" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk4d"><span class="nb">rewrite</span> filter_cons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>a :: l0 ‚â† []</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ‚àà l0</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>length (filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b x) l0) = <span class="mi">0</span></span></span></span><br><span><var>HPa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>HPl0</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ precedes a a</span></span></span><br><span><var>Hl0</var><span class="hyp-type"><b>: </b><span>l0 ‚â† []</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>¬¨ precedes a x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà l0
‚àß length
    (<span class="kr">if</span> decide (precedes a x)
     <span class="kr">then</span> a :: filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b x) l0
     <span class="kr">else</span> filter (<span class="kr">Œª</span> <span class="nv">b</span> : A, precedes b x) l0) = <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> (decide (precedes a x)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  Hence, computing <span class="inlinecode"><span class="id" title="var">min_predecessors</span></span> on <code>l</code> yields an element with
  no predecessors.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk4e" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk4e"><span class="kn">Lemma</span> <span class="nf">min_predecessors_zero</span>
  (<span class="nv">l&#39;</span> : list A)
  (<span class="nv">a</span> : A)
  (<span class="nv">Hl</span> : l = a :: l&#39;)
  (<span class="nv">min</span> := min_predecessors l&#39; a)
  : count_predecessors min = <span class="mi">0</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>HPl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>l = a :: l&#39;</span></span></span><br><span><var>min</var><span><span class="hyp-body"><b>:= </b><span>min_predecessors l&#39; a</span></span><span class="hyp-type"><b>: </b><span>A</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">count_predecessors min = <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk4f" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk4f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>HPl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>l = a :: l&#39;</span></span></span><br><span><var>min</var><span><span class="hyp-body"><b>:= </b><span>min_predecessors l&#39; a</span></span><span class="hyp-type"><b>: </b><span>A</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">count_predecessors min = <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk50" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk50"><span class="nb">assert</span> (Hl&#39; : l &lt;&gt; []) <span class="bp">by</span> (<span class="nb">intro</span> H; <span class="nb">rewrite</span> Hl <span class="kr">in</span> H; <span class="nb">inversion</span> H).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>HPl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>l = a :: l&#39;</span></span></span><br><span><var>min</var><span><span class="hyp-body"><b>:= </b><span>min_predecessors l&#39; a</span></span><span class="hyp-type"><b>: </b><span>A</span></span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>l ‚â† []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">count_predecessors min = <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk51" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk51"><span class="nb">specialize</span> (count_predecessors_zero Hl&#39;); <span class="nb">intro</span> Hx.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>HPl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>l = a :: l&#39;</span></span></span><br><span><var>min</var><span><span class="hyp-body"><b>:= </b><span>min_predecessors l&#39; a</span></span><span class="hyp-type"><b>: </b><span>A</span></span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>l ‚â† []</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>Exists (<span class="kr">Œª</span> <span class="nv">a</span> : A, count_predecessors a = <span class="mi">0</span>) l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">count_predecessors min = <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk52" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk52"><span class="nb">apply</span> Exists_exists <span class="kr">in</span> Hx.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>HPl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>l = a :: l&#39;</span></span></span><br><span><var>min</var><span><span class="hyp-body"><b>:= </b><span>min_predecessors l&#39; a</span></span><span class="hyp-type"><b>: </b><span>A</span></span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>l ‚â† []</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">x</span> : A, x ‚àà l ‚àß count_predecessors x = <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">count_predecessors min = <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk53" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk53"><span class="nb">destruct</span> Hx <span class="kr">as</span> [x [Hinx Hcountx]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>HPl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>l = a :: l&#39;</span></span></span><br><span><var>min</var><span><span class="hyp-body"><b>:= </b><span>min_predecessors l&#39; a</span></span><span class="hyp-type"><b>: </b><span>A</span></span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>l ‚â† []</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hinx</var><span class="hyp-type"><b>: </b><span>x ‚àà l</span></span></span><br><span><var>Hcountx</var><span class="hyp-type"><b>: </b><span>count_predecessors x = <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">count_predecessors min = <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk54" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk54"><span class="nb">specialize</span> (min_predecessors_correct l&#39; a); <span class="nb">simpl</span>; <span class="nb">intro</span> Hall.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>HPl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>l = a :: l&#39;</span></span></span><br><span><var>min</var><span><span class="hyp-body"><b>:= </b><span>min_predecessors l&#39; a</span></span><span class="hyp-type"><b>: </b><span>A</span></span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>l ‚â† []</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hinx</var><span class="hyp-type"><b>: </b><span>x ‚àà l</span></span></span><br><span><var>Hcountx</var><span class="hyp-type"><b>: </b><span>count_predecessors x = <span class="mi">0</span></span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span>Forall
  (<span class="kr">Œª</span> <span class="nv">b</span> : A,
     count_predecessors (min_predecessors l&#39; a)
     ‚â§ count_predecessors b) 
  (a :: l&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">count_predecessors min = <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk55" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk55"><span class="nb">rewrite</span> Forall_forall <span class="kr">in</span> Hall.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>HPl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>l = a :: l&#39;</span></span></span><br><span><var>min</var><span><span class="hyp-body"><b>:= </b><span>min_predecessors l&#39; a</span></span><span class="hyp-type"><b>: </b><span>A</span></span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>l ‚â† []</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hinx</var><span class="hyp-type"><b>: </b><span>x ‚àà l</span></span></span><br><span><var>Hcountx</var><span class="hyp-type"><b>: </b><span>count_predecessors x = <span class="mi">0</span></span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A,
  x ‚àà a :: l&#39;
  ‚Üí count_predecessors (min_predecessors l&#39; a)
    ‚â§ count_predecessors x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">count_predecessors min = <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk56" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk56"><span class="nb">rewrite</span> Hl <span class="kr">in</span> Hinx.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>HPl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P P)</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>l = a :: l&#39;</span></span></span><br><span><var>min</var><span><span class="hyp-body"><b>:= </b><span>min_predecessors l&#39; a</span></span><span class="hyp-type"><b>: </b><span>A</span></span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>l ‚â† []</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hinx</var><span class="hyp-type"><b>: </b><span>x ‚àà a :: l&#39;</span></span></span><br><span><var>Hcountx</var><span class="hyp-type"><b>: </b><span>count_predecessors x = <span class="mi">0</span></span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A,
  x ‚àà a :: l&#39;
  ‚Üí count_predecessors (min_predecessors l&#39; a)
    ‚â§ count_predecessors x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">count_predecessors min = <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">specialize</span> (Hall x Hinx); <span class="nb">unfold</span> min; <span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sec_min_predecessors</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk57" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk57">#[export] <span class="kn">Instance</span> <span class="nf">precedes_P_transitive</span>
  `{Transitive A preceeds} (P : A -&gt; <span class="kt">Prop</span>)
  : Transitive (precedes_P preceeds P).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>preceeds</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Transitive preceeds</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Transitive (precedes_P preceeds P)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk58" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk58"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>preceeds</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Transitive preceeds</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Transitive (precedes_P preceeds P)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk59" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk59"><span class="nb">intros</span> [x Hx] [y Hy] [z Hz]; <span class="nb">unfold</span> precedes_P.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>preceeds</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Transitive preceeds</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>P x</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hy</var><span class="hyp-type"><b>: </b><span>P y</span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hz</var><span class="hyp-type"><b>: </b><span>P z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">preceeds (`(x ‚Üæ Hx)) (`(y ‚Üæ Hy))
‚Üí preceeds (`(y ‚Üæ Hy)) (`(z ‚Üæ Hz))
  ‚Üí preceeds (`(x ‚Üæ Hx)) (`(z ‚Üæ Hz))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">etransitivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk5a" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk5a">#[export] <span class="kn">Instance</span> <span class="nf">precedes_P_irreflexive</span>
  `{Irreflexive A preceeds} (P : A -&gt; <span class="kt">Prop</span>)
  : Irreflexive (precedes_P preceeds P).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>preceeds</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Irreflexive preceeds</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Irreflexive (precedes_P preceeds P)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk5b" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk5b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>preceeds</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Irreflexive preceeds</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Irreflexive (precedes_P preceeds P)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk5c" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk5c"><span class="nb">intros</span> [x Hx]; <span class="nb">unfold</span> precedes_P, complement; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>preceeds</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Irreflexive preceeds</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>P x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">preceeds x x ‚Üí <span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> irreflexivity.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk5d" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk5d">#[export] <span class="kn">Instance</span> <span class="nf">precedes_P_strict</span>
  `{StrictOrder A preceeds} (P : A -&gt; <span class="kt">Prop</span>)
  : StrictOrder (precedes_P preceeds P).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>preceeds</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictOrder preceeds</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">StrictOrder (precedes_P preceeds P)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk5e" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk5e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>preceeds</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>StrictOrder preceeds</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">StrictOrder (precedes_P preceeds P)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">split</span>; <span class="nb">typeclasses eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sec_topologically_sorted</span>.</span></span></pre><div class="doc">
<a id="lab3"></a><h2 class="section">Definition and properties of topologically sorted lists</h2>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">A</span> : <span class="kt">Type</span>}
  (<span class="nv">precedes</span> : relation A)
  `{!RelDecision precedes}
  (l : list A)
  .</span></span></pre><div class="doc">
  We say that a list <code>l</code> is <span class="inlinecode"><span class="id" title="var">topologically_sorted</span></span> w.r.t a <code>precedes</code>
  relation iff <code>a precedes b</code> implies that <code>a</code> cannot occur after <code>b</code> in <code>l</code>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">topologically_sorted</span>
  :=
  <span class="kr">forall</span>
    (<span class="nv">a</span> <span class="nv">b</span> : A)
    (<span class="nv">Hab</span> : precedes a b)
    (<span class="nv">l1</span> <span class="nv">l2</span> : list A)
    (<span class="nv">Heq</span> : l = l1 ++ [b] ++ l2)
    , a ‚àâ l2.</span></span></pre><div class="doc">
  The following properties assume that <code>precedes</code> determines a <span class="inlinecode"><span class="id" title="var">StrictOrder</span></span>
  on the list.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  (<span class="nv">P</span> : A -&gt; <span class="kt">Prop</span>)
  {<span class="nv">Hso</span> : StrictOrder (precedes_P precedes P)}
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sec_topologically_sorted_fixed_list</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  (<span class="nv">Hl</span> : Forall P l)
  (<span class="nv">Hts</span> : topologically_sorted)
  .</span></span></pre><div class="doc">
  If <code>l</code> is <span class="inlinecode"><span class="id" title="var">topologically_sorted</span></span>, then for any occurrences
  of <code>a</code> and <code>b</code> in <code>l</code> such that <code>a precedes b</code> it must be that
  the occurrence of <code>a</code> is before that of <code>b</code>.

<div class="paragraph"> </div>

  Hence all occurrences of <code>a</code> must be before all occurrences of <code>b</code> in
  a <span class="inlinecode"><span class="id" title="var">topologically_sorted</span></span> list.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk5f" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk5f"><span class="kn">Lemma</span> <span class="nf">topologically_sorted_occurrences_ordering</span>
  (<span class="nv">a</span> <span class="nv">b</span> : A)
  (<span class="nv">Hab</span> : precedes a b)
  (<span class="nv">la1</span> <span class="nv">la2</span> : list A)
  (<span class="nv">Heqa</span> : l = la1 ++ [a] ++ la2)
  (<span class="nv">lb1</span> <span class="nv">lb2</span> : list A)
  (<span class="nv">Heqb</span> : l = lb1 ++ [b] ++ lb2)
  : <span class="kr">exists</span> (<span class="nv">lab</span> : list A), lb1 = la1 ++ a :: lab.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>la1, la2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqa</var><span class="hyp-type"><b>: </b><span>l = la1 ++ [a] ++ la2</span></span></span><br><span><var>lb1, lb2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqb</var><span class="hyp-type"><b>: </b><span>l = lb1 ++ [b] ++ lb2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">lab</span> : list A, lb1 = la1 ++ a :: lab</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk60" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk60"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>la1, la2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqa</var><span class="hyp-type"><b>: </b><span>l = la1 ++ [a] ++ la2</span></span></span><br><span><var>lb1, lb2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqb</var><span class="hyp-type"><b>: </b><span>l = lb1 ++ [b] ++ lb2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">lab</span> : list A, lb1 = la1 ++ a :: lab</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk61" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk61"><span class="nb">assert</span> (Hpa : P a).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>la1, la2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqa</var><span class="hyp-type"><b>: </b><span>l = la1 ++ [a] ++ la2</span></span></span><br><span><var>lb1, lb2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqb</var><span class="hyp-type"><b>: </b><span>l = lb1 ++ [b] ++ lb2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P a</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="TopSort-v-chk62" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>la1, la2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqa</var><span class="hyp-type"><b>: </b><span>l = la1 ++ [a] ++ la2</span></span></span><br><span><var>lb1, lb2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqb</var><span class="hyp-type"><b>: </b><span>l = lb1 ++ [b] ++ lb2</span></span></span><br><span><var>Hpa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br></div><label class="goal-separator" for="TopSort-v-chk62"><hr></label><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">lab</span> : list A, lb1 = la1 ++ a :: lab</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk63" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk63">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>la1, la2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqa</var><span class="hyp-type"><b>: </b><span>l = la1 ++ [a] ++ la2</span></span></span><br><span><var>lb1, lb2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqb</var><span class="hyp-type"><b>: </b><span>l = lb1 ++ [b] ++ lb2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk64" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk64"><span class="nb">rewrite</span> Forall_forall <span class="kr">in</span> Hl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà l ‚Üí P x</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>la1, la2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqa</var><span class="hyp-type"><b>: </b><span>l = la1 ++ [a] ++ la2</span></span></span><br><span><var>lb1, lb2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqb</var><span class="hyp-type"><b>: </b><span>l = lb1 ++ [b] ++ lb2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk65" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk65"><span class="nb">apply</span> Hl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà l ‚Üí P x</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>la1, la2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqa</var><span class="hyp-type"><b>: </b><span>l = la1 ++ [a] ++ la2</span></span></span><br><span><var>lb1, lb2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqb</var><span class="hyp-type"><b>: </b><span>l = lb1 ++ [b] ++ lb2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk66" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk66"><span class="nb">rewrite</span> Heqa, !elem_of_app, elem_of_list_singleton.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà l ‚Üí P x</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>la1, la2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqa</var><span class="hyp-type"><b>: </b><span>l = la1 ++ [a] ++ la2</span></span></span><br><span><var>lb1, lb2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqb</var><span class="hyp-type"><b>: </b><span>l = lb1 ++ [b] ++ lb2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà la1 ‚à® a = a ‚à® a ‚àà la2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk67" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk67">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>la1, la2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqa</var><span class="hyp-type"><b>: </b><span>l = la1 ++ [a] ++ la2</span></span></span><br><span><var>lb1, lb2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqb</var><span class="hyp-type"><b>: </b><span>l = lb1 ++ [b] ++ lb2</span></span></span><br><span><var>Hpa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">lab</span> : list A, lb1 = la1 ++ a :: lab</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk68" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk68"><span class="nb">specialize</span> (Hts a b Hab lb1 lb2 Heqb).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>lb2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>a ‚àâ lb2</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>la1, la2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqa</var><span class="hyp-type"><b>: </b><span>l = la1 ++ [a] ++ la2</span></span></span><br><span><var>lb1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqb</var><span class="hyp-type"><b>: </b><span>l = lb1 ++ [b] ++ lb2</span></span></span><br><span><var>Hpa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">lab</span> : list A, lb1 = la1 ++ a :: lab</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk69" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk69"><span class="nb">rewrite</span> Heqa <span class="kr">in</span> Heqb.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>lb2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>a ‚àâ lb2</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>la1, la2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqa</var><span class="hyp-type"><b>: </b><span>l = la1 ++ [a] ++ la2</span></span></span><br><span><var>lb1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqb</var><span class="hyp-type"><b>: </b><span>la1 ++ [a] ++ la2 = lb1 ++ [b] ++ lb2</span></span></span><br><span><var>Hpa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">lab</span> : list A, lb1 = la1 ++ a :: lab</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk6a" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk6a"><span class="nb">assert</span> (Ha : a ‚àâ b :: lb2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>lb2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>a ‚àâ lb2</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>la1, la2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqa</var><span class="hyp-type"><b>: </b><span>l = la1 ++ [a] ++ la2</span></span></span><br><span><var>lb1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqb</var><span class="hyp-type"><b>: </b><span>la1 ++ [a] ++ la2 = lb1 ++ [b] ++ lb2</span></span></span><br><span><var>Hpa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àâ b :: lb2</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="TopSort-v-chk6b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>lb2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>a ‚àâ lb2</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>la1, la2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqa</var><span class="hyp-type"><b>: </b><span>l = la1 ++ [a] ++ la2</span></span></span><br><span><var>lb1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqb</var><span class="hyp-type"><b>: </b><span>la1 ++ [a] ++ la2 = lb1 ++ [b] ++ lb2</span></span></span><br><span><var>Hpa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àâ b :: lb2</span></span></span><br></div><label class="goal-separator" for="TopSort-v-chk6b"><hr></label><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">lab</span> : list A, lb1 = la1 ++ a :: lab</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk6c" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk6c">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>lb2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>a ‚àâ lb2</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>la1, la2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqa</var><span class="hyp-type"><b>: </b><span>l = la1 ++ [a] ++ la2</span></span></span><br><span><var>lb1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqb</var><span class="hyp-type"><b>: </b><span>la1 ++ [a] ++ la2 = lb1 ++ [b] ++ lb2</span></span></span><br><span><var>Hpa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àâ b :: lb2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk6d" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk6d"><span class="nb">intro</span> Ha.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>lb2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>a ‚àâ lb2</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>la1, la2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqa</var><span class="hyp-type"><b>: </b><span>l = la1 ++ [a] ++ la2</span></span></span><br><span><var>lb1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqb</var><span class="hyp-type"><b>: </b><span>la1 ++ [a] ++ la2 = lb1 ++ [b] ++ lb2</span></span></span><br><span><var>Hpa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà b :: lb2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk6e" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk6e"><span class="nb">apply</span> Hts.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>lb2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>a ‚àâ lb2</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>la1, la2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqa</var><span class="hyp-type"><b>: </b><span>l = la1 ++ [a] ++ la2</span></span></span><br><span><var>lb1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqb</var><span class="hyp-type"><b>: </b><span>la1 ++ [a] ++ la2 = lb1 ++ [b] ++ lb2</span></span></span><br><span><var>Hpa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà b :: lb2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà lb2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk6f" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk6f"><span class="nb">rewrite</span> elem_of_cons <span class="kr">in</span> Ha.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>lb2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>a ‚àâ lb2</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>la1, la2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqa</var><span class="hyp-type"><b>: </b><span>l = la1 ++ [a] ++ la2</span></span></span><br><span><var>lb1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqb</var><span class="hyp-type"><b>: </b><span>la1 ++ [a] ++ la2 = lb1 ++ [b] ++ lb2</span></span></span><br><span><var>Hpa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a = b ‚à® a ‚àà lb2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà lb2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk70" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk70"><span class="nb">destruct</span> Ha; <span class="nb">subst</span>; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>la1, la2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes b b</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (la1 ++ [b] ++ la2)</span></span></span><br><span><var>lb2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>b ‚àâ lb2</span></span></span><br><span><var>lb1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hpa</var><span class="hyp-type"><b>: </b><span>P b</span></span></span><br><span><var>Heqb</var><span class="hyp-type"><b>: </b><span>la1 ++ [b] ++ la2 = lb1 ++ [b] ++ lb2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">b ‚àà lb2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (precedes_irreflexive precedes P b Hpa) <span class="kr">in</span> Hab.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk71" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk71">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>lb2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>a ‚àâ lb2</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>la1, la2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqa</var><span class="hyp-type"><b>: </b><span>l = la1 ++ [a] ++ la2</span></span></span><br><span><var>lb1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqb</var><span class="hyp-type"><b>: </b><span>la1 ++ [a] ++ la2 = lb1 ++ [b] ++ lb2</span></span></span><br><span><var>Hpa</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àâ b :: lb2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">lab</span> : list A, lb1 = la1 ++ a :: lab</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (occurrences_ordering a b la1 la2 lb1 lb2 Heqb Ha).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  If <code>a</code> and <code>b</code> are in a <span class="inlinecode"><span class="id" title="var">topologically_sorted</span></span> list <code>lts</code> and <code>a precedes b</code>
  then there is an <code>a</code> before any occurrence of <code>b</code> in <code>lts</code>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk72" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk72"><span class="kn">Corollary</span> <span class="nf">top_sort_before</span>
  (<span class="nv">a</span> <span class="nv">b</span> : A)
  (<span class="nv">Hab</span> : precedes a b)
  (<span class="nv">Ha</span> : a ‚àà l)
  (<span class="nv">l1</span> <span class="nv">l2</span> : list A)
  (<span class="nv">Heq</span> : l = l1 ++ [b] ++ l2)
  : a ‚àà l1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>l = l1 ++ [b] ++ l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà l1</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk73" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk73"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>l = l1 ++ [b] ++ l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà l1</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk74" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk74"><span class="nb">apply</span> elem_of_list_split <span class="kr">in</span> Ha.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A, l = l1 ++ a :: l2</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>l = l1 ++ [b] ++ l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà l1</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk75" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk75"><span class="nb">destruct</span> Ha <span class="kr">as</span> [la1 [la2 Ha]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>la1, la2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>l = la1 ++ a :: la2</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>l = l1 ++ [b] ++ l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà l1</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk76" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk76"><span class="nb">specialize</span> (topologically_sorted_occurrences_ordering a b Hab la1 la2 Ha l1 l2 Heq).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>la1, la2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>l = la1 ++ a :: la2</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>l = l1 ++ [b] ++ l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÉ</span> <span class="nv">lab</span> : list A, l1 = la1 ++ a :: lab) ‚Üí a ‚àà l1</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk77" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk77"><span class="nb">intros</span> [lab -&gt;].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>la1, la2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>l = la1 ++ a :: la2</span></span></span><br><span><var>l2, lab</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>l = (la1 ++ a :: lab) ++ [b] ++ l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà la1 ++ a :: lab</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> elem_of_app; <span class="nb">right</span>; <span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  As a corollary of the above, if <code>a precedes b</code> then <code>a</code> can be found before
  <code>b</code> in l.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk78" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk78"><span class="kn">Corollary</span> <span class="nf">top_sort_precedes</span>
  (<span class="nv">a</span> <span class="nv">b</span> : A)
  (<span class="nv">Hab</span> : precedes a b)
  (<span class="nv">Ha</span> : a ‚àà l)
  (<span class="nv">Hb</span> : b ‚àà l)
  : <span class="kr">exists</span> <span class="nv">l1</span> <span class="nv">l2</span> <span class="nv">l3</span>, l = l1 ++ [a] ++ l2 ++ [b] ++ l3.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>Hb</var><span class="hyp-type"><b>: </b><span>b ‚àà l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">l1</span> <span class="nv">l2</span> <span class="nv">l3</span> : list A, l = l1 ++ [a] ++ l2 ++ [b] ++ l3</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk79" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk79"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>Hb</var><span class="hyp-type"><b>: </b><span>b ‚àà l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">l1</span> <span class="nv">l2</span> <span class="nv">l3</span> : list A, l = l1 ++ [a] ++ l2 ++ [b] ++ l3</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk7a" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk7a"><span class="nb">apply</span> elem_of_list_split <span class="kr">in</span> Hb.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>Hb</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A, l = l1 ++ b :: l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">l1</span> <span class="nv">l2</span> <span class="nv">l3</span> : list A, l = l1 ++ [a] ++ l2 ++ [b] ++ l3</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk7b" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk7b"><span class="nb">destruct</span> Hb <span class="kr">as</span> [l12 [l3 Hb&#39;]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>l12, l3</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hb'</var><span class="hyp-type"><b>: </b><span>l = l12 ++ b :: l3</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">l1</span> <span class="nv">l2</span> <span class="nv">l3</span> : list A, l = l1 ++ [a] ++ l2 ++ [b] ++ l3</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk7c" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk7c"><span class="nb">specialize</span> (top_sort_before a b Hab Ha l12 l3 Hb&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>l12, l3</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hb'</var><span class="hyp-type"><b>: </b><span>l = l12 ++ b :: l3</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà l12
‚Üí <span class="kr">‚àÉ</span> <span class="nv">l1</span> <span class="nv">l2</span> <span class="nv">l3</span> : list A,
    l = l1 ++ [a] ++ l2 ++ [b] ++ l3</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk7d" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk7d"><span class="nb">intros</span> Ha12.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>l12, l3</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hb'</var><span class="hyp-type"><b>: </b><span>l = l12 ++ b :: l3</span></span></span><br><span><var>Ha12</var><span class="hyp-type"><b>: </b><span>a ‚àà l12</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">l1</span> <span class="nv">l2</span> <span class="nv">l3</span> : list A, l = l1 ++ [a] ++ l2 ++ [b] ++ l3</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk7e" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk7e"><span class="nb">apply</span> elem_of_list_split <span class="kr">in</span> Ha12.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>l12, l3</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hb'</var><span class="hyp-type"><b>: </b><span>l = l12 ++ b :: l3</span></span></span><br><span><var>Ha12</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A, l12 = l1 ++ a :: l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">l1</span> <span class="nv">l2</span> <span class="nv">l3</span> : list A, l = l1 ++ [a] ++ l2 ++ [b] ++ l3</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk7f" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk7f"><span class="nb">destruct</span> Ha12 <span class="kr">as</span> [l1 [l2 -&gt;]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>l3, l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hb'</var><span class="hyp-type"><b>: </b><span>l = (l1 ++ a :: l2) ++ b :: l3</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">l1</span> <span class="nv">l2</span> <span class="nv">l3</span> : list A, l = l1 ++ [a] ++ l2 ++ [b] ++ l3</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk80" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk80"><span class="kr">exists</span> <span class="nv">l1</span>, l2, l3.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>l3, l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hb'</var><span class="hyp-type"><b>: </b><span>l = (l1 ++ a :: l2) ++ b :: l3</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l = l1 ++ [a] ++ l2 ++ [b] ++ l3</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> Hb&#39;, &lt;- app_assoc.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sec_topologically_sorted_fixed_list</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sec_topologically_sorted</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk81" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk81"><span class="kn">Lemma</span> <span class="nf">toplogically_sorted_remove_last</span>
  {<span class="nv">A</span> : <span class="kt">Type</span>}
  (<span class="nv">precedes</span> : relation A)
  `{!RelDecision precedes}
  (l : list A)
  (Hts : topologically_sorted precedes l)
  (init : list A)
  (final : A)
  (Hinit : l = init ++ [final])
  : topologically_sorted precedes init.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted precedes l</span></span></span><br><span><var>init</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>final</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>l = init ++ [final]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">topologically_sorted precedes init</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk82" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk82"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted precedes l</span></span></span><br><span><var>init</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>final</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>l = init ++ [final]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">topologically_sorted precedes init</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk83" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk83"><span class="nb">subst</span> l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>init</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>final</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted precedes (init ++ [final])</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">topologically_sorted precedes init</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk84" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk84"><span class="nb">intros</span> a b Hab l1 l2 Hinit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>init</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>final</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted precedes (init ++ [final])</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>init = l1 ++ [b] ++ l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àâ l2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk85" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk85"><span class="nb">specialize</span> (Hts a b Hab l1 (l2 ++ [final])).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>init</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>final, a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>init ++ [final] = l1 ++ [b] ++ l2 ++ [final]
‚Üí a ‚àâ l2 ++ [final]</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>init = l1 ++ [b] ++ l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àâ l2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk86" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk86"><span class="nb">rewrite</span> Hinit <span class="kr">in</span> Hts.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>init</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>final, a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>(l1 ++ [b] ++ l2) ++ [final] =
l1 ++ [b] ++ l2 ++ [final] ‚Üí 
a ‚àâ l2 ++ [final]</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>init = l1 ++ [b] ++ l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àâ l2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk87" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk87"><span class="kp">repeat</span> <span class="nb">rewrite</span> &lt;- app_assoc <span class="kr">in</span> Hts.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>init</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>final, a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>l1 ++ [b] ++ l2 ++ [final] =
l1 ++ [b] ++ l2 ++ [final] ‚Üí 
a ‚àâ l2 ++ [final]</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>init = l1 ++ [b] ++ l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àâ l2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk88" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk88"><span class="nb">specialize</span> (Hts eq_refl).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>init</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>final, a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>a ‚àâ l2 ++ [final]</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>init = l1 ++ [b] ++ l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àâ l2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk89" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk89"><span class="nb">intro</span> Hnin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>init</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>final, a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>a ‚àâ l2 ++ [final]</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>init = l1 ++ [b] ++ l2</span></span></span><br><span><var>Hnin</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk8a" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk8a"><span class="nb">apply</span> Hts.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>init</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>final, a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>a ‚àâ l2 ++ [final]</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>init = l1 ++ [b] ++ l2</span></span></span><br><span><var>Hnin</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà l2 ++ [final]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> elem_of_app; <span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">precedes_closed</span>
  {<span class="nv">A</span> : <span class="kt">Type</span>}
  (<span class="nv">precedes</span> : relation A)
  `{!RelDecision precedes}
  (s : <span class="nb">set</span> A)
  : <span class="kt">Prop</span>
  :=
  Forall (<span class="kr">fun</span> (<span class="nv">b</span> : A) =&gt; <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">Hmj</span> : precedes a b), a ‚àà s) s.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk8b" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk8b"><span class="kn">Lemma</span> <span class="nf">precedes_closed_set_eq</span>
  {<span class="nv">A</span> : <span class="kt">Type</span>}
  (<span class="nv">precedes</span> : relation A)
  `{!RelDecision precedes}
  (s1 s2 : <span class="nb">set</span> A)
  (Heq : set_eq s1 s2)
  : precedes_closed precedes s1 &lt;-&gt; precedes_closed precedes s2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>set_eq s1 s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">precedes_closed precedes s1
‚Üî precedes_closed precedes s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk8c" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk8c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>set_eq s1 s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">precedes_closed precedes s1
‚Üî precedes_closed precedes s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">unfold</span> precedes_closed; <span class="kp">repeat</span> <span class="nb">rewrite</span> Forall_forall; <span class="nb">firstorder</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk8d" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk8d"><span class="kn">Lemma</span> <span class="nf">topologically_sorted_precedes_closed_remove_last</span>
  {<span class="nv">A</span> : <span class="kt">Type</span>}
  (<span class="nv">precedes</span> : relation A)
  `{!RelDecision precedes}
  (P : A -&gt; <span class="kt">Prop</span>)
  {Hso : StrictOrder (precedes_P precedes P)}
  (l : list A)
  (Hl : Forall P l)
  (Hts : topologically_sorted precedes l)
  (init : list A)
  (final : A)
  (Hinit : l = init ++ [final])
  (Hpc : precedes_closed precedes l)
  : precedes_closed precedes init.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted precedes l</span></span></span><br><span><var>init</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>final</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>l = init ++ [final]</span></span></span><br><span><var>Hpc</var><span class="hyp-type"><b>: </b><span>precedes_closed precedes l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">precedes_closed precedes init</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk8e" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk8e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted precedes l</span></span></span><br><span><var>init</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>final</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>l = init ++ [final]</span></span></span><br><span><var>Hpc</var><span class="hyp-type"><b>: </b><span>precedes_closed precedes l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">precedes_closed precedes init</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk8f" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk8f"><span class="nb">unfold</span> precedes_closed <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted precedes l</span></span></span><br><span><var>init</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>final</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>l = init ++ [final]</span></span></span><br><span><var>Hpc</var><span class="hyp-type"><b>: </b><span>Forall (<span class="kr">Œª</span> <span class="nv">b</span> : A, <span class="kr">‚àÄ</span> <span class="nv">a</span> : A, precedes a b ‚Üí a ‚àà l)
  l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Forall (<span class="kr">Œª</span> <span class="nv">b</span> : A, <span class="kr">‚àÄ</span> <span class="nv">a</span> : A, precedes a b ‚Üí a ‚àà init)
  init</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk90" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk90"><span class="nb">rewrite</span> Forall_forall <span class="kr">in</span> Hpc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted precedes l</span></span></span><br><span><var>init</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>final</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>l = init ++ [final]</span></span></span><br><span><var>Hpc</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà l ‚Üí <span class="kr">‚àÄ</span> <span class="nv">a</span> : A, precedes a x ‚Üí a ‚àà l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Forall (<span class="kr">Œª</span> <span class="nv">b</span> : A, <span class="kr">‚àÄ</span> <span class="nv">a</span> : A, precedes a b ‚Üí a ‚àà init)
  init</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk91" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk91"><span class="nb">rewrite</span> Forall_forall.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted precedes l</span></span></span><br><span><var>init</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>final</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>l = init ++ [final]</span></span></span><br><span><var>Hpc</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà l ‚Üí <span class="kr">‚àÄ</span> <span class="nv">a</span> : A, precedes a x ‚Üí a ‚àà l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà init ‚Üí <span class="kr">‚àÄ</span> <span class="nv">a</span> : A, precedes a x ‚Üí a ‚àà init</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk92" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk92"><span class="nb">subst</span> l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>init</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>final</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted precedes (init ++ [final])</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (init ++ [final])</span></span></span><br><span><var>Hpc</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A,
  x ‚àà init ++ [final]
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">a</span> : A, precedes a x ‚Üí a ‚àà init ++ [final]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà init ‚Üí <span class="kr">‚àÄ</span> <span class="nv">a</span> : A, precedes a x ‚Üí a ‚àà init</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk93" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk93"><span class="nb">intros</span> b Hb a Hab.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>init</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>final</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted precedes (init ++ [final])</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (init ++ [final])</span></span></span><br><span><var>Hpc</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A,
  x ‚àà init ++ [final]
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">a</span> : A, precedes a x ‚Üí a ‚àà init ++ [final]</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hb</var><span class="hyp-type"><b>: </b><span>b ‚àà init</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà init</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk94" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk94"><span class="nb">assert</span> (Hb&#39; : b ‚àà init ++ [final]) <span class="bp">by</span> (<span class="nb">apply</span> elem_of_app; <span class="nb">left</span>; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>init</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>final</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted precedes (init ++ [final])</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (init ++ [final])</span></span></span><br><span><var>Hpc</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A,
  x ‚àà init ++ [final]
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">a</span> : A, precedes a x ‚Üí a ‚àà init ++ [final]</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hb</var><span class="hyp-type"><b>: </b><span>b ‚àà init</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>Hb'</var><span class="hyp-type"><b>: </b><span>b ‚àà init ++ [final]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà init</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk95" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk95"><span class="nb">specialize</span> (Hpc b Hb&#39; a Hab).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>init</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>final</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted precedes (init ++ [final])</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (init ++ [final])</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hpc</var><span class="hyp-type"><b>: </b><span>a ‚àà init ++ [final]</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hb</var><span class="hyp-type"><b>: </b><span>b ‚àà init</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>Hb'</var><span class="hyp-type"><b>: </b><span>b ‚àà init ++ [final]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà init</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk96" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk96"><span class="nb">apply</span> elem_of_app <span class="kr">in</span> Hpc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>init</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>final</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted precedes (init ++ [final])</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (init ++ [final])</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hpc</var><span class="hyp-type"><b>: </b><span>a ‚àà init ‚à® a ‚àà [final]</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hb</var><span class="hyp-type"><b>: </b><span>b ‚àà init</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>Hb'</var><span class="hyp-type"><b>: </b><span>b ‚àà init ++ [final]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà init</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk97" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk97"><span class="nb">destruct</span> Hpc <span class="kr">as</span> [Ha | Ha]; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>init</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>final</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted precedes (init ++ [final])</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (init ++ [final])</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà [final]</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hb</var><span class="hyp-type"><b>: </b><span>b ‚àà init</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>Hb'</var><span class="hyp-type"><b>: </b><span>b ‚àà init ++ [final]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà init</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk98" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk98"><span class="nb">rewrite</span> elem_of_list_singleton <span class="kr">in</span> Ha; <span class="nb">subst</span> final.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>init</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (init ++ [a])</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted precedes (init ++ [a])</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hb</var><span class="hyp-type"><b>: </b><span>b ‚àà init</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>Hb'</var><span class="hyp-type"><b>: </b><span>b ‚àà init ++ [a]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà init</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk99" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk99"><span class="nb">apply</span> elem_of_list_split <span class="kr">in</span> Hb&#39; <span class="kr">as</span>  (l1 &amp; l2 &amp; Heq).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>init</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (init ++ [a])</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted precedes (init ++ [a])</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hb</var><span class="hyp-type"><b>: </b><span>b ‚àà init</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>init ++ [a] = l1 ++ b :: l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà init</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk9a" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk9a"><span class="nb">destruct</span> (topologically_sorted_occurrences_ordering precedes
             (init ++ [a]) P Hl Hts a b Hab init [] eq_refl l1 l2 Heq)
        <span class="kr">as</span> [lab Hlab].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>init</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (init ++ [a])</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted precedes (init ++ [a])</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hb</var><span class="hyp-type"><b>: </b><span>b ‚àà init</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>init ++ [a] = l1 ++ b :: l2</span></span></span><br><span><var>lab</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hlab</var><span class="hyp-type"><b>: </b><span>l1 = init ++ a :: lab</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà init</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk9b" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk9b"><span class="nb">rewrite</span> Hlab <span class="kr">in</span> Heq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>init</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (init ++ [a])</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted precedes (init ++ [a])</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hb</var><span class="hyp-type"><b>: </b><span>b ‚àà init</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1, l2, lab</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>init ++ [a] = (init ++ a :: lab) ++ b :: l2</span></span></span><br><span><var>Hlab</var><span class="hyp-type"><b>: </b><span>l1 = init ++ a :: lab</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà init</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk9c" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk9c"><span class="nb">apply</span> (<span class="nb">f_equal</span> length) <span class="kr">in</span> Heq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>init</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (init ++ [a])</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted precedes (init ++ [a])</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hb</var><span class="hyp-type"><b>: </b><span>b ‚àà init</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1, l2, lab</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>length (init ++ [a]) =
length ((init ++ a :: lab) ++ b :: l2)</span></span></span><br><span><var>Hlab</var><span class="hyp-type"><b>: </b><span>l1 = init ++ a :: lab</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà init</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> !app_length <span class="kr">in</span> Heq; <span class="nb">cbn</span> <span class="kr">in</span> Heq; <span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sec_top_sort</span>.</span></span></pre><div class="doc">
<a id="lab4"></a><h2 class="section">The topological sorting algorithm</h2>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  `{EqDecision A}
  (precedes : relation A)
  `{!RelDecision precedes}
  .</span></span></pre><div class="doc">
  Iteratively extracts <code>n</code> elements with minimal number of predecessors
  from a given list.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Fixpoint</span> <span class="nf">top_sort_n</span>
  (<span class="nv">n</span> : nat)
  (<span class="nv">l</span> : list A)
  : list A
  :=
  <span class="kr">match</span> n, l <span class="kr">with</span>
  | <span class="mi">0</span>, _ =&gt; []
  | _, [] =&gt; []
  | S n&#39;, a :: l&#39; =&gt;
    <span class="kr">let</span> <span class="nv">min</span> := min_predecessors precedes l l&#39; a <span class="kr">in</span>
    <span class="kr">let</span> <span class="nv">l&#39;&#39;</span> := set_remove min l <span class="kr">in</span>
    min :: top_sort_n n&#39; l&#39;&#39;
  <span class="kr">end</span>.</span></span></pre><div class="doc">
Repeats the procedure above to order all elements from the input list. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">top_sort</span>
  (<span class="nv">l</span> : list A)
  : list A
  := top_sort_n (length l) l.</span></span></pre><div class="doc">
The result of <span class="inlinecode"><span class="id" title="var">top_sort</span></span> and its input are equal as sets. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk9d" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk9d"><span class="kn">Lemma</span> <span class="nf">top_sort_set_eq</span>
  (<span class="nv">l</span> : list A)
  : set_eq l (top_sort l).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq l (top_sort l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk9e" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk9e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq l (top_sort l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk9f" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk9f"><span class="nb">unfold</span> top_sort.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq l (top_sort_n (length l) l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chka0" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chka0"><span class="nb">remember</span> (length l) <span class="kr">as</span> n.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq l (top_sort_n n l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chka1" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chka1"><span class="nb">generalize dependent</span> l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A, n = length l ‚Üí set_eq l (top_sort_n n l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chka2" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chka2"><span class="nb">induction</span> n; <span class="nb">intros</span>; <span class="nb">destruct</span> l; [<span class="bp">done</span>.. |]; <span class="nb">inversion</span> Heqn.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  n = length l ‚Üí set_eq l (top_sort_n n l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a :: l)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq (a :: l) (top_sort_n (S (length l)) (a :: l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chka3" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chka3"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  n = length l ‚Üí set_eq l (top_sort_n n l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a :: l)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq (a :: l)
  (min_predecessors precedes (a :: l) l a
   :: top_sort_n (length l)
        (<span class="kr">if</span>
          decide
            (min_predecessors precedes (a :: l) l a =
             a)
         <span class="kr">then</span> l
         <span class="kr">else</span>
          a
          :: set_remove
               (min_predecessors precedes (a :: l) l a)
               l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chka4" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chka4"><span class="nb">remember</span> (min_predecessors precedes (a :: l) l a) <span class="kr">as</span> min.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  n = length l ‚Üí set_eq l (top_sort_n n l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a :: l)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min = min_predecessors precedes (a :: l) l a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq (a :: l)
  (min
   :: top_sort_n (length l)
        (<span class="kr">if</span> decide (min = a)
         <span class="kr">then</span> l
         <span class="kr">else</span> a :: set_remove min l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chka5" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chka5"><span class="nb">remember</span> (set_remove min l) <span class="kr">as</span> l&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  n = length l ‚Üí set_eq l (top_sort_n n l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a :: l)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min = min_predecessors precedes (a :: l) l a</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; = set_remove min l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq (a :: l)
  (min
   :: top_sort_n (length l)
        (<span class="kr">if</span> decide (min = a) <span class="kr">then</span> l <span class="kr">else</span> a :: l&#39;))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chka6" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chka6"><span class="nb">destruct</span> (decide (min = a)); [<span class="bp">by</span> <span class="nb">subst</span> a; <span class="nb">subst</span>; <span class="nb">apply</span> set_eq_cons, IHn |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  n = length l ‚Üí set_eq l (top_sort_n n l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a :: l)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min = min_predecessors precedes (a :: l) l a</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; = set_remove min l</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>min ‚â† a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq (a :: l)
  (min :: top_sort_n (length l) (a :: l&#39;))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chka7" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chka7"><span class="nb">specialize</span> (min_predecessors_in precedes (a :: l) l a).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  n = length l ‚Üí set_eq l (top_sort_n n l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a :: l)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min = min_predecessors precedes (a :: l) l a</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; = set_remove min l</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>min ‚â† a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> <span class="nv">min</span> := min_predecessors precedes (a :: l) l a <span class="kr">in</span>
 min = a ‚à® min ‚àà l)
‚Üí set_eq (a :: l)
    (min :: top_sort_n (length l) (a :: l&#39;))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chka8" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chka8"><span class="nb">rewrite</span> &lt;- Heqmin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  n = length l ‚Üí set_eq l (top_sort_n n l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a :: l)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min = min_predecessors precedes (a :: l) l a</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; = set_remove min l</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>min ‚â† a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> <span class="nv">min</span> := min <span class="kr">in</span> min = a ‚à® min ‚àà l)
‚Üí set_eq (a :: l)
    (min :: top_sort_n (length l) (a :: l&#39;))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chka9" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chka9"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  n = length l ‚Üí set_eq l (top_sort_n n l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a :: l)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min = min_predecessors precedes (a :: l) l a</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; = set_remove min l</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>min ‚â† a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">min = a ‚à® min ‚àà l
‚Üí set_eq (a :: l)
    (min :: top_sort_n (length l) (a :: l&#39;))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkaa" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkaa"><span class="nb">intros</span> [Heq | Hin]; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  n = length l ‚Üí set_eq l (top_sort_n n l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a :: l)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min = min_predecessors precedes (a :: l) l a</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; = set_remove min l</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>min ‚â† a</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>min ‚àà l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq (a :: l)
  (min :: top_sort_n (length l) (a :: l&#39;))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkab" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkab"><span class="nb">specialize</span> (IHn (a :: l&#39;)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span>n = length (a :: l&#39;)
‚Üí set_eq (a :: l&#39;) (top_sort_n n (a :: l&#39;))</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a :: l)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min = min_predecessors precedes (a :: l) l a</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; = set_remove min l</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>min ‚â† a</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>min ‚àà l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq (a :: l)
  (min :: top_sort_n (length l) (a :: l&#39;))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkac" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkac"><span class="nb">specialize</span> (set_remove_length min l Hin).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span>n = length (a :: l&#39;)
‚Üí set_eq (a :: l&#39;) (top_sort_n n (a :: l&#39;))</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a :: l)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min = min_predecessors precedes (a :: l) l a</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; = set_remove min l</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>min ‚â† a</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>min ‚àà l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length l = S (length (set_remove min l))
‚Üí set_eq (a :: l)
    (min :: top_sort_n (length l) (a :: l&#39;))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkad" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkad"><span class="nb">rewrite</span> &lt;- Heql&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span>n = length (a :: l&#39;)
‚Üí set_eq (a :: l&#39;) (top_sort_n n (a :: l&#39;))</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a :: l)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min = min_predecessors precedes (a :: l) l a</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; = set_remove min l</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>min ‚â† a</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>min ‚àà l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length l = S (length l&#39;)
‚Üí set_eq (a :: l)
    (min :: top_sort_n (length l) (a :: l&#39;))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkae" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkae"><span class="nb">rewrite</span> &lt;- H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span>n = length (a :: l&#39;)
‚Üí set_eq (a :: l&#39;) (top_sort_n n (a :: l&#39;))</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a :: l)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min = min_predecessors precedes (a :: l) l a</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; = set_remove min l</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>min ‚â† a</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>min ‚àà l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n = S (length l&#39;)
‚Üí set_eq (a :: l) (min :: top_sort_n n (a :: l&#39;))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkaf" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkaf"><span class="nb">intro</span> Hlen.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span>n = length (a :: l&#39;)
‚Üí set_eq (a :: l&#39;) (top_sort_n n (a :: l&#39;))</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a :: l)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min = min_predecessors precedes (a :: l) l a</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; = set_remove min l</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>min ‚â† a</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>min ‚àà l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>n = S (length l&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq (a :: l) (min :: top_sort_n n (a :: l&#39;))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkb0" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkb0"><span class="nb">specialize</span> (IHn Hlen).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span>set_eq (a :: l&#39;) (top_sort_n n (a :: l&#39;))</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a :: l)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min = min_predecessors precedes (a :: l) l a</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; = set_remove min l</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>min ‚â† a</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>min ‚àà l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>n = S (length l&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq (a :: l) (min :: top_sort_n n (a :: l&#39;))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkb1" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkb1"><span class="nb">split</span>; <span class="nb">intros</span> x Hx; <span class="nb">rewrite</span> elem_of_cons <span class="kr">in</span> Hx;
    <span class="nb">destruct</span> Hx <span class="kr">as</span> [Heq | Hinx]; <span class="kp">try</span> (<span class="nb">subst</span> x).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span>set_eq (a :: l&#39;) (top_sort_n n (a :: l&#39;))</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a :: l)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min = min_predecessors precedes (a :: l) l a</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; = set_remove min l</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>min ‚â† a</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>min ‚àà l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>n = S (length l&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà min :: top_sort_n n (a :: l&#39;)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="TopSort-v-chkb2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span>set_eq (a :: l&#39;) (top_sort_n n (a :: l&#39;))</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a :: l)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min = min_predecessors precedes (a :: l) l a</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; = set_remove min l</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>min ‚â† a</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>min ‚àà l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>n = S (length l&#39;)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hinx</var><span class="hyp-type"><b>: </b><span>x ‚àà l</span></span></span><br></div><label class="goal-separator" for="TopSort-v-chkb2"><hr></label><div class="goal-conclusion">x ‚àà min :: top_sort_n n (a :: l&#39;)</div></blockquote><input class="alectryon-extra-goal-toggle" id="TopSort-v-chkb3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span>set_eq (a :: l&#39;) (top_sort_n n (a :: l&#39;))</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a :: l)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min = min_predecessors precedes (a :: l) l a</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; = set_remove min l</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>min ‚â† a</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>min ‚àà l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>n = S (length l&#39;)</span></span></span><br></div><label class="goal-separator" for="TopSort-v-chkb3"><hr></label><div class="goal-conclusion">min ‚àà a :: l</div></blockquote><input class="alectryon-extra-goal-toggle" id="TopSort-v-chkb4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span>set_eq (a :: l&#39;) (top_sort_n n (a :: l&#39;))</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a :: l)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min = min_predecessors precedes (a :: l) l a</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; = set_remove min l</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>min ‚â† a</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>min ‚àà l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>n = S (length l&#39;)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hinx</var><span class="hyp-type"><b>: </b><span>x ‚àà top_sort_n n (a :: l&#39;)</span></span></span><br></div><label class="goal-separator" for="TopSort-v-chkb4"><hr></label><div class="goal-conclusion">x ‚àà a :: l</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkb5" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkb5">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span>set_eq (a :: l&#39;) (top_sort_n n (a :: l&#39;))</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a :: l)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min = min_predecessors precedes (a :: l) l a</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; = set_remove min l</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>min ‚â† a</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>min ‚àà l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>n = S (length l&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà min :: top_sort_n n (a :: l&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">right</span>; <span class="nb">apply</span> IHn; <span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkb6" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkb6">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span>set_eq (a :: l&#39;) (top_sort_n n (a :: l&#39;))</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a :: l)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min = min_predecessors precedes (a :: l) l a</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; = set_remove min l</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>min ‚â† a</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>min ‚àà l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>n = S (length l&#39;)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hinx</var><span class="hyp-type"><b>: </b><span>x ‚àà l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà min :: top_sort_n n (a :: l&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkb7" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkb7"><span class="nb">destruct</span> (decide (x = min)); [<span class="bp">by</span> <span class="nb">subst</span>; <span class="nb">left</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span>set_eq (a :: l&#39;) (top_sort_n n (a :: l&#39;))</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a :: l)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min = min_predecessors precedes (a :: l) l a</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; = set_remove min l</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>min ‚â† a</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>min ‚àà l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>n = S (length l&#39;)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hinx</var><span class="hyp-type"><b>: </b><span>x ‚àà l</span></span></span><br><span><var>n1</var><span class="hyp-type"><b>: </b><span>x ‚â† min</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà min :: top_sort_n n (a :: l&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkb8" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkb8"><span class="nb">specialize</span> (set_remove_3 _ _ l Hinx n1).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span>set_eq (a :: l&#39;) (top_sort_n n (a :: l&#39;))</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a :: l)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min = min_predecessors precedes (a :: l) l a</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; = set_remove min l</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>min ‚â† a</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>min ‚àà l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>n = S (length l&#39;)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hinx</var><span class="hyp-type"><b>: </b><span>x ‚àà l</span></span></span><br><span><var>n1</var><span class="hyp-type"><b>: </b><span>x ‚â† min</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà set_remove min l
‚Üí x ‚àà min :: top_sort_n n (a :: l&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkb9" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkb9"><span class="nb">rewrite</span> &lt;- Heql&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span>set_eq (a :: l&#39;) (top_sort_n n (a :: l&#39;))</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a :: l)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min = min_predecessors precedes (a :: l) l a</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; = set_remove min l</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>min ‚â† a</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>min ‚àà l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>n = S (length l&#39;)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hinx</var><span class="hyp-type"><b>: </b><span>x ‚àà l</span></span></span><br><span><var>n1</var><span class="hyp-type"><b>: </b><span>x ‚â† min</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà l&#39; ‚Üí x ‚àà min :: top_sort_n n (a :: l&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkba" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkba"><span class="nb">intro</span> Hinx&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span>set_eq (a :: l&#39;) (top_sort_n n (a :: l&#39;))</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a :: l)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min = min_predecessors precedes (a :: l) l a</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; = set_remove min l</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>min ‚â† a</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>min ‚àà l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>n = S (length l&#39;)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hinx</var><span class="hyp-type"><b>: </b><span>x ‚àà l</span></span></span><br><span><var>n1</var><span class="hyp-type"><b>: </b><span>x ‚â† min</span></span></span><br><span><var>Hinx'</var><span class="hyp-type"><b>: </b><span>x ‚àà l&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà min :: top_sort_n n (a :: l&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">right</span>; <span class="nb">apply</span> IHn; <span class="nb">right</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkbb" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkbb">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span>set_eq (a :: l&#39;) (top_sort_n n (a :: l&#39;))</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a :: l)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min = min_predecessors precedes (a :: l) l a</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; = set_remove min l</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>min ‚â† a</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>min ‚àà l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>n = S (length l&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">min ‚àà a :: l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">right</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkbc" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkbc">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span>set_eq (a :: l&#39;) (top_sort_n n (a :: l&#39;))</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a :: l)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min = min_predecessors precedes (a :: l) l a</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; = set_remove min l</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>min ‚â† a</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>min ‚àà l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>n = S (length l&#39;)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hinx</var><span class="hyp-type"><b>: </b><span>x ‚àà top_sort_n n (a :: l&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà a :: l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkbd" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkbd"><span class="nb">apply</span> IHn <span class="kr">in</span> Hinx.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span>set_eq (a :: l&#39;) (top_sort_n n (a :: l&#39;))</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a :: l)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min = min_predecessors precedes (a :: l) l a</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; = set_remove min l</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>min ‚â† a</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>min ‚àà l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>n = S (length l&#39;)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hinx</var><span class="hyp-type"><b>: </b><span>x ‚àà a :: l&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà a :: l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkbe" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkbe"><span class="nb">rewrite</span> elem_of_cons <span class="kr">in</span> Hinx.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span>set_eq (a :: l&#39;) (top_sort_n n (a :: l&#39;))</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a :: l)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min = min_predecessors precedes (a :: l) l a</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; = set_remove min l</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>min ‚â† a</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>min ‚àà l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>n = S (length l&#39;)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hinx</var><span class="hyp-type"><b>: </b><span>x = a ‚à® x ‚àà l&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà a :: l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkbf" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkbf"><span class="nb">destruct</span> Hinx <span class="kr">as</span> [-&gt; | Hinx]; [<span class="nb">left</span> | <span class="nb">right</span>]; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S (length l) = length (a :: l)</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span>set_eq
  (a
   :: set_remove
        (min_predecessors precedes (a :: l) l a)
        l)
  (top_sort_n (length l)
     (a
      :: set_remove
           (min_predecessors precedes 
              (a :: l) l a) l))</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a ‚àà l</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a ‚â† a</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>length l =
S
  (length
     (set_remove
        (min_predecessors precedes (a :: l) l a)
        l))</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hinx</var><span class="hyp-type"><b>: </b><span>x
‚àà set_remove
    (min_predecessors precedes (a :: l) l a) l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> set_remove_1 <span class="kr">in</span> Hinx.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkc0" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkc0"><span class="kn">Lemma</span> <span class="nf">top_sort_nodup</span>
  (<span class="nv">l</span> : list A)
  (<span class="nv">Hl</span> : NoDup l)
  : NoDup (top_sort l).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (top_sort l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkc1" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkc1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (top_sort l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkc2" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkc2"><span class="nb">unfold</span> top_sort.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (top_sort_n (length l) l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkc3" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkc3"><span class="nb">remember</span> (length l) <span class="kr">as</span> len.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>len = length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (top_sort_n len l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkc4" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkc4"><span class="nb">generalize dependent</span> l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkc5" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkc5"><span class="nb">induction</span> len; <span class="nb">intros</span>; [<span class="bp">by</span> <span class="nb">cbn</span>; <span class="nb">constructor</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (top_sort_n (S len) l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkc6" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkc6"><span class="nb">destruct</span> l <span class="kr">as</span> [| a l]; [<span class="bp">by</span> <span class="nb">constructor</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (top_sort_n (S len) (a :: l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkc7" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkc7"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup
  (min_predecessors precedes (a :: l) l a
   :: top_sort_n len
        (<span class="kr">if</span>
          decide
            (min_predecessors precedes (a :: l) l a =
             a)
         <span class="kr">then</span> l
         <span class="kr">else</span>
          a
          :: set_remove
               (min_predecessors precedes (a :: l) l a)
               l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkc8" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkc8"><span class="nb">assert</span> (Hl&#39; : NoDup l) <span class="bp">by</span> (<span class="nb">inversion</span> Hl; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup
  (min_predecessors precedes (a :: l) l a
   :: top_sort_n len
        (<span class="kr">if</span>
          decide
            (min_predecessors precedes (a :: l) l a =
             a)
         <span class="kr">then</span> l
         <span class="kr">else</span>
          a
          :: set_remove
               (min_predecessors precedes (a :: l) l a)
               l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkc9" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkc9"><span class="nb">assert</span> (Hlen : len = length l) <span class="bp">by</span> (<span class="nb">inversion</span> Heqlen; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>len = length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup
  (min_predecessors precedes (a :: l) l a
   :: top_sort_n len
        (<span class="kr">if</span>
          decide
            (min_predecessors precedes (a :: l) l a =
             a)
         <span class="kr">then</span> l
         <span class="kr">else</span>
          a
          :: set_remove
               (min_predecessors precedes (a :: l) l a)
               l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkca" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkca"><span class="nb">assert</span> (Hl&#39;&#39; : NoDup (set_remove (min_predecessors precedes (a :: l) l a) l))
    <span class="bp">by</span> (<span class="nb">apply</span> set_remove_nodup; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>len = length l</span></span></span><br><span><var>Hl''</var><span class="hyp-type"><b>: </b><span>NoDup
  (set_remove
     (min_predecessors precedes (a :: l) l a) l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup
  (min_predecessors precedes (a :: l) l a
   :: top_sort_n len
        (<span class="kr">if</span>
          decide
            (min_predecessors precedes (a :: l) l a =
             a)
         <span class="kr">then</span> l
         <span class="kr">else</span>
          a
          :: set_remove
               (min_predecessors precedes (a :: l) l a)
               l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkcb" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkcb"><span class="nb">destruct</span> (decide (min_predecessors precedes (a :: l) l a = a)); <span class="nb">constructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>len = length l</span></span></span><br><span><var>Hl''</var><span class="hyp-type"><b>: </b><span>NoDup
  (set_remove
     (min_predecessors precedes (a :: l) l a) l)</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a = a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">min_predecessors precedes (a :: l) l a
‚àâ top_sort_n len l</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="TopSort-v-chkcc" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>len = length l</span></span></span><br><span><var>Hl''</var><span class="hyp-type"><b>: </b><span>NoDup
  (set_remove
     (min_predecessors precedes (a :: l) l a) l)</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a = a</span></span></span><br></div><label class="goal-separator" for="TopSort-v-chkcc"><hr></label><div class="goal-conclusion">NoDup (top_sort_n len l)</div></blockquote><input class="alectryon-extra-goal-toggle" id="TopSort-v-chkcd" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>len = length l</span></span></span><br><span><var>Hl''</var><span class="hyp-type"><b>: </b><span>NoDup
  (set_remove
     (min_predecessors precedes (a :: l) l a) l)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a ‚â† a</span></span></span><br></div><label class="goal-separator" for="TopSort-v-chkcd"><hr></label><div class="goal-conclusion">min_predecessors precedes (a :: l) l a
‚àâ top_sort_n len
    (a
     :: set_remove
          (min_predecessors precedes (a :: l) l a) l)</div></blockquote><input class="alectryon-extra-goal-toggle" id="TopSort-v-chkce" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>len = length l</span></span></span><br><span><var>Hl''</var><span class="hyp-type"><b>: </b><span>NoDup
  (set_remove
     (min_predecessors precedes (a :: l) l a) l)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a ‚â† a</span></span></span><br></div><label class="goal-separator" for="TopSort-v-chkce"><hr></label><div class="goal-conclusion">NoDup
  (top_sort_n len
     (a
      :: set_remove
           (min_predecessors precedes (a :: l) l a) l))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkcf" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkcf">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>len = length l</span></span></span><br><span><var>Hl''</var><span class="hyp-type"><b>: </b><span>NoDup
  (set_remove
     (min_predecessors precedes (a :: l) l a) l)</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a = a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">min_predecessors precedes (a :: l) l a
‚àâ top_sort_n len l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkd0" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkd0"><span class="nb">specialize</span> (IHlen l Hl&#39;  Hlen).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span>NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>len = length l</span></span></span><br><span><var>Hl''</var><span class="hyp-type"><b>: </b><span>NoDup
  (set_remove
     (min_predecessors precedes (a :: l) l a) l)</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a = a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">min_predecessors precedes (a :: l) l a
‚àâ top_sort_n len l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkd1" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkd1"><span class="nb">rewrite</span> e <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span>NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>len = length l</span></span></span><br><span><var>Hl''</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove a l)</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a = a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àâ top_sort_n len l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkd2" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkd2"><span class="nb">inversion</span> Hl; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span>NoDup (top_sort_n (length l) l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S (length l) = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hl''</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove a l)</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a = a</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ‚àâ l</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àâ top_sort_n (length l) l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkd3" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkd3"><span class="nb">intro</span> Ha; <span class="nb">elim</span> H1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span>NoDup (top_sort_n (length l) l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S (length l) = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hl''</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove a l)</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a = a</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ‚àâ l</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà top_sort_n (length l) l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> top_sort_set_eq <span class="kr">in</span> Ha.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkd4" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkd4">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>len = length l</span></span></span><br><span><var>Hl''</var><span class="hyp-type"><b>: </b><span>NoDup
  (set_remove
     (min_predecessors precedes (a :: l) l a) l)</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a = a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (top_sort_n len l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> IHlen.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkd5" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkd5">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>len = length l</span></span></span><br><span><var>Hl''</var><span class="hyp-type"><b>: </b><span>NoDup
  (set_remove
     (min_predecessors precedes (a :: l) l a) l)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a ‚â† a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">min_predecessors precedes (a :: l) l a
‚àâ top_sort_n len
    (a
     :: set_remove
          (min_predecessors precedes (a :: l) l a) l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkd6" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkd6"><span class="nb">intro</span> Hmin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>len = length l</span></span></span><br><span><var>Hl''</var><span class="hyp-type"><b>: </b><span>NoDup
  (set_remove
     (min_predecessors precedes (a :: l) l a) l)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a ‚â† a</span></span></span><br><span><var>Hmin</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a
‚àà top_sort_n len
    (a
     :: set_remove
          (min_predecessors precedes 
             (a :: l) l a) l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkd7" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkd7"><span class="nb">assert</span> (Hlen&#39; : len = length (a :: set_remove (min_predecessors precedes (a :: l) l a) l)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>len = length l</span></span></span><br><span><var>Hl''</var><span class="hyp-type"><b>: </b><span>NoDup
  (set_remove
     (min_predecessors precedes (a :: l) l a) l)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a ‚â† a</span></span></span><br><span><var>Hmin</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a
‚àà top_sort_n len
    (a
     :: set_remove
          (min_predecessors precedes 
             (a :: l) l a) l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">len =
length
  (a
   :: set_remove
        (min_predecessors precedes (a :: l) l a) l)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="TopSort-v-chkd8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>len = length l</span></span></span><br><span><var>Hl''</var><span class="hyp-type"><b>: </b><span>NoDup
  (set_remove
     (min_predecessors precedes (a :: l) l a) l)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a ‚â† a</span></span></span><br><span><var>Hmin</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a
‚àà top_sort_n len
    (a
     :: set_remove
          (min_predecessors precedes 
             (a :: l) l a) l)</span></span></span><br><span><var>Hlen'</var><span class="hyp-type"><b>: </b><span>len =
length
  (a
   :: set_remove
        (min_predecessors precedes 
           (a :: l) l a) l)</span></span></span><br></div><label class="goal-separator" for="TopSort-v-chkd8"><hr></label><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkd9" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkd9">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>len = length l</span></span></span><br><span><var>Hl''</var><span class="hyp-type"><b>: </b><span>NoDup
  (set_remove
     (min_predecessors precedes (a :: l) l a) l)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a ‚â† a</span></span></span><br><span><var>Hmin</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a
‚àà top_sort_n len
    (a
     :: set_remove
          (min_predecessors precedes 
             (a :: l) l a) l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">len =
length
  (a
   :: set_remove
        (min_predecessors precedes (a :: l) l a) l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkda" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkda"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>len = length l</span></span></span><br><span><var>Hl''</var><span class="hyp-type"><b>: </b><span>NoDup
  (set_remove
     (min_predecessors precedes (a :: l) l a) l)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a ‚â† a</span></span></span><br><span><var>Hmin</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a
‚àà top_sort_n len
    (a
     :: set_remove
          (min_predecessors precedes 
             (a :: l) l a) l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">len =
S
  (length
     (set_remove
        (min_predecessors precedes (a :: l) l a) l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkdb" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkdb"><span class="nb">rewrite</span> &lt;- set_remove_length; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>len = length l</span></span></span><br><span><var>Hl''</var><span class="hyp-type"><b>: </b><span>NoDup
  (set_remove
     (min_predecessors precedes (a :: l) l a) l)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a ‚â† a</span></span></span><br><span><var>Hmin</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a
‚àà top_sort_n len
    (a
     :: set_remove
          (min_predecessors precedes 
             (a :: l) l a) l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">min_predecessors precedes (a :: l) l a ‚àà l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> (@min_predecessors_in _ precedes _ (a :: l) l a).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkdc" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkdc">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>len = length l</span></span></span><br><span><var>Hl''</var><span class="hyp-type"><b>: </b><span>NoDup
  (set_remove
     (min_predecessors precedes (a :: l) l a) l)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a ‚â† a</span></span></span><br><span><var>Hmin</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a
‚àà top_sort_n len
    (a
     :: set_remove
          (min_predecessors precedes 
             (a :: l) l a) l)</span></span></span><br><span><var>Hlen'</var><span class="hyp-type"><b>: </b><span>len =
length
  (a
   :: set_remove
        (min_predecessors precedes 
           (a :: l) l a) l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkdd" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkdd"><span class="nb">rewrite</span> Hlen&#39; <span class="kr">in</span> Hmin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>len = length l</span></span></span><br><span><var>Hl''</var><span class="hyp-type"><b>: </b><span>NoDup
  (set_remove
     (min_predecessors precedes (a :: l) l a) l)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a ‚â† a</span></span></span><br><span><var>Hmin</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a
‚àà top_sort_n
    (length
       (a
        :: set_remove
             (min_predecessors precedes
                (a :: l) l a) l))
    (a
     :: set_remove
          (min_predecessors precedes 
             (a :: l) l a) l)</span></span></span><br><span><var>Hlen'</var><span class="hyp-type"><b>: </b><span>len =
length
  (a
   :: set_remove
        (min_predecessors precedes 
           (a :: l) l a) l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkde" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkde"><span class="nb">apply</span> (proj2 (top_sort_set_eq (a :: set_remove (min_predecessors precedes (a :: l) l a) l)))
      <span class="kr">in</span> Hmin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>len = length l</span></span></span><br><span><var>Hl''</var><span class="hyp-type"><b>: </b><span>NoDup
  (set_remove
     (min_predecessors precedes (a :: l) l a) l)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a ‚â† a</span></span></span><br><span><var>Hmin</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a
‚àà a
  :: set_remove
       (min_predecessors precedes (a :: l) l a)
       l</span></span></span><br><span><var>Hlen'</var><span class="hyp-type"><b>: </b><span>len =
length
  (a
   :: set_remove
        (min_predecessors precedes 
           (a :: l) l a) l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkdf" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkdf"><span class="nb">rewrite</span> elem_of_cons <span class="kr">in</span> Hmin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>len = length l</span></span></span><br><span><var>Hl''</var><span class="hyp-type"><b>: </b><span>NoDup
  (set_remove
     (min_predecessors precedes (a :: l) l a) l)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a ‚â† a</span></span></span><br><span><var>Hmin</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a = a
‚à® min_predecessors precedes (a :: l) l a
  ‚àà set_remove
      (min_predecessors precedes (a :: l) l a)
      l</span></span></span><br><span><var>Hlen'</var><span class="hyp-type"><b>: </b><span>len =
length
  (a
   :: set_remove
        (min_predecessors precedes 
           (a :: l) l a) l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chke0" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chke0"><span class="nb">destruct</span> Hmin; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>len = length l</span></span></span><br><span><var>Hl''</var><span class="hyp-type"><b>: </b><span>NoDup
  (set_remove
     (min_predecessors precedes (a :: l) l a) l)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a ‚â† a</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a
‚àà set_remove
    (min_predecessors precedes (a :: l) l a) l</span></span></span><br><span><var>Hlen'</var><span class="hyp-type"><b>: </b><span>len =
length
  (a
   :: set_remove
        (min_predecessors precedes 
           (a :: l) l a) l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> set_remove_2 <span class="kr">in</span> H.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chke1" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chke1">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>len = length l</span></span></span><br><span><var>Hl''</var><span class="hyp-type"><b>: </b><span>NoDup
  (set_remove
     (min_predecessors precedes (a :: l) l a) l)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a ‚â† a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup
  (top_sort_n len
     (a
      :: set_remove
           (min_predecessors precedes (a :: l) l a) l))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chke2" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chke2"><span class="nb">apply</span> IHlen.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>len = length l</span></span></span><br><span><var>Hl''</var><span class="hyp-type"><b>: </b><span>NoDup
  (set_remove
     (min_predecessors precedes (a :: l) l a) l)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a ‚â† a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup
  (a
   :: set_remove
        (min_predecessors precedes (a :: l) l a) l)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="TopSort-v-chke3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>len = length l</span></span></span><br><span><var>Hl''</var><span class="hyp-type"><b>: </b><span>NoDup
  (set_remove
     (min_predecessors precedes (a :: l) l a) l)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a ‚â† a</span></span></span><br></div><label class="goal-separator" for="TopSort-v-chke3"><hr></label><div class="goal-conclusion">len =
length
  (a
   :: set_remove
        (min_predecessors precedes (a :: l) l a) l)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chke4" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chke4">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>len = length l</span></span></span><br><span><var>Hl''</var><span class="hyp-type"><b>: </b><span>NoDup
  (set_remove
     (min_predecessors precedes (a :: l) l a) l)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a ‚â† a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup
  (a
   :: set_remove
        (min_predecessors precedes (a :: l) l a) l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chke5" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chke5"><span class="nb">constructor</span>; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>len = length l</span></span></span><br><span><var>Hl''</var><span class="hyp-type"><b>: </b><span>NoDup
  (set_remove
     (min_predecessors precedes (a :: l) l a) l)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a ‚â† a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a
‚àâ set_remove (min_predecessors precedes (a :: l) l a)
    l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chke6" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chke6"><span class="nb">intro</span> Ha.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>len = length l</span></span></span><br><span><var>Hl''</var><span class="hyp-type"><b>: </b><span>NoDup
  (set_remove
     (min_predecessors precedes (a :: l) l a) l)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a ‚â† a</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a
‚àà set_remove
    (min_predecessors precedes (a :: l) l a) l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chke7" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chke7"><span class="nb">apply</span> set_remove_iff <span class="kr">in</span> Ha; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>len = length l</span></span></span><br><span><var>Hl''</var><span class="hyp-type"><b>: </b><span>NoDup
  (set_remove
     (min_predecessors precedes (a :: l) l a) l)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a ‚â† a</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà l
‚àß a ‚â† min_predecessors precedes (a :: l) l a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chke8" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chke8"><span class="nb">destruct</span> Ha <span class="kr">as</span> [Ha _].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>len = length l</span></span></span><br><span><var>Hl''</var><span class="hyp-type"><b>: </b><span>NoDup
  (set_remove
     (min_predecessors precedes (a :: l) l a) l)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a ‚â† a</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">inversion</span> Hl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chke9" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chke9">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>len = length l</span></span></span><br><span><var>Hl''</var><span class="hyp-type"><b>: </b><span>NoDup
  (set_remove
     (min_predecessors precedes (a :: l) l a) l)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a ‚â† a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">len =
length
  (a
   :: set_remove
        (min_predecessors precedes (a :: l) l a) l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkea" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkea"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>len = length l</span></span></span><br><span><var>Hl''</var><span class="hyp-type"><b>: </b><span>NoDup
  (set_remove
     (min_predecessors precedes (a :: l) l a) l)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a ‚â† a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">len =
S
  (length
     (set_remove
        (min_predecessors precedes (a :: l) l a) l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkeb" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkeb"><span class="nb">rewrite</span> &lt;- set_remove_length; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>len</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHlen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  NoDup l
  ‚Üí len = length l ‚Üí NoDup (top_sort_n len l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup (a :: l)</span></span></span><br><span><var>Heqlen</var><span class="hyp-type"><b>: </b><span>S len = length (a :: l)</span></span></span><br><span><var>Hl'</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>len = length l</span></span></span><br><span><var>Hl''</var><span class="hyp-type"><b>: </b><span>NoDup
  (set_remove
     (min_predecessors precedes (a :: l) l a) l)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a :: l) l a ‚â† a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">min_predecessors precedes (a :: l) l a ‚àà l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> (@min_predecessors_in _ precedes _ (a :: l) l a).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  (<span class="nv">P</span> : A -&gt; <span class="kt">Prop</span>)
  {<span class="nv">Hso</span> : StrictOrder (precedes_P precedes P)}
  (<span class="nv">l</span> : list A)
  (<span class="nv">Hl</span> : Forall P l)
  .</span></span></pre><div class="doc">
  Under the assumption that <code>precedes</code> induces a <span class="inlinecode"><span class="id" title="var">StrictOrder</span></span> on the elements of
  <code>l</code>, <span class="inlinecode"><span class="id" title="var">top_sort</span></span> <code>l</code> is <span class="inlinecode"><span class="id" title="var">topologically_sorted</span></span>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkec" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkec"><span class="kn">Lemma</span> <span class="nf">top_sort_sorted</span> : topologically_sorted precedes (top_sort l).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">topologically_sorted precedes (top_sort l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chked" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chked"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">topologically_sorted precedes (top_sort l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkee" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkee"><span class="nb">intros</span> a b Hab l1 l2 Heq Ha2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>top_sort l = l1 ++ [b] ++ l2</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkef" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkef"><span class="nb">assert</span> (Ha : a ‚àà l).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>top_sort l = l1 ++ [b] ++ l2</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà l</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="TopSort-v-chkf0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>top_sort l = l1 ++ [b] ++ l2</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br></div><label class="goal-separator" for="TopSort-v-chkf0"><hr></label><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkf1" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkf1">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>top_sort l = l1 ++ [b] ++ l2</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkf2" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkf2"><span class="nb">apply</span> top_sort_set_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>top_sort l = l1 ++ [b] ++ l2</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà top_sort l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">cbn</span> <span class="kr">in</span> Heq; <span class="nb">rewrite</span> Heq, elem_of_app, elem_of_cons; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkf3" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkf3">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>top_sort l = l1 ++ [b] ++ l2</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkf4" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkf4"><span class="nb">unfold</span> top_sort <span class="kr">in</span> Heq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>top_sort_n (length l) l = l1 ++ [b] ++ l2</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkf5" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkf5"><span class="nb">remember</span> (length l) <span class="kr">as</span> n.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>top_sort_n n l = l1 ++ [b] ++ l2</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkf6" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkf6"><span class="nb">revert</span> l Hl Heqn a b Hab l1 Ha l2 Ha2 Heq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  Forall P l
  ‚Üí n = length l
    ‚Üí <span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">b</span> : A,
        precedes a b
        ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
            a ‚àà l
            ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
                a ‚àà l2
                ‚Üí top_sort_n n l = l1 ++ [b] ++ l2
                  ‚Üí <span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkf7" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkf7"><span class="nb">induction</span> n; <span class="nb">intros</span>
  ; <span class="kp">try</span> (<span class="nb">symmetry in</span> Heqn;  <span class="nb">apply</span> length_zero_iff_nil <span class="kr">in</span> Heqn; <span class="nb">subst</span> l; <span class="nb">inversion</span> Ha).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  Forall P l
  ‚Üí n = length l
    ‚Üí <span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">b</span> : A,
        precedes a b
        ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
            a ‚àà l
            ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
                a ‚àà l2
                ‚Üí top_sort_n n l =
                  l1 ++ [b] ++ l2 ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length l</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>top_sort_n (S n) l = l1 ++ [b] ++ l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkf8" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkf8"><span class="nb">destruct</span> l <span class="kr">as</span> [| a0 l0]; <span class="nb">inversion</span> Hl; <span class="nb">subst</span>; <span class="nb">simpl</span> <span class="kr">in</span> Heq; [<span class="bp">by</span> <span class="nb">inversion</span> Ha |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  Forall P l
  ‚Üí n = length l
    ‚Üí <span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">b</span> : A,
        precedes a b
        ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
            a ‚àà l
            ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
                a ‚àà l2
                ‚Üí top_sort_n n l =
                  l1 ++ [b] ++ l2 ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a0 :: l0)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a0 :: l0) l0 a0
:: top_sort_n n
     (<span class="kr">if</span>
       decide
         (min_predecessors precedes 
            (a0 :: l0) l0 a0 = a0)
      <span class="kr">then</span> l0
      <span class="kr">else</span>
       a0
       :: set_remove
            (min_predecessors precedes
               (a0 :: l0) l0 a0) l0) =
l1 ++ b :: l2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkf9" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkf9"><span class="nb">remember</span> (min_predecessors precedes (a0 :: l0) l0 a0) <span class="kr">as</span> min.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  Forall P l
  ‚Üí n = length l
    ‚Üí <span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">b</span> : A,
        precedes a b
        ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
            a ‚àà l
            ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
                a ‚àà l2
                ‚Üí top_sort_n n l =
                  l1 ++ [b] ++ l2 ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a0 :: l0)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min =
min_predecessors precedes (a0 :: l0) l0 a0</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min
:: top_sort_n n
     (<span class="kr">if</span> decide (min = a0)
      <span class="kr">then</span> l0
      <span class="kr">else</span> a0 :: set_remove min l0) =
l1 ++ b :: l2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkfa" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkfa"><span class="nb">remember</span>
    (<span class="kr">match</span> decide (min = a0) <span class="kr">return</span> (<span class="nb">set</span> A) <span class="kr">with</span>
    | <span class="nb">left</span> _ =&gt; l0
    | <span class="nb">right</span> _ =&gt; @cons A a0 (set_remove min l0)
    <span class="kr">end</span>) <span class="kr">as</span> l&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  Forall P l
  ‚Üí n = length l
    ‚Üí <span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">b</span> : A,
        precedes a b
        ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
            a ‚àà l
            ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
                a ‚àà l2
                ‚Üí top_sort_n n l =
                  l1 ++ [b] ++ l2 ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a0 :: l0)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min =
min_predecessors precedes (a0 :: l0) l0 a0</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; =
(<span class="kr">if</span> decide (min = a0)
 <span class="kr">then</span> l0
 <span class="kr">else</span> a0 :: set_remove min l0)</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min :: top_sort_n n l&#39; = l1 ++ b :: l2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkfb" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkfb"><span class="nb">inversion</span> Heqn.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  Forall P l
  ‚Üí n = length l
    ‚Üí <span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">b</span> : A,
        precedes a b
        ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
            a ‚àà l
            ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
                a ‚àà l2
                ‚Üí top_sort_n n l =
                  l1 ++ [b] ++ l2 ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a0 :: l0)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min =
min_predecessors precedes (a0 :: l0) l0 a0</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; =
(<span class="kr">if</span> decide (min = a0)
 <span class="kr">then</span> l0
 <span class="kr">else</span> a0 :: set_remove min l0)</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min :: top_sort_n n l&#39; = l1 ++ b :: l2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkfc" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkfc"><span class="nb">assert</span> (Hall&#39; : Forall P l&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  Forall P l
  ‚Üí n = length l
    ‚Üí <span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">b</span> : A,
        precedes a b
        ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
            a ‚àà l
            ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
                a ‚àà l2
                ‚Üí top_sort_n n l =
                  l1 ++ [b] ++ l2 ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a0 :: l0)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min =
min_predecessors precedes (a0 :: l0) l0 a0</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; =
(<span class="kr">if</span> decide (min = a0)
 <span class="kr">then</span> l0
 <span class="kr">else</span> a0 :: set_remove min l0)</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min :: top_sort_n n l&#39; = l1 ++ b :: l2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Forall P l&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="TopSort-v-chkfd" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  Forall P l
  ‚Üí n = length l
    ‚Üí <span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">b</span> : A,
        precedes a b
        ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
            a ‚àà l
            ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
                a ‚àà l2
                ‚Üí top_sort_n n l =
                  l1 ++ [b] ++ l2 ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a0 :: l0)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min =
min_predecessors precedes (a0 :: l0) l0 a0</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; =
(<span class="kr">if</span> decide (min = a0)
 <span class="kr">then</span> l0
 <span class="kr">else</span> a0 :: set_remove min l0)</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min :: top_sort_n n l&#39; = l1 ++ b :: l2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l0</span></span></span><br><span><var>Hall'</var><span class="hyp-type"><b>: </b><span>Forall P l&#39;</span></span></span><br></div><label class="goal-separator" for="TopSort-v-chkfd"><hr></label><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkfe" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkfe">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  Forall P l
  ‚Üí n = length l
    ‚Üí <span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">b</span> : A,
        precedes a b
        ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
            a ‚àà l
            ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
                a ‚àà l2
                ‚Üí top_sort_n n l =
                  l1 ++ [b] ++ l2 ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a0 :: l0)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min =
min_predecessors precedes (a0 :: l0) l0 a0</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; =
(<span class="kr">if</span> decide (min = a0)
 <span class="kr">then</span> l0
 <span class="kr">else</span> a0 :: set_remove min l0)</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min :: top_sort_n n l&#39; = l1 ++ b :: l2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Forall P l&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chkff" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chkff"><span class="nb">rewrite</span> Forall_forall.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  Forall P l
  ‚Üí n = length l
    ‚Üí <span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">b</span> : A,
        precedes a b
        ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
            a ‚àà l
            ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
                a ‚àà l2
                ‚Üí top_sort_n n l =
                  l1 ++ [b] ++ l2 ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a0 :: l0)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min =
min_predecessors precedes (a0 :: l0) l0 a0</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; =
(<span class="kr">if</span> decide (min = a0)
 <span class="kr">then</span> l0
 <span class="kr">else</span> a0 :: set_remove min l0)</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min :: top_sort_n n l&#39; = l1 ++ b :: l2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà l&#39; ‚Üí P x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk100" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk100"><span class="nb">intros</span> x Hx.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  Forall P l
  ‚Üí n = length l
    ‚Üí <span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">b</span> : A,
        precedes a b
        ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
            a ‚àà l
            ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
                a ‚àà l2
                ‚Üí top_sort_n n l =
                  l1 ++ [b] ++ l2 ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a0 :: l0)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min =
min_predecessors precedes (a0 :: l0) l0 a0</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; =
(<span class="kr">if</span> decide (min = a0)
 <span class="kr">then</span> l0
 <span class="kr">else</span> a0 :: set_remove min l0)</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min :: top_sort_n n l&#39; = l1 ++ b :: l2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l0</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ‚àà l&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk101" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk101"><span class="nb">rewrite</span> Forall_forall <span class="kr">in</span> H2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  Forall P l
  ‚Üí n = length l
    ‚Üí <span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">b</span> : A,
        precedes a b
        ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
            a ‚àà l
            ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
                a ‚àà l2
                ‚Üí top_sort_n n l =
                  l1 ++ [b] ++ l2 ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a0 :: l0)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min =
min_predecessors precedes (a0 :: l0) l0 a0</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; =
(<span class="kr">if</span> decide (min = a0)
 <span class="kr">then</span> l0
 <span class="kr">else</span> a0 :: set_remove min l0)</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min :: top_sort_n n l&#39; = l1 ++ b :: l2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà l0 ‚Üí P x</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l0</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ‚àà l&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk102" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk102"><span class="nb">destruct</span> (decide (min = a0)); <span class="nb">subst</span>; [<span class="bp">by</span> <span class="nb">apply</span> H2 |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  Forall P l
  ‚Üí length l0 = length l
    ‚Üí <span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">b</span> : A,
        precedes a b
        ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
            a ‚àà l
            ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
                a ‚àà l2
                ‚Üí top_sort_n (length l0) l =
                  l1 ++ [b] ++ l2 ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S (length l0) = length (a0 :: l0)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a0 :: l0) l0 a0
:: top_sort_n (length l0)
     (a0
      :: set_remove
           (min_predecessors precedes 
              (a0 :: l0) l0 a0) l0) =
l1 ++ b :: l2</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a0 :: l0) l0 a0 ‚â† a0</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà l0 ‚Üí P x</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x
‚àà a0
  :: set_remove
       (min_predecessors precedes 
          (a0 :: l0) l0 a0) l0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk103" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk103"><span class="nb">apply</span> elem_of_cons <span class="kr">in</span> Hx.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  Forall P l
  ‚Üí length l0 = length l
    ‚Üí <span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">b</span> : A,
        precedes a b
        ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
            a ‚àà l
            ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
                a ‚àà l2
                ‚Üí top_sort_n (length l0) l =
                  l1 ++ [b] ++ l2 ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S (length l0) = length (a0 :: l0)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a0 :: l0) l0 a0
:: top_sort_n (length l0)
     (a0
      :: set_remove
           (min_predecessors precedes 
              (a0 :: l0) l0 a0) l0) =
l1 ++ b :: l2</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a0 :: l0) l0 a0 ‚â† a0</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà l0 ‚Üí P x</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x = a0
‚à® x
  ‚àà set_remove
      (min_predecessors precedes (a0 :: l0) l0 a0)
      l0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk104" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk104"><span class="nb">destruct</span> Hx <span class="kr">as</span> [-&gt; | Hx]; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  Forall P l
  ‚Üí length l0 = length l
    ‚Üí <span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">b</span> : A,
        precedes a b
        ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
            a ‚àà l
            ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
                a ‚àà l2
                ‚Üí top_sort_n (length l0) l =
                  l1 ++ [b] ++ l2 ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S (length l0) = length (a0 :: l0)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a0 :: l0) l0 a0
:: top_sort_n (length l0)
     (a0
      :: set_remove
           (min_predecessors precedes 
              (a0 :: l0) l0 a0) l0) =
l1 ++ b :: l2</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a0 :: l0) l0 a0 ‚â† a0</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà l0 ‚Üí P x</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x
‚àà set_remove
    (min_predecessors precedes (a0 :: l0) l0 a0)
    l0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk105" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk105"><span class="nb">apply</span> set_remove_1 <span class="kr">in</span> Hx.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  Forall P l
  ‚Üí length l0 = length l
    ‚Üí <span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">b</span> : A,
        precedes a b
        ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
            a ‚àà l
            ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
                a ‚àà l2
                ‚Üí top_sort_n (length l0) l =
                  l1 ++ [b] ++ l2 ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S (length l0) = length (a0 :: l0)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a0 :: l0) l0 a0
:: top_sort_n (length l0)
     (a0
      :: set_remove
           (min_predecessors precedes 
              (a0 :: l0) l0 a0) l0) =
l1 ++ b :: l2</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a0 :: l0) l0 a0 ‚â† a0</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà l0 ‚Üí P x</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ‚àà l0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> H2.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk106" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk106">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  Forall P l
  ‚Üí n = length l
    ‚Üí <span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">b</span> : A,
        precedes a b
        ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
            a ‚àà l
            ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
                a ‚àà l2
                ‚Üí top_sort_n n l =
                  l1 ++ [b] ++ l2 ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a0 :: l0)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min =
min_predecessors precedes (a0 :: l0) l0 a0</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; =
(<span class="kr">if</span> decide (min = a0)
 <span class="kr">then</span> l0
 <span class="kr">else</span> a0 :: set_remove min l0)</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min :: top_sort_n n l&#39; = l1 ++ b :: l2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l0</span></span></span><br><span><var>Hall'</var><span class="hyp-type"><b>: </b><span>Forall P l&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk107" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk107"><span class="nb">assert</span> (Hlenl&#39; : n = length l&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  Forall P l
  ‚Üí n = length l
    ‚Üí <span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">b</span> : A,
        precedes a b
        ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
            a ‚àà l
            ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
                a ‚àà l2
                ‚Üí top_sort_n n l =
                  l1 ++ [b] ++ l2 ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a0 :: l0)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min =
min_predecessors precedes (a0 :: l0) l0 a0</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; =
(<span class="kr">if</span> decide (min = a0)
 <span class="kr">then</span> l0
 <span class="kr">else</span> a0 :: set_remove min l0)</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min :: top_sort_n n l&#39; = l1 ++ b :: l2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l0</span></span></span><br><span><var>Hall'</var><span class="hyp-type"><b>: </b><span>Forall P l&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n = length l&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="TopSort-v-chk108" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  Forall P l
  ‚Üí n = length l
    ‚Üí <span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">b</span> : A,
        precedes a b
        ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
            a ‚àà l
            ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
                a ‚àà l2
                ‚Üí top_sort_n n l =
                  l1 ++ [b] ++ l2 ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a0 :: l0)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min =
min_predecessors precedes (a0 :: l0) l0 a0</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; =
(<span class="kr">if</span> decide (min = a0)
 <span class="kr">then</span> l0
 <span class="kr">else</span> a0 :: set_remove min l0)</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min :: top_sort_n n l&#39; = l1 ++ b :: l2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l0</span></span></span><br><span><var>Hall'</var><span class="hyp-type"><b>: </b><span>Forall P l&#39;</span></span></span><br><span><var>Hlenl'</var><span class="hyp-type"><b>: </b><span>n = length l&#39;</span></span></span><br></div><label class="goal-separator" for="TopSort-v-chk108"><hr></label><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk109" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk109">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  Forall P l
  ‚Üí n = length l
    ‚Üí <span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">b</span> : A,
        precedes a b
        ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
            a ‚àà l
            ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
                a ‚àà l2
                ‚Üí top_sort_n n l =
                  l1 ++ [b] ++ l2 ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a0 :: l0)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min =
min_predecessors precedes (a0 :: l0) l0 a0</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; =
(<span class="kr">if</span> decide (min = a0)
 <span class="kr">then</span> l0
 <span class="kr">else</span> a0 :: set_remove min l0)</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min :: top_sort_n n l&#39; = l1 ++ b :: l2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l0</span></span></span><br><span><var>Hall'</var><span class="hyp-type"><b>: </b><span>Forall P l&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n = length l&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk10a" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk10a"><span class="nb">destruct</span> (decide (min = a0)); <span class="nb">subst</span>; <span class="nb">cbn</span>; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  Forall P l
  ‚Üí length l0 = length l
    ‚Üí <span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">b</span> : A,
        precedes a b
        ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
            a ‚àà l
            ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
                a ‚àà l2
                ‚Üí top_sort_n (length l0) l =
                  l1 ++ [b] ++ l2 ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S (length l0) = length (a0 :: l0)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a0 :: l0) l0 a0
:: top_sort_n (length l0)
     (a0
      :: set_remove
           (min_predecessors precedes 
              (a0 :: l0) l0 a0) l0) =
l1 ++ b :: l2</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a0 :: l0) l0 a0 ‚â† a0</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>Hall'</var><span class="hyp-type"><b>: </b><span>Forall P
  (a0
   :: set_remove
        (min_predecessors precedes 
           (a0 :: l0) l0 a0) l0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length l0 =
S
  (length
     (set_remove
        (min_predecessors precedes (a0 :: l0) l0 a0)
        l0))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk10b" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk10b"><span class="nb">rewrite</span> &lt;- set_remove_length; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  Forall P l
  ‚Üí length l0 = length l
    ‚Üí <span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">b</span> : A,
        precedes a b
        ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
            a ‚àà l
            ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
                a ‚àà l2
                ‚Üí top_sort_n (length l0) l =
                  l1 ++ [b] ++ l2 ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S (length l0) = length (a0 :: l0)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a0 :: l0) l0 a0
:: top_sort_n (length l0)
     (a0
      :: set_remove
           (min_predecessors precedes 
              (a0 :: l0) l0 a0) l0) =
l1 ++ b :: l2</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a0 :: l0) l0 a0 ‚â† a0</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>Hall'</var><span class="hyp-type"><b>: </b><span>Forall P
  (a0
   :: set_remove
        (min_predecessors precedes 
           (a0 :: l0) l0 a0) l0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">min_predecessors precedes (a0 :: l0) l0 a0 ‚àà l0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk10c" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk10c"><span class="nb">specialize</span> (min_predecessors_in precedes (a0 :: l0) l0 a0).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  Forall P l
  ‚Üí length l0 = length l
    ‚Üí <span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">b</span> : A,
        precedes a b
        ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
            a ‚àà l
            ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
                a ‚àà l2
                ‚Üí top_sort_n (length l0) l =
                  l1 ++ [b] ++ l2 ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S (length l0) = length (a0 :: l0)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a0 :: l0) l0 a0
:: top_sort_n (length l0)
     (a0
      :: set_remove
           (min_predecessors precedes 
              (a0 :: l0) l0 a0) l0) =
l1 ++ b :: l2</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a0 :: l0) l0 a0 ‚â† a0</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>Hall'</var><span class="hyp-type"><b>: </b><span>Forall P
  (a0
   :: set_remove
        (min_predecessors precedes 
           (a0 :: l0) l0 a0) l0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> <span class="nv">min</span> := min_predecessors precedes (a0 :: l0) l0 a0
   <span class="kr">in</span>
 min = a0 ‚à® min ‚àà l0)
‚Üí min_predecessors precedes (a0 :: l0) l0 a0 ‚àà l0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">cbn</span>; <span class="nb">intros</span> [Heq&#39; | Hin].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk10d" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk10d">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  Forall P l
  ‚Üí n = length l
    ‚Üí <span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">b</span> : A,
        precedes a b
        ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
            a ‚àà l
            ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
                a ‚àà l2
                ‚Üí top_sort_n n l =
                  l1 ++ [b] ++ l2 ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a0 :: l0)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min =
min_predecessors precedes (a0 :: l0) l0 a0</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; =
(<span class="kr">if</span> decide (min = a0)
 <span class="kr">then</span> l0
 <span class="kr">else</span> a0 :: set_remove min l0)</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min :: top_sort_n n l&#39; = l1 ++ b :: l2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l0</span></span></span><br><span><var>Hall'</var><span class="hyp-type"><b>: </b><span>Forall P l&#39;</span></span></span><br><span><var>Hlenl'</var><span class="hyp-type"><b>: </b><span>n = length l&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk10e" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk10e"><span class="nb">specialize</span> (IHn l&#39; Hall&#39; Hlenl&#39; a b Hab).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
  a ‚àà l&#39;
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
      a ‚àà l2
      ‚Üí top_sort_n n l&#39; = l1 ++ [b] ++ l2
        ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a0 :: l0)</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min =
min_predecessors precedes (a0 :: l0) l0 a0</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; =
(<span class="kr">if</span> decide (min = a0)
 <span class="kr">then</span> l0
 <span class="kr">else</span> a0 :: set_remove min l0)</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min :: top_sort_n n l&#39; = l1 ++ b :: l2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l0</span></span></span><br><span><var>Hall'</var><span class="hyp-type"><b>: </b><span>Forall P l&#39;</span></span></span><br><span><var>Hlenl'</var><span class="hyp-type"><b>: </b><span>n = length l&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk10f" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk10f"><span class="nb">assert</span> (Hminb : b &lt;&gt; min).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
  a ‚àà l&#39;
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
      a ‚àà l2
      ‚Üí top_sort_n n l&#39; = l1 ++ [b] ++ l2
        ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a0 :: l0)</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min =
min_predecessors precedes (a0 :: l0) l0 a0</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; =
(<span class="kr">if</span> decide (min = a0)
 <span class="kr">then</span> l0
 <span class="kr">else</span> a0 :: set_remove min l0)</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min :: top_sort_n n l&#39; = l1 ++ b :: l2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l0</span></span></span><br><span><var>Hall'</var><span class="hyp-type"><b>: </b><span>Forall P l&#39;</span></span></span><br><span><var>Hlenl'</var><span class="hyp-type"><b>: </b><span>n = length l&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">b ‚â† min</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="TopSort-v-chk110" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
  a ‚àà l&#39;
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
      a ‚àà l2
      ‚Üí top_sort_n n l&#39; = l1 ++ [b] ++ l2
        ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a0 :: l0)</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min =
min_predecessors precedes (a0 :: l0) l0 a0</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; =
(<span class="kr">if</span> decide (min = a0)
 <span class="kr">then</span> l0
 <span class="kr">else</span> a0 :: set_remove min l0)</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min :: top_sort_n n l&#39; = l1 ++ b :: l2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l0</span></span></span><br><span><var>Hall'</var><span class="hyp-type"><b>: </b><span>Forall P l&#39;</span></span></span><br><span><var>Hlenl'</var><span class="hyp-type"><b>: </b><span>n = length l&#39;</span></span></span><br><span><var>Hminb</var><span class="hyp-type"><b>: </b><span>b ‚â† min</span></span></span><br></div><label class="goal-separator" for="TopSort-v-chk110"><hr></label><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk111" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk111">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
  a ‚àà l&#39;
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
      a ‚àà l2
      ‚Üí top_sort_n n l&#39; = l1 ++ [b] ++ l2
        ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a0 :: l0)</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min =
min_predecessors precedes (a0 :: l0) l0 a0</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; =
(<span class="kr">if</span> decide (min = a0)
 <span class="kr">then</span> l0
 <span class="kr">else</span> a0 :: set_remove min l0)</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min :: top_sort_n n l&#39; = l1 ++ b :: l2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l0</span></span></span><br><span><var>Hall'</var><span class="hyp-type"><b>: </b><span>Forall P l&#39;</span></span></span><br><span><var>Hlenl'</var><span class="hyp-type"><b>: </b><span>n = length l&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">b ‚â† min</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk112" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk112"><span class="nb">destruct</span> (decide (b = min)); <span class="nb">subst</span>; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
  a
  ‚àà (<span class="kr">if</span>
      decide
        (min_predecessors precedes 
           (a0 :: l0) l0 a0 = a0)
     <span class="kr">then</span> l0
     <span class="kr">else</span>
      a0
      :: set_remove
           (min_predecessors precedes 
              (a0 :: l0) l0 a0) l0)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
      a ‚àà l2
      ‚Üí top_sort_n (length l0)
          (<span class="kr">if</span>
            decide
              (min_predecessors precedes
                 (a0 :: l0) l0 a0 = a0)
           <span class="kr">then</span> l0
           <span class="kr">else</span>
            a0
            :: set_remove
                 (min_predecessors precedes
                    (a0 :: l0) l0 a0) l0) =
        l1 ++
        [min_predecessors precedes 
           (a0 :: l0) l0 a0] ++ l2 ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S (length l0) = length (a0 :: l0)</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a
  (min_predecessors precedes (a0 :: l0) l0 a0)</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a0 :: l0) l0 a0
:: top_sort_n (length l0)
     (<span class="kr">if</span>
       decide
         (min_predecessors precedes 
            (a0 :: l0) l0 a0 = a0)
      <span class="kr">then</span> l0
      <span class="kr">else</span>
       a0
       :: set_remove
            (min_predecessors precedes
               (a0 :: l0) l0 a0) l0) =
l1 ++
min_predecessors precedes (a0 :: l0) l0 a0 :: l2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>Hlenl'</var><span class="hyp-type"><b>: </b><span>length l0 =
length
  (<span class="kr">if</span>
    decide
      (min_predecessors precedes 
         (a0 :: l0) l0 a0 = a0)
   <span class="kr">then</span> l0
   <span class="kr">else</span>
    a0
    :: set_remove
         (min_predecessors precedes
            (a0 :: l0) l0 a0) l0)</span></span></span><br><span><var>Hall'</var><span class="hyp-type"><b>: </b><span>Forall P
  (<span class="kr">if</span>
    decide
      (min_predecessors precedes 
         (a0 :: l0) l0 a0 = a0)
   <span class="kr">then</span> l0
   <span class="kr">else</span>
    a0
    :: set_remove
         (min_predecessors precedes 
            (a0 :: l0) l0 a0) l0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">min_predecessors precedes (a0 :: l0) l0 a0
‚â† min_predecessors precedes (a0 :: l0) l0 a0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk113" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk113"><span class="nb">specialize</span> (min_predecessors_zero precedes (a0 :: l0) P Hl l0 a0 eq_refl).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
  a
  ‚àà (<span class="kr">if</span>
      decide
        (min_predecessors precedes 
           (a0 :: l0) l0 a0 = a0)
     <span class="kr">then</span> l0
     <span class="kr">else</span>
      a0
      :: set_remove
           (min_predecessors precedes 
              (a0 :: l0) l0 a0) l0)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
      a ‚àà l2
      ‚Üí top_sort_n (length l0)
          (<span class="kr">if</span>
            decide
              (min_predecessors precedes
                 (a0 :: l0) l0 a0 = a0)
           <span class="kr">then</span> l0
           <span class="kr">else</span>
            a0
            :: set_remove
                 (min_predecessors precedes
                    (a0 :: l0) l0 a0) l0) =
        l1 ++
        [min_predecessors precedes 
           (a0 :: l0) l0 a0] ++ l2 ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S (length l0) = length (a0 :: l0)</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a
  (min_predecessors precedes (a0 :: l0) l0 a0)</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a0 :: l0) l0 a0
:: top_sort_n (length l0)
     (<span class="kr">if</span>
       decide
         (min_predecessors precedes 
            (a0 :: l0) l0 a0 = a0)
      <span class="kr">then</span> l0
      <span class="kr">else</span>
       a0
       :: set_remove
            (min_predecessors precedes
               (a0 :: l0) l0 a0) l0) =
l1 ++
min_predecessors precedes (a0 :: l0) l0 a0 :: l2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>Hlenl'</var><span class="hyp-type"><b>: </b><span>length l0 =
length
  (<span class="kr">if</span>
    decide
      (min_predecessors precedes 
         (a0 :: l0) l0 a0 = a0)
   <span class="kr">then</span> l0
   <span class="kr">else</span>
    a0
    :: set_remove
         (min_predecessors precedes
            (a0 :: l0) l0 a0) l0)</span></span></span><br><span><var>Hall'</var><span class="hyp-type"><b>: </b><span>Forall P
  (<span class="kr">if</span>
    decide
      (min_predecessors precedes 
         (a0 :: l0) l0 a0 = a0)
   <span class="kr">then</span> l0
   <span class="kr">else</span>
    a0
    :: set_remove
         (min_predecessors precedes 
            (a0 :: l0) l0 a0) l0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> <span class="nv">min</span> := min_predecessors precedes (a0 :: l0) l0 a0
   <span class="kr">in</span>
 count_predecessors precedes (a0 :: l0) min = <span class="mi">0</span>)
‚Üí min_predecessors precedes (a0 :: l0) l0 a0
  ‚â† min_predecessors precedes (a0 :: l0) l0 a0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk114" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk114"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
  a
  ‚àà (<span class="kr">if</span>
      decide
        (min_predecessors precedes 
           (a0 :: l0) l0 a0 = a0)
     <span class="kr">then</span> l0
     <span class="kr">else</span>
      a0
      :: set_remove
           (min_predecessors precedes 
              (a0 :: l0) l0 a0) l0)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
      a ‚àà l2
      ‚Üí top_sort_n (length l0)
          (<span class="kr">if</span>
            decide
              (min_predecessors precedes
                 (a0 :: l0) l0 a0 = a0)
           <span class="kr">then</span> l0
           <span class="kr">else</span>
            a0
            :: set_remove
                 (min_predecessors precedes
                    (a0 :: l0) l0 a0) l0) =
        l1 ++
        [min_predecessors precedes 
           (a0 :: l0) l0 a0] ++ l2 ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S (length l0) = length (a0 :: l0)</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a
  (min_predecessors precedes (a0 :: l0) l0 a0)</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a0 :: l0) l0 a0
:: top_sort_n (length l0)
     (<span class="kr">if</span>
       decide
         (min_predecessors precedes 
            (a0 :: l0) l0 a0 = a0)
      <span class="kr">then</span> l0
      <span class="kr">else</span>
       a0
       :: set_remove
            (min_predecessors precedes
               (a0 :: l0) l0 a0) l0) =
l1 ++
min_predecessors precedes (a0 :: l0) l0 a0 :: l2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>Hlenl'</var><span class="hyp-type"><b>: </b><span>length l0 =
length
  (<span class="kr">if</span>
    decide
      (min_predecessors precedes 
         (a0 :: l0) l0 a0 = a0)
   <span class="kr">then</span> l0
   <span class="kr">else</span>
    a0
    :: set_remove
         (min_predecessors precedes
            (a0 :: l0) l0 a0) l0)</span></span></span><br><span><var>Hall'</var><span class="hyp-type"><b>: </b><span>Forall P
  (<span class="kr">if</span>
    decide
      (min_predecessors precedes 
         (a0 :: l0) l0 a0 = a0)
   <span class="kr">then</span> l0
   <span class="kr">else</span>
    a0
    :: set_remove
         (min_predecessors precedes 
            (a0 :: l0) l0 a0) l0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">count_predecessors precedes (a0 :: l0)
  (min_predecessors precedes (a0 :: l0) l0 a0) = <span class="mi">0</span>
‚Üí min_predecessors precedes (a0 :: l0) l0 a0
  ‚â† min_predecessors precedes (a0 :: l0) l0 a0</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk115" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk115"><span class="nb">intro</span> Hmin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
  a
  ‚àà (<span class="kr">if</span>
      decide
        (min_predecessors precedes 
           (a0 :: l0) l0 a0 = a0)
     <span class="kr">then</span> l0
     <span class="kr">else</span>
      a0
      :: set_remove
           (min_predecessors precedes 
              (a0 :: l0) l0 a0) l0)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
      a ‚àà l2
      ‚Üí top_sort_n (length l0)
          (<span class="kr">if</span>
            decide
              (min_predecessors precedes
                 (a0 :: l0) l0 a0 = a0)
           <span class="kr">then</span> l0
           <span class="kr">else</span>
            a0
            :: set_remove
                 (min_predecessors precedes
                    (a0 :: l0) l0 a0) l0) =
        l1 ++
        [min_predecessors precedes 
           (a0 :: l0) l0 a0] ++ l2 ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S (length l0) = length (a0 :: l0)</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a
  (min_predecessors precedes (a0 :: l0) l0 a0)</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a0 :: l0) l0 a0
:: top_sort_n (length l0)
     (<span class="kr">if</span>
       decide
         (min_predecessors precedes 
            (a0 :: l0) l0 a0 = a0)
      <span class="kr">then</span> l0
      <span class="kr">else</span>
       a0
       :: set_remove
            (min_predecessors precedes
               (a0 :: l0) l0 a0) l0) =
l1 ++
min_predecessors precedes (a0 :: l0) l0 a0 :: l2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>Hlenl'</var><span class="hyp-type"><b>: </b><span>length l0 =
length
  (<span class="kr">if</span>
    decide
      (min_predecessors precedes 
         (a0 :: l0) l0 a0 = a0)
   <span class="kr">then</span> l0
   <span class="kr">else</span>
    a0
    :: set_remove
         (min_predecessors precedes
            (a0 :: l0) l0 a0) l0)</span></span></span><br><span><var>Hall'</var><span class="hyp-type"><b>: </b><span>Forall P
  (<span class="kr">if</span>
    decide
      (min_predecessors precedes 
         (a0 :: l0) l0 a0 = a0)
   <span class="kr">then</span> l0
   <span class="kr">else</span>
    a0
    :: set_remove
         (min_predecessors precedes 
            (a0 :: l0) l0 a0) l0)</span></span></span><br><span><var>Hmin</var><span class="hyp-type"><b>: </b><span>count_predecessors precedes 
  (a0 :: l0)
  (min_predecessors precedes (a0 :: l0) l0 a0) =
<span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">min_predecessors precedes (a0 :: l0) l0 a0
‚â† min_predecessors precedes (a0 :: l0) l0 a0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk116" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk116"><span class="nb">apply</span> zero_predecessors <span class="kr">in</span> Hmin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
  a
  ‚àà (<span class="kr">if</span>
      decide
        (min_predecessors precedes 
           (a0 :: l0) l0 a0 = a0)
     <span class="kr">then</span> l0
     <span class="kr">else</span>
      a0
      :: set_remove
           (min_predecessors precedes 
              (a0 :: l0) l0 a0) l0)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
      a ‚àà l2
      ‚Üí top_sort_n (length l0)
          (<span class="kr">if</span>
            decide
              (min_predecessors precedes
                 (a0 :: l0) l0 a0 = a0)
           <span class="kr">then</span> l0
           <span class="kr">else</span>
            a0
            :: set_remove
                 (min_predecessors precedes
                    (a0 :: l0) l0 a0) l0) =
        l1 ++
        [min_predecessors precedes 
           (a0 :: l0) l0 a0] ++ l2 ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S (length l0) = length (a0 :: l0)</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a
  (min_predecessors precedes (a0 :: l0) l0 a0)</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a0 :: l0) l0 a0
:: top_sort_n (length l0)
     (<span class="kr">if</span>
       decide
         (min_predecessors precedes 
            (a0 :: l0) l0 a0 = a0)
      <span class="kr">then</span> l0
      <span class="kr">else</span>
       a0
       :: set_remove
            (min_predecessors precedes
               (a0 :: l0) l0 a0) l0) =
l1 ++
min_predecessors precedes (a0 :: l0) l0 a0 :: l2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>Hlenl'</var><span class="hyp-type"><b>: </b><span>length l0 =
length
  (<span class="kr">if</span>
    decide
      (min_predecessors precedes 
         (a0 :: l0) l0 a0 = a0)
   <span class="kr">then</span> l0
   <span class="kr">else</span>
    a0
    :: set_remove
         (min_predecessors precedes
            (a0 :: l0) l0 a0) l0)</span></span></span><br><span><var>Hall'</var><span class="hyp-type"><b>: </b><span>Forall P
  (<span class="kr">if</span>
    decide
      (min_predecessors precedes 
         (a0 :: l0) l0 a0 = a0)
   <span class="kr">then</span> l0
   <span class="kr">else</span>
    a0
    :: set_remove
         (min_predecessors precedes 
            (a0 :: l0) l0 a0) l0)</span></span></span><br><span><var>Hmin</var><span class="hyp-type"><b>: </b><span>Forall
  (<span class="kr">Œª</span> <span class="nv">b</span> : A,
     ¬¨ precedes b
         (min_predecessors precedes 
            (a0 :: l0) l0 a0)) 
  (a0 :: l0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">min_predecessors precedes (a0 :: l0) l0 a0
‚â† min_predecessors precedes (a0 :: l0) l0 a0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk117" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk117"><span class="nb">rewrite</span> Forall_forall <span class="kr">in</span> Hmin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
  a
  ‚àà (<span class="kr">if</span>
      decide
        (min_predecessors precedes 
           (a0 :: l0) l0 a0 = a0)
     <span class="kr">then</span> l0
     <span class="kr">else</span>
      a0
      :: set_remove
           (min_predecessors precedes 
              (a0 :: l0) l0 a0) l0)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
      a ‚àà l2
      ‚Üí top_sort_n (length l0)
          (<span class="kr">if</span>
            decide
              (min_predecessors precedes
                 (a0 :: l0) l0 a0 = a0)
           <span class="kr">then</span> l0
           <span class="kr">else</span>
            a0
            :: set_remove
                 (min_predecessors precedes
                    (a0 :: l0) l0 a0) l0) =
        l1 ++
        [min_predecessors precedes 
           (a0 :: l0) l0 a0] ++ l2 ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S (length l0) = length (a0 :: l0)</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a
  (min_predecessors precedes (a0 :: l0) l0 a0)</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a0 :: l0) l0 a0
:: top_sort_n (length l0)
     (<span class="kr">if</span>
       decide
         (min_predecessors precedes 
            (a0 :: l0) l0 a0 = a0)
      <span class="kr">then</span> l0
      <span class="kr">else</span>
       a0
       :: set_remove
            (min_predecessors precedes
               (a0 :: l0) l0 a0) l0) =
l1 ++
min_predecessors precedes (a0 :: l0) l0 a0 :: l2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>Hlenl'</var><span class="hyp-type"><b>: </b><span>length l0 =
length
  (<span class="kr">if</span>
    decide
      (min_predecessors precedes 
         (a0 :: l0) l0 a0 = a0)
   <span class="kr">then</span> l0
   <span class="kr">else</span>
    a0
    :: set_remove
         (min_predecessors precedes
            (a0 :: l0) l0 a0) l0)</span></span></span><br><span><var>Hall'</var><span class="hyp-type"><b>: </b><span>Forall P
  (<span class="kr">if</span>
    decide
      (min_predecessors precedes 
         (a0 :: l0) l0 a0 = a0)
   <span class="kr">then</span> l0
   <span class="kr">else</span>
    a0
    :: set_remove
         (min_predecessors precedes 
            (a0 :: l0) l0 a0) l0)</span></span></span><br><span><var>Hmin</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A,
  x ‚àà a0 :: l0
  ‚Üí ¬¨ precedes x
        (min_predecessors precedes 
           (a0 :: l0) l0 a0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">min_predecessors precedes (a0 :: l0) l0 a0
‚â† min_predecessors precedes (a0 :: l0) l0 a0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk118" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk118"><span class="nb">apply</span> Hmin <span class="kr">in</span> Ha.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
  a
  ‚àà (<span class="kr">if</span>
      decide
        (min_predecessors precedes 
           (a0 :: l0) l0 a0 = a0)
     <span class="kr">then</span> l0
     <span class="kr">else</span>
      a0
      :: set_remove
           (min_predecessors precedes 
              (a0 :: l0) l0 a0) l0)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
      a ‚àà l2
      ‚Üí top_sort_n (length l0)
          (<span class="kr">if</span>
            decide
              (min_predecessors precedes
                 (a0 :: l0) l0 a0 = a0)
           <span class="kr">then</span> l0
           <span class="kr">else</span>
            a0
            :: set_remove
                 (min_predecessors precedes
                    (a0 :: l0) l0 a0) l0) =
        l1 ++
        [min_predecessors precedes 
           (a0 :: l0) l0 a0] ++ l2 ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S (length l0) = length (a0 :: l0)</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a
  (min_predecessors precedes (a0 :: l0) l0 a0)</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>¬¨ precedes a
    (min_predecessors precedes (a0 :: l0) l0 a0)</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a0 :: l0) l0 a0
:: top_sort_n (length l0)
     (<span class="kr">if</span>
       decide
         (min_predecessors precedes 
            (a0 :: l0) l0 a0 = a0)
      <span class="kr">then</span> l0
      <span class="kr">else</span>
       a0
       :: set_remove
            (min_predecessors precedes
               (a0 :: l0) l0 a0) l0) =
l1 ++
min_predecessors precedes (a0 :: l0) l0 a0 :: l2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>Hlenl'</var><span class="hyp-type"><b>: </b><span>length l0 =
length
  (<span class="kr">if</span>
    decide
      (min_predecessors precedes 
         (a0 :: l0) l0 a0 = a0)
   <span class="kr">then</span> l0
   <span class="kr">else</span>
    a0
    :: set_remove
         (min_predecessors precedes
            (a0 :: l0) l0 a0) l0)</span></span></span><br><span><var>Hall'</var><span class="hyp-type"><b>: </b><span>Forall P
  (<span class="kr">if</span>
    decide
      (min_predecessors precedes 
         (a0 :: l0) l0 a0 = a0)
   <span class="kr">then</span> l0
   <span class="kr">else</span>
    a0
    :: set_remove
         (min_predecessors precedes 
            (a0 :: l0) l0 a0) l0)</span></span></span><br><span><var>Hmin</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A,
  x ‚àà a0 :: l0
  ‚Üí ¬¨ precedes x
        (min_predecessors precedes 
           (a0 :: l0) l0 a0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">min_predecessors precedes (a0 :: l0) l0 a0
‚â† min_predecessors precedes (a0 :: l0) l0 a0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="bp">congruence</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk119" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk119">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
  a ‚àà l&#39;
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
      a ‚àà l2
      ‚Üí top_sort_n n l&#39; = l1 ++ [b] ++ l2
        ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a0 :: l0)</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min =
min_predecessors precedes (a0 :: l0) l0 a0</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; =
(<span class="kr">if</span> decide (min = a0)
 <span class="kr">then</span> l0
 <span class="kr">else</span> a0 :: set_remove min l0)</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min :: top_sort_n n l&#39; = l1 ++ b :: l2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l0</span></span></span><br><span><var>Hall'</var><span class="hyp-type"><b>: </b><span>Forall P l&#39;</span></span></span><br><span><var>Hlenl'</var><span class="hyp-type"><b>: </b><span>n = length l&#39;</span></span></span><br><span><var>Hminb</var><span class="hyp-type"><b>: </b><span>b ‚â† min</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk11a" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk11a"><span class="nb">destruct</span> l1 <span class="kr">as</span> [| _min l1]; <span class="nb">inversion</span> Heq; [<span class="bp">by</span> <span class="nb">subst</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
  a ‚àà l&#39;
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
      a ‚àà l2
      ‚Üí top_sort_n n l&#39; = l1 ++ [b] ++ l2
        ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a0 :: l0)</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>_min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min =
min_predecessors precedes (a0 :: l0) l0 a0</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; =
(<span class="kr">if</span> decide (min = a0)
 <span class="kr">then</span> l0
 <span class="kr">else</span> a0 :: set_remove min l0)</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min :: top_sort_n n l&#39; = (_min :: l1) ++ b :: l2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l0</span></span></span><br><span><var>Hall'</var><span class="hyp-type"><b>: </b><span>Forall P l&#39;</span></span></span><br><span><var>Hlenl'</var><span class="hyp-type"><b>: </b><span>n = length l&#39;</span></span></span><br><span><var>Hminb</var><span class="hyp-type"><b>: </b><span>b ‚â† min</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>min = _min</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>top_sort_n n l&#39; = l1 ++ b :: l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk11b" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk11b"><span class="nb">subst</span> _min.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
  a ‚àà l&#39;
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
      a ‚àà l2
      ‚Üí top_sort_n n l&#39; = l1 ++ [b] ++ l2
        ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a0 :: l0)</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min =
min_predecessors precedes (a0 :: l0) l0 a0</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; =
(<span class="kr">if</span> decide (min = a0)
 <span class="kr">then</span> l0
 <span class="kr">else</span> a0 :: set_remove min l0)</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min :: top_sort_n n l&#39; = (min :: l1) ++ b :: l2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l0</span></span></span><br><span><var>Hall'</var><span class="hyp-type"><b>: </b><span>Forall P l&#39;</span></span></span><br><span><var>Hlenl'</var><span class="hyp-type"><b>: </b><span>n = length l&#39;</span></span></span><br><span><var>Hminb</var><span class="hyp-type"><b>: </b><span>b ‚â† min</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>top_sort_n n l&#39; = l1 ++ b :: l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk11c" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk11c"><span class="nb">destruct</span> (decide (a ‚àà l&#39;)) <span class="kr">as</span> [i | i]; [<span class="bp">by</span> <span class="nb">apply</span> (IHn l1 i l2 Ha2 H4) |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
  a ‚àà l&#39;
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
      a ‚àà l2
      ‚Üí top_sort_n n l&#39; = l1 ++ [b] ++ l2
        ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S n = length (a0 :: l0)</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>min</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heqmin</var><span class="hyp-type"><b>: </b><span>min =
min_predecessors precedes (a0 :: l0) l0 a0</span></span></span><br><span><var>Heql'</var><span class="hyp-type"><b>: </b><span>l&#39; =
(<span class="kr">if</span> decide (min = a0)
 <span class="kr">then</span> l0
 <span class="kr">else</span> a0 :: set_remove min l0)</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min :: top_sort_n n l&#39; = (min :: l1) ++ b :: l2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>n = length l0</span></span></span><br><span><var>Hall'</var><span class="hyp-type"><b>: </b><span>Forall P l&#39;</span></span></span><br><span><var>Hlenl'</var><span class="hyp-type"><b>: </b><span>n = length l&#39;</span></span></span><br><span><var>Hminb</var><span class="hyp-type"><b>: </b><span>b ‚â† min</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>top_sort_n n l&#39; = l1 ++ b :: l2</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>a ‚àâ l&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk11d" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk11d"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>a, b, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
  a
  ‚àà (<span class="kr">if</span>
      decide
        (min_predecessors precedes 
           (a0 :: l0) l0 a0 = a0)
     <span class="kr">then</span> l0
     <span class="kr">else</span>
      a0
      :: set_remove
           (min_predecessors precedes 
              (a0 :: l0) l0 a0) l0)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
      a ‚àà l2
      ‚Üí top_sort_n (length l0)
          (<span class="kr">if</span>
            decide
              (min_predecessors precedes
                 (a0 :: l0) l0 a0 = a0)
           <span class="kr">then</span> l0
           <span class="kr">else</span>
            a0
            :: set_remove
                 (min_predecessors precedes
                    (a0 :: l0) l0 a0) l0) =
        l1 ++ [b] ++ l2 ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S (length l0) = length (a0 :: l0)</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a0 :: l0) l0 a0
:: top_sort_n (length l0)
     (<span class="kr">if</span>
       decide
         (min_predecessors precedes 
            (a0 :: l0) l0 a0 = a0)
      <span class="kr">then</span> l0
      <span class="kr">else</span>
       a0
       :: set_remove
            (min_predecessors precedes
               (a0 :: l0) l0 a0) l0) =
(min_predecessors precedes (a0 :: l0) l0 a0
 :: l1) ++ b :: l2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>Hlenl'</var><span class="hyp-type"><b>: </b><span>length l0 =
length
  (<span class="kr">if</span>
    decide
      (min_predecessors precedes 
         (a0 :: l0) l0 a0 = a0)
   <span class="kr">then</span> l0
   <span class="kr">else</span>
    a0
    :: set_remove
         (min_predecessors precedes
            (a0 :: l0) l0 a0) l0)</span></span></span><br><span><var>Hall'</var><span class="hyp-type"><b>: </b><span>Forall P
  (<span class="kr">if</span>
    decide
      (min_predecessors precedes 
         (a0 :: l0) l0 a0 = a0)
   <span class="kr">then</span> l0
   <span class="kr">else</span>
    a0
    :: set_remove
         (min_predecessors precedes 
            (a0 :: l0) l0 a0) l0)</span></span></span><br><span><var>Hminb</var><span class="hyp-type"><b>: </b><span>b ‚â† min_predecessors precedes (a0 :: l0) l0 a0</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>a
‚àâ (<span class="kr">if</span>
    decide
      (min_predecessors precedes (a0 :: l0) l0 a0 =
       a0)
   <span class="kr">then</span> l0
   <span class="kr">else</span>
    a0
    :: set_remove
         (min_predecessors precedes 
            (a0 :: l0) l0 a0) l0)</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>top_sort_n (length l0)
  (<span class="kr">if</span>
    decide
      (min_predecessors precedes (a0 :: l0) l0 a0 =
       a0)
   <span class="kr">then</span> l0
   <span class="kr">else</span>
    a0
    :: set_remove
         (min_predecessors precedes 
            (a0 :: l0) l0 a0) l0) = 
l1 ++ b :: l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk11e" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk11e"><span class="nb">apply</span> i, top_sort_set_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>a, b, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
  a
  ‚àà (<span class="kr">if</span>
      decide
        (min_predecessors precedes 
           (a0 :: l0) l0 a0 = a0)
     <span class="kr">then</span> l0
     <span class="kr">else</span>
      a0
      :: set_remove
           (min_predecessors precedes 
              (a0 :: l0) l0 a0) l0)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
      a ‚àà l2
      ‚Üí top_sort_n (length l0)
          (<span class="kr">if</span>
            decide
              (min_predecessors precedes
                 (a0 :: l0) l0 a0 = a0)
           <span class="kr">then</span> l0
           <span class="kr">else</span>
            a0
            :: set_remove
                 (min_predecessors precedes
                    (a0 :: l0) l0 a0) l0) =
        l1 ++ [b] ++ l2 ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S (length l0) = length (a0 :: l0)</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a0 :: l0) l0 a0
:: top_sort_n (length l0)
     (<span class="kr">if</span>
       decide
         (min_predecessors precedes 
            (a0 :: l0) l0 a0 = a0)
      <span class="kr">then</span> l0
      <span class="kr">else</span>
       a0
       :: set_remove
            (min_predecessors precedes
               (a0 :: l0) l0 a0) l0) =
(min_predecessors precedes (a0 :: l0) l0 a0
 :: l1) ++ b :: l2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>Hlenl'</var><span class="hyp-type"><b>: </b><span>length l0 =
length
  (<span class="kr">if</span>
    decide
      (min_predecessors precedes 
         (a0 :: l0) l0 a0 = a0)
   <span class="kr">then</span> l0
   <span class="kr">else</span>
    a0
    :: set_remove
         (min_predecessors precedes
            (a0 :: l0) l0 a0) l0)</span></span></span><br><span><var>Hall'</var><span class="hyp-type"><b>: </b><span>Forall P
  (<span class="kr">if</span>
    decide
      (min_predecessors precedes 
         (a0 :: l0) l0 a0 = a0)
   <span class="kr">then</span> l0
   <span class="kr">else</span>
    a0
    :: set_remove
         (min_predecessors precedes 
            (a0 :: l0) l0 a0) l0)</span></span></span><br><span><var>Hminb</var><span class="hyp-type"><b>: </b><span>b ‚â† min_predecessors precedes (a0 :: l0) l0 a0</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>a
‚àâ (<span class="kr">if</span>
    decide
      (min_predecessors precedes (a0 :: l0) l0 a0 =
       a0)
   <span class="kr">then</span> l0
   <span class="kr">else</span>
    a0
    :: set_remove
         (min_predecessors precedes 
            (a0 :: l0) l0 a0) l0)</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>top_sort_n (length l0)
  (<span class="kr">if</span>
    decide
      (min_predecessors precedes (a0 :: l0) l0 a0 =
       a0)
   <span class="kr">then</span> l0
   <span class="kr">else</span>
    a0
    :: set_remove
         (min_predecessors precedes 
            (a0 :: l0) l0 a0) l0) = 
l1 ++ b :: l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a
‚àà top_sort
    (<span class="kr">if</span>
      decide
        (min_predecessors precedes (a0 :: l0) l0 a0 =
         a0)
     <span class="kr">then</span> l0
     <span class="kr">else</span>
      a0
      :: set_remove
           (min_predecessors precedes (a0 :: l0) l0 a0)
           l0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk11f" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk11f"><span class="nb">unfold</span> top_sort.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>a, b, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
  a
  ‚àà (<span class="kr">if</span>
      decide
        (min_predecessors precedes 
           (a0 :: l0) l0 a0 = a0)
     <span class="kr">then</span> l0
     <span class="kr">else</span>
      a0
      :: set_remove
           (min_predecessors precedes 
              (a0 :: l0) l0 a0) l0)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
      a ‚àà l2
      ‚Üí top_sort_n (length l0)
          (<span class="kr">if</span>
            decide
              (min_predecessors precedes
                 (a0 :: l0) l0 a0 = a0)
           <span class="kr">then</span> l0
           <span class="kr">else</span>
            a0
            :: set_remove
                 (min_predecessors precedes
                    (a0 :: l0) l0 a0) l0) =
        l1 ++ [b] ++ l2 ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S (length l0) = length (a0 :: l0)</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a0 :: l0) l0 a0
:: top_sort_n (length l0)
     (<span class="kr">if</span>
       decide
         (min_predecessors precedes 
            (a0 :: l0) l0 a0 = a0)
      <span class="kr">then</span> l0
      <span class="kr">else</span>
       a0
       :: set_remove
            (min_predecessors precedes
               (a0 :: l0) l0 a0) l0) =
(min_predecessors precedes (a0 :: l0) l0 a0
 :: l1) ++ b :: l2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>Hlenl'</var><span class="hyp-type"><b>: </b><span>length l0 =
length
  (<span class="kr">if</span>
    decide
      (min_predecessors precedes 
         (a0 :: l0) l0 a0 = a0)
   <span class="kr">then</span> l0
   <span class="kr">else</span>
    a0
    :: set_remove
         (min_predecessors precedes
            (a0 :: l0) l0 a0) l0)</span></span></span><br><span><var>Hall'</var><span class="hyp-type"><b>: </b><span>Forall P
  (<span class="kr">if</span>
    decide
      (min_predecessors precedes 
         (a0 :: l0) l0 a0 = a0)
   <span class="kr">then</span> l0
   <span class="kr">else</span>
    a0
    :: set_remove
         (min_predecessors precedes 
            (a0 :: l0) l0 a0) l0)</span></span></span><br><span><var>Hminb</var><span class="hyp-type"><b>: </b><span>b ‚â† min_predecessors precedes (a0 :: l0) l0 a0</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>a
‚àâ (<span class="kr">if</span>
    decide
      (min_predecessors precedes (a0 :: l0) l0 a0 =
       a0)
   <span class="kr">then</span> l0
   <span class="kr">else</span>
    a0
    :: set_remove
         (min_predecessors precedes 
            (a0 :: l0) l0 a0) l0)</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>top_sort_n (length l0)
  (<span class="kr">if</span>
    decide
      (min_predecessors precedes (a0 :: l0) l0 a0 =
       a0)
   <span class="kr">then</span> l0
   <span class="kr">else</span>
    a0
    :: set_remove
         (min_predecessors precedes 
            (a0 :: l0) l0 a0) l0) = 
l1 ++ b :: l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a
‚àà top_sort_n
    (length
       (<span class="kr">if</span>
         decide
           (min_predecessors precedes (a0 :: l0) l0 a0 =
            a0)
        <span class="kr">then</span> l0
        <span class="kr">else</span>
         a0
         :: set_remove
              (min_predecessors precedes (a0 :: l0) l0
                 a0) l0))
    (<span class="kr">if</span>
      decide
        (min_predecessors precedes (a0 :: l0) l0 a0 =
         a0)
     <span class="kr">then</span> l0
     <span class="kr">else</span>
      a0
      :: set_remove
           (min_predecessors precedes (a0 :: l0) l0 a0)
           l0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk120" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk120"><span class="nb">rewrite</span> &lt;- Hlenl&#39;, H4, elem_of_app, !elem_of_cons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>a, b, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> : list A,
  a
  ‚àà (<span class="kr">if</span>
      decide
        (min_predecessors precedes 
           (a0 :: l0) l0 a0 = a0)
     <span class="kr">then</span> l0
     <span class="kr">else</span>
      a0
      :: set_remove
           (min_predecessors precedes 
              (a0 :: l0) l0 a0) l0)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l2</span> : list A,
      a ‚àà l2
      ‚Üí top_sort_n (length l0)
          (<span class="kr">if</span>
            decide
              (min_predecessors precedes
                 (a0 :: l0) l0 a0 = a0)
           <span class="kr">then</span> l0
           <span class="kr">else</span>
            a0
            :: set_remove
                 (min_predecessors precedes
                    (a0 :: l0) l0 a0) l0) =
        l1 ++ [b] ++ l2 ‚Üí <span class="kt">False</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>Heqn</var><span class="hyp-type"><b>: </b><span>S (length l0) = length (a0 :: l0)</span></span></span><br><span><var>Hab</var><span class="hyp-type"><b>: </b><span>precedes a b</span></span></span><br><span><var>l1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0 :: l0</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Ha2</var><span class="hyp-type"><b>: </b><span>a ‚àà l2</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>min_predecessors precedes (a0 :: l0) l0 a0
:: top_sort_n (length l0)
     (<span class="kr">if</span>
       decide
         (min_predecessors precedes 
            (a0 :: l0) l0 a0 = a0)
      <span class="kr">then</span> l0
      <span class="kr">else</span>
       a0
       :: set_remove
            (min_predecessors precedes
               (a0 :: l0) l0 a0) l0) =
(min_predecessors precedes (a0 :: l0) l0 a0
 :: l1) ++ b :: l2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P a0</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Forall P l0</span></span></span><br><span><var>Hlenl'</var><span class="hyp-type"><b>: </b><span>length l0 =
length
  (<span class="kr">if</span>
    decide
      (min_predecessors precedes 
         (a0 :: l0) l0 a0 = a0)
   <span class="kr">then</span> l0
   <span class="kr">else</span>
    a0
    :: set_remove
         (min_predecessors precedes
            (a0 :: l0) l0 a0) l0)</span></span></span><br><span><var>Hall'</var><span class="hyp-type"><b>: </b><span>Forall P
  (<span class="kr">if</span>
    decide
      (min_predecessors precedes 
         (a0 :: l0) l0 a0 = a0)
   <span class="kr">then</span> l0
   <span class="kr">else</span>
    a0
    :: set_remove
         (min_predecessors precedes 
            (a0 :: l0) l0 a0) l0)</span></span></span><br><span><var>Hminb</var><span class="hyp-type"><b>: </b><span>b ‚â† min_predecessors precedes (a0 :: l0) l0 a0</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>a
‚àâ (<span class="kr">if</span>
    decide
      (min_predecessors precedes (a0 :: l0) l0 a0 =
       a0)
   <span class="kr">then</span> l0
   <span class="kr">else</span>
    a0
    :: set_remove
         (min_predecessors precedes 
            (a0 :: l0) l0 a0) l0)</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>top_sort_n (length l0)
  (<span class="kr">if</span>
    decide
      (min_predecessors precedes (a0 :: l0) l0 a0 =
       a0)
   <span class="kr">then</span> l0
   <span class="kr">else</span>
    a0
    :: set_remove
         (min_predecessors precedes 
            (a0 :: l0) l0 a0) l0) = 
l1 ++ b :: l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà l1 ‚à® a = b ‚à® a ‚àà l2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<code>lts</code> is a <span class="inlinecode"><span class="id" title="var">topological_sorting</span></span> of <code>l</code> if it has the same elements as <code>l</code>
  and is <span class="inlinecode"><span class="id" title="var">topologically_sorted</span></span>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">topological_sorting</span>
  (<span class="nv">l</span> <span class="nv">lts</span> : list A)
  :=
  set_eq l lts /\ topologically_sorted precedes lts.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk121" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk121"><span class="kn">Corollary</span> <span class="nf">top_sort_correct</span> : topological_sorting l (top_sort l).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">topological_sorting l (top_sort l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk122" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk122"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">topological_sorting l (top_sort l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk123" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk123"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq l (top_sort l)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="TopSort-v-chk124" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br></div><label class="goal-separator" for="TopSort-v-chk124"><hr></label><div class="goal-conclusion">topologically_sorted precedes (top_sort l)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk125" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk125">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq l (top_sort l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> top_sort_set_eq.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk126" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk126">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">topologically_sorted precedes (top_sort l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> top_sort_sorted.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab5"></a><h2 class="section">Maximal elements</h2>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">get_maximal_element</span> := ListExtras.last_error (top_sort l).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk127" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk127"><span class="kn">Lemma</span> <span class="nf">maximal_element_in</span>
  (<span class="nv">a</span> : A)
  (<span class="nv">Hmax</span> : get_maximal_element = Some a) :
  a ‚àà l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>get_maximal_element = Some a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk128" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk128"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>get_maximal_element = Some a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk129" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk129"><span class="nb">unfold</span> get_maximal_element <span class="kr">in</span> Hmax.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (top_sort l) = Some a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk12a" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk12a"><span class="nb">assert</span> (<span class="kr">exists</span> <span class="nv">l&#39;</span>, l&#39; ++ [a] = top_sort l).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (top_sort l) = Some a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">l&#39;</span> : list A, l&#39; ++ [a] = top_sort l</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="TopSort-v-chk12b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (top_sort l) = Some a</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">l&#39;</span> : list A, l&#39; ++ [a] = top_sort l</span></span></span><br></div><label class="goal-separator" for="TopSort-v-chk12b"><hr></label><div class="goal-conclusion">a ‚àà l</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk12c" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk12c">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (top_sort l) = Some a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">l&#39;</span> : list A, l&#39; ++ [a] = top_sort l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk12d" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk12d"><span class="nb">destruct</span> l; [<span class="bp">by</span> <span class="nb">simpl</span> <span class="kr">in</span> Hmax; itauto <span class="bp">congruence</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (top_sort (a0 :: l0)) = Some a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">l&#39;</span> : list A, l&#39; ++ [a] = top_sort (a0 :: l0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk12e" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk12e"><span class="nb">specialize</span> (@exists_last _ (top_sort (a0 :: l0))) <span class="kr">as</span> Hlast.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (top_sort (a0 :: l0)) = Some a</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>top_sort (a0 :: l0) ‚â† []
‚Üí {l&#39; : list A &amp;
  {a : A | top_sort (a0 :: l0) = l&#39; ++ [a]}}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">l&#39;</span> : list A, l&#39; ++ [a] = top_sort (a0 :: l0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk12f" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk12f">spec Hlast.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (top_sort (a0 :: l0)) = Some a</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>top_sort (a0 :: l0) ‚â† []
‚Üí {l&#39; : list A &amp;
  {a : A | top_sort (a0 :: l0) = l&#39; ++ [a]}}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">top_sort (a0 :: l0) ‚â† []</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="TopSort-v-chk130" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (top_sort (a0 :: l0)) = Some a</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>{l&#39; : list A &amp;
{a : A | top_sort (a0 :: l0) = l&#39; ++ [a]}}</span></span></span><br></div><label class="goal-separator" for="TopSort-v-chk130"><hr></label><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">l&#39;</span> : list A, l&#39; ++ [a] = top_sort (a0 :: l0)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk131" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk131"><span class="nb">unfold</span> top_sort.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (top_sort (a0 :: l0)) = Some a</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>top_sort (a0 :: l0) ‚â† []
‚Üí {l&#39; : list A &amp;
  {a : A | top_sort (a0 :: l0) = l&#39; ++ [a]}}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">top_sort_n (length (a0 :: l0)) (a0 :: l0) ‚â† []</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="TopSort-v-chk132" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (top_sort (a0 :: l0)) = Some a</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>{l&#39; : list A &amp;
{a : A | top_sort (a0 :: l0) = l&#39; ++ [a]}}</span></span></span><br></div><label class="goal-separator" for="TopSort-v-chk132"><hr></label><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">l&#39;</span> : list A, l&#39; ++ [a] = top_sort (a0 :: l0)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk133" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk133"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (top_sort (a0 :: l0)) = Some a</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>top_sort (a0 :: l0) ‚â† []
‚Üí {l&#39; : list A &amp;
  {a : A | top_sort (a0 :: l0) = l&#39; ++ [a]}}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">min_predecessors precedes (a0 :: l0) l0 a0
:: top_sort_n (length l0)
     (<span class="kr">if</span>
       decide
         (min_predecessors precedes (a0 :: l0) l0 a0 =
          a0)
      <span class="kr">then</span> l0
      <span class="kr">else</span>
       a0
       :: set_remove
            (min_predecessors precedes (a0 :: l0) l0
               a0) l0) ‚â† []</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="TopSort-v-chk134" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (top_sort (a0 :: l0)) = Some a</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>{l&#39; : list A &amp;
{a : A | top_sort (a0 :: l0) = l&#39; ++ [a]}}</span></span></span><br></div><label class="goal-separator" for="TopSort-v-chk134"><hr></label><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">l&#39;</span> : list A, l&#39; ++ [a] = top_sort (a0 :: l0)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk135" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk135">itauto <span class="bp">congruence</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (top_sort (a0 :: l0)) = Some a</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>{l&#39; : list A &amp;
{a : A | top_sort (a0 :: l0) = l&#39; ++ [a]}}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">l&#39;</span> : list A, l&#39; ++ [a] = top_sort (a0 :: l0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk136" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk136"><span class="nb">destruct</span> Hlast <span class="kr">as</span> [l&#39; [a&#39; Heq]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (top_sort (a0 :: l0)) = Some a</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>top_sort (a0 :: l0) = l&#39; ++ [a&#39;]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">l&#39;</span> : list A, l&#39; ++ [a] = top_sort (a0 :: l0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk137" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk137"><span class="nb">rewrite</span> Heq <span class="kr">in</span> Hmax.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (l&#39; ++ [a&#39;]) = Some a</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>top_sort (a0 :: l0) = l&#39; ++ [a&#39;]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">l&#39;</span> : list A, l&#39; ++ [a] = top_sort (a0 :: l0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk138" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk138"><span class="nb">rewrite</span> Heq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (l&#39; ++ [a&#39;]) = Some a</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>top_sort (a0 :: l0) = l&#39; ++ [a&#39;]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">l&#39;0</span> : list A, l&#39;0 ++ [a] = l&#39; ++ [a&#39;]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk139" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk139"><span class="kr">exists</span> <span class="nv">l&#39;</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (l&#39; ++ [a&#39;]) = Some a</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>top_sort (a0 :: l0) = l&#39; ++ [a&#39;]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l&#39; ++ [a] = l&#39; ++ [a&#39;]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk13a" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk13a"><span class="nb">specialize</span> (last_error_is_last l&#39; a&#39;) <span class="kr">as</span> Hlast.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a0 :: l0)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (l&#39; ++ [a&#39;]) = Some a</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>top_sort (a0 :: l0) = l&#39; ++ [a&#39;]</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>last_error (l&#39; ++ [a&#39;]) = Some a&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l&#39; ++ [a] = l&#39; ++ [a&#39;]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> itauto <span class="bp">congruence</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk13b" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk13b">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (top_sort l) = Some a</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">l&#39;</span> : list A, l&#39; ++ [a] = top_sort l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk13c" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk13c"><span class="nb">assert</span> (a ‚àà top_sort l).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (top_sort l) = Some a</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">l&#39;</span> : list A, l&#39; ++ [a] = top_sort l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà top_sort l</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="TopSort-v-chk13d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (top_sort l) = Some a</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">l&#39;</span> : list A, l&#39; ++ [a] = top_sort l</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>a ‚àà top_sort l</span></span></span><br></div><label class="goal-separator" for="TopSort-v-chk13d"><hr></label><div class="goal-conclusion">a ‚àà l</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk13e" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk13e">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (top_sort l) = Some a</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">l&#39;</span> : list A, l&#39; ++ [a] = top_sort l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà top_sort l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk13f" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk13f"><span class="nb">destruct</span> H <span class="kr">as</span> [l&#39; &lt;-].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (top_sort l) = Some a</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà l&#39; ++ [a]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> elem_of_app; <span class="nb">right</span>; <span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk140" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk140">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (top_sort l) = Some a</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">l&#39;</span> : list A, l&#39; ++ [a] = top_sort l</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>a ‚àà top_sort l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk141" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk141"><span class="nb">specialize</span> (top_sort_correct) <span class="kr">as</span> [Htop _].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (top_sort l) = Some a</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">l&#39;</span> : list A, l&#39; ++ [a] = top_sort l</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>a ‚àà top_sort l</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk142" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk142"><span class="nb">destruct</span> Htop <span class="kr">as</span> [_ Htop].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (top_sort l) = Some a</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">l&#39;</span> : list A, l&#39; ++ [a] = top_sort l</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>a ‚àà top_sort l</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span>top_sort l ‚äÜ l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">specialize</span> (Htop a H0); itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk143" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk143"><span class="kn">Lemma</span> <span class="nf">get_maximal_element_correct</span>
  (<span class="nv">a</span> <span class="nv">max</span> : A)
  (<span class="nv">Hina</span> : a ‚àà l)
  (<span class="nv">Hmax</span> : get_maximal_element = Some max) :
  ~ precedes max a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>get_maximal_element = Some max</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ precedes max a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk144" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk144"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>get_maximal_element = Some max</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ precedes max a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk145" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk145"><span class="nb">specialize</span> top_sort_correct <span class="kr">as</span> [Hseteq Htop].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>get_maximal_element = Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span>topologically_sorted precedes (top_sort l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ precedes max a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk146" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk146"><span class="nb">unfold</span> topologically_sorted <span class="kr">in</span> Htop.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>get_maximal_element = Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">b</span> : A,
  precedes a b
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A,
      top_sort l = l1 ++ [b] ++ l2 ‚Üí a ‚àâ l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ precedes max a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk147" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk147"><span class="nb">intros</span> contra.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>get_maximal_element = Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> <span class="nv">b</span> : A,
  precedes a b
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A,
      top_sort l = l1 ++ [b] ++ l2 ‚Üí a ‚àâ l2</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk148" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk148"><span class="nb">specialize</span> (Htop max a contra).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>get_maximal_element = Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A,
  top_sort l = l1 ++ [a] ++ l2 ‚Üí max ‚àâ l2</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk149" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk149"><span class="nb">assert</span> (Hinmax : max ‚àà l) <span class="bp">by</span> (<span class="nb">apply</span> maximal_element_in; itauto).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>get_maximal_element = Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A,
  top_sort l = l1 ++ [a] ++ l2 ‚Üí max ‚àâ l2</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max a</span></span></span><br><span><var>Hinmax</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk14a" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk14a"><span class="nb">assert</span> (Hinatop : a ‚àà top_sort l) <span class="bp">by</span> (<span class="nb">apply</span> Hseteq; itauto).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>get_maximal_element = Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A,
  top_sort l = l1 ++ [a] ++ l2 ‚Üí max ‚àâ l2</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max a</span></span></span><br><span><var>Hinmax</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>Hinatop</var><span class="hyp-type"><b>: </b><span>a ‚àà top_sort l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk14b" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk14b"><span class="nb">apply</span> elem_of_list_split <span class="kr">in</span> Hinatop.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>get_maximal_element = Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A,
  top_sort l = l1 ++ [a] ++ l2 ‚Üí max ‚àâ l2</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max a</span></span></span><br><span><var>Hinmax</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>Hinatop</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A, top_sort l = l1 ++ a :: l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk14c" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk14c"><span class="nb">destruct</span> Hinatop <span class="kr">as</span> [prefA [sufA HeqA]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>get_maximal_element = Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A,
  top_sort l = l1 ++ [a] ++ l2 ‚Üí max ‚àâ l2</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max a</span></span></span><br><span><var>Hinmax</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>prefA, sufA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HeqA</var><span class="hyp-type"><b>: </b><span>top_sort l = prefA ++ a :: sufA</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk14d" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk14d"><span class="nb">unfold</span> get_maximal_element <span class="kr">in</span> Hmax.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (top_sort l) = Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A,
  top_sort l = l1 ++ [a] ++ l2 ‚Üí max ‚àâ l2</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max a</span></span></span><br><span><var>Hinmax</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>prefA, sufA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HeqA</var><span class="hyp-type"><b>: </b><span>top_sort l = prefA ++ a :: sufA</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk14e" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk14e"><span class="nb">destruct</span> sufA.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (top_sort l) = Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A,
  top_sort l = l1 ++ [a] ++ l2 ‚Üí max ‚àâ l2</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max a</span></span></span><br><span><var>Hinmax</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>prefA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HeqA</var><span class="hyp-type"><b>: </b><span>top_sort l = prefA ++ [a]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="TopSort-v-chk14f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (top_sort l) = Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A,
  top_sort l = l1 ++ [a] ++ l2 ‚Üí max ‚àâ l2</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max a</span></span></span><br><span><var>Hinmax</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>prefA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>sufA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HeqA</var><span class="hyp-type"><b>: </b><span>top_sort l = prefA ++ a :: a0 :: sufA</span></span></span><br></div><label class="goal-separator" for="TopSort-v-chk14f"><hr></label><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk150" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk150">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (top_sort l) = Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A,
  top_sort l = l1 ++ [a] ++ l2 ‚Üí max ‚àâ l2</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max a</span></span></span><br><span><var>Hinmax</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>prefA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HeqA</var><span class="hyp-type"><b>: </b><span>top_sort l = prefA ++ [a]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk151" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk151"><span class="nb">rewrite</span> HeqA <span class="kr">in</span> Hmax.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>prefA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ [a]) = Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A,
  top_sort l = l1 ++ [a] ++ l2 ‚Üí max ‚àâ l2</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max a</span></span></span><br><span><var>Hinmax</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>HeqA</var><span class="hyp-type"><b>: </b><span>top_sort l = prefA ++ [a]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk152" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk152"><span class="nb">specialize</span> (last_error_is_last prefA a) <span class="kr">as</span> Hlast.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>prefA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ [a]) = Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A,
  top_sort l = l1 ++ [a] ++ l2 ‚Üí max ‚àâ l2</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max a</span></span></span><br><span><var>Hinmax</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>HeqA</var><span class="hyp-type"><b>: </b><span>top_sort l = prefA ++ [a]</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ [a]) = Some a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk153" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk153"><span class="nb">assert</span> (a = max) <span class="bp">by</span> itauto <span class="bp">congruence</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>prefA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ [a]) = Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A,
  top_sort l = l1 ++ [a] ++ l2 ‚Üí max ‚àâ l2</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max a</span></span></span><br><span><var>Hinmax</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>HeqA</var><span class="hyp-type"><b>: </b><span>top_sort l = prefA ++ [a]</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ [a]) = Some a</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a = max</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk154" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk154"><span class="nb">subst</span> a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>prefA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ [max]) = Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max max</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A,
  top_sort l = l1 ++ [max] ++ l2 ‚Üí max ‚àâ l2</span></span></span><br><span><var>Hinmax</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ [max]) = Some max</span></span></span><br><span><var>HeqA</var><span class="hyp-type"><b>: </b><span>top_sort l = prefA ++ [max]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk155" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk155"><span class="nb">specialize</span> StrictOrder_Irreflexive <span class="kr">as</span> Hirr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>prefA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ [max]) = Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max max</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A,
  top_sort l = l1 ++ [max] ++ l2 ‚Üí max ‚àâ l2</span></span></span><br><span><var>Hinmax</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ [max]) = Some max</span></span></span><br><span><var>HeqA</var><span class="hyp-type"><b>: </b><span>top_sort l = prefA ++ [max]</span></span></span><br><span><var>Hirr</var><span class="hyp-type"><b>: </b><span>Irreflexive (precedes_P precedes P)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk156" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk156"><span class="nb">unfold</span> Irreflexive <span class="kr">in</span> Hirr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>prefA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ [max]) = Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max max</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A,
  top_sort l = l1 ++ [max] ++ l2 ‚Üí max ‚àâ l2</span></span></span><br><span><var>Hinmax</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ [max]) = Some max</span></span></span><br><span><var>HeqA</var><span class="hyp-type"><b>: </b><span>top_sort l = prefA ++ [max]</span></span></span><br><span><var>Hirr</var><span class="hyp-type"><b>: </b><span>Reflexive (complement (precedes_P precedes P))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk157" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk157"><span class="nb">unfold</span> complement <span class="kr">in</span> Hirr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>prefA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ [max]) = Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max max</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A,
  top_sort l = l1 ++ [max] ++ l2 ‚Üí max ‚àâ l2</span></span></span><br><span><var>Hinmax</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ [max]) = Some max</span></span></span><br><span><var>HeqA</var><span class="hyp-type"><b>: </b><span>top_sort l = prefA ++ [max]</span></span></span><br><span><var>Hirr</var><span class="hyp-type"><b>: </b><span>Reflexive
  (<span class="kr">Œª</span> (<span class="nv">x</span> : {x : A | P x}) (<span class="nv">y</span> : {x : A | P x}),
     precedes_P precedes P x y ‚Üí <span class="kt">False</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk158" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk158"><span class="nb">unfold</span> Reflexive <span class="kr">in</span> Hirr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>prefA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ [max]) = Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max max</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A,
  top_sort l = l1 ++ [max] ++ l2 ‚Üí max ‚àâ l2</span></span></span><br><span><var>Hinmax</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ [max]) = Some max</span></span></span><br><span><var>HeqA</var><span class="hyp-type"><b>: </b><span>top_sort l = prefA ++ [max]</span></span></span><br><span><var>Hirr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : {x : A | P x},
  precedes_P precedes P x x ‚Üí <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk159" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk159"><span class="nb">assert</span> (P max) <span class="bp">by</span> (<span class="nb">eapply</span> Forall_forall; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>prefA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ [max]) = Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max max</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A,
  top_sort l = l1 ++ [max] ++ l2 ‚Üí max ‚àâ l2</span></span></span><br><span><var>Hinmax</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ [max]) = Some max</span></span></span><br><span><var>HeqA</var><span class="hyp-type"><b>: </b><span>top_sort l = prefA ++ [max]</span></span></span><br><span><var>Hirr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : {x : A | P x},
  precedes_P precedes P x x ‚Üí <span class="kt">False</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>P max</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">specialize</span> (Hirr (exist _ max H)); itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk15a" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk15a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (top_sort l) = Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A,
  top_sort l = l1 ++ [a] ++ l2 ‚Üí max ‚àâ l2</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max a</span></span></span><br><span><var>Hinmax</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>prefA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>sufA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HeqA</var><span class="hyp-type"><b>: </b><span>top_sort l = prefA ++ a :: a0 :: sufA</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk15b" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk15b"><span class="nb">rewrite</span> HeqA <span class="kr">in</span> Hmax.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>prefA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>sufA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ a :: a0 :: sufA) =
Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A,
  top_sort l = l1 ++ [a] ++ l2 ‚Üí max ‚àâ l2</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max a</span></span></span><br><span><var>Hinmax</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>HeqA</var><span class="hyp-type"><b>: </b><span>top_sort l = prefA ++ a :: a0 :: sufA</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk15c" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk15c"><span class="nb">specialize</span> (@exists_last _ (a0 :: sufA)) <span class="kr">as</span> Hex.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>prefA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>sufA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ a :: a0 :: sufA) =
Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A,
  top_sort l = l1 ++ [a] ++ l2 ‚Üí max ‚àâ l2</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max a</span></span></span><br><span><var>Hinmax</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>HeqA</var><span class="hyp-type"><b>: </b><span>top_sort l = prefA ++ a :: a0 :: sufA</span></span></span><br><span><var>Hex</var><span class="hyp-type"><b>: </b><span>a0 :: sufA ‚â† []
‚Üí {l&#39; : list A &amp;
  {a : A | a0 :: sufA = l&#39; ++ [a]}}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk15d" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk15d">spec Hex.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>prefA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>sufA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ a :: a0 :: sufA) =
Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A,
  top_sort l = l1 ++ [a] ++ l2 ‚Üí max ‚àâ l2</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max a</span></span></span><br><span><var>Hinmax</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>HeqA</var><span class="hyp-type"><b>: </b><span>top_sort l = prefA ++ a :: a0 :: sufA</span></span></span><br><span><var>Hex</var><span class="hyp-type"><b>: </b><span>a0 :: sufA ‚â† []
‚Üí {l&#39; : list A &amp;
  {a : A | a0 :: sufA = l&#39; ++ [a]}}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 :: sufA ‚â† []</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="TopSort-v-chk15e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>prefA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>sufA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ a :: a0 :: sufA) =
Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A,
  top_sort l = l1 ++ [a] ++ l2 ‚Üí max ‚àâ l2</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max a</span></span></span><br><span><var>Hinmax</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>HeqA</var><span class="hyp-type"><b>: </b><span>top_sort l = prefA ++ a :: a0 :: sufA</span></span></span><br><span><var>Hex</var><span class="hyp-type"><b>: </b><span>{l&#39; : list A &amp; {a : A | a0 :: sufA = l&#39; ++ [a]}}</span></span></span><br></div><label class="goal-separator" for="TopSort-v-chk15e"><hr></label><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk15f" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk15f">itauto <span class="bp">congruence</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>prefA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>sufA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ a :: a0 :: sufA) =
Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A,
  top_sort l = l1 ++ [a] ++ l2 ‚Üí max ‚àâ l2</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max a</span></span></span><br><span><var>Hinmax</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>HeqA</var><span class="hyp-type"><b>: </b><span>top_sort l = prefA ++ a :: a0 :: sufA</span></span></span><br><span><var>Hex</var><span class="hyp-type"><b>: </b><span>{l&#39; : list A &amp; {a : A | a0 :: sufA = l&#39; ++ [a]}}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk160" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk160"><span class="nb">destruct</span> Hex <span class="kr">as</span> [l&#39; [a&#39; Heq]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>prefA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>sufA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ a :: a0 :: sufA) =
Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A,
  top_sort l = l1 ++ [a] ++ l2 ‚Üí max ‚àâ l2</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max a</span></span></span><br><span><var>Hinmax</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>HeqA</var><span class="hyp-type"><b>: </b><span>top_sort l = prefA ++ a :: a0 :: sufA</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>a0 :: sufA = l&#39; ++ [a&#39;]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk161" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk161"><span class="nb">rewrite</span> Heq <span class="kr">in</span> Hmax.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>prefA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>sufA, l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ a :: l&#39; ++ [a&#39;]) =
Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A,
  top_sort l = l1 ++ [a] ++ l2 ‚Üí max ‚àâ l2</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max a</span></span></span><br><span><var>Hinmax</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>HeqA</var><span class="hyp-type"><b>: </b><span>top_sort l = prefA ++ a :: a0 :: sufA</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>a0 :: sufA = l&#39; ++ [a&#39;]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk162" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk162"><span class="nb">specialize</span> (last_error_is_last (prefA ++ a :: l&#39;) a&#39;) <span class="kr">as</span> Hlast.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>prefA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>sufA, l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ a :: l&#39; ++ [a&#39;]) =
Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A,
  top_sort l = l1 ++ [a] ++ l2 ‚Üí max ‚àâ l2</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max a</span></span></span><br><span><var>Hinmax</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>HeqA</var><span class="hyp-type"><b>: </b><span>top_sort l = prefA ++ a :: a0 :: sufA</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>a0 :: sufA = l&#39; ++ [a&#39;]</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>last_error ((prefA ++ a :: l&#39;) ++ [a&#39;]) =
Some a&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk163" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk163"><span class="nb">rewrite</span> &lt;- app_assoc <span class="kr">in</span> Hlast.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>prefA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>sufA, l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ a :: l&#39; ++ [a&#39;]) =
Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A,
  top_sort l = l1 ++ [a] ++ l2 ‚Üí max ‚àâ l2</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max a</span></span></span><br><span><var>Hinmax</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>HeqA</var><span class="hyp-type"><b>: </b><span>top_sort l = prefA ++ a :: a0 :: sufA</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>a0 :: sufA = l&#39; ++ [a&#39;]</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ (a :: l&#39;) ++ [a&#39;]) =
Some a&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk164" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk164"><span class="nb">simpl</span> <span class="kr">in</span> Hlast.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>prefA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>sufA, l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ a :: l&#39; ++ [a&#39;]) =
Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A,
  top_sort l = l1 ++ [a] ++ l2 ‚Üí max ‚àâ l2</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max a</span></span></span><br><span><var>Hinmax</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>HeqA</var><span class="hyp-type"><b>: </b><span>top_sort l = prefA ++ a :: a0 :: sufA</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>a0 :: sufA = l&#39; ++ [a&#39;]</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ a :: l&#39; ++ [a&#39;]) =
Some a&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk165" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk165"><span class="nb">assert</span> (a&#39; = max) <span class="bp">by</span> itauto <span class="bp">congruence</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>prefA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>sufA, l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ a :: l&#39; ++ [a&#39;]) =
Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list A,
  top_sort l = l1 ++ [a] ++ l2 ‚Üí max ‚àâ l2</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max a</span></span></span><br><span><var>Hinmax</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>HeqA</var><span class="hyp-type"><b>: </b><span>top_sort l = prefA ++ a :: a0 :: sufA</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>a0 :: sufA = l&#39; ++ [a&#39;]</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ a :: l&#39; ++ [a&#39;]) =
Some a&#39;</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a&#39; = max</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk166" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk166"><span class="nb">specialize</span> (Htop prefA (l&#39; ++ [a&#39;])).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>prefA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>sufA, l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ a :: l&#39; ++ [a&#39;]) =
Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span>top_sort l = prefA ++ [a] ++ l&#39; ++ [a&#39;]
‚Üí max ‚àâ l&#39; ++ [a&#39;]</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max a</span></span></span><br><span><var>Hinmax</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>HeqA</var><span class="hyp-type"><b>: </b><span>top_sort l = prefA ++ a :: a0 :: sufA</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>a0 :: sufA = l&#39; ++ [a&#39;]</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ a :: l&#39; ++ [a&#39;]) =
Some a&#39;</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a&#39; = max</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk167" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk167"><span class="nb">rewrite</span> Heq <span class="kr">in</span> HeqA.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>prefA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>sufA, l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ a :: l&#39; ++ [a&#39;]) =
Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span>top_sort l = prefA ++ [a] ++ l&#39; ++ [a&#39;]
‚Üí max ‚àâ l&#39; ++ [a&#39;]</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max a</span></span></span><br><span><var>Hinmax</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>HeqA</var><span class="hyp-type"><b>: </b><span>top_sort l = prefA ++ a :: l&#39; ++ [a&#39;]</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>a0 :: sufA = l&#39; ++ [a&#39;]</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ a :: l&#39; ++ [a&#39;]) =
Some a&#39;</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a&#39; = max</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk168" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk168"><span class="nb">specialize</span> (Htop HeqA).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>prefA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>sufA, l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ a :: l&#39; ++ [a&#39;]) =
Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span>max ‚àâ l&#39; ++ [a&#39;]</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max a</span></span></span><br><span><var>Hinmax</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>HeqA</var><span class="hyp-type"><b>: </b><span>top_sort l = prefA ++ a :: l&#39; ++ [a&#39;]</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>a0 :: sufA = l&#39; ++ [a&#39;]</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ a :: l&#39; ++ [a&#39;]) =
Some a&#39;</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a&#39; = max</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk169" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk169"><span class="nb">subst</span> a&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>prefA</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>sufA, l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ a :: l&#39; ++ [max]) =
Some max</span></span></span><br><span><var>Hseteq</var><span class="hyp-type"><b>: </b><span>set_eq l (top_sort l)</span></span></span><br><span><var>Htop</var><span class="hyp-type"><b>: </b><span>max ‚àâ l&#39; ++ [max]</span></span></span><br><span><var>contra</var><span class="hyp-type"><b>: </b><span>precedes max a</span></span></span><br><span><var>Hinmax</var><span class="hyp-type"><b>: </b><span>max ‚àà l</span></span></span><br><span><var>Hlast</var><span class="hyp-type"><b>: </b><span>last_error (prefA ++ a :: l&#39; ++ [max]) =
Some max</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>a0 :: sufA = l&#39; ++ [max]</span></span></span><br><span><var>HeqA</var><span class="hyp-type"><b>: </b><span>top_sort l = prefA ++ a :: l&#39; ++ [max]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="bp">contradict</span> Htop; <span class="nb">apply</span> elem_of_app; <span class="nb">right</span>; <span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk16a" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk16a"><span class="kn">Lemma</span> <span class="nf">get_maximal_element_some</span>
  (<span class="nv">Hne</span> : l &lt;&gt; []) :
  <span class="kr">exists</span> <span class="nv">a</span>, get_maximal_element = Some a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hne</var><span class="hyp-type"><b>: </b><span>l ‚â† []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">a</span> : A, get_maximal_element = Some a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk16b" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk16b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hne</var><span class="hyp-type"><b>: </b><span>l ‚â† []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">a</span> : A, get_maximal_element = Some a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk16c" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk16c"><span class="nb">unfold</span> get_maximal_element.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P l</span></span></span><br><span><var>Hne</var><span class="hyp-type"><b>: </b><span>l ‚â† []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">a</span> : A, last_error (top_sort l) = Some a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk16d" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk16d"><span class="nb">destruct</span> l; <span class="nb">cbn</span>; [<span class="bp">by</span> <span class="bp">congruence</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a :: l0)</span></span></span><br><span><var>Hne</var><span class="hyp-type"><b>: </b><span>a :: l0 ‚â† []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">a0</span> : A,
  Some
    (List.<span class="nb">last</span>
       (top_sort_n (length l0)
          (<span class="kr">if</span>
            decide
              (min_predecessors precedes (a :: l0) l0
                 a = a)
           <span class="kr">then</span> l0
           <span class="kr">else</span>
            a
            :: set_remove
                 (min_predecessors precedes (a :: l0)
                    l0 a) l0))
       (min_predecessors precedes (a :: l0) l0 a)) =
  Some a0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk16e" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk16e"><span class="kr">exists</span> (<span class="nv">List</span>.<span class="nb">last</span>
     (top_sort_n (length l0)
        (<span class="kr">if</span> decide (min_predecessors precedes (a :: l0) l0 a = a)
         <span class="kr">then</span> l0
         <span class="kr">else</span> a :: set_remove (min_predecessors precedes (a :: l0) l0 a) l0))
     (min_predecessors precedes (a :: l0) l0 a)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>relation A</span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hso</var><span class="hyp-type"><b>: </b><span>StrictOrder (precedes_P precedes P)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>Forall P (a :: l0)</span></span></span><br><span><var>Hne</var><span class="hyp-type"><b>: </b><span>a :: l0 ‚â† []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Some
  (List.<span class="nb">last</span>
     (top_sort_n (length l0)
        (<span class="kr">if</span>
          decide
            (min_predecessors precedes (a :: l0) l0 a =
             a)
         <span class="kr">then</span> l0
         <span class="kr">else</span>
          a
          :: set_remove
               (min_predecessors precedes (a :: l0) l0
                  a) l0))
     (min_predecessors precedes (a :: l0) l0 a)) =
Some
  (List.<span class="nb">last</span>
     (top_sort_n (length l0)
        (<span class="kr">if</span>
          decide
            (min_predecessors precedes (a :: l0) l0 a =
             a)
         <span class="kr">then</span> l0
         <span class="kr">else</span>
          a
          :: set_remove
               (min_predecessors precedes (a :: l0) l0
                  a) l0))
     (min_predecessors precedes (a :: l0) l0 a))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sec_top_sort</span>.</span></span></pre><div class="doc">
  Some of the results above depend on the <code>precedes</code> relation being a
  <span class="inlinecode"><span class="id" title="var">StrictOrder</span></span> for a property-defined <span class="inlinecode"><span class="id" title="var">sig</span></span> type.  However, when the relation
  is strict to begin with, we can obtain simpler statements for these results.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sec_simple_top_sort</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  `{EqDecision A}
  (precedes : A -&gt; A -&gt; <span class="kt">Prop</span>)
  `{!RelDecision precedes}
  `{!StrictOrder precedes}
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk16f" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk16f">#[local] <span class="kn">Lemma</span> <span class="nf">Forall_True</span> : <span class="kr">forall</span> <span class="nv">l</span> : list A, Forall (<span class="kr">fun</span> <span class="nv">_</span> =&gt; <span class="kt">True</span>) l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>A ‚Üí A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>StrictOrder0</var><span class="hyp-type"><b>: </b><span>StrictOrder precedes</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A, Forall (<span class="kr">Œª</span> <span class="nv">_</span> : A, <span class="kt">True</span>) l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk170" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk170"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>A ‚Üí A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>StrictOrder0</var><span class="hyp-type"><b>: </b><span>StrictOrder precedes</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A, Forall (<span class="kr">Œª</span> <span class="nv">_</span> : A, <span class="kt">True</span>) l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intro</span>; <span class="nb">apply</span> Forall_forall.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk171" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk171"><span class="kn">Corollary</span> <span class="nf">simple_topologically_sorted_precedes_closed_remove_last</span>
  (<span class="nv">l</span> : list A)
  (<span class="nv">Hts</span> : topologically_sorted precedes l)
  (<span class="nv">init</span> : list A)
  (<span class="nv">final</span> : A)
  (<span class="nv">Hinit</span> : l = init ++ [final])
  (<span class="nv">Hpc</span> : precedes_closed precedes l)
  : precedes_closed precedes init.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>A ‚Üí A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>StrictOrder0</var><span class="hyp-type"><b>: </b><span>StrictOrder precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted precedes l</span></span></span><br><span><var>init</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>final</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>l = init ++ [final]</span></span></span><br><span><var>Hpc</var><span class="hyp-type"><b>: </b><span>precedes_closed precedes l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">precedes_closed precedes init</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk172" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk172"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>A ‚Üí A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>StrictOrder0</var><span class="hyp-type"><b>: </b><span>StrictOrder precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hts</var><span class="hyp-type"><b>: </b><span>topologically_sorted precedes l</span></span></span><br><span><var>init</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>final</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>l = init ++ [final]</span></span></span><br><span><var>Hpc</var><span class="hyp-type"><b>: </b><span>precedes_closed precedes l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">precedes_closed precedes init</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> topologically_sorted_precedes_closed_remove_last;
    [<span class="nb">typeclasses eauto</span> | <span class="nb">apply</span> Forall_True | ..].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk173" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk173"><span class="kn">Corollary</span> <span class="nf">simple_top_sort_correct</span> : <span class="kr">forall</span> <span class="nv">l</span>,
  topological_sorting precedes l (top_sort precedes l).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>A ‚Üí A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>StrictOrder0</var><span class="hyp-type"><b>: </b><span>StrictOrder precedes</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  topological_sorting precedes l (top_sort precedes l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk174" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk174"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>A ‚Üí A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>StrictOrder0</var><span class="hyp-type"><b>: </b><span>StrictOrder precedes</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A,
  topological_sorting precedes l (top_sort precedes l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intro</span>; <span class="nb">eapply</span> top_sort_correct; [<span class="nb">typeclasses eauto</span> | <span class="nb">apply</span> Forall_True].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk175" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk175"><span class="kn">Corollary</span> <span class="nf">simple_maximal_element_in</span> <span class="nv">l</span>
  (<span class="nv">a</span> : A)
  (<span class="nv">Hmax</span> : get_maximal_element precedes l = Some a) :
  a ‚àà l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>A ‚Üí A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>StrictOrder0</var><span class="hyp-type"><b>: </b><span>StrictOrder precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>get_maximal_element precedes l = Some a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk176" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk176"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>A ‚Üí A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>StrictOrder0</var><span class="hyp-type"><b>: </b><span>StrictOrder precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>get_maximal_element precedes l = Some a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> maximal_element_in; [<span class="nb">typeclasses eauto</span> | <span class="nb">apply</span> Forall_True |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk177" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk177"><span class="kn">Corollary</span> <span class="nf">simple_get_maximal_element_correct</span> <span class="nv">l</span>
  (<span class="nv">a</span> <span class="nv">max</span> : A)
  (<span class="nv">Hina</span> : a ‚àà l)
  (<span class="nv">Hmax</span> : get_maximal_element precedes l = Some max) :
  ~ precedes max a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>A ‚Üí A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>StrictOrder0</var><span class="hyp-type"><b>: </b><span>StrictOrder precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>get_maximal_element precedes l = Some max</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ precedes max a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk178" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk178"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>A ‚Üí A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>StrictOrder0</var><span class="hyp-type"><b>: </b><span>StrictOrder precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a, max</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>Hmax</var><span class="hyp-type"><b>: </b><span>get_maximal_element precedes l = Some max</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ precedes max a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> get_maximal_element_correct; [<span class="nb">typeclasses eauto</span> | <span class="nb">apply</span> Forall_True | ..].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk179" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk179"><span class="kn">Corollary</span> <span class="nf">simple_get_maximal_element_some</span>
  <span class="nv">l</span> (<span class="nv">Hne</span> : l &lt;&gt; []) :
  <span class="kr">exists</span> <span class="nv">a</span>, get_maximal_element precedes l = Some a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>A ‚Üí A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>StrictOrder0</var><span class="hyp-type"><b>: </b><span>StrictOrder precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hne</var><span class="hyp-type"><b>: </b><span>l ‚â† []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">a</span> : A, get_maximal_element precedes l = Some a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="TopSort-v-chk17a" style="display: none" type="checkbox"><label class="alectryon-input" for="TopSort-v-chk17a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>precedes</var><span class="hyp-type"><b>: </b><span>A ‚Üí A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>RelDecision0</var><span class="hyp-type"><b>: </b><span>RelDecision precedes</span></span></span><br><span><var>StrictOrder0</var><span class="hyp-type"><b>: </b><span>StrictOrder precedes</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hne</var><span class="hyp-type"><b>: </b><span>l ‚â† []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">a</span> : A, get_maximal_element precedes l = Some a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> get_maximal_element_some; [<span class="nb">apply</span> Forall_True |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sec_simple_top_sort</span>.</span></span></pre></article></body></html>