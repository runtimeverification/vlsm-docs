<!DOCTYPE html>
<html class="alectryon-standalone"><head><title>Equivocation.v</title><meta charset="utf-8"><meta content="Alectryon" name="generator"><meta name="viewport" content="width=device-width, initial-scale=1"><link href="alectryon.css" rel="stylesheet"><link href="pygments.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" /><script src="alectryon.js"></script></head><body><article class="alectryon-root alectryon-windowed alectryon-coqdoc"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.18.0+0.18.1. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk0"><span class="kn">From</span> VLSM.Lib <span class="kn">Require Import</span> Itauto.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">[Loading ML file ring_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file zify_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file micromega_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file btauto_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file coq-itauto.plugin ... <span class="bp">done</span>]</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> Coq <span class="kn">Require Import</span> Streams Rdefinitions.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> stdpp <span class="kn">Require Import</span> prelude finite.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> VLSM.Lib <span class="kn">Require Import</span> Preamble ListExtras StdppListSet StdppExtras.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> VLSM.Lib <span class="kn">Require Import</span> ListSetExtras Measurable.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> VLSM.Core <span class="kn">Require Import</span> VLSM VLSMProjections Composition ProjectionTraces Validator.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> VLSM.Core <span class="kn">Require Export</span> PreloadedVLSM ConstrainedVLSM ReachableThreshold.</span></span></pre><div class="doc">
<a id="lab1"></a><h1 class="section">Core: VLSM Equivocation Definitions</h1>
<div class="paragraph"> </div>

  This module is dedicated to building the vocabulary for discussing equivocation.
  Equivocation occurs on the receipt of a message which has not been previously sent.
  The designated sender (validator) of the message is then said to be equivocating.
  Our main purpose is to keep track of equivocating senders in a composite context
  and limit equivocation by means of a composition constraint.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --></pre><div class="doc">
<a id="lab2"></a><h2 class="section">Basic equivocation</h2>
<div class="paragraph"> </div>

  Assuming a set of <code>state</code>s, and a set of <code>validator</code>s,
  which is <span class="inlinecode"><span class="id" title="var">Measurable</span></span> and has a <span class="inlinecode"><span class="id" title="var">ReachableThreshold</span></span>, we can define
  <span class="inlinecode"><span class="id" title="var">BasicEquivocation</span></span> starting from an <span class="inlinecode"><span class="id" title="var">is_equivocating</span></span> relation
  deciding whether a validator is equivocating in a state.

<div class="paragraph"> </div>

  To avoid a <span class="inlinecode"><span class="id" title="var">Finite</span></span> constraint on the entire set of validators, we will
  assume that there is a finite set of validators for each state, which
  can be retrieved through the <span class="inlinecode"><span class="id" title="var">state_validators</span></span> function.
  This can be taken to be entire set of validators when that is finite,
  or the set of senders for all messages in the state for
  <span class="inlinecode"><span class="id" title="var">state_encapsulating_messages</span></span>.

<div class="paragraph"> </div>

  This allows us to determine the <span class="inlinecode"><span class="id" title="var">equivocating_validators</span></span> for a given
  state as those equivocating in that state.

<div class="paragraph"> </div>

  The <span class="inlinecode"><span class="id" title="var">equivocation_fault</span></span> is determined the as the sum of weights of the
  <span class="inlinecode"><span class="id" title="var">equivocating_validators</span></span>.

<div class="paragraph"> </div>

  We call a state <span class="inlinecode"><span class="id" title="var">not_heavy</span></span> if its corresponding <span class="inlinecode"><span class="id" title="var">equivocation_fault</span></span>
  is lower than the <span class="inlinecode"><span class="id" title="var">threshold</span></span> set for the <code>validator</code>s type.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Class</span> <span class="nf">BasicEquivocation</span>
  (<span class="nv">state</span> <span class="nv">validator</span> <span class="nv">Cv</span> : <span class="kt">Type</span>)
  (<span class="nv">threshold</span> : R)
  {<span class="nv">measurable_V</span> : Measurable validator}
  `{ReachableThreshold validator Cv threshold}
  : <span class="kt">Type</span> :=
{
  is_equivocating (s : state) (v : validator) : <span class="kt">Prop</span>;
  is_equivocating_dec : RelDecision is_equivocating;
  <span class="sd">(** retrieves a set containing all possible validators for a state *)</span>
  state_validators (s : state) : Cv;
  <span class="sd">(** all validators which are equivocating in a given composite state *)</span>
  equivocating_validators (s : state) : Cv :=
    filter (<span class="kr">fun</span> <span class="nv">v</span> =&gt; is_equivocating s v) (state_validators s);
  <span class="sd">(** equivocation fault sum: the sum of the weights of equivocating validators *)</span>
  equivocation_fault (s : state) : R :=
    sum_weights (equivocating_validators s);
  not_heavy (s : state) : <span class="kt">Prop</span> := (equivocation_fault s &lt;= threshold)%R
}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1"><span class="kn">Lemma</span> <span class="nf">eq_equivocating_validators_equivocation_fault</span>
   `{BasicEquivocation st validator Cv}
   : <span class="kr">forall</span> <span class="nv">s1</span> <span class="nv">s2</span>,
    equivocating_validators s1 ‚â°@{Cv} equivocating_validators s2 -&gt;
    equivocation_fault s1 = equivocation_fault s2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>st, validator, Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>measurable_V, Hm</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv threshold</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>BasicEquivocation st validator Cv threshold</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : st,
  equivocating_validators s1
  ‚â° equivocating_validators s2
  ‚Üí equivocation_fault s1 = equivocation_fault s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>st, validator, Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>measurable_V, Hm</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv threshold</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>BasicEquivocation st validator Cv threshold</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : st,
  equivocating_validators s1
  ‚â° equivocating_validators s2
  ‚Üí equivocation_fault s1 = equivocation_fault s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span>; <span class="nb">apply</span> sum_weights_proper.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3"><span class="kn">Lemma</span> <span class="nf">incl_equivocating_validators_equivocation_fault</span>
  `{Heqv : BasicEquivocation st validator }
  `{EqDecision validator}
  : <span class="kr">forall</span> <span class="nv">s1</span> <span class="nv">s2</span>,
    equivocating_validators s1 ‚äÜ equivocating_validators s2 -&gt;
    (equivocation_fault s1 &lt;= equivocation_fault s2)%R.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>st, validator, Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>measurable_V, Hm</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv threshold</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>BasicEquivocation st validator Cv threshold</span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : st,
  equivocating_validators s1
  ‚äÜ equivocating_validators s2
  ‚Üí (equivocation_fault s1 &lt;= equivocation_fault s2)%R</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk4"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>st, validator, Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>measurable_V, Hm</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv threshold</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>BasicEquivocation st validator Cv threshold</span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : st,
  equivocating_validators s1
  ‚äÜ equivocating_validators s2
  ‚Üí (equivocation_fault s1 &lt;= equivocation_fault s2)%R</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk5"><span class="nb">intros</span> s1 s2 H_incl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>st, validator, Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>measurable_V, Hm</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv threshold</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>BasicEquivocation st validator Cv threshold</span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>st</span></span></span><br><span><var>H_incl</var><span class="hyp-type"><b>: </b><span>equivocating_validators s1
‚äÜ equivocating_validators s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(equivocation_fault s1 &lt;= equivocation_fault s2)%R</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> sum_weights_subseteq.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab3"></a><h3 class="section">State-message oracles and endowing states with history</h3>
<div class="paragraph"> </div>

  Our first step is to define some useful concepts in the context of a single VLSM.

<div class="paragraph"> </div>

  Apart from basic definitions of equivocation, we introduce the concept of a
  <span class="inlinecode"><span class="id" title="var">state_message_oracle</span></span>. Such an oracle can, given a state and a message,
  decide whether the message has been sent (or received) in the history leading
  to the current state. Formally, we say that a <span class="inlinecode"><span class="id" title="var">message</span></span> &lt;m&gt; <span class="inlinecode"><span class="id" title="var">has_been_sent</span></span>
  if we're in  <span class="inlinecode"><span class="id" title="var">state</span></span> &lt;s&gt; iff every valid trace which produces &lt;s&gt; contains &lt;m&gt;
  as a sent message somewhere along the way.

<div class="paragraph"> </div>

  The existence of such oracles, which practically imply endowing states with history,
  is necessary if we are to detect equivocation using a composition constraint, as these
  constraints act upon states, not traces.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sec_simple</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  (<span class="nv">vlsm</span> : VLSM message)
  (<span class="nv">pre_vlsm</span> := preloaded_with_all_messages_vlsm vlsm)
  .</span></span></pre><div class="doc">
  The following property detects equivocation in a given
  trace for a given message.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">equivocation_in_trace</span>
  (<span class="nv">msg</span> : message)
  (<span class="nv">tr</span> : list (transition_item vlsm))
  : <span class="kt">Prop</span>
  :=
  <span class="kr">exists</span>
    (<span class="nv">prefix</span> : list transition_item)
    (<span class="nv">item</span> : transition_item)
    (<span class="nv">suffix</span> : list transition_item),
    tr = prefix ++ item :: suffix
    /\ input item = Some msg
    /\ ~ trace_has_message (field_selector output) msg prefix.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk6">#[export] <span class="kn">Instance</span> <span class="nf">equivocation_in_trace_dec</span>
  `{EqDecision message}
  : RelDecision equivocation_in_trace.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RelDecision equivocation_in_trace</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk7"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RelDecision equivocation_in_trace</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk8"><span class="nb">intros</span> msg tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision (equivocation_in_trace msg tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk9"><span class="nb">apply</span> @Decision_iff <span class="kr">with</span>
    (List.Exists (<span class="kr">fun</span> <span class="nv">d</span> =&gt; <span class="kr">match</span> d <span class="kr">with</span> (prefix, item, _) =&gt;
      input item = Some msg /\ ~ trace_has_message (field_selector output) msg prefix
    <span class="kr">end</span>) (one_element_decompositions tr)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Exists
  (<span class="kr">Œª</span> <span class="nv">d</span> : list transition_item * transition_item *
         list transition_item,
     <span class="kr">let</span> (<span class="nv">y</span>, _) := d <span class="kr">in</span>
     <span class="kr">let</span> (<span class="nv">prefix</span>, item) := y <span class="kr">in</span>
     input item = Some msg
     ‚àß ¬¨ trace_has_message (field_selector output) msg
           prefix) (one_element_decompositions tr)
‚Üî equivocation_in_trace msg tr</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chka" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chka"><hr></label><div class="goal-conclusion">Decision
  (Exists
     (<span class="kr">Œª</span> <span class="nv">d</span> : list transition_item * transition_item *
            list transition_item,
        <span class="kr">let</span> (<span class="nv">y</span>, _) := d <span class="kr">in</span>
        <span class="kr">let</span> (<span class="nv">prefix</span>, item) := y <span class="kr">in</span>
        input item = Some msg
        ‚àß ¬¨ trace_has_message 
              (field_selector output) msg prefix)
     (one_element_decompositions tr))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkb">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Exists
  (<span class="kr">Œª</span> <span class="nv">d</span> : list transition_item * transition_item *
         list transition_item,
     <span class="kr">let</span> (<span class="nv">y</span>, _) := d <span class="kr">in</span>
     <span class="kr">let</span> (<span class="nv">prefix</span>, item) := y <span class="kr">in</span>
     input item = Some msg
     ‚àß ¬¨ trace_has_message (field_selector output) msg
           prefix) (one_element_decompositions tr)
‚Üî equivocation_in_trace msg tr</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkc"><span class="nb">rewrite</span> Exists_exists.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÉ</span> <span class="nv">x</span> : list transition_item * transition_item *
       list transition_item,
   x ‚àà one_element_decompositions tr
   ‚àß (<span class="kr">let</span> (<span class="nv">y</span>, _) := x <span class="kr">in</span>
      <span class="kr">let</span> (<span class="nv">prefix</span>, item) := y <span class="kr">in</span>
      input item = Some msg
      ‚àß ¬¨ trace_has_message (field_selector output)
            msg prefix))
‚Üî equivocation_in_trace msg tr</div></blockquote></div></div></small><span class="alectryon-wsp">  </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkd"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÉ</span> <span class="nv">x</span> : list transition_item * transition_item *
       list transition_item,
   x ‚àà one_element_decompositions tr
   ‚àß (<span class="kr">let</span> (<span class="nv">y</span>, _) := x <span class="kr">in</span>
      <span class="kr">let</span> (<span class="nv">prefix</span>, item) := y <span class="kr">in</span>
      input item = Some msg
      ‚àß ¬¨ trace_has_message (field_selector output)
            msg prefix))
‚Üí equivocation_in_trace msg tr</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chke" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chke"><hr></label><div class="goal-conclusion">equivocation_in_trace msg tr
‚Üí <span class="kr">‚àÉ</span> <span class="nv">x</span> : list transition_item * transition_item *
        list transition_item,
    x ‚àà one_element_decompositions tr
    ‚àß (<span class="kr">let</span> (<span class="nv">y</span>, _) := x <span class="kr">in</span>
       <span class="kr">let</span> (<span class="nv">prefix</span>, item) := y <span class="kr">in</span>
       input item = Some msg
       ‚àß ¬¨ trace_has_message 
             (field_selector output) msg prefix)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkf">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÉ</span> <span class="nv">x</span> : list transition_item * transition_item *
       list transition_item,
   x ‚àà one_element_decompositions tr
   ‚àß (<span class="kr">let</span> (<span class="nv">y</span>, _) := x <span class="kr">in</span>
      <span class="kr">let</span> (<span class="nv">prefix</span>, item) := y <span class="kr">in</span>
      input item = Some msg
      ‚àß ¬¨ trace_has_message (field_selector output)
            msg prefix))
‚Üí equivocation_in_trace msg tr</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk10"><span class="nb">intros</span> [((prefix, item), suffix) [Hitem Heqv]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr, prefix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>(prefix, item, suffix)
‚àà one_element_decompositions tr</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>input item = Some msg
‚àß ¬¨ trace_has_message (field_selector output)
      msg prefix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equivocation_in_trace msg tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk11"><span class="kr">exists</span> <span class="nv">prefix</span>, item, suffix.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr, prefix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>(prefix, item, suffix)
‚àà one_element_decompositions tr</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>input item = Some msg
‚àß ¬¨ trace_has_message (field_selector output)
      msg prefix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tr = prefix ++ item :: suffix
‚àß input item = Some msg
  ‚àß ¬¨ trace_has_message (field_selector output) msg
        prefix</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> elem_of_one_element_decompositions <span class="kr">in</span> Hitem.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk12">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equivocation_in_trace msg tr
‚Üí <span class="kr">‚àÉ</span> <span class="nv">x</span> : list transition_item * transition_item *
        list transition_item,
    x ‚àà one_element_decompositions tr
    ‚àß (<span class="kr">let</span> (<span class="nv">y</span>, _) := x <span class="kr">in</span>
       <span class="kr">let</span> (<span class="nv">prefix</span>, item) := y <span class="kr">in</span>
       input item = Some msg
       ‚àß ¬¨ trace_has_message (field_selector output)
             msg prefix)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk13"><span class="nb">intros</span> [prefix [item [suffix [Hitem Heqv]]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr, prefix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>tr = prefix ++ item :: suffix</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>input item = Some msg
‚àß ¬¨ trace_has_message (field_selector output)
      msg prefix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">x</span> : list transition_item * transition_item *
      list transition_item,
  x ‚àà one_element_decompositions tr
  ‚àß (<span class="kr">let</span> (<span class="nv">y</span>, _) := x <span class="kr">in</span>
     <span class="kr">let</span> (<span class="nv">prefix</span>, item) := y <span class="kr">in</span>
     input item = Some msg
     ‚àß ¬¨ trace_has_message (field_selector output) msg
           prefix)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk14"><span class="kr">exists</span> ((prefix, item), suffix).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr, prefix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>tr = prefix ++ item :: suffix</span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span>input item = Some msg
‚àß ¬¨ trace_has_message (field_selector output)
      msg prefix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(prefix, item, suffix) ‚àà one_element_decompositions tr
‚àß input item = Some msg
  ‚àß ¬¨ trace_has_message (field_selector output) msg
        prefix</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> elem_of_one_element_decompositions.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk15">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision
  (Exists
     (<span class="kr">Œª</span> <span class="nv">d</span> : list transition_item * transition_item *
            list transition_item,
        <span class="kr">let</span> (<span class="nv">y</span>, _) := d <span class="kr">in</span>
        <span class="kr">let</span> (<span class="nv">prefix</span>, item) := y <span class="kr">in</span>
        input item = Some msg
        ‚àß ¬¨ trace_has_message (field_selector output)
              msg prefix)
     (one_element_decompositions tr))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk16"><span class="nb">apply</span> Exists_dec.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">x</span> : list transition_item * transition_item *
      list transition_item,
  Decision
    (<span class="kr">let</span> (<span class="nv">y</span>, _) := x <span class="kr">in</span>
     <span class="kr">let</span> (<span class="nv">prefix</span>, item) := y <span class="kr">in</span>
     input item = Some msg
     ‚àß ¬¨ trace_has_message (field_selector output) msg
           prefix)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk17"><span class="nb">intros</span> ((prefix, item), suffix).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr, prefix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision
  (input item = Some msg
   ‚àß ¬¨ trace_has_message (field_selector output) msg
         prefix)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk18"><span class="nb">apply</span> and_dec.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr, prefix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision (input item = Some msg)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk19" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr, prefix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk19"><hr></label><div class="goal-conclusion">Decision
  (¬¨ trace_has_message 
       (field_selector output) msg prefix)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1a">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr, prefix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision (input item = Some msg)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> option_eq_dec.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1b">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr, prefix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision
  (¬¨ trace_has_message (field_selector output) msg
       prefix)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1c"><span class="nb">apply</span> not_dec.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr, prefix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision
  (trace_has_message (field_selector output) msg
     prefix)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1d"><span class="nb">apply</span> Exists_dec.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr, prefix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">x</span> : transition_item,
  Decision (field_selector output msg x)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1e"><span class="nb">intros</span> pitem.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr, prefix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>pitem</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision (field_selector output msg pitem)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> option_eq_dec.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1f" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1f"><span class="kn">Lemma</span> <span class="nf">no_equivocation_in_empty_trace</span> <span class="nv">m</span>
  : ~ equivocation_in_trace m [].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ equivocation_in_trace m []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk20"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ equivocation_in_trace m []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk21"><span class="nb">intros</span> [prefix [suffix [item [Hitem _]]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>prefix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>[] = prefix ++ suffix :: item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> prefix; <span class="nb">inversion</span> Hitem.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk22"><span class="kn">Lemma</span> <span class="nf">equivocation_in_trace_prefix</span>
  (<span class="nv">msg</span> : message)
  (<span class="nv">prefix</span> : list (transition_item vlsm))
  (<span class="nv">suffix</span> : list (transition_item vlsm))
  : equivocation_in_trace msg prefix -&gt; equivocation_in_trace msg (prefix ++ suffix).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>prefix, suffix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equivocation_in_trace msg prefix
‚Üí equivocation_in_trace msg (prefix ++ suffix)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk23"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>prefix, suffix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equivocation_in_trace msg prefix
‚Üí equivocation_in_trace msg (prefix ++ suffix)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk24"><span class="nb">intros</span> (pre &amp; item &amp; suf &amp; -&gt; &amp; Hinput &amp; Hnoutput).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>suffix, pre</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hinput</var><span class="hyp-type"><b>: </b><span>input item = Some msg</span></span></span><br><span><var>Hnoutput</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output)
    msg pre</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equivocation_in_trace msg
  ((pre ++ item :: suf) ++ suffix)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk25"><span class="kr">exists</span> <span class="nv">pre</span>, item, (suf ++ suffix).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>suffix, pre</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hinput</var><span class="hyp-type"><b>: </b><span>input item = Some msg</span></span></span><br><span><var>Hnoutput</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output)
    msg pre</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(pre ++ item :: suf) ++ suffix =
pre ++ item :: suf ++ suffix
‚àß input item = Some msg
  ‚àß ¬¨ trace_has_message (field_selector output) msg
        pre</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> app_comm_cons, &lt;- !app_assoc.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk26"><span class="kn">Lemma</span> <span class="nf">equivocation_in_trace_last_char</span>
  (<span class="nv">msg</span> : message)
  (<span class="nv">tr</span> : list (transition_item vlsm))
  (<span class="nv">item</span> : transition_item vlsm)
  : equivocation_in_trace msg (tr ++ [item]) &lt;-&gt;
    equivocation_in_trace msg tr \/
    input item = Some msg /\ ~ trace_has_message (field_selector output) msg tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equivocation_in_trace msg (tr ++ [item])
‚Üî equivocation_in_trace msg tr
  ‚à® input item = Some msg
    ‚àß ¬¨ trace_has_message (field_selector output) msg
          tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk27" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk27"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equivocation_in_trace msg (tr ++ [item])
‚Üî equivocation_in_trace msg tr
  ‚à® input item = Some msg
    ‚àß ¬¨ trace_has_message (field_selector output) msg
          tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk28" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk28"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equivocation_in_trace msg (tr ++ [item])
‚Üí equivocation_in_trace msg tr
  ‚à® input item = Some msg
    ‚àß ¬¨ trace_has_message (field_selector output) msg
          tr</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk29" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk29"><hr></label><div class="goal-conclusion">equivocation_in_trace msg tr
‚à® input item = Some msg
  ‚àß ¬¨ trace_has_message (field_selector output) msg tr
‚Üí equivocation_in_trace msg (tr ++ [item])</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equivocation_in_trace msg (tr ++ [item])
‚Üí equivocation_in_trace msg tr
  ‚à® input item = Some msg
    ‚àß ¬¨ trace_has_message (field_selector output) msg
          tr</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2b"><span class="nb">intros</span> [prefix [item&#39; [suffix [Heq_tr_item&#39; [Hinput Hnoutput]]]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>prefix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item'</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heq_tr_item'</var><span class="hyp-type"><b>: </b><span>tr ++ [item] =
prefix ++ item&#39; :: suffix</span></span></span><br><span><var>Hinput</var><span class="hyp-type"><b>: </b><span>input item&#39; = Some msg</span></span></span><br><span><var>Hnoutput</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output)
    msg prefix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equivocation_in_trace msg tr
‚à® input item = Some msg
  ‚àß ¬¨ trace_has_message (field_selector output) msg tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2c">destruct_list_last suffix suffix&#39; _item Heq_suffix.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>prefix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item'</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heq_tr_item'</var><span class="hyp-type"><b>: </b><span>tr ++ [item] = prefix ++ [item&#39;]</span></span></span><br><span><var>Hinput</var><span class="hyp-type"><b>: </b><span>input item&#39; = Some msg</span></span></span><br><span><var>Hnoutput</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output)
    msg prefix</span></span></span><br><span><var>Heq_suffix</var><span class="hyp-type"><b>: </b><span>suffix = []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equivocation_in_trace msg tr
‚à® input item = Some msg
  ‚àß ¬¨ trace_has_message (field_selector output) msg tr</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk2d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>prefix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item'</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suffix, suffix'</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>_item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heq_tr_item'</var><span class="hyp-type"><b>: </b><span>tr ++ [item] =
prefix ++ item&#39; :: suffix&#39; ++ [_item]</span></span></span><br><span><var>Hinput</var><span class="hyp-type"><b>: </b><span>input item&#39; = Some msg</span></span></span><br><span><var>Hnoutput</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output)
    msg prefix</span></span></span><br><span><var>Heq_suffix</var><span class="hyp-type"><b>: </b><span>suffix = suffix&#39; ++ [_item]</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk2d"><hr></label><div class="goal-conclusion">equivocation_in_trace msg tr
‚à® input item = Some msg
  ‚àß ¬¨ trace_has_message (field_selector output) msg tr</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2e">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>prefix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item'</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heq_tr_item'</var><span class="hyp-type"><b>: </b><span>tr ++ [item] = prefix ++ [item&#39;]</span></span></span><br><span><var>Hinput</var><span class="hyp-type"><b>: </b><span>input item&#39; = Some msg</span></span></span><br><span><var>Hnoutput</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output)
    msg prefix</span></span></span><br><span><var>Heq_suffix</var><span class="hyp-type"><b>: </b><span>suffix = []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equivocation_in_trace msg tr
‚à® input item = Some msg
  ‚àß ¬¨ trace_has_message (field_selector output) msg tr</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> app_inj_tail <span class="kr">in</span> Heq_tr_item&#39; <span class="kr">as</span> [-&gt; -&gt;]; <span class="nb">right</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2f">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>prefix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item'</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suffix, suffix'</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>_item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heq_tr_item'</var><span class="hyp-type"><b>: </b><span>tr ++ [item] =
prefix ++ item&#39; :: suffix&#39; ++ [_item]</span></span></span><br><span><var>Hinput</var><span class="hyp-type"><b>: </b><span>input item&#39; = Some msg</span></span></span><br><span><var>Hnoutput</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output)
    msg prefix</span></span></span><br><span><var>Heq_suffix</var><span class="hyp-type"><b>: </b><span>suffix = suffix&#39; ++ [_item]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equivocation_in_trace msg tr
‚à® input item = Some msg
  ‚àß ¬¨ trace_has_message (field_selector output) msg tr</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk30" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk30"><span class="nb">rewrite</span> app_comm_cons, !app_assoc <span class="kr">in</span> Heq_tr_item&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>prefix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item'</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suffix, suffix'</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>_item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Heq_tr_item'</var><span class="hyp-type"><b>: </b><span>tr ++ [item] =
(prefix ++ item&#39; :: suffix&#39;) ++ [_item]</span></span></span><br><span><var>Hinput</var><span class="hyp-type"><b>: </b><span>input item&#39; = Some msg</span></span></span><br><span><var>Hnoutput</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output)
    msg prefix</span></span></span><br><span><var>Heq_suffix</var><span class="hyp-type"><b>: </b><span>suffix = suffix&#39; ++ [_item]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equivocation_in_trace msg tr
‚à® input item = Some msg
  ‚àß ¬¨ trace_has_message (field_selector output) msg tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk31" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk31"><span class="nb">apply</span> app_inj_tail <span class="kr">in</span> Heq_tr_item&#39; <span class="kr">as</span> [-&gt; -&gt;].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>prefix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item'</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suffix, suffix'</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>_item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hinput</var><span class="hyp-type"><b>: </b><span>input item&#39; = Some msg</span></span></span><br><span><var>Hnoutput</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output)
    msg prefix</span></span></span><br><span><var>Heq_suffix</var><span class="hyp-type"><b>: </b><span>suffix = suffix&#39; ++ [_item]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equivocation_in_trace msg (prefix ++ item&#39; :: suffix&#39;)
‚à® input _item = Some msg
  ‚àß ¬¨ trace_has_message (field_selector output) msg
        (prefix ++ item&#39; :: suffix&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">left</span>; <span class="kr">exists</span> <span class="nv">prefix</span>, item&#39;, suffix&#39;.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk32">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equivocation_in_trace msg tr
‚à® input item = Some msg
  ‚àß ¬¨ trace_has_message (field_selector output) msg tr
‚Üí equivocation_in_trace msg (tr ++ [item])</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk33"><span class="nb">intros</span>
      [[prefix [item&#39; [suffix [-&gt; [Hinput Hnoutput]]]]]
      | [Hinput Hnoutput]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>prefix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item'</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hinput</var><span class="hyp-type"><b>: </b><span>input item&#39; = Some msg</span></span></span><br><span><var>Hnoutput</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output)
    msg prefix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equivocation_in_trace msg
  ((prefix ++ item&#39; :: suffix) ++ [item])</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk34" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hinput</var><span class="hyp-type"><b>: </b><span>input item = Some msg</span></span></span><br><span><var>Hnoutput</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output)
    msg tr</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk34"><hr></label><div class="goal-conclusion">equivocation_in_trace msg (tr ++ [item])</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk35" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk35">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>prefix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item'</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hinput</var><span class="hyp-type"><b>: </b><span>input item&#39; = Some msg</span></span></span><br><span><var>Hnoutput</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output)
    msg prefix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equivocation_in_trace msg
  ((prefix ++ item&#39; :: suffix) ++ [item])</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk36"><span class="kr">exists</span> <span class="nv">prefix</span>, item&#39;, (suffix ++ [item]).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>prefix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item'</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>suffix</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hinput</var><span class="hyp-type"><b>: </b><span>input item&#39; = Some msg</span></span></span><br><span><var>Hnoutput</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output)
    msg prefix</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(prefix ++ item&#39; :: suffix) ++ [item] =
prefix ++ item&#39; :: suffix ++ [item]
‚àß input item&#39; = Some msg
  ‚àß ¬¨ trace_has_message (field_selector output) msg
        prefix</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> &lt;- app_assoc.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk37">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hinput</var><span class="hyp-type"><b>: </b><span>input item = Some msg</span></span></span><br><span><var>Hnoutput</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output)
    msg tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equivocation_in_trace msg (tr ++ [item])</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="kr">exists</span> <span class="nv">tr</span>, item, [].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  We intend to give define several message oracles: <span class="inlinecode"><span class="id" title="var">has_been_sent</span></span>,
  <span class="inlinecode"><span class="id" title="var">has_not_been_sent</span></span>, <span class="inlinecode"><span class="id" title="var">has_been_received</span></span> and <span class="inlinecode"><span class="id" title="var">has_not_been_received</span></span>.
  To avoid repetition, we give build some generic definitions first.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --></pre><div class="doc">
General signature of a message oracle 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">state_message_oracle</span>
  := state vlsm -&gt; message -&gt; <span class="kt">Prop</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">negate_oracle</span> (<span class="nv">o</span> : state_message_oracle) : state_message_oracle :=
  <span class="kr">fun</span> <span class="nv">s</span> <span class="nv">m</span> =&gt; ~ o s m.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">specialized_selected_message_exists_in_all_traces</span>
  (<span class="nv">X</span> : VLSM message)
  (<span class="nv">message_selector</span> : message -&gt; transition_item -&gt; <span class="kt">Prop</span>)
  (<span class="nv">s</span> : state X)
  (<span class="nv">m</span> : message)
  : <span class="kt">Prop</span>
  :=
  <span class="kr">forall</span>
  (<span class="nv">start</span> : state X)
  (<span class="nv">tr</span> : list transition_item)
  (<span class="nv">Htr</span> : finite_valid_trace_init_to X start s tr),
  trace_has_message message_selector m tr.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">selected_message_exists_in_all_preloaded_traces</span>
  := specialized_selected_message_exists_in_all_traces pre_vlsm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">specialized_selected_message_exists_in_some_traces</span>
  (<span class="nv">X</span> : VLSM message)
  (<span class="nv">message_selector</span> : message -&gt; transition_item -&gt; <span class="kt">Prop</span>)
  (<span class="nv">s</span> : state X)
  (<span class="nv">m</span> : message)
  : <span class="kt">Prop</span>
  :=
  <span class="kr">exists</span>
  (<span class="nv">start</span> : state X)
  (<span class="nv">tr</span> : list transition_item)
  (<span class="nv">Htr</span> : finite_valid_trace_init_to X start s tr),
  trace_has_message message_selector m tr.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">selected_message_exists_in_some_preloaded_traces</span> : <span class="kr">forall</span>
  (<span class="nv">message_selector</span> : message -&gt; transition_item -&gt; <span class="kt">Prop</span>)
  (<span class="nv">s</span> : state pre_vlsm)
  (<span class="nv">m</span> : message),
    <span class="kt">Prop</span>
  := specialized_selected_message_exists_in_some_traces pre_vlsm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">specialized_selected_message_exists_in_no_trace</span>
  (<span class="nv">X</span> : VLSM message)
  (<span class="nv">message_selector</span> : message -&gt; transition_item -&gt; <span class="kt">Prop</span>)
  (<span class="nv">s</span> : state X)
  (<span class="nv">m</span> : message)
  : <span class="kt">Prop</span>
  :=
  <span class="kr">forall</span>
  (<span class="nv">start</span> : state X)
  (<span class="nv">tr</span> : list transition_item)
  (<span class="nv">Htr</span> : finite_valid_trace_init_to X start s tr),
  ~ trace_has_message message_selector m tr.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">selected_message_exists_in_no_preloaded_trace</span> :=
  specialized_selected_message_exists_in_no_trace pre_vlsm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk38" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk38"><span class="kn">Lemma</span> <span class="nf">selected_message_exists_not_some_iff_no</span>
  (<span class="nv">X</span> : VLSM message)
  (<span class="nv">message_selector</span> : message -&gt; transition_item -&gt; <span class="kt">Prop</span>)
  (<span class="nv">s</span> : state X)
  (<span class="nv">m</span> : message)
  : ~ specialized_selected_message_exists_in_some_traces X message_selector s m
    &lt;-&gt; specialized_selected_message_exists_in_no_trace X message_selector s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>message_selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ specialized_selected_message_exists_in_some_traces X
    message_selector s m
‚Üî specialized_selected_message_exists_in_no_trace X
    message_selector s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk39" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk39"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>message_selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ specialized_selected_message_exists_in_some_traces X
    message_selector s m
‚Üî specialized_selected_message_exists_in_no_trace X
    message_selector s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3a"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>message_selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ specialized_selected_message_exists_in_some_traces X
    message_selector s m
‚Üí specialized_selected_message_exists_in_no_trace X
    message_selector s m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk3b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>message_selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk3b"><hr></label><div class="goal-conclusion">specialized_selected_message_exists_in_no_trace X
  message_selector s m
‚Üí ¬¨ specialized_selected_message_exists_in_some_traces
      X message_selector s m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>message_selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ specialized_selected_message_exists_in_some_traces X
    message_selector s m
‚Üí specialized_selected_message_exists_in_no_trace X
    message_selector s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> Hnot <span class="kr">is</span> tr Htr Hsend; <span class="nb">apply</span> Hnot; <span class="kr">exists</span> <span class="nv">is</span>, tr, Htr.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>message_selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">specialized_selected_message_exists_in_no_trace X
  message_selector s m
‚Üí ¬¨ specialized_selected_message_exists_in_some_traces
      X message_selector s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> Hno (<span class="kr">is</span> &amp; tr &amp; Htr &amp; Hsend); <span class="nb">eapply</span> Hno.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3e"><span class="kn">Lemma</span> <span class="nf">selected_message_exists_preloaded_not_some_iff_no</span>
  (<span class="nv">message_selector</span> : message -&gt; transition_item -&gt; <span class="kt">Prop</span>)
  (<span class="nv">s</span> : state pre_vlsm)
  (<span class="nv">m</span> : message)
  : ~ selected_message_exists_in_some_preloaded_traces message_selector s m
    &lt;-&gt; selected_message_exists_in_no_preloaded_trace message_selector s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>message_selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ selected_message_exists_in_some_preloaded_traces
    message_selector s m
‚Üî selected_message_exists_in_no_preloaded_trace
    message_selector s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3f" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>message_selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ selected_message_exists_in_some_preloaded_traces
    message_selector s m
‚Üî selected_message_exists_in_no_preloaded_trace
    message_selector s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> selected_message_exists_not_some_iff_no.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
Sufficient condition for <span class="inlinecode"><span class="id" title="var">specialized_selected_message_exists_in_some_traces</span></span>. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk40" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk40"><span class="kn">Lemma</span> <span class="nf">specialized_selected_message_exists_in_some_traces_from</span>
  (<span class="nv">X</span> : VLSM message)
  (<span class="nv">message_selector</span> : message -&gt; transition_item -&gt; <span class="kt">Prop</span>)
  (<span class="nv">s</span> : state X)
  (<span class="nv">m</span> : message)
  (<span class="nv">start</span> : state X)
  (<span class="nv">tr</span> : list transition_item)
  (<span class="nv">Htr</span> : finite_valid_trace_from_to X start s tr)
  (<span class="nv">Hsome</span> : trace_has_message message_selector m tr)
  : specialized_selected_message_exists_in_some_traces X message_selector s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>message_selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>start</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X start s tr</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>trace_has_message message_selector m tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">specialized_selected_message_exists_in_some_traces X
  message_selector s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk41" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk41"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>message_selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>start</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X start s tr</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>trace_has_message message_selector m tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">specialized_selected_message_exists_in_some_traces X
  message_selector s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk42" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk42"><span class="nb">assert</span> (valid_state_prop X start) <span class="kr">as</span> Hstart
    <span class="bp">by</span> (<span class="nb">apply</span> valid_trace_first_pstate <span class="kr">in</span> Htr; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>message_selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>start</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X start s tr</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>trace_has_message message_selector m tr</span></span></span><br><span><var>Hstart</var><span class="hyp-type"><b>: </b><span>valid_state_prop X start</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">specialized_selected_message_exists_in_some_traces X
  message_selector s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk43" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk43"><span class="nb">apply</span> valid_state_has_trace <span class="kr">in</span> Hstart.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>message_selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>start</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X start s tr</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>trace_has_message message_selector m tr</span></span></span><br><span><var>Hstart</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> (<span class="nv">is</span> : state X) (<span class="nv">tr</span> : list transition_item),
  finite_valid_trace_init_to X <span class="kr">is</span> start tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">specialized_selected_message_exists_in_some_traces X
  message_selector s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk44" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk44"><span class="nb">destruct</span> Hstart <span class="kr">as</span> [<span class="kr">is</span> [tr&#39; Htr&#39;]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>message_selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>start</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X start s tr</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>trace_has_message message_selector m tr</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr'</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr'</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X <span class="kr">is</span> start tr&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">specialized_selected_message_exists_in_some_traces X
  message_selector s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk45" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk45"><span class="nb">assert</span> (finite_valid_trace_init_to X <span class="kr">is</span> s (tr&#39;++tr)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>message_selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>start</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X start s tr</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>trace_has_message message_selector m tr</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr'</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr'</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X <span class="kr">is</span> start tr&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to X <span class="kr">is</span> s (tr&#39; ++ tr)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk46" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>message_selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>start</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X start s tr</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>trace_has_message message_selector m tr</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr'</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr'</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X <span class="kr">is</span> start tr&#39;</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X <span class="kr">is</span> s (tr&#39; ++ tr)</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk46"><hr></label><div class="goal-conclusion">specialized_selected_message_exists_in_some_traces X
  message_selector s m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk47" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk47">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>message_selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>start</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X start s tr</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>trace_has_message message_selector m tr</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr'</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr'</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X <span class="kr">is</span> start tr&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to X <span class="kr">is</span> s (tr&#39; ++ tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk48" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk48"><span class="nb">destruct</span> Htr&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>message_selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>start</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X start s tr</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>trace_has_message message_selector m tr</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr'</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X <span class="kr">is</span> start tr&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to X <span class="kr">is</span> s (tr&#39; ++ tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">split</span>; [<span class="nb">apply</span> finite_valid_trace_from_to_app <span class="kr">with</span> start |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk49" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk49">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>message_selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>start</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X start s tr</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>trace_has_message message_selector m tr</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr'</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr'</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X <span class="kr">is</span> start tr&#39;</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X <span class="kr">is</span> s (tr&#39; ++ tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">specialized_selected_message_exists_in_some_traces X
  message_selector s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk4a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk4a"><span class="kr">exists</span> <span class="nv">_</span>, _, H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>message_selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>start</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X start s tr</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>trace_has_message message_selector m tr</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr'</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr'</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X <span class="kr">is</span> start tr&#39;</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X <span class="kr">is</span> s (tr&#39; ++ tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message message_selector m (tr&#39; ++ tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> Exists_app; <span class="nb">right</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">selected_messages_consistency_prop</span>
  (<span class="nv">message_selector</span> : message -&gt; transition_item -&gt; <span class="kt">Prop</span>)
  (<span class="nv">s</span> : state vlsm)
  (<span class="nv">m</span> : message)
  : <span class="kt">Prop</span>
  :=
  selected_message_exists_in_some_preloaded_traces message_selector s m
  &lt;-&gt; selected_message_exists_in_all_preloaded_traces message_selector s m.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk4b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk4b"><span class="kn">Lemma</span> <span class="nf">selected_message_exists_in_all_traces_initial_state</span>
  (<span class="nv">s</span> : state vlsm)
  (<span class="nv">Hs</span> : initial_state_prop vlsm s)
  (<span class="nv">message_selector</span> : message -&gt; transition_item -&gt; <span class="kt">Prop</span>)
  (<span class="nv">m</span> : message)
  : ~ selected_message_exists_in_all_preloaded_traces message_selector s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>message_selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ selected_message_exists_in_all_preloaded_traces
    message_selector s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk4c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk4c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>message_selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ selected_message_exists_in_all_preloaded_traces
    message_selector s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk4d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk4d"><span class="nb">intro</span> Hselected.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>message_selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hselected</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_all_preloaded_traces
  message_selector s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk4e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk4e"><span class="nb">assert</span> (Hps : constrained_state_prop vlsm s) <span class="bp">by</span> (<span class="nb">apply</span> initial_state_is_valid; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>message_selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hselected</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_all_preloaded_traces
  message_selector s m</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk4f" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk4f"><span class="nb">assert</span> (Htr : finite_constrained_trace_init_to vlsm s s []) <span class="bp">by</span> (<span class="nb">split</span>; [<span class="nb">constructor</span> |]; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>message_selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hselected</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_all_preloaded_traces
  message_selector s m</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to vlsm s s []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk50" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk50"><span class="nb">specialize</span> (Hselected s [] Htr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>message_selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hselected</var><span class="hyp-type"><b>: </b><span>trace_has_message message_selector m []</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to vlsm s s []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk51" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk51"><span class="nb">unfold</span> trace_has_message <span class="kr">in</span> Hselected.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>message_selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hselected</var><span class="hyp-type"><b>: </b><span>Exists (message_selector m) []</span></span></span><br><span><var>Hps</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to vlsm s s []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> Exists_nil <span class="kr">in</span> Hselected.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  The oracle should check if all valid traces leading to the state contain the given message.
  The <span class="inlinecode"><span class="id" title="var">message_selector</span></span> argument checks whether a single transition contains the
  message, and can be used to check for received messages or sent messages.

<div class="paragraph"> </div>

  Notably, the traces we are considering are any traces valid in the preloaded
  version of the target VLSM. This is because we want VLSMs to have oracles which
  are valid irrespective of the composition they take part in. As we know,
  the behaviors of the projection of a VLSM from a composition are all included
  in the behaviors of the preloaded version of the VLSM.

<div class="paragraph"> </div>

  It is impossible to define a correct oracle for a <span class="inlinecode"><span class="id" title="var">message_selector</span></span>
  if there is some valid state that has multiple histories, and some message
  that is in some of those histories but not in others (according to the selector).

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">all_traces_have_message_prop</span>
  (<span class="nv">message_selector</span> : message -&gt; transition_item -&gt; <span class="kt">Prop</span>)
  (<span class="nv">oracle</span> : state_message_oracle)
  (<span class="nv">s</span> : state vlsm)
  (<span class="nv">m</span> : message)
  : <span class="kt">Prop</span>
  :=
  oracle s m &lt;-&gt; selected_message_exists_in_all_preloaded_traces message_selector s m.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">no_traces_have_message_prop</span>
  (<span class="nv">message_selector</span> : message -&gt; transition_item -&gt; <span class="kt">Prop</span>)
  (<span class="nv">oracle</span> : state_message_oracle)
  (<span class="nv">s</span> : state vlsm)
  (<span class="nv">m</span> : message)
  : <span class="kt">Prop</span>
  :=
  oracle s m &lt;-&gt; selected_message_exists_in_no_preloaded_trace message_selector s m.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Record</span> <span class="nf">oracle_tracewise_props</span>
  (<span class="nv">message_selector</span> : message -&gt; transition_item -&gt; <span class="kt">Prop</span>)
  (<span class="nv">oracle</span> : state_message_oracle) : <span class="kt">Prop</span> :=
{
  proper_oracle_holds :
    <span class="kr">forall</span> (<span class="nv">s</span> : state pre_vlsm) (<span class="nv">Hs</span> : constrained_state_prop vlsm s) (<span class="nv">m</span> : message),
      all_traces_have_message_prop message_selector oracle s m;
  proper_not_oracle_holds :
    <span class="kr">forall</span> (<span class="nv">s</span> : state pre_vlsm) (<span class="nv">Hs</span> : constrained_state_prop vlsm s) (<span class="nv">m</span> : message),
      no_traces_have_message_prop message_selector (negate_oracle oracle) s m;
}.</span></span></pre><div class="doc">
<a id="lab4"></a><h3 class="section">Stepwise consistency properties for <span class="inlinecode"><span class="id" title="var">state_message_oracle</span></span></h3>
<div class="paragraph"> </div>

  The above definitions like <span class="inlinecode"><span class="id" title="var">all_traces_have_message_prop</span></span>
  connect a <span class="inlinecode"><span class="id" title="var">state_message_oracle</span></span> to a message selector predicate on
  <span class="inlinecode"><span class="id" title="var">transition_item</span></span> by requiring the oracle to hold (or not hold)
  for a state and message iff all traces (resp. no trace) reaching the
  state have a transition satisfying the message selector with the given message.

<div class="paragraph"> </div>

  We will prove that this is equivalent to two more local properties:
<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="var">oracle_no_inits</span></span> is that the oracle cannot hold for any message in any initial state.

</li>
<li> <span class="inlinecode"><span class="id" title="var">oracle_step_update</span></span> is that the oracle is coherent around a single
    <span class="inlinecode"><span class="id" title="var">input_valid_transition</span></span>:
<ul class="doclist">
<li> If the oracle holds for a message in the starting state, it must
      also hold for that message in the destination state.

</li>
<li> If the <span class="inlinecode"><span class="id" title="var">message_selector</span></span> finds a message in the transition, the
      oracle must hold for that message in the destination state.

</li>
<li> If the oracle holds for a message in the destination, at least
      one of the above cases hold.

</li>
</ul>
</li>
</ul>
<div class="paragraph"> </div>

  These conditions are defined in the record <span class="inlinecode"><span class="id" title="var">oracle_stepwise_props</span></span>.
  We prove these conditions hold iff <span class="inlinecode"><span class="id" title="var">oracle_tracewise_props</span></span> holds.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Record</span> <span class="nf">oracle_stepwise_props</span>
  (<span class="nv">message_selector</span> : message -&gt; transition_item -&gt; <span class="kt">Prop</span>)
  (<span class="nv">oracle</span> : state_message_oracle)
  : <span class="kt">Prop</span> :=
{
  oracle_no_inits :
    <span class="kr">forall</span> (<span class="nv">s</span> : state vlsm),
      initial_state_prop vlsm s -&gt;
      <span class="kr">forall</span> (<span class="nv">m</span> : message), ~ oracle s m;
  oracle_step_update :
    <span class="kr">forall</span> (<span class="nv">l</span> : label _) (<span class="nv">s</span> : state _) (<span class="nv">im</span> : option message) (<span class="nv">s&#39;</span> : state _) (<span class="nv">om</span> : option message),
      input_constrained_transition vlsm l (s, im) (s&#39;, om) -&gt;
      <span class="kr">forall</span> (<span class="nv">msg</span> : message),
      oracle s&#39; msg
        &lt;-&gt;
      message_selector msg
        {| l := l; input := im; destination := s&#39;; output := om |} \/ oracle s msg;
}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk52" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk52"><span class="kn">Lemma</span> <span class="nf">oracle_partial_trace_update</span>
  [selector : message -&gt; transition_item -&gt; <span class="kt">Prop</span>]
  [oracle : state_message_oracle]
  (Horacle : oracle_stepwise_props selector oracle)
  s0 s tr
  (Htr : finite_constrained_trace_from_to vlsm s0 s tr) :
    <span class="kr">forall</span> (<span class="nv">m</span> : message),
      oracle s m &lt;-&gt; (trace_has_message selector m tr \/ oracle s0 m).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s0, s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_from_to vlsm s0 s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  oracle s m
  ‚Üî trace_has_message selector m tr ‚à® oracle s0 m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk53" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk53"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s0, s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_from_to vlsm s0 s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  oracle s m
  ‚Üî trace_has_message selector m tr ‚à® oracle s0 m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk54" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk54"><span class="nb">induction</span> Htr; <span class="nb">intros</span> m; <span class="nb">unfold</span> trace_has_message.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm vlsm) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle s m ‚Üî Exists (selector m) [] ‚à® oracle s m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk55" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s, f</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm vlsm) s f tl</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm vlsm) l
  (s&#39;, iom) (s, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  oracle f m
  ‚Üî trace_has_message selector m tl
    ‚à® oracle s m</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk55"><hr></label><div class="goal-conclusion">oracle f m
‚Üî Exists (selector m)
    ({|
       l := l;
       input := iom;
       destination := s;
       output := oom
     |} :: tl) ‚à® oracle s&#39; m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk56" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk56">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm vlsm) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle s m ‚Üî Exists (selector m) [] ‚à® oracle s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk57" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk57"><span class="nb">rewrite</span> Exists_nil.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm vlsm) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle s m ‚Üî <span class="kt">False</span> ‚à® oracle s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk58" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk58">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s, f</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm vlsm) s f tl</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm vlsm) l
  (s&#39;, iom) (s, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  oracle f m
  ‚Üî trace_has_message selector m tl
    ‚à® oracle s m</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle f m
‚Üî Exists (selector m)
    ({|
       l := l;
       input := iom;
       destination := s;
       output := oom
     |} :: tl) ‚à® oracle s&#39; m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk59" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk59"><span class="nb">rewrite</span> Exists_cons, IHHtr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s, f</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm vlsm) s f tl</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm vlsm) l
  (s&#39;, iom) (s, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  oracle f m
  ‚Üî trace_has_message selector m tl
    ‚à® oracle s m</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message selector m tl ‚à® oracle s m
‚Üî (selector m
     {|
       l := l;
       input := iom;
       destination := s;
       output := oom
     |} ‚à® Exists (selector m) tl) ‚à® oracle s&#39; m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk5a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk5a"><span class="nb">apply</span> (Horacle.(oracle_step_update _ _)) <span class="kr">with</span> (msg := m) <span class="kr">in</span> Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s, f</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm vlsm) s f tl</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>oracle s m
‚Üî selector m
    {|
      l := l;
      input := iom;
      destination := s;
      output := oom
    |} ‚à® oracle s&#39; m</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  oracle f m
  ‚Üî trace_has_message selector m tl
    ‚à® oracle s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message selector m tl ‚à® oracle s m
‚Üî (selector m
     {|
       l := l;
       input := iom;
       destination := s;
       output := oom
     |} ‚à® Exists (selector m) tl) ‚à® oracle s&#39; m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="c">(*</span>
<span class="c">  It would seem more flexible to take [m] after the other parameters,</span>
<span class="c">  but [Htr] is placed last so that &lt;&lt;apply in&gt;&gt; an existing</span>
<span class="c">  [finite_valid_trace_init_to] hypothesis works.</span>
<span class="c">*)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk5b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk5b"><span class="kn">Lemma</span> <span class="nf">oracle_initial_trace_update</span>
  [selector]
  [oracle : state_message_oracle]
  (Horacle : oracle_stepwise_props selector oracle)
  s m
  [s0 tr]
  (Htr : finite_constrained_trace_init_to vlsm s0 s tr) :
    oracle s m &lt;-&gt; trace_has_message selector m tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to vlsm s0 s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle s m ‚Üî trace_has_message selector m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk5c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk5c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to vlsm s0 s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle s m ‚Üî trace_has_message selector m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk5d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk5d"><span class="nb">rewrite</span> (oracle_partial_trace_update Horacle) <span class="bp">by</span> <span class="nb">apply</span> Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to vlsm s0 s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message selector m tr ‚à® oracle s0 m
‚Üî trace_has_message selector m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk5e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk5e"><span class="nb">assert</span> (~ oracle s0 m) <span class="bp">by</span> (<span class="nb">eapply</span> oracle_no_inits, Htr; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to vlsm s0 s tr</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>¬¨ oracle s0 m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message selector m tr ‚à® oracle s0 m
‚Üî trace_has_message selector m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="c">(* TODO(wkolowski): make notation uniform accross the file. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk5f" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk5f"><span class="kn">Lemma</span> <span class="nf">oracle_stepwise_props_change_selector</span>
  [selector : message -&gt; transition_item -&gt; <span class="kt">Prop</span>]
  [oracle : state_message_oracle]
  (Horacle : oracle_stepwise_props selector oracle)
  (selector&#39; : message -&gt; transition_item -&gt; <span class="kt">Prop</span>)
  (Heqv :
    <span class="kr">forall</span> <span class="nv">s</span> <span class="nv">item</span>,
      input_constrained_transition_item vlsm s item -&gt;
      <span class="kr">forall</span> <span class="nv">m</span>, selector m item &lt;-&gt; selector&#39; m item)
  : oracle_stepwise_props selector&#39; oracle.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>selector'</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state
         (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">item</span> : transition_item),
  input_constrained_transition_item vlsm s item
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      selector m item ‚Üî selector&#39; m item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle_stepwise_props selector&#39; oracle</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk60" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk60"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>selector'</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state
         (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">item</span> : transition_item),
  input_constrained_transition_item vlsm s item
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      selector m item ‚Üî selector&#39; m item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle_stepwise_props selector&#39; oracle</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk61" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk61"><span class="nb">destruct</span> Horacle <span class="kr">as</span> [Hinits Hupdate].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Hinits</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state vlsm,
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message, ¬¨ oracle s m</span></span></span><br><span><var>Hupdate</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label
         (preloaded_with_all_messages_vlsm
            vlsm)) (<span class="nv">s</span> : 
                    state
                      (preloaded_with_all_messages_vlsm
                      vlsm)) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             vlsm)) (<span class="nv">om</span> : option message),
  input_constrained_transition vlsm l
    (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      oracle s&#39; msg
      ‚Üî selector msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |} ‚à® oracle s msg</span></span></span><br><span><var>selector'</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state
         (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">item</span> : transition_item),
  input_constrained_transition_item vlsm s item
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      selector m item ‚Üî selector&#39; m item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle_stepwise_props selector&#39; oracle</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk62" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk62"><span class="nb">constructor</span>; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Hinits</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state vlsm,
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message, ¬¨ oracle s m</span></span></span><br><span><var>Hupdate</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label
         (preloaded_with_all_messages_vlsm
            vlsm)) (<span class="nv">s</span> : 
                    state
                      (preloaded_with_all_messages_vlsm
                      vlsm)) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             vlsm)) (<span class="nv">om</span> : option message),
  input_constrained_transition vlsm l
    (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      oracle s&#39; msg
      ‚Üî selector msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |} ‚à® oracle s msg</span></span></span><br><span><var>selector'</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Heqv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state
         (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">item</span> : transition_item),
  input_constrained_transition_item vlsm s item
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      selector m item ‚Üî selector&#39; m item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">im</span> : option message) (<span class="nv">s&#39;</span> : state
                                (preloaded_with_all_messages_vlsm
                                   vlsm)) (<span class="nv">om</span> : option
                                                 message),
  input_constrained_transition vlsm l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      oracle s&#39; msg
      ‚Üî selector&#39; msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |} ‚à® oracle s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span>; <span class="nb">rewrite</span> Hupdate, Heqv.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk63" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk63"><span class="kn">Lemma</span> <span class="nf">oracle_trace_props_from_stepwise</span>
  [selector : message -&gt; transition_item -&gt; <span class="kt">Prop</span>]
  [oracle : state_message_oracle]
  (Horacle : oracle_stepwise_props selector oracle) :
  oracle_tracewise_props selector oracle.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle_tracewise_props selector oracle</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk64" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk64"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle_tracewise_props selector oracle</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk65" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk65"><span class="nb">constructor</span>; <span class="nb">intros</span> s Hs m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">all_traces_have_message_prop selector oracle s m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk66" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk66"><hr></label><div class="goal-conclusion">no_traces_have_message_prop selector
  (negate_oracle oracle) s m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk67" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk67">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">all_traces_have_message_prop selector oracle s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk68" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk68"><span class="nb">red</span>; <span class="nb">unfold</span> selected_message_exists_in_all_preloaded_traces,
      specialized_selected_message_exists_in_all_traces.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle s m
‚Üî (<span class="kr">‚àÄ</span> (<span class="nv">start</span> : state pre_vlsm) (<span class="nv">tr</span> : list
                                      transition_item),
     finite_valid_trace_init_to pre_vlsm start s tr
     ‚Üí trace_has_message selector m tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk69" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk69"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle s m
‚Üí <span class="kr">‚àÄ</span> (<span class="nv">start</span> : state pre_vlsm) (<span class="nv">tr</span> : list
                                     transition_item),
    finite_valid_trace_init_to pre_vlsm start s tr
    ‚Üí trace_has_message selector m tr</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk6a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk6a"><hr></label><div class="goal-conclusion">(<span class="kr">‚àÄ</span> (<span class="nv">start</span> : state pre_vlsm) 
   (<span class="nv">tr</span> : list transition_item),
   finite_valid_trace_init_to pre_vlsm start s tr
   ‚Üí trace_has_message selector m tr) ‚Üí 
oracle s m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk6b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk6b">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle s m
‚Üí <span class="kr">‚àÄ</span> (<span class="nv">start</span> : state pre_vlsm) (<span class="nv">tr</span> : list
                                     transition_item),
    finite_valid_trace_init_to pre_vlsm start s tr
    ‚Üí trace_has_message selector m tr</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk6c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk6c"><span class="nb">intros</span> Hholds s0 tr Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hholds</var><span class="hyp-type"><b>: </b><span>oracle s m</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to pre_vlsm s0 s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message selector m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> (oracle_initial_trace_update Horacle).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk6d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk6d">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÄ</span> (<span class="nv">start</span> : state pre_vlsm) (<span class="nv">tr</span> : list transition_item),
   finite_valid_trace_init_to pre_vlsm start s tr
   ‚Üí trace_has_message selector m tr) ‚Üí oracle s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk6e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk6e"><span class="nb">apply</span> valid_state_has_trace <span class="kr">in</span> Hs <span class="kr">as</span> (start &amp; tr &amp; Htr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>start</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm vlsm) start
  s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÄ</span> (<span class="nv">start</span> : state pre_vlsm) (<span class="nv">tr</span> : list transition_item),
   finite_valid_trace_init_to pre_vlsm start s tr
   ‚Üí trace_has_message selector m tr) ‚Üí oracle s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk6f" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk6f"><span class="nb">intro</span> H; <span class="nb">specialize</span> (H start tr Htr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>start</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm vlsm) start
  s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>trace_has_message selector m tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> oracle_initial_trace_update.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk70" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk70">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">no_traces_have_message_prop selector
  (negate_oracle oracle) s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk71" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk71"><span class="nb">red</span>; <span class="nb">unfold</span> negate_oracle, selected_message_exists_in_no_preloaded_trace,
      specialized_selected_message_exists_in_no_trace.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ oracle s m
‚Üî (<span class="kr">‚àÄ</span> (<span class="nv">start</span> : state pre_vlsm) (<span class="nv">tr</span> : list
                                      transition_item),
     finite_valid_trace_init_to pre_vlsm start s tr
     ‚Üí ¬¨ trace_has_message selector m tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk72" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk72"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ oracle s m
‚Üí <span class="kr">‚àÄ</span> (<span class="nv">start</span> : state pre_vlsm) (<span class="nv">tr</span> : list
                                     transition_item),
    finite_valid_trace_init_to pre_vlsm start s tr
    ‚Üí ¬¨ trace_has_message selector m tr</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk73" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk73"><hr></label><div class="goal-conclusion">(<span class="kr">‚àÄ</span> (<span class="nv">start</span> : state pre_vlsm) 
   (<span class="nv">tr</span> : list transition_item),
   finite_valid_trace_init_to pre_vlsm start s tr
   ‚Üí ¬¨ trace_has_message selector m tr) ‚Üí ¬¨ 
oracle s m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk74" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk74">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ oracle s m
‚Üí <span class="kr">‚àÄ</span> (<span class="nv">start</span> : state pre_vlsm) (<span class="nv">tr</span> : list
                                     transition_item),
    finite_valid_trace_init_to pre_vlsm start s tr
    ‚Üí ¬¨ trace_has_message selector m tr</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk75" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk75"><span class="nb">intros</span> Hclaim start tr Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hclaim</var><span class="hyp-type"><b>: </b><span>¬¨ oracle s m</span></span></span><br><span><var>start</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to pre_vlsm start s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ trace_has_message selector m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk76" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk76"><span class="bp">contradict</span> Hclaim.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>start</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to pre_vlsm start s tr</span></span></span><br><span><var>Hclaim</var><span class="hyp-type"><b>: </b><span>trace_has_message selector m tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> oracle_initial_trace_update.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk77" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk77">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÄ</span> (<span class="nv">start</span> : state pre_vlsm) (<span class="nv">tr</span> : list transition_item),
   finite_valid_trace_init_to pre_vlsm start s tr
   ‚Üí ¬¨ trace_has_message selector m tr) ‚Üí ¬¨ oracle s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk78" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk78"><span class="nb">apply</span> valid_state_has_trace <span class="kr">in</span> Hs <span class="kr">as</span> (start &amp; tr &amp; Htr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>start</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm vlsm) start
  s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÄ</span> (<span class="nv">start</span> : state pre_vlsm) (<span class="nv">tr</span> : list transition_item),
   finite_valid_trace_init_to pre_vlsm start s tr
   ‚Üí ¬¨ trace_has_message selector m tr) ‚Üí ¬¨ oracle s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk79" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk79"><span class="nb">intro</span> H; <span class="nb">specialize</span> (H start tr Htr); <span class="bp">contradict</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>start</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm vlsm) start
  s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>oracle s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message selector m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> (oracle_initial_trace_update Horacle).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  The most basic <span class="inlinecode"><span class="id" title="var">state_message_oracle</span></span>s just check whether the message is
<ul class="doclist">
<li> *sent* - is the output of the transition

</li>
<li> *received* - is the output of the transition

</li>
<li> *observed* - is either sent or received in the transition.

</li>
</ul>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">has_been_sent_prop</span> : state_message_oracle -&gt; state vlsm -&gt; message -&gt; <span class="kt">Prop</span> :=
  all_traces_have_message_prop (field_selector output).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">has_not_been_sent_prop</span> : state_message_oracle -&gt; state vlsm -&gt; message -&gt; <span class="kt">Prop</span> :=
  no_traces_have_message_prop (field_selector output).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">has_been_received_prop</span> : state_message_oracle -&gt; state vlsm -&gt; message -&gt; <span class="kt">Prop</span> :=
  all_traces_have_message_prop (field_selector input).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">has_not_been_received_prop</span>
  : state_message_oracle -&gt; state vlsm -&gt; message -&gt; <span class="kt">Prop</span> :=
  no_traces_have_message_prop (field_selector input).</span></span></pre><div class="doc">
  Per the vocabulary of the official VLSM document, we say that VLSMs endowed
  with a <span class="inlinecode"><span class="id" title="var">state_message_oracle</span></span> for sent messages have the <span class="inlinecode"><span class="id" title="var">has_been_sent</span></span> capability.
  Capabilities for receiving messages are treated analogously, so we omit mentioning
  them explicitly.

<div class="paragraph"> </div>

  Notably, we also define the <span class="inlinecode"><span class="id" title="var">has_not_been_sent</span></span> oracle, which decides if a message
  has definitely not been sent, on any of the traces producing a current state.

<div class="paragraph"> </div>

  Furthermore, we require a <span class="inlinecode"><span class="id" title="var">sent_excluded_middle</span></span> property, which stipulates
  that any argument to the oracle should return true in exactly one of
  <span class="inlinecode"><span class="id" title="var">has_been_sent</span></span> and <span class="inlinecode"><span class="id" title="var">has_not_been_sent</span></span>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">has_been_sent_stepwise_prop</span>
    (<span class="nv">has_been_sent_pred</span> : state_message_oracle) : <span class="kt">Prop</span> :=
  oracle_stepwise_props (field_selector output) has_been_sent_pred.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk7a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk7a"><span class="kn">Class</span> <span class="nf">HasBeenSentCapability</span> : <span class="kt">Type</span> :=
{
  has_been_sent : state_message_oracle;
  has_been_sent_dec :&gt; RelDecision has_been_sent;
  has_been_sent_stepwise_props : has_been_sent_stepwise_prop has_been_sent;
}.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">A coercion will be introduced instead of an instance
<span class="kr">in</span> future versions when <span class="nb">using</span> &#39;:&gt;&#39; <span class="kr">in</span> &#39;Class&#39;
declarations. Replace &#39;:&gt;&#39; <span class="kr">with</span> &#39;::&#39; (or use
&#39;#[<span class="kn">global</span>] <span class="kn">Existing Instance</span> <span class="nf">field</span>.&#39; <span class="kr">for</span> compatibility
<span class="kr">with</span> Coq &lt; <span class="mi">8</span>.<span class="mi">18</span>). Beware that the default locality <span class="kr">for</span>
&#39;::&#39; <span class="kr">is</span> #[export], <span class="kr">as</span> opposed to #[<span class="kn">global</span>] <span class="kr">for</span> &#39;:&gt;&#39;
currently. <span class="kn">Add</span> an explicit #[<span class="kn">global</span>] attribute to the
<span class="bp">field</span> <span class="kr">if</span> you need to keep the current behavior. For
example: <span class="s2">&quot;Class foo := { #[global] field :: bar }.&quot;</span>
[future-coercion-class-<span class="bp">field</span>,deprecated-since-<span class="mi">8</span>.<span class="mi">17</span>,deprecated,default]</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">has_not_been_sent</span> `{HasBeenSentCapability} : state_message_oracle :=
  negate_oracle has_been_sent.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk7b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk7b"><span class="kn">Lemma</span> <span class="nf">has_been_sent_no_inits</span> `{HasBeenSentCapability} :
  <span class="kr">forall</span> <span class="nv">s</span> : state vlsm,
    initial_state_prop vlsm s -&gt; <span class="kr">forall</span> <span class="nv">m</span> : message, ~ has_been_sent s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state vlsm,
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message, ¬¨ has_been_sent s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk7c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk7c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state vlsm,
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message, ¬¨ has_been_sent s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (oracle_no_inits _ _ (has_been_sent_stepwise_props)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk7d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk7d"><span class="kn">Lemma</span> <span class="nf">has_been_sent_step_update</span> `{HasBeenSentCapability} :
  <span class="kr">forall</span> (<span class="nv">l</span> : label _) (<span class="nv">s</span> : state _) (<span class="nv">im</span> : option message) (<span class="nv">s&#39;</span> : state _) (<span class="nv">om</span> : option message),
    input_constrained_transition vlsm l (s, im) (s&#39;, om) -&gt;
  <span class="kr">forall</span> <span class="nv">msg</span> : message,
    has_been_sent s&#39; msg &lt;-&gt; (om = Some msg \/ has_been_sent s msg).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">im</span> : option message) (<span class="nv">s&#39;</span> : state
                                (preloaded_with_all_messages_vlsm
                                   vlsm)) (<span class="nv">om</span> : option
                                                 message),
  input_constrained_transition vlsm l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      has_been_sent s&#39; msg
      ‚Üî om = Some msg ‚à® has_been_sent s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk7e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk7e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">im</span> : option message) (<span class="nv">s&#39;</span> : state
                                (preloaded_with_all_messages_vlsm
                                   vlsm)) (<span class="nv">om</span> : option
                                                 message),
  input_constrained_transition vlsm l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      has_been_sent s&#39; msg
      ‚Üî om = Some msg ‚à® has_been_sent s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (oracle_step_update _ _ has_been_sent_stepwise_props).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">has_been_sent_tracewise_prop</span>
    (<span class="nv">has_been_sent_pred</span> : state_message_oracle) : <span class="kt">Prop</span> :=
  oracle_tracewise_props (field_selector output) has_been_sent_pred.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk7f" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk7f"><span class="kn">Lemma</span> <span class="nf">has_been_sent_tracewise_props</span> `{HasBeenSentCapability} :
  has_been_sent_tracewise_prop has_been_sent.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent_tracewise_prop has_been_sent</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk80" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk80"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent_tracewise_prop has_been_sent</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="bp">exact</span> (oracle_trace_props_from_stepwise has_been_sent_stepwise_props).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk81" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk81"><span class="kn">Lemma</span> <span class="nf">proper_sent</span> `{HasBeenSentCapability} :
  <span class="kr">forall</span> (<span class="nv">s</span> : state pre_vlsm) (<span class="nv">Hs</span> : constrained_state_prop vlsm s) (<span class="nv">m</span> : message),
    has_been_sent_prop has_been_sent s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state pre_vlsm,
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      has_been_sent_prop has_been_sent s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk82" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk82"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state pre_vlsm,
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      has_been_sent_prop has_been_sent s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span>; <span class="nb">apply</span> has_been_sent_tracewise_props.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk83" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk83"><span class="kn">Lemma</span> <span class="nf">proper_not_sent</span> `{HasBeenSentCapability} :
  <span class="kr">forall</span> (<span class="nv">s</span> : state pre_vlsm) (<span class="nv">Hs</span> : constrained_state_prop vlsm s) (<span class="nv">m</span> : message),
    has_not_been_sent_prop has_not_been_sent s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state pre_vlsm,
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      has_not_been_sent_prop has_not_been_sent s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk84" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk84"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state pre_vlsm,
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      has_not_been_sent_prop has_not_been_sent s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span>; <span class="nb">apply</span> has_been_sent_tracewise_props.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
Reverse implication for 'selected_messages_consistency_prop' always holds. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk85" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk85"><span class="kn">Lemma</span> <span class="nf">consistency_from_valid_state_proj2</span>
  (<span class="nv">s</span> : state pre_vlsm)
  (<span class="nv">Hs</span> : constrained_state_prop vlsm s)
  (<span class="nv">m</span> : message)
  (<span class="nv">selector</span> : message -&gt; transition_item -&gt; <span class="kt">Prop</span>)
  (<span class="nv">Hall</span> : selected_message_exists_in_all_preloaded_traces selector s m)
  : selected_message_exists_in_some_preloaded_traces selector s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_all_preloaded_traces
  selector s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_some_preloaded_traces
  selector s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk86" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk86"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_all_preloaded_traces
  selector s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_some_preloaded_traces
  selector s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk87" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk87"><span class="nb">apply</span> valid_state_has_trace <span class="kr">in</span> Hs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> (<span class="nv">is</span> : state
          (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">tr</span> : list transition_item),
  finite_valid_trace_init_to
    (preloaded_with_all_messages_vlsm vlsm) <span class="kr">is</span> s
    tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_all_preloaded_traces
  selector s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_some_preloaded_traces
  selector s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk88" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk88"><span class="nb">destruct</span> Hs <span class="kr">as</span> [<span class="kr">is</span> [tr Htr]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm vlsm) <span class="kr">is</span> s
  tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_all_preloaded_traces
  selector s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_some_preloaded_traces
  selector s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk89" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk89"><span class="kr">exists</span> <span class="nv">_</span>, _, Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm vlsm) <span class="kr">is</span> s
  tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hall</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_all_preloaded_traces
  selector s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message selector m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (Hall _ _ Htr).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk8a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk8a"><span class="kn">Lemma</span> <span class="nf">has_been_sent_consistency</span>
  `{HasBeenSentCapability}
  (s : state pre_vlsm)
  (Hs : constrained_state_prop vlsm s)
  (m : message)
  : selected_messages_consistency_prop (field_selector output) s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_messages_consistency_prop
  (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk8b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk8b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_messages_consistency_prop
  (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk8c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk8c"><span class="nb">split</span>; [| <span class="bp">by</span> <span class="nb">apply</span> consistency_from_valid_state_proj2].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_some_preloaded_traces
  (field_selector output) s m
‚Üí selected_message_exists_in_all_preloaded_traces
    (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk8d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk8d"><span class="nb">intro</span> Hsome.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_some_preloaded_traces
  (field_selector output) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces
  (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk8e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk8e"><span class="nb">destruct</span> (decide (has_been_sent s m)) <span class="kr">as</span> [Hsm | Hsm].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_some_preloaded_traces
  (field_selector output) s m</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>has_been_sent s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces
  (field_selector output) s m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk8f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_some_preloaded_traces
  (field_selector output) s m</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>¬¨ has_been_sent s m</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk8f"><hr></label><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces
  (field_selector output) s m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk90" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk90">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_some_preloaded_traces
  (field_selector output) s m</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>has_been_sent s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces
  (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> proper_sent <span class="kr">in</span> Hsm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk91" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk91">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_some_preloaded_traces
  (field_selector output) s m</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>¬¨ has_been_sent s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces
  (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk92" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk92"><span class="nb">apply</span> proper_not_sent <span class="kr">in</span> Hsm; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_some_preloaded_traces
  (field_selector output) s m</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_no_preloaded_trace
  (field_selector output) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces
  (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk93" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk93"><span class="nb">destruct</span> Hsome <span class="kr">as</span> [<span class="kr">is</span> [tr [Htr Hmsg]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to pre_vlsm <span class="kr">is</span> s tr</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector output) m tr</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_no_preloaded_trace
  (field_selector output) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces
  (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">elim</span> (Hsm _ _ Htr).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk94" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk94"><span class="kn">Lemma</span> <span class="nf">can_produce_has_been_sent</span>
  `{HasBeenSentCapability}
  (s : state pre_vlsm)
  (m : message)
  (Hsm : can_produce pre_vlsm s m)
  : has_been_sent s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>can_produce pre_vlsm s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk95" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk95"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>can_produce pre_vlsm s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk96" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk96"><span class="nb">assert</span> (constrained_state_prop vlsm s) <span class="bp">by</span> (<span class="nb">apply</span> can_produce_valid <span class="kr">in</span> Hsm; <span class="nb">eexists</span>; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>can_produce pre_vlsm s m</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk97" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk97"><span class="nb">apply</span> proper_sent; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>can_produce pre_vlsm s m</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces
  (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk98" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk98"><span class="nb">apply</span> has_been_sent_consistency; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>can_produce pre_vlsm s m</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_some_preloaded_traces
  (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk99" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk99"><span class="nb">apply</span> non_empty_valid_trace_from_can_produce <span class="kr">in</span> Hsm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> (<span class="nv">is</span> : state pre_vlsm) 
  (<span class="nv">tr</span> : list transition_item) 
  (<span class="nv">item</span> : transition_item),
  finite_valid_trace pre_vlsm <span class="kr">is</span> tr
  ‚àß last_error tr = Some item
    ‚àß destination item = s
      ‚àß output item = Some m</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_some_preloaded_traces
  (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk9a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk9a"><span class="nb">destruct</span> Hsm <span class="kr">as</span> [<span class="kr">is</span> [tr [lst_tr [Htr [Hlst [Hs Hm]]]]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>lst_tr</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace pre_vlsm <span class="kr">is</span> tr</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>last_error tr = Some lst_tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>destination lst_tr = s</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>output lst_tr = Some m</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_some_preloaded_traces
  (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk9b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk9b">destruct_list_last tr tr&#39; _lst_tr Heqtr; [<span class="bp">by</span> <span class="nb">inversion</span> Hlst |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>lst_tr</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>tr'</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>_lst_tr</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace pre_vlsm <span class="kr">is</span>
  (tr&#39; ++ [_lst_tr])</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>last_error (tr&#39; ++ [_lst_tr]) = Some lst_tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>destination lst_tr = s</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>output lst_tr = Some m</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>Heqtr</var><span class="hyp-type"><b>: </b><span>tr = tr&#39; ++ [_lst_tr]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_some_preloaded_traces
  (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk9c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk9c"><span class="nb">rewrite</span> last_error_is_last <span class="kr">in</span> Hlst.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>lst_tr</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>tr'</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>_lst_tr</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace pre_vlsm <span class="kr">is</span>
  (tr&#39; ++ [_lst_tr])</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>Some _lst_tr = Some lst_tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>destination lst_tr = s</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>output lst_tr = Some m</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>Heqtr</var><span class="hyp-type"><b>: </b><span>tr = tr&#39; ++ [_lst_tr]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_some_preloaded_traces
  (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk9d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk9d"><span class="nb">inversion</span> Hlst; <span class="nb">subst</span> _lst_tr; <span class="nb">clear</span> Hlst.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>lst_tr</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>tr'</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace pre_vlsm <span class="kr">is</span> (tr&#39; ++ [lst_tr])</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>destination lst_tr = s</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>output lst_tr = Some m</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>Heqtr</var><span class="hyp-type"><b>: </b><span>tr = tr&#39; ++ [lst_tr]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_some_preloaded_traces
  (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk9e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk9e"><span class="nb">apply</span> valid_trace_add_default_last <span class="kr">in</span> Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>lst_tr</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>tr'</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to pre_vlsm <span class="kr">is</span>
  (finite_trace_last <span class="kr">is</span> (tr&#39; ++ [lst_tr]))
  (tr&#39; ++ [lst_tr])</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>destination lst_tr = s</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>output lst_tr = Some m</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>Heqtr</var><span class="hyp-type"><b>: </b><span>tr = tr&#39; ++ [lst_tr]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_some_preloaded_traces
  (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk9f" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk9f"><span class="nb">rewrite</span> finite_trace_last_is_last, Hs <span class="kr">in</span> Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>lst_tr</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>tr'</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to pre_vlsm <span class="kr">is</span> s
  (tr&#39; ++ [lst_tr])</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>destination lst_tr = s</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>output lst_tr = Some m</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>Heqtr</var><span class="hyp-type"><b>: </b><span>tr = tr&#39; ++ [lst_tr]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_some_preloaded_traces
  (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chka0" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chka0"><span class="nb">eexists</span> _, _, Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>lst_tr</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>tr'</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to pre_vlsm <span class="kr">is</span> s
  (tr&#39; ++ [lst_tr])</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>destination lst_tr = s</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>output lst_tr = Some m</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>Heqtr</var><span class="hyp-type"><b>: </b><span>tr = tr&#39; ++ [lst_tr]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message (field_selector output) m
  (tr&#39; ++ [lst_tr])</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> Exists_app; <span class="nb">right</span>; <span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  Sufficient condition for <span class="inlinecode"><span class="id" title="var">proper_sent</span></span> avoiding the
  <span class="inlinecode"><span class="id" title="var">preloaded_with_all_messages_vlsm</span></span>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chka1" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chka1"><span class="kn">Lemma</span> <span class="nf">specialized_proper_sent</span>
  `{HasBeenSentCapability}
  (s : state vlsm)
  (Hs : valid_state_prop vlsm s)
  (m : message)
  (Hsome : specialized_selected_message_exists_in_some_traces vlsm (field_selector output) s m)
  : has_been_sent s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>specialized_selected_message_exists_in_some_traces
  vlsm (field_selector output) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chka2" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chka2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>specialized_selected_message_exists_in_some_traces
  vlsm (field_selector output) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chka3" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chka3"><span class="nb">destruct</span> Hs <span class="kr">as</span> [_om Hs].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop vlsm s _om</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>specialized_selected_message_exists_in_some_traces
  vlsm (field_selector output) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chka4" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chka4"><span class="nb">assert</span> (Hpres : constrained_state_prop vlsm s)
    <span class="bp">by</span> (<span class="kr">exists</span> <span class="nv">_om</span>; <span class="nb">apply</span> preloaded_with_all_messages_valid_state_message_preservation; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop vlsm s _om</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>specialized_selected_message_exists_in_some_traces
  vlsm (field_selector output) s m</span></span></span><br><span><var>Hpres</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chka5" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chka5"><span class="nb">apply</span> proper_sent; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop vlsm s _om</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>specialized_selected_message_exists_in_some_traces
  vlsm (field_selector output) s m</span></span></span><br><span><var>Hpres</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces
  (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chka6" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chka6"><span class="nb">specialize</span> (has_been_sent_consistency s Hpres m) <span class="kr">as</span> Hcons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop vlsm s _om</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>specialized_selected_message_exists_in_some_traces
  vlsm (field_selector output) s m</span></span></span><br><span><var>Hpres</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>Hcons</var><span class="hyp-type"><b>: </b><span>selected_messages_consistency_prop
  (field_selector output) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces
  (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chka7" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chka7"><span class="nb">apply</span> Hcons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop vlsm s _om</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>specialized_selected_message_exists_in_some_traces
  vlsm (field_selector output) s m</span></span></span><br><span><var>Hpres</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>Hcons</var><span class="hyp-type"><b>: </b><span>selected_messages_consistency_prop
  (field_selector output) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_some_preloaded_traces
  (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chka8" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chka8"><span class="nb">destruct</span> Hsome <span class="kr">as</span> [<span class="kr">is</span> [tr [Htr Hsome]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop vlsm s _om</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to vlsm <span class="kr">is</span> s tr</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector output) m tr</span></span></span><br><span><var>Hpres</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>Hcons</var><span class="hyp-type"><b>: </b><span>selected_messages_consistency_prop
  (field_selector output) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_some_preloaded_traces
  (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chka9" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chka9"><span class="kr">exists</span> <span class="nv">is</span>, tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop vlsm s _om</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to vlsm <span class="kr">is</span> s tr</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector output) m tr</span></span></span><br><span><var>Hpres</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>Hcons</var><span class="hyp-type"><b>: </b><span>selected_messages_consistency_prop
  (field_selector output) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">_</span> : finite_valid_trace_init_to pre_vlsm <span class="kr">is</span> s tr,
  trace_has_message (field_selector output) m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkaa" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkaa"><span class="nb">split</span>; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop vlsm s _om</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to vlsm <span class="kr">is</span> s tr</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector output) m tr</span></span></span><br><span><var>Hpres</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>Hcons</var><span class="hyp-type"><b>: </b><span>selected_messages_consistency_prop
  (field_selector output) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to pre_vlsm <span class="kr">is</span> s tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkab" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkab"><span class="nb">revert</span> Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop vlsm s _om</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector output) m tr</span></span></span><br><span><var>Hpres</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>Hcons</var><span class="hyp-type"><b>: </b><span>selected_messages_consistency_prop
  (field_selector output) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to vlsm <span class="kr">is</span> s tr
‚Üí finite_valid_trace_init_to pre_vlsm <span class="kr">is</span> s tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkac" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkac"><span class="nb">unfold</span> pre_vlsm; <span class="nb">clear</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to vlsm <span class="kr">is</span> s tr
‚Üí finite_valid_trace_init_to
    (preloaded_with_all_messages_vlsm vlsm) <span class="kr">is</span> s tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkad" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkad"><span class="nb">destruct</span> vlsm <span class="kr">as</span> (T, M).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSMMachine T</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state {| vlsm_type := T; vlsm_machine := M |}</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to
  {| vlsm_type := T; vlsm_machine := M |} <span class="kr">is</span> s tr
‚Üí finite_valid_trace_init_to
    (preloaded_with_all_messages_vlsm
       {| vlsm_type := T; vlsm_machine := M |}) <span class="kr">is</span> s
    tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> VLSM_incl_finite_valid_trace_init_to, vlsm_incl_preloaded_with_all_messages_vlsm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<span class="inlinecode"><span class="id" title="var">proper_sent</span></span> condition specialized to regular VLSM traces
  (avoiding <span class="inlinecode"><span class="id" title="var">preloaded_with_all_messages_vlsm</span></span>).

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkae" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkae"><span class="kn">Lemma</span> <span class="nf">specialized_proper_sent_rev</span>
  `{HasBeenSentCapability}
  (s : state vlsm)
  (Hs : valid_state_prop vlsm s)
  (m : message)
  (Hsm : has_been_sent s m)
  : specialized_selected_message_exists_in_all_traces vlsm (field_selector output) s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>has_been_sent s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">specialized_selected_message_exists_in_all_traces vlsm
  (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkaf" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkaf"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>has_been_sent s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">specialized_selected_message_exists_in_all_traces vlsm
  (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkb0" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkb0"><span class="nb">destruct</span> Hs <span class="kr">as</span> [_om Hs].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop vlsm s _om</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>has_been_sent s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">specialized_selected_message_exists_in_all_traces vlsm
  (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkb1" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkb1"><span class="nb">assert</span> (Hpres : constrained_state_prop vlsm s)
    <span class="bp">by</span> (<span class="kr">exists</span> <span class="nv">_om</span>; <span class="nb">apply</span> preloaded_with_all_messages_valid_state_message_preservation; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop vlsm s _om</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>has_been_sent s m</span></span></span><br><span><var>Hpres</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">specialized_selected_message_exists_in_all_traces vlsm
  (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkb2" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkb2"><span class="nb">apply</span> proper_sent <span class="kr">in</span> Hsm; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop vlsm s _om</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_all_preloaded_traces
  (field_selector output) s m</span></span></span><br><span><var>Hpres</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">specialized_selected_message_exists_in_all_traces vlsm
  (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkb3" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkb3"><span class="nb">intros</span> <span class="kr">is</span> tr Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop vlsm s _om</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_all_preloaded_traces
  (field_selector output) s m</span></span></span><br><span><var>Hpres</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to vlsm <span class="kr">is</span> s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message (field_selector output) m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkb4" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkb4"><span class="nb">specialize</span> (Hsm <span class="kr">is</span> tr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop vlsm s _om</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to pre_vlsm <span class="kr">is</span> s tr
‚Üí trace_has_message (field_selector output) m tr</span></span></span><br><span><var>Hpres</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to vlsm <span class="kr">is</span> s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message (field_selector output) m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkb5" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkb5">spec Hsm; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop vlsm s _om</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to pre_vlsm <span class="kr">is</span> s tr
‚Üí trace_has_message (field_selector output) m tr</span></span></span><br><span><var>Hpres</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to vlsm <span class="kr">is</span> s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to pre_vlsm <span class="kr">is</span> s tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkb6" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkb6"><span class="nb">revert</span> Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>_om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_message_prop vlsm s _om</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to pre_vlsm <span class="kr">is</span> s tr
‚Üí trace_has_message (field_selector output) m tr</span></span></span><br><span><var>Hpres</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to vlsm <span class="kr">is</span> s tr
‚Üí finite_valid_trace_init_to pre_vlsm <span class="kr">is</span> s tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkb7" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkb7"><span class="nb">unfold</span> pre_vlsm; <span class="nb">clear</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to vlsm <span class="kr">is</span> s tr
‚Üí finite_valid_trace_init_to
    (preloaded_with_all_messages_vlsm vlsm) <span class="kr">is</span> s tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkb8" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkb8"><span class="nb">destruct</span> vlsm <span class="kr">as</span> (T, M).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span>VLSMMachine T</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state {| vlsm_type := T; vlsm_machine := M |}</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to
  {| vlsm_type := T; vlsm_machine := M |} <span class="kr">is</span> s tr
‚Üí finite_valid_trace_init_to
    (preloaded_with_all_messages_vlsm
       {| vlsm_type := T; vlsm_machine := M |}) <span class="kr">is</span> s
    tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> VLSM_incl_finite_valid_trace_init_to, vlsm_incl_preloaded_with_all_messages_vlsm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkb9" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkb9"><span class="kn">Lemma</span> <span class="nf">has_been_sent_consistency_proper_not_sent</span>
  (<span class="nv">has_been_sent</span> : state_message_oracle)
  (<span class="nv">has_been_sent_dec</span> : RelDecision has_been_sent)
  (<span class="nv">s</span> : state vlsm)
  (<span class="nv">m</span> : message)
  (<span class="nv">proper_sent</span> : has_been_sent_prop has_been_sent s m)
  (<span class="nv">has_not_been_sent</span>
    := <span class="kr">fun</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message) =&gt; ~ has_been_sent s m)
  (<span class="nv">Hconsistency</span> : selected_messages_consistency_prop (field_selector output) s m)
  : has_not_been_sent_prop has_not_been_sent s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>has_been_sent</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision has_been_sent</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>proper_sent</var><span class="hyp-type"><b>: </b><span>has_been_sent_prop has_been_sent s m</span></span></span><br><span><var>has_not_been_sent</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message),
  ¬¨ has_been_sent s m</span></span><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Hconsistency</var><span class="hyp-type"><b>: </b><span>selected_messages_consistency_prop
  (field_selector output) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_not_been_sent_prop has_not_been_sent s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkba" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkba"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>has_been_sent</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision has_been_sent</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>proper_sent</var><span class="hyp-type"><b>: </b><span>has_been_sent_prop has_been_sent s m</span></span></span><br><span><var>has_not_been_sent</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message),
  ¬¨ has_been_sent s m</span></span><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Hconsistency</var><span class="hyp-type"><b>: </b><span>selected_messages_consistency_prop
  (field_selector output) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_not_been_sent_prop has_not_been_sent s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkbb" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkbb"><span class="nb">unfold</span> has_not_been_sent_prop.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>has_been_sent</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision has_been_sent</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>proper_sent</var><span class="hyp-type"><b>: </b><span>has_been_sent_prop has_been_sent s m</span></span></span><br><span><var>has_not_been_sent</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message),
  ¬¨ has_been_sent s m</span></span><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Hconsistency</var><span class="hyp-type"><b>: </b><span>selected_messages_consistency_prop
  (field_selector output) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">no_traces_have_message_prop (field_selector output)
  has_not_been_sent s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkbc" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkbc"><span class="nb">unfold</span> no_traces_have_message_prop.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>has_been_sent</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision has_been_sent</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>proper_sent</var><span class="hyp-type"><b>: </b><span>has_been_sent_prop has_been_sent s m</span></span></span><br><span><var>has_not_been_sent</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message),
  ¬¨ has_been_sent s m</span></span><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Hconsistency</var><span class="hyp-type"><b>: </b><span>selected_messages_consistency_prop
  (field_selector output) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_not_been_sent s m
‚Üî selected_message_exists_in_no_preloaded_trace
    (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkbd" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkbd"><span class="nb">unfold</span> has_not_been_sent.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>has_been_sent</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision has_been_sent</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>proper_sent</var><span class="hyp-type"><b>: </b><span>has_been_sent_prop has_been_sent s m</span></span></span><br><span><var>has_not_been_sent</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message),
  ¬¨ has_been_sent s m</span></span><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Hconsistency</var><span class="hyp-type"><b>: </b><span>selected_messages_consistency_prop
  (field_selector output) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ has_been_sent s m
‚Üî selected_message_exists_in_no_preloaded_trace
    (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkbe" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkbe"><span class="nb">rewrite</span> &lt;- selected_message_exists_preloaded_not_some_iff_no.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>has_been_sent</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>has_been_sent_dec</var><span class="hyp-type"><b>: </b><span>RelDecision has_been_sent</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>proper_sent</var><span class="hyp-type"><b>: </b><span>has_been_sent_prop has_been_sent s m</span></span></span><br><span><var>has_not_been_sent</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message),
  ¬¨ has_been_sent s m</span></span><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Hconsistency</var><span class="hyp-type"><b>: </b><span>selected_messages_consistency_prop
  (field_selector output) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ has_been_sent s m
‚Üî ¬¨ selected_message_exists_in_some_preloaded_traces
      (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> not_iff_compat, (iff_trans proper_sent).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkbf" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkbf"><span class="kn">Lemma</span> <span class="nf">from_send_to_from_sent_argument</span>
  `{HasBeenSentCapability}
  (P : state vlsm -&gt; <span class="kt">Prop</span>)
  (P_stable : <span class="kr">forall</span> <span class="nv">s</span> <span class="nv">l</span> <span class="nv">oim</span> <span class="nv">s&#39;</span> <span class="nv">oom</span>,
    input_constrained_transition vlsm l (s, oim) (s&#39;, oom) -&gt;
    P s -&gt; P s&#39;)
  (msg : message)
  (send_establishes_P : <span class="kr">forall</span> <span class="nv">s</span> <span class="nv">l</span> <span class="nv">oim</span> <span class="nv">s&#39;</span>,
    input_constrained_transition vlsm l (s, oim) (s&#39;, Some msg) -&gt;
    P s&#39;) :
  <span class="kr">forall</span> <span class="nv">s</span>,
    constrained_state_prop vlsm s -&gt;
    has_been_sent s msg -&gt;
    P s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P_stable</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state
         (preloaded_with_all_messages_vlsm
            vlsm)) (<span class="nv">l</span> : 
                    label
                      (preloaded_with_all_messages_vlsm
                      vlsm)) 
  (<span class="nv">oim</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             vlsm)) (<span class="nv">oom</span> : option message),
  input_constrained_transition vlsm l
    (s, oim) (s&#39;, oom) ‚Üí 
  P s ‚Üí P s&#39;</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>send_establishes_P</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state
         (preloaded_with_all_messages_vlsm
            vlsm)) (<span class="nv">l</span> : 
                    label
                      (preloaded_with_all_messages_vlsm
                      vlsm)) 
  (<span class="nv">oim</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             vlsm)),
  input_constrained_transition
    vlsm l (s, oim)
    (s&#39;, Some msg) ‚Üí P s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm),
  constrained_state_prop vlsm s
  ‚Üí has_been_sent s msg ‚Üí P s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkc0" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkc0"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P_stable</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state
         (preloaded_with_all_messages_vlsm
            vlsm)) (<span class="nv">l</span> : 
                    label
                      (preloaded_with_all_messages_vlsm
                      vlsm)) 
  (<span class="nv">oim</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             vlsm)) (<span class="nv">oom</span> : option message),
  input_constrained_transition vlsm l
    (s, oim) (s&#39;, oom) ‚Üí 
  P s ‚Üí P s&#39;</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>send_establishes_P</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state
         (preloaded_with_all_messages_vlsm
            vlsm)) (<span class="nv">l</span> : 
                    label
                      (preloaded_with_all_messages_vlsm
                      vlsm)) 
  (<span class="nv">oim</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             vlsm)),
  input_constrained_transition
    vlsm l (s, oim)
    (s&#39;, Some msg) ‚Üí P s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm),
  constrained_state_prop vlsm s
  ‚Üí has_been_sent s msg ‚Üí P s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkc1" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkc1"><span class="nb">intros</span> s Hs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P_stable</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state
         (preloaded_with_all_messages_vlsm
            vlsm)) (<span class="nv">l</span> : 
                    label
                      (preloaded_with_all_messages_vlsm
                      vlsm)) 
  (<span class="nv">oim</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             vlsm)) (<span class="nv">oom</span> : option message),
  input_constrained_transition vlsm l
    (s, oim) (s&#39;, oom) ‚Üí 
  P s ‚Üí P s&#39;</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>send_establishes_P</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state
         (preloaded_with_all_messages_vlsm
            vlsm)) (<span class="nv">l</span> : 
                    label
                      (preloaded_with_all_messages_vlsm
                      vlsm)) 
  (<span class="nv">oim</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             vlsm)),
  input_constrained_transition
    vlsm l (s, oim)
    (s&#39;, Some msg) ‚Üí P s&#39;</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent s msg ‚Üí P s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkc2" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkc2"><span class="nb">induction</span> Hs <span class="nb">using</span> valid_state_prop_ind;
    [<span class="bp">by</span> <span class="nb">intros</span> []%has_been_sent_no_inits |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P_stable</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state
         (preloaded_with_all_messages_vlsm
            vlsm)) (<span class="nv">l</span> : 
                    label
                      (preloaded_with_all_messages_vlsm
                      vlsm)) 
  (<span class="nv">oim</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             vlsm)) (<span class="nv">oom</span> : option message),
  input_constrained_transition vlsm l
    (s, oim) (s&#39;, oom) ‚Üí 
  P s ‚Üí P s&#39;</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>send_establishes_P</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state
         (preloaded_with_all_messages_vlsm
            vlsm)) (<span class="nv">l</span> : 
                    label
                      (preloaded_with_all_messages_vlsm
                      vlsm)) 
  (<span class="nv">oim</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             vlsm)),
  input_constrained_transition
    vlsm l (s, oim)
    (s&#39;, Some msg) ‚Üí P s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm vlsm) l
  (s, om) (s&#39;, om&#39;)</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span>has_been_sent s msg ‚Üí P s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent s&#39; msg ‚Üí P s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkc3" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkc3"><span class="nb">rewrite</span> has_been_sent_step_update; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P_stable</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state
         (preloaded_with_all_messages_vlsm
            vlsm)) (<span class="nv">l</span> : 
                    label
                      (preloaded_with_all_messages_vlsm
                      vlsm)) 
  (<span class="nv">oim</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             vlsm)) (<span class="nv">oom</span> : option message),
  input_constrained_transition vlsm l
    (s, oim) (s&#39;, oom) ‚Üí 
  P s ‚Üí P s&#39;</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>send_establishes_P</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state
         (preloaded_with_all_messages_vlsm
            vlsm)) (<span class="nv">l</span> : 
                    label
                      (preloaded_with_all_messages_vlsm
                      vlsm)) 
  (<span class="nv">oim</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             vlsm)),
  input_constrained_transition
    vlsm l (s, oim)
    (s&#39;, Some msg) ‚Üí P s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm vlsm) l
  (s, om) (s&#39;, om&#39;)</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span>has_been_sent s msg ‚Üí P s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">om&#39; = Some msg ‚à® has_been_sent s msg ‚Üí P s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkc4" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkc4"><span class="nb">intros</span> [-&gt; | H_sent].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P_stable</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state
         (preloaded_with_all_messages_vlsm
            vlsm)) (<span class="nv">l</span> : 
                    label
                      (preloaded_with_all_messages_vlsm
                      vlsm)) 
  (<span class="nv">oim</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             vlsm)) (<span class="nv">oom</span> : option message),
  input_constrained_transition vlsm l
    (s, oim) (s&#39;, oom) ‚Üí 
  P s ‚Üí P s&#39;</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>send_establishes_P</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state
         (preloaded_with_all_messages_vlsm
            vlsm)) (<span class="nv">l</span> : 
                    label
                      (preloaded_with_all_messages_vlsm
                      vlsm)) 
  (<span class="nv">oim</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             vlsm)),
  input_constrained_transition
    vlsm l (s, oim)
    (s&#39;, Some msg) ‚Üí P s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm vlsm) l
  (s, om) (s&#39;, Some msg)</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span>has_been_sent s msg ‚Üí P s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P s&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chkc5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P_stable</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state
         (preloaded_with_all_messages_vlsm
            vlsm)) (<span class="nv">l</span> : 
                    label
                      (preloaded_with_all_messages_vlsm
                      vlsm)) 
  (<span class="nv">oim</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             vlsm)) (<span class="nv">oom</span> : option message),
  input_constrained_transition vlsm l
    (s, oim) (s&#39;, oom) ‚Üí 
  P s ‚Üí P s&#39;</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>send_establishes_P</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state
         (preloaded_with_all_messages_vlsm
            vlsm)) (<span class="nv">l</span> : 
                    label
                      (preloaded_with_all_messages_vlsm
                      vlsm)) 
  (<span class="nv">oim</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             vlsm)),
  input_constrained_transition
    vlsm l (s, oim)
    (s&#39;, Some msg) ‚Üí P s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm vlsm) l
  (s, om) (s&#39;, om&#39;)</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span>has_been_sent s msg ‚Üí P s</span></span></span><br><span><var>H_sent</var><span class="hyp-type"><b>: </b><span>has_been_sent s msg</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chkc5"><hr></label><div class="goal-conclusion">P s&#39;</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkc6" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkc6">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P_stable</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state
         (preloaded_with_all_messages_vlsm
            vlsm)) (<span class="nv">l</span> : 
                    label
                      (preloaded_with_all_messages_vlsm
                      vlsm)) 
  (<span class="nv">oim</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             vlsm)) (<span class="nv">oom</span> : option message),
  input_constrained_transition vlsm l
    (s, oim) (s&#39;, oom) ‚Üí 
  P s ‚Üí P s&#39;</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>send_establishes_P</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state
         (preloaded_with_all_messages_vlsm
            vlsm)) (<span class="nv">l</span> : 
                    label
                      (preloaded_with_all_messages_vlsm
                      vlsm)) 
  (<span class="nv">oim</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             vlsm)),
  input_constrained_transition
    vlsm l (s, oim)
    (s&#39;, Some msg) ‚Üí P s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm vlsm) l
  (s, om) (s&#39;, Some msg)</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span>has_been_sent s msg ‚Üí P s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> send_establishes_P.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkc7" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkc7">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>P_stable</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state
         (preloaded_with_all_messages_vlsm
            vlsm)) (<span class="nv">l</span> : 
                    label
                      (preloaded_with_all_messages_vlsm
                      vlsm)) 
  (<span class="nv">oim</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             vlsm)) (<span class="nv">oom</span> : option message),
  input_constrained_transition vlsm l
    (s, oim) (s&#39;, oom) ‚Üí 
  P s ‚Üí P s&#39;</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>send_establishes_P</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state
         (preloaded_with_all_messages_vlsm
            vlsm)) (<span class="nv">l</span> : 
                    label
                      (preloaded_with_all_messages_vlsm
                      vlsm)) 
  (<span class="nv">oim</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             vlsm)),
  input_constrained_transition
    vlsm l (s, oim)
    (s&#39;, Some msg) ‚Üí P s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm vlsm) l
  (s, om) (s&#39;, om&#39;)</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span>has_been_sent s msg ‚Üí P s</span></span></span><br><span><var>H_sent</var><span class="hyp-type"><b>: </b><span>has_been_sent s msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> P_stable, IHHs.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">has_been_received_stepwise_prop</span>
  (<span class="nv">has_been_received_pred</span> : state_message_oracle) : <span class="kt">Prop</span> :=
    oracle_stepwise_props (field_selector input) has_been_received_pred.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkc8" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkc8"><span class="kn">Class</span> <span class="nf">HasBeenReceivedCapability</span> : <span class="kt">Type</span> :=
{
  has_been_received : state_message_oracle;
  has_been_received_dec :&gt; RelDecision has_been_received;
  has_been_received_stepwise_props :
    has_been_received_stepwise_prop has_been_received;
}.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">A coercion will be introduced instead of an instance
<span class="kr">in</span> future versions when <span class="nb">using</span> &#39;:&gt;&#39; <span class="kr">in</span> &#39;Class&#39;
declarations. Replace &#39;:&gt;&#39; <span class="kr">with</span> &#39;::&#39; (or use
&#39;#[<span class="kn">global</span>] <span class="kn">Existing Instance</span> <span class="nf">field</span>.&#39; <span class="kr">for</span> compatibility
<span class="kr">with</span> Coq &lt; <span class="mi">8</span>.<span class="mi">18</span>). Beware that the default locality <span class="kr">for</span>
&#39;::&#39; <span class="kr">is</span> #[export], <span class="kr">as</span> opposed to #[<span class="kn">global</span>] <span class="kr">for</span> &#39;:&gt;&#39;
currently. <span class="kn">Add</span> an explicit #[<span class="kn">global</span>] attribute to the
<span class="bp">field</span> <span class="kr">if</span> you need to keep the current behavior. For
example: <span class="s2">&quot;Class foo := { #[global] field :: bar }.&quot;</span>
[future-coercion-class-<span class="bp">field</span>,deprecated-since-<span class="mi">8</span>.<span class="mi">17</span>,deprecated,default]</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">has_not_been_received</span> `{HasBeenReceivedCapability} : state_message_oracle :=
  negate_oracle has_been_received.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkc9" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkc9"><span class="kn">Lemma</span> <span class="nf">has_been_received_no_inits</span> `{HasBeenReceivedCapability} :
  <span class="kr">forall</span> <span class="nv">s</span> : state vlsm,
    initial_state_prop vlsm s -&gt; <span class="kr">forall</span> <span class="nv">m</span> : message, ~ has_been_received s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state vlsm,
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message, ¬¨ has_been_received s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkca" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkca"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state vlsm,
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message, ¬¨ has_been_received s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (oracle_no_inits _ _ has_been_received_stepwise_props).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkcb" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkcb"><span class="kn">Lemma</span> <span class="nf">has_been_received_step_update</span> `{HasBeenReceivedCapability} :
  <span class="kr">forall</span> [l : label _] [s : state _] [im : option message] [s&#39; : state _] [om : option message],
    input_constrained_transition vlsm l (s, im) (s&#39;, om) -&gt;
  <span class="kr">forall</span> <span class="nv">msg</span> : message,
    has_been_received s&#39; msg &lt;-&gt; (im = Some msg \/ has_been_received s msg).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">im</span> : option message) (<span class="nv">s&#39;</span> : state
                                (preloaded_with_all_messages_vlsm
                                   vlsm)) (<span class="nv">om</span> : option
                                                 message),
  input_constrained_transition vlsm l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      has_been_received s&#39; msg
      ‚Üî im = Some msg ‚à® has_been_received s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkcc" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkcc"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">im</span> : option message) (<span class="nv">s&#39;</span> : state
                                (preloaded_with_all_messages_vlsm
                                   vlsm)) (<span class="nv">om</span> : option
                                                 message),
  input_constrained_transition vlsm l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      has_been_received s&#39; msg
      ‚Üî im = Some msg ‚à® has_been_received s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (oracle_step_update _ _ has_been_received_stepwise_props).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">has_been_received_tracewise_prop</span>
  (<span class="nv">has_been_received_pred</span> : state_message_oracle) : <span class="kt">Prop</span> :=
    oracle_tracewise_props (field_selector input) has_been_received_pred.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkcd" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkcd"><span class="kn">Lemma</span> <span class="nf">has_been_received_tracewise_props</span> `{HasBeenReceivedCapability} :
  has_been_received_tracewise_prop has_been_received.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received_tracewise_prop has_been_received</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkce" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkce"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received_tracewise_prop has_been_received</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> oracle_trace_props_from_stepwise, has_been_received_stepwise_props.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkcf" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkcf"><span class="kn">Lemma</span> <span class="nf">proper_received</span> `{HasBeenReceivedCapability} :
  <span class="kr">forall</span> (<span class="nv">s</span> : state pre_vlsm) (<span class="nv">Hs</span> : constrained_state_prop vlsm s) (<span class="nv">m</span> : message),
    has_been_received_prop has_been_received s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state pre_vlsm,
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      has_been_received_prop has_been_received s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkd0" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkd0"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state pre_vlsm,
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      has_been_received_prop has_been_received s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> proper_oracle_holds, has_been_received_tracewise_props.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkd1" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkd1"><span class="kn">Lemma</span> <span class="nf">proper_not_received</span> `{HasBeenReceivedCapability} :
  <span class="kr">forall</span> (<span class="nv">s</span> : state pre_vlsm) (<span class="nv">Hs</span> : constrained_state_prop vlsm s) (<span class="nv">m</span> : message),
    has_not_been_received_prop has_not_been_received s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state pre_vlsm,
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      has_not_been_received_prop has_not_been_received
        s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkd2" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkd2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state pre_vlsm,
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      has_not_been_received_prop has_not_been_received
        s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> proper_not_oracle_holds, has_been_received_tracewise_props.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkd3" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkd3"><span class="kn">Lemma</span> <span class="nf">has_been_received_consistency</span>
  `{HasBeenReceivedCapability}
  (s : state pre_vlsm)
  (Hs : constrained_state_prop vlsm s)
  (m : message)
  : selected_messages_consistency_prop (field_selector input) s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_messages_consistency_prop
  (field_selector input) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkd4" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkd4"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_messages_consistency_prop
  (field_selector input) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkd5" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkd5"><span class="nb">split</span>; [| <span class="bp">by</span> <span class="nb">apply</span> consistency_from_valid_state_proj2].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_some_preloaded_traces
  (field_selector input) s m
‚Üí selected_message_exists_in_all_preloaded_traces
    (field_selector input) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkd6" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkd6"><span class="nb">intro</span> Hsome.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_some_preloaded_traces
  (field_selector input) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces
  (field_selector input) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkd7" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkd7"><span class="nb">destruct</span> (decide (has_been_received s m)) <span class="kr">as</span> [Hsm | Hsm];
    [<span class="bp">by</span> <span class="nb">apply</span> proper_received <span class="kr">in</span> Hsm |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_some_preloaded_traces
  (field_selector input) s m</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>¬¨ has_been_received s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces
  (field_selector input) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkd8" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkd8"><span class="nb">apply</span> proper_not_received <span class="kr">in</span> Hsm; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_some_preloaded_traces
  (field_selector input) s m</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_no_preloaded_trace
  (field_selector input) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces
  (field_selector input) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkd9" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkd9"><span class="nb">destruct</span> Hsome <span class="kr">as</span> [<span class="kr">is</span> [tr [Htr Hsome]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to pre_vlsm <span class="kr">is</span> s tr</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_no_preloaded_trace
  (field_selector input) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces
  (field_selector input) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">elim</span> (Hsm _ _ Htr).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkda" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkda"><span class="kn">Lemma</span> <span class="nf">has_been_received_consistency_proper_not_received</span>
  (<span class="nv">has_been_received</span> : state_message_oracle)
  (<span class="nv">has_been_received_dec</span> : RelDecision has_been_received)
  (<span class="nv">s</span> : state vlsm)
  (<span class="nv">m</span> : message)
  (<span class="nv">proper_received</span> : has_been_received_prop has_been_received s m)
  (<span class="nv">has_not_been_received</span>
    := <span class="kr">fun</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message) =&gt; ~ has_been_received s m)
  (<span class="nv">Hconsistency</span> : selected_messages_consistency_prop (field_selector input) s m)
  : has_not_been_received_prop has_not_been_received s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>has_been_received</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>has_been_received_dec</var><span class="hyp-type"><b>: </b><span>RelDecision has_been_received</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>proper_received</var><span class="hyp-type"><b>: </b><span>has_been_received_prop
  has_been_received s m</span></span></span><br><span><var>has_not_been_received</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message),
  ¬¨ has_been_received s m</span></span><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Hconsistency</var><span class="hyp-type"><b>: </b><span>selected_messages_consistency_prop
  (field_selector input) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_not_been_received_prop has_not_been_received s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkdb" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkdb"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>has_been_received</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>has_been_received_dec</var><span class="hyp-type"><b>: </b><span>RelDecision has_been_received</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>proper_received</var><span class="hyp-type"><b>: </b><span>has_been_received_prop
  has_been_received s m</span></span></span><br><span><var>has_not_been_received</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message),
  ¬¨ has_been_received s m</span></span><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Hconsistency</var><span class="hyp-type"><b>: </b><span>selected_messages_consistency_prop
  (field_selector input) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_not_been_received_prop has_not_been_received s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkdc" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkdc"><span class="nb">unfold</span> has_not_been_received_prop.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>has_been_received</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>has_been_received_dec</var><span class="hyp-type"><b>: </b><span>RelDecision has_been_received</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>proper_received</var><span class="hyp-type"><b>: </b><span>has_been_received_prop
  has_been_received s m</span></span></span><br><span><var>has_not_been_received</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message),
  ¬¨ has_been_received s m</span></span><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Hconsistency</var><span class="hyp-type"><b>: </b><span>selected_messages_consistency_prop
  (field_selector input) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">no_traces_have_message_prop (field_selector input)
  has_not_been_received s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkdd" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkdd"><span class="nb">unfold</span> no_traces_have_message_prop.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>has_been_received</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>has_been_received_dec</var><span class="hyp-type"><b>: </b><span>RelDecision has_been_received</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>proper_received</var><span class="hyp-type"><b>: </b><span>has_been_received_prop
  has_been_received s m</span></span></span><br><span><var>has_not_been_received</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message),
  ¬¨ has_been_received s m</span></span><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Hconsistency</var><span class="hyp-type"><b>: </b><span>selected_messages_consistency_prop
  (field_selector input) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_not_been_received s m
‚Üî selected_message_exists_in_no_preloaded_trace
    (field_selector input) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkde" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkde"><span class="nb">unfold</span> has_not_been_received.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>has_been_received</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>has_been_received_dec</var><span class="hyp-type"><b>: </b><span>RelDecision has_been_received</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>proper_received</var><span class="hyp-type"><b>: </b><span>has_been_received_prop
  has_been_received s m</span></span></span><br><span><var>has_not_been_received</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message),
  ¬¨ has_been_received s m</span></span><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Hconsistency</var><span class="hyp-type"><b>: </b><span>selected_messages_consistency_prop
  (field_selector input) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ has_been_received s m
‚Üî selected_message_exists_in_no_preloaded_trace
    (field_selector input) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkdf" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkdf"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>has_been_received</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>has_been_received_dec</var><span class="hyp-type"><b>: </b><span>RelDecision has_been_received</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>proper_received</var><span class="hyp-type"><b>: </b><span>has_been_received_prop
  has_been_received s m</span></span></span><br><span><var>has_not_been_received</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message),
  ¬¨ has_been_received s m</span></span><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Hconsistency</var><span class="hyp-type"><b>: </b><span>selected_messages_consistency_prop
  (field_selector input) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ has_been_received s m
‚Üí selected_message_exists_in_no_preloaded_trace
    (field_selector input) s m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chke0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>has_been_received</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>has_been_received_dec</var><span class="hyp-type"><b>: </b><span>RelDecision has_been_received</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>proper_received</var><span class="hyp-type"><b>: </b><span>has_been_received_prop
  has_been_received s m</span></span></span><br><span><var>has_not_been_received</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message),
  ¬¨ has_been_received s m</span></span><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Hconsistency</var><span class="hyp-type"><b>: </b><span>selected_messages_consistency_prop
  (field_selector input) s m</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chke0"><hr></label><div class="goal-conclusion">selected_message_exists_in_no_preloaded_trace
  (field_selector input) s m ‚Üí ¬¨ 
has_been_received s m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chke1" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chke1">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>has_been_received</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>has_been_received_dec</var><span class="hyp-type"><b>: </b><span>RelDecision has_been_received</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>proper_received</var><span class="hyp-type"><b>: </b><span>has_been_received_prop
  has_been_received s m</span></span></span><br><span><var>has_not_been_received</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message),
  ¬¨ has_been_received s m</span></span><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Hconsistency</var><span class="hyp-type"><b>: </b><span>selected_messages_consistency_prop
  (field_selector input) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ has_been_received s m
‚Üí selected_message_exists_in_no_preloaded_trace
    (field_selector input) s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chke2" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chke2"><span class="nb">intros</span> Hsm <span class="kr">is</span> tr Htr Hsome.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>has_been_received</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>has_been_received_dec</var><span class="hyp-type"><b>: </b><span>RelDecision has_been_received</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>proper_received</var><span class="hyp-type"><b>: </b><span>has_been_received_prop
  has_been_received s m</span></span></span><br><span><var>has_not_been_received</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message),
  ¬¨ has_been_received s m</span></span><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Hconsistency</var><span class="hyp-type"><b>: </b><span>selected_messages_consistency_prop
  (field_selector input) s m</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>¬¨ has_been_received s m</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to pre_vlsm <span class="kr">is</span> s tr</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chke3" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chke3"><span class="nb">assert</span> (Hsm&#39; : selected_message_exists_in_some_preloaded_traces (field_selector input) s m)
      <span class="bp">by</span> (<span class="kr">exists</span> <span class="nv">is</span>; <span class="kr">exists</span> <span class="nv">tr</span>; <span class="kr">exists</span> <span class="nv">Htr</span>; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>has_been_received</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>has_been_received_dec</var><span class="hyp-type"><b>: </b><span>RelDecision has_been_received</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>proper_received</var><span class="hyp-type"><b>: </b><span>has_been_received_prop
  has_been_received s m</span></span></span><br><span><var>has_not_been_received</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message),
  ¬¨ has_been_received s m</span></span><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Hconsistency</var><span class="hyp-type"><b>: </b><span>selected_messages_consistency_prop
  (field_selector input) s m</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>¬¨ has_been_received s m</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to pre_vlsm <span class="kr">is</span> s tr</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hsm'</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_some_preloaded_traces
  (field_selector input) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chke4" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chke4"><span class="nb">apply</span> Hconsistency <span class="kr">in</span> Hsm&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>has_been_received</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>has_been_received_dec</var><span class="hyp-type"><b>: </b><span>RelDecision has_been_received</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>proper_received</var><span class="hyp-type"><b>: </b><span>has_been_received_prop
  has_been_received s m</span></span></span><br><span><var>has_not_been_received</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message),
  ¬¨ has_been_received s m</span></span><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Hconsistency</var><span class="hyp-type"><b>: </b><span>selected_messages_consistency_prop
  (field_selector input) s m</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>¬¨ has_been_received s m</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to pre_vlsm <span class="kr">is</span> s tr</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hsm'</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_all_preloaded_traces
  (field_selector input) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> proper_received <span class="kr">in</span> Hsm&#39;.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chke5" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chke5">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>has_been_received</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>has_been_received_dec</var><span class="hyp-type"><b>: </b><span>RelDecision has_been_received</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>proper_received</var><span class="hyp-type"><b>: </b><span>has_been_received_prop
  has_been_received s m</span></span></span><br><span><var>has_not_been_received</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message),
  ¬¨ has_been_received s m</span></span><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Hconsistency</var><span class="hyp-type"><b>: </b><span>selected_messages_consistency_prop
  (field_selector input) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_no_preloaded_trace
  (field_selector input) s m ‚Üí ¬¨ has_been_received s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chke6" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chke6"><span class="nb">intro</span> Hnone.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>has_been_received</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>has_been_received_dec</var><span class="hyp-type"><b>: </b><span>RelDecision has_been_received</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>proper_received</var><span class="hyp-type"><b>: </b><span>has_been_received_prop
  has_been_received s m</span></span></span><br><span><var>has_not_been_received</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message),
  ¬¨ has_been_received s m</span></span><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Hconsistency</var><span class="hyp-type"><b>: </b><span>selected_messages_consistency_prop
  (field_selector input) s m</span></span></span><br><span><var>Hnone</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_no_preloaded_trace
  (field_selector input) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ has_been_received s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chke7" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chke7"><span class="nb">destruct</span> (decide (has_been_received s m)) <span class="kr">as</span> [Hsm | Hsm]; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>has_been_received</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>has_been_received_dec</var><span class="hyp-type"><b>: </b><span>RelDecision has_been_received</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>proper_received</var><span class="hyp-type"><b>: </b><span>has_been_received_prop
  has_been_received s m</span></span></span><br><span><var>has_not_been_received</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message),
  ¬¨ has_been_received s m</span></span><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Hconsistency</var><span class="hyp-type"><b>: </b><span>selected_messages_consistency_prop
  (field_selector input) s m</span></span></span><br><span><var>Hnone</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_no_preloaded_trace
  (field_selector input) s m</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>has_been_received s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ has_been_received s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chke8" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chke8"><span class="nb">apply</span> proper_received <span class="kr">in</span> Hsm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>has_been_received</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>has_been_received_dec</var><span class="hyp-type"><b>: </b><span>RelDecision has_been_received</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>proper_received</var><span class="hyp-type"><b>: </b><span>has_been_received_prop
  has_been_received s m</span></span></span><br><span><var>has_not_been_received</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message),
  ¬¨ has_been_received s m</span></span><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Hconsistency</var><span class="hyp-type"><b>: </b><span>selected_messages_consistency_prop
  (field_selector input) s m</span></span></span><br><span><var>Hnone</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_no_preloaded_trace
  (field_selector input) s m</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_all_preloaded_traces
  (field_selector input) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ has_been_received s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chke9" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chke9"><span class="nb">apply</span> Hconsistency <span class="kr">in</span> Hsm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>has_been_received</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>has_been_received_dec</var><span class="hyp-type"><b>: </b><span>RelDecision has_been_received</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>proper_received</var><span class="hyp-type"><b>: </b><span>has_been_received_prop
  has_been_received s m</span></span></span><br><span><var>has_not_been_received</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message),
  ¬¨ has_been_received s m</span></span><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Hconsistency</var><span class="hyp-type"><b>: </b><span>selected_messages_consistency_prop
  (field_selector input) s m</span></span></span><br><span><var>Hnone</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_no_preloaded_trace
  (field_selector input) s m</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_some_preloaded_traces
  (field_selector input) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ has_been_received s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkea" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkea"><span class="nb">destruct</span> Hsm <span class="kr">as</span> [<span class="kr">is</span> [tr [Htr Hsm]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>has_been_received</var><span class="hyp-type"><b>: </b><span>state_message_oracle</span></span></span><br><span><var>has_been_received_dec</var><span class="hyp-type"><b>: </b><span>RelDecision has_been_received</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>proper_received</var><span class="hyp-type"><b>: </b><span>has_been_received_prop
  has_been_received s m</span></span></span><br><span><var>has_not_been_received</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">Œª</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message),
  ¬¨ has_been_received s m</span></span><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí message ‚Üí <span class="kt">Prop</span></span></span></span></span><br><span><var>Hconsistency</var><span class="hyp-type"><b>: </b><span>selected_messages_consistency_prop
  (field_selector input) s m</span></span></span><br><span><var>Hnone</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_no_preloaded_trace
  (field_selector input) s m</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state pre_vlsm</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to pre_vlsm <span class="kr">is</span> s tr</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ has_been_received s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">elim</span> (Hnone <span class="kr">is</span> tr Htr).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">sent_messages</span>
  (<span class="nv">s</span> : state vlsm)
  : <span class="kt">Type</span>
  :=
  sig (<span class="kr">fun</span> <span class="nv">m</span> =&gt; selected_message_exists_in_some_preloaded_traces (field_selector output) s m).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkeb" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkeb"><span class="kn">Lemma</span> <span class="nf">sent_messages_proper</span>
  `{HasBeenSentCapability}
  (s : state vlsm)
  (Hs : constrained_state_prop vlsm s)
  (m : message)
  : has_been_sent s m &lt;-&gt; <span class="kr">exists</span> (<span class="nv">m&#39;</span> : sent_messages s), proj1_sig m&#39; = m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent s m ‚Üî (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : sent_messages s, `m&#39; = m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkec" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkec"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent s m ‚Üî (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : sent_messages s, `m&#39; = m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chked" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chked"><span class="nb">unfold</span> sent_messages.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent s m
‚Üî (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : {m : message
          | selected_message_exists_in_some_preloaded_traces
              (field_selector output) s m}, `m&#39; = m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkee" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkee"><span class="nb">rewrite</span> exists_proj1_sig.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent s m
‚Üî selected_message_exists_in_some_preloaded_traces
    (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkef" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkef"><span class="nb">specialize</span> (proper_sent s Hs m) <span class="kr">as</span> Hbs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span>has_been_sent_prop has_been_sent s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent s m
‚Üî selected_message_exists_in_some_preloaded_traces
    (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkf0" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkf0"><span class="nb">unfold</span> has_been_sent_prop, all_traces_have_message_prop <span class="kr">in</span> Hbs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span>has_been_sent s m
‚Üî selected_message_exists_in_all_preloaded_traces
    (field_selector output) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent s m
‚Üî selected_message_exists_in_some_preloaded_traces
    (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkf1" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkf1"><span class="nb">rewrite</span> Hbs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span>has_been_sent s m
‚Üî selected_message_exists_in_all_preloaded_traces
    (field_selector output) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces
  (field_selector output) s m
‚Üî selected_message_exists_in_some_preloaded_traces
    (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkf2" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkf2"><span class="nb">symmetry</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span>has_been_sent s m
‚Üî selected_message_exists_in_all_preloaded_traces
    (field_selector output) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_some_preloaded_traces
  (field_selector output) s m
‚Üî selected_message_exists_in_all_preloaded_traces
    (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> has_been_sent_consistency.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">received_messages</span>
  (<span class="nv">s</span> : state vlsm)
  : <span class="kt">Type</span>
  :=
  sig (<span class="kr">fun</span> <span class="nv">m</span> =&gt; selected_message_exists_in_some_preloaded_traces (field_selector input) s m).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkf3" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkf3"><span class="kn">Lemma</span> <span class="nf">received_messages_proper</span>
  `{HasBeenReceivedCapability}
  (s : state vlsm)
  (Hs : constrained_state_prop vlsm s)
  (m : message)
  : has_been_received s m &lt;-&gt; <span class="kr">exists</span> (<span class="nv">m&#39;</span> : received_messages s), proj1_sig m&#39; = m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received s m
‚Üî (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : received_messages s, `m&#39; = m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkf4" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkf4"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received s m
‚Üî (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : received_messages s, `m&#39; = m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkf5" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkf5"><span class="nb">unfold</span> received_messages.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received s m
‚Üî (<span class="kr">‚àÉ</span> <span class="nv">m&#39;</span> : {m : message
          | selected_message_exists_in_some_preloaded_traces
              (field_selector input) s m}, `m&#39; = m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkf6" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkf6"><span class="nb">rewrite</span> exists_proj1_sig.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received s m
‚Üî selected_message_exists_in_some_preloaded_traces
    (field_selector input) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkf7" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkf7"><span class="nb">specialize</span> (proper_received s Hs m) <span class="kr">as</span> Hbs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span>has_been_received_prop has_been_received s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received s m
‚Üî selected_message_exists_in_some_preloaded_traces
    (field_selector input) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkf8" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkf8"><span class="nb">unfold</span> has_been_received_prop, all_traces_have_message_prop <span class="kr">in</span> Hbs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span>has_been_received s m
‚Üî selected_message_exists_in_all_preloaded_traces
    (field_selector input) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received s m
‚Üî selected_message_exists_in_some_preloaded_traces
    (field_selector input) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkf9" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkf9"><span class="nb">rewrite</span> Hbs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span>has_been_received s m
‚Üî selected_message_exists_in_all_preloaded_traces
    (field_selector input) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces
  (field_selector input) s m
‚Üî selected_message_exists_in_some_preloaded_traces
    (field_selector input) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkfa" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkfa"><span class="nb">symmetry</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>pre_vlsm</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm vlsm</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hbs</var><span class="hyp-type"><b>: </b><span>has_been_received s m
‚Üî selected_message_exists_in_all_preloaded_traces
    (field_selector input) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_some_preloaded_traces
  (field_selector input) s m
‚Üî selected_message_exists_in_all_preloaded_traces
    (field_selector input) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> has_been_received_consistency.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sec_simple</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> oracle_stepwise_props {message} {vlsm} message_selector oracle.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> oracle_no_inits       {message} {vlsm} {message_selector} {oracle}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> oracle_step_update    {message} {vlsm} {message_selector} {oracle}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> has_been_sent_stepwise_prop     {message} {vlsm} _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> has_been_received_stepwise_prop {message} {vlsm} _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[<span class="kn">global</span>] <span class="kn">Hint Mode</span> HasBeenSentCapability - ! : typeclass_instances.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[<span class="kn">global</span>] <span class="kn">Hint Mode</span> HasBeenReceivedCapability - ! : typeclass_instances.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> has_been_sent_stepwise_props     {message} vlsm {_}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> has_been_received_stepwise_props {message} vlsm {_}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> has_been_sent_step_update     {message} {vlsm H} [l s im s&#39; om] _ msg.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> has_been_received_step_update {message} {vlsm H} [l s im s&#39; om] _ msg.</span></span></pre><div class="doc">
  Proving the trace properties from the stepwise properties
  is based on <span class="inlinecode"><span class="id" title="var">oracle_initial_trace_update</span></span>.
  The theorems for <span class="inlinecode"><span class="id" title="var">all_traces_have_message_prop</span></span>
  and <span class="inlinecode"><span class="id" title="var">no_traces_have_message_prop</span></span> are mostly rearranging
  quantifiers to use this lemma, also using <span class="inlinecode"><span class="id" title="var">valid_state_has_trace</span></span>
  to choose a trace reaching the state when one is not given.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sec_trace_from_stepwise</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  (<span class="nv">message</span> : <span class="kt">Type</span>)
  (<span class="nv">vlsm</span> : VLSM message)
  (<span class="nv">selector</span> : message -&gt; transition_item -&gt; <span class="kt">Prop</span>)
  (<span class="nv">oracle</span> : state_message_oracle vlsm)
  (<span class="nv">oracle_props</span> : oracle_stepwise_props selector oracle)
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkfb" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkfb"><span class="kn">Lemma</span> <span class="nf">prove_all_have_message_from_stepwise</span> :
  <span class="kr">forall</span> (<span class="nv">s</span> : state _)
         (<span class="nv">Hs</span> : constrained_state_prop vlsm s)
         (<span class="nv">m</span> : message),
    all_traces_have_message_prop vlsm selector oracle s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop vlsm selector
        oracle s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkfc" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkfc"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop vlsm selector
        oracle s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkfd" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkfd"><span class="nb">intros</span> s Hproto m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">all_traces_have_message_prop vlsm selector oracle s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkfe" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkfe"><span class="nb">unfold</span> all_traces_have_message_prop.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle s m
‚Üî selected_message_exists_in_all_preloaded_traces vlsm
    selector s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chkff" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chkff"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle s m
‚Üí selected_message_exists_in_all_preloaded_traces vlsm
    selector s m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk100" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk100"><hr></label><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces vlsm
  selector s m ‚Üí oracle s m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk101" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk101">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle s m
‚Üí selected_message_exists_in_all_preloaded_traces vlsm
    selector s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk102" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk102"><span class="nb">intros</span> Hholds s0 tr Htr; <span class="nb">revert</span> Htr Hholds.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm vlsm) s0 s tr
‚Üí oracle s m ‚Üí trace_has_message selector m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> oracle_initial_trace_update.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk103" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk103">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces vlsm
  selector s m ‚Üí oracle s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk104" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk104"><span class="nb">intro</span> H_all_traces.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H_all_traces</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_all_preloaded_traces
  vlsm selector s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk105" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk105"><span class="nb">apply</span> valid_state_has_trace <span class="kr">in</span> Hproto <span class="kr">as</span> (s0 &amp; tr &amp; Htr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s, s0</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm vlsm) s0 s
  tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H_all_traces</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_all_preloaded_traces
  vlsm selector s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk106" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk106"><span class="nb">rewrite</span> oracle_initial_trace_update; [| <span class="bp">done</span>..].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s, s0</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm vlsm) s0 s
  tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H_all_traces</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_all_preloaded_traces
  vlsm selector s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message selector m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> H_all_traces <span class="kr">in</span> Htr.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk107" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk107"><span class="kn">Lemma</span> <span class="nf">prove_none_have_message_from_stepwise</span> :
  <span class="kr">forall</span> (<span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm))
         (<span class="nv">Hs</span> : constrained_state_prop vlsm s)
         (<span class="nv">m</span> : message),
    no_traces_have_message_prop vlsm selector (<span class="kr">fun</span> <span class="nv">s</span> <span class="nv">m</span> =&gt; ~ oracle s m) s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">s0</span> : state vlsm) (<span class="nv">m0</span> : message),
           ¬¨ oracle s0 m0) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk108" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk108"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">s0</span> : state vlsm) (<span class="nv">m0</span> : message),
           ¬¨ oracle s0 m0) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk109" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk109"><span class="nb">intros</span> s Hproto m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">no_traces_have_message_prop vlsm selector
  (<span class="kr">Œª</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message), ¬¨ oracle s m) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk10a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk10a"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ oracle s m
‚Üí selected_message_exists_in_no_preloaded_trace vlsm
    selector s m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk10b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk10b"><hr></label><div class="goal-conclusion">selected_message_exists_in_no_preloaded_trace vlsm
  selector s m ‚Üí ¬¨ oracle s m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk10c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk10c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ oracle s m
‚Üí selected_message_exists_in_no_preloaded_trace vlsm
    selector s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk10d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk10d"><span class="nb">intros</span> H_not_holds start tr Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H_not_holds</var><span class="hyp-type"><b>: </b><span>¬¨ oracle s m</span></span></span><br><span><var>start</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm vlsm) start
  s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ trace_has_message selector m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk10e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk10e"><span class="bp">contradict</span> H_not_holds.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>start</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm vlsm) start
  s tr</span></span></span><br><span><var>H_not_holds</var><span class="hyp-type"><b>: </b><span>trace_has_message selector m tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> oracle_initial_trace_update.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk10f" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk10f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_no_preloaded_trace vlsm
  selector s m ‚Üí ¬¨ oracle s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk110" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk110"><span class="nb">intros</span> H_no_traces H_oracle.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H_no_traces</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_no_preloaded_trace
  vlsm selector s m</span></span></span><br><span><var>H_oracle</var><span class="hyp-type"><b>: </b><span>oracle s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk111" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk111"><span class="nb">apply</span> valid_state_has_trace <span class="kr">in</span> Hproto <span class="kr">as</span> (s0 &amp; tr &amp; Htr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s, s0</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm vlsm) s0 s
  tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H_no_traces</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_no_preloaded_trace
  vlsm selector s m</span></span></span><br><span><var>H_oracle</var><span class="hyp-type"><b>: </b><span>oracle s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk112" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk112"><span class="nb">destruct</span> (H_no_traces s0 tr Htr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s, s0</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm vlsm) s0 s
  tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H_no_traces</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_no_preloaded_trace
  vlsm selector s m</span></span></span><br><span><var>H_oracle</var><span class="hyp-type"><b>: </b><span>oracle s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message selector m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> &lt;- oracle_initial_trace_update.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk113" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk113"><span class="kn">Lemma</span> <span class="nf">selected_messages_consistency_prop_from_stepwise</span>
    (<span class="nv">oracle_dec</span> : RelDecision oracle)
    (<span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm))
    (<span class="nv">Hs</span> : constrained_state_prop vlsm s)
    (<span class="nv">m</span> : message)
    : selected_messages_consistency_prop vlsm selector s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_messages_consistency_prop vlsm selector s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk114" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk114"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_messages_consistency_prop vlsm selector s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk115" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk115"><span class="nb">split</span>; [| <span class="bp">by</span> <span class="nb">apply</span> consistency_from_valid_state_proj2].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_some_preloaded_traces vlsm
  selector s m
‚Üí selected_message_exists_in_all_preloaded_traces vlsm
    selector s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk116" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk116"><span class="nb">intro</span> Hsome.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_some_preloaded_traces
  vlsm selector s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces vlsm
  selector s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk117" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk117"><span class="nb">destruct</span> (decide (oracle s m)) <span class="kr">as</span> [Hsm | Hsm].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_some_preloaded_traces
  vlsm selector s m</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>oracle s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces vlsm
  selector s m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk118" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_some_preloaded_traces
  vlsm selector s m</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>¬¨ oracle s m</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk118"><hr></label><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces vlsm
  selector s m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk119" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk119">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_some_preloaded_traces
  vlsm selector s m</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>oracle s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces vlsm
  selector s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> prove_all_have_message_from_stepwise <span class="kr">in</span> Hsm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk11a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk11a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_some_preloaded_traces
  vlsm selector s m</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>¬¨ oracle s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces vlsm
  selector s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk11b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk11b"><span class="nb">apply</span> prove_none_have_message_from_stepwise <span class="kr">in</span> Hsm; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_some_preloaded_traces
  vlsm selector s m</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_no_preloaded_trace
  vlsm selector s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces vlsm
  selector s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk11c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk11c"><span class="nb">destruct</span> Hsome <span class="kr">as</span> [<span class="kr">is</span> [tr [Htr Hmsg]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm vlsm) <span class="kr">is</span> s
  tr</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_has_message selector m tr</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_no_preloaded_trace
  vlsm selector s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces vlsm
  selector s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">elim</span> (Hsm _ _ Htr).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk11d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk11d"><span class="kn">Lemma</span> <span class="nf">in_futures_preserving_oracle_from_stepwise</span> :
  <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : state (preloaded_with_all_messages_vlsm vlsm))
    (<span class="nv">Hfutures</span> : in_futures (preloaded_with_all_messages_vlsm vlsm) s1 s2)
    (<span class="nv">m</span> : message),
    oracle s1 m -&gt; oracle  s2 m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s1</span>
   <span class="nv">s2</span> : state (preloaded_with_all_messages_vlsm vlsm),
  in_futures (preloaded_with_all_messages_vlsm vlsm)
    s1 s2 ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message, oracle s1 m ‚Üí oracle s2 m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk11e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk11e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s1</span>
   <span class="nv">s2</span> : state (preloaded_with_all_messages_vlsm vlsm),
  in_futures (preloaded_with_all_messages_vlsm vlsm)
    s1 s2 ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message, oracle s1 m ‚Üí oracle s2 m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk11f" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk11f"><span class="nb">intros</span> s1 s2 [tr Htr] m Hs1m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_props</var><span class="hyp-type"><b>: </b><span>oracle_stepwise_props selector oracle</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm vlsm) s1 s2
  tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hs1m</var><span class="hyp-type"><b>: </b><span>oracle s1 m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle s2 m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> oracle_partial_trace_update; [| | <span class="nb">right</span>].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sec_trace_from_stepwise</span>.</span></span></pre><div class="doc">
  The stepwise properties are proven from the trace properties
  by considering the empty trace to prove the <span class="inlinecode"><span class="id" title="var">oracle_no_inits</span></span>
  property, and by considering a trace that ends with the given
  <span class="inlinecode"><span class="id" title="var">input_valid_transition</span></span> to prove the <span class="inlinecode"><span class="id" title="var">oracle_step_update</span></span> property.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sec_stepwise_from_trace</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  (<span class="nv">message</span> : <span class="kt">Type</span>)
  (<span class="nv">vlsm</span> : VLSM message)
  (<span class="nv">selector</span> : message -&gt; transition_item -&gt; <span class="kt">Prop</span>)
  (<span class="nv">oracle</span> : state_message_oracle vlsm)
  (<span class="nv">oracle_dec</span> : RelDecision oracle)
  (<span class="nv">Horacle_all_have</span> :
     <span class="kr">forall</span> <span class="nv">s</span> (<span class="nv">Hs</span> : constrained_state_prop vlsm s) <span class="nv">m</span>,
      all_traces_have_message_prop vlsm selector oracle s m)
  (<span class="nv">Hnot_oracle_none_have</span> :
     <span class="kr">forall</span> <span class="nv">s</span> (<span class="nv">Hs</span> : constrained_state_prop vlsm s) <span class="nv">m</span>,
       no_traces_have_message_prop vlsm selector (<span class="kr">fun</span> <span class="nv">m</span> <span class="nv">s</span> =&gt; ~ oracle m s) s m).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk120" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk120"><span class="kn">Lemma</span> <span class="nf">oracle_no_inits_from_trace</span> :
  <span class="kr">forall</span> (<span class="nv">s</span> : state vlsm), initial_state_prop vlsm s -&gt;
                           <span class="kr">forall</span> <span class="nv">m</span>, ~ oracle s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state vlsm,
  initial_state_prop s ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message, ¬¨ oracle s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk121" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk121"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state vlsm,
  initial_state_prop s ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message, ¬¨ oracle s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk122" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk122"><span class="nb">intros</span> s Hinit m Horacle.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk123" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk123"><span class="nb">assert</span> (Hproto : constrained_state_prop vlsm s)
    <span class="bp">by</span> (<span class="nb">apply</span> initial_state_is_valid; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle s m</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk124" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk124"><span class="nb">apply</span> Horacle_all_have <span class="kr">in</span> Horacle; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_all_preloaded_traces
  vlsm selector s m</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk125" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk125"><span class="nb">specialize</span> (Horacle s nil).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm vlsm) s
  s [] ‚Üí trace_has_message selector m []</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk126" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk126"><span class="nb">eapply</span> Exists_nil; <span class="nb">apply</span> Horacle; <span class="nb">clear</span> Horacle.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm vlsm) s s []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">split</span>; [<span class="nb">constructor</span> |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk127" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk127"><span class="kn">Lemma</span> <span class="nf">examine_one_trace</span> :
  <span class="kr">forall</span> <span class="nv">is</span> <span class="nv">s</span> <span class="nv">tr</span>,
    finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr -&gt;
  <span class="kr">forall</span> <span class="nv">m</span>,
    oracle s m &lt;-&gt;
    trace_has_message selector m tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">is</span>
   <span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">tr</span> : list transition_item),
  finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      oracle s m ‚Üî trace_has_message selector m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk128" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk128"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">is</span>
   <span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">tr</span> : list transition_item),
  finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      oracle s m ‚Üî trace_has_message selector m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk129" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk129"><span class="nb">intros</span> <span class="kr">is</span> s tr Htr m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle s m ‚Üî trace_has_message selector m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk12a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk12a"><span class="nb">assert</span> (constrained_state_prop vlsm s)
    <span class="bp">by</span> (<span class="nb">red</span> <span class="kr">in</span> Htr; <span class="nb">apply</span> valid_trace_last_pstate <span class="kr">in</span> Htr; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle s m ‚Üî trace_has_message selector m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk12b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk12b"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle s m ‚Üí trace_has_message selector m tr</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk12c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk12c"><hr></label><div class="goal-conclusion">trace_has_message selector m tr ‚Üí oracle s m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk12d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk12d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle s m ‚Üí trace_has_message selector m tr</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk12e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk12e"><span class="nb">intros</span> Horacle.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracle s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message selector m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk12f" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk12f"><span class="nb">apply</span> Horacle_all_have <span class="kr">in</span> Horacle; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_all_preloaded_traces
  vlsm selector s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message selector m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">specialize</span> (Horacle <span class="kr">is</span> tr Htr).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk130" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk130">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message selector m tr ‚Üí oracle s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk131" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk131"><span class="nb">intro</span> Hexists.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>Hexists</var><span class="hyp-type"><b>: </b><span>trace_has_message selector m tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk132" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk132"><span class="nb">apply</span> dec_stable.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>Hexists</var><span class="hyp-type"><b>: </b><span>trace_has_message selector m tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ ¬¨ oracle s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk133" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk133"><span class="nb">intro</span> Hnot.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>Hexists</var><span class="hyp-type"><b>: </b><span>trace_has_message selector m tr</span></span></span><br><span><var>Hnot</var><span class="hyp-type"><b>: </b><span>¬¨ oracle s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk134" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk134"><span class="nb">apply</span> Hnot_oracle_none_have <span class="kr">in</span> Hnot; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>Hexists</var><span class="hyp-type"><b>: </b><span>trace_has_message selector m tr</span></span></span><br><span><var>Hnot</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_no_preloaded_trace
  vlsm selector s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk135" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk135"><span class="nb">rewrite</span> &lt;- selected_message_exists_preloaded_not_some_iff_no <span class="kr">in</span> Hnot.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>Hexists</var><span class="hyp-type"><b>: </b><span>trace_has_message selector m tr</span></span></span><br><span><var>Hnot</var><span class="hyp-type"><b>: </b><span>¬¨ selected_message_exists_in_some_preloaded_traces
    vlsm selector s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk136" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk136"><span class="nb">apply</span> Hnot.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>Hexists</var><span class="hyp-type"><b>: </b><span>trace_has_message selector m tr</span></span></span><br><span><var>Hnot</var><span class="hyp-type"><b>: </b><span>¬¨ selected_message_exists_in_some_preloaded_traces
    vlsm selector s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_some_preloaded_traces vlsm
  selector s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="kr">exists</span> <span class="nv">is</span>, tr, Htr.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk137" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk137"><span class="kn">Lemma</span> <span class="nf">oracle_step_property_from_trace</span> :
     <span class="kr">forall</span> <span class="nv">l</span> <span class="nv">s</span> <span class="nv">im</span> <span class="nv">s&#39;</span> <span class="nv">om</span>,
       input_constrained_transition vlsm l (s, im) (s&#39;, om) -&gt;
       <span class="kr">forall</span> <span class="nv">msg</span>, oracle s&#39; msg
                   &lt;-&gt; (selector msg {| l := l; input := im; destination := s&#39;; output := om |}
                        \/ oracle s msg).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">im</span> : option message) (<span class="nv">s&#39;</span> : state
                                (preloaded_with_all_messages_vlsm
                                   vlsm)) (<span class="nv">om</span> : option
                                                 message),
  input_constrained_transition vlsm l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      oracle s&#39; msg
      ‚Üî selector msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |} ‚à® oracle s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk138" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk138"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">im</span> : option message) (<span class="nv">s&#39;</span> : state
                                (preloaded_with_all_messages_vlsm
                                   vlsm)) (<span class="nv">om</span> : option
                                                 message),
  input_constrained_transition vlsm l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      oracle s&#39; msg
      ‚Üî selector msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |} ‚à® oracle s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk139" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk139"><span class="nb">intros</span> l s im s&#39; om Htrans msg.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Htrans</var><span class="hyp-type"><b>: </b><span>input_constrained_transition vlsm l (
  s, im) (s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle s&#39; msg
‚Üî selector msg
    {|
      l := l;
      input := im;
      destination := s&#39;;
      output := om
    |} ‚à® oracle s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk13a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk13a"><span class="nb">rename</span> Htrans <span class="nb">into</span> Htrans&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Htrans'</var><span class="hyp-type"><b>: </b><span>input_constrained_transition vlsm l (
  s, im) (s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle s&#39; msg
‚Üî selector msg
    {|
      l := l;
      input := im;
      destination := s&#39;;
      output := om
    |} ‚à® oracle s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk13b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk13b"><span class="nb">pose proof</span> Htrans&#39; <span class="kr">as</span> [[Hproto_s [Hproto_m Hvalid]] Htrans].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Htrans'</var><span class="hyp-type"><b>: </b><span>input_constrained_transition vlsm l (
  s, im) (s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hproto_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm vlsm) s</span></span></span><br><span><var>Hproto_m</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (preloaded_with_all_messages_vlsm vlsm)
  im</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>valid l (s, im)</span></span></span><br><span><var>Htrans</var><span class="hyp-type"><b>: </b><span>transition l (s, im) = (s&#39;, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle s&#39; msg
‚Üî selector msg
    {|
      l := l;
      input := im;
      destination := s&#39;;
      output := om
    |} ‚à® oracle s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk13c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk13c"><span class="nb">pose proof</span> (valid_state_has_trace _ _ Hproto_s)
    <span class="kr">as</span> [<span class="kr">is</span> [tr [Htr Hinit]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Htrans'</var><span class="hyp-type"><b>: </b><span>input_constrained_transition vlsm l (
  s, im) (s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hproto_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm vlsm) s</span></span></span><br><span><var>Hproto_m</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (preloaded_with_all_messages_vlsm vlsm)
  im</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>valid l (s, im)</span></span></span><br><span><var>Htrans</var><span class="hyp-type"><b>: </b><span>transition l (s, im) = (s&#39;, om)</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm vlsm) <span class="kr">is</span> s
  tr</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle s&#39; msg
‚Üî selector msg
    {|
      l := l;
      input := im;
      destination := s&#39;;
      output := om
    |} ‚à® oracle s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk13d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk13d"><span class="nb">pose proof</span> (Htr&#39; := extend_right_finite_trace_from_to _ Htr Htrans&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Htrans'</var><span class="hyp-type"><b>: </b><span>input_constrained_transition vlsm l (
  s, im) (s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hproto_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm vlsm) s</span></span></span><br><span><var>Hproto_m</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (preloaded_with_all_messages_vlsm vlsm)
  im</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>valid l (s, im)</span></span></span><br><span><var>Htrans</var><span class="hyp-type"><b>: </b><span>transition l (s, im) = (s&#39;, om)</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm vlsm) <span class="kr">is</span> s
  tr</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>Htr'</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm vlsm) <span class="kr">is</span> s&#39;
  (tr ++
   [{|
      l := l;
      input := im;
      destination := s&#39;;
      output := om
    |}])</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle s&#39; msg
‚Üî selector msg
    {|
      l := l;
      input := im;
      destination := s&#39;;
      output := om
    |} ‚à® oracle s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk13e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk13e"><span class="nb">rewrite</span> (examine_one_trace _ _ _ (conj Htr Hinit) msg).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Htrans'</var><span class="hyp-type"><b>: </b><span>input_constrained_transition vlsm l (
  s, im) (s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hproto_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm vlsm) s</span></span></span><br><span><var>Hproto_m</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (preloaded_with_all_messages_vlsm vlsm)
  im</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>valid l (s, im)</span></span></span><br><span><var>Htrans</var><span class="hyp-type"><b>: </b><span>transition l (s, im) = (s&#39;, om)</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm vlsm) <span class="kr">is</span> s
  tr</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>Htr'</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm vlsm) <span class="kr">is</span> s&#39;
  (tr ++
   [{|
      l := l;
      input := im;
      destination := s&#39;;
      output := om
    |}])</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle s&#39; msg
‚Üî selector msg
    {|
      l := l;
      input := im;
      destination := s&#39;;
      output := om
    |} ‚à® trace_has_message selector msg tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk13f" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk13f"><span class="nb">rewrite</span> (examine_one_trace _ _ _ (conj Htr&#39; Hinit) msg).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Htrans'</var><span class="hyp-type"><b>: </b><span>input_constrained_transition vlsm l (
  s, im) (s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hproto_s</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm vlsm) s</span></span></span><br><span><var>Hproto_m</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop
  (preloaded_with_all_messages_vlsm vlsm)
  im</span></span></span><br><span><var>Hvalid</var><span class="hyp-type"><b>: </b><span>valid l (s, im)</span></span></span><br><span><var>Htrans</var><span class="hyp-type"><b>: </b><span>transition l (s, im) = (s&#39;, om)</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm vlsm) <span class="kr">is</span> s
  tr</span></span></span><br><span><var>Hinit</var><span class="hyp-type"><b>: </b><span>initial_state_prop <span class="kr">is</span></span></span></span><br><span><var>Htr'</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm vlsm) <span class="kr">is</span> s&#39;
  (tr ++
   [{|
      l := l;
      input := im;
      destination := s&#39;;
      output := om
    |}])</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message selector msg
  (tr ++
   [{|
      l := l;
      input := im;
      destination := s&#39;;
      output := om
    |}])
‚Üî selector msg
    {|
      l := l;
      input := im;
      destination := s&#39;;
      output := om
    |} ‚à® trace_has_message selector msg tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk140" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk140"><span class="nb">clear</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message selector msg
  (tr ++
   [{|
      l := l;
      input := im;
      destination := s&#39;;
      output := om
    |}])
‚Üî selector msg
    {|
      l := l;
      input := im;
      destination := s&#39;;
      output := om
    |} ‚à® trace_has_message selector msg tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk141" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk141"><span class="kp">progress</span> <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message selector msg
  (tr ++
   [{|
      l := l;
      input := im;
      destination := s&#39;;
      output := om
    |}])
‚Üî selector msg
    {|
      l := l;
      input := im;
      destination := s&#39;;
      output := om
    |} ‚à® trace_has_message selector msg tr</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk142" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk142"><span class="nb">unfold</span> trace_has_message.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Exists (selector msg)
  (tr ++
   [{|
      l := l;
      input := im;
      destination := s&#39;;
      output := om
    |}])
‚Üî selector msg
    {|
      l := l;
      input := im;
      destination := s&#39;;
      output := om
    |} ‚à® Exists (selector msg) tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk143" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk143"><span class="nb">rewrite</span> Exists_app, Exists_cons, Exists_nil.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Exists (selector msg) tr
‚à® selector msg
    {|
      l := l;
      input := im;
      destination := s&#39;;
      output := om
    |} ‚à® <span class="kt">False</span>
‚Üî selector msg
    {|
      l := l;
      input := im;
      destination := s&#39;;
      output := om
    |} ‚à® Exists (selector msg) tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk144" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk144"><span class="kn">Lemma</span> <span class="nf">stepwise_props_from_trace</span> : oracle_stepwise_props selector oracle.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle_stepwise_props selector oracle</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk145" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk145"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle_stepwise_props selector oracle</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk146" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk146"><span class="nb">constructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state vlsm,
  initial_state_prop s ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message, ¬¨ oracle s m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk147" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk147"><hr></label><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">om</span> : option message),
  input_constrained_transition vlsm l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      oracle s&#39; msg
      ‚Üî selector msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |} ‚à® oracle s msg</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk148" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk148">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state vlsm,
  initial_state_prop s ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message, ¬¨ oracle s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> oracle_no_inits_from_trace.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk149" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk149">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle</var><span class="hyp-type"><b>: </b><span>state_message_oracle vlsm</span></span></span><br><span><var>oracle_dec</var><span class="hyp-type"><b>: </b><span>RelDecision oracle</span></span></span><br><span><var>Horacle_all_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop
        vlsm selector oracle s m</span></span></span><br><span><var>Hnot_oracle_none_have</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           vlsm),
  constrained_state_prop vlsm
    s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop
        vlsm selector
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) 
           (<span class="nv">s0</span> : message),
           ¬¨ oracle m0 s0) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">im</span> : option message) (<span class="nv">s&#39;</span> : state
                                (preloaded_with_all_messages_vlsm
                                   vlsm)) (<span class="nv">om</span> : option
                                                 message),
  input_constrained_transition vlsm l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      oracle s&#39; msg
      ‚Üî selector msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |} ‚à® oracle s msg</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> oracle_step_property_from_trace.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sec_stepwise_from_trace</span>.</span></span></pre><div class="doc">
<a id="lab5"></a><h2 class="section">Stepwise view of <span class="inlinecode"><span class="id" title="var">HasBeenSentCapability</span></span></h2>
<div class="paragraph"> </div>

  This reduces the proof obligations in <span class="inlinecode"><span class="id" title="var">HasBeenSentCapability</span></span>
  to proving the stepwise properties of <span class="inlinecode"><span class="id" title="var">oracle_stepwise_props</span></span>.
  <span class="inlinecode"><span class="id" title="var">has_been_step_stepwise_props</span></span> is a specialization of <span class="inlinecode"><span class="id" title="var">oracle_stepwise_props</span></span>
  to the right <code>message_selector</code>.

<div class="paragraph"> </div>

  There are also lemmas for accessing the stepwise properties about
  a <span class="inlinecode"><span class="id" title="var">has_been_sent</span></span> predicate given an instance of <span class="inlinecode"><span class="id" title="var">HasBeenSentCapability</span></span>, to allow using
  <span class="inlinecode"><span class="id" title="var">HasBeenSentCapability_from_stepwise</span></span> to define a <span class="inlinecode"><span class="id" title="var">HasBeenSentCapability</span></span>
  for composite VLSMs, or for proofs (e.g, about invariants) where
  these are more convenient.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp"><span class="c">(* TODO - move up with HasBeenSent *)</span>

</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk14a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk14a"><span class="kn">Lemma</span> <span class="nf">preloaded_has_been_sent_stepwise_props</span>
      [message : <span class="kt">Type</span>]
      (vlsm : VLSM message)
      `{HasBeenSentCapability message vlsm}
      (seed : message -&gt; <span class="kt">Prop</span>)
      (X := preloaded_vlsm vlsm seed) :
  has_been_sent_stepwise_prop (vlsm := X) (has_been_sent vlsm).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>preloaded_vlsm vlsm seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent_stepwise_prop (has_been_sent vlsm)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk14b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk14b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>preloaded_vlsm vlsm seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent_stepwise_prop (has_been_sent vlsm)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk14c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk14c"><span class="nb">destruct</span> (has_been_sent_stepwise_props vlsm); <span class="nb">cbn</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>preloaded_vlsm vlsm seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>oracle_no_inits0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state vlsm,
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      ¬¨ has_been_sent vlsm s m</span></span></span><br><span><var>oracle_step_update0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label vlsm) (<span class="nv">s</span> : 
                    state vlsm) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state vlsm) (<span class="nv">om</span> : 
                     option
                      message),
  input_constrained_transition
    vlsm l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      has_been_sent vlsm s&#39; msg
      ‚Üî om = Some msg
        ‚à® has_been_sent vlsm s
            msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent_stepwise_prop (has_been_sent vlsm)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk14d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk14d"><span class="nb">split</span>; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>preloaded_vlsm vlsm seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>oracle_no_inits0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state vlsm,
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      ¬¨ has_been_sent vlsm s m</span></span></span><br><span><var>oracle_step_update0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label vlsm) (<span class="nv">s</span> : 
                    state vlsm) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state vlsm) (<span class="nv">om</span> : 
                     option
                      message),
  input_constrained_transition
    vlsm l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      has_been_sent vlsm s&#39; msg
      ‚Üî om = Some msg
        ‚à® has_been_sent vlsm s
            msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">s</span> : state (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">im</span> : option message) (<span class="nv">s&#39;</span> : state
                                (preloaded_with_all_messages_vlsm
                                   X)) (<span class="nv">om</span> : option
                                               message),
  input_constrained_transition X l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      has_been_sent vlsm s&#39; msg
      ‚Üî field_selector output msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |} ‚à® has_been_sent vlsm s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk14e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk14e"><span class="nb">cbn</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>preloaded_vlsm vlsm seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>oracle_no_inits0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state vlsm,
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      ¬¨ has_been_sent vlsm s m</span></span></span><br><span><var>oracle_step_update0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label vlsm) (<span class="nv">s</span> : 
                    state vlsm) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state vlsm) (<span class="nv">om</span> : 
                     option
                      message),
  input_constrained_transition
    vlsm l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      has_been_sent vlsm s&#39; msg
      ‚Üî om = Some msg
        ‚à® has_been_sent vlsm s
            msg</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>input_constrained_transition X l (s, im) (s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent vlsm s&#39; msg
‚Üî om = Some msg ‚à® has_been_sent vlsm s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk14f" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk14f"><span class="nb">eapply</span> oracle_step_update0, VLSM_incl_input_valid_transition; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>preloaded_vlsm vlsm seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>oracle_no_inits0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state vlsm,
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      ¬¨ has_been_sent vlsm s m</span></span></span><br><span><var>oracle_step_update0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label vlsm) (<span class="nv">s</span> : 
                    state vlsm) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state vlsm) (<span class="nv">om</span> : 
                     option
                      message),
  input_constrained_transition
    vlsm l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      has_been_sent vlsm s&#39; msg
      ‚Üî om = Some msg
        ‚à® has_been_sent vlsm s
            msg</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>input_constrained_transition X l (s, im) (s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl_part
  (preloaded_vlsm_machine X (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>))
  (preloaded_vlsm_machine vlsm (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> basic_VLSM_strong_incl; <span class="kp">do</span> <span class="mi">2</span> <span class="nb">red</span>; <span class="nb">cbn</span>; itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk150" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk150">#[export] <span class="kn">Instance</span> <span class="nf">preloaded_HasBeenSentCapability</span>
      [message : <span class="kt">Type</span>]
      (vlsm : VLSM message)
      `{HasBeenSentCapability message vlsm}
      (seed : message -&gt; <span class="kt">Prop</span>) :
  HasBeenSentCapability (preloaded_vlsm vlsm seed).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">HasBeenSentCapability (preloaded_vlsm vlsm seed)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk151" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk151"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">HasBeenSentCapability (preloaded_vlsm vlsm seed)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk152" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk152"><span class="nb">econstructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RelDecision <span class="nl">?has_been_sent</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk153" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk153"><hr></label><div class="goal-conclusion">has_been_sent_stepwise_prop <span class="nl">?has_been_sent</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk154" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk154">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RelDecision <span class="nl">?has_been_sent</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (has_been_sent_dec vlsm).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk155" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk155">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent_stepwise_prop (has_been_sent vlsm)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> preloaded_has_been_sent_stepwise_props.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk156" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk156"><span class="kn">Lemma</span> <span class="nf">constrained_has_been_sent_stepwise_props</span>
  `(X : VLSM message)
  `{HasBeenSentCapability message X}
  (constraint : label X -&gt; state X * option message -&gt; <span class="kt">Prop</span>) :
  has_been_sent_stepwise_prop (vlsm := constrained_vlsm X constraint) (has_been_sent X).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent_stepwise_prop (has_been_sent X)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk157" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk157"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent_stepwise_prop (has_been_sent X)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk158" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk158"><span class="nb">destruct</span> (has_been_sent_stepwise_props X); <span class="nb">cbn</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle_no_inits0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state X,
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      ¬¨ has_been_sent X s m</span></span></span><br><span><var>oracle_step_update0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label X) (<span class="nv">s</span> : state X) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state X) (<span class="nv">om</span> : 
                  option message),
  input_constrained_transition X
    l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      has_been_sent X s&#39; msg
      ‚Üî om = Some msg
        ‚à® has_been_sent X s msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent_stepwise_prop (has_been_sent X)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk159" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk159"><span class="nb">split</span>; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle_no_inits0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state X,
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      ¬¨ has_been_sent X s m</span></span></span><br><span><var>oracle_step_update0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label X) (<span class="nv">s</span> : state X) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state X) (<span class="nv">om</span> : 
                  option message),
  input_constrained_transition X
    l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      has_been_sent X s&#39; msg
      ‚Üî om = Some msg
        ‚à® has_been_sent X s msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label
         (preloaded_with_all_messages_vlsm
            (constrained_vlsm X constraint))) (<span class="nv">s</span> : 
                                               state
                                                 (preloaded_with_all_messages_vlsm
                                                 (constrained_vlsm
                                                 X
                                                 constraint))) 
  (<span class="nv">im</span> : option message) (<span class="nv">s&#39;</span> : state
                                (preloaded_with_all_messages_vlsm
                                   (constrained_vlsm X
                                      constraint))) 
  (<span class="nv">om</span> : option message),
  input_constrained_transition
    (constrained_vlsm X constraint) l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      has_been_sent X s&#39; msg
      ‚Üî field_selector output msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |} ‚à® has_been_sent X s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk15a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk15a"><span class="nb">cbn</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle_no_inits0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state X,
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      ¬¨ has_been_sent X s m</span></span></span><br><span><var>oracle_step_update0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label X) (<span class="nv">s</span> : state X) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state X) (<span class="nv">om</span> : 
                  option message),
  input_constrained_transition X
    l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      has_been_sent X s&#39; msg
      ‚Üî om = Some msg
        ‚à® has_been_sent X s msg</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label X</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>input_constrained_transition
  (constrained_vlsm X constraint) l (
  s, im) (s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent X s&#39; msg
‚Üî om = Some msg ‚à® has_been_sent X s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk15b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk15b"><span class="nb">eapply</span> oracle_step_update0, VLSM_incl_input_valid_transition; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle_no_inits0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state X,
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      ¬¨ has_been_sent X s m</span></span></span><br><span><var>oracle_step_update0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label X) (<span class="nv">s</span> : state X) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state X) (<span class="nv">om</span> : 
                  option message),
  input_constrained_transition X
    l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      has_been_sent X s&#39; msg
      ‚Üî om = Some msg
        ‚à® has_been_sent X s msg</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label X</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>input_constrained_transition
  (constrained_vlsm X constraint) l (
  s, im) (s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl_part
  (preloaded_vlsm_machine
     (constrained_vlsm X constraint)
     (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>))
  (preloaded_vlsm_machine X (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> basic_VLSM_strong_incl; <span class="kp">do</span> <span class="mi">2</span> <span class="nb">red</span>; <span class="nb">cbn</span>; itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk15c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk15c">#[export] <span class="kn">Instance</span> <span class="nf">constrained_vlsm_HasBeenSentCapability</span>
  `(X : VLSM message) `{HasBeenSentCapability message X}
  (constraint : label X -&gt; state X * option message -&gt; <span class="kt">Prop</span>)
  : HasBeenSentCapability (constrained_vlsm X constraint).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">HasBeenSentCapability (constrained_vlsm X constraint)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk15d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk15d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">HasBeenSentCapability (constrained_vlsm X constraint)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk15e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk15e"><span class="nb">econstructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RelDecision <span class="nl">?has_been_sent</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk15f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk15f"><hr></label><div class="goal-conclusion">has_been_sent_stepwise_prop <span class="nl">?has_been_sent</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk160" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk160">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RelDecision <span class="nl">?has_been_sent</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (has_been_sent_dec X).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk161" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk161">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent_stepwise_prop (has_been_sent X)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> constrained_has_been_sent_stepwise_props.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk162" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk162"><span class="kn">Lemma</span> <span class="nf">has_been_sent_examine_one_trace</span>
  `{HasBeenSentCapability message vlsm} :
  <span class="kr">forall</span> <span class="nv">is</span> <span class="nv">s</span> <span class="nv">tr</span>,
    finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr -&gt;
  <span class="kr">forall</span> <span class="nv">m</span>,
    has_been_sent vlsm s m &lt;-&gt;
    trace_has_message (field_selector output) m tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">is</span>
   <span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">tr</span> : list transition_item),
  finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      has_been_sent vlsm s m
      ‚Üî trace_has_message (field_selector output) m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk163" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk163"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">is</span>
   <span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">tr</span> : list transition_item),
  finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      has_been_sent vlsm s m
      ‚Üî trace_has_message (field_selector output) m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk164" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk164"><span class="nb">apply</span> examine_one_trace.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RelDecision (has_been_sent vlsm)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk165" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk165"><hr></label><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop vlsm
        (field_selector output) 
        (has_been_sent vlsm) s m</div></blockquote><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk166" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk166"><hr></label><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop vlsm
        (field_selector output)
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) (<span class="nv">s0</span> : message),
           ¬¨ has_been_sent vlsm m0 s0) s m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk167" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk167">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RelDecision (has_been_sent vlsm)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> has_been_sent_dec.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk168" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk168">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop vlsm
        (field_selector output) (has_been_sent vlsm) s
        m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> proper_sent.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk169" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk169">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop vlsm
        (field_selector output)
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) (<span class="nv">s0</span> : message),
           ¬¨ has_been_sent vlsm m0 s0) s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> proper_not_sent.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk16a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk16a"><span class="kn">Lemma</span> <span class="nf">preloaded_has_been_received_stepwise_props</span>
      {<span class="nv">message</span> : <span class="kt">Type</span>}
      (<span class="nv">vlsm</span> : VLSM message)
      `{HasBeenReceivedCapability message vlsm}
      (seed : message -&gt; <span class="kt">Prop</span>)
      (X := preloaded_vlsm vlsm seed) :
  has_been_received_stepwise_prop (vlsm := X) (has_been_received vlsm).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>preloaded_vlsm vlsm seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received_stepwise_prop
  (has_been_received vlsm)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk16b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk16b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>preloaded_vlsm vlsm seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received_stepwise_prop
  (has_been_received vlsm)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk16c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk16c"><span class="nb">destruct</span> (has_been_received_stepwise_props vlsm); <span class="nb">cbn</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>preloaded_vlsm vlsm seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>oracle_no_inits0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state vlsm,
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      ¬¨ has_been_received vlsm s m</span></span></span><br><span><var>oracle_step_update0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label vlsm) (<span class="nv">s</span> : 
                    state vlsm) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state vlsm) (<span class="nv">om</span> : 
                     option
                      message),
  input_constrained_transition
    vlsm l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      has_been_received vlsm s&#39;
        msg
      ‚Üî im = Some msg
        ‚à® has_been_received vlsm
            s msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received_stepwise_prop
  (has_been_received vlsm)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk16d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk16d"><span class="nb">split</span>; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>preloaded_vlsm vlsm seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>oracle_no_inits0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state vlsm,
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      ¬¨ has_been_received vlsm s m</span></span></span><br><span><var>oracle_step_update0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label vlsm) (<span class="nv">s</span> : 
                    state vlsm) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state vlsm) (<span class="nv">om</span> : 
                     option
                      message),
  input_constrained_transition
    vlsm l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      has_been_received vlsm s&#39;
        msg
      ‚Üî im = Some msg
        ‚à® has_been_received vlsm
            s msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">s</span> : state (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">im</span> : option message) (<span class="nv">s&#39;</span> : state
                                (preloaded_with_all_messages_vlsm
                                   X)) (<span class="nv">om</span> : option
                                               message),
  input_constrained_transition X l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      has_been_received vlsm s&#39; msg
      ‚Üî field_selector input msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |} ‚à® has_been_received vlsm s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk16e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk16e"><span class="nb">cbn</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>preloaded_vlsm vlsm seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>oracle_no_inits0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state vlsm,
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      ¬¨ has_been_received vlsm s m</span></span></span><br><span><var>oracle_step_update0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label vlsm) (<span class="nv">s</span> : 
                    state vlsm) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state vlsm) (<span class="nv">om</span> : 
                     option
                      message),
  input_constrained_transition
    vlsm l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      has_been_received vlsm s&#39;
        msg
      ‚Üî im = Some msg
        ‚à® has_been_received vlsm
            s msg</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>input_constrained_transition X l (s, im) (s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received vlsm s&#39; msg
‚Üî im = Some msg ‚à® has_been_received vlsm s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk16f" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk16f"><span class="nb">eapply</span> oracle_step_update0, VLSM_incl_input_valid_transition; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>preloaded_vlsm vlsm seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>oracle_no_inits0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state vlsm,
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      ¬¨ has_been_received vlsm s m</span></span></span><br><span><var>oracle_step_update0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label vlsm) (<span class="nv">s</span> : 
                    state vlsm) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state vlsm) (<span class="nv">om</span> : 
                     option
                      message),
  input_constrained_transition
    vlsm l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      has_been_received vlsm s&#39;
        msg
      ‚Üî im = Some msg
        ‚à® has_been_received vlsm
            s msg</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>input_constrained_transition X l (s, im) (s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl_part
  (preloaded_vlsm_machine X (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>))
  (preloaded_vlsm_machine vlsm (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> basic_VLSM_strong_incl; <span class="kp">do</span> <span class="mi">2</span> <span class="nb">red</span>; <span class="nb">cbn</span>; itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk170" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk170">#[export] <span class="kn">Instance</span> <span class="nf">preloaded_HasBeenReceivedCapability</span>
      {<span class="nv">message</span> : <span class="kt">Type</span>}
      (<span class="nv">vlsm</span> : VLSM message)
      `{HasBeenReceivedCapability message vlsm}
      (seed : message -&gt; <span class="kt">Prop</span>) :
  HasBeenReceivedCapability (preloaded_vlsm vlsm seed).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">HasBeenReceivedCapability (preloaded_vlsm vlsm seed)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk171" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk171"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">HasBeenReceivedCapability (preloaded_vlsm vlsm seed)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk172" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk172"><span class="nb">econstructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RelDecision <span class="nl">?has_been_received</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk173" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk173"><hr></label><div class="goal-conclusion">has_been_received_stepwise_prop <span class="nl">?has_been_received</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk174" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk174">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RelDecision <span class="nl">?has_been_received</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (has_been_received_dec vlsm).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk175" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk175">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received_stepwise_prop
  (has_been_received vlsm)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> preloaded_has_been_received_stepwise_props.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk176" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk176"><span class="kn">Lemma</span> <span class="nf">constrained_has_been_received_stepwise_props</span>
  `(X : VLSM message)
  `{HasBeenReceivedCapability message X}
  (constraint : label X -&gt; state X * option message -&gt; <span class="kt">Prop</span>) :
  has_been_received_stepwise_prop (vlsm := constrained_vlsm X constraint) (has_been_received X).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received_stepwise_prop (has_been_received X)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk177" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk177"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received_stepwise_prop (has_been_received X)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk178" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk178"><span class="nb">destruct</span> (has_been_received_stepwise_props X); <span class="nb">cbn</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle_no_inits0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state X,
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      ¬¨ has_been_received X s m</span></span></span><br><span><var>oracle_step_update0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label X) (<span class="nv">s</span> : state X) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state X) (<span class="nv">om</span> : 
                  option message),
  input_constrained_transition X
    l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      has_been_received X s&#39; msg
      ‚Üî im = Some msg
        ‚à® has_been_received X s
            msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received_stepwise_prop (has_been_received X)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk179" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk179"><span class="nb">split</span>; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle_no_inits0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state X,
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      ¬¨ has_been_received X s m</span></span></span><br><span><var>oracle_step_update0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label X) (<span class="nv">s</span> : state X) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state X) (<span class="nv">om</span> : 
                  option message),
  input_constrained_transition X
    l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      has_been_received X s&#39; msg
      ‚Üî im = Some msg
        ‚à® has_been_received X s
            msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label
         (preloaded_with_all_messages_vlsm
            (constrained_vlsm X constraint))) (<span class="nv">s</span> : 
                                               state
                                                 (preloaded_with_all_messages_vlsm
                                                 (constrained_vlsm
                                                 X
                                                 constraint))) 
  (<span class="nv">im</span> : option message) (<span class="nv">s&#39;</span> : state
                                (preloaded_with_all_messages_vlsm
                                   (constrained_vlsm X
                                      constraint))) 
  (<span class="nv">om</span> : option message),
  input_constrained_transition
    (constrained_vlsm X constraint) l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      has_been_received X s&#39; msg
      ‚Üî field_selector input msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |} ‚à® has_been_received X s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk17a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk17a"><span class="nb">cbn</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle_no_inits0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state X,
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      ¬¨ has_been_received X s m</span></span></span><br><span><var>oracle_step_update0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label X) (<span class="nv">s</span> : state X) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state X) (<span class="nv">om</span> : 
                  option message),
  input_constrained_transition X
    l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      has_been_received X s&#39; msg
      ‚Üî im = Some msg
        ‚à® has_been_received X s
            msg</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label X</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>input_constrained_transition
  (constrained_vlsm X constraint) l (
  s, im) (s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received X s&#39; msg
‚Üî im = Some msg ‚à® has_been_received X s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk17b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk17b"><span class="nb">eapply</span> oracle_step_update0, VLSM_incl_input_valid_transition; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracle_no_inits0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state X,
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      ¬¨ has_been_received X s m</span></span></span><br><span><var>oracle_step_update0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label X) (<span class="nv">s</span> : state X) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state X) (<span class="nv">om</span> : 
                  option message),
  input_constrained_transition X
    l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      has_been_received X s&#39; msg
      ‚Üî im = Some msg
        ‚à® has_been_received X s
            msg</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label X</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>input_constrained_transition
  (constrained_vlsm X constraint) l (
  s, im) (s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl_part
  (preloaded_vlsm_machine
     (constrained_vlsm X constraint)
     (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>))
  (preloaded_vlsm_machine X (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> basic_VLSM_strong_incl; <span class="kp">do</span> <span class="mi">2</span> <span class="nb">red</span>; <span class="nb">cbn</span>; itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk17c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk17c">#[export] <span class="kn">Instance</span> <span class="nf">constrained_vlsm_HasBeenReceivedCapability</span>
  `(X : VLSM message) `{HasBeenReceivedCapability message X}
  (constraint : label X -&gt; state X * option message -&gt; <span class="kt">Prop</span>)
  : HasBeenReceivedCapability (constrained_vlsm X constraint).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">HasBeenReceivedCapability
  (constrained_vlsm X constraint)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk17d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk17d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">HasBeenReceivedCapability
  (constrained_vlsm X constraint)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk17e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk17e"><span class="nb">econstructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RelDecision <span class="nl">?has_been_received</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk17f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk17f"><hr></label><div class="goal-conclusion">has_been_received_stepwise_prop <span class="nl">?has_been_received</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk180" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk180">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RelDecision <span class="nl">?has_been_received</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (has_been_received_dec X).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk181" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk181">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>label X ‚Üí state X * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received_stepwise_prop (has_been_received X)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> constrained_has_been_received_stepwise_props.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk182" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk182"><span class="kn">Lemma</span> <span class="nf">has_been_received_examine_one_trace</span>
  `{HasBeenReceivedCapability message vlsm} :
  <span class="kr">forall</span> <span class="nv">is</span> <span class="nv">s</span> <span class="nv">tr</span>,
    finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr -&gt;
  <span class="kr">forall</span> <span class="nv">m</span>,
    has_been_received vlsm s m &lt;-&gt;
    trace_has_message (field_selector input) m tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">is</span>
   <span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">tr</span> : list transition_item),
  finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      has_been_received vlsm s m
      ‚Üî trace_has_message (field_selector input) m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk183" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk183"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">is</span>
   <span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">tr</span> : list transition_item),
  finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      has_been_received vlsm s m
      ‚Üî trace_has_message (field_selector input) m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk184" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk184"><span class="nb">apply</span> examine_one_trace.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RelDecision (has_been_received vlsm)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk185" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk185"><hr></label><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop vlsm
        (field_selector input)
        (has_been_received vlsm) s m</div></blockquote><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk186" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk186"><hr></label><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop vlsm
        (field_selector input)
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) (<span class="nv">s0</span> : message),
           ¬¨ has_been_received vlsm m0 s0) s m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk187" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk187">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RelDecision (has_been_received vlsm)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> has_been_received_dec.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk188" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk188">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop vlsm
        (field_selector input)
        (has_been_received vlsm) s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> proper_received.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk189" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk189">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop vlsm
        (field_selector input)
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) (<span class="nv">s0</span> : message),
           ¬¨ has_been_received vlsm m0 s0) s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> proper_not_received.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk18a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk18a"><span class="kn">Lemma</span> <span class="nf">trace_to_initial_state_has_no_inputs</span>
  {<span class="nv">message</span>} <span class="nv">vlsm</span>
  `{HasBeenReceivedCapability message vlsm}
  <span class="kr">is</span> s tr
  (Htr : finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr)
  (Hs : initial_state_prop vlsm s)
  : <span class="kr">forall</span> <span class="nv">item</span>, item ‚àà tr -&gt; input item = None.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">item</span> : transition_item,
  item ‚àà tr ‚Üí input item = None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk18b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk18b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">item</span> : transition_item,
  item ‚àà tr ‚Üí input item = None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk18c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk18c"><span class="nb">intros</span> item Hitem.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input item = None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk18d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk18d"><span class="nb">destruct</span> (input item) <span class="kr">as</span> [m |] <span class="nb">eqn</span>: Heqm; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Heqm</var><span class="hyp-type"><b>: </b><span>input item = Some m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Some m = None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk18e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk18e"><span class="nb">elim</span> (selected_message_exists_in_all_traces_initial_state _ _ Hs (field_selector input) m).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Heqm</var><span class="hyp-type"><b>: </b><span>input item = Some m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces vlsm
  (field_selector input) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk18f" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk18f"><span class="nb">apply</span> has_been_received_consistency; [<span class="bp">done</span> | <span class="bp">by</span> <span class="nb">apply</span> initial_state_is_valid |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Heqm</var><span class="hyp-type"><b>: </b><span>input item = Some m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_some_preloaded_traces vlsm
  (field_selector input) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk190" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk190"><span class="nb">eexists</span> _, _, Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Heqm</var><span class="hyp-type"><b>: </b><span>input item = Some m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message (field_selector input) m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk191" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk191"><span class="nb">apply</span> Exists_exists.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Heqm</var><span class="hyp-type"><b>: </b><span>input item = Some m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">x</span> : transition_item,
  x ‚àà tr ‚àß field_selector input m x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="kr">exists</span> <span class="nv">item</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab6"></a><h2 class="section">A state message oracle for messages sent or received</h2>
<div class="paragraph"> </div>

  In protocols like the CBC full node protocol, validators often
  work with the set of all messages they have directly observed,
  which includes the messages the component sent itself along with
  messages that were received.
  The <span class="inlinecode"><span class="id" title="var">has_been_directly_observed</span></span> oracle tells whether the given message was sent
  or received during any trace leading to the given state.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk192" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk192"><span class="kn">Class</span> <span class="nf">HasBeenDirectlyObservedCapability</span> {<span class="nv">message</span>} (<span class="nv">vlsm</span> : VLSM message) : <span class="kt">Type</span> :=
{
  has_been_directly_observed : state_message_oracle vlsm;
  has_been_directly_observed_dec :&gt; RelDecision has_been_directly_observed;
  has_been_directly_observed_stepwise_props :
    oracle_stepwise_props item_sends_or_receives has_been_directly_observed;
}.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">A coercion will be introduced instead of an instance
<span class="kr">in</span> future versions when <span class="nb">using</span> &#39;:&gt;&#39; <span class="kr">in</span> &#39;Class&#39;
declarations. Replace &#39;:&gt;&#39; <span class="kr">with</span> &#39;::&#39; (or use
&#39;#[<span class="kn">global</span>] <span class="kn">Existing Instance</span> <span class="nf">field</span>.&#39; <span class="kr">for</span> compatibility
<span class="kr">with</span> Coq &lt; <span class="mi">8</span>.<span class="mi">18</span>). Beware that the default locality <span class="kr">for</span>
&#39;::&#39; <span class="kr">is</span> #[export], <span class="kr">as</span> opposed to #[<span class="kn">global</span>] <span class="kr">for</span> &#39;:&gt;&#39;
currently. <span class="kn">Add</span> an explicit #[<span class="kn">global</span>] attribute to the
<span class="bp">field</span> <span class="kr">if</span> you need to keep the current behavior. For
example: <span class="s2">&quot;Class foo := { #[global] field :: bar }.&quot;</span>
[future-coercion-class-<span class="bp">field</span>,deprecated-since-<span class="mi">8</span>.<span class="mi">17</span>,deprecated,default]</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> has_been_directly_observed {message} vlsm {_}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> has_been_directly_observed_dec {message} vlsm {_}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> has_been_directly_observed_stepwise_props {message} vlsm {_}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[<span class="kn">global</span>] <span class="kn">Hint Mode</span> HasBeenDirectlyObservedCapability - ! : typeclass_instances.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk193" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk193"><span class="kn">Lemma</span> <span class="nf">has_been_directly_observed_no_inits</span> `[HasBeenDirectlyObservedCapability message vlsm] :
  <span class="kr">forall</span> (<span class="nv">s</span> : state vlsm),
    initial_state_prop vlsm s -&gt;
  <span class="kr">forall</span> <span class="nv">m</span> : message,
    ~ has_been_directly_observed vlsm s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state vlsm,
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      ¬¨ has_been_directly_observed vlsm s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk194" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk194"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state vlsm,
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      ¬¨ has_been_directly_observed vlsm s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (oracle_no_inits (has_been_directly_observed_stepwise_props vlsm)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk195" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk195"><span class="kn">Lemma</span> <span class="nf">has_been_directly_observed_step_update</span> `{HasBeenDirectlyObservedCapability message vlsm} :
  <span class="kr">forall</span> <span class="nv">l</span> <span class="nv">s</span> <span class="nv">im</span> <span class="nv">s&#39;</span> <span class="nv">om</span>,
    input_constrained_transition vlsm l (s, im) (s&#39;, om) -&gt;
  <span class="kr">forall</span> <span class="nv">msg</span> : message,
    has_been_directly_observed vlsm s&#39; msg &lt;-&gt;
    (im = Some msg \/ om = Some msg) \/ has_been_directly_observed vlsm s msg.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">im</span> : option message) (<span class="nv">s&#39;</span> : state
                                (preloaded_with_all_messages_vlsm
                                   vlsm)) (<span class="nv">om</span> : option
                                                 message),
  input_constrained_transition vlsm l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      has_been_directly_observed vlsm s&#39; msg
      ‚Üî (im = Some msg ‚à® om = Some msg)
        ‚à® has_been_directly_observed vlsm s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk196" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk196"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">im</span> : option message) (<span class="nv">s&#39;</span> : state
                                (preloaded_with_all_messages_vlsm
                                   vlsm)) (<span class="nv">om</span> : option
                                                 message),
  input_constrained_transition vlsm l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      has_been_directly_observed vlsm s&#39; msg
      ‚Üî (im = Some msg ‚à® om = Some msg)
        ‚à® has_been_directly_observed vlsm s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (oracle_step_update (has_been_directly_observed_stepwise_props vlsm)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk197" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk197"><span class="kn">Lemma</span> <span class="nf">proper_directly_observed</span>
  {<span class="nv">message</span>} (<span class="nv">vlsm</span> : VLSM message) `{HasBeenDirectlyObservedCapability message vlsm} :
  <span class="kr">forall</span> (<span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm)),
    constrained_state_prop vlsm s -&gt;
    <span class="kr">forall</span> <span class="nv">m</span>,
      all_traces_have_message_prop vlsm item_sends_or_receives (has_been_directly_observed vlsm) s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop vlsm
        item_sends_or_receives
        (has_been_directly_observed vlsm) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk198" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk198"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop vlsm
        item_sends_or_receives
        (has_been_directly_observed vlsm) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> proper_oracle_holds, oracle_trace_props_from_stepwise,
    has_been_directly_observed_stepwise_props.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk199" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk199"><span class="kn">Lemma</span> <span class="nf">proper_not_directly_observed</span>
  `(vlsm : VLSM message) `{HasBeenDirectlyObservedCapability message vlsm} :
  <span class="kr">forall</span> (<span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm)),
    constrained_state_prop vlsm s -&gt;
    <span class="kr">forall</span> <span class="nv">m</span>,
      no_traces_have_message_prop vlsm item_sends_or_receives
                                  (<span class="kr">fun</span> <span class="nv">s</span> <span class="nv">m</span> =&gt; ~ has_been_directly_observed vlsm s m) s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop vlsm
        item_sends_or_receives
        (<span class="kr">Œª</span> (<span class="nv">s0</span> : state vlsm) (<span class="nv">m0</span> : message),
           ¬¨ has_been_directly_observed vlsm s0 m0) s
        m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk19a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk19a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop vlsm
        item_sends_or_receives
        (<span class="kr">Œª</span> (<span class="nv">s0</span> : state vlsm) (<span class="nv">m0</span> : message),
           ¬¨ has_been_directly_observed vlsm s0 m0) s
        m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> proper_not_oracle_holds, oracle_trace_props_from_stepwise,
    has_been_directly_observed_stepwise_props.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk19b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk19b"><span class="kn">Lemma</span> <span class="nf">has_been_directly_observed_examine_one_trace</span>
  {<span class="nv">message</span>} (<span class="nv">vlsm</span> : VLSM message) `{HasBeenDirectlyObservedCapability message vlsm} :
  <span class="kr">forall</span> <span class="nv">is</span> <span class="nv">s</span> <span class="nv">tr</span>,
    finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr -&gt;
  <span class="kr">forall</span> <span class="nv">m</span>,
    has_been_directly_observed vlsm s m &lt;-&gt;
    trace_has_message item_sends_or_receives m tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">is</span>
   <span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">tr</span> : list transition_item),
  finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      has_been_directly_observed vlsm s m
      ‚Üî trace_has_message item_sends_or_receives m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk19c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk19c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">is</span>
   <span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">tr</span> : list transition_item),
  finite_constrained_trace_init_to vlsm <span class="kr">is</span> s tr
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      has_been_directly_observed vlsm s m
      ‚Üî trace_has_message item_sends_or_receives m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk19d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk19d"><span class="nb">apply</span> examine_one_trace.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RelDecision (has_been_directly_observed vlsm)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk19e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk19e"><hr></label><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop vlsm
        item_sends_or_receives
        (has_been_directly_observed vlsm) s m</div></blockquote><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk19f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk19f"><hr></label><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop vlsm
        item_sends_or_receives
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) (<span class="nv">s0</span> : message),
           ¬¨ has_been_directly_observed vlsm m0 s0) s
        m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1a0" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1a0">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RelDecision (has_been_directly_observed vlsm)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> has_been_directly_observed_dec.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1a1" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1a1">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      all_traces_have_message_prop vlsm
        item_sends_or_receives
        (has_been_directly_observed vlsm) s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> proper_directly_observed.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1a2" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1a2">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm),
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      no_traces_have_message_prop vlsm
        item_sends_or_receives
        (<span class="kr">Œª</span> (<span class="nv">m0</span> : state vlsm) (<span class="nv">s0</span> : message),
           ¬¨ has_been_directly_observed vlsm m0 s0) s
        m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> proper_not_directly_observed.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  A received message introduces no additional equivocations to a state
  if it has already been observed in <code>s</code>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">no_additional_equivocations</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  (<span class="nv">vlsm</span> : VLSM message)
  `{HasBeenDirectlyObservedCapability message vlsm}
  (s : state vlsm)
  (m : message)
  : <span class="kt">Prop</span>
  :=
  has_been_directly_observed vlsm s m.</span></span></pre><div class="doc">
<span class="inlinecode"><span class="id" title="var">no_additional_equivocations</span></span> is decidable. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1a3" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1a3"><span class="kn">Lemma</span> <span class="nf">no_additional_equivocations_dec</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  (<span class="nv">vlsm</span> : VLSM message)
  `{HasBeenDirectlyObservedCapability message vlsm}
  : RelDecision (no_additional_equivocations vlsm).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RelDecision (no_additional_equivocations vlsm)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1a4" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1a4"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RelDecision (no_additional_equivocations vlsm)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> has_been_directly_observed_dec.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">no_additional_equivocations_constraint</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  (<span class="nv">vlsm</span> : VLSM message)
  `{HasBeenDirectlyObservedCapability message vlsm}
  (l : label vlsm)
  (som : state vlsm * option message)
  : <span class="kt">Prop</span>
  :=
  <span class="kr">let</span> (<span class="nv">s</span>, om) := som <span class="kr">in</span>
  from_option (no_additional_equivocations vlsm s) <span class="kt">True</span> om.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sec_sent_received_observed_capabilities</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  (<span class="nv">vlsm</span> : VLSM message)
  `{HasBeenReceivedCapability message vlsm}
  `{HasBeenSentCapability message vlsm}
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1a5" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1a5"><span class="kn">Lemma</span> <span class="nf">has_been_directly_observed_sent_received_iff</span>
  `{HasBeenDirectlyObservedCapability message vlsm}
  (s : state (preloaded_with_all_messages_vlsm vlsm))
  (Hs : constrained_state_prop vlsm s)
  (m : message)
  : has_been_directly_observed vlsm s m &lt;-&gt; has_been_received vlsm s m \/ has_been_sent vlsm s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_directly_observed vlsm s m
‚Üî has_been_received vlsm s m ‚à® has_been_sent vlsm s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1a6" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1a6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_directly_observed vlsm s m
‚Üî has_been_received vlsm s m ‚à® has_been_sent vlsm s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1a7" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1a7"><span class="nb">induction</span> Hs <span class="nb">using</span> valid_state_prop_ind.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_directly_observed vlsm s m
‚Üî has_been_received vlsm s m ‚à® has_been_sent vlsm s m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk1a8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm vlsm) l
  (s, om) (s&#39;, om&#39;)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span>has_been_directly_observed vlsm s m
‚Üî has_been_received vlsm s m
  ‚à® has_been_sent vlsm s m</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk1a8"><hr></label><div class="goal-conclusion">has_been_directly_observed vlsm s&#39; m
‚Üî has_been_received vlsm s&#39; m
  ‚à® has_been_sent vlsm s&#39; m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1a9" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1a9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_directly_observed vlsm s m
‚Üî has_been_received vlsm s m ‚à® has_been_sent vlsm s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1aa" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1aa"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_directly_observed vlsm s m
‚Üí has_been_received vlsm s m ‚à® has_been_sent vlsm s m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk1ab" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk1ab"><hr></label><div class="goal-conclusion">has_been_received vlsm s m ‚à® has_been_sent vlsm s m
‚Üí has_been_directly_observed vlsm s m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1ac" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1ac">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_directly_observed vlsm s m
‚Üí has_been_received vlsm s m ‚à® has_been_sent vlsm s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> ?%has_been_directly_observed_no_inits.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1ad" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1ad">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received vlsm s m ‚à® has_been_sent vlsm s m
‚Üí has_been_directly_observed vlsm s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> [?%has_been_received_no_inits | ?%has_been_sent_no_inits].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1ae" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1ae">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm vlsm) l
  (s, om) (s&#39;, om&#39;)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span>has_been_directly_observed vlsm s m
‚Üî has_been_received vlsm s m
  ‚à® has_been_sent vlsm s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_directly_observed vlsm s&#39; m
‚Üî has_been_received vlsm s&#39; m
  ‚à® has_been_sent vlsm s&#39; m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1af" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1af"><span class="nb">rewrite</span> has_been_directly_observed_step_update <span class="bp">by</span> <span class="bp">done</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm vlsm) l
  (s, om) (s&#39;, om&#39;)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span>has_been_directly_observed vlsm s m
‚Üî has_been_received vlsm s m
  ‚à® has_been_sent vlsm s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(om = Some m ‚à® om&#39; = Some m)
‚à® has_been_directly_observed vlsm s m
‚Üî has_been_received vlsm s&#39; m
  ‚à® has_been_sent vlsm s&#39; m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1b0" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1b0"><span class="nb">rewrite</span> has_been_received_step_update <span class="bp">by</span> <span class="bp">done</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm vlsm) l
  (s, om) (s&#39;, om&#39;)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span>has_been_directly_observed vlsm s m
‚Üî has_been_received vlsm s m
  ‚à® has_been_sent vlsm s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(om = Some m ‚à® om&#39; = Some m)
‚à® has_been_directly_observed vlsm s m
‚Üî (om = Some m ‚à® has_been_received vlsm s m)
  ‚à® has_been_sent vlsm s&#39; m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1b1" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1b1"><span class="nb">rewrite</span> has_been_sent_step_update <span class="bp">by</span> <span class="bp">done</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm vlsm) l
  (s, om) (s&#39;, om&#39;)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span>has_been_directly_observed vlsm s m
‚Üî has_been_received vlsm s m
  ‚à® has_been_sent vlsm s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(om = Some m ‚à® om&#39; = Some m)
‚à® has_been_directly_observed vlsm s m
‚Üî (om = Some m ‚à® has_been_received vlsm s m)
  ‚à® om&#39; = Some m ‚à® has_been_sent vlsm s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">has_been_directly_observed_from_sent_received</span>
  (<span class="nv">s</span> : state vlsm)
  (<span class="nv">m</span> : message)
  : <span class="kt">Prop</span>
  := has_been_sent vlsm s m \/ has_been_received vlsm s m.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1b2" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1b2"><span class="kn">Lemma</span> <span class="nf">has_been_directly_observed_from_sent_received_dec</span>
  : RelDecision has_been_directly_observed_from_sent_received.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RelDecision
  has_been_directly_observed_from_sent_received</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1b3" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1b3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RelDecision
  has_been_directly_observed_from_sent_received</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1b4" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1b4"><span class="nb">intros</span> s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision
  (has_been_directly_observed_from_sent_received s m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1b5" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1b5"><span class="nb">apply</span> or_dec.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision (has_been_sent vlsm s m)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk1b6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk1b6"><hr></label><div class="goal-conclusion">Decision (has_been_received vlsm s m)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1b7" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1b7">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision (has_been_sent vlsm s m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> has_been_sent_dec.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1b8" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1b8">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision (has_been_received vlsm s m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> has_been_received_dec.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1b9" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1b9"><span class="kn">Lemma</span> <span class="nf">has_been_directly_observed_from_sent_received_stepwise_props</span>
  : oracle_stepwise_props item_sends_or_receives has_been_directly_observed_from_sent_received.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle_stepwise_props item_sends_or_receives
  has_been_directly_observed_from_sent_received</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1ba" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1ba"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle_stepwise_props item_sends_or_receives
  has_been_directly_observed_from_sent_received</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1bb" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1bb"><span class="nb">unfold</span> has_been_directly_observed_from_sent_received.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle_stepwise_props item_sends_or_receives
  (<span class="kr">Œª</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message),
     has_been_sent vlsm s m
     ‚à® has_been_received vlsm s m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1bc" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1bc"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state vlsm,
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      ¬¨ (has_been_sent vlsm s m
         ‚à® has_been_received vlsm s m)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk1bd" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk1bd"><hr></label><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">om</span> : option message),
  input_constrained_transition vlsm l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      has_been_sent vlsm s&#39; msg
      ‚à® has_been_received vlsm s&#39; msg
      ‚Üî item_sends_or_receives msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |}
        ‚à® has_been_sent vlsm s msg
          ‚à® has_been_received vlsm s msg</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1be" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1be">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state vlsm,
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      ¬¨ (has_been_sent vlsm s m
         ‚à® has_been_received vlsm s m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1bf" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1bf"><span class="nb">intros</span> s Hs m [Hsent | Hrecv].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>has_been_sent vlsm s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk1c0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hrecv</var><span class="hyp-type"><b>: </b><span>has_been_received vlsm s m</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk1c0"><hr></label><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1c1" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1c1">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>has_been_sent vlsm s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> has_been_sent_no_inits <span class="kr">in</span> Hsent.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1c2" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1c2">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hrecv</var><span class="hyp-type"><b>: </b><span>has_been_received vlsm s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> has_been_received_no_inits <span class="kr">in</span> Hrecv.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1c3" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1c3">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">s</span> : state (preloaded_with_all_messages_vlsm vlsm)) 
  (<span class="nv">im</span> : option message) (<span class="nv">s&#39;</span> : state
                                (preloaded_with_all_messages_vlsm
                                   vlsm)) (<span class="nv">om</span> : option
                                                 message),
  input_constrained_transition vlsm l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      has_been_sent vlsm s&#39; msg
      ‚à® has_been_received vlsm s&#39; msg
      ‚Üî item_sends_or_receives msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |}
        ‚à® has_been_sent vlsm s msg
          ‚à® has_been_received vlsm s msg</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1c4" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1c4"><span class="nb">intros</span> l s im s&#39; om Ht m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_constrained_transition vlsm l (
  s, im) (s&#39;, om)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent vlsm s&#39; m ‚à® has_been_received vlsm s&#39; m
‚Üî item_sends_or_receives m
    {|
      l := l;
      input := im;
      destination := s&#39;;
      output := om
    |}
  ‚à® has_been_sent vlsm s m
    ‚à® has_been_received vlsm s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1c5" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1c5"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_constrained_transition vlsm l (
  s, im) (s&#39;, om)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent vlsm s&#39; m ‚à® has_been_received vlsm s&#39; m
‚Üî (im = Some m ‚à® om = Some m)
  ‚à® has_been_sent vlsm s m
    ‚à® has_been_received vlsm s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1c6" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1c6"><span class="nb">rewrite</span> has_been_sent_step_update <span class="bp">by</span> <span class="bp">done</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_constrained_transition vlsm l (
  s, im) (s&#39;, om)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(om = Some m ‚à® has_been_sent vlsm s m)
‚à® has_been_received vlsm s&#39; m
‚Üî (im = Some m ‚à® om = Some m)
  ‚à® has_been_sent vlsm s m
    ‚à® has_been_received vlsm s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1c7" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1c7"><span class="nb">rewrite</span> has_been_received_step_update <span class="bp">by</span> <span class="bp">done</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_constrained_transition vlsm l (
  s, im) (s&#39;, om)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(om = Some m ‚à® has_been_sent vlsm s m)
‚à® im = Some m ‚à® has_been_received vlsm s m
‚Üî (im = Some m ‚à® om = Some m)
  ‚à® has_been_sent vlsm s m
    ‚à® has_been_received vlsm s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Program Instance</span> <span class="nf">HasBeenDirectlyObservedCapability_from_sent_received</span>
  : HasBeenDirectlyObservedCapability vlsm
  :=
  { has_been_directly_observed := has_been_directly_observed_from_sent_received;
    has_been_directly_observed_dec := has_been_directly_observed_from_sent_received_dec;
    has_been_directly_observed_stepwise_props :=
      has_been_directly_observed_from_sent_received_stepwise_props
  }.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1c8" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1c8"><span class="kn">Lemma</span> <span class="nf">has_been_directly_observed_consistency</span>
  `{HasBeenDirectlyObservedCapability message vlsm}
  (s : state (preloaded_with_all_messages_vlsm vlsm))
  (Hs : constrained_state_prop vlsm s)
  (m : message)
  : selected_messages_consistency_prop vlsm item_sends_or_receives s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_messages_consistency_prop vlsm
  item_sends_or_receives s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1c9" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1c9"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_messages_consistency_prop vlsm
  item_sends_or_receives s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1ca" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1ca"><span class="nb">split</span>; [| <span class="bp">by</span> <span class="nb">apply</span> consistency_from_valid_state_proj2].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_some_preloaded_traces vlsm
  item_sends_or_receives s m
‚Üí selected_message_exists_in_all_preloaded_traces vlsm
    item_sends_or_receives s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1cb" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1cb"><span class="nb">intro</span> Hsome.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_some_preloaded_traces
  vlsm item_sends_or_receives s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces vlsm
  item_sends_or_receives s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1cc" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1cc"><span class="nb">destruct</span> (decide (has_been_directly_observed vlsm s m)) <span class="kr">as</span> [Hsm | Hsm].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_some_preloaded_traces
  vlsm item_sends_or_receives s m</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>has_been_directly_observed vlsm s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces vlsm
  item_sends_or_receives s m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk1cd" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_some_preloaded_traces
  vlsm item_sends_or_receives s m</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>¬¨ has_been_directly_observed vlsm s m</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk1cd"><hr></label><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces vlsm
  item_sends_or_receives s m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1ce" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1ce">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_some_preloaded_traces
  vlsm item_sends_or_receives s m</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>has_been_directly_observed vlsm s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces vlsm
  item_sends_or_receives s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> proper_directly_observed <span class="kr">in</span> Hsm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1cf" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1cf">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_some_preloaded_traces
  vlsm item_sends_or_receives s m</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>¬¨ has_been_directly_observed vlsm s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces vlsm
  item_sends_or_receives s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1d0" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1d0"><span class="nb">apply</span> proper_not_directly_observed <span class="kr">in</span> Hsm; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsome</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_some_preloaded_traces
  vlsm item_sends_or_receives s m</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_no_preloaded_trace
  vlsm item_sends_or_receives s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces vlsm
  item_sends_or_receives s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1d1" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1d1"><span class="nb">destruct</span> Hsome <span class="kr">as</span> [<span class="kr">is</span> [tr [Htr Hmsg]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability vlsm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability vlsm</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>HasBeenDirectlyObservedCapability vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop vlsm s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm vlsm) <span class="kr">is</span> s
  tr</span></span></span><br><span><var>Hmsg</var><span class="hyp-type"><b>: </b><span>trace_has_message item_sends_or_receives m tr</span></span></span><br><span><var>Hsm</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_no_preloaded_trace
  vlsm item_sends_or_receives s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces vlsm
  item_sends_or_receives s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">elim</span> (Hsm _ _ Htr).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sec_sent_received_observed_capabilities</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">computable_messages_oracle</span>
  `(vlsm : VLSM message)
  (oracle_set : state vlsm -&gt; <span class="nb">set</span> message)
  (message_selector : message -&gt; transition_item -&gt; <span class="kt">Prop</span>) : <span class="kt">Prop</span> :=
    oracle_stepwise_props message_selector (<span class="kr">fun</span> <span class="nv">s</span> <span class="nv">m</span> =&gt; m ‚àà oracle_set s).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Class</span> <span class="nf">ComputableSentMessages</span> `(vlsm : VLSM message) : <span class="kt">Type</span> :=
{
  sent_messages_set : state vlsm -&gt; list message;
  csm_computable_oracle :
    computable_messages_oracle vlsm sent_messages_set (field_selector output);
}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Global</span> <span class="kn">Hint Mode</span> ComputableSentMessages - ! : typeclass_instances.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Class</span> <span class="nf">ComputableReceivedMessages</span> `(vlsm : VLSM message) : <span class="kt">Type</span> :=
{
  received_messages_set : state vlsm -&gt; list message;
  crm_computable_oracle :
    computable_messages_oracle vlsm received_messages_set (field_selector input);
}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Global</span> <span class="kn">Hint Mode</span> ComputableReceivedMessages - ! : typeclass_instances.</span></span></pre><div class="doc">
<a id="lab7"></a><h2 class="section">Properties of Computable Message Oracles</h2>
<div class="paragraph"> </div>

  In this section we prove several generic results about <span class="inlinecode"><span class="id" title="var">computable_messages_oracle</span></span>s,
  derive <span class="inlinecode"><span class="id" title="var">HasBeenSentCapability</span></span> and <span class="inlinecode"><span class="id" title="var">HasBeenReceivedCapability</span></span> from
  <span class="inlinecode"><span class="id" title="var">ComputableSentMessages</span></span> and <span class="inlinecode"><span class="id" title="var">ComputableReceivedMessages</span></span> and some basic results
  about computable (directly) observed messages.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sec_computable_sent_received_observed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  `(vlsm : VLSM message)
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1d2" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1d2"><span class="kn">Lemma</span> <span class="nf">computable_messages_oracle_initial_state_empty</span>
  `(Hrm : computable_messages_oracle vlsm oracle_set message_selector)
  (s : state vlsm)
  (Hs : initial_state_prop vlsm s)
  : oracle_set s = [].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>oracle_set</var><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>message_selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hrm</var><span class="hyp-type"><b>: </b><span>computable_messages_oracle vlsm oracle_set
  message_selector</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle_set s = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1d3" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1d3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>oracle_set</var><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>message_selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hrm</var><span class="hyp-type"><b>: </b><span>computable_messages_oracle vlsm oracle_set
  message_selector</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle_set s = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1d4" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1d4"><span class="nb">apply</span> elem_of_nil_inv; <span class="nb">intro</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>oracle_set</var><span class="hyp-type"><b>: </b><span>state vlsm ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>message_selector</var><span class="hyp-type"><b>: </b><span>message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hrm</var><span class="hyp-type"><b>: </b><span>computable_messages_oracle vlsm oracle_set
  message_selector</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àâ oracle_set s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> oracle_no_inits <span class="kr">in</span> Hs; [| <span class="nb">apply</span> Hrm]; <span class="nb">cbn</span> <span class="kr">in</span> Hs.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">computable_messages_oracle_rel</span>
  `(Hrm : computable_messages_oracle vlsm oracle_set message_selector)
  (s : state vlsm)
  (m : message)
  : <span class="kt">Prop</span> :=
  m ‚àà oracle_set s.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">computable_messages_oracle_rel_dec</span>
  `(Hrm : computable_messages_oracle vlsm oracle_set message_selector)
  `{EqDecision message}
  : RelDecision (computable_messages_oracle_rel Hrm) :=
  <span class="kr">fun</span> <span class="nv">s</span> <span class="nv">m</span> =&gt; decide_rel _ _ (oracle_set s).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1d5" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1d5"><span class="kn">Lemma</span> <span class="nf">ComputableSentMessages_initial_state_empty</span>
  `{!ComputableSentMessages vlsm}
  (s : initial_state vlsm)
  : sent_messages_set (proj1_sig s) = [].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>ComputableSentMessages0</var><span class="hyp-type"><b>: </b><span>ComputableSentMessages vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>initial_state vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sent_messages_set (`s) = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1d6" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1d6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>ComputableSentMessages0</var><span class="hyp-type"><b>: </b><span>ComputableSentMessages vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>initial_state vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sent_messages_set (`s) = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> computable_messages_oracle_initial_state_empty;
    [<span class="nb">apply</span> csm_computable_oracle | <span class="nb">destruct</span> s].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">ComputableSentMessages_has_been_sent</span>
  `{!ComputableSentMessages vlsm}
  : state vlsm -&gt; message -&gt; <span class="kt">Prop</span> :=
  computable_messages_oracle_rel csm_computable_oracle.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Instance</span> <span class="nf">computable_sent_message_has_been_sent_dec</span>
  `{!ComputableSentMessages vlsm}
  `{EqDecision message}
  : RelDecision ComputableSentMessages_has_been_sent :=
  computable_messages_oracle_rel_dec csm_computable_oracle.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1d7" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1d7">#[export] <span class="kn">Instance</span> <span class="nf">ComputableSentMessages_HasBeenSentCapability</span>
  `{!ComputableSentMessages vlsm}
  `{EqDecision message}
  : HasBeenSentCapability vlsm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>ComputableSentMessages0</var><span class="hyp-type"><b>: </b><span>ComputableSentMessages vlsm</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">HasBeenSentCapability vlsm</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1d8" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1d8"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>ComputableSentMessages0</var><span class="hyp-type"><b>: </b><span>ComputableSentMessages vlsm</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">HasBeenSentCapability vlsm</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1d9" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1d9"><span class="nb">econstructor</span>; <span class="nb">cycle</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>ComputableSentMessages0</var><span class="hyp-type"><b>: </b><span>ComputableSentMessages vlsm</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent_stepwise_prop <span class="nl">?has_been_sent</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk1da" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>ComputableSentMessages0</var><span class="hyp-type"><b>: </b><span>ComputableSentMessages vlsm</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk1da"><hr></label><div class="goal-conclusion">RelDecision <span class="nl">?has_been_sent</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1db" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1db">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>ComputableSentMessages0</var><span class="hyp-type"><b>: </b><span>ComputableSentMessages vlsm</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent_stepwise_prop <span class="nl">?has_been_sent</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> csm_computable_oracle.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1dc" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1dc">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>ComputableSentMessages0</var><span class="hyp-type"><b>: </b><span>ComputableSentMessages vlsm</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RelDecision
  (<span class="kr">Œª</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message),
     m ‚àà sent_messages_set s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">typeclasses eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1dd" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1dd"><span class="kn">Lemma</span> <span class="nf">elem_of_sent_messages_set</span>
  `{!ComputableSentMessages vlsm}
  `{EqDecision message}
  : <span class="kr">forall</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message),
      m ‚àà sent_messages_set s
        &lt;-&gt;
      has_been_sent vlsm s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>ComputableSentMessages0</var><span class="hyp-type"><b>: </b><span>ComputableSentMessages vlsm</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message),
  m ‚àà sent_messages_set s ‚Üî has_been_sent vlsm s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1de" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1de"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>ComputableSentMessages0</var><span class="hyp-type"><b>: </b><span>ComputableSentMessages vlsm</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message),
  m ‚àà sent_messages_set s ‚Üî has_been_sent vlsm s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">done</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1df" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1df"><span class="kn">Lemma</span> <span class="nf">ComputableReceivedMessages_initial_state_empty</span>
  `{!ComputableReceivedMessages vlsm}
  (s : initial_state vlsm)
  : received_messages_set (proj1_sig s) = [].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>ComputableReceivedMessages0</var><span class="hyp-type"><b>: </b><span>ComputableReceivedMessages
  vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>initial_state vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">received_messages_set (`s) = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1e0" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1e0"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>ComputableReceivedMessages0</var><span class="hyp-type"><b>: </b><span>ComputableReceivedMessages
  vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>initial_state vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">received_messages_set (`s) = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> computable_messages_oracle_initial_state_empty;
    [<span class="nb">apply</span> crm_computable_oracle | <span class="nb">destruct</span> s].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">ComputableReceivedMessages_has_been_sent</span>
  `{!ComputableReceivedMessages vlsm}
  : state vlsm -&gt; message -&gt; <span class="kt">Prop</span>
  := computable_messages_oracle_rel crm_computable_oracle.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Instance</span> <span class="nf">computable_received_message_has_been_sent_dec</span>
  `{!ComputableReceivedMessages vlsm}
  `{EqDecision message}
  : RelDecision ComputableReceivedMessages_has_been_sent :=
  computable_messages_oracle_rel_dec crm_computable_oracle.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1e1" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1e1">#[export] <span class="kn">Instance</span> <span class="nf">ComputableReceivedMessages_HasBeenReceivedCapability</span>
  `{!ComputableReceivedMessages vlsm}
  `{EqDecision message}
  : HasBeenReceivedCapability vlsm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>ComputableReceivedMessages0</var><span class="hyp-type"><b>: </b><span>ComputableReceivedMessages
  vlsm</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">HasBeenReceivedCapability vlsm</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1e2" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1e2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>ComputableReceivedMessages0</var><span class="hyp-type"><b>: </b><span>ComputableReceivedMessages
  vlsm</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">HasBeenReceivedCapability vlsm</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1e3" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1e3"><span class="nb">econstructor</span>; <span class="nb">cycle</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>ComputableReceivedMessages0</var><span class="hyp-type"><b>: </b><span>ComputableReceivedMessages
  vlsm</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received_stepwise_prop <span class="nl">?has_been_received</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk1e4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>ComputableReceivedMessages0</var><span class="hyp-type"><b>: </b><span>ComputableReceivedMessages
  vlsm</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk1e4"><hr></label><div class="goal-conclusion">RelDecision <span class="nl">?has_been_received</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1e5" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1e5">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>ComputableReceivedMessages0</var><span class="hyp-type"><b>: </b><span>ComputableReceivedMessages
  vlsm</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received_stepwise_prop <span class="nl">?has_been_received</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> crm_computable_oracle.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1e6" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1e6">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>ComputableReceivedMessages0</var><span class="hyp-type"><b>: </b><span>ComputableReceivedMessages
  vlsm</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RelDecision
  (<span class="kr">Œª</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message),
     m ‚àà received_messages_set s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">typeclasses eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1e7" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1e7"><span class="kn">Lemma</span> <span class="nf">has_been_received_messages_set_iff</span>
  `{!ComputableReceivedMessages vlsm}
  `{EqDecision message}
  : <span class="kr">forall</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message),
      m ‚àà received_messages_set s
        &lt;-&gt;
      has_been_received vlsm s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>ComputableReceivedMessages0</var><span class="hyp-type"><b>: </b><span>ComputableReceivedMessages
  vlsm</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message),
  m ‚àà received_messages_set s
  ‚Üî has_been_received vlsm s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1e8" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1e8"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>ComputableReceivedMessages0</var><span class="hyp-type"><b>: </b><span>ComputableReceivedMessages
  vlsm</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state vlsm) (<span class="nv">m</span> : message),
  m ‚àà received_messages_set s
  ‚Üî has_been_received vlsm s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">done</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab8"></a><h3 class="section">Computable (Directly) Observed Messages</h3>
<div class="paragraph"> </div>

  We here derive <span class="inlinecode"><span class="id" title="var">directly_observed_messages_set</span></span> from <span class="inlinecode"><span class="id" title="var">ComputableSentMessages</span></span>
  and <span class="inlinecode"><span class="id" title="var">ComputableReceivedMessages</span></span> and relate it to the <span class="inlinecode"><span class="id" title="var">has_been_directly_observed</span></span>
  predicate.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sec_computable_observed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  `{EqDecision message}
  `{!ComputableSentMessages vlsm}
  `{!ComputableReceivedMessages vlsm}
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">directly_observed_messages_set</span> (<span class="nv">s</span> : state vlsm) : list message :=
  sent_messages_set s ++ received_messages_set s.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1e9" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1e9"><span class="kn">Lemma</span> <span class="nf">directly_observed_messages_set_iff</span> :
  <span class="kr">forall</span> (<span class="nv">s</span> : state vlsm), constrained_state_prop vlsm s -&gt;
  <span class="kr">forall</span> (<span class="nv">m</span> : message),
    m ‚àà directly_observed_messages_set s
      &lt;-&gt;
    has_been_directly_observed vlsm s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>ComputableSentMessages0</var><span class="hyp-type"><b>: </b><span>ComputableSentMessages vlsm</span></span></span><br><span><var>ComputableReceivedMessages0</var><span class="hyp-type"><b>: </b><span>ComputableReceivedMessages
  vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state vlsm,
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      m ‚àà directly_observed_messages_set s
      ‚Üî has_been_directly_observed vlsm s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1ea" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1ea"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>ComputableSentMessages0</var><span class="hyp-type"><b>: </b><span>ComputableSentMessages vlsm</span></span></span><br><span><var>ComputableReceivedMessages0</var><span class="hyp-type"><b>: </b><span>ComputableReceivedMessages
  vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state vlsm,
  constrained_state_prop vlsm s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      m ‚àà directly_observed_messages_set s
      ‚Üî has_been_directly_observed vlsm s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span>; <span class="nb">split</span>; <span class="nb">setoid_rewrite</span> elem_of_app;
    <span class="nb">rewrite</span> has_been_received_messages_set_iff, elem_of_sent_messages_set.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1eb" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1eb"><span class="kn">Lemma</span> <span class="nf">com_computable_oracle</span> :
  computable_messages_oracle vlsm directly_observed_messages_set item_sends_or_receives.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>ComputableSentMessages0</var><span class="hyp-type"><b>: </b><span>ComputableSentMessages vlsm</span></span></span><br><span><var>ComputableReceivedMessages0</var><span class="hyp-type"><b>: </b><span>ComputableReceivedMessages
  vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">computable_messages_oracle vlsm
  directly_observed_messages_set
  item_sends_or_receives</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1ec" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1ec"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>ComputableSentMessages0</var><span class="hyp-type"><b>: </b><span>ComputableSentMessages vlsm</span></span></span><br><span><var>ComputableReceivedMessages0</var><span class="hyp-type"><b>: </b><span>ComputableReceivedMessages
  vlsm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">computable_messages_oracle vlsm
  directly_observed_messages_set
  item_sends_or_receives</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1ed" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1ed"><span class="nb">constructor</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>ComputableSentMessages0</var><span class="hyp-type"><b>: </b><span>ComputableSentMessages vlsm</span></span></span><br><span><var>ComputableReceivedMessages0</var><span class="hyp-type"><b>: </b><span>ComputableReceivedMessages
  vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">m ‚àâ directly_observed_messages_set s</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk1ee" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>ComputableSentMessages0</var><span class="hyp-type"><b>: </b><span>ComputableSentMessages vlsm</span></span></span><br><span><var>ComputableReceivedMessages0</var><span class="hyp-type"><b>: </b><span>ComputableReceivedMessages
  vlsm</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>input_constrained_transition vlsm l (
  s, im) (s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk1ee"><hr></label><div class="goal-conclusion">msg ‚àà directly_observed_messages_set s&#39;
‚Üî item_sends_or_receives msg
    {|
      l := l;
      input := im;
      destination := s&#39;;
      output := om
    |} ‚à® msg ‚àà directly_observed_messages_set s</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1ef" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1ef">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>ComputableSentMessages0</var><span class="hyp-type"><b>: </b><span>ComputableSentMessages vlsm</span></span></span><br><span><var>ComputableReceivedMessages0</var><span class="hyp-type"><b>: </b><span>ComputableReceivedMessages
  vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">m ‚àâ directly_observed_messages_set s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1f0" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1f0"><span class="nb">setoid_rewrite</span> directly_observed_messages_set_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>ComputableSentMessages0</var><span class="hyp-type"><b>: </b><span>ComputableSentMessages vlsm</span></span></span><br><span><var>ComputableReceivedMessages0</var><span class="hyp-type"><b>: </b><span>ComputableReceivedMessages
  vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ has_been_directly_observed vlsm s m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk1f1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>ComputableSentMessages0</var><span class="hyp-type"><b>: </b><span>ComputableSentMessages vlsm</span></span></span><br><span><var>ComputableReceivedMessages0</var><span class="hyp-type"><b>: </b><span>ComputableReceivedMessages
  vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk1f1"><hr></label><div class="goal-conclusion">constrained_state_prop vlsm s</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1f2" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1f2">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>ComputableSentMessages0</var><span class="hyp-type"><b>: </b><span>ComputableSentMessages vlsm</span></span></span><br><span><var>ComputableReceivedMessages0</var><span class="hyp-type"><b>: </b><span>ComputableReceivedMessages
  vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ has_been_directly_observed vlsm s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> has_been_directly_observed_stepwise_props.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1f3" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1f3">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>ComputableSentMessages0</var><span class="hyp-type"><b>: </b><span>ComputableSentMessages vlsm</span></span></span><br><span><var>ComputableReceivedMessages0</var><span class="hyp-type"><b>: </b><span>ComputableReceivedMessages
  vlsm</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state vlsm</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">constrained_state_prop vlsm s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> initial_state_is_valid.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1f4" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1f4">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>ComputableSentMessages0</var><span class="hyp-type"><b>: </b><span>ComputableSentMessages vlsm</span></span></span><br><span><var>ComputableReceivedMessages0</var><span class="hyp-type"><b>: </b><span>ComputableReceivedMessages
  vlsm</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>input_constrained_transition vlsm l (
  s, im) (s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ‚àà directly_observed_messages_set s&#39;
‚Üî item_sends_or_receives msg
    {|
      l := l;
      input := im;
      destination := s&#39;;
      output := om
    |} ‚à® msg ‚àà directly_observed_messages_set s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1f5" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1f5"><span class="nb">setoid_rewrite</span> directly_observed_messages_set_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>ComputableSentMessages0</var><span class="hyp-type"><b>: </b><span>ComputableSentMessages vlsm</span></span></span><br><span><var>ComputableReceivedMessages0</var><span class="hyp-type"><b>: </b><span>ComputableReceivedMessages
  vlsm</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>input_constrained_transition vlsm l (
  s, im) (s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_directly_observed vlsm s&#39; msg
‚Üî item_sends_or_receives msg
    {|
      l := l;
      input := im;
      destination := s&#39;;
      output := om
    |} ‚à® has_been_directly_observed vlsm s msg</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk1f6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>ComputableSentMessages0</var><span class="hyp-type"><b>: </b><span>ComputableSentMessages vlsm</span></span></span><br><span><var>ComputableReceivedMessages0</var><span class="hyp-type"><b>: </b><span>ComputableReceivedMessages
  vlsm</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>input_constrained_transition vlsm l (
  s, im) (s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk1f6"><hr></label><div class="goal-conclusion">constrained_state_prop vlsm s&#39;</div></blockquote><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk1f7" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>ComputableSentMessages0</var><span class="hyp-type"><b>: </b><span>ComputableSentMessages vlsm</span></span></span><br><span><var>ComputableReceivedMessages0</var><span class="hyp-type"><b>: </b><span>ComputableReceivedMessages
  vlsm</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>input_constrained_transition vlsm l (
  s, im) (s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk1f7"><hr></label><div class="goal-conclusion">constrained_state_prop vlsm s</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1f8" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1f8">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>ComputableSentMessages0</var><span class="hyp-type"><b>: </b><span>ComputableSentMessages vlsm</span></span></span><br><span><var>ComputableReceivedMessages0</var><span class="hyp-type"><b>: </b><span>ComputableReceivedMessages
  vlsm</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>input_constrained_transition vlsm l (
  s, im) (s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_directly_observed vlsm s&#39; msg
‚Üî item_sends_or_receives msg
    {|
      l := l;
      input := im;
      destination := s&#39;;
      output := om
    |} ‚à® has_been_directly_observed vlsm s msg</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> has_been_directly_observed_stepwise_props.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1f9" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1f9">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>ComputableSentMessages0</var><span class="hyp-type"><b>: </b><span>ComputableSentMessages vlsm</span></span></span><br><span><var>ComputableReceivedMessages0</var><span class="hyp-type"><b>: </b><span>ComputableReceivedMessages
  vlsm</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>input_constrained_transition vlsm l (
  s, im) (s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">constrained_state_prop vlsm s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> input_valid_transition_destination.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1fa" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1fa">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>vlsm</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>ComputableSentMessages0</var><span class="hyp-type"><b>: </b><span>ComputableSentMessages vlsm</span></span></span><br><span><var>ComputableReceivedMessages0</var><span class="hyp-type"><b>: </b><span>ComputableReceivedMessages
  vlsm</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm vlsm)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>input_constrained_transition vlsm l (
  s, im) (s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">constrained_state_prop vlsm s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> input_valid_transition_origin.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sec_computable_observed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sec_computable_sent_received_observed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1fb" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1fb"><span class="kn">Lemma</span> <span class="nf">sent_can_emit</span>
  [message]
  (X : VLSM message)
  `{HasBeenSentCapability message X}
  (s : state X)
  (Hs : valid_state_prop X s)
  (m : message)
  (Hsent : has_been_sent X s m) :
  can_emit X m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>has_been_sent X s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">can_emit X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1fc" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1fc"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>has_been_sent X s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">can_emit X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1fd" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1fd"><span class="nb">apply</span> valid_state_has_trace <span class="kr">in</span> Hs <span class="kr">as</span> (<span class="kr">is</span> &amp; tr &amp; Htr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>has_been_sent X s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">can_emit X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk1fe" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk1fe"><span class="nb">assert</span> (Hpre_tr : finite_constrained_trace_init_to X <span class="kr">is</span> s tr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>has_been_sent X s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_constrained_trace_init_to X <span class="kr">is</span> s tr</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk1ff" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>has_been_sent X s m</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk1ff"><hr></label><div class="goal-conclusion">can_emit X m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk200" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk200">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>has_been_sent X s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_constrained_trace_init_to X <span class="kr">is</span> s tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">clear</span> -Htr; <span class="nb">destruct</span> X;
      <span class="nb">eapply</span> VLSM_incl_finite_valid_trace_init_to;
      [<span class="nb">apply</span> vlsm_incl_preloaded_with_all_messages_vlsm |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk201" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk201">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>has_been_sent X s m</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">can_emit X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk202" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk202"><span class="nb">unfold</span> can_emit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>has_been_sent X s m</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">som</span> : state X * option message) (<span class="nv">l</span> : label X) (<span class="nv">s</span> : 
                                                 state
                                                 X),
  input_valid_transition X l som (s, Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk203" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk203"><span class="nb">eapply</span> has_been_sent_examine_one_trace, Exists_exists <span class="kr">in</span> Hsent
    <span class="kr">as</span> (item_z &amp; Hitem_z &amp; Hz); [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>item_z</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem_z</var><span class="hyp-type"><b>: </b><span>item_z ‚àà tr</span></span></span><br><span><var>Hz</var><span class="hyp-type"><b>: </b><span>field_selector output m item_z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">som</span> : state X * option message) (<span class="nv">l</span> : label X) (<span class="nv">s</span> : 
                                                 state
                                                 X),
  input_valid_transition X l som (s, Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk204" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk204"><span class="nb">apply</span> elem_of_list_split <span class="kr">in</span> Hitem_z <span class="kr">as</span> (pre_z &amp; suf_z &amp; -&gt;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>item_z</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>pre_z, suf_z</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X <span class="kr">is</span> s
  (pre_z ++ item_z :: suf_z)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to X <span class="kr">is</span> s
  (pre_z ++ item_z :: suf_z)</span></span></span><br><span><var>Hz</var><span class="hyp-type"><b>: </b><span>field_selector output m item_z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">som</span> : state X * option message) (<span class="nv">l</span> : label X) (<span class="nv">s</span> : 
                                                 state
                                                 X),
  input_valid_transition X l som (s, Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk205" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk205"><span class="nb">destruct</span> Htr <span class="kr">as</span> [Htr _].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>item_z</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>pre_z, suf_z</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X <span class="kr">is</span> s
  (pre_z ++ item_z :: suf_z)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to X <span class="kr">is</span> s
  (pre_z ++ item_z :: suf_z)</span></span></span><br><span><var>Hz</var><span class="hyp-type"><b>: </b><span>field_selector output m item_z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">som</span> : state X * option message) (<span class="nv">l</span> : label X) (<span class="nv">s</span> : 
                                                 state
                                                 X),
  input_valid_transition X l som (s, Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk206" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk206"><span class="nb">eapply</span> valid_trace_forget_last, input_valid_transition_to <span class="kr">in</span> Htr; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>item_z</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>pre_z, suf_z</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to X <span class="kr">is</span> s
  (pre_z ++ item_z :: suf_z)</span></span></span><br><span><var>Hz</var><span class="hyp-type"><b>: </b><span>field_selector output m item_z</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>input_valid_transition X 
  (l item_z)
  (finite_trace_last <span class="kr">is</span> pre_z, input item_z)
  (destination item_z, output item_z)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">som</span> : state X * option message) (<span class="nv">l</span> : label X) (<span class="nv">s</span> : 
                                                 state
                                                 X),
  input_valid_transition X l som (s, Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk207" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk207"><span class="nb">cbn</span> <span class="kr">in</span> Hz; <span class="nb">rewrite</span> Hz <span class="kr">in</span> Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>item_z</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>pre_z, suf_z</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to X <span class="kr">is</span> s
  (pre_z ++ item_z :: suf_z)</span></span></span><br><span><var>Hz</var><span class="hyp-type"><b>: </b><span>output item_z = Some m</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>input_valid_transition X 
  (l item_z)
  (finite_trace_last <span class="kr">is</span> pre_z, input item_z)
  (destination item_z, Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">som</span> : state X * option message) (<span class="nv">l</span> : label X) (<span class="nv">s</span> : 
                                                 state
                                                 X),
  input_valid_transition X l som (s, Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eexists</span> _, _, _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk208" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk208"><span class="kn">Lemma</span> <span class="nf">preloaded_sent_can_emit</span>
  [message]
  (X : VLSM message)
  `{HasBeenSentCapability message X}
  (s : state (preloaded_with_all_messages_vlsm X))
  (Hs : constrained_state_prop X s)
  (m : message)
  (Hsent : has_been_sent X s m) :
  can_emit (preloaded_with_all_messages_vlsm X) m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>has_been_sent X s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">can_emit (preloaded_with_all_messages_vlsm X) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk209" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk209"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>has_been_sent X s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">can_emit (preloaded_with_all_messages_vlsm X) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> sent_can_emit.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk20a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk20a"><span class="kn">Lemma</span> <span class="nf">sent_valid</span>
    [message]
    (X : VLSM message)
    `{HasBeenSentCapability message X}
    (s : state X)
    (Hs : valid_state_prop X s)
    (m : message)
    (Hsent : has_been_sent X s m) :
    valid_message_prop X m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>has_been_sent X s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk20b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk20b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>has_been_sent X s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> emitted_messages_are_valid_iff; <span class="nb">right</span>; <span class="nb">eapply</span> sent_can_emit.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk20c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk20c"><span class="kn">Lemma</span> <span class="nf">received_valid</span>
    [message]
    (X : VLSM message)
    `{HasBeenReceivedCapability message X}
    (s : state X)
    (Hs : valid_state_prop X s)
    (m : message)
    (Hreceived : has_been_received X s m) :
    valid_message_prop X m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hreceived</var><span class="hyp-type"><b>: </b><span>has_been_received X s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk20d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk20d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hreceived</var><span class="hyp-type"><b>: </b><span>has_been_received X s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk20e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk20e"><span class="nb">induction</span> Hs <span class="nb">using</span> valid_state_prop_ind.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hreceived</var><span class="hyp-type"><b>: </b><span>has_been_received X s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk20f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label X</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition X l (s, om) (s&#39;, om&#39;)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hreceived</var><span class="hyp-type"><b>: </b><span>has_been_received X s&#39; m</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span>has_been_received X s m
‚Üí valid_message_prop X m</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk20f"><hr></label><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk210" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk210">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hreceived</var><span class="hyp-type"><b>: </b><span>has_been_received X s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> has_been_received_no_inits <span class="kr">in</span> Hreceived.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk211" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk211">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label X</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition X l (s, om) (s&#39;, om&#39;)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hreceived</var><span class="hyp-type"><b>: </b><span>has_been_received X s&#39; m</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span>has_been_received X s m
‚Üí valid_message_prop X m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk212" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk212"><span class="nb">apply</span> input_valid_transition_in <span class="kr">in</span> Ht <span class="kr">as</span> Hom&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label X</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition X l (s, om) (s&#39;, om&#39;)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hreceived</var><span class="hyp-type"><b>: </b><span>has_been_received X s&#39; m</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span>has_been_received X s m
‚Üí valid_message_prop X m</span></span></span><br><span><var>Hom'</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk213" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk213"><span class="nb">apply</span> preloaded_weaken_input_valid_transition <span class="kr">in</span> Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label X</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_constrained_transition X l (
  s, om) (s&#39;, om&#39;)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hreceived</var><span class="hyp-type"><b>: </b><span>has_been_received X s&#39; m</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span>has_been_received X s m
‚Üí valid_message_prop X m</span></span></span><br><span><var>Hom'</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X om</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk214" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk214"><span class="nb">erewrite</span> has_been_received_step_update <span class="kr">in</span> Hreceived <span class="bp">by</span> <span class="bp">done</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label X</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_constrained_transition X l (
  s, om) (s&#39;, om&#39;)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>IHHs</var><span class="hyp-type"><b>: </b><span>has_been_received X s m
‚Üí valid_message_prop X m</span></span></span><br><span><var>Hom'</var><span class="hyp-type"><b>: </b><span>option_valid_message_prop X om</span></span></span><br><span><var>Hreceived</var><span class="hyp-type"><b>: </b><span>om = Some m ‚à® has_been_received X s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> Hreceived <span class="kr">as</span> [[= -&gt;] |]; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk215" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk215"><span class="kn">Lemma</span> <span class="nf">directly_observed_valid</span>
    [message]
    (X : VLSM message)
    `{HasBeenSentCapability message X}
    `{HasBeenReceivedCapability message X}
    (s : state X)
    (Hs : valid_state_prop X s)
    (m : message)
    (Hobserved : has_been_directly_observed X s m) :
    valid_message_prop X m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hobserved</var><span class="hyp-type"><b>: </b><span>has_been_directly_observed X s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk216" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk216"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hobserved</var><span class="hyp-type"><b>: </b><span>has_been_directly_observed X s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk217" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk217"><span class="nb">destruct</span> Hobserved.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>has_been_sent X s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk218" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>has_been_received X s m</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk218"><hr></label><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk219" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk219">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>has_been_sent X s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> sent_valid.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk21a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk21a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>has_been_received X s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> received_valid.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab9"></a><h3 class="section">Equivocation in compositions</h3>
<div class="paragraph"> </div>

  We now move on to a composite context. Each component of our composition
  will have <span class="inlinecode"><span class="id" title="var">has_been_sent</span></span> and <span class="inlinecode"><span class="id" title="var">has_been_received</span></span> capabilities.

<div class="paragraph"> </div>

  We introduce <span class="inlinecode"><span class="id" title="var">validator</span></span>s along with their respective <span class="inlinecode"><span class="id" title="var">weight</span></span>s, the
  <span class="inlinecode"><span class="id" title="var">A</span></span> function which maps validators to indices of component VLSMs and
  the <span class="inlinecode"><span class="id" title="var">sender</span></span> function which maps messages to their (unique) designated
  sender (if any).

<div class="paragraph"> </div>

  For the equivocation fault sum to be computable, we also require that
  the number of <span class="inlinecode"><span class="id" title="var">validator</span></span>s and the number of machines in the
  composition are both finite. See <span class="inlinecode"><span class="id" title="var">finite_index</span></span>, <span class="inlinecode"><span class="id" title="var">finite_validator</span></span>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sec_composite</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  `{finite.Finite index}
  (IM : index -&gt; VLSM message)
  (Free := free_composite_vlsm IM)
  `{<span class="kr">forall</span> <span class="nv">i</span> : index, (HasBeenSentCapability (IM i))}
  `{<span class="kr">forall</span> <span class="nv">i</span> : index, (HasBeenReceivedCapability (IM i))}
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sec_stepwise_props</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  [message_selectors : <span class="kr">forall</span> <span class="nv">i</span> : index, message -&gt; transition_item (IM i) -&gt; <span class="kt">Prop</span>]
  [oracles : <span class="kr">forall</span> <span class="nv">i</span>, state_message_oracle (IM i)]
  (stepwise_props : <span class="kr">forall</span> <span class="nv">i</span>, oracle_stepwise_props (message_selectors i) (oracles i))
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk21b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk21b"><span class="kn">Definition</span> <span class="nf">composite_message_selector</span> : message -&gt; composite_transition_item IM -&gt; <span class="kt">Prop</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">message ‚Üí composite_transition_item IM ‚Üí <span class="kt">Prop</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk21c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk21c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">message ‚Üí composite_transition_item IM ‚Üí <span class="kt">Prop</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk21d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk21d"><span class="nb">intros</span> msg [[i li] input s output].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (composite_type IM)</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">Prop</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk21e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk21e"><span class="nb">apply</span> (message_selectors i msg).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (composite_type IM)</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transition_item</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> {| l := li; input := input; destination := s i; output := output |}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">composite_oracle</span> : composite_state IM -&gt; message -&gt; <span class="kt">Prop</span> :=
  <span class="kr">fun</span> <span class="nv">s</span> <span class="nv">msg</span> =&gt; <span class="kr">exists</span> <span class="nv">i</span>, oracles i (s i) msg.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk21f" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk21f"><span class="kn">Lemma</span> <span class="nf">free_composite_stepwise_props</span> :
  oracle_stepwise_props (vlsm := free_composite_vlsm IM) composite_message_selector composite_oracle.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle_stepwise_props composite_message_selector
  composite_oracle</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk220" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk220"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle_stepwise_props composite_message_selector
  composite_oracle</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk221" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk221"><span class="nb">split</span>; [<span class="bp">by</span> <span class="nb">intros</span> s Hs m []; <span class="nb">eapply</span> oracle_no_inits |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label
         (preloaded_with_all_messages_vlsm
            (free_composite_vlsm IM))) (<span class="nv">s</span> : state
                                              (preloaded_with_all_messages_vlsm
                                                 (free_composite_vlsm
                                                 IM))) 
  (<span class="nv">im</span> : option message) (<span class="nv">s&#39;</span> : state
                                (preloaded_with_all_messages_vlsm
                                   (free_composite_vlsm
                                      IM))) (<span class="nv">om</span> : 
                                             option
                                               message),
  input_constrained_transition
    (free_composite_vlsm IM) l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      composite_oracle s&#39; msg
      ‚Üî composite_message_selector msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |} ‚à® composite_oracle s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk222" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk222"><span class="nb">intros</span> [i li] s im s&#39; om Hproto msg; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>input_constrained_transition
  (free_composite_vlsm IM) 
  (existT i li) (s, im) (
  s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_oracle s&#39; msg
‚Üî message_selectors i msg
    {|
      l := li;
      input := im;
      destination := s&#39; i;
      output := om
    |} ‚à® composite_oracle s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk223" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk223"><span class="nb">assert</span> (Hsj : <span class="kr">forall</span> <span class="nv">j</span> : index, s j = s&#39; j \/ j = i).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>input_constrained_transition
  (free_composite_vlsm IM) 
  (existT i li) (s, im) (
  s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">j</span> : index, s j = s&#39; j ‚à® j = i</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk224" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>input_constrained_transition
  (free_composite_vlsm IM) 
  (existT i li) (s, im) (
  s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsj</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">j</span> : index, s j = s&#39; j ‚à® j = i</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk224"><hr></label><div class="goal-conclusion">composite_oracle s&#39; msg
‚Üî message_selectors i msg
    {|
      l := li;
      input := im;
      destination := s&#39; i;
      output := om
    |} ‚à® composite_oracle s msg</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk225" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk225">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>input_constrained_transition
  (free_composite_vlsm IM) 
  (existT i li) (s, im) (
  s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">j</span> : index, s j = s&#39; j ‚à® j = i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk226" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk226"><span class="nb">intro</span> j.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>input_constrained_transition
  (free_composite_vlsm IM) 
  (existT i li) (s, im) (
  s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s j = s&#39; j ‚à® j = i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk227" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk227"><span class="nb">apply</span> (input_valid_transition_preloaded_project_any_free j) <span class="kr">in</span> Hproto.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>s j = s&#39; j
‚à® (<span class="kr">‚àÉ</span> <span class="nv">li0</span> : label (IM j),
     existT i li = existT j li0
     ‚àß input_constrained_transition 
         (IM j) li0 (s j, im) (
         s&#39; j, om))</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s j = s&#39; j ‚à® j = i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> Hproto <span class="kr">as</span> [| (lj &amp; Hlj &amp; _)]; [<span class="nb">left</span> | <span class="nb">right</span>; <span class="bp">congruence</span>].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk228" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk228">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>input_constrained_transition
  (free_composite_vlsm IM) 
  (existT i li) (s, im) (
  s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsj</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">j</span> : index, s j = s&#39; j ‚à® j = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_oracle s&#39; msg
‚Üî message_selectors i msg
    {|
      l := li;
      input := im;
      destination := s&#39; i;
      output := om
    |} ‚à® composite_oracle s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk229" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk229"><span class="nb">apply</span> input_valid_transition_preloaded_project_active_free <span class="kr">in</span> Hproto; <span class="nb">simpl</span> <span class="kr">in</span> Hproto.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>input_constrained_transition 
  (IM i) li (s i, im) (
  s&#39; i, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsj</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">j</span> : index, s j = s&#39; j ‚à® j = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_oracle s&#39; msg
‚Üî message_selectors i msg
    {|
      l := li;
      input := im;
      destination := s&#39; i;
      output := om
    |} ‚à® composite_oracle s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk22a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk22a"><span class="nb">apply</span> (oracle_step_update (stepwise_props i)) <span class="kr">with</span> (msg := msg) <span class="kr">in</span> Hproto.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>oracles i (s&#39; i) msg
‚Üî message_selectors i msg
    {|
      l := li;
      input := im;
      destination := s&#39; i;
      output := om
    |} ‚à® oracles i (s i) msg</span></span></span><br><span><var>Hsj</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">j</span> : index, s j = s&#39; j ‚à® j = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_oracle s&#39; msg
‚Üî message_selectors i msg
    {|
      l := li;
      input := im;
      destination := s&#39; i;
      output := om
    |} ‚à® composite_oracle s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk22b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk22b"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>oracles i (s&#39; i) msg
‚Üî message_selectors i msg
    {|
      l := li;
      input := im;
      destination := s&#39; i;
      output := om
    |} ‚à® oracles i (s i) msg</span></span></span><br><span><var>Hsj</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">j</span> : index, s j = s&#39; j ‚à® j = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_oracle s&#39; msg
‚Üí message_selectors i msg
    {|
      l := li;
      input := im;
      destination := s&#39; i;
      output := om
    |} ‚à® composite_oracle s msg</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk22c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>oracles i (s&#39; i) msg
‚Üî message_selectors i msg
    {|
      l := li;
      input := im;
      destination := s&#39; i;
      output := om
    |} ‚à® oracles i (s i) msg</span></span></span><br><span><var>Hsj</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">j</span> : index, s j = s&#39; j ‚à® j = i</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk22c"><hr></label><div class="goal-conclusion">message_selectors i msg
  {|
    l := li;
    input := im;
    destination := s&#39; i;
    output := om
  |} ‚à® composite_oracle s msg
‚Üí composite_oracle s&#39; msg</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk22d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk22d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>oracles i (s&#39; i) msg
‚Üî message_selectors i msg
    {|
      l := li;
      input := im;
      destination := s&#39; i;
      output := om
    |} ‚à® oracles i (s i) msg</span></span></span><br><span><var>Hsj</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">j</span> : index, s j = s&#39; j ‚à® j = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_oracle s&#39; msg
‚Üí message_selectors i msg
    {|
      l := li;
      input := im;
      destination := s&#39; i;
      output := om
    |} ‚à® composite_oracle s msg</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk22e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk22e"><span class="nb">intros</span> [j Hj].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>oracles i (s&#39; i) msg
‚Üî message_selectors i msg
    {|
      l := li;
      input := im;
      destination := s&#39; i;
      output := om
    |} ‚à® oracles i (s i) msg</span></span></span><br><span><var>Hsj</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">j</span> : index, s j = s&#39; j ‚à® j = i</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>oracles j (s&#39; j) msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">message_selectors i msg
  {|
    l := li;
    input := im;
    destination := s&#39; i;
    output := om
  |} ‚à® composite_oracle s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk22f" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk22f"><span class="nb">destruct</span> (Hsj j) <span class="kr">as</span> [Hunchanged | -&gt;].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>oracles i (s&#39; i) msg
‚Üî message_selectors i msg
    {|
      l := li;
      input := im;
      destination := s&#39; i;
      output := om
    |} ‚à® oracles i (s i) msg</span></span></span><br><span><var>Hsj</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">j</span> : index, s j = s&#39; j ‚à® j = i</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>oracles j (s&#39; j) msg</span></span></span><br><span><var>Hunchanged</var><span class="hyp-type"><b>: </b><span>s j = s&#39; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">message_selectors i msg
  {|
    l := li;
    input := im;
    destination := s&#39; i;
    output := om
  |} ‚à® composite_oracle s msg</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk230" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>oracles i (s&#39; i) msg
‚Üî message_selectors i msg
    {|
      l := li;
      input := im;
      destination := s&#39; i;
      output := om
    |} ‚à® oracles i (s i) msg</span></span></span><br><span><var>Hsj</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">j</span> : index, s j = s&#39; j ‚à® j = i</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>oracles i (s&#39; i) msg</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk230"><hr></label><div class="goal-conclusion">message_selectors i msg
  {|
    l := li;
    input := im;
    destination := s&#39; i;
    output := om
  |} ‚à® composite_oracle s msg</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk231" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk231">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>oracles i (s&#39; i) msg
‚Üî message_selectors i msg
    {|
      l := li;
      input := im;
      destination := s&#39; i;
      output := om
    |} ‚à® oracles i (s i) msg</span></span></span><br><span><var>Hsj</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">j</span> : index, s j = s&#39; j ‚à® j = i</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>oracles j (s&#39; j) msg</span></span></span><br><span><var>Hunchanged</var><span class="hyp-type"><b>: </b><span>s j = s&#39; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">message_selectors i msg
  {|
    l := li;
    input := im;
    destination := s&#39; i;
    output := om
  |} ‚à® composite_oracle s msg</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">right</span>; <span class="kr">exists</span> <span class="nv">j</span>; <span class="nb">rewrite</span> Hunchanged.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk232" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk232">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>oracles i (s&#39; i) msg
‚Üî message_selectors i msg
    {|
      l := li;
      input := im;
      destination := s&#39; i;
      output := om
    |} ‚à® oracles i (s i) msg</span></span></span><br><span><var>Hsj</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">j</span> : index, s j = s&#39; j ‚à® j = i</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>oracles i (s&#39; i) msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">message_selectors i msg
  {|
    l := li;
    input := im;
    destination := s&#39; i;
    output := om
  |} ‚à® composite_oracle s msg</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk233" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk233"><span class="nb">apply</span> Hproto <span class="kr">in</span> Hj.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>oracles i (s&#39; i) msg
‚Üî message_selectors i msg
    {|
      l := li;
      input := im;
      destination := s&#39; i;
      output := om
    |} ‚à® oracles i (s i) msg</span></span></span><br><span><var>Hsj</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">j</span> : index, s j = s&#39; j ‚à® j = i</span></span></span><br><span><var>Hj</var><span class="hyp-type"><b>: </b><span>message_selectors i msg
  {|
    l := li;
    input := im;
    destination := s&#39; i;
    output := om
  |} ‚à® oracles i (s i) msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">message_selectors i msg
  {|
    l := li;
    input := im;
    destination := s&#39; i;
    output := om
  |} ‚à® composite_oracle s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> Hj; [<span class="nb">left</span> | <span class="nb">right</span>; <span class="kr">exists</span> <span class="nv">i</span>].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk234" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk234">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>oracles i (s&#39; i) msg
‚Üî message_selectors i msg
    {|
      l := li;
      input := im;
      destination := s&#39; i;
      output := om
    |} ‚à® oracles i (s i) msg</span></span></span><br><span><var>Hsj</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">j</span> : index, s j = s&#39; j ‚à® j = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">message_selectors i msg
  {|
    l := li;
    input := im;
    destination := s&#39; i;
    output := om
  |} ‚à® composite_oracle s msg
‚Üí composite_oracle s&#39; msg</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk235" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk235"><span class="nb">intros</span> [Hnow | [j Hbefore]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>oracles i (s&#39; i) msg
‚Üî message_selectors i msg
    {|
      l := li;
      input := im;
      destination := s&#39; i;
      output := om
    |} ‚à® oracles i (s i) msg</span></span></span><br><span><var>Hsj</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">j</span> : index, s j = s&#39; j ‚à® j = i</span></span></span><br><span><var>Hnow</var><span class="hyp-type"><b>: </b><span>message_selectors i msg
  {|
    l := li;
    input := im;
    destination := s&#39; i;
    output := om
  |}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_oracle s&#39; msg</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk236" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>oracles i (s&#39; i) msg
‚Üî message_selectors i msg
    {|
      l := li;
      input := im;
      destination := s&#39; i;
      output := om
    |} ‚à® oracles i (s i) msg</span></span></span><br><span><var>Hsj</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">j</span> : index, s j = s&#39; j ‚à® j = i</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hbefore</var><span class="hyp-type"><b>: </b><span>oracles j (s j) msg</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk236"><hr></label><div class="goal-conclusion">composite_oracle s&#39; msg</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk237" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk237">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>oracles i (s&#39; i) msg
‚Üî message_selectors i msg
    {|
      l := li;
      input := im;
      destination := s&#39; i;
      output := om
    |} ‚à® oracles i (s i) msg</span></span></span><br><span><var>Hsj</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">j</span> : index, s j = s&#39; j ‚à® j = i</span></span></span><br><span><var>Hnow</var><span class="hyp-type"><b>: </b><span>message_selectors i msg
  {|
    l := li;
    input := im;
    destination := s&#39; i;
    output := om
  |}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_oracle s&#39; msg</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="kr">exists</span> <span class="nv">i</span>; <span class="nb">apply</span> Hproto; <span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk238" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk238">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>oracles i (s&#39; i) msg
‚Üî message_selectors i msg
    {|
      l := li;
      input := im;
      destination := s&#39; i;
      output := om
    |} ‚à® oracles i (s i) msg</span></span></span><br><span><var>Hsj</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">j</span> : index, s j = s&#39; j ‚à® j = i</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hbefore</var><span class="hyp-type"><b>: </b><span>oracles j (s j) msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_oracle s&#39; msg</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk239" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk239"><span class="kr">exists</span> <span class="nv">j</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>oracles i (s&#39; i) msg
‚Üî message_selectors i msg
    {|
      l := li;
      input := im;
      destination := s&#39; i;
      output := om
    |} ‚à® oracles i (s i) msg</span></span></span><br><span><var>Hsj</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">j</span> : index, s j = s&#39; j ‚à® j = i</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hbefore</var><span class="hyp-type"><b>: </b><span>oracles j (s j) msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracles j (s&#39; j) msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk23a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk23a"><span class="nb">destruct</span> (Hsj j) <span class="kr">as</span> [&lt;- | -&gt;]; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>oracles i (s&#39; i) msg
‚Üî message_selectors i msg
    {|
      l := li;
      input := im;
      destination := s&#39; i;
      output := om
    |} ‚à® oracles i (s i) msg</span></span></span><br><span><var>Hsj</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">j</span> : index, s j = s&#39; j ‚à® j = i</span></span></span><br><span><var>Hbefore</var><span class="hyp-type"><b>: </b><span>oracles i (s i) msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracles i (s&#39; i) msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> Hproto; <span class="nb">right</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk23b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk23b"><span class="kn">Lemma</span> <span class="nf">composite_stepwise_props</span>
  (<span class="nv">constraint</span> : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">X</span> := composite_vlsm IM constraint)
  : oracle_stepwise_props (vlsm := X) composite_message_selector composite_oracle.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle_stepwise_props composite_message_selector
  composite_oracle</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk23c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk23c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle_stepwise_props composite_message_selector
  composite_oracle</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk23d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk23d"><span class="nb">destruct</span> free_composite_stepwise_props.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>oracle_no_inits0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (free_composite_vlsm IM),
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      ¬¨ composite_oracle s m</span></span></span><br><span><var>oracle_step_update0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label
         (preloaded_with_all_messages_vlsm
            (free_composite_vlsm
               IM))) (<span class="nv">s</span> : 
                      state
                      (preloaded_with_all_messages_vlsm
                      (free_composite_vlsm
                      IM))) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             (free_composite_vlsm
                IM))) (<span class="nv">om</span> : 
                      option
                      message),
  input_constrained_transition
    (free_composite_vlsm IM) l
    (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      composite_oracle s&#39; msg
      ‚Üî composite_message_selector
          msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |}
        ‚à® composite_oracle s msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle_stepwise_props composite_message_selector
  composite_oracle</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk23e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk23e"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>oracle_no_inits0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (free_composite_vlsm IM),
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      ¬¨ composite_oracle s m</span></span></span><br><span><var>oracle_step_update0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label
         (preloaded_with_all_messages_vlsm
            (free_composite_vlsm
               IM))) (<span class="nv">s</span> : 
                      state
                      (preloaded_with_all_messages_vlsm
                      (free_composite_vlsm
                      IM))) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             (free_composite_vlsm
                IM))) (<span class="nv">om</span> : 
                      option
                      message),
  input_constrained_transition
    (free_composite_vlsm IM) l
    (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      composite_oracle s&#39; msg
      ‚Üî composite_message_selector
          msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |}
        ‚à® composite_oracle s msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state X,
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message, ¬¨ composite_oracle s m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk23f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>oracle_no_inits0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (free_composite_vlsm IM),
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      ¬¨ composite_oracle s m</span></span></span><br><span><var>oracle_step_update0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label
         (preloaded_with_all_messages_vlsm
            (free_composite_vlsm
               IM))) (<span class="nv">s</span> : 
                      state
                      (preloaded_with_all_messages_vlsm
                      (free_composite_vlsm
                      IM))) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             (free_composite_vlsm
                IM))) (<span class="nv">om</span> : 
                      option
                      message),
  input_constrained_transition
    (free_composite_vlsm IM) l
    (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      composite_oracle s&#39; msg
      ‚Üî composite_message_selector
          msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |}
        ‚à® composite_oracle s msg</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk23f"><hr></label><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">s</span> : state (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">om</span> : option message),
  input_constrained_transition X l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      composite_oracle s&#39; msg
      ‚Üî composite_message_selector msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |} ‚à® composite_oracle s msg</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk240" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk240">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>oracle_no_inits0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (free_composite_vlsm IM),
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      ¬¨ composite_oracle s m</span></span></span><br><span><var>oracle_step_update0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label
         (preloaded_with_all_messages_vlsm
            (free_composite_vlsm
               IM))) (<span class="nv">s</span> : 
                      state
                      (preloaded_with_all_messages_vlsm
                      (free_composite_vlsm
                      IM))) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             (free_composite_vlsm
                IM))) (<span class="nv">om</span> : 
                      option
                      message),
  input_constrained_transition
    (free_composite_vlsm IM) l
    (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      composite_oracle s&#39; msg
      ‚Üî composite_message_selector
          msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |}
        ‚à® composite_oracle s msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : state X,
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message, ¬¨ composite_oracle s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> oracle_no_inits0.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk241" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk241">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>oracle_no_inits0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (free_composite_vlsm IM),
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      ¬¨ composite_oracle s m</span></span></span><br><span><var>oracle_step_update0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label
         (preloaded_with_all_messages_vlsm
            (free_composite_vlsm
               IM))) (<span class="nv">s</span> : 
                      state
                      (preloaded_with_all_messages_vlsm
                      (free_composite_vlsm
                      IM))) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             (free_composite_vlsm
                IM))) (<span class="nv">om</span> : 
                      option
                      message),
  input_constrained_transition
    (free_composite_vlsm IM) l
    (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      composite_oracle s&#39; msg
      ‚Üî composite_message_selector
          msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |}
        ‚à® composite_oracle s msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">s</span> : state (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">im</span> : option message) (<span class="nv">s&#39;</span> : state
                                (preloaded_with_all_messages_vlsm
                                   X)) (<span class="nv">om</span> : option
                                               message),
  input_constrained_transition X l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      composite_oracle s&#39; msg
      ‚Üî composite_message_selector msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |} ‚à® composite_oracle s msg</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk242" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk242"><span class="nb">intros</span>; <span class="nb">apply</span> oracle_step_update0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>oracle_no_inits0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (free_composite_vlsm IM),
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      ¬¨ composite_oracle s m</span></span></span><br><span><var>oracle_step_update0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label
         (preloaded_with_all_messages_vlsm
            (free_composite_vlsm
               IM))) (<span class="nv">s</span> : 
                      state
                      (preloaded_with_all_messages_vlsm
                      (free_composite_vlsm
                      IM))) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             (free_composite_vlsm
                IM))) (<span class="nv">om</span> : 
                      option
                      message),
  input_constrained_transition
    (free_composite_vlsm IM) l
    (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      composite_oracle s&#39; msg
      ‚Üî composite_message_selector
          msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |}
        ‚à® composite_oracle s msg</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>input_constrained_transition X l (s, im) (s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_constrained_transition (free_composite_vlsm IM)
  l (s, im) (s&#39;, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk243" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk243"><span class="nb">apply</span> (@VLSM_incl_input_valid_transition _ _ (preloaded_with_all_messages_vlsm X)); [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>oracle_no_inits0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (free_composite_vlsm IM),
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      ¬¨ composite_oracle s m</span></span></span><br><span><var>oracle_step_update0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label
         (preloaded_with_all_messages_vlsm
            (free_composite_vlsm
               IM))) (<span class="nv">s</span> : 
                      state
                      (preloaded_with_all_messages_vlsm
                      (free_composite_vlsm
                      IM))) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             (free_composite_vlsm
                IM))) (<span class="nv">om</span> : 
                      option
                      message),
  input_constrained_transition
    (free_composite_vlsm IM) l
    (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      composite_oracle s&#39; msg
      ‚Üî composite_message_selector
          msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |}
        ‚à® composite_oracle s msg</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>input_constrained_transition X l (s, im) (s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl_part (preloaded_with_all_messages_vlsm X)
  (preloaded_vlsm_machine (free_composite_vlsm IM)
     (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> preloaded_constraint_subsumption_incl_free.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk244" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk244"><span class="kn">Lemma</span> <span class="nf">oracle_component_selected_previously</span>
  [constraint : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>]
  (X := composite_vlsm IM constraint)
  [s : composite_state IM]
  (Hs : valid_state_prop X s)
  [i : index]
  [m : message]
  (Horacle : oracles i (s i) m) :
  <span class="kr">exists</span> <span class="nv">s_item</span> <span class="nv">item</span>,
    input_valid_transition_item X s_item item /\
    in_futures X (destination item) s /\
    projT1 (l item) = i /\
    composite_message_selector m item.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracles i (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s_item</span> : state X) (<span class="nv">item</span> : transition_item),
  input_valid_transition_item X s_item item
  ‚àß in_futures X (destination item) s
    ‚àß projT1 (l item) = i
      ‚àß composite_message_selector m item</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk245" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk245"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracles i (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s_item</span> : state X) (<span class="nv">item</span> : transition_item),
  input_valid_transition_item X s_item item
  ‚àß in_futures X (destination item) s
    ‚àß projT1 (l item) = i
      ‚àß composite_message_selector m item</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk246" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk246"><span class="nb">apply</span> valid_state_has_trace <span class="kr">in</span> Hs <span class="kr">as</span> (<span class="kr">is</span> &amp; tr &amp; Htr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracles i (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s_item</span> : state X) (<span class="nv">item</span> : transition_item),
  input_valid_transition_item X s_item item
  ‚àß in_futures X (destination item) s
    ‚àß projT1 (l item) = i
      ‚àß composite_message_selector m item</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk247" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk247"><span class="nb">eapply</span> VLSM_incl_finite_valid_trace_init_to <span class="kr">in</span> Htr <span class="kr">as</span> Hpre_tr
  ; [| <span class="bp">by</span> <span class="nb">apply</span> constrained_preloaded_incl].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracles i (s i) m</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  {|
    vlsm_type := free_composite_vlsm IM;
    vlsm_machine :=
      preloaded_with_all_messages_vlsm
        (free_composite_vlsm IM)
  |} <span class="kr">is</span> s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s_item</span> : state X) (<span class="nv">item</span> : transition_item),
  input_valid_transition_item X s_item item
  ‚àß in_futures X (destination item) s
    ‚àß projT1 (l item) = i
      ‚àß composite_message_selector m item</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk248" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk248"><span class="nb">apply</span> (VLSM_projection_finite_valid_trace_init_to
          (preloaded_component_projection IM i))
     <span class="kr">in</span> Hpre_tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>oracles i (s i) m</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm (IM i))
  (<span class="kr">is</span> i) (s i)
  (VLSM_projection_finite_trace_project
     (preloaded_component_projection IM i)
     tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s_item</span> : state X) (<span class="nv">item</span> : transition_item),
  input_valid_transition_item X s_item item
  ‚àß in_futures X (destination item) s
    ‚àß projT1 (l item) = i
      ‚àß composite_message_selector m item</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk249" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk249"><span class="nb">eapply</span> prove_all_have_message_from_stepwise <span class="kr">in</span> Horacle
  ; [| <span class="bp">by</span> <span class="nb">apply</span> stepwise_props | <span class="bp">by</span> <span class="nb">eapply</span> finite_valid_trace_from_to_last_pstate, Hpre_tr].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm (IM i))
  (<span class="kr">is</span> i) (s i)
  (VLSM_projection_finite_trace_project
     (preloaded_component_projection IM i)
     tr)</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_all_preloaded_traces
  (IM i) (message_selectors i) 
  (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s_item</span> : state X) (<span class="nv">item</span> : transition_item),
  input_valid_transition_item X s_item item
  ‚àß in_futures X (destination item) s
    ‚àß projT1 (l item) = i
      ‚àß composite_message_selector m item</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk24a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk24a"><span class="nb">specialize</span> (Horacle _ _ Hpre_tr); <span class="nb">clear</span> Hpre_tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>trace_has_message (message_selectors i) m
  (VLSM_projection_finite_trace_project
     (preloaded_component_projection IM i)
     tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s_item</span> : state X) (<span class="nv">item</span> : transition_item),
  input_valid_transition_item X s_item item
  ‚àß in_futures X (destination item) s
    ‚àß projT1 (l item) = i
      ‚àß composite_message_selector m item</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk24b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk24b"><span class="nb">apply</span> Exists_exists <span class="kr">in</span> Horacle <span class="kr">as</span> (item &amp; Hitem &amp; Hout).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item
‚àà VLSM_projection_finite_trace_project
    (preloaded_component_projection IM i) tr</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>message_selectors i m item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s_item</span> : state X) (<span class="nv">item</span> : transition_item),
  input_valid_transition_item X s_item item
  ‚àß in_futures X (destination item) s
    ‚àß projT1 (l item) = i
      ‚àß composite_message_selector m item</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk24c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk24c"><span class="nb">apply</span> elem_of_list_omap <span class="kr">in</span> Hitem <span class="kr">as</span> (itemX &amp; HitemX &amp; HitemX_pr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>item, itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>HitemX</var><span class="hyp-type"><b>: </b><span>itemX ‚àà tr</span></span></span><br><span><var>HitemX_pr</var><span class="hyp-type"><b>: </b><span>pre_VLSM_projection_transition_item_project
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (preloaded_with_all_messages_vlsm (IM i))
  (composite_project_label IM i)
  (<span class="kr">Œª</span> <span class="nv">s</span> : state
           (preloaded_with_all_messages_vlsm
              (free_composite_vlsm IM)),
     s i) itemX = Some item</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>message_selectors i m item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s_item</span> : state X) (<span class="nv">item</span> : transition_item),
  input_valid_transition_item X s_item item
  ‚àß in_futures X (destination item) s
    ‚àß projT1 (l item) = i
      ‚àß composite_message_selector m item</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk24d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk24d"><span class="nb">apply</span> elem_of_list_split <span class="kr">in</span> HitemX <span class="kr">as</span> (pre &amp; suf &amp; Htr_pr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>item, itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr_pr</var><span class="hyp-type"><b>: </b><span>tr = pre ++ itemX :: suf</span></span></span><br><span><var>HitemX_pr</var><span class="hyp-type"><b>: </b><span>pre_VLSM_projection_transition_item_project
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (preloaded_with_all_messages_vlsm (IM i))
  (composite_project_label IM i)
  (<span class="kr">Œª</span> <span class="nv">s</span> : state
           (preloaded_with_all_messages_vlsm
              (free_composite_vlsm IM)),
     s i) itemX = Some item</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>message_selectors i m item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s_item</span> : state X) (<span class="nv">item</span> : transition_item),
  input_valid_transition_item X s_item item
  ‚àß in_futures X (destination item) s
    ‚àß projT1 (l item) = i
      ‚àß composite_message_selector m item</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk24e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk24e"><span class="kr">exists</span> (<span class="nv">finite_trace_last</span> <span class="nv">is</span> <span class="nv">pre</span>), itemX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>item, itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr_pr</var><span class="hyp-type"><b>: </b><span>tr = pre ++ itemX :: suf</span></span></span><br><span><var>HitemX_pr</var><span class="hyp-type"><b>: </b><span>pre_VLSM_projection_transition_item_project
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (preloaded_with_all_messages_vlsm (IM i))
  (composite_project_label IM i)
  (<span class="kr">Œª</span> <span class="nv">s</span> : state
           (preloaded_with_all_messages_vlsm
              (free_composite_vlsm IM)),
     s i) itemX = Some item</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>message_selectors i m item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition_item X
  (finite_trace_last <span class="kr">is</span> pre) itemX
‚àß in_futures X (destination itemX) s
  ‚àß projT1 (l itemX) = i
    ‚àß composite_message_selector m itemX</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk24f" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk24f"><span class="nb">rewrite</span> cons_middle <span class="kr">in</span> Htr_pr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>item, itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr_pr</var><span class="hyp-type"><b>: </b><span>tr = pre ++ [itemX] ++ suf</span></span></span><br><span><var>HitemX_pr</var><span class="hyp-type"><b>: </b><span>pre_VLSM_projection_transition_item_project
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (preloaded_with_all_messages_vlsm (IM i))
  (composite_project_label IM i)
  (<span class="kr">Œª</span> <span class="nv">s</span> : state
           (preloaded_with_all_messages_vlsm
              (free_composite_vlsm IM)),
     s i) itemX = Some item</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>message_selectors i m item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition_item X
  (finite_trace_last <span class="kr">is</span> pre) itemX
‚àß in_futures X (destination itemX) s
  ‚àß projT1 (l itemX) = i
    ‚àß composite_message_selector m itemX</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk250" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk250"><span class="nb">eapply</span> (input_valid_transition_to X) <span class="kr">in</span> Htr_pr <span class="kr">as</span> Ht
  ; [<span class="nb">cbn</span> <span class="kr">in</span> Ht | <span class="bp">by</span> <span class="nb">apply</span> valid_trace_forget_last <span class="kr">in</span> Htr; <span class="nb">apply</span> Htr].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>item, itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr_pr</var><span class="hyp-type"><b>: </b><span>tr = pre ++ [itemX] ++ suf</span></span></span><br><span><var>HitemX_pr</var><span class="hyp-type"><b>: </b><span>pre_VLSM_projection_transition_item_project
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (preloaded_with_all_messages_vlsm (IM i))
  (composite_project_label IM i)
  (<span class="kr">Œª</span> <span class="nv">s</span> : state
           (preloaded_with_all_messages_vlsm
              (free_composite_vlsm IM)),
     s i) itemX = Some item</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>message_selectors i m item</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition X 
  (l itemX)
  (finite_trace_last <span class="kr">is</span> pre, input itemX)
  (destination itemX, output itemX)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition_item X
  (finite_trace_last <span class="kr">is</span> pre) itemX
‚àß in_futures X (destination itemX) s
  ‚àß projT1 (l itemX) = i
    ‚àß composite_message_selector m itemX</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk251" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk251"><span class="nb">unfold</span> pre_VLSM_projection_transition_item_project,
         composite_project_label <span class="kr">in</span> HitemX_pr; <span class="nb">cbn</span> <span class="kr">in</span> HitemX_pr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>item, itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr_pr</var><span class="hyp-type"><b>: </b><span>tr = pre ++ [itemX] ++ suf</span></span></span><br><span><var>HitemX_pr</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span>
  <span class="kr">match</span> decide (i = projT1 (l itemX)) <span class="kr">with</span>
  | <span class="nb">left</span> e =&gt;
      Some
        (eq_rect_r
           (<span class="kr">Œª</span> <span class="nv">n</span> : index, label (IM n))
           (projT2 (l itemX)) e)
  | <span class="nb">right</span> _ =&gt; None
  <span class="kr">end</span>
<span class="kr">with</span>
| Some lY =&gt;
    Some
      {|
        l := lY;
        input := input itemX;
        destination := destination itemX i;
        output := output itemX
      |}
| None =&gt; None
<span class="kr">end</span> = Some item</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>message_selectors i m item</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition X 
  (l itemX)
  (finite_trace_last <span class="kr">is</span> pre, input itemX)
  (destination itemX, output itemX)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition_item X
  (finite_trace_last <span class="kr">is</span> pre) itemX
‚àß in_futures X (destination itemX) s
  ‚àß projT1 (l itemX) = i
    ‚àß composite_message_selector m itemX</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk252" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk252"><span class="nb">rewrite</span> app_assoc <span class="kr">in</span> Htr_pr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>item, itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr_pr</var><span class="hyp-type"><b>: </b><span>tr = (pre ++ [itemX]) ++ suf</span></span></span><br><span><var>HitemX_pr</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span>
  <span class="kr">match</span> decide (i = projT1 (l itemX)) <span class="kr">with</span>
  | <span class="nb">left</span> e =&gt;
      Some
        (eq_rect_r
           (<span class="kr">Œª</span> <span class="nv">n</span> : index, label (IM n))
           (projT2 (l itemX)) e)
  | <span class="nb">right</span> _ =&gt; None
  <span class="kr">end</span>
<span class="kr">with</span>
| Some lY =&gt;
    Some
      {|
        l := lY;
        input := input itemX;
        destination := destination itemX i;
        output := output itemX
      |}
| None =&gt; None
<span class="kr">end</span> = Some item</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>message_selectors i m item</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition X 
  (l itemX)
  (finite_trace_last <span class="kr">is</span> pre, input itemX)
  (destination itemX, output itemX)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition_item X
  (finite_trace_last <span class="kr">is</span> pre) itemX
‚àß in_futures X (destination itemX) s
  ‚àß projT1 (l itemX) = i
    ‚àß composite_message_selector m itemX</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk253" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk253">case_decide <span class="kr">as</span> Hi; [| <span class="bp">by</span> <span class="bp">congruence</span>]; <span class="nb">apply</span> Some_inj <span class="kr">in</span> HitemX_pr
  ; <span class="nb">subst</span> i item tr; <span class="nb">cbn</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X <span class="kr">is</span> s
  ((pre ++ [itemX]) ++ suf)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>message_selectors (projT1 (l itemX)) m
  {|
    l := projT2 (l itemX);
    input := input itemX;
    destination :=
      destination itemX (projT1 (l itemX));
    output := output itemX
  |}</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition X 
  (l itemX)
  (finite_trace_last <span class="kr">is</span> pre, input itemX)
  (destination itemX, output itemX)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition_item X
  (finite_trace_last <span class="kr">is</span> pre) itemX
‚àß in_futures X (destination itemX) s
  ‚àß projT1 (l itemX) = projT1 (l itemX)
    ‚àß composite_message_selector m itemX</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk254" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk254"><span class="nb">apply</span> proj1, finite_valid_trace_from_to_app_split, proj2 <span class="kr">in</span> Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X
  (finite_trace_last <span class="kr">is</span> (pre ++ [itemX])) s suf</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>message_selectors (projT1 (l itemX)) m
  {|
    l := projT2 (l itemX);
    input := input itemX;
    destination :=
      destination itemX (projT1 (l itemX));
    output := output itemX
  |}</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition X 
  (l itemX)
  (finite_trace_last <span class="kr">is</span> pre, input itemX)
  (destination itemX, output itemX)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition_item X
  (finite_trace_last <span class="kr">is</span> pre) itemX
‚àß in_futures X (destination itemX) s
  ‚àß projT1 (l itemX) = projT1 (l itemX)
    ‚àß composite_message_selector m itemX</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk255" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk255"><span class="nb">rewrite</span> finite_trace_last_is_last <span class="kr">in</span> Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>itemX</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X 
  (destination itemX) s suf</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>message_selectors (projT1 (l itemX)) m
  {|
    l := projT2 (l itemX);
    input := input itemX;
    destination :=
      destination itemX (projT1 (l itemX));
    output := output itemX
  |}</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition X 
  (l itemX)
  (finite_trace_last <span class="kr">is</span> pre, input itemX)
  (destination itemX, output itemX)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition_item X
  (finite_trace_last <span class="kr">is</span> pre) itemX
‚àß in_futures X (destination itemX) s
  ‚àß projT1 (l itemX) = projT1 (l itemX)
    ‚àß composite_message_selector m itemX</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk256" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk256"><span class="nb">destruct</span> itemX, l; <span class="nb">cbn</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>message_selectors</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>oracles</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, state_message_oracle (IM i)</span></span></span><br><span><var>stepwise_props</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  oracle_stepwise_props
    (message_selectors i) 
    (oracles i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (IM x)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>pre, suf</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X destination s suf</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hout</var><span class="hyp-type"><b>: </b><span>message_selectors x m
  {|
    l := l;
    input := input;
    destination := destination x;
    output := output
  |}</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition X 
  (existT x l) (finite_trace_last <span class="kr">is</span> pre, input)
  (destination, output)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition_item X
  (finite_trace_last <span class="kr">is</span> pre)
  {|
    l := existT x l;
    input := input;
    destination := destination;
    output := output
  |}
‚àß in_futures X destination s
  ‚àß x = x
    ‚àß message_selectors x m
        {|
          l := l;
          input := input;
          destination := destination x;
          output := output
        |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> split_and!; [| <span class="kr">exists</span> <span class="nv">suf</span> | ..].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sec_stepwise_props</span>.</span></span></pre><div class="doc">
  A message <span class="inlinecode"><span class="id" title="var">has_been_sent</span></span> for a composite state if it <span class="inlinecode"><span class="id" title="var">has_been_sent</span></span>
  for any of its components.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">composite_has_been_sent</span>
  (<span class="nv">s</span> : composite_state IM)
  (<span class="nv">m</span> : message)
  : <span class="kt">Prop</span>
  := <span class="kr">exists</span> (<span class="nv">i</span> : index), has_been_sent (IM i) (s i) m.</span></span></pre><div class="doc">
<span class="inlinecode"><span class="id" title="var">composite_has_been_sent</span></span> is decidable. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk257" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk257"><span class="kn">Lemma</span> <span class="nf">composite_has_been_sent_dec</span> : RelDecision composite_has_been_sent.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RelDecision composite_has_been_sent</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk258" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk258"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RelDecision composite_has_been_sent</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk259" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk259"><span class="nb">intros</span> s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision (composite_has_been_sent s m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk25a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk25a"><span class="nb">apply</span> (Decision_iff (P := List.Exists (<span class="kr">fun</span> <span class="nv">i</span> =&gt; has_been_sent (IM i) (s i) m) (enum index))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Exists (<span class="kr">Œª</span> <span class="nv">i</span> : index, has_been_sent (IM i) (s i) m)
  (enum index) ‚Üî composite_has_been_sent s m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk25b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk25b"><hr></label><div class="goal-conclusion">Decision
  (Exists (<span class="kr">Œª</span> <span class="nv">i</span> : index, has_been_sent (IM i) (s i) m)
     (enum index))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk25c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk25c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Exists (<span class="kr">Œª</span> <span class="nv">i</span> : index, has_been_sent (IM i) (s i) m)
  (enum index) ‚Üî composite_has_been_sent s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> Exists_finite.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk25d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk25d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision
  (Exists (<span class="kr">Œª</span> <span class="nv">i</span> : index, has_been_sent (IM i) (s i) m)
     (enum index))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">typeclasses eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk25e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk25e"><span class="kn">Lemma</span> <span class="nf">free_composite_has_been_sent_stepwise_props</span>
  (<span class="nv">X</span> := free_composite_vlsm IM)
  : has_been_sent_stepwise_prop (vlsm := X) composite_has_been_sent.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent_stepwise_prop composite_has_been_sent</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk25f" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk25f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent_stepwise_prop composite_has_been_sent</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk260" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk260"><span class="nb">unfold</span> has_been_sent_stepwise_props.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent_stepwise_prop composite_has_been_sent</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk261" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk261"><span class="nb">pose proof</span> (free_composite_stepwise_props (<span class="kr">fun</span> <span class="nv">i</span> =&gt; has_been_sent_stepwise_props (IM i)))
    <span class="kr">as</span> [Hinits Hstep].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hinits</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state (free_composite_vlsm IM),
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message, ¬¨ composite_oracle s m</span></span></span><br><span><var>Hstep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label
         (preloaded_with_all_messages_vlsm
            (free_composite_vlsm IM))) 
  (<span class="nv">s</span> : state
         (preloaded_with_all_messages_vlsm
            (free_composite_vlsm IM))) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             (free_composite_vlsm IM))) 
  (<span class="nv">om</span> : option message),
  input_constrained_transition
    (free_composite_vlsm IM) l (
    s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      composite_oracle s&#39; msg
      ‚Üî composite_message_selector msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |} ‚à® composite_oracle s msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent_stepwise_prop composite_has_been_sent</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk262" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk262"><span class="nb">split</span>; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hinits</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state (free_composite_vlsm IM),
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message, ¬¨ composite_oracle s m</span></span></span><br><span><var>Hstep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label
         (preloaded_with_all_messages_vlsm
            (free_composite_vlsm IM))) 
  (<span class="nv">s</span> : state
         (preloaded_with_all_messages_vlsm
            (free_composite_vlsm IM))) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             (free_composite_vlsm IM))) 
  (<span class="nv">om</span> : option message),
  input_constrained_transition
    (free_composite_vlsm IM) l (
    s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      composite_oracle s&#39; msg
      ‚Üî composite_message_selector msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |} ‚à® composite_oracle s msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">s</span> : state (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">im</span> : option message) (<span class="nv">s&#39;</span> : state
                                (preloaded_with_all_messages_vlsm
                                   X)) (<span class="nv">om</span> : option
                                               message),
  input_constrained_transition X l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      composite_has_been_sent s&#39; msg
      ‚Üî field_selector output msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |} ‚à® composite_has_been_sent s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> l; <span class="nb">specialize</span> (Hstep l); <span class="nb">destruct</span> l.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Instance</span> <span class="nf">free_composite_HasBeenSentCapability</span>
  (<span class="nv">X</span> := free_composite_vlsm IM)
  : HasBeenSentCapability X :=
  Build_HasBeenSentCapability X
    composite_has_been_sent
    composite_has_been_sent_dec
    free_composite_has_been_sent_stepwise_props.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk263" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk263"><span class="kn">Lemma</span> <span class="nf">composite_proper_sent</span>
  (<span class="nv">s</span> : state (preloaded_with_all_messages_vlsm (free_composite_vlsm IM)))
  (<span class="nv">Hs</span> : constrained_state_prop (free_composite_vlsm IM) s)
  (<span class="nv">m</span> : message)
  : has_been_sent_prop (free_composite_vlsm IM) composite_has_been_sent s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (free_composite_vlsm IM) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent_prop (free_composite_vlsm IM)
  composite_has_been_sent s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk264" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk264"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (free_composite_vlsm IM) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent_prop (free_composite_vlsm IM)
  composite_has_been_sent s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk265" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk265"><span class="nb">specialize</span> (proper_sent (free_composite_vlsm IM)) <span class="kr">as</span> Hproper_sent.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (free_composite_vlsm IM) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hproper_sent</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm
           (free_composite_vlsm IM)),
  constrained_state_prop
    (free_composite_vlsm IM) s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      has_been_sent_prop
        (free_composite_vlsm IM)
        (has_been_sent
           (free_composite_vlsm IM)) s
        m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent_prop (free_composite_vlsm IM)
  composite_has_been_sent s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> Hproper_sent.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sec_composite_has_been_received</span>.</span></span></pre><div class="doc">
  A message <span class="inlinecode"><span class="id" title="var">has_been_received</span></span> for a composite state
  if it <span class="inlinecode"><span class="id" title="var">has_been_received</span></span> for any of its components.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">composite_has_been_received</span>
  (<span class="nv">s</span> : composite_state IM)
  (<span class="nv">m</span> : message)
  : <span class="kt">Prop</span>
  := <span class="kr">exists</span> (<span class="nv">i</span> : index), has_been_received (IM i) (s i) m.</span></span></pre><div class="doc">
<span class="inlinecode"><span class="id" title="var">composite_has_been_received</span></span> is decidable. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk266" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk266"><span class="kn">Lemma</span> <span class="nf">composite_has_been_received_dec</span> : RelDecision composite_has_been_received.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RelDecision composite_has_been_received</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk267" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk267"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RelDecision composite_has_been_received</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk268" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk268"><span class="nb">intros</span> s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision (composite_has_been_received s m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk269" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk269"><span class="nb">apply</span> (Decision_iff (P := List.Exists (<span class="kr">fun</span> <span class="nv">i</span> =&gt; has_been_received (IM i) (s i) m) (enum index))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Exists (<span class="kr">Œª</span> <span class="nv">i</span> : index, has_been_received (IM i) (s i) m)
  (enum index) ‚Üî composite_has_been_received s m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk26a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk26a"><hr></label><div class="goal-conclusion">Decision
  (Exists
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, has_been_received (IM i) (s i) m)
     (enum index))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk26b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk26b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Exists (<span class="kr">Œª</span> <span class="nv">i</span> : index, has_been_received (IM i) (s i) m)
  (enum index) ‚Üî composite_has_been_received s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> Exists_finite.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk26c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk26c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision
  (Exists
     (<span class="kr">Œª</span> <span class="nv">i</span> : index, has_been_received (IM i) (s i) m)
     (enum index))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">typeclasses eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk26d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk26d"><span class="kn">Lemma</span> <span class="nf">free_composite_has_been_received_stepwise_props</span>
  (<span class="nv">X</span> := free_composite_vlsm IM)
  : has_been_received_stepwise_prop (vlsm := X) composite_has_been_received.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received_stepwise_prop
  composite_has_been_received</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk26e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk26e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received_stepwise_prop
  composite_has_been_received</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk26f" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk26f"><span class="nb">unfold</span> has_been_received_stepwise_props.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received_stepwise_prop
  composite_has_been_received</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk270" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk270"><span class="nb">pose proof</span> (free_composite_stepwise_props (<span class="kr">fun</span> <span class="nv">i</span> =&gt; has_been_received_stepwise_props (IM i)))
    <span class="kr">as</span> [Hinits Hstep].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hinits</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state (free_composite_vlsm IM),
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message, ¬¨ composite_oracle s m</span></span></span><br><span><var>Hstep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label
         (preloaded_with_all_messages_vlsm
            (free_composite_vlsm IM))) 
  (<span class="nv">s</span> : state
         (preloaded_with_all_messages_vlsm
            (free_composite_vlsm IM))) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             (free_composite_vlsm IM))) 
  (<span class="nv">om</span> : option message),
  input_constrained_transition
    (free_composite_vlsm IM) l (
    s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      composite_oracle s&#39; msg
      ‚Üî composite_message_selector msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |} ‚à® composite_oracle s msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received_stepwise_prop
  composite_has_been_received</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk271" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk271"><span class="nb">split</span>; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hinits</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state (free_composite_vlsm IM),
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message, ¬¨ composite_oracle s m</span></span></span><br><span><var>Hstep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label
         (preloaded_with_all_messages_vlsm
            (free_composite_vlsm IM))) 
  (<span class="nv">s</span> : state
         (preloaded_with_all_messages_vlsm
            (free_composite_vlsm IM))) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             (free_composite_vlsm IM))) 
  (<span class="nv">om</span> : option message),
  input_constrained_transition
    (free_composite_vlsm IM) l (
    s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      composite_oracle s&#39; msg
      ‚Üî composite_message_selector msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |} ‚à® composite_oracle s msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">s</span> : state (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">im</span> : option message) (<span class="nv">s&#39;</span> : state
                                (preloaded_with_all_messages_vlsm
                                   X)) (<span class="nv">om</span> : option
                                               message),
  input_constrained_transition X l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      composite_has_been_received s&#39; msg
      ‚Üî field_selector input msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |} ‚à® composite_has_been_received s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> l; <span class="nb">specialize</span> (Hstep l); <span class="nb">destruct</span> l.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Instance</span> <span class="nf">free_composite_HasBeenReceivedCapability</span>
  (<span class="nv">X</span> := free_composite_vlsm IM)
  : HasBeenReceivedCapability X :=
  Build_HasBeenReceivedCapability X
    composite_has_been_received
    composite_has_been_received_dec
    free_composite_has_been_received_stepwise_props.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Instance</span> <span class="nf">free_composite_HasBeenDirectlyObservedCapability</span>
  (<span class="nv">X</span> := free_composite_vlsm IM)
  : HasBeenDirectlyObservedCapability X :=
  HasBeenDirectlyObservedCapability_from_sent_received X.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Instance</span> <span class="nf">constrained_vlsm_HasBeenDirectlyObservedCapability</span>
  `(X : VLSM message) `{HasBeenSentCapability message X} `{HasBeenReceivedCapability message X}
  (constraint : label X -&gt; state X * option message -&gt; <span class="kt">Prop</span>)
  : HasBeenDirectlyObservedCapability X :=
  HasBeenDirectlyObservedCapability_from_sent_received X.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sec_composite_has_been_received</span>.</span></span></pre><div class="doc">
  A message <span class="inlinecode"><span class="id" title="var">has_been_directly_observed</span></span> in a composite state if it
  <span class="inlinecode"><span class="id" title="var">has_been_directly_observed</span></span> in any of its components.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">composite_has_been_directly_observed</span>
  (<span class="nv">s</span> : composite_state IM)
  (<span class="nv">m</span> : message)
  : <span class="kt">Prop</span>
  := <span class="kr">exists</span> (<span class="nv">i</span> : index), has_been_directly_observed (IM i) (s i) m.</span></span></pre><div class="doc">
<span class="inlinecode"><span class="id" title="var">composite_has_been_directly_observed</span></span> is decidable. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk272" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk272"><span class="kn">Lemma</span> <span class="nf">composite_has_been_directly_observed_dec</span> : RelDecision composite_has_been_directly_observed.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RelDecision composite_has_been_directly_observed</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk273" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk273"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RelDecision composite_has_been_directly_observed</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk274" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk274"><span class="nb">intros</span> s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision (composite_has_been_directly_observed s m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk275" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk275"><span class="nb">apply</span> (Decision_iff
    (P := List.Exists (<span class="kr">fun</span> <span class="nv">i</span> =&gt; has_been_directly_observed (IM i) (s i) m) (enum index))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Exists
  (<span class="kr">Œª</span> <span class="nv">i</span> : index,
     has_been_directly_observed (IM i) (s i) m)
  (enum index)
‚Üî composite_has_been_directly_observed s m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk276" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk276"><hr></label><div class="goal-conclusion">Decision
  (Exists
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        has_been_directly_observed (IM i) (s i) m)
     (enum index))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk277" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk277">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Exists
  (<span class="kr">Œª</span> <span class="nv">i</span> : index,
     has_been_directly_observed (IM i) (s i) m)
  (enum index)
‚Üî composite_has_been_directly_observed s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> Exists_finite.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk278" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk278">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision
  (Exists
     (<span class="kr">Œª</span> <span class="nv">i</span> : index,
        has_been_directly_observed (IM i) (s i) m)
     (enum index))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">typeclasses eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk279" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk279"><span class="kn">Lemma</span> <span class="nf">composite_has_been_directly_observed_stepwise_props</span>
  (<span class="nv">constraint</span> : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">X</span> := composite_vlsm IM constraint)
  : oracle_stepwise_props (vlsm := X) item_sends_or_receives composite_has_been_directly_observed.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle_stepwise_props item_sends_or_receives
  composite_has_been_directly_observed</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk27a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk27a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle_stepwise_props item_sends_or_receives
  composite_has_been_directly_observed</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk27b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk27b"><span class="nb">pose proof</span>
    (composite_stepwise_props
       (<span class="kr">fun</span> <span class="nv">i</span> =&gt; (has_been_directly_observed_stepwise_props (IM i))) constraint)
       <span class="kr">as</span> [Hinits Hstep].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hinits</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state (composite_vlsm IM constraint),
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message, ¬¨ composite_oracle s m</span></span></span><br><span><var>Hstep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label
         (preloaded_with_all_messages_vlsm
            (composite_vlsm IM constraint))) 
  (<span class="nv">s</span> : state
         (preloaded_with_all_messages_vlsm
            (composite_vlsm IM constraint))) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             (composite_vlsm IM constraint))) 
  (<span class="nv">om</span> : option message),
  input_constrained_transition
    (composite_vlsm IM constraint) l (
    s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      composite_oracle s&#39; msg
      ‚Üî composite_message_selector msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |} ‚à® composite_oracle s msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle_stepwise_props item_sends_or_receives
  composite_has_been_directly_observed</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk27c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk27c"><span class="nb">split</span>; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hinits</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state (composite_vlsm IM constraint),
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message, ¬¨ composite_oracle s m</span></span></span><br><span><var>Hstep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label
         (preloaded_with_all_messages_vlsm
            (composite_vlsm IM constraint))) 
  (<span class="nv">s</span> : state
         (preloaded_with_all_messages_vlsm
            (composite_vlsm IM constraint))) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             (composite_vlsm IM constraint))) 
  (<span class="nv">om</span> : option message),
  input_constrained_transition
    (composite_vlsm IM constraint) l (
    s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      composite_oracle s&#39; msg
      ‚Üî composite_message_selector msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |} ‚à® composite_oracle s msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">s</span> : state (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">im</span> : option message) (<span class="nv">s&#39;</span> : state
                                (preloaded_with_all_messages_vlsm
                                   X)) (<span class="nv">om</span> : option
                                               message),
  input_constrained_transition X l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      composite_has_been_directly_observed s&#39; msg
      ‚Üî item_sends_or_receives msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |}
        ‚à® composite_has_been_directly_observed s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> l; <span class="nb">specialize</span> (Hstep l); <span class="nb">destruct</span> l.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk27d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk27d"><span class="kn">Lemma</span> <span class="nf">free_composite_has_been_directly_observed_stepwise_props</span> :
  oracle_stepwise_props (vlsm := free_composite_vlsm IM) item_sends_or_receives
    composite_has_been_directly_observed.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle_stepwise_props item_sends_or_receives
  composite_has_been_directly_observed</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk27e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk27e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle_stepwise_props item_sends_or_receives
  composite_has_been_directly_observed</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk27f" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk27f"><span class="nb">destruct</span> (free_composite_stepwise_props (<span class="kr">fun</span> <span class="nv">i</span> =&gt;
    has_been_directly_observed_stepwise_props (IM i))) <span class="kr">as</span> [Hinits Hstep].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>Hinits</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state (free_composite_vlsm IM),
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message, ¬¨ composite_oracle s m</span></span></span><br><span><var>Hstep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label
         (preloaded_with_all_messages_vlsm
            (free_composite_vlsm IM))) 
  (<span class="nv">s</span> : state
         (preloaded_with_all_messages_vlsm
            (free_composite_vlsm IM))) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             (free_composite_vlsm IM))) 
  (<span class="nv">om</span> : option message),
  input_constrained_transition
    (free_composite_vlsm IM) l (
    s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      composite_oracle s&#39; msg
      ‚Üî composite_message_selector msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |} ‚à® composite_oracle s msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle_stepwise_props item_sends_or_receives
  composite_has_been_directly_observed</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk280" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk280"><span class="nb">split</span>; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>Hinits</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state (free_composite_vlsm IM),
  initial_state_prop s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message, ¬¨ composite_oracle s m</span></span></span><br><span><var>Hstep</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label
         (preloaded_with_all_messages_vlsm
            (free_composite_vlsm IM))) 
  (<span class="nv">s</span> : state
         (preloaded_with_all_messages_vlsm
            (free_composite_vlsm IM))) 
  (<span class="nv">im</span> : option message) 
  (<span class="nv">s&#39;</span> : state
          (preloaded_with_all_messages_vlsm
             (free_composite_vlsm IM))) 
  (<span class="nv">om</span> : option message),
  input_constrained_transition
    (free_composite_vlsm IM) l (
    s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      composite_oracle s&#39; msg
      ‚Üî composite_message_selector msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |} ‚à® composite_oracle s msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label
         (preloaded_with_all_messages_vlsm
            (free_composite_vlsm IM))) (<span class="nv">s</span> : state
                                              (preloaded_with_all_messages_vlsm
                                                 (free_composite_vlsm
                                                 IM))) 
  (<span class="nv">im</span> : option message) (<span class="nv">s&#39;</span> : state
                                (preloaded_with_all_messages_vlsm
                                   (free_composite_vlsm
                                      IM))) (<span class="nv">om</span> : 
                                             option
                                               message),
  input_constrained_transition
    (free_composite_vlsm IM) l (s, im) (s&#39;, om)
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">msg</span> : message,
      composite_has_been_directly_observed s&#39; msg
      ‚Üî item_sends_or_receives msg
          {|
            l := l;
            input := im;
            destination := s&#39;;
            output := om
          |}
        ‚à® composite_has_been_directly_observed s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> l; <span class="nb">specialize</span> (Hstep l); <span class="nb">destruct</span> l.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">validator</span> : <span class="kt">Type</span>}
  `{finite.Finite validator}
  {measurable_V : Measurable validator}
  (threshold : R)
  `{FinSet validator Cv}
  `{!ReachableThreshold validator Cv threshold}
  (A : validator -&gt; index)
  (sender : message -&gt; option validator)
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">component_signed_message</span> (<span class="nv">component_idx</span> : index) (<span class="nv">m</span> : message) : <span class="kt">Prop</span> :=
  option_map A (sender m) = Some component_idx.</span></span></pre><div class="doc">
  Definitions for safety and nontriviality of the <span class="inlinecode"><span class="id" title="var">sender</span></span> function.
  Safety means that if we designate a validator as the sender
  of a certain message, then it is impossible for other components
  to produce that message

<div class="paragraph"> </div>

  Weak/strong nontriviality say that each validator should
  be designated sender for at least one/all its valid
  messages.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">sender_safety_prop</span> : <span class="kt">Prop</span> :=
  <span class="kr">forall</span>
  (<span class="nv">m</span> : message)
  (<span class="nv">v</span> : validator)
  (<span class="nv">Hsender</span> : sender m = Some v),
  <span class="kr">forall</span> (<span class="nv">j</span> : index)
         (<span class="nv">Hdif</span> : j &lt;&gt; A v),
         ~ can_emit (preloaded_with_all_messages_vlsm (IM j)) m.</span></span></pre><div class="doc">
  An alternative, possibly friendlier, formulation. Note that it is
  slightly weaker, in that it does not require that the sender
  is able to send the message.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">sender_safety_alt_prop</span> : <span class="kt">Prop</span> :=
  <span class="kr">forall</span>
  (<span class="nv">m</span> : message)
  (<span class="nv">v</span> : validator)
  (<span class="nv">Hsender</span> : sender m = Some v),
  <span class="kr">forall</span> (<span class="nv">i</span> : index),
  can_emit (preloaded_with_all_messages_vlsm (IM i)) m -&gt;
  A v = i.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk281" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk281"><span class="kn">Lemma</span> <span class="nf">sender_safety_alt_iff</span>
  : sender_safety_prop &lt;-&gt; sender_safety_alt_prop.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sender_safety_prop ‚Üî sender_safety_alt_prop</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk282" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk282"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sender_safety_prop ‚Üî sender_safety_alt_prop</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk283" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk283"><span class="nb">split</span>; <span class="nb">intros</span> Hsender_safety m; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_prop</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>can_emit
  (preloaded_with_all_messages_vlsm (IM i)) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A v = i</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk284" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hdif</var><span class="hyp-type"><b>: </b><span>j ‚â† A v</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk284"><hr></label><div class="goal-conclusion">¬¨ can_emit (preloaded_with_all_messages_vlsm (IM j)) m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk285" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk285">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_prop</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>can_emit
  (preloaded_with_all_messages_vlsm (IM i)) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A v = i</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk286" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk286"><span class="nb">specialize</span> (Hsender_safety m v Hsender).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">j</span> : index,
  j ‚â† A v
  ‚Üí ¬¨ can_emit
        (preloaded_with_all_messages_vlsm
           (IM j)) m</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>can_emit
  (preloaded_with_all_messages_vlsm (IM i)) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A v = i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk287" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk287"><span class="nb">destruct</span> (decide (i = A v)); [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">j</span> : index,
  j ‚â† A v
  ‚Üí ¬¨ can_emit
        (preloaded_with_all_messages_vlsm
           (IM j)) m</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>can_emit
  (preloaded_with_all_messages_vlsm (IM i)) m</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>i ‚â† A v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A v = i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">elim</span> (Hsender_safety _ n).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk288" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk288">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hdif</var><span class="hyp-type"><b>: </b><span>j ‚â† A v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ can_emit (preloaded_with_all_messages_vlsm (IM j)) m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk289" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk289"><span class="nb">intro</span> Hemit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hdif</var><span class="hyp-type"><b>: </b><span>j ‚â† A v</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>can_emit
  (preloaded_with_all_messages_vlsm (IM j)) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk28a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk28a"><span class="nb">elim</span> Hdif.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hdif</var><span class="hyp-type"><b>: </b><span>j ‚â† A v</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>can_emit
  (preloaded_with_all_messages_vlsm (IM j)) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j = A v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">specialize</span> (Hsender_safety m v Hsender _ Hemit).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">channel_authenticated_message</span> (<span class="nv">component_idx</span> : index) (<span class="nv">m</span> : message) : <span class="kt">Prop</span> :=
  option_map A (sender m) = Some component_idx.</span></span></pre><div class="doc">
  The <span class="inlinecode"><span class="id" title="var">channel_authentication_prop</span></span>erty requires that any sent message must
  be originating with its <code>sender</code>.
  Note that we don't require that <code>sender</code> is total, but rather that it is
  defined for all messages which can be emitted.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">channel_authentication_prop</span> : <span class="kt">Prop</span> :=
  <span class="kr">forall</span> <span class="nv">i</span> <span class="nv">m</span>,
  can_emit (preloaded_with_all_messages_vlsm (IM i)) m -&gt;
  channel_authenticated_message i m.</span></span></pre><div class="doc">
Channel authentication guarantees sender safety 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk28b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk28b"><span class="kn">Lemma</span> <span class="nf">channel_authentication_sender_safety</span>
  : channel_authentication_prop -&gt; sender_safety_alt_prop.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">channel_authentication_prop ‚Üí sender_safety_alt_prop</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk28c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk28c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">channel_authentication_prop ‚Üí sender_safety_alt_prop</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk28d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk28d"><span class="nb">intros</span> Hsigned m v Hsender i Hemit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsigned</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>can_emit
  (preloaded_with_all_messages_vlsm (IM i)) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A v = i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk28e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk28e"><span class="nb">apply</span> Some_inj.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsigned</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>can_emit
  (preloaded_with_all_messages_vlsm (IM i)) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Some (A v) = Some i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk28f" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk28f"><span class="nb">change</span> (Some (A v)) <span class="kr">with</span> (option_map A (Some v)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsigned</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>can_emit
  (preloaded_with_all_messages_vlsm (IM i)) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_map A (Some v) = Some i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk290" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk290"><span class="nb">rewrite</span> &lt;- Hsender.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsigned</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hemit</var><span class="hyp-type"><b>: </b><span>can_emit
  (preloaded_with_all_messages_vlsm (IM i)) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_map A (sender m) = Some i</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> Hsigned.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">sender_nontriviality_prop</span> : <span class="kt">Prop</span> :=
  <span class="kr">forall</span> (<span class="nv">v</span> : validator),
  <span class="kr">exists</span> (<span class="nv">m</span> : message),
  can_emit (preloaded_with_all_messages_vlsm (IM (A v))) m /\
  sender m = Some v.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">no_initial_messages_in_IM_prop</span> : <span class="kt">Prop</span> :=
  <span class="kr">forall</span> <span class="nv">i</span> <span class="nv">m</span>, ~ initial_message_prop (IM i) m.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk291" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk291"><span class="kn">Lemma</span> <span class="nf">free_composite_no_initial_valid_messages_emitted_by_sender</span>
  (<span class="nv">can_emit_signed</span> : channel_authentication_prop)
  (<span class="nv">no_initial_messages_in_IM</span> : no_initial_messages_in_IM_prop)
  (<span class="nv">X</span> := free_composite_vlsm IM)
  : <span class="kr">forall</span> (<span class="nv">m</span> : message), valid_message_prop X m -&gt;
    <span class="kr">exists</span> <span class="nv">v</span>, sender m = Some v /\
      can_emit (preloaded_with_all_messages_vlsm (IM (A v))) m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop</span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  valid_message_prop X m
  ‚Üí <span class="kr">‚àÉ</span> <span class="nv">v</span> : validator,
      sender m = Some v
      ‚àß can_emit
          (preloaded_with_all_messages_vlsm (IM (A v)))
          m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk292" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk292"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop</span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  valid_message_prop X m
  ‚Üí <span class="kr">‚àÉ</span> <span class="nv">v</span> : validator,
      sender m = Some v
      ‚àß can_emit
          (preloaded_with_all_messages_vlsm (IM (A v)))
          m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk293" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk293"><span class="nb">intro</span> m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop</span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m
‚Üí <span class="kr">‚àÉ</span> <span class="nv">v</span> : validator,
    sender m = Some v
    ‚àß can_emit
        (preloaded_with_all_messages_vlsm (IM (A v)))
        m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk294" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk294"><span class="nb">rewrite</span> emitted_messages_are_valid_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop</span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">initial_message_prop m ‚à® can_emit X m
‚Üí <span class="kr">‚àÉ</span> <span class="nv">v</span> : validator,
    sender m = Some v
    ‚àß can_emit
        (preloaded_with_all_messages_vlsm (IM (A v)))
        m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk295" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk295"><span class="nb">intros</span> [[i [[mi Hmi] _]] | [(s, om) [(i, l) [s&#39; Ht]]]]
  ; [<span class="bp">by</span> <span class="bp">contradict</span> Hmi; <span class="nb">apply</span> no_initial_messages_in_IM |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop</span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition X 
  (existT i l) (s, om) (
  s&#39;, Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">v</span> : validator,
  sender m = Some v
  ‚àß can_emit
      (preloaded_with_all_messages_vlsm (IM (A v))) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk296" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk296"><span class="nb">eapply</span> VLSM_incl_input_valid_transition <span class="kr">in</span> Ht;
    [| <span class="bp">by</span> <span class="nb">eapply</span> (vlsm_incl_preloaded_with_all_messages_vlsm (free_composite_vlsm IM))].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop</span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  {|
    vlsm_type := composite_type IM;
    vlsm_machine :=
      preloaded_with_all_messages_vlsm
        (free_composite_vlsm IM)
  |} (existT i l) (s, om) (
  s&#39;, Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">v</span> : validator,
  sender m = Some v
  ‚àß can_emit
      (preloaded_with_all_messages_vlsm (IM (A v))) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk297" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk297"><span class="nb">apply</span> preloaded_with_all_messages_projection_input_valid_transition_eq
    <span class="kr">with</span> (j := i) <span class="kr">in</span> Ht; [| <span class="bp">done</span>]; <span class="nb">cbn</span> <span class="kr">in</span> Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop</span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_constrained_transition 
  (IM i) l (s i, om) (s&#39; i, Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">v</span> : validator,
  sender m = Some v
  ‚àß can_emit
      (preloaded_with_all_messages_vlsm (IM (A v))) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk298" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk298"><span class="nb">specialize</span> (can_emit_signed i m).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>can_emit
  (preloaded_with_all_messages_vlsm
     (IM i)) m
‚Üí channel_authenticated_message i m</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop</span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_constrained_transition 
  (IM i) l (s i, om) (s&#39; i, Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">v</span> : validator,
  sender m = Some v
  ‚àß can_emit
      (preloaded_with_all_messages_vlsm (IM (A v))) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk299" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk299">spec can_emit_signed; [<span class="bp">by</span> <span class="nb">eexists</span> _, _, _ |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop</span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_constrained_transition 
  (IM i) l (s i, om) (s&#39; i, Some m)</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authenticated_message i m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">v</span> : validator,
  sender m = Some v
  ‚àß can_emit
      (preloaded_with_all_messages_vlsm (IM (A v))) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk29a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk29a"><span class="nb">unfold</span> channel_authenticated_message <span class="kr">in</span> can_emit_signed.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop</span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_constrained_transition 
  (IM i) l (s i, om) (s&#39; i, Some m)</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>option_map A (sender m) = Some i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">v</span> : validator,
  sender m = Some v
  ‚àß can_emit
      (preloaded_with_all_messages_vlsm (IM (A v))) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk29b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk29b"><span class="nb">destruct</span> (sender m) <span class="kr">as</span> [v |] <span class="nb">eqn</span>: Hsender; [| <span class="bp">by</span> <span class="nb">inversion</span> can_emit_signed].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop</span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_constrained_transition 
  (IM i) l (s i, om) (s&#39; i, Some m)</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>option_map A (Some v) = Some i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">v0</span> : validator,
  Some v = Some v0
  ‚àß can_emit
      (preloaded_with_all_messages_vlsm (IM (A v0))) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk29c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk29c"><span class="nb">apply</span> Some_inj <span class="kr">in</span> can_emit_signed.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop</span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_constrained_transition 
  (IM i) l (s i, om) (s&#39; i, Some m)</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>A v = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">v0</span> : validator,
  Some v = Some v0
  ‚àß can_emit
      (preloaded_with_all_messages_vlsm (IM (A v0))) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="kr">exists</span> <span class="nv">v</span>; <span class="nb">subst</span>; <span class="nb">unfold</span> can_emit; <span class="nb">eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk29d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk29d"><span class="kn">Lemma</span> <span class="nf">composite_no_initial_valid_messages_emitted_by_sender</span>
    (<span class="nv">can_emit_signed</span> : channel_authentication_prop)
    (<span class="nv">no_initial_messages_in_IM</span> : no_initial_messages_in_IM_prop)
    (<span class="nv">constraint</span> : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>)
    (<span class="nv">X</span> := composite_vlsm IM constraint)
    : <span class="kr">forall</span> (<span class="nv">m</span> : message), valid_message_prop X m -&gt;
      <span class="kr">exists</span> <span class="nv">v</span>, sender m = Some v /\
        can_emit (preloaded_with_all_messages_vlsm (IM (A v))) m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  valid_message_prop X m
  ‚Üí <span class="kr">‚àÉ</span> <span class="nv">v</span> : validator,
      sender m = Some v
      ‚àß can_emit
          (preloaded_with_all_messages_vlsm (IM (A v)))
          m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk29e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk29e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  valid_message_prop X m
  ‚Üí <span class="kr">‚àÉ</span> <span class="nv">v</span> : validator,
      sender m = Some v
      ‚àß can_emit
          (preloaded_with_all_messages_vlsm (IM (A v)))
          m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk29f" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk29f"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>valid_message_prop X m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">v</span> : validator,
  sender m = Some v
  ‚àß can_emit
      (preloaded_with_all_messages_vlsm (IM (A v))) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2a0" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2a0"><span class="nb">apply</span> free_composite_no_initial_valid_messages_emitted_by_sender; [<span class="bp">done</span>.. |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>valid_message_prop X m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop (free_composite_vlsm IM) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2a1" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2a1"><span class="nb">eapply</span> VLSM_incl_valid_message <span class="kr">with</span> X; [| <span class="bp">by</span> <span class="kp">do</span> <span class="mi">2</span> <span class="nb">red</span> | <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span>valid_message_prop X m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl_part X (free_composite_vlsm_machine IM)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> VLSM_incl_constrained_vlsm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2a2" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2a2"><span class="kn">Lemma</span> <span class="nf">free_composite_no_initial_valid_messages_have_sender</span>
  (<span class="nv">can_emit_signed</span> : channel_authentication_prop)
  (<span class="nv">no_initial_messages_in_IM</span> : no_initial_messages_in_IM_prop) :
  <span class="kr">forall</span> (<span class="nv">m</span> : message),
    valid_message_prop (free_composite_vlsm IM) m -&gt; sender m &lt;&gt; None.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  valid_message_prop (free_composite_vlsm IM) m
  ‚Üí sender m ‚â† None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2a3" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2a3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  valid_message_prop (free_composite_vlsm IM) m
  ‚Üí sender m ‚â† None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2a4" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2a4"><span class="nb">intros</span> m Hm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>valid_message_prop (free_composite_vlsm IM) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sender m ‚â† None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2a5" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2a5"><span class="nb">cut</span> (<span class="kr">exists</span> <span class="nv">v</span> : validator, sender m = Some v /\
    can_emit (preloaded_with_all_messages_vlsm (IM (A v))) m).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>valid_message_prop (free_composite_vlsm IM) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÉ</span> <span class="nv">v</span> : validator,
   sender m = Some v
   ‚àß can_emit
       (preloaded_with_all_messages_vlsm (IM (A v))) m)
‚Üí sender m ‚â† None</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk2a6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>valid_message_prop (free_composite_vlsm IM) m</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk2a6"><hr></label><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">v</span> : validator,
  sender m = Some v
  ‚àß can_emit
      (preloaded_with_all_messages_vlsm (IM (A v))) m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2a7" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2a7">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>valid_message_prop (free_composite_vlsm IM) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÉ</span> <span class="nv">v</span> : validator,
   sender m = Some v
   ‚àß can_emit
       (preloaded_with_all_messages_vlsm (IM (A v))) m)
‚Üí sender m ‚â† None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> (v &amp; -&gt; &amp; _); <span class="bp">congruence</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2a8" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2a8">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>valid_message_prop (free_composite_vlsm IM) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">v</span> : validator,
  sender m = Some v
  ‚àß can_emit
      (preloaded_with_all_messages_vlsm (IM (A v))) m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> free_composite_no_initial_valid_messages_emitted_by_sender.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2a9" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2a9"><span class="kn">Lemma</span> <span class="nf">composite_no_initial_valid_messages_have_sender</span>
    (<span class="nv">can_emit_signed</span> : channel_authentication_prop)
    (<span class="nv">no_initial_messages_in_IM</span> : no_initial_messages_in_IM_prop)
    (<span class="nv">constraint</span> : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>)
    (<span class="nv">X</span> := composite_vlsm IM constraint)
    : <span class="kr">forall</span> (<span class="nv">m</span> : message) (<span class="nv">Hm</span> : valid_message_prop X m), sender m &lt;&gt; None.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  valid_message_prop X m ‚Üí sender m ‚â† None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2aa" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2aa"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  valid_message_prop X m ‚Üí sender m ‚â† None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2ab" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2ab"><span class="nb">intros</span> m Hm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>valid_message_prop X m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sender m ‚â† None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2ac" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2ac"><span class="nb">apply</span> free_composite_no_initial_valid_messages_have_sender; [<span class="bp">done</span>.. |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>valid_message_prop X m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop (free_composite_vlsm IM) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2ad" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2ad"><span class="nb">eapply</span> VLSM_incl_valid_message <span class="kr">with</span> X; [| <span class="bp">by</span> <span class="kp">do</span> <span class="mi">2</span> <span class="nb">red</span> | <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>no_initial_messages_in_IM</var><span class="hyp-type"><b>: </b><span>no_initial_messages_in_IM_prop</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>valid_message_prop X m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl_part X (free_composite_vlsm_machine IM)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> VLSM_incl_constrained_vlsm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2ae" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2ae"><span class="kn">Lemma</span> <span class="nf">composite_emitted_by_validator_have_sender</span>
    (<span class="nv">can_emit_signed</span> : channel_authentication_prop)
    (<span class="nv">A_inj</span> : <span class="kr">forall</span> <span class="nv">v1</span> <span class="nv">v2</span>, A v1 = A v2 -&gt; v1 = v2)
  : <span class="kr">forall</span> <span class="nv">s</span> <span class="nv">item</span>,
      input_constrained_transition_item (free_composite_vlsm IM) s item -&gt;
    <span class="kr">forall</span> <span class="nv">v</span>, A v = projT1 (l item) -&gt;
    <span class="kr">forall</span> (<span class="nv">m</span> : message), output item = Some m -&gt;
    sender m = Some v.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>A_inj</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">v1</span> <span class="nv">v2</span> : validator, A v1 = A v2 ‚Üí v1 = v2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state
         (preloaded_with_all_messages_vlsm
            (free_composite_vlsm IM))) (<span class="nv">item</span> : transition_item),
  input_constrained_transition_item
    (free_composite_vlsm IM) s item
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">v</span> : validator,
      A v = projT1 (l item)
      ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
          output item = Some m ‚Üí sender m = Some v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2af" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2af"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>A_inj</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">v1</span> <span class="nv">v2</span> : validator, A v1 = A v2 ‚Üí v1 = v2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : state
         (preloaded_with_all_messages_vlsm
            (free_composite_vlsm IM))) (<span class="nv">item</span> : transition_item),
  input_constrained_transition_item
    (free_composite_vlsm IM) s item
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">v</span> : validator,
      A v = projT1 (l item)
      ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
          output item = Some m ‚Üí sender m = Some v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2b0" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2b0"><span class="nb">intros</span> s item Ht v HAv m Houtput.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>A_inj</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">v1</span> <span class="nv">v2</span> : validator, A v1 = A v2 ‚Üí v1 = v2</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_constrained_transition_item
  (free_composite_vlsm IM) s item</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>HAv</var><span class="hyp-type"><b>: </b><span>A v = projT1 (l item)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Houtput</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sender m = Some v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2b1" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2b1"><span class="nb">cut</span> (channel_authenticated_message (A v) m).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>A_inj</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">v1</span> <span class="nv">v2</span> : validator, A v1 = A v2 ‚Üí v1 = v2</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_constrained_transition_item
  (free_composite_vlsm IM) s item</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>HAv</var><span class="hyp-type"><b>: </b><span>A v = projT1 (l item)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Houtput</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">channel_authenticated_message (A v) m
‚Üí sender m = Some v</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk2b2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>A_inj</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">v1</span> <span class="nv">v2</span> : validator, A v1 = A v2 ‚Üí v1 = v2</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_constrained_transition_item
  (free_composite_vlsm IM) s item</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>HAv</var><span class="hyp-type"><b>: </b><span>A v = projT1 (l item)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Houtput</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk2b2"><hr></label><div class="goal-conclusion">channel_authenticated_message (A v) m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2b3" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2b3">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>A_inj</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">v1</span> <span class="nv">v2</span> : validator, A v1 = A v2 ‚Üí v1 = v2</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_constrained_transition_item
  (free_composite_vlsm IM) s item</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>HAv</var><span class="hyp-type"><b>: </b><span>A v = projT1 (l item)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Houtput</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">channel_authenticated_message (A v) m
‚Üí sender m = Some v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2b4" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2b4"><span class="nb">unfold</span> channel_authenticated_message; <span class="nb">destruct</span> (sender m) <span class="kr">as</span> [v&#39; |]; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>A_inj</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">v1</span> <span class="nv">v2</span> : validator, A v1 = A v2 ‚Üí v1 = v2</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_constrained_transition_item
  (free_composite_vlsm IM) s item</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>HAv</var><span class="hyp-type"><b>: </b><span>A v = projT1 (l item)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Houtput</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>v'</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_map A (Some v&#39;) = Some (A v) ‚Üí Some v&#39; = Some v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">cbn</span>; <span class="nb">intros</span> Hvv&#39;; <span class="nb">apply</span> Some_inj, A_inj <span class="kr">in</span> Hvv&#39;; <span class="nb">subst</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2b5" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2b5">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>A_inj</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">v1</span> <span class="nv">v2</span> : validator, A v1 = A v2 ‚Üí v1 = v2</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_constrained_transition_item
  (free_composite_vlsm IM) s item</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>HAv</var><span class="hyp-type"><b>: </b><span>A v = projT1 (l item)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Houtput</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">channel_authenticated_message (A v) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2b6" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2b6"><span class="nb">apply</span> input_valid_transition_preloaded_project_active_free <span class="kr">in</span> Ht <span class="kr">as</span> Hti.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>can_emit_signed</var><span class="hyp-type"><b>: </b><span>channel_authentication_prop</span></span></span><br><span><var>A_inj</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">v1</span> <span class="nv">v2</span> : validator, A v1 = A v2 ‚Üí v1 = v2</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_constrained_transition_item
  (free_composite_vlsm IM) s item</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>HAv</var><span class="hyp-type"><b>: </b><span>A v = projT1 (l item)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Houtput</var><span class="hyp-type"><b>: </b><span>output item = Some m</span></span></span><br><span><var>Hti</var><span class="hyp-type"><b>: </b><span>input_constrained_transition
  (IM (projT1 (l item))) 
  (projT2 (l item))
  (s (projT1 (l item)), input item)
  (destination item (projT1 (l item)),
   output item)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">channel_authenticated_message (A v) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> Houtput <span class="kr">in</span> Hti; <span class="nb">apply</span> can_emit_signed; <span class="nb">rewrite</span> HAv; <span class="nb">eexists</span> _, _, _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2b7" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2b7"><span class="kn">Lemma</span> <span class="nf">has_been_sent_iff_by_sender</span>
  (<span class="nv">Hsender_safety</span> : sender_safety_alt_prop) [<span class="kr">is</span> s tr]
  (Htr : finite_constrained_trace_init_to (free_composite_vlsm IM) <span class="kr">is</span> s tr)
  [m v] (Hsender : sender m = Some v) :
  composite_has_been_sent s m &lt;-&gt; has_been_sent (IM (A v)) (s (A v)) m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to
  (free_composite_vlsm IM) <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_sent s m
‚Üî has_been_sent (IM (A v)) (s (A v)) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2b8" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2b8"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to
  (free_composite_vlsm IM) <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_sent s m
‚Üî has_been_sent (IM (A v)) (s (A v)) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2b9" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2b9"><span class="nb">split</span>; [| <span class="bp">by</span> <span class="kr">exists</span> (<span class="nv">A</span> <span class="nv">v</span>)].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to
  (free_composite_vlsm IM) <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_sent s m
‚Üí has_been_sent (IM (A v)) (s (A v)) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2ba" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2ba"><span class="nb">intros</span> [i Hi].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to
  (free_composite_vlsm IM) <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>has_been_sent (IM i) (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent (IM (A v)) (s (A v)) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2bb" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2bb"><span class="nb">erewrite</span> Hsender_safety; [<span class="bp">done</span> | <span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to
  (free_composite_vlsm IM) <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>has_been_sent (IM i) (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">can_emit (preloaded_with_all_messages_vlsm (IM i)) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2bc" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2bc"><span class="nb">assert</span> (Htr_pr : finite_constrained_trace_init_to (IM i) (<span class="kr">is</span> i) (s i)
    (VLSM_projection_finite_trace_project (preloaded_component_projection IM i) tr)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to
  (free_composite_vlsm IM) <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>has_been_sent (IM i) (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_constrained_trace_init_to (IM i) (<span class="kr">is</span> i) (s i)
  (VLSM_projection_finite_trace_project
     (preloaded_component_projection IM i) tr)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk2bd" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to
  (free_composite_vlsm IM) <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>has_been_sent (IM i) (s i) m</span></span></span><br><span><var>Htr_pr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to 
  (IM i) (<span class="kr">is</span> i) (s i)
  (VLSM_projection_finite_trace_project
     (preloaded_component_projection IM i) tr)</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk2bd"><hr></label><div class="goal-conclusion">can_emit (preloaded_with_all_messages_vlsm (IM i)) m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2be" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2be">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to
  (free_composite_vlsm IM) <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>has_been_sent (IM i) (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_constrained_trace_init_to (IM i) (<span class="kr">is</span> i) (s i)
  (VLSM_projection_finite_trace_project
     (preloaded_component_projection IM i) tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (VLSM_projection_finite_valid_trace_init_to (preloaded_component_projection IM i)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2bf" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2bf">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to
  (free_composite_vlsm IM) <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>has_been_sent (IM i) (s i) m</span></span></span><br><span><var>Htr_pr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to 
  (IM i) (<span class="kr">is</span> i) (s i)
  (VLSM_projection_finite_trace_project
     (preloaded_component_projection IM i) tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">can_emit (preloaded_with_all_messages_vlsm (IM i)) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2c0" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2c0"><span class="nb">eapply</span> can_emit_from_valid_trace.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to
  (free_composite_vlsm IM) <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>has_been_sent (IM i) (s i) m</span></span></span><br><span><var>Htr_pr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to 
  (IM i) (<span class="kr">is</span> i) (s i)
  (VLSM_projection_finite_trace_project
     (preloaded_component_projection IM i) tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace
  (preloaded_with_all_messages_vlsm (IM i)) <span class="nl">?si</span> <span class="nl">?tr</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk2c1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to
  (free_composite_vlsm IM) <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>has_been_sent (IM i) (s i) m</span></span></span><br><span><var>Htr_pr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to 
  (IM i) (<span class="kr">is</span> i) (s i)
  (VLSM_projection_finite_trace_project
     (preloaded_component_projection IM i) tr)</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk2c1"><hr></label><div class="goal-conclusion">trace_has_message (field_selector output) m <span class="nl">?tr</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2c2" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2c2">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to
  (free_composite_vlsm IM) <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>has_been_sent (IM i) (s i) m</span></span></span><br><span><var>Htr_pr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to 
  (IM i) (<span class="kr">is</span> i) (s i)
  (VLSM_projection_finite_trace_project
     (preloaded_component_projection IM i) tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace
  (preloaded_with_all_messages_vlsm (IM i)) <span class="nl">?si</span> <span class="nl">?tr</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> valid_trace_forget_last.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2c3" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2c3">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to
  (free_composite_vlsm IM) <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>has_been_sent (IM i) (s i) m</span></span></span><br><span><var>Htr_pr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to 
  (IM i) (<span class="kr">is</span> i) (s i)
  (VLSM_projection_finite_trace_project
     (preloaded_component_projection IM i) tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message (field_selector output) m
  (VLSM_projection_finite_trace_project
     (preloaded_component_projection IM i) tr)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2c4" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2c4"><span class="nb">eapply</span> proper_sent; [| <span class="bp">done</span> | <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>Hsender_safety</var><span class="hyp-type"><b>: </b><span>sender_safety_alt_prop</span></span></span><br><span><var>is, s</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to
  (free_composite_vlsm IM) <span class="kr">is</span> s tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>has_been_sent (IM i) (s i) m</span></span></span><br><span><var>Htr_pr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to 
  (IM i) (<span class="kr">is</span> i) (s i)
  (VLSM_projection_finite_trace_project
     (preloaded_component_projection IM i) tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">constrained_state_prop (IM i) (s i)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">red</span> <span class="kr">in</span> Htr_pr; <span class="nb">apply</span> valid_trace_last_pstate <span class="kr">in</span> Htr_pr.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2c5" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2c5"><span class="kn">Lemma</span> <span class="nf">no_additional_equivocations_constraint_dec</span>
  : RelDecision (no_additional_equivocations_constraint Free).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RelDecision
  (no_additional_equivocations_constraint Free)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2c6" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2c6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RelDecision
  (no_additional_equivocations_constraint Free)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2c7" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2c7"><span class="nb">intros</span> l (s, om).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label Free</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state Free</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision
  (no_additional_equivocations_constraint Free l
     (s, om))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2c8" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2c8"><span class="nb">destruct</span> om; [| <span class="bp">by</span> <span class="nb">left</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label Free</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state Free</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision
  (no_additional_equivocations_constraint Free l
     (s, Some m))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> no_additional_equivocations_dec.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  We say that a validator &lt;v&gt; (with associated component &lt;i&gt;) is equivocating wrt.
  to another component &lt;j&gt;, if there exists a message which <span class="inlinecode"><span class="id" title="var">has_been_received</span></span> by
  &lt;j&gt; but <span class="inlinecode"><span class="id" title="var">has_not_been_sent</span></span> by &lt;i&gt;.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">equivocating_wrt</span>
  (<span class="nv">v</span> : validator)
  (<span class="nv">j</span> : index)
  (<span class="nv">sv</span> : state (IM (A v)))
  (<span class="nv">sj</span> : state (IM j))
  (<span class="nv">i</span> := A v)
  : <span class="kt">Prop</span>
  :=
  <span class="kr">exists</span> (<span class="nv">m</span> : message),
  sender(m) = Some v /\
  has_not_been_sent  (IM i) sv m /\
  has_been_received  (IM j) sj m.</span></span></pre><div class="doc">
We can now decide whether a validator is equivocating in a certain state. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">is_equivocating_statewise</span>
  (<span class="nv">s</span> : composite_state IM)
  (<span class="nv">v</span> : validator)
  : <span class="kt">Prop</span>
  :=
  <span class="kr">exists</span> (<span class="nv">j</span> : index),
  equivocating_wrt v j (s (A v)) (s j).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2c9" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2c9"><span class="kn">Lemma</span> <span class="nf">initial_state_is_not_equivocating_statewise</span>
  (<span class="nv">s</span> : composite_state IM)
  (<span class="nv">Hs</span> : composite_initial_state_prop IM s)
  (<span class="nv">v</span> : validator)
  : ~ is_equivocating_statewise s v.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop IM s</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ is_equivocating_statewise s v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2ca" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2ca"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop IM s</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ is_equivocating_statewise s v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2cb" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2cb"><span class="nb">unfold</span> is_equivocating_statewise, equivocating_wrt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop IM s</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ (<span class="kr">‚àÉ</span> (<span class="nv">j</span> : index) (<span class="nv">m</span> : message),
     sender m = Some v
     ‚àß has_not_been_sent (IM (A v)) (s (A v)) m
       ‚àß has_been_received (IM j) (s j) m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2cc" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2cc"><span class="nb">intros</span> (j &amp; m &amp; Hsender &amp; Hnbs &amp; Hrcv).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>composite_initial_state_prop IM s</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>validator</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsender</var><span class="hyp-type"><b>: </b><span>sender m = Some v</span></span></span><br><span><var>Hnbs</var><span class="hyp-type"><b>: </b><span>has_not_been_sent (IM (A v)) (s (A v)) m</span></span></span><br><span><var>Hrcv</var><span class="hyp-type"><b>: </b><span>has_been_received (IM j) (s j) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">revert</span> Hrcv; <span class="nb">apply</span> has_been_received_stepwise_props, Hs.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  For the equivocation sum fault to be computable, we require that
  our is_equivocating property is decidable. The current implementation
  refers to <span class="inlinecode"><span class="id" title="var">is_equivocating_statewise</span></span>, but this might change
  in the future.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">equivocation_dec_statewise</span>
   (<span class="nv">Hdec</span> : RelDecision is_equivocating_statewise)
    : BasicEquivocation (composite_state IM) validator Cv threshold
  :=
  {|
    state_validators := <span class="kr">fun</span> <span class="nv">_</span> =&gt; list_to_set (enum validator);
    is_equivocating := is_equivocating_statewise;
    is_equivocating_dec := Hdec
  |}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">equivocation_fault_constraint</span>
  (<span class="nv">Dec</span> : BasicEquivocation (composite_state IM) validator Cv threshold)
  (<span class="nv">l</span> : composite_label IM)
  (<span class="nv">som</span> : composite_state IM * option message)
  : <span class="kt">Prop</span>
  :=
  <span class="kr">let</span> (<span class="nv">s&#39;</span>, om&#39;) := (composite_transition IM l som) <span class="kr">in</span>
  not_heavy s&#39;.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2cd" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2cd"><span class="kn">Lemma</span> <span class="nf">sent_component_sent_previously</span>
  [constraint : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>]
  (X := composite_vlsm IM constraint)
  [s : composite_state IM]
  (Hs : valid_state_prop X s)
  [i : index]
  [m : message]
  (Horacle : has_been_sent (IM i) (s i) m) :
  <span class="kr">exists</span> <span class="nv">s_item</span> <span class="nv">item</span>,
    input_valid_transition_item X s_item item /\
    in_futures X (destination item) s /\
    projT1 (l item) = i /\
    output item = Some m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>has_been_sent (IM i) (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s_item</span> : state X) (<span class="nv">item</span> : transition_item),
  input_valid_transition_item X s_item item
  ‚àß in_futures X (destination item) s
    ‚àß projT1 (l item) = i ‚àß output item = Some m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2ce" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2ce"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>has_been_sent (IM i) (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s_item</span> : state X) (<span class="nv">item</span> : transition_item),
  input_valid_transition_item X s_item item
  ‚àß in_futures X (destination item) s
    ‚àß projT1 (l item) = i ‚àß output item = Some m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2cf" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2cf"><span class="nb">clear</span> -Hs Horacle.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>has_been_sent (IM i) (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s_item</span> : state X) (<span class="nv">item</span> : transition_item),
  input_valid_transition_item X s_item item
  ‚àß in_futures X (destination item) s
    ‚àß projT1 (l item) = i ‚àß output item = Some m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2d0" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2d0"><span class="nb">specialize</span>
    (oracle_component_selected_previously
      (<span class="kr">fun</span> <span class="nv">i</span> =&gt; has_been_sent_stepwise_props (IM i))
      Hs Horacle)
    <span class="kr">as</span> (s_item &amp; [[] ?] &amp; Ht &amp; Hfutures &amp; Hi &amp; Hselected).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>has_been_sent (IM i) (s i) m</span></span></span><br><span><var>s_item</var><span class="hyp-type"><b>: </b><span>state (composite_vlsm IM constraint)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (IM x)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state (composite_vlsm IM constraint)</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition_item
  (composite_vlsm IM constraint) s_item
  {|
    l := existT x l;
    input := input;
    destination := destination;
    output := output
  |}</span></span></span><br><span><var>Hfutures</var><span class="hyp-type"><b>: </b><span>in_futures (composite_vlsm IM constraint)
  (VLSM.destination
     {|
       l := existT x l;
       input := input;
       destination := destination;
       output := output
     |}) s</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>projT1
  (VLSM.l
     {|
       l := existT x l;
       input := input;
       destination := destination;
       output := output
     |}) = i</span></span></span><br><span><var>Hselected</var><span class="hyp-type"><b>: </b><span>composite_message_selector m
  {|
    l := existT x l;
    input := input;
    destination := destination;
    output := output
  |}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s_item</span> : state X) (<span class="nv">item</span> : transition_item),
  input_valid_transition_item X s_item item
  ‚àß in_futures X (VLSM.destination item) s
    ‚àß projT1 (VLSM.l item) = i
      ‚àß VLSM.output item = Some m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eexists</span> _, _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2d1" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2d1"><span class="kn">Lemma</span> <span class="nf">received_component_received_previously</span>
  [constraint : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>]
  (X := composite_vlsm IM constraint)
  [s : composite_state IM]
  (Hs : valid_state_prop X s)
  [i : index]
  [m : message]
  (Horacle : has_been_received (IM i) (s i) m) :
  <span class="kr">exists</span> <span class="nv">s_item</span> <span class="nv">item</span>,
    input_valid_transition_item X s_item item /\
    in_futures X (destination item) s /\
    projT1 (l item) = i /\
    input item = Some m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>has_been_received (IM i) (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s_item</span> : state X) (<span class="nv">item</span> : transition_item),
  input_valid_transition_item X s_item item
  ‚àß in_futures X (destination item) s
    ‚àß projT1 (l item) = i ‚àß input item = Some m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2d2" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2d2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>has_been_received (IM i) (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s_item</span> : state X) (<span class="nv">item</span> : transition_item),
  input_valid_transition_item X s_item item
  ‚àß in_futures X (destination item) s
    ‚àß projT1 (l item) = i ‚àß input item = Some m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2d3" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2d3"><span class="nb">clear</span> -Hs Horacle.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>has_been_received (IM i) (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s_item</span> : state X) (<span class="nv">item</span> : transition_item),
  input_valid_transition_item X s_item item
  ‚àß in_futures X (destination item) s
    ‚àß projT1 (l item) = i ‚àß input item = Some m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2d4" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2d4"><span class="nb">specialize</span>
    (oracle_component_selected_previously
      (<span class="kr">fun</span> <span class="nv">i</span> =&gt; has_been_received_stepwise_props (IM i))
      Hs Horacle)
    <span class="kr">as</span> (s_item &amp; [[] ?] &amp; Ht &amp; Hfutures &amp; Hi &amp; Hselected).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Horacle</var><span class="hyp-type"><b>: </b><span>has_been_received (IM i) (s i) m</span></span></span><br><span><var>s_item</var><span class="hyp-type"><b>: </b><span>state (composite_vlsm IM constraint)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (IM x)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state (composite_vlsm IM constraint)</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition_item
  (composite_vlsm IM constraint) s_item
  {|
    l := existT x l;
    input := input;
    destination := destination;
    output := output
  |}</span></span></span><br><span><var>Hfutures</var><span class="hyp-type"><b>: </b><span>in_futures (composite_vlsm IM constraint)
  (VLSM.destination
     {|
       l := existT x l;
       input := input;
       destination := destination;
       output := output
     |}) s</span></span></span><br><span><var>Hi</var><span class="hyp-type"><b>: </b><span>projT1
  (VLSM.l
     {|
       l := existT x l;
       input := input;
       destination := destination;
       output := output
     |}) = i</span></span></span><br><span><var>Hselected</var><span class="hyp-type"><b>: </b><span>composite_message_selector m
  {|
    l := existT x l;
    input := input;
    destination := destination;
    output := output
  |}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s_item</span> : state X) (<span class="nv">item</span> : transition_item),
  input_valid_transition_item X s_item item
  ‚àß in_futures X (VLSM.destination item) s
    ‚àß projT1 (VLSM.l item) = i
      ‚àß VLSM.input item = Some m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eexists</span> _, _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2d5" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2d5"><span class="kn">Lemma</span> <span class="nf">messages_sent_from_component_produced_previously</span>
  [constraint : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>]
  (X := composite_vlsm IM constraint)
  [s : composite_state IM]
  (Hs : valid_state_prop X s)
  [i : index]
  [m : message]
  (Hsent : has_been_sent (IM i) (s i) m) :
  <span class="kr">exists</span> <span class="nv">s_m</span>,
    in_futures X s_m s /\
    can_produce (preloaded_with_all_messages_vlsm (IM i)) (s_m i) m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>has_been_sent (IM i) (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">s_m</span> : state X,
  in_futures X s_m s
  ‚àß can_produce
      (preloaded_with_all_messages_vlsm (IM i))
      (s_m i) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2d6" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2d6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>has_been_sent (IM i) (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">s_m</span> : state X,
  in_futures X s_m s
  ‚àß can_produce
      (preloaded_with_all_messages_vlsm (IM i))
      (s_m i) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2d7" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2d7"><span class="nb">specialize</span> (sent_component_sent_previously Hs Hsent)
    <span class="kr">as</span> (s_item &amp; [] &amp; Ht &amp; Hfutures &amp; &lt;- &amp; Houtput)
  ; <span class="nb">destruct</span> l <span class="kr">as</span> [i li]; <span class="nb">cbn</span> <span class="kr">in</span> *; <span class="nb">subst</span> output.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>has_been_sent (IM i) (s i) m</span></span></span><br><span><var>s_item</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition_item
  (composite_vlsm IM constraint) s_item
  {|
    l := existT i li;
    input := input;
    destination := destination;
    output := Some m
  |}</span></span></span><br><span><var>Hfutures</var><span class="hyp-type"><b>: </b><span>in_futures (composite_vlsm IM constraint)
  destination s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">s_m</span> : composite_state IM,
  in_futures X s_m s
  ‚àß can_produce
      (preloaded_with_all_messages_vlsm (IM i))
      (s_m i) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2d8" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2d8"><span class="kr">exists</span> <span class="nv">destination</span>; <span class="nb">split</span>; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>has_been_sent (IM i) (s i) m</span></span></span><br><span><var>s_item</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition_item
  (composite_vlsm IM constraint) s_item
  {|
    l := existT i li;
    input := input;
    destination := destination;
    output := Some m
  |}</span></span></span><br><span><var>Hfutures</var><span class="hyp-type"><b>: </b><span>in_futures (composite_vlsm IM constraint)
  destination s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">can_produce (preloaded_with_all_messages_vlsm (IM i))
  (destination i) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2d9" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2d9"><span class="nb">eapply</span> VLSM_incl_input_valid_transition <span class="kr">in</span> Ht; <span class="nb">cbn</span> <span class="kr">in</span> Ht;
    [| <span class="bp">by</span> <span class="nb">apply</span> constrained_preloaded_incl].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>has_been_sent (IM i) (s i) m</span></span></span><br><span><var>s_item</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hfutures</var><span class="hyp-type"><b>: </b><span>in_futures (composite_vlsm IM constraint)
  destination s</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  {|
    vlsm_type := composite_type IM;
    vlsm_machine :=
      preloaded_with_all_messages_vlsm
        (free_composite_vlsm IM)
  |} (existT i li) (s_item, input)
  (destination, Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">can_produce (preloaded_with_all_messages_vlsm (IM i))
  (destination i) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2da" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2da"><span class="nb">eapply</span> (VLSM_projection_input_valid_transition (preloaded_component_projection IM i))
    <span class="kr">in</span> Ht; [<span class="bp">by</span> <span class="nb">eexists</span> _, _ |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>li</var><span class="hyp-type"><b>: </b><span>label (IM i)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>has_been_sent (IM i) (s i) m</span></span></span><br><span><var>s_item</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hfutures</var><span class="hyp-type"><b>: </b><span>in_futures (composite_vlsm IM constraint)
  destination s</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  {|
    vlsm_type := composite_type IM;
    vlsm_machine :=
      preloaded_with_all_messages_vlsm
        (free_composite_vlsm IM)
  |} (existT i li) (s_item, input)
  (destination, Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_project_label IM i (existT i li) =
Some <span class="nl">?Goal0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (composite_project_label_eq IM).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2db" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2db"><span class="kn">Lemma</span> <span class="nf">messages_sent_from_component_of_valid_state_are_valid</span>
  (<span class="nv">constraint</span> : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">X</span> := composite_vlsm IM constraint)
  (<span class="nv">s</span> : composite_state IM)
  (<span class="nv">Hs</span> : valid_state_prop X s)
  (<span class="nv">i</span> : index)
  (<span class="nv">m</span> : message)
  (<span class="nv">Hsent</span> : has_been_sent (IM i) (s i) m) :
  valid_message_prop X m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>has_been_sent (IM i) (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2dc" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2dc"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>has_been_sent (IM i) (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> (sent_valid X s); [| <span class="kr">exists</span> <span class="nv">i</span>].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2dd" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2dd"><span class="kn">Lemma</span> <span class="nf">preloaded_messages_sent_from_component_of_valid_state_are_valid_free</span>
  (<span class="nv">seed</span> : message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">X</span> := preloaded_vlsm (free_composite_vlsm IM) seed)
  (<span class="nv">s</span> : composite_state IM)
  (<span class="nv">Hs</span> : valid_state_prop X s)
  (<span class="nv">i</span> : index)
  (<span class="nv">m</span> : message)
  (<span class="nv">Hsent</span> : has_been_sent (IM i) (s i) m) :
  valid_message_prop X m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>preloaded_vlsm (free_composite_vlsm IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>has_been_sent (IM i) (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2de" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2de"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>preloaded_vlsm (free_composite_vlsm IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>has_been_sent (IM i) (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> sent_valid; [| <span class="kr">exists</span> <span class="nv">i</span>].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2df" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2df"><span class="kn">Lemma</span> <span class="nf">messages_received_from_component_of_valid_state_are_valid</span>
  (<span class="nv">constraint</span> : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">X</span> := composite_vlsm IM constraint)
  (<span class="nv">s</span> : composite_state IM)
  (<span class="nv">Hs</span> : valid_state_prop X s)
  (<span class="nv">i</span> : index)
  (<span class="nv">m</span> : message)
  (<span class="nv">Hreceived</span> : has_been_received (IM i) (s i) m)
  : valid_message_prop X m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hreceived</var><span class="hyp-type"><b>: </b><span>has_been_received (IM i) (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2e0" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2e0"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hreceived</var><span class="hyp-type"><b>: </b><span>has_been_received (IM i) (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> received_valid; [| <span class="kr">exists</span> <span class="nv">i</span>].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2e1" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2e1"><span class="kn">Lemma</span> <span class="nf">preloaded_messages_received_from_component_of_valid_state_are_valid_free</span>
  (<span class="nv">seed</span> : message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">X</span> := preloaded_vlsm (free_composite_vlsm IM) seed)
  (<span class="nv">s</span> : composite_state IM)
  (<span class="nv">Hs</span> : valid_state_prop X s)
  (<span class="nv">i</span> : index)
  (<span class="nv">m</span> : message)
  (<span class="nv">Hreceived</span> : has_been_received (IM i) (s i) m)
  : valid_message_prop X m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>preloaded_vlsm (free_composite_vlsm IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hreceived</var><span class="hyp-type"><b>: </b><span>has_been_received (IM i) (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2e2" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2e2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>preloaded_vlsm (free_composite_vlsm IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hreceived</var><span class="hyp-type"><b>: </b><span>has_been_received (IM i) (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> received_valid; [| <span class="kr">exists</span> <span class="nv">i</span>].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2e3" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2e3"><span class="kn">Lemma</span> <span class="nf">composite_sent_valid</span>
  (<span class="nv">constraint</span> : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">X</span> := composite_vlsm IM constraint)
  (<span class="nv">s</span> : composite_state IM)
  (<span class="nv">Hs</span> : valid_state_prop X s)
  (<span class="nv">m</span> : message)
  (<span class="nv">Hsent</span> : composite_has_been_sent s m)
  : valid_message_prop X m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>composite_has_been_sent s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2e4" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2e4"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>composite_has_been_sent s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2e5" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2e5"><span class="nb">destruct</span> Hsent <span class="kr">as</span> [i Hsent].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>has_been_sent (IM i) (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> messages_sent_from_component_of_valid_state_are_valid <span class="kr">with</span> s i.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2e6" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2e6"><span class="kn">Lemma</span> <span class="nf">preloaded_composite_sent_valid</span>
  (<span class="nv">constraint</span> : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">seed</span> : message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">X</span> := preloaded_vlsm (composite_vlsm IM constraint) seed)
  (<span class="nv">s</span> : composite_state IM)
  (<span class="nv">Hs</span> : valid_state_prop X s)
  (<span class="nv">m</span> : message)
  (<span class="nv">Hsent</span> : composite_has_been_sent s m)
  : valid_message_prop X m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>preloaded_vlsm (composite_vlsm IM constraint) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>composite_has_been_sent s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2e7" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2e7"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>preloaded_vlsm (composite_vlsm IM constraint) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>composite_has_been_sent s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> sent_valid.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2e8" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2e8"><span class="kn">Lemma</span> <span class="nf">preloaded_composite_received_valid</span>
  (<span class="nv">constraint</span> : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">seed</span> : message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">X</span> := preloaded_vlsm (composite_vlsm IM constraint) seed)
  (<span class="nv">s</span> : composite_state IM)
  (<span class="nv">Hs</span> : valid_state_prop X s)
  (<span class="nv">m</span> : message)
  (<span class="nv">Hreceived</span> : composite_has_been_received s m)
  : valid_message_prop X m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>preloaded_vlsm (composite_vlsm IM constraint) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hreceived</var><span class="hyp-type"><b>: </b><span>composite_has_been_received s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2e9" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2e9"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>preloaded_vlsm (composite_vlsm IM constraint) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hreceived</var><span class="hyp-type"><b>: </b><span>composite_has_been_received s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> received_valid.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2ea" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2ea"><span class="kn">Lemma</span> <span class="nf">composite_directly_observed_valid</span>
  (<span class="nv">constraint</span> : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">X</span> := composite_vlsm IM constraint)
  (<span class="nv">s</span> : composite_state IM)
  (<span class="nv">Hs</span> : valid_state_prop X s)
  (<span class="nv">m</span> : message)
  (<span class="nv">Hobserved</span> : composite_has_been_directly_observed s m)
  : valid_message_prop X m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hobserved</var><span class="hyp-type"><b>: </b><span>composite_has_been_directly_observed s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2eb" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2eb"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hobserved</var><span class="hyp-type"><b>: </b><span>composite_has_been_directly_observed s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2ec" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2ec"><span class="nb">destruct</span> Hobserved <span class="kr">as</span> [i Hobserved].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hobserved</var><span class="hyp-type"><b>: </b><span>has_been_directly_observed (IM i) (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2ed" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2ed"><span class="nb">apply</span> (has_been_directly_observed_sent_received_iff (IM i)) <span class="kr">in</span> Hobserved.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hobserved</var><span class="hyp-type"><b>: </b><span>has_been_received (IM i) (s i) m
‚à® has_been_sent (IM i) (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk2ee" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hobserved</var><span class="hyp-type"><b>: </b><span>has_been_directly_observed (IM i) (s i) m</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm (IM i)),
  constrained_state_prop (IM i) s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      has_been_directly_observed (IM i) s m
      ‚Üí has_been_received (IM i) s m
        ‚à® has_been_sent (IM i) s m</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk2ee"><hr></label><div class="goal-conclusion">constrained_state_prop (IM i) (s i)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2ef" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2ef">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hobserved</var><span class="hyp-type"><b>: </b><span>has_been_received (IM i) (s i) m
‚à® has_been_sent (IM i) (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2f0" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2f0"><span class="nb">destruct</span> Hobserved <span class="kr">as</span> [Hreceived | Hsent].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hreceived</var><span class="hyp-type"><b>: </b><span>has_been_received (IM i) (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk2f1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>has_been_sent (IM i) (s i) m</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk2f1"><hr></label><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2f2" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2f2">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hreceived</var><span class="hyp-type"><b>: </b><span>has_been_received (IM i) (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> messages_received_from_component_of_valid_state_are_valid.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2f3" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2f3">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>has_been_sent (IM i) (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> messages_sent_from_component_of_valid_state_are_valid.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2f4" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2f4">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hobserved</var><span class="hyp-type"><b>: </b><span>has_been_directly_observed (IM i) (s i) m</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm (IM i)),
  constrained_state_prop (IM i) s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      has_been_directly_observed (IM i) s m
      ‚Üí has_been_received (IM i) s m
        ‚à® has_been_sent (IM i) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">constrained_state_prop (IM i) (s i)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> valid_state_project_preloaded.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2f5" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2f5"><span class="kn">Lemma</span> <span class="nf">preloaded_free_composite_directly_observed_valid</span>
  (<span class="nv">seed</span> : message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">X</span> := preloaded_vlsm (free_composite_vlsm IM) seed)
  (<span class="nv">s</span> : composite_state IM)
  (<span class="nv">Hs</span> : valid_state_prop X s)
  (<span class="nv">m</span> : message)
  (<span class="nv">Hobserved</span> : composite_has_been_directly_observed s m)
  : valid_message_prop X m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>preloaded_vlsm (free_composite_vlsm IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hobserved</var><span class="hyp-type"><b>: </b><span>composite_has_been_directly_observed s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2f6" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2f6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>preloaded_vlsm (free_composite_vlsm IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hobserved</var><span class="hyp-type"><b>: </b><span>composite_has_been_directly_observed s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2f7" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2f7"><span class="nb">destruct</span> Hobserved <span class="kr">as</span> [i Hobserved].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>preloaded_vlsm (free_composite_vlsm IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hobserved</var><span class="hyp-type"><b>: </b><span>has_been_directly_observed (IM i) (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2f8" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2f8"><span class="nb">apply</span> (has_been_directly_observed_sent_received_iff (IM i)) <span class="kr">in</span> Hobserved.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>preloaded_vlsm (free_composite_vlsm IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hobserved</var><span class="hyp-type"><b>: </b><span>has_been_received (IM i) (s i) m
‚à® has_been_sent (IM i) (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk2f9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>preloaded_vlsm (free_composite_vlsm IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hobserved</var><span class="hyp-type"><b>: </b><span>has_been_directly_observed (IM i) (s i) m</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm (IM i)),
  constrained_state_prop (IM i) s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      has_been_directly_observed (IM i) s m
      ‚Üí has_been_received (IM i) s m
        ‚à® has_been_sent (IM i) s m</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk2f9"><hr></label><div class="goal-conclusion">constrained_state_prop (IM i) (s i)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2fa" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2fa">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>preloaded_vlsm (free_composite_vlsm IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hobserved</var><span class="hyp-type"><b>: </b><span>has_been_received (IM i) (s i) m
‚à® has_been_sent (IM i) (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2fb" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2fb"><span class="nb">destruct</span> Hobserved <span class="kr">as</span> [Hreceived | Hsent].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>preloaded_vlsm (free_composite_vlsm IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hreceived</var><span class="hyp-type"><b>: </b><span>has_been_received (IM i) (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk2fc" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>preloaded_vlsm (free_composite_vlsm IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>has_been_sent (IM i) (s i) m</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk2fc"><hr></label><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2fd" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2fd">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>preloaded_vlsm (free_composite_vlsm IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hreceived</var><span class="hyp-type"><b>: </b><span>has_been_received (IM i) (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> preloaded_messages_received_from_component_of_valid_state_are_valid_free.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2fe" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2fe">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>preloaded_vlsm (free_composite_vlsm IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>has_been_sent (IM i) (s i) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_message_prop X m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> preloaded_messages_sent_from_component_of_valid_state_are_valid_free.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk2ff" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk2ff">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>preloaded_vlsm (free_composite_vlsm IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hobserved</var><span class="hyp-type"><b>: </b><span>has_been_directly_observed (IM i) (s i) m</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm (IM i)),
  constrained_state_prop (IM i) s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      has_been_directly_observed (IM i) s m
      ‚Üí has_been_received (IM i) s m
        ‚à® has_been_sent (IM i) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">constrained_state_prop (IM i) (s i)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk300" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk300"><span class="nb">eapply</span> composite_constrained_state_project.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>preloaded_vlsm (free_composite_vlsm IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hobserved</var><span class="hyp-type"><b>: </b><span>has_been_directly_observed (IM i) (s i) m</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm (IM i)),
  constrained_state_prop (IM i) s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      has_been_directly_observed (IM i) s m
      ‚Üí has_been_received (IM i) s m
        ‚à® has_been_sent (IM i) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_constrained_state_prop IM s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk301" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk301"><span class="nb">eapply</span> VLSM_incl_valid_state; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>validator</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>finite.Finite validator</span></span></span><br><span><var>measurable_V</var><span class="hyp-type"><b>: </b><span>Measurable validator</span></span></span><br><span><var>threshold</var><span class="hyp-type"><b>: </b><span>R</span></span></span><br><span><var>Cv</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>ElemOf validator Cv</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Empty Cv</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Singleton validator Cv</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>Union Cv</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>Intersection Cv</span></span></span><br><span><var>H8</var><span class="hyp-type"><b>: </b><span>Difference Cv</span></span></span><br><span><var>H9</var><span class="hyp-type"><b>: </b><span>Elements validator Cv</span></span></span><br><span><var>EqDecision2</var><span class="hyp-type"><b>: </b><span>EqDecision validator</span></span></span><br><span><var>H10</var><span class="hyp-type"><b>: </b><span>FinSet validator Cv</span></span></span><br><span><var>ReachableThreshold0</var><span class="hyp-type"><b>: </b><span>ReachableThreshold validator Cv
  threshold</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>validator ‚Üí index</span></span></span><br><span><var>sender</var><span class="hyp-type"><b>: </b><span>message ‚Üí option validator</span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>preloaded_vlsm (free_composite_vlsm IM) seed</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>Hobserved</var><span class="hyp-type"><b>: </b><span>has_been_directly_observed (IM i) (s i) m</span></span></span><br><span><var>H11</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : state
        (preloaded_with_all_messages_vlsm (IM i)),
  constrained_state_prop (IM i) s
  ‚Üí <span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
      has_been_directly_observed (IM i) s m
      ‚Üí has_been_received (IM i) s m
        ‚à® has_been_sent (IM i) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl_part
  (preloaded_vlsm_machine (free_composite_vlsm IM)
     seed)
  (preloaded_vlsm_machine (free_composite_vlsm IM)
     (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> preloaded_vlsm_incl_preloaded_with_all_messages.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sec_composite</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk302" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk302"><span class="kn">Lemma</span> <span class="nf">composite_has_been_directly_observed_sent_received_iff</span>
  {<span class="nv">message</span>}
  `{EqDecision index}
  (IM : index -&gt; VLSM message)
  `{<span class="kr">forall</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)}
  `{<span class="kr">forall</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)}
  (s : composite_state IM)
  (m : message)
  : composite_has_been_directly_observed IM s m &lt;-&gt;
    composite_has_been_sent IM s m \/ composite_has_been_received IM s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_directly_observed IM s m
‚Üî composite_has_been_sent IM s m
  ‚à® composite_has_been_received IM s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk303" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk303"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_directly_observed IM s m
‚Üî composite_has_been_sent IM s m
  ‚à® composite_has_been_received IM s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk304" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk304"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_directly_observed IM s m
‚Üí composite_has_been_sent IM s m
  ‚à® composite_has_been_received IM s m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk305" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk305"><hr></label><div class="goal-conclusion">composite_has_been_sent IM s m
‚à® composite_has_been_received IM s m
‚Üí composite_has_been_directly_observed IM s m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk306" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk306">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_directly_observed IM s m
‚Üí composite_has_been_sent IM s m
  ‚à® composite_has_been_received IM s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> [i [Hs | Hr]]; [<span class="nb">left</span> | <span class="nb">right</span>]; <span class="kr">exists</span> <span class="nv">i</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk307" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk307">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_sent IM s m
‚à® composite_has_been_received IM s m
‚Üí composite_has_been_directly_observed IM s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> [[i Hs] | [i Hr]]; <span class="kr">exists</span> <span class="nv">i</span>; [<span class="nb">left</span> | <span class="nb">right</span>].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk308" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk308"><span class="kn">Lemma</span> <span class="nf">composite_has_been_directly_observed_free_iff</span>
  {<span class="nv">message</span>}
  `{finite.Finite index}
  (IM : index -&gt; VLSM message)
  `{<span class="kr">forall</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)}
  `{<span class="kr">forall</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)}
  (s : state (free_composite_vlsm IM))
  (m : message)
  : composite_has_been_directly_observed IM s m
      &lt;-&gt;
    has_been_directly_observed (free_composite_vlsm IM) s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (free_composite_vlsm IM)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_directly_observed IM s m
‚Üî has_been_directly_observed (free_composite_vlsm IM)
    s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk309" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk309"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (free_composite_vlsm IM)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_directly_observed IM s m
‚Üî has_been_directly_observed (free_composite_vlsm IM)
    s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk30a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk30a"><span class="nb">unfold</span> has_been_directly_observed; <span class="nb">cbn</span>; <span class="nb">unfold</span> has_been_directly_observed_from_sent_received; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (free_composite_vlsm IM)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_directly_observed IM s m
‚Üî composite_has_been_sent IM s m
  ‚à® composite_has_been_received IM s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> composite_has_been_directly_observed_sent_received_iff.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk30b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk30b"><span class="kn">Lemma</span> <span class="nf">composite_has_been_directly_observed_from_component</span>
  {<span class="nv">message</span>}
  `{finite.Finite index}
  (IM : index -&gt; VLSM message)
  `{<span class="kr">forall</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)}
  `{<span class="kr">forall</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)}
  (s : composite_state IM)
  (i : index)
  (m : message)
  : has_been_directly_observed (IM i) (s i) m -&gt; composite_has_been_directly_observed IM s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_directly_observed (IM i) (s i) m
‚Üí composite_has_been_directly_observed IM s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk30c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk30c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_directly_observed (IM i) (s i) m
‚Üí composite_has_been_directly_observed IM s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="kr">exists</span> <span class="nv">i</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk30d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk30d"><span class="kn">Lemma</span> <span class="nf">composite_has_been_directly_observed_lift</span>
  {<span class="nv">message</span>}
  `{finite.Finite index}
  (IM : index -&gt; VLSM message)
  `{<span class="kr">forall</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)}
  `{<span class="kr">forall</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)}
  (i : index)
  (s : state (IM i))
  (Hs : constrained_state_prop (IM i) s)
  (m : message)
  : composite_has_been_directly_observed IM (lift_to_composite_state&#39; IM i s) m
      &lt;-&gt;
    has_been_directly_observed (IM i) s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_directly_observed IM
  (lift_to_composite_state&#39; IM i s) m
‚Üî has_been_directly_observed (IM i) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk30e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk30e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_directly_observed IM
  (lift_to_composite_state&#39; IM i s) m
‚Üî has_been_directly_observed (IM i) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk30f" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk30f"><span class="nb">pose</span> (free_composite_vlsm IM) <span class="kr">as</span> Free.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_directly_observed IM
  (lift_to_composite_state&#39; IM i s) m
‚Üî has_been_directly_observed (IM i) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk310" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk310"><span class="nb">assert</span> (Hlift_s : constrained_state_prop Free (lift_to_composite_state&#39; IM i s)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk311" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hlift_s</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk311"><hr></label><div class="goal-conclusion">composite_has_been_directly_observed IM
  (lift_to_composite_state&#39; IM i s) m
‚Üî has_been_directly_observed (IM i) s m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk312" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk312">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk313" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk313"><span class="nb">revert</span> Hs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">constrained_state_prop (IM i) s
‚Üí constrained_state_prop Free
    (lift_to_composite_state&#39; IM i s)</div></blockquote></div></div></small><span class="alectryon-wsp">  </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> valid_state_preloaded_composite_free_lift.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk314" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk314">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hlift_s</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_directly_observed IM
  (lift_to_composite_state&#39; IM i s) m
‚Üî has_been_directly_observed (IM i) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk315" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk315"><span class="nb">split</span>; <span class="nb">intros</span> Hobs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hlift_s</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>composite_has_been_directly_observed IM
  (lift_to_composite_state&#39; IM i s) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_directly_observed (IM i) s m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk316" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hlift_s</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>has_been_directly_observed (IM i) s m</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk316"><hr></label><div class="goal-conclusion">composite_has_been_directly_observed IM
  (lift_to_composite_state&#39; IM i s) m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk317" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk317">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hlift_s</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>composite_has_been_directly_observed IM
  (lift_to_composite_state&#39; IM i s) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_directly_observed (IM i) s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk318" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk318"><span class="nb">apply</span> (proper_directly_observed (IM i)); [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hlift_s</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>composite_has_been_directly_observed IM
  (lift_to_composite_state&#39; IM i s) m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces (IM i)
  item_sends_or_receives s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk319" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk319"><span class="nb">intros</span> <span class="kr">is</span> tr Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hlift_s</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>composite_has_been_directly_observed IM
  (lift_to_composite_state&#39; IM i s) m</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm (IM i))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm (IM i)) <span class="kr">is</span> s
  tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message item_sends_or_receives m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk31a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk31a"><span class="nb">apply</span> composite_has_been_directly_observed_free_iff, proper_directly_observed <span class="kr">in</span> Hobs
    ; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hlift_s</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_all_preloaded_traces
  (free_composite_vlsm IM)
  item_sends_or_receives
  (lift_to_composite_state&#39; IM i s) m</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm (IM i))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm (IM i)) <span class="kr">is</span> s
  tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message item_sends_or_receives m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk31b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk31b"><span class="nb">apply</span> (VLSM_embedding_finite_valid_trace_init_to
      (lift_to_composite_preloaded_VLSM_embedding IM i)) <span class="kr">in</span> Htr <span class="kr">as</span> Hpre_tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hlift_s</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_all_preloaded_traces
  (free_composite_vlsm IM)
  item_sends_or_receives
  (lift_to_composite_state&#39; IM i s) m</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm (IM i))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm (IM i)) <span class="kr">is</span> s
  tr</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_to_composite_state&#39; IM i <span class="kr">is</span>)
  (lift_to_composite_state&#39; IM i s)
  (VLSM_embedding_finite_trace_project
     (lift_to_composite_preloaded_VLSM_embedding
        IM i) tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message item_sends_or_receives m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk31c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk31c"><span class="nb">specialize</span> (Hobs _ _ Hpre_tr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hlift_s</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>trace_has_message item_sends_or_receives m
  (VLSM_embedding_finite_trace_project
     (lift_to_composite_preloaded_VLSM_embedding
        IM i) tr)</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm (IM i))</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm (IM i)) <span class="kr">is</span> s
  tr</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_to_composite_state&#39; IM i <span class="kr">is</span>)
  (lift_to_composite_state&#39; IM i s)
  (VLSM_embedding_finite_trace_project
     (lift_to_composite_preloaded_VLSM_embedding
        IM i) tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message item_sends_or_receives m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk31d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk31d"><span class="nb">apply</span> Exists_exists.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hlift_s</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>trace_has_message item_sends_or_receives m
  (VLSM_embedding_finite_trace_project
     (lift_to_composite_preloaded_VLSM_embedding
        IM i) tr)</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm (IM i))</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm (IM i)) <span class="kr">is</span> s
  tr</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_to_composite_state&#39; IM i <span class="kr">is</span>)
  (lift_to_composite_state&#39; IM i s)
  (VLSM_embedding_finite_trace_project
     (lift_to_composite_preloaded_VLSM_embedding
        IM i) tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">x</span> : transition_item,
  x ‚àà tr ‚àß item_sends_or_receives m x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk31e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk31e"><span class="nb">apply</span> Exists_exists <span class="kr">in</span> Hobs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hlift_s</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">x</span> : transition_item,
  x
  ‚àà VLSM_embedding_finite_trace_project
      (lift_to_composite_preloaded_VLSM_embedding
         IM i) tr ‚àß item_sends_or_receives m x</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm (IM i))</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm (IM i)) <span class="kr">is</span> s
  tr</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_to_composite_state&#39; IM i <span class="kr">is</span>)
  (lift_to_composite_state&#39; IM i s)
  (VLSM_embedding_finite_trace_project
     (lift_to_composite_preloaded_VLSM_embedding
        IM i) tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">x</span> : transition_item,
  x ‚àà tr ‚àß item_sends_or_receives m x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk31f" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk31f"><span class="nb">destruct</span> Hobs <span class="kr">as</span> [composite_item [Hcomposite_item Hx]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hlift_s</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>composite_item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hcomposite_item</var><span class="hyp-type"><b>: </b><span>composite_item
‚àà VLSM_embedding_finite_trace_project
    (lift_to_composite_preloaded_VLSM_embedding
       IM i) tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>item_sends_or_receives m composite_item</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm (IM i))</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm (IM i)) <span class="kr">is</span> s
  tr</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_to_composite_state&#39; IM i <span class="kr">is</span>)
  (lift_to_composite_state&#39; IM i s)
  (VLSM_embedding_finite_trace_project
     (lift_to_composite_preloaded_VLSM_embedding
        IM i) tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">x</span> : transition_item,
  x ‚àà tr ‚àß item_sends_or_receives m x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk320" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk320"><span class="nb">apply</span> elem_of_list_fmap_2 <span class="kr">in</span> Hcomposite_item <span class="kr">as</span> [item [Hcomposite_item Hitem]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hlift_s</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>composite_item, item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hcomposite_item</var><span class="hyp-type"><b>: </b><span>composite_item =
pre_VLSM_embedding_transition_item_project
  (preloaded_with_all_messages_vlsm
     (IM i))
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_to_composite_label IM i)
  (lift_to_composite_state&#39; IM i)
  item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>item_sends_or_receives m composite_item</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm (IM i))</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm (IM i)) <span class="kr">is</span> s
  tr</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_to_composite_state&#39; IM i <span class="kr">is</span>)
  (lift_to_composite_state&#39; IM i s)
  (VLSM_embedding_finite_trace_project
     (lift_to_composite_preloaded_VLSM_embedding
        IM i) tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">x</span> : transition_item,
  x ‚àà tr ‚àß item_sends_or_receives m x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk321" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk321"><span class="kr">exists</span> <span class="nv">item</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hlift_s</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>composite_item, item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hcomposite_item</var><span class="hyp-type"><b>: </b><span>composite_item =
pre_VLSM_embedding_transition_item_project
  (preloaded_with_all_messages_vlsm
     (IM i))
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_to_composite_label IM i)
  (lift_to_composite_state&#39; IM i)
  item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>item_sends_or_receives m composite_item</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm (IM i))</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm (IM i)) <span class="kr">is</span> s
  tr</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_to_composite_state&#39; IM i <span class="kr">is</span>)
  (lift_to_composite_state&#39; IM i s)
  (VLSM_embedding_finite_trace_project
     (lift_to_composite_preloaded_VLSM_embedding
        IM i) tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">item ‚àà tr ‚àß item_sends_or_receives m item</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk322" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk322"><span class="nb">split</span>; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hlift_s</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>composite_item, item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hcomposite_item</var><span class="hyp-type"><b>: </b><span>composite_item =
pre_VLSM_embedding_transition_item_project
  (preloaded_with_all_messages_vlsm
     (IM i))
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_to_composite_label IM i)
  (lift_to_composite_state&#39; IM i)
  item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>item_sends_or_receives m composite_item</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm (IM i))</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm (IM i)) <span class="kr">is</span> s
  tr</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_to_composite_state&#39; IM i <span class="kr">is</span>)
  (lift_to_composite_state&#39; IM i s)
  (VLSM_embedding_finite_trace_project
     (lift_to_composite_preloaded_VLSM_embedding
        IM i) tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">item_sends_or_receives m item</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk323" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk323"><span class="nb">subst</span> composite_item.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hlift_s</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>item_sends_or_receives m
  (pre_VLSM_embedding_transition_item_project
     (preloaded_with_all_messages_vlsm (IM i))
     (preloaded_with_all_messages_vlsm
        (free_composite_vlsm IM))
     (lift_to_composite_label IM i)
     (lift_to_composite_state&#39; IM i) item)</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm (IM i))</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm (IM i)) <span class="kr">is</span> s
  tr</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_to_composite_state&#39; IM i <span class="kr">is</span>)
  (lift_to_composite_state&#39; IM i s)
  (VLSM_embedding_finite_trace_project
     (lift_to_composite_preloaded_VLSM_embedding
        IM i) tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">item_sends_or_receives m item</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> item.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk324" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk324">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hlift_s</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>has_been_directly_observed (IM i) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_directly_observed IM
  (lift_to_composite_state&#39; IM i s) m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk325" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk325"><span class="nb">apply</span> composite_has_been_directly_observed_free_iff, proper_directly_observed; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hlift_s</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>has_been_directly_observed (IM i) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces
  (free_composite_vlsm IM) item_sends_or_receives
  (lift_to_composite_state&#39; IM i s) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk326" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk326"><span class="nb">apply</span> has_been_directly_observed_consistency; [<span class="bp">by</span> <span class="nb">typeclasses eauto</span> | <span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hlift_s</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>has_been_directly_observed (IM i) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_some_preloaded_traces
  (free_composite_vlsm IM) item_sends_or_receives
  (lift_to_composite_state&#39; IM i s) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk327" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk327"><span class="nb">apply</span> proper_directly_observed <span class="kr">in</span> Hobs ; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hlift_s</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_all_preloaded_traces
  (IM i) item_sends_or_receives s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_some_preloaded_traces
  (free_composite_vlsm IM) item_sends_or_receives
  (lift_to_composite_state&#39; IM i s) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk328" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk328"><span class="nb">apply</span> has_been_directly_observed_consistency <span class="kr">in</span> Hobs; [| <span class="bp">by</span> <span class="nb">typeclasses eauto</span> | <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hlift_s</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_some_preloaded_traces
  (IM i) item_sends_or_receives s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_some_preloaded_traces
  (free_composite_vlsm IM) item_sends_or_receives
  (lift_to_composite_state&#39; IM i s) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk329" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk329"><span class="nb">destruct</span> Hobs <span class="kr">as</span> [<span class="kr">is</span> [tr [Htr Hobs]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hlift_s</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm (IM i))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm (IM i)) <span class="kr">is</span> s
  tr</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>trace_has_message item_sends_or_receives m tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_some_preloaded_traces
  (free_composite_vlsm IM) item_sends_or_receives
  (lift_to_composite_state&#39; IM i s) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk32a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk32a"><span class="nb">apply</span> (VLSM_embedding_finite_valid_trace_init_to
      (lift_to_composite_preloaded_VLSM_embedding IM i)) <span class="kr">in</span> Htr <span class="kr">as</span> Hpre_tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hlift_s</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm (IM i))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm (IM i)) <span class="kr">is</span> s
  tr</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>trace_has_message item_sends_or_receives m tr</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_to_composite_state&#39; IM i <span class="kr">is</span>)
  (lift_to_composite_state&#39; IM i s)
  (VLSM_embedding_finite_trace_project
     (lift_to_composite_preloaded_VLSM_embedding
        IM i) tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_some_preloaded_traces
  (free_composite_vlsm IM) item_sends_or_receives
  (lift_to_composite_state&#39; IM i s) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk32b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk32b"><span class="nb">eexists</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hlift_s</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm (IM i))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm (IM i)) <span class="kr">is</span> s
  tr</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>trace_has_message item_sends_or_receives m tr</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_to_composite_state&#39; IM i <span class="kr">is</span>)
  (lift_to_composite_state&#39; IM i s)
  (VLSM_embedding_finite_trace_project
     (lift_to_composite_preloaded_VLSM_embedding
        IM i) tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">tr0</span> : list transition_item) (<span class="nv">_</span> : finite_valid_trace_init_to
                                      (preloaded_with_all_messages_vlsm
                                         (free_composite_vlsm
                                            IM))
                                      <span class="nl">?start</span>
                                      (lift_to_composite_state&#39;
                                         IM i s) tr0),
  trace_has_message item_sends_or_receives m tr0</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk32c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk32c"><span class="nb">eexists</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hlift_s</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm (IM i))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm (IM i)) <span class="kr">is</span> s
  tr</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>trace_has_message item_sends_or_receives m tr</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_to_composite_state&#39; IM i <span class="kr">is</span>)
  (lift_to_composite_state&#39; IM i s)
  (VLSM_embedding_finite_trace_project
     (lift_to_composite_preloaded_VLSM_embedding
        IM i) tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">_</span> : finite_valid_trace_init_to
        (preloaded_with_all_messages_vlsm
           (free_composite_vlsm IM)) <span class="nl">?start</span>
        (lift_to_composite_state&#39; IM i s) <span class="nl">?tr</span>,
  trace_has_message item_sends_or_receives m <span class="nl">?tr</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk32d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk32d"><span class="kr">exists</span> <span class="nv">Hpre_tr</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hlift_s</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm (IM i))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm (IM i)) <span class="kr">is</span> s
  tr</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>trace_has_message item_sends_or_receives m tr</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_to_composite_state&#39; IM i <span class="kr">is</span>)
  (lift_to_composite_state&#39; IM i s)
  (VLSM_embedding_finite_trace_project
     (lift_to_composite_preloaded_VLSM_embedding
        IM i) tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message item_sends_or_receives m
  (VLSM_embedding_finite_trace_project
     (lift_to_composite_preloaded_VLSM_embedding IM i)
     tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk32e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk32e"><span class="nb">apply</span> Exists_exists.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hlift_s</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm (IM i))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm (IM i)) <span class="kr">is</span> s
  tr</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>trace_has_message item_sends_or_receives m tr</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_to_composite_state&#39; IM i <span class="kr">is</span>)
  (lift_to_composite_state&#39; IM i s)
  (VLSM_embedding_finite_trace_project
     (lift_to_composite_preloaded_VLSM_embedding
        IM i) tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">x</span> : transition_item,
  x
  ‚àà VLSM_embedding_finite_trace_project
      (lift_to_composite_preloaded_VLSM_embedding IM i)
      tr ‚àß item_sends_or_receives m x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk32f" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk32f"><span class="nb">apply</span> Exists_exists <span class="kr">in</span> Hobs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hlift_s</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm (IM i))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm (IM i)) <span class="kr">is</span> s
  tr</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">x</span> : transition_item,
  x ‚àà tr ‚àß item_sends_or_receives m x</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_to_composite_state&#39; IM i <span class="kr">is</span>)
  (lift_to_composite_state&#39; IM i s)
  (VLSM_embedding_finite_trace_project
     (lift_to_composite_preloaded_VLSM_embedding
        IM i) tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">x</span> : transition_item,
  x
  ‚àà VLSM_embedding_finite_trace_project
      (lift_to_composite_preloaded_VLSM_embedding IM i)
      tr ‚àß item_sends_or_receives m x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk330" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk330"><span class="nb">destruct</span> Hobs <span class="kr">as</span> [item [Hitem Hx]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hlift_s</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm (IM i))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm (IM i)) <span class="kr">is</span> s
  tr</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>item_sends_or_receives m item</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_to_composite_state&#39; IM i <span class="kr">is</span>)
  (lift_to_composite_state&#39; IM i s)
  (VLSM_embedding_finite_trace_project
     (lift_to_composite_preloaded_VLSM_embedding
        IM i) tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">x</span> : transition_item,
  x
  ‚àà VLSM_embedding_finite_trace_project
      (lift_to_composite_preloaded_VLSM_embedding IM i)
      tr ‚àß item_sends_or_receives m x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk331" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk331"><span class="kr">exists</span> (<span class="nv">lift_to_composite_transition_item&#39;</span> <span class="nv">IM</span> <span class="nv">i</span> <span class="nv">item</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hlift_s</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm (IM i))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm (IM i)) <span class="kr">is</span> s
  tr</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>item_sends_or_receives m item</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_to_composite_state&#39; IM i <span class="kr">is</span>)
  (lift_to_composite_state&#39; IM i s)
  (VLSM_embedding_finite_trace_project
     (lift_to_composite_preloaded_VLSM_embedding
        IM i) tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lift_to_composite_transition_item&#39; IM i item
‚àà VLSM_embedding_finite_trace_project
    (lift_to_composite_preloaded_VLSM_embedding IM i)
    tr
‚àß item_sends_or_receives m
    (lift_to_composite_transition_item&#39; IM i item)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk332" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk332"><span class="nb">split</span>; [| <span class="bp">by</span> <span class="nb">destruct</span> item].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hlift_s</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm (IM i))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm (IM i)) <span class="kr">is</span> s
  tr</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>item_sends_or_receives m item</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_to_composite_state&#39; IM i <span class="kr">is</span>)
  (lift_to_composite_state&#39; IM i s)
  (VLSM_embedding_finite_trace_project
     (lift_to_composite_preloaded_VLSM_embedding
        IM i) tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lift_to_composite_transition_item&#39; IM i item
‚àà VLSM_embedding_finite_trace_project
    (lift_to_composite_preloaded_VLSM_embedding IM i)
    tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk333" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk333"><span class="nb">apply</span> elem_of_list_fmap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>index</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (IM i)</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop (IM i) s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hlift_s</var><span class="hyp-type"><b>: </b><span>constrained_state_prop Free
  (lift_to_composite_state&#39; IM i s)</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm (IM i))</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm (IM i)) <span class="kr">is</span> s
  tr</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Hitem</var><span class="hyp-type"><b>: </b><span>item ‚àà tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>item_sends_or_receives m item</span></span></span><br><span><var>Hpre_tr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm
     (free_composite_vlsm IM))
  (lift_to_composite_state&#39; IM i <span class="kr">is</span>)
  (lift_to_composite_state&#39; IM i s)
  (VLSM_embedding_finite_trace_project
     (lift_to_composite_preloaded_VLSM_embedding
        IM i) tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">y</span> : transition_item,
  lift_to_composite_transition_item&#39; IM i item =
  pre_VLSM_embedding_transition_item_project
    (preloaded_with_all_messages_vlsm (IM i))
    (preloaded_with_all_messages_vlsm
       (free_composite_vlsm IM))
    (lift_to_composite_label IM i)
    (lift_to_composite_state&#39; IM i) y ‚àß y ‚àà tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="kr">exists</span> <span class="nv">item</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sec_CompositeComputableMessages</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  `{EqDecision message}
  `{finite.Finite index}
  (IM : index -&gt; VLSM message)
  (indexed_oracle_set : <span class="kr">forall</span> <span class="nv">i</span>, state (IM i) -&gt; <span class="nb">set</span> message)
  (indexed_message_selector : <span class="kr">forall</span> <span class="nv">i</span>, message -&gt; transition_item (IM i) -&gt; <span class="kt">Prop</span>)
  (Free := free_composite_vlsm IM)
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">composite_oracle_set</span> (<span class="nv">s</span> : composite_state IM) : <span class="nb">set</span> message :=
  concat (map (<span class="kr">fun</span> <span class="nv">i</span> =&gt; indexed_oracle_set i (s i)) (enum index)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk334" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk334"><span class="kn">Lemma</span> <span class="nf">elem_of_composite_oracle_set</span> :
  <span class="kr">forall</span> (<span class="nv">s</span> : composite_state IM) (<span class="nv">m</span> : message),
    m ‚àà composite_oracle_set s &lt;-&gt; <span class="kr">exists</span> <span class="nv">i</span>, m ‚àà indexed_oracle_set i (s i).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indexed_oracle_set</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  state (IM i) ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>indexed_message_selector</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message
  ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : composite_state IM) (<span class="nv">m</span> : message),
  m ‚àà composite_oracle_set s
  ‚Üî (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, m ‚àà indexed_oracle_set i (s i))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk335" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk335"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indexed_oracle_set</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  state (IM i) ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>indexed_message_selector</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message
  ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : composite_state IM) (<span class="nv">m</span> : message),
  m ‚àà composite_oracle_set s
  ‚Üî (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, m ‚àà indexed_oracle_set i (s i))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk336" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk336"><span class="nb">intros</span>; <span class="nb">split</span>; <span class="nb">setoid_rewrite</span> elem_of_list_In; <span class="nb">setoid_rewrite</span> in_concat;
    <span class="nb">setoid_rewrite</span> in_map_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indexed_oracle_set</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  state (IM i) ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>indexed_message_selector</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message
  ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÉ</span> <span class="nv">x</span> : list message,
   (<span class="kr">‚àÉ</span> <span class="nv">x0</span> : index,
      indexed_oracle_set x0 (s x0) = x
      ‚àß In x0 (enum index)) ‚àß In m x)
‚Üí <span class="kr">‚àÉ</span> <span class="nv">i</span> : index, In m (indexed_oracle_set i (s i))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk337" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indexed_oracle_set</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  state (IM i) ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>indexed_message_selector</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message
  ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk337"><hr></label><div class="goal-conclusion">(<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, In m (indexed_oracle_set i (s i)))
‚Üí <span class="kr">‚àÉ</span> <span class="nv">x</span> : list message,
    (<span class="kr">‚àÉ</span> <span class="nv">x0</span> : index,
       indexed_oracle_set x0 (s x0) = x
       ‚àß In x0 (enum index)) ‚àß 
    In m x</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk338" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk338">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indexed_oracle_set</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  state (IM i) ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>indexed_message_selector</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message
  ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÉ</span> <span class="nv">x</span> : list message,
   (<span class="kr">‚àÉ</span> <span class="nv">x0</span> : index,
      indexed_oracle_set x0 (s x0) = x
      ‚àß In x0 (enum index)) ‚àß In m x)
‚Üí <span class="kr">‚àÉ</span> <span class="nv">i</span> : index, In m (indexed_oracle_set i (s i))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> (? &amp; (? &amp; &lt;- &amp; _) &amp; ?); <span class="nb">eexists</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk339" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk339">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indexed_oracle_set</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  state (IM i) ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>indexed_message_selector</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message
  ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, In m (indexed_oracle_set i (s i)))
‚Üí <span class="kr">‚àÉ</span> <span class="nv">x</span> : list message,
    (<span class="kr">‚àÉ</span> <span class="nv">x0</span> : index,
       indexed_oracle_set x0 (s x0) = x
       ‚àß In x0 (enum index)) ‚àß In m x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> []; <span class="kp">repeat</span> <span class="nb">esplit</span>; [<span class="nb">apply</span> elem_of_list_In, elem_of_enum |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk33a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk33a"><span class="kn">Lemma</span> <span class="nf">composite_computable_messages_oracle</span>
   (<span class="nv">Hcmos</span> : <span class="kr">forall</span> <span class="nv">i</span>,
      computable_messages_oracle (IM i)
        (indexed_oracle_set i) (indexed_message_selector i))
  : computable_messages_oracle Free composite_oracle_set
      (composite_message_selector IM (message_selectors := indexed_message_selector)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indexed_oracle_set</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  state (IM i) ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>indexed_message_selector</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message
  ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hcmos</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  computable_messages_oracle 
    (IM i) (indexed_oracle_set i)
    (indexed_message_selector i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">computable_messages_oracle Free composite_oracle_set
  (composite_message_selector IM
     (message_selectors:=indexed_message_selector))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk33b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk33b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>indexed_oracle_set</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  state (IM i) ‚Üí <span class="nb">set</span> message</span></span></span><br><span><var>indexed_message_selector</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  message
  ‚Üí transition_item ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Free</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hcmos</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index,
  computable_messages_oracle 
    (IM i) (indexed_oracle_set i)
    (indexed_message_selector i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">computable_messages_oracle Free composite_oracle_set
  (composite_message_selector IM
     (message_selectors:=indexed_message_selector))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">constructor</span>; <span class="nb">intros</span>
  ; <span class="nb">setoid_rewrite</span> elem_of_composite_oracle_set
  ; <span class="nb">apply</span> free_composite_stepwise_props
     <span class="kr">with</span> (message_selectors := indexed_message_selector)
          (oracles := <span class="kr">fun</span> (<span class="nv">i</span> : index) (<span class="nv">s</span> : state (IM i)) (<span class="nv">m</span> : message) =&gt;
            m ‚àà indexed_oracle_set i s)
  ; [| <span class="bp">done</span> | | <span class="bp">done</span>]; <span class="nb">intro</span>; <span class="nb">apply</span> Hcmos.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sec_CompositeComputableMessages</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sec_composite_computable_sent_received_observed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  `{EqDecision message}
  `{finite.Finite index}
  (IM : index -&gt; VLSM message)
  `{<span class="kr">forall</span> <span class="nv">i</span>, ComputableSentMessages (IM i)}
  `{<span class="kr">forall</span> <span class="nv">i</span>, ComputableReceivedMessages (IM i)}
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">composite_received_messages_set</span> : composite_state IM -&gt; list message :=
  composite_oracle_set IM (<span class="kr">fun</span> <span class="nv">i</span> =&gt; received_messages_set).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">composite_sent_messages_set</span> : composite_state IM -&gt; list message :=
  composite_oracle_set IM (<span class="kr">fun</span> <span class="nv">i</span> =&gt; sent_messages_set).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">composite_observed_messages_set</span> (<span class="nv">s</span> : composite_state IM) : list message :=
  composite_sent_messages_set s ++ composite_received_messages_set s.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk33c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk33c"><span class="kn">Lemma</span> <span class="nf">elem_of_composite_received_messages_set</span> :
  <span class="kr">forall</span> (<span class="nv">s</span> : composite_state IM) (<span class="nv">m</span> : message),
    composite_has_been_received IM s m
      &lt;-&gt;
    m ‚àà composite_received_messages_set s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, ComputableSentMessages (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, ComputableReceivedMessages (IM i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : composite_state IM) (<span class="nv">m</span> : message),
  composite_has_been_received IM s m
  ‚Üî m ‚àà composite_received_messages_set s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk33d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk33d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, ComputableSentMessages (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, ComputableReceivedMessages (IM i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : composite_state IM) (<span class="nv">m</span> : message),
  composite_has_been_received IM s m
  ‚Üî m ‚àà composite_received_messages_set s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk33e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk33e"><span class="nb">setoid_rewrite</span> elem_of_composite_oracle_set.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, ComputableSentMessages (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, ComputableReceivedMessages (IM i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : composite_state IM) (<span class="nv">m</span> : message),
  composite_has_been_received IM s m
  ‚Üî (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, m ‚àà received_messages_set (s i))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">split</span>; <span class="nb">intros</span> [i Hi]; <span class="kr">exists</span> <span class="nv">i</span>; <span class="nb">apply</span> has_been_received_messages_set_iff.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk33f" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk33f"><span class="kn">Lemma</span> <span class="nf">elem_of_composite_sent_messages_set</span> :
  <span class="kr">forall</span> (<span class="nv">s</span> : composite_state IM) (<span class="nv">m</span> : message),
    composite_has_been_sent IM s m
      &lt;-&gt;
    m ‚àà composite_sent_messages_set s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, ComputableSentMessages (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, ComputableReceivedMessages (IM i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : composite_state IM) (<span class="nv">m</span> : message),
  composite_has_been_sent IM s m
  ‚Üî m ‚àà composite_sent_messages_set s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk340" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk340"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, ComputableSentMessages (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, ComputableReceivedMessages (IM i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : composite_state IM) (<span class="nv">m</span> : message),
  composite_has_been_sent IM s m
  ‚Üî m ‚àà composite_sent_messages_set s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk341" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk341"><span class="nb">setoid_rewrite</span> elem_of_composite_oracle_set.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, ComputableSentMessages (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, ComputableReceivedMessages (IM i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : composite_state IM) (<span class="nv">m</span> : message),
  composite_has_been_sent IM s m
  ‚Üî (<span class="kr">‚àÉ</span> <span class="nv">i</span> : index, m ‚àà sent_messages_set (s i))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">split</span>; <span class="nb">intros</span> [i Hi]; <span class="kr">exists</span> <span class="nv">i</span>; <span class="nb">apply</span> elem_of_sent_messages_set.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk342" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk342"><span class="kn">Lemma</span> <span class="nf">elem_of_composite_observed_messages_set</span> :
  <span class="kr">forall</span> (<span class="nv">s</span> : composite_state IM) (<span class="nv">m</span> : message),
    composite_has_been_directly_observed IM s m
      &lt;-&gt;
    m ‚àà composite_observed_messages_set s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, ComputableSentMessages (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, ComputableReceivedMessages (IM i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : composite_state IM) (<span class="nv">m</span> : message),
  composite_has_been_directly_observed IM s m
  ‚Üî m ‚àà composite_observed_messages_set s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk343" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk343"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, ComputableSentMessages (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, ComputableReceivedMessages (IM i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : composite_state IM) (<span class="nv">m</span> : message),
  composite_has_been_directly_observed IM s m
  ‚Üî m ‚àà composite_observed_messages_set s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk344" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk344"><span class="nb">intros</span> s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, ComputableSentMessages (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, ComputableReceivedMessages (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_directly_observed IM s m
‚Üî m ‚àà composite_observed_messages_set s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk345" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk345"><span class="nb">unfold</span> composite_observed_messages_set.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, ComputableSentMessages (IM i)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, ComputableReceivedMessages (IM i)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>composite_state IM</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_directly_observed IM s m
‚Üî m
  ‚àà composite_sent_messages_set s ++
    composite_received_messages_set s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> elem_of_app, composite_has_been_directly_observed_sent_received_iff,
     elem_of_composite_sent_messages_set, elem_of_composite_received_messages_set.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sec_composite_computable_sent_received_observed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sec_cannot_resend_message</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  `{EqDecision message}
  (X : VLSM message)
  `{HasBeenSentCapability message X}
  `{HasBeenReceivedCapability message X}
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">state_received_not_sent</span> (<span class="nv">s</span> : state X) (<span class="nv">m</span> : message) : <span class="kt">Prop</span> :=
  has_been_received X s m /\ ~ has_been_sent X s m.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk346" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk346"><span class="kn">Lemma</span> <span class="nf">state_received_not_sent_trace_iff</span>
  (<span class="nv">m</span> : message)
  (<span class="nv">s</span> <span class="nv">is</span> : state (preloaded_with_all_messages_vlsm X))
  (<span class="nv">tr</span> : list transition_item)
  (<span class="nv">Htr</span> : finite_constrained_trace_init_to X <span class="kr">is</span> s tr)
  : state_received_not_sent s m &lt;-&gt; trace_received_not_sent_before_or_after tr m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_received_not_sent s m
‚Üî trace_received_not_sent_before_or_after tr m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk347" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk347"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_received_not_sent s m
‚Üî trace_received_not_sent_before_or_after tr m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk348" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk348"><span class="nb">assert</span> (Hs : constrained_state_prop X s)
    <span class="bp">by</span> (<span class="nb">apply</span> proj1, valid_trace_last_pstate <span class="kr">in</span> Htr; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_received_not_sent s m
‚Üî trace_received_not_sent_before_or_after tr m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk349" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk349"><span class="nb">split</span>; <span class="nb">intros</span> [Hbrm Hnbsm].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s</span></span></span><br><span><var>Hbrm</var><span class="hyp-type"><b>: </b><span>has_been_received X s m</span></span></span><br><span><var>Hnbsm</var><span class="hyp-type"><b>: </b><span>¬¨ has_been_sent X s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_received_not_sent_before_or_after tr m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk34a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s</span></span></span><br><span><var>Hbrm</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hnbsm</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output) m
    tr</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk34a"><hr></label><div class="goal-conclusion">state_received_not_sent s m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk34b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk34b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s</span></span></span><br><span><var>Hbrm</var><span class="hyp-type"><b>: </b><span>has_been_received X s m</span></span></span><br><span><var>Hnbsm</var><span class="hyp-type"><b>: </b><span>¬¨ has_been_sent X s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_received_not_sent_before_or_after tr m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk34c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk34c"><span class="nb">apply</span> proper_received <span class="kr">in</span> Hbrm; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s</span></span></span><br><span><var>Hbrm</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_all_preloaded_traces
  X (field_selector input) s m</span></span></span><br><span><var>Hnbsm</var><span class="hyp-type"><b>: </b><span>¬¨ has_been_sent X s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_received_not_sent_before_or_after tr m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk34d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk34d"><span class="nb">specialize</span> (Hbrm <span class="kr">is</span> tr Htr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s</span></span></span><br><span><var>Hbrm</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hnbsm</var><span class="hyp-type"><b>: </b><span>¬¨ has_been_sent X s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_received_not_sent_before_or_after tr m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk34e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk34e"><span class="nb">split</span>; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s</span></span></span><br><span><var>Hbrm</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hnbsm</var><span class="hyp-type"><b>: </b><span>¬¨ has_been_sent X s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ trace_has_message (field_selector output) m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk34f" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk34f"><span class="nb">intro</span> Hbsm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s</span></span></span><br><span><var>Hbrm</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hnbsm</var><span class="hyp-type"><b>: </b><span>¬¨ has_been_sent X s m</span></span></span><br><span><var>Hbsm</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector output) m tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk350" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk350"><span class="nb">elim</span> Hnbsm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s</span></span></span><br><span><var>Hbrm</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hnbsm</var><span class="hyp-type"><b>: </b><span>¬¨ has_been_sent X s m</span></span></span><br><span><var>Hbsm</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector output) m tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent X s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk351" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk351"><span class="nb">apply</span> proper_sent; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s</span></span></span><br><span><var>Hbrm</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hnbsm</var><span class="hyp-type"><b>: </b><span>¬¨ has_been_sent X s m</span></span></span><br><span><var>Hbsm</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector output) m tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces X
  (field_selector output) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> has_been_sent_consistency; [.. | <span class="kr">exists</span> <span class="nv">is</span>, tr, Htr].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk352" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk352">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s</span></span></span><br><span><var>Hbrm</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hnbsm</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output) m
    tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_received_not_sent s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk353" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk353"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s</span></span></span><br><span><var>Hbrm</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hnbsm</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output) m
    tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received X s m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk354" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s</span></span></span><br><span><var>Hbrm</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hnbsm</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output) m
    tr</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk354"><hr></label><div class="goal-conclusion">¬¨ has_been_sent X s m</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk355" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk355">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s</span></span></span><br><span><var>Hbrm</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hnbsm</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output) m
    tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received X s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk356" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk356"><span class="nb">apply</span> proper_received; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s</span></span></span><br><span><var>Hbrm</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hnbsm</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output) m
    tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces X
  (field_selector input) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> has_been_received_consistency; [.. | <span class="kr">exists</span> <span class="nv">is</span>, tr, Htr].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk357" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk357">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s</span></span></span><br><span><var>Hbrm</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hnbsm</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output) m
    tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ has_been_sent X s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk358" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk358"><span class="nb">intro</span> Hbsm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s</span></span></span><br><span><var>Hbrm</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hnbsm</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output) m
    tr</span></span></span><br><span><var>Hbsm</var><span class="hyp-type"><b>: </b><span>has_been_sent X s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk359" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk359"><span class="nb">elim</span> Hnbsm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s</span></span></span><br><span><var>Hbrm</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hnbsm</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output) m
    tr</span></span></span><br><span><var>Hbsm</var><span class="hyp-type"><b>: </b><span>has_been_sent X s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message (field_selector output) m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> proper_sent <span class="kr">in</span> Hbsm; [<span class="nb">eapply</span> Hbsm |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">state_received_not_sent_invariant</span>
  (<span class="nv">s</span> : state X)
  (<span class="nv">P</span> : message -&gt; <span class="kt">Prop</span>)
  : <span class="kt">Prop</span>
  := <span class="kr">forall</span> <span class="nv">m</span>, state_received_not_sent s m -&gt; P m.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk35a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk35a"><span class="kn">Lemma</span> <span class="nf">state_received_not_sent_invariant_trace_iff</span>
  (<span class="nv">P</span> : message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">s</span> <span class="nv">is</span> : state (preloaded_with_all_messages_vlsm X))
  (<span class="nv">tr</span> : list transition_item)
  (<span class="nv">Htr</span> : finite_constrained_trace_init_to X <span class="kr">is</span> s tr)
  : state_received_not_sent_invariant s P &lt;-&gt;
    trace_received_not_sent_before_or_after_invariant tr P.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_received_not_sent_invariant s P
‚Üî trace_received_not_sent_before_or_after_invariant tr
    P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk35b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk35b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to X <span class="kr">is</span> s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_received_not_sent_invariant s P
‚Üî trace_received_not_sent_before_or_after_invariant tr
    P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">split</span>; <span class="nb">intros</span> Hinv m Hm
  ; <span class="nb">apply</span> Hinv
  ; <span class="nb">apply</span> (state_received_not_sent_trace_iff m s <span class="kr">is</span> tr Htr).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
A sent message cannot have been previously sent or received. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">cannot_resend_message_stepwise_prop</span> : <span class="kt">Prop</span> :=
  <span class="kr">forall</span> <span class="nv">l</span> <span class="nv">s</span> <span class="nv">oim</span> <span class="nv">s&#39;</span> <span class="nv">m</span>,
    input_constrained_transition X l (s, oim) (s&#39;, Some m) -&gt;
    ~ has_been_sent X s m /\ ~ has_been_received X s&#39; m.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk35c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk35c"><span class="kn">Lemma</span> <span class="nf">cannot_resend_received_message_in_future</span>
  (<span class="nv">Hno_resend</span> : cannot_resend_message_stepwise_prop)
  (<span class="nv">s1</span> <span class="nv">s2</span> : state (preloaded_with_all_messages_vlsm X))
  (<span class="nv">Hfuture</span> : in_futures (preloaded_with_all_messages_vlsm X) s1 s2)
  : <span class="kr">forall</span> <span class="nv">m</span> : message,
    state_received_not_sent s1 m -&gt; state_received_not_sent s2 m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Hfuture</var><span class="hyp-type"><b>: </b><span>in_futures
  (preloaded_with_all_messages_vlsm X) s1 s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  state_received_not_sent s1 m
  ‚Üí state_received_not_sent s2 m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk35d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk35d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Hfuture</var><span class="hyp-type"><b>: </b><span>in_futures
  (preloaded_with_all_messages_vlsm X) s1 s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  state_received_not_sent s1 m
  ‚Üí state_received_not_sent s2 m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk35e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk35e"><span class="nb">intros</span> m Hm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Hfuture</var><span class="hyp-type"><b>: </b><span>in_futures
  (preloaded_with_all_messages_vlsm X) s1 s2</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>state_received_not_sent s1 m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_received_not_sent s2 m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk35f" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk35f"><span class="nb">destruct</span> Hfuture <span class="kr">as</span> [tr2 Htr2].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr2</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X) s1 s2
  tr2</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>state_received_not_sent s1 m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_received_not_sent s2 m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk360" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk360"><span class="nb">induction</span> Htr2; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>s, f</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X) s f tl</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (s&#39;, iom) (s, oom)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>state_received_not_sent s&#39; m</span></span></span><br><span><var>IHHtr2</var><span class="hyp-type"><b>: </b><span>state_received_not_sent s m
‚Üí state_received_not_sent f m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_received_not_sent f m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk361" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk361"><span class="nb">apply</span> IHHtr2; <span class="nb">clear</span> IHHtr2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>s, f</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X) s f tl</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (s&#39;, iom) (s, oom)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>state_received_not_sent s&#39; m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_received_not_sent s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk362" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk362"><span class="nb">pose proof</span> (Hrupd := has_been_received_step_update Ht m).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>s, f</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X) s f tl</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (s&#39;, iom) (s, oom)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>state_received_not_sent s&#39; m</span></span></span><br><span><var>Hrupd</var><span class="hyp-type"><b>: </b><span>has_been_received X s m
‚Üî iom = Some m ‚à® has_been_received X s&#39; m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_received_not_sent s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk363" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk363"><span class="nb">pose proof</span> (Hmupd := has_been_sent_step_update Ht m).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>s, f</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X) s f tl</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (s&#39;, iom) (s, oom)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>state_received_not_sent s&#39; m</span></span></span><br><span><var>Hrupd</var><span class="hyp-type"><b>: </b><span>has_been_received X s m
‚Üî iom = Some m ‚à® has_been_received X s&#39; m</span></span></span><br><span><var>Hmupd</var><span class="hyp-type"><b>: </b><span>has_been_sent X s m
‚Üî oom = Some m ‚à® has_been_sent X s&#39; m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_received_not_sent s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk364" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk364"><span class="nb">destruct</span> Hm <span class="kr">as</span> [Hr Hs].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>s, f</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X) s f tl</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (s&#39;, iom) (s, oom)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span>has_been_received X s&#39; m</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>¬¨ has_been_sent X s&#39; m</span></span></span><br><span><var>Hrupd</var><span class="hyp-type"><b>: </b><span>has_been_received X s m
‚Üî iom = Some m ‚à® has_been_received X s&#39; m</span></span></span><br><span><var>Hmupd</var><span class="hyp-type"><b>: </b><span>has_been_sent X s m
‚Üî oom = Some m ‚à® has_been_sent X s&#39; m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_received_not_sent s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk365" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk365"><span class="nb">split</span>; [<span class="bp">by</span> itauto |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>s, f</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X) s f tl</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (s&#39;, iom) (s, oom)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span>has_been_received X s&#39; m</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>¬¨ has_been_sent X s&#39; m</span></span></span><br><span><var>Hrupd</var><span class="hyp-type"><b>: </b><span>has_been_received X s m
‚Üî iom = Some m ‚à® has_been_received X s&#39; m</span></span></span><br><span><var>Hmupd</var><span class="hyp-type"><b>: </b><span>has_been_sent X s m
‚Üî oom = Some m ‚à® has_been_sent X s&#39; m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ has_been_sent X s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk366" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk366"><span class="nb">intros</span> [-&gt; |]%Hmupd; [| <span class="bp">by</span> <span class="nb">apply</span> Hs].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>s, f</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X) s f tl</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (s&#39;, iom) (s, Some m)</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span>has_been_received X s&#39; m</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>¬¨ has_been_sent X s&#39; m</span></span></span><br><span><var>Hrupd</var><span class="hyp-type"><b>: </b><span>has_been_received X s m
‚Üî iom = Some m ‚à® has_been_received X s&#39; m</span></span></span><br><span><var>Hmupd</var><span class="hyp-type"><b>: </b><span>has_been_sent X s m
‚Üî Some m = Some m ‚à® has_been_sent X s&#39; m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> Hno_resend <span class="kr">in</span> Ht; itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  (<span class="nv">Hno_resend</span> : cannot_resend_message_stepwise_prop)
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk367" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk367"><span class="kn">Lemma</span> <span class="nf">input_valid_transition_received_not_resent</span> <span class="nv">l</span> <span class="nv">s</span> <span class="nv">m</span> <span class="nv">s&#39;</span> <span class="nv">om&#39;</span>
  (<span class="nv">Ht</span> : input_constrained_transition X l (s, Some m) (s&#39;, om&#39;))
  : om&#39; &lt;&gt; Some m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_constrained_transition X l (
  s, Some m) (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">om&#39; ‚â† Some m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk368" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk368"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_constrained_transition X l (
  s, Some m) (s&#39;, om&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">om&#39; ‚â† Some m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk369" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk369"><span class="nb">destruct</span> om&#39; <span class="kr">as</span> [m&#39; |]; [| <span class="bp">by</span> <span class="bp">congruence</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_constrained_transition X l (
  s, Some m) (s&#39;, Some m&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Some m&#39; ‚â† Some m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk36a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk36a"><span class="nb">intro</span> Heq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_constrained_transition X l (
  s, Some m) (s&#39;, Some m&#39;)</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>Some m&#39; = Some m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk36b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk36b"><span class="nb">inversion</span> Heq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m'</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_constrained_transition X l (
  s, Some m) (s&#39;, Some m&#39;)</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>Some m&#39; = Some m</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>m&#39; = m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk36c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk36c"><span class="nb">subst</span> m&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>Some m = Some m</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_constrained_transition X l (
  s, Some m) (s&#39;, Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk36d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk36d"><span class="nb">clear</span> Heq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_constrained_transition X l (
  s, Some m) (s&#39;, Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk36e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk36e"><span class="nb">destruct</span> (Hno_resend _ _ _ _ _ Ht) <span class="kr">as</span> [_ Hnbr_m].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_constrained_transition X l (
  s, Some m) (s&#39;, Some m)</span></span></span><br><span><var>Hnbr_m</var><span class="hyp-type"><b>: </b><span>¬¨ has_been_received X s&#39; m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk36f" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk36f"><span class="nb">elim</span> Hnbr_m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_constrained_transition X l (
  s, Some m) (s&#39;, Some m)</span></span></span><br><span><var>Hnbr_m</var><span class="hyp-type"><b>: </b><span>¬¨ has_been_received X s&#39; m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received X s&#39; m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk370" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk370"><span class="nb">clear</span> Hnbr_m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_constrained_transition X l (
  s, Some m) (s&#39;, Some m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received X s&#39; m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk371" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk371"><span class="nb">apply</span> exists_right_finite_trace_from <span class="kr">in</span> Ht.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state
          (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">ts</span> : list transition_item),
  finite_valid_trace_init_to
    (preloaded_with_all_messages_vlsm X) s0 s&#39;
    (ts ++
     [{|
        l := l;
        input := Some m;
        destination := s&#39;;
        output := Some m
      |}]) ‚àß finite_trace_last s0 ts = s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received X s&#39; m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk372" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk372"><span class="nb">destruct</span> Ht <span class="kr">as</span> [<span class="kr">is</span> [tr [Htr Hs]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s', is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm X) <span class="kr">is</span> s&#39;
  (tr ++
   [{|
      l := l;
      input := Some m;
      destination := s&#39;;
      output := Some m
    |}])</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>finite_trace_last <span class="kr">is</span> tr = s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received X s&#39; m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk373" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk373"><span class="nb">apply</span> proj1 <span class="kr">in</span> Htr <span class="kr">as</span> Hlst.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s', is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm X) <span class="kr">is</span> s&#39;
  (tr ++
   [{|
      l := l;
      input := Some m;
      destination := s&#39;;
      output := Some m
    |}])</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>finite_trace_last <span class="kr">is</span> tr = s</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X) <span class="kr">is</span> s&#39;
  (tr ++
   [{|
      l := l;
      input := Some m;
      destination := s&#39;;
      output := Some m
    |}])</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received X s&#39; m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk374" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk374"><span class="nb">apply</span> finite_valid_trace_from_to_last_pstate <span class="kr">in</span> Hlst.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s', is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm X) <span class="kr">is</span> s&#39;
  (tr ++
   [{|
      l := l;
      input := Some m;
      destination := s&#39;;
      output := Some m
    |}])</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>finite_trace_last <span class="kr">is</span> tr = s</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm X) s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received X s&#39; m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk375" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk375"><span class="nb">apply</span> proper_received; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s', is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm X) <span class="kr">is</span> s&#39;
  (tr ++
   [{|
      l := l;
      input := Some m;
      destination := s&#39;;
      output := Some m
    |}])</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>finite_trace_last <span class="kr">is</span> tr = s</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm X) s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces X
  (field_selector input) s&#39; m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk376" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk376"><span class="nb">apply</span> has_been_received_consistency; [<span class="bp">done</span> | <span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s', is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm X) <span class="kr">is</span> s&#39;
  (tr ++
   [{|
      l := l;
      input := Some m;
      destination := s&#39;;
      output := Some m
    |}])</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>finite_trace_last <span class="kr">is</span> tr = s</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm X) s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_some_preloaded_traces X
  (field_selector input) s&#39; m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk377" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk377"><span class="kr">exists</span> <span class="nv">_</span>, _, Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>s', is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm X) <span class="kr">is</span> s&#39;
  (tr ++
   [{|
      l := l;
      input := Some m;
      destination := s&#39;;
      output := Some m
    |}])</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>finite_trace_last <span class="kr">is</span> tr = s</span></span></span><br><span><var>Hlst</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm X) s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message (field_selector input) m
  (tr ++
   [{|
      l := l;
      input := Some m;
      destination := s&#39;;
      output := Some m
    |}])</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> Exists_app; <span class="nb">right</span>; <span class="nb">apply</span> Exists_cons; <span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk378" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk378"><span class="kn">Lemma</span> <span class="nf">lift_preloaded_trace_to_seeded</span>
  (<span class="nv">P</span> : message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">tr</span> : list transition_item)
  (<span class="nv">Htrm</span> : trace_received_not_sent_before_or_after_invariant tr P)
  (<span class="nv">is</span> : state (preloaded_with_all_messages_vlsm X))
  (<span class="nv">Htr</span> : finite_constrained_trace X <span class="kr">is</span> tr)
  : finite_valid_trace (preloaded_vlsm X P) <span class="kr">is</span> tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace X <span class="kr">is</span> tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace (preloaded_vlsm X P) <span class="kr">is</span> tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk379" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk379"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace X <span class="kr">is</span> tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace (preloaded_vlsm X P) <span class="kr">is</span> tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk37a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk37a"><span class="nb">unfold</span> trace_received_not_sent_before_or_after_invariant <span class="kr">in</span> Htrm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after tr m
  ‚Üí P m</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace X <span class="kr">is</span> tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace (preloaded_vlsm X P) <span class="kr">is</span> tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk37b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk37b"><span class="nb">split</span>; [| <span class="bp">by</span> <span class="nb">apply</span> Htr].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after tr m
  ‚Üí P m</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace X <span class="kr">is</span> tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from (preloaded_vlsm X P) <span class="kr">is</span> tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk37c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk37c"><span class="nb">induction</span> Htr <span class="nb">using</span> finite_valid_trace_rev_ind; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after [] m
  ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>initial_state_prop si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from (preloaded_vlsm X P) si []</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk37d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, iom) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>(<span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
   trace_received_not_sent_before_or_after tr
     m ‚Üí P m)
‚Üí finite_valid_trace_from 
    (preloaded_vlsm X P) si tr</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk37d"><hr></label><div class="goal-conclusion">finite_valid_trace_from 
  (preloaded_vlsm X P) si 
  (tr ++ [x])</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk37e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk37e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after [] m
  ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>initial_state_prop si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from (preloaded_vlsm X P) si []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk37f" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk37f">rapply @finite_valid_trace_from_empty.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after [] m
  ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Hsi</var><span class="hyp-type"><b>: </b><span>initial_state_prop si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop (preloaded_vlsm X P) si</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> initial_state_is_valid.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk380" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk380">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, iom) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>(<span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
   trace_received_not_sent_before_or_after tr
     m ‚Üí P m)
‚Üí finite_valid_trace_from 
    (preloaded_vlsm X P) si tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from (preloaded_vlsm X P) si
  (tr ++ [x])</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk381" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk381"><span class="nb">assert</span> (trace_received_not_sent_before_or_after_invariant tr P) <span class="kr">as</span> Htrm&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, iom) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>(<span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
   trace_received_not_sent_before_or_after tr
     m ‚Üí P m)
‚Üí finite_valid_trace_from 
    (preloaded_vlsm X P) si tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_received_not_sent_before_or_after_invariant tr P</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk382" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, iom) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>(<span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
   trace_received_not_sent_before_or_after tr
     m ‚Üí P m)
‚Üí finite_valid_trace_from 
    (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Htrm'</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk382"><hr></label><div class="goal-conclusion">finite_valid_trace_from 
  (preloaded_vlsm X P) si 
  (tr ++ [x])</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk383" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk383">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, iom) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>(<span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
   trace_received_not_sent_before_or_after tr
     m ‚Üí P m)
‚Üí finite_valid_trace_from 
    (preloaded_vlsm X P) si tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_received_not_sent_before_or_after_invariant tr P</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk384" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk384"><span class="nb">intros</span> m [Hrecv Hsend].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, iom) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>(<span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
   trace_received_not_sent_before_or_after tr
     m ‚Üí P m)
‚Üí finite_valid_trace_from 
    (preloaded_vlsm X P) si tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hrecv</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hsend</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output) m
    tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk385" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk385"><span class="nb">apply</span> (Htrm m); <span class="nb">clear</span> Htrm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, iom) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>(<span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
   trace_received_not_sent_before_or_after tr
     m ‚Üí P m)
‚Üí finite_valid_trace_from 
    (preloaded_vlsm X P) si tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hrecv</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hsend</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output) m
    tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_received_not_sent_before_or_after (tr ++ [x]) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk386" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk386"><span class="nb">split</span>; [<span class="bp">by</span> <span class="nb">apply</span> Exists_app; <span class="nb">left</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, iom) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>(<span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
   trace_received_not_sent_before_or_after tr
     m ‚Üí P m)
‚Üí finite_valid_trace_from 
    (preloaded_vlsm X P) si tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hrecv</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hsend</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message (field_selector output) m
    tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ trace_has_message (field_selector output) m
    (tr ++ [x])</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk387" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk387"><span class="bp">contradict</span> Hsend.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, iom) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>(<span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
   trace_received_not_sent_before_or_after tr
     m ‚Üí P m)
‚Üí finite_valid_trace_from 
    (preloaded_vlsm X P) si tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hrecv</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hsend</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector output) m
  (tr ++ [x])</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message (field_selector output) m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk388" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk388"><span class="nb">unfold</span> trace_has_message <span class="kr">in</span> Hsend.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, iom) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>(<span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
   trace_received_not_sent_before_or_after tr
     m ‚Üí P m)
‚Üí finite_valid_trace_from 
    (preloaded_vlsm X P) si tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hrecv</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hsend</var><span class="hyp-type"><b>: </b><span>Exists (field_selector output m) (tr ++ [x])</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message (field_selector output) m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk389" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk389"><span class="nb">rewrite</span> Exists_app, Exists_cons, Exists_nil <span class="kr">in</span> Hsend.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, iom) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>(<span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
   trace_received_not_sent_before_or_after tr
     m ‚Üí P m)
‚Üí finite_valid_trace_from 
    (preloaded_vlsm X P) si tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hrecv</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hsend</var><span class="hyp-type"><b>: </b><span>Exists (field_selector output m) tr
‚à® field_selector output m x ‚à® <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message (field_selector output) m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk38a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk38a"><span class="nb">simpl</span> <span class="kr">in</span> Hsend.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, iom) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>(<span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
   trace_received_not_sent_before_or_after tr
     m ‚Üí P m)
‚Üí finite_valid_trace_from 
    (preloaded_vlsm X P) si tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hrecv</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hsend</var><span class="hyp-type"><b>: </b><span>Exists (field_selector output m) tr
‚à® oom = Some m ‚à® <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message (field_selector output) m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk38b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk38b"><span class="nb">cut</span> (oom &lt;&gt; Some m); [<span class="bp">by</span> itauto |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, iom) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>(<span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
   trace_received_not_sent_before_or_after tr
     m ‚Üí P m)
‚Üí finite_valid_trace_from 
    (preloaded_vlsm X P) si tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hrecv</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hsend</var><span class="hyp-type"><b>: </b><span>Exists (field_selector output m) tr
‚à® oom = Some m ‚à® <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oom ‚â† Some m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk38c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk38c"><span class="nb">intros</span> -&gt;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := Some m
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, iom) (
  sf, Some m)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>(<span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
   trace_received_not_sent_before_or_after tr
     m ‚Üí P m)
‚Üí finite_valid_trace_from 
    (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Hrecv</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hsend</var><span class="hyp-type"><b>: </b><span>Exists (field_selector output m) tr
‚à® Some m = Some m ‚à® <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk38d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk38d"><span class="nb">cut</span> (has_been_received X sf m); [<span class="bp">by</span> <span class="nb">apply</span> (Hno_resend _ _ _ _ _ Hx) |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := Some m
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, iom) (
  sf, Some m)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>(<span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
   trace_received_not_sent_before_or_after tr
     m ‚Üí P m)
‚Üí finite_valid_trace_from 
    (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Hrecv</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hsend</var><span class="hyp-type"><b>: </b><span>Exists (field_selector output m) tr
‚à® Some m = Some m ‚à® <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received X sf m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk38e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk38e"><span class="nb">apply</span> (has_been_received_step_update Hx); <span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := Some m
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, iom) (
  sf, Some m)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>(<span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
   trace_received_not_sent_before_or_after tr
     m ‚Üí P m)
‚Üí finite_valid_trace_from 
    (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Hrecv</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hsend</var><span class="hyp-type"><b>: </b><span>Exists (field_selector output m) tr
‚à® Some m = Some m ‚à® <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received X (finite_trace_last si tr) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk38f" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk38f"><span class="nb">erewrite</span> oracle_partial_trace_update.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := Some m
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, iom) (
  sf, Some m)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>(<span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
   trace_received_not_sent_before_or_after tr
     m ‚Üí P m)
‚Üí finite_valid_trace_from 
    (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Hrecv</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hsend</var><span class="hyp-type"><b>: </b><span>Exists (field_selector output m) tr
‚à® Some m = Some m ‚à® <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message <span class="nl">?Goal1</span> m <span class="nl">?Goal4</span>
‚à® has_been_received X <span class="nl">?Goal3</span> m</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk390" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := Some m
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, iom) (
  sf, Some m)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>(<span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
   trace_received_not_sent_before_or_after tr
     m ‚Üí P m)
‚Üí finite_valid_trace_from 
    (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Hrecv</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hsend</var><span class="hyp-type"><b>: </b><span>Exists (field_selector output m) tr
‚à® Some m = Some m ‚à® <span class="kt">False</span></span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk390"><hr></label><div class="goal-conclusion">oracle_stepwise_props <span class="nl">?Goal1</span> (has_been_received X)</div></blockquote><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk391" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := Some m
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, iom) (
  sf, Some m)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>(<span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
   trace_received_not_sent_before_or_after tr
     m ‚Üí P m)
‚Üí finite_valid_trace_from 
    (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Hrecv</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hsend</var><span class="hyp-type"><b>: </b><span>Exists (field_selector output m) tr
‚à® Some m = Some m ‚à® <span class="kt">False</span></span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk391"><hr></label><div class="goal-conclusion">finite_constrained_trace_from_to X 
  <span class="nl">?Goal3</span> (finite_trace_last si tr) 
  <span class="nl">?Goal4</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk392" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk392">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := Some m
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, iom) (
  sf, Some m)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>(<span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
   trace_received_not_sent_before_or_after tr
     m ‚Üí P m)
‚Üí finite_valid_trace_from 
    (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Hrecv</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hsend</var><span class="hyp-type"><b>: </b><span>Exists (field_selector output m) tr
‚à® Some m = Some m ‚à® <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message <span class="nl">?Goal1</span> m <span class="nl">?Goal4</span>
‚à® has_been_received X <span class="nl">?Goal3</span> m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk393" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk393">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := Some m
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, iom) (
  sf, Some m)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>(<span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
   trace_received_not_sent_before_or_after tr
     m ‚Üí P m)
‚Üí finite_valid_trace_from 
    (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Hrecv</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hsend</var><span class="hyp-type"><b>: </b><span>Exists (field_selector output m) tr
‚à® Some m = Some m ‚à® <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">oracle_stepwise_props (field_selector input)
  (has_been_received X)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> has_been_received_stepwise_props.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk394" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk394">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>iom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := Some m
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, iom) (
  sf, Some m)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>(<span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
   trace_received_not_sent_before_or_after tr
     m ‚Üí P m)
‚Üí finite_valid_trace_from 
    (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Hrecv</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hsend</var><span class="hyp-type"><b>: </b><span>Exists (field_selector output m) tr
‚à® Some m = Some m ‚à® <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_constrained_trace_from_to X <span class="nl">?Goal0</span>
  (finite_trace_last si tr) tr</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> valid_trace_add_default_last <span class="kr">in</span> Htr; <span class="nb">apply</span> Htr.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk395" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk395">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, iom) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>(<span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
   trace_received_not_sent_before_or_after tr
     m ‚Üí P m)
‚Üí finite_valid_trace_from 
    (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Htrm'</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from (preloaded_vlsm X P) si
  (tr ++ [x])</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk396" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk396"><span class="nb">specialize</span> (IHHtr Htrm&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, iom) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from 
  (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Htrm'</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from (preloaded_vlsm X P) si
  (tr ++ [x])</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk397" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk397"><span class="nb">apply</span> (extend_right_finite_trace_from _ IHHtr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, iom) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from 
  (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Htrm'</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition (preloaded_vlsm X P) l
  (finite_trace_last si tr, iom) (sf, oom)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk398" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk398"><span class="kp">repeat</span> <span class="nb">split</span>; <span class="kp">try</span> <span class="nb">apply</span> Hx;
    [<span class="bp">by</span> <span class="nb">apply</span> finite_valid_trace_last_pstate |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, iom) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from 
  (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Htrm'</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop (preloaded_vlsm X P) iom</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk399" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk399"><span class="nb">destruct</span> iom <span class="kr">as</span> [m |]; [| <span class="bp">by</span> <span class="nb">apply</span> option_valid_message_None].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := Some m;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, Some m) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from 
  (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Htrm'</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop (preloaded_vlsm X P)
  (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    <span class="c">(*</span>
<span class="c">      If m was sent during tr, it is valid because it was</span>
<span class="c">      produced in a valid (by IHHtr) trace.</span>
<span class="c">      If m was not sent during tr,</span>
<span class="c">    *)</span>
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk39a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk39a"><span class="nb">assert</span> (Decision (trace_has_message (field_selector output) m tr)) <span class="kr">as</span> [Hsent | Hnot_sent].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := Some m;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, Some m) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from 
  (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Htrm'</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision
  (trace_has_message (field_selector output) m tr)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk39b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := Some m;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, Some m) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from 
  (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Htrm'</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector output) m tr</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk39b"><hr></label><div class="goal-conclusion">option_valid_message_prop 
  (preloaded_vlsm X P) 
  (Some m)</div></blockquote><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk39c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := Some m;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, Some m) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from 
  (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Htrm'</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P</span></span></span><br><span><var>Hnot_sent</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message
    (field_selector output) m tr</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk39c"><hr></label><div class="goal-conclusion">option_valid_message_prop 
  (preloaded_vlsm X P) 
  (Some m)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk39d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk39d"><span class="nb">apply</span> (@Exists_dec _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := Some m;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, Some m) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from 
  (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Htrm'</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">x</span> : transition_item,
  Decision (field_selector output m x)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk39e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := Some m;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, Some m) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from 
  (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Htrm'</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector output) m tr</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk39e"><hr></label><div class="goal-conclusion">option_valid_message_prop 
  (preloaded_vlsm X P) 
  (Some m)</div></blockquote><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk39f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := Some m;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, Some m) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from 
  (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Htrm'</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P</span></span></span><br><span><var>Hnot_sent</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message
    (field_selector output) m tr</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk39f"><hr></label><div class="goal-conclusion">option_valid_message_prop 
  (preloaded_vlsm X P) 
  (Some m)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3a0" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3a0"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := Some m;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, Some m) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from 
  (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Htrm'</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P</span></span></span><br><span><var>x0</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision (field_selector output m x0)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk3a1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := Some m;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, Some m) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from 
  (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Htrm'</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector output) m tr</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk3a1"><hr></label><div class="goal-conclusion">option_valid_message_prop 
  (preloaded_vlsm X P) 
  (Some m)</div></blockquote><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk3a2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := Some m;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, Some m) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from 
  (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Htrm'</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P</span></span></span><br><span><var>Hnot_sent</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message
    (field_selector output) m tr</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk3a2"><hr></label><div class="goal-conclusion">option_valid_message_prop 
  (preloaded_vlsm X P) 
  (Some m)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3a3" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3a3"><span class="nb">apply</span> decide_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := Some m;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, Some m) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from 
  (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Htrm'</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector output) m tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop (preloaded_vlsm X P)
  (Some m)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk3a4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := Some m;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, Some m) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from 
  (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Htrm'</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P</span></span></span><br><span><var>Hnot_sent</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message
    (field_selector output) m tr</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk3a4"><hr></label><div class="goal-conclusion">option_valid_message_prop 
  (preloaded_vlsm X P) 
  (Some m)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3a5" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3a5">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := Some m;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, Some m) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from 
  (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Htrm'</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector output) m tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop (preloaded_vlsm X P)
  (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> valid_trace_output_is_valid.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3a6" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3a6">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := Some m;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, Some m) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from 
  (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Htrm'</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P</span></span></span><br><span><var>Hnot_sent</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message
    (field_selector output) m tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop (preloaded_vlsm X P)
  (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3a7" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3a7"><span class="nb">apply</span> initial_message_is_valid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := Some m;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, Some m) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from 
  (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Htrm'</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P</span></span></span><br><span><var>Hnot_sent</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message
    (field_selector output) m tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">initial_message_prop m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3a8" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3a8"><span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := Some m;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, Some m) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from 
  (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Htrm'</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P</span></span></span><br><span><var>Hnot_sent</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message
    (field_selector output) m tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3a9" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3a9"><span class="nb">apply</span> Htrm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := Some m;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, Some m) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from 
  (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Htrm'</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P</span></span></span><br><span><var>Hnot_sent</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message
    (field_selector output) m tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_received_not_sent_before_or_after (tr ++ [x]) m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3aa" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3aa"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := Some m;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, Some m) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from 
  (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Htrm'</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P</span></span></span><br><span><var>Hnot_sent</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message
    (field_selector output) m tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message (field_selector input) m (tr ++ [x])</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Equivocation-v-chk3ab" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := Some m;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, Some m) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from 
  (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Htrm'</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P</span></span></span><br><span><var>Hnot_sent</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message
    (field_selector output) m tr</span></span></span><br></div><label class="goal-separator" for="Equivocation-v-chk3ab"><hr></label><div class="goal-conclusion">¬¨ trace_has_message (field_selector output) m
    (tr ++ [x])</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3ac" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3ac">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := Some m;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, Some m) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from 
  (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Htrm'</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P</span></span></span><br><span><var>Hnot_sent</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message
    (field_selector output) m tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message (field_selector input) m (tr ++ [x])</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> Exists_app; <span class="nb">right</span>; <span class="nb">apply</span> Exists_cons; <span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3ad" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3ad">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := Some m;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, Some m) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from 
  (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Htrm'</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P</span></span></span><br><span><var>Hnot_sent</var><span class="hyp-type"><b>: </b><span>¬¨ trace_has_message
    (field_selector output) m tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ trace_has_message (field_selector output) m
    (tr ++ [x])</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3ae" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3ae"><span class="nb">intro</span> Hsent; <span class="nb">destruct</span> Hnot_sent.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := Some m;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, Some m) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from 
  (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Htrm'</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector output) m
  (tr ++ [x])</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message (field_selector output) m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3af" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3af"><span class="nb">unfold</span> trace_has_message <span class="kr">in</span> Hsent.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := Some m;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, Some m) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from 
  (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Htrm'</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>Exists (field_selector output m) (tr ++ [x])</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message (field_selector output) m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3b0" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3b0"><span class="nb">rewrite</span> Exists_app, Exists_cons, Exists_nil <span class="kr">in</span> Hsent.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := Some m;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, Some m) (
  sf, oom)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from 
  (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Htrm'</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P</span></span></span><br><span><var>Hsent</var><span class="hyp-type"><b>: </b><span>Exists (field_selector output m) tr
‚à® field_selector output m x ‚à® <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message (field_selector output) m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3b1" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3b1"><span class="nb">destruct</span> Hsent <span class="kr">as</span> [Hsent | [[= -&gt;] | []]]; [<span class="bp">done</span> | <span class="nb">exfalso</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := Some m;
  destination := sf;
  output := Some m
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, Some m) (
  sf, Some m)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from 
  (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Htrm'</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3b2" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3b2"><span class="nb">apply</span> Hno_resend <span class="kr">in</span> Hx <span class="kr">as</span> Hx&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := Some m;
  destination := sf;
  output := Some m
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, Some m) (
  sf, Some m)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from 
  (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Htrm'</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P</span></span></span><br><span><var>Hx'</var><span class="hyp-type"><b>: </b><span>¬¨ has_been_sent X (finite_trace_last si tr) m
‚àß ¬¨ has_been_received X sf m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3b3" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3b3"><span class="nb">apply</span> (proj2 Hx&#39;); <span class="nb">clear</span> Hx&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := Some m;
  destination := sf;
  output := Some m
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>Htrm</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">m</span> : message,
  trace_received_not_sent_before_or_after
    (tr ++ [x]) m ‚Üí P m</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (preloaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, Some m) (
  sf, Some m)</span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from 
  (preloaded_vlsm X P) si tr</span></span></span><br><span><var>Htrm'</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_received X sf m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> (has_been_received_step_update Hx); <span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3b4" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3b4"><span class="kn">Lemma</span> <span class="nf">lift_preloaded_state_to_seeded</span>
  (<span class="nv">P</span> : message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">s</span> : state X)
  (<span class="nv">Hequiv_s</span> : state_received_not_sent_invariant s P)
  (<span class="nv">Hs</span> : constrained_state_prop X s)
  : valid_state_prop (preloaded_vlsm X P) s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Hequiv_s</var><span class="hyp-type"><b>: </b><span>state_received_not_sent_invariant s P</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop (preloaded_vlsm X P) s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3b5" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3b5"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Hequiv_s</var><span class="hyp-type"><b>: </b><span>state_received_not_sent_invariant s P</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop (preloaded_vlsm X P) s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3b6" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3b6"><span class="nb">apply</span> valid_state_has_trace <span class="kr">in</span> Hs <span class="kr">as</span> Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Hequiv_s</var><span class="hyp-type"><b>: </b><span>state_received_not_sent_invariant s P</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> (<span class="nv">is</span> : state
          (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">tr</span> : list transition_item),
  finite_valid_trace_init_to
    (preloaded_with_all_messages_vlsm X) <span class="kr">is</span> s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop (preloaded_vlsm X P) s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3b7" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3b7"><span class="nb">destruct</span> Htr <span class="kr">as</span> [<span class="kr">is</span> [tr Htr]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Hequiv_s</var><span class="hyp-type"><b>: </b><span>state_received_not_sent_invariant s P</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm X) <span class="kr">is</span> s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop (preloaded_vlsm X P) s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3b8" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3b8"><span class="nb">specialize</span> (lift_preloaded_trace_to_seeded P tr) <span class="kr">as</span> Hlift.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Hequiv_s</var><span class="hyp-type"><b>: </b><span>state_received_not_sent_invariant s P</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm X) <span class="kr">is</span> s tr</span></span></span><br><span><var>Hlift</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P
‚Üí <span class="kr">‚àÄ</span> <span class="nv">is</span> : state
           (preloaded_with_all_messages_vlsm X),
    finite_constrained_trace X <span class="kr">is</span> tr
    ‚Üí finite_valid_trace 
        (preloaded_vlsm X P) <span class="kr">is</span> tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop (preloaded_vlsm X P) s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3b9" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3b9">spec Hlift; [<span class="bp">by</span> <span class="nb">revert</span> Hequiv_s; <span class="nb">apply</span> state_received_not_sent_invariant_trace_iff <span class="kr">with</span> <span class="kr">is</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Hequiv_s</var><span class="hyp-type"><b>: </b><span>state_received_not_sent_invariant s P</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm X) <span class="kr">is</span> s tr</span></span></span><br><span><var>Hlift</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">is</span> : state
         (preloaded_with_all_messages_vlsm X),
  finite_constrained_trace X <span class="kr">is</span> tr
  ‚Üí finite_valid_trace 
      (preloaded_vlsm X P) <span class="kr">is</span> tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop (preloaded_vlsm X P) s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3ba" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3ba"><span class="nb">specialize</span> (Hlift _ (valid_trace_forget_last Htr)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Hequiv_s</var><span class="hyp-type"><b>: </b><span>state_received_not_sent_invariant s P</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm X) <span class="kr">is</span> s tr</span></span></span><br><span><var>Hlift</var><span class="hyp-type"><b>: </b><span>finite_valid_trace (preloaded_vlsm X P) <span class="kr">is</span> tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop (preloaded_vlsm X P) s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3bb" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3bb"><span class="nb">apply</span> proj1 <span class="kr">in</span> Hlift.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Hequiv_s</var><span class="hyp-type"><b>: </b><span>state_received_not_sent_invariant s P</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm X) <span class="kr">is</span> s tr</span></span></span><br><span><var>Hlift</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from 
  (preloaded_vlsm X P) <span class="kr">is</span> tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop (preloaded_vlsm X P) s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3bc" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3bc"><span class="nb">apply</span> finite_valid_trace_last_pstate <span class="kr">in</span> Hlift.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Hequiv_s</var><span class="hyp-type"><b>: </b><span>state_received_not_sent_invariant s P</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm X) <span class="kr">is</span> s tr</span></span></span><br><span><var>Hlift</var><span class="hyp-type"><b>: </b><span>valid_state_prop (preloaded_vlsm X P)
  (finite_trace_last <span class="kr">is</span> tr)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop (preloaded_vlsm X P) s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> &lt;- (valid_trace_get_last Htr).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3bd" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3bd"><span class="kn">Lemma</span> <span class="nf">lift_generated_to_seeded</span>
  (<span class="nv">P</span> : message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">s</span> : state X)
  (<span class="nv">Hequiv_s</span> : state_received_not_sent_invariant s P)
  (<span class="nv">m</span> : message)
  (<span class="nv">Hgen</span> : can_produce (preloaded_with_all_messages_vlsm X) s m)
  : can_produce (preloaded_vlsm X P) s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Hequiv_s</var><span class="hyp-type"><b>: </b><span>state_received_not_sent_invariant s P</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hgen</var><span class="hyp-type"><b>: </b><span>can_produce
  (preloaded_with_all_messages_vlsm X) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">can_produce (preloaded_vlsm X P) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3be" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3be"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Hequiv_s</var><span class="hyp-type"><b>: </b><span>state_received_not_sent_invariant s P</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hgen</var><span class="hyp-type"><b>: </b><span>can_produce
  (preloaded_with_all_messages_vlsm X) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">can_produce (preloaded_vlsm X P) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3bf" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3bf"><span class="nb">apply</span> non_empty_valid_trace_from_can_produce.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Hequiv_s</var><span class="hyp-type"><b>: </b><span>state_received_not_sent_invariant s P</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hgen</var><span class="hyp-type"><b>: </b><span>can_produce
  (preloaded_with_all_messages_vlsm X) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">is</span> : state (preloaded_vlsm X P)) (<span class="nv">tr</span> : list
                                            transition_item) 
  (<span class="nv">item</span> : transition_item),
  finite_valid_trace (preloaded_vlsm X P) <span class="kr">is</span> tr
  ‚àß last_error tr = Some item
    ‚àß destination item = s ‚àß output item = Some m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3c0" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3c0"><span class="nb">apply</span> non_empty_valid_trace_from_can_produce <span class="kr">in</span> Hgen.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Hequiv_s</var><span class="hyp-type"><b>: </b><span>state_received_not_sent_invariant s P</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hgen</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> (<span class="nv">is</span> : state
          (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">tr</span> : list transition_item) 
  (<span class="nv">item</span> : transition_item),
  finite_valid_trace
    (preloaded_with_all_messages_vlsm X) <span class="kr">is</span> tr
  ‚àß last_error tr = Some item
    ‚àß destination item = s
      ‚àß output item = Some m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">is</span> : state (preloaded_vlsm X P)) (<span class="nv">tr</span> : list
                                            transition_item) 
  (<span class="nv">item</span> : transition_item),
  finite_valid_trace (preloaded_vlsm X P) <span class="kr">is</span> tr
  ‚àß last_error tr = Some item
    ‚àß destination item = s ‚àß output item = Some m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3c1" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3c1"><span class="nb">destruct</span> Hgen <span class="kr">as</span> [<span class="kr">is</span> [tr [item [Htr Hgen]]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Hequiv_s</var><span class="hyp-type"><b>: </b><span>state_received_not_sent_invariant s P</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) <span class="kr">is</span> tr</span></span></span><br><span><var>Hgen</var><span class="hyp-type"><b>: </b><span>last_error tr = Some item
‚àß destination item = s ‚àß output item = Some m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">is</span> : state (preloaded_vlsm X P)) (<span class="nv">tr</span> : list
                                            transition_item) 
  (<span class="nv">item</span> : transition_item),
  finite_valid_trace (preloaded_vlsm X P) <span class="kr">is</span> tr
  ‚àß last_error tr = Some item
    ‚àß destination item = s ‚àß output item = Some m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3c2" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3c2"><span class="kr">exists</span> <span class="nv">is</span>, tr, item.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Hequiv_s</var><span class="hyp-type"><b>: </b><span>state_received_not_sent_invariant s P</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) <span class="kr">is</span> tr</span></span></span><br><span><var>Hgen</var><span class="hyp-type"><b>: </b><span>last_error tr = Some item
‚àß destination item = s ‚àß output item = Some m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace (preloaded_vlsm X P) <span class="kr">is</span> tr
‚àß last_error tr = Some item
  ‚àß destination item = s ‚àß output item = Some m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3c3" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3c3"><span class="nb">split</span>; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Hequiv_s</var><span class="hyp-type"><b>: </b><span>state_received_not_sent_invariant s P</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) <span class="kr">is</span> tr</span></span></span><br><span><var>Hgen</var><span class="hyp-type"><b>: </b><span>last_error tr = Some item
‚àß destination item = s ‚àß output item = Some m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace (preloaded_vlsm X P) <span class="kr">is</span> tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3c4" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3c4"><span class="nb">specialize</span> (lift_preloaded_trace_to_seeded P tr) <span class="kr">as</span> Hlift.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Hequiv_s</var><span class="hyp-type"><b>: </b><span>state_received_not_sent_invariant s P</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) <span class="kr">is</span> tr</span></span></span><br><span><var>Hgen</var><span class="hyp-type"><b>: </b><span>last_error tr = Some item
‚àß destination item = s ‚àß output item = Some m</span></span></span><br><span><var>Hlift</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P
‚Üí <span class="kr">‚àÄ</span> <span class="nv">is</span> : state
           (preloaded_with_all_messages_vlsm X),
    finite_constrained_trace X <span class="kr">is</span> tr
    ‚Üí finite_valid_trace 
        (preloaded_vlsm X P) <span class="kr">is</span> tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace (preloaded_vlsm X P) <span class="kr">is</span> tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3c5" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3c5"><span class="nb">apply</span> Hlift; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>Hequiv_s</var><span class="hyp-type"><b>: </b><span>state_received_not_sent_invariant s P</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) <span class="kr">is</span> tr</span></span></span><br><span><var>Hgen</var><span class="hyp-type"><b>: </b><span>last_error tr = Some item
‚àß destination item = s ‚àß output item = Some m</span></span></span><br><span><var>Hlift</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P
‚Üí <span class="kr">‚àÄ</span> <span class="nv">is</span> : state
           (preloaded_with_all_messages_vlsm X),
    finite_constrained_trace X <span class="kr">is</span> tr
    ‚Üí finite_valid_trace 
        (preloaded_vlsm X P) <span class="kr">is</span> tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_received_not_sent_before_or_after_invariant tr P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3c6" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3c6"><span class="nb">revert</span> Hequiv_s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) <span class="kr">is</span> tr</span></span></span><br><span><var>Hgen</var><span class="hyp-type"><b>: </b><span>last_error tr = Some item
‚àß destination item = s ‚àß output item = Some m</span></span></span><br><span><var>Hlift</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P
‚Üí <span class="kr">‚àÄ</span> <span class="nv">is</span> : state
           (preloaded_with_all_messages_vlsm X),
    finite_constrained_trace X <span class="kr">is</span> tr
    ‚Üí finite_valid_trace 
        (preloaded_vlsm X P) <span class="kr">is</span> tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">state_received_not_sent_invariant s P
‚Üí trace_received_not_sent_before_or_after_invariant tr
    P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3c7" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3c7"><span class="nb">apply</span> state_received_not_sent_invariant_trace_iff <span class="kr">with</span> <span class="kr">is</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) <span class="kr">is</span> tr</span></span></span><br><span><var>Hgen</var><span class="hyp-type"><b>: </b><span>last_error tr = Some item
‚àß destination item = s ‚àß output item = Some m</span></span></span><br><span><var>Hlift</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P
‚Üí <span class="kr">‚àÄ</span> <span class="nv">is</span> : state
           (preloaded_with_all_messages_vlsm X),
    finite_constrained_trace X <span class="kr">is</span> tr
    ‚Üí finite_valid_trace 
        (preloaded_vlsm X P) <span class="kr">is</span> tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_constrained_trace_init_to X <span class="kr">is</span> s tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3c8" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3c8"><span class="nb">eapply</span> valid_trace_add_last <span class="kr">in</span> Htr; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) <span class="kr">is</span> tr</span></span></span><br><span><var>Hgen</var><span class="hyp-type"><b>: </b><span>last_error tr = Some item
‚àß destination item = s ‚àß output item = Some m</span></span></span><br><span><var>Hlift</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P
‚Üí <span class="kr">‚àÄ</span> <span class="nv">is</span> : state
           (preloaded_with_all_messages_vlsm X),
    finite_constrained_trace X <span class="kr">is</span> tr
    ‚Üí finite_valid_trace 
        (preloaded_vlsm X P) <span class="kr">is</span> tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_trace_last <span class="kr">is</span> tr = s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3c9" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3c9"><span class="nb">apply</span> last_error_destination_last.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision message</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>Hno_resend</var><span class="hyp-type"><b>: </b><span>cannot_resend_message_stepwise_prop</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>item</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (preloaded_with_all_messages_vlsm X) <span class="kr">is</span> tr</span></span></span><br><span><var>Hgen</var><span class="hyp-type"><b>: </b><span>last_error tr = Some item
‚àß destination item = s ‚àß output item = Some m</span></span></span><br><span><var>Hlift</var><span class="hyp-type"><b>: </b><span>trace_received_not_sent_before_or_after_invariant
  tr P
‚Üí <span class="kr">‚àÄ</span> <span class="nv">is</span> : state
           (preloaded_with_all_messages_vlsm X),
    finite_constrained_trace X <span class="kr">is</span> tr
    ‚Üí finite_valid_trace 
        (preloaded_vlsm X P) <span class="kr">is</span> tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_map destination (last_error tr) = Some s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> Hgen <span class="kr">as</span> [-&gt; [&lt;- _]].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sec_cannot_resend_message</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sec_has_been_sent_irrelevance</span>.</span></span></pre><div class="doc">
  Since we have several ways of obtaining the <span class="inlinecode"><span class="id" title="var">has_been_sent</span></span> property,
  we sometimes need to show that they are equivalent.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  (<span class="nv">X</span> : VLSM message)
  (<span class="nv">Hbs1</span> : HasBeenSentCapability X)
  (<span class="nv">Hbs2</span> : HasBeenSentCapability X)
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3ca" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3ca"><span class="kn">Lemma</span> <span class="nf">has_been_sent_irrelevance</span>
  (<span class="nv">s</span> : state (preloaded_with_all_messages_vlsm X))
  (<span class="nv">m</span> : message)
  (<span class="nv">Hs</span> : constrained_state_prop X s)
  : @has_been_sent _ X Hbs1 s m -&gt; @has_been_sent _ X Hbs2 s m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>Hbs1, Hbs2</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent X s m ‚Üí has_been_sent X s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3cb" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3cb"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>Hbs1, Hbs2</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent X s m ‚Üí has_been_sent X s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3cc" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3cc"><span class="nb">intro</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>Hbs1, Hbs2</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>has_been_sent X s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent X s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3cd" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3cd"><span class="nb">apply</span> proper_sent <span class="kr">in</span> H; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>Hbs1, Hbs2</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_all_preloaded_traces X
  (field_selector output) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent X s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> proper_sent.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sec_has_been_sent_irrelevance</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sec_all_traces_to_valid_state_are_valid</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  {<span class="nv">index</span> : <span class="kt">Type</span>}
  `{finite.Finite index}
  (IM : index -&gt; VLSM message)
  `{<span class="kr">forall</span> <span class="nv">i</span> : index, (HasBeenReceivedCapability (IM i))}
  (constraint : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>)
  (X := composite_vlsm IM constraint)
  (Y := free_composite_vlsm IM)
  (PreY := preloaded_with_all_messages_vlsm Y).</span></span></pre><div class="doc">
  Under <span class="inlinecode"><span class="id" title="var">HasBeenReceivedCapability</span></span> assumptions, and given the fact that
  any valid state <code>s</code> has a valid trace leading to it,
  in which all (received) messages are valid, it follows that
  any message which <span class="inlinecode"><span class="id" title="var">has_been_received</span></span> for state <code>s</code> is valid.

<div class="paragraph"> </div>

  Hence, given any preloaded trace leading to <code>s</code>, all messages received
  within it must be valid, thus the trace itself is valid.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3ce" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3ce"><span class="kn">Lemma</span> <span class="nf">all_pre_traces_to_valid_state_are_valid_free</span>
  (<span class="nv">s</span> <span class="nv">is</span> : state PreY) (<span class="nv">tr</span> : list (transition_item PreY))
  (<span class="nv">Hs</span> : valid_state_prop Y s)
  (<span class="nv">Htr</span> : finite_constrained_trace_init_to Y <span class="kr">is</span> s tr)
  : finite_valid_trace_init_to Y <span class="kr">is</span> s tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Y</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreY</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm Y</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state PreY</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop Y s</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to Y <span class="kr">is</span> s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to Y <span class="kr">is</span> s tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3cf" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3cf"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Y</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreY</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm Y</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state PreY</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop Y s</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to Y <span class="kr">is</span> s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_init_to Y <span class="kr">is</span> s tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3d0" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3d0"><span class="nb">apply</span> pre_traces_with_valid_inputs_are_valid <span class="kr">in</span> Htr; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Y</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreY</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm Y</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state PreY</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop Y s</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_init_to Y <span class="kr">is</span> s tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Forall
  (<span class="kr">Œª</span> <span class="nv">item</span> : transition_item,
     option_valid_message_prop Y (input item)) tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3d1" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3d1"><span class="nb">red</span> <span class="kr">in</span> Htr; <span class="nb">apply</span> valid_trace_last_pstate <span class="kr">in</span> Htr <span class="kr">as</span> Hspre.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Y</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreY</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm Y</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state PreY</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop Y s</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm Y) <span class="kr">is</span> s tr</span></span></span><br><span><var>Hspre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Y) s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Forall
  (<span class="kr">Œª</span> <span class="nv">item</span> : transition_item,
     option_valid_message_prop Y (input item)) tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3d2" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3d2"><span class="nb">apply</span> Forall_forall; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Y</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreY</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm Y</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state PreY</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop Y s</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm Y) <span class="kr">is</span> s tr</span></span></span><br><span><var>Hspre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Y) s</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àà tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop Y (input x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3d3" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3d3"><span class="nb">destruct</span> (input x) <span class="kr">as</span> [m |] <span class="nb">eqn</span>: Hm; [| <span class="bp">by</span> <span class="nb">apply</span> option_valid_message_None].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Y</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreY</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm Y</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state PreY</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop Y s</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm Y) <span class="kr">is</span> s tr</span></span></span><br><span><var>Hspre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Y) s</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àà tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>input x = Some m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop Y (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3d4" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3d4"><span class="nb">eapply</span> received_valid; <span class="nb">cbn</span>; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Y</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreY</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm Y</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state PreY</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop Y s</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm Y) <span class="kr">is</span> s tr</span></span></span><br><span><var>Hspre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Y) s</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àà tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>input x = Some m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_received IM s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3d5" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3d5"><span class="nb">specialize</span> (proper_received _ s Hspre m) <span class="kr">as</span> Hproper.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Y</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreY</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm Y</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state PreY</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop Y s</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm Y) <span class="kr">is</span> s tr</span></span></span><br><span><var>Hspre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Y) s</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àà tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>input x = Some m</span></span></span><br><span><var>Hproper</var><span class="hyp-type"><b>: </b><span>has_been_received_prop Y
  (has_been_received Y) s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_received IM s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3d6" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3d6"><span class="nb">apply</span> proj2 <span class="kr">in</span> Hproper.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Y</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreY</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm Y</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state PreY</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop Y s</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm Y) <span class="kr">is</span> s tr</span></span></span><br><span><var>Hspre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Y) s</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àà tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>input x = Some m</span></span></span><br><span><var>Hproper</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_all_preloaded_traces
  Y (field_selector input) s m
‚Üí has_been_received Y s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_received IM s m</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3d7" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3d7"><span class="nb">apply</span> Hproper.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Y</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreY</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm Y</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state PreY</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop Y s</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm Y) <span class="kr">is</span> s tr</span></span></span><br><span><var>Hspre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Y) s</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àà tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>input x = Some m</span></span></span><br><span><var>Hproper</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_all_preloaded_traces
  Y (field_selector input) s m
‚Üí has_been_received Y s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_all_preloaded_traces Y
  (field_selector input) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3d8" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3d8"><span class="nb">apply</span> has_been_received_consistency; [<span class="bp">by</span> <span class="nb">typeclasses eauto</span> | <span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Y</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreY</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm Y</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state PreY</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop Y s</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm Y) <span class="kr">is</span> s tr</span></span></span><br><span><var>Hspre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Y) s</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àà tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>input x = Some m</span></span></span><br><span><var>Hproper</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_all_preloaded_traces
  Y (field_selector input) s m
‚Üí has_been_received Y s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">selected_message_exists_in_some_preloaded_traces Y
  (field_selector input) s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3d9" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3d9"><span class="kr">exists</span> <span class="nv">is</span>, tr, Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Y</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreY</var><span><span class="hyp-body"><b>:= </b><span>preloaded_with_all_messages_vlsm Y</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>s, is</var><span class="hyp-type"><b>: </b><span>state PreY</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop Y s</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm Y) <span class="kr">is</span> s tr</span></span></span><br><span><var>Hspre</var><span class="hyp-type"><b>: </b><span>valid_state_prop
  (preloaded_with_all_messages_vlsm Y) s</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àà tr</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hm</var><span class="hyp-type"><b>: </b><span>input x = Some m</span></span></span><br><span><var>Hproper</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_all_preloaded_traces
  Y (field_selector input) s m
‚Üí has_been_received Y s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trace_has_message (field_selector input) m tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> Exists_exists; <span class="nb">eexists</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sec_all_traces_to_valid_state_are_valid</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sec_has_been_received_in_state</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  (<span class="nv">X</span> : VLSM message)
  `{HasBeenReceivedCapability message X}
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3da" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3da"><span class="kn">Lemma</span> <span class="nf">has_been_received_in_state</span> <span class="nv">s1</span> <span class="nv">m</span> :
  valid_state_prop X s1 -&gt;
  has_been_received X s1 m -&gt;
  <span class="kr">exists</span> (<span class="nv">s0</span> : state X) (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list transition_item),
    input item = Some m /\
    finite_valid_trace_from_to X s0 s1 (item :: tr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X s1
‚Üí has_been_received X s1 m
  ‚Üí <span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state X) (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : 
                                               list
                                                 transition_item),
      input item = Some m
      ‚àß finite_valid_trace_from_to X s0 s1
          (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3db" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3db"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X s1
‚Üí has_been_received X s1 m
  ‚Üí <span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state X) (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : 
                                               list
                                                 transition_item),
      input item = Some m
      ‚àß finite_valid_trace_from_to X s0 s1
          (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3dc" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3dc"><span class="nb">intros</span> Hpsp Hhbr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s1</span></span></span><br><span><var>Hhbr</var><span class="hyp-type"><b>: </b><span>has_been_received X s1 m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state X) (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list
                                                 transition_item),
  input item = Some m
  ‚àß finite_valid_trace_from_to X s0 s1 (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3dd" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3dd"><span class="nb">pose proof</span> (Hetr := valid_state_has_trace _ _ Hpsp).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s1</span></span></span><br><span><var>Hhbr</var><span class="hyp-type"><b>: </b><span>has_been_received X s1 m</span></span></span><br><span><var>Hetr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> (<span class="nv">is</span> : state X) (<span class="nv">tr</span> : list transition_item),
  finite_valid_trace_init_to X <span class="kr">is</span> s1 tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state X) (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list
                                                 transition_item),
  input item = Some m
  ‚àß finite_valid_trace_from_to X s0 s1 (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3de" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3de"><span class="nb">destruct</span> Hetr <span class="kr">as</span> [ist [tr Hetr]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s1</span></span></span><br><span><var>Hhbr</var><span class="hyp-type"><b>: </b><span>has_been_received X s1 m</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hetr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X ist s1 tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state X) (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list
                                                 transition_item),
  input item = Some m
  ‚àß finite_valid_trace_from_to X s0 s1 (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3df" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3df"><span class="nb">apply</span> proper_received <span class="kr">in</span> Hhbr; [| <span class="bp">by</span> <span class="nb">apply</span> preloaded_with_all_messages_valid_state_prop, Hpsp].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s1</span></span></span><br><span><var>Hhbr</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_all_preloaded_traces
  X (field_selector input) s1 m</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hetr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X ist s1 tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state X) (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list
                                                 transition_item),
  input item = Some m
  ‚àß finite_valid_trace_from_to X s0 s1 (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3e0" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3e0"><span class="nb">unfold</span> selected_message_exists_in_all_preloaded_traces <span class="kr">in</span> Hhbr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s1</span></span></span><br><span><var>Hhbr</var><span class="hyp-type"><b>: </b><span>specialized_selected_message_exists_in_all_traces
  (preloaded_with_all_messages_vlsm X)
  (field_selector input) s1 m</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hetr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X ist s1 tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state X) (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list
                                                 transition_item),
  input item = Some m
  ‚àß finite_valid_trace_from_to X s0 s1 (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3e1" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3e1"><span class="nb">unfold</span> specialized_selected_message_exists_in_all_traces <span class="kr">in</span> Hhbr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s1</span></span></span><br><span><var>Hhbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">start</span> : state
             (preloaded_with_all_messages_vlsm
                X)) (<span class="nv">tr</span> : list transition_item),
  finite_valid_trace_init_to
    (preloaded_with_all_messages_vlsm X) start
    s1 tr
  ‚Üí trace_has_message (field_selector input) m
      tr</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hetr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X ist s1 tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state X) (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list
                                                 transition_item),
  input item = Some m
  ‚àß finite_valid_trace_from_to X s0 s1 (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3e2" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3e2"><span class="nb">specialize</span> (Hhbr ist tr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hhbr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm X) ist s1
  tr
‚Üí trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hetr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X ist s1 tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state X) (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list
                                                 transition_item),
  input item = Some m
  ‚àß finite_valid_trace_from_to X s0 s1 (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3e3" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3e3"><span class="nb">unfold</span> finite_valid_trace_init_to <span class="kr">in</span> Hhbr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hhbr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X) ist s1
  tr ‚àß initial_state_prop ist
‚Üí trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hetr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to X ist s1 tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state X) (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list
                                                 transition_item),
  input item = Some m
  ‚àß finite_valid_trace_from_to X s0 s1 (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3e4" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3e4"><span class="nb">unfold</span> finite_valid_trace_init_to <span class="kr">in</span> Hetr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hhbr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X) ist s1
  tr ‚àß initial_state_prop ist
‚Üí trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hetr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X ist s1 tr
‚àß initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state X) (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list
                                                 transition_item),
  input item = Some m
  ‚àß finite_valid_trace_from_to X s0 s1 (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3e5" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3e5"><span class="nb">destruct</span> Hetr <span class="kr">as</span> [Hfptf Hisp].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hhbr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X) ist s1
  tr ‚àß initial_state_prop ist
‚Üí trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hfptf</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X ist s1 tr</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state X) (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list
                                                 transition_item),
  input item = Some m
  ‚àß finite_valid_trace_from_to X s0 s1 (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3e6" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3e6"><span class="nb">pose proof</span> (Hfptf&#39; := preloaded_weaken_finite_valid_trace_from_to _ _ _ _ Hfptf).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hhbr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X) ist s1
  tr ‚àß initial_state_prop ist
‚Üí trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hfptf</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X ist s1 tr</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br><span><var>Hfptf'</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_from_to X ist s1 tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state X) (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list
                                                 transition_item),
  input item = Some m
  ‚àß finite_valid_trace_from_to X s0 s1 (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3e7" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3e7"><span class="nb">specialize</span> (Hhbr (conj Hfptf&#39; Hisp)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hhbr</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hfptf</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X ist s1 tr</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br><span><var>Hfptf'</var><span class="hyp-type"><b>: </b><span>finite_constrained_trace_from_to X ist s1 tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state X) (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list
                                                 transition_item),
  input item = Some m
  ‚àß finite_valid_trace_from_to X s0 s1 (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3e8" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3e8"><span class="nb">clear</span> Hfptf&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hhbr</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hfptf</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X ist s1 tr</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state X) (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list
                                                 transition_item),
  input item = Some m
  ‚àß finite_valid_trace_from_to X s0 s1 (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3e9" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3e9"><span class="nb">unfold</span> trace_has_message <span class="kr">in</span> Hhbr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hhbr</var><span class="hyp-type"><b>: </b><span>Exists (field_selector input m) tr</span></span></span><br><span><var>Hfptf</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X ist s1 tr</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state X) (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list
                                                 transition_item),
  input item = Some m
  ‚àß finite_valid_trace_from_to X s0 s1 (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3ea" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3ea"><span class="nb">unfold</span> field_selector <span class="kr">in</span> Hhbr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hhbr</var><span class="hyp-type"><b>: </b><span>Exists
  (<span class="kr">Œª</span> <span class="nv">item</span> : transition_item,
     input item = Some m) tr</span></span></span><br><span><var>Hfptf</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X ist s1 tr</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state X) (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list
                                                 transition_item),
  input item = Some m
  ‚àß finite_valid_trace_from_to X s0 s1 (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3eb" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3eb"><span class="nb">apply</span> Exists_exists <span class="kr">in</span> Hhbr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hhbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">x</span> : transition_item,
  x ‚àà tr ‚àß input x = Some m</span></span></span><br><span><var>Hfptf</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X ist s1 tr</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state X) (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list
                                                 transition_item),
  input item = Some m
  ‚àß finite_valid_trace_from_to X s0 s1 (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3ec" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3ec"><span class="nb">destruct</span> Hhbr <span class="kr">as</span> [tritem [Htritemin Hintritem]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>tritem</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Htritemin</var><span class="hyp-type"><b>: </b><span>tritem ‚àà tr</span></span></span><br><span><var>Hintritem</var><span class="hyp-type"><b>: </b><span>input tritem = Some m</span></span></span><br><span><var>Hfptf</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X ist s1 tr</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state X) (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list
                                                 transition_item),
  input item = Some m
  ‚àß finite_valid_trace_from_to X s0 s1 (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3ed" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3ed"><span class="nb">apply</span> elem_of_list_split <span class="kr">in</span> Htritemin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>tritem</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Htritemin</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list transition_item,
  tr = l1 ++ tritem :: l2</span></span></span><br><span><var>Hintritem</var><span class="hyp-type"><b>: </b><span>input tritem = Some m</span></span></span><br><span><var>Hfptf</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X ist s1 tr</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state X) (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list
                                                 transition_item),
  input item = Some m
  ‚àß finite_valid_trace_from_to X s0 s1 (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3ee" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3ee"><span class="nb">destruct</span> Htritemin <span class="kr">as</span> [l1 [l2 Heqtr]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>tritem</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqtr</var><span class="hyp-type"><b>: </b><span>tr = l1 ++ tritem :: l2</span></span></span><br><span><var>Hintritem</var><span class="hyp-type"><b>: </b><span>input tritem = Some m</span></span></span><br><span><var>Hfptf</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X ist s1 tr</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state X) (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list
                                                 transition_item),
  input item = Some m
  ‚àß finite_valid_trace_from_to X s0 s1 (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3ef" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3ef"><span class="nb">rewrite</span> Heqtr <span class="kr">in</span> Hfptf.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>tritem</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqtr</var><span class="hyp-type"><b>: </b><span>tr = l1 ++ tritem :: l2</span></span></span><br><span><var>Hintritem</var><span class="hyp-type"><b>: </b><span>input tritem = Some m</span></span></span><br><span><var>Hfptf</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X ist s1
  (l1 ++ tritem :: l2)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state X) (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list
                                                 transition_item),
  input item = Some m
  ‚àß finite_valid_trace_from_to X s0 s1 (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3f0" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3f0"><span class="nb">apply</span> (finite_valid_trace_from_to_app_split X) <span class="kr">in</span> Hfptf.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>tritem</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqtr</var><span class="hyp-type"><b>: </b><span>tr = l1 ++ tritem :: l2</span></span></span><br><span><var>Hintritem</var><span class="hyp-type"><b>: </b><span>input tritem = Some m</span></span></span><br><span><var>Hfptf</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X ist
  (finite_trace_last ist l1) l1
‚àß finite_valid_trace_from_to X
    (finite_trace_last ist l1) s1
    (tritem :: l2)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state X) (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list
                                                 transition_item),
  input item = Some m
  ‚àß finite_valid_trace_from_to X s0 s1 (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3f1" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3f1"><span class="nb">destruct</span> Hfptf <span class="kr">as</span> [Htr1 Htr2].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>tritem</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqtr</var><span class="hyp-type"><b>: </b><span>tr = l1 ++ tritem :: l2</span></span></span><br><span><var>Hintritem</var><span class="hyp-type"><b>: </b><span>input tritem = Some m</span></span></span><br><span><var>Htr1</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X ist
  (finite_trace_last ist l1) l1</span></span></span><br><span><var>Htr2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X
  (finite_trace_last ist l1) s1 
  (tritem :: l2)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state X) (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list
                                                 transition_item),
  input item = Some m
  ‚àß finite_valid_trace_from_to X s0 s1 (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3f2" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3f2"><span class="nb">destruct</span> tritem <span class="nb">eqn</span>: Heqtritem.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>tritem</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Heqtritem</var><span class="hyp-type"><b>: </b><span>tritem =
{|
  l := l;
  input := input;
  destination := destination;
  output := output
|}</span></span></span><br><span><var>Heqtr</var><span class="hyp-type"><b>: </b><span>tr =
l1 ++
{|
  l := l;
  input := input;
  destination := destination;
  output := output
|} :: l2</span></span></span><br><span><var>Hintritem</var><span class="hyp-type"><b>: </b><span>VLSM.input
  {|
    l := l;
    input := input;
    destination := destination;
    output := output
  |} = Some m</span></span></span><br><span><var>Htr1</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X ist
  (finite_trace_last ist l1) l1</span></span></span><br><span><var>Htr2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X
  (finite_trace_last ist l1) s1
  ({|
     l := l;
     input := input;
     destination := destination;
     output := output
   |} :: l2)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state X) (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list
                                                 transition_item),
  VLSM.input item = Some m
  ‚àß finite_valid_trace_from_to X s0 s1 (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3f3" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3f3"><span class="nb">simpl</span> <span class="kr">in</span> Hintritem.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>tritem</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Heqtritem</var><span class="hyp-type"><b>: </b><span>tritem =
{|
  l := l;
  input := input;
  destination := destination;
  output := output
|}</span></span></span><br><span><var>Heqtr</var><span class="hyp-type"><b>: </b><span>tr =
l1 ++
{|
  l := l;
  input := input;
  destination := destination;
  output := output
|} :: l2</span></span></span><br><span><var>Hintritem</var><span class="hyp-type"><b>: </b><span>input = Some m</span></span></span><br><span><var>Htr1</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X ist
  (finite_trace_last ist l1) l1</span></span></span><br><span><var>Htr2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X
  (finite_trace_last ist l1) s1
  ({|
     l := l;
     input := input;
     destination := destination;
     output := output
   |} :: l2)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state X) (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list
                                                 transition_item),
  VLSM.input item = Some m
  ‚àß finite_valid_trace_from_to X s0 s1 (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3f4" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3f4"><span class="nb">subst</span> input.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>tritem</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Heqtr</var><span class="hyp-type"><b>: </b><span>tr =
l1 ++
{|
  l := l;
  input := Some m;
  destination := destination;
  output := output
|} :: l2</span></span></span><br><span><var>Heqtritem</var><span class="hyp-type"><b>: </b><span>tritem =
{|
  l := l;
  input := Some m;
  destination := destination;
  output := output
|}</span></span></span><br><span><var>Htr1</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X ist
  (finite_trace_last ist l1) l1</span></span></span><br><span><var>Htr2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X
  (finite_trace_last ist l1) s1
  ({|
     l := l;
     input := Some m;
     destination := destination;
     output := output
   |} :: l2)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state X) (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list
                                                 transition_item),
  input item = Some m
  ‚àß finite_valid_trace_from_to X s0 s1 (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3f5" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3f5"><span class="nb">eexists</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>tritem</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Heqtr</var><span class="hyp-type"><b>: </b><span>tr =
l1 ++
{|
  l := l;
  input := Some m;
  destination := destination;
  output := output
|} :: l2</span></span></span><br><span><var>Heqtritem</var><span class="hyp-type"><b>: </b><span>tritem =
{|
  l := l;
  input := Some m;
  destination := destination;
  output := output
|}</span></span></span><br><span><var>Htr1</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X ist
  (finite_trace_last ist l1) l1</span></span></span><br><span><var>Htr2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X
  (finite_trace_last ist l1) s1
  ({|
     l := l;
     input := Some m;
     destination := destination;
     output := output
   |} :: l2)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">item</span> : transition_item) (<span class="nv">tr0</span> : list transition_item),
  input item = Some m
  ‚àß finite_valid_trace_from_to X <span class="nl">?s0</span> s1 (item :: tr0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3f6" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3f6"><span class="nb">eexists</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>tritem</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Heqtr</var><span class="hyp-type"><b>: </b><span>tr =
l1 ++
{|
  l := l;
  input := Some m;
  destination := destination;
  output := output
|} :: l2</span></span></span><br><span><var>Heqtritem</var><span class="hyp-type"><b>: </b><span>tritem =
{|
  l := l;
  input := Some m;
  destination := destination;
  output := output
|}</span></span></span><br><span><var>Htr1</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X ist
  (finite_trace_last ist l1) l1</span></span></span><br><span><var>Htr2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X
  (finite_trace_last ist l1) s1
  ({|
     l := l;
     input := Some m;
     destination := destination;
     output := output
   |} :: l2)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">tr0</span> : list transition_item,
  input <span class="nl">?item</span> = Some m
  ‚àß finite_valid_trace_from_to X <span class="nl">?s0</span> s1 (<span class="nl">?item</span> :: tr0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3f7" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3f7"><span class="nb">eexists</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state X</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>tritem</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Heqtr</var><span class="hyp-type"><b>: </b><span>tr =
l1 ++
{|
  l := l;
  input := Some m;
  destination := destination;
  output := output
|} :: l2</span></span></span><br><span><var>Heqtritem</var><span class="hyp-type"><b>: </b><span>tritem =
{|
  l := l;
  input := Some m;
  destination := destination;
  output := output
|}</span></span></span><br><span><var>Htr1</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X ist
  (finite_trace_last ist l1) l1</span></span></span><br><span><var>Htr2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to X
  (finite_trace_last ist l1) s1
  ({|
     l := l;
     input := Some m;
     destination := destination;
     output := output
   |} :: l2)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input <span class="nl">?item</span> = Some m
‚àß finite_valid_trace_from_to X <span class="nl">?s0</span> s1 (<span class="nl">?item</span> :: <span class="nl">?tr</span>)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">split</span>; [| <span class="nb">apply</span>  Htr2].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3f8" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3f8"><span class="kn">Lemma</span> <span class="nf">has_been_received_in_state_preloaded</span> <span class="nv">s1</span> <span class="nv">m</span> :
  constrained_state_prop X s1 -&gt;
  has_been_received X s1 m -&gt;
  <span class="kr">exists</span> (<span class="nv">s0</span> : state (preloaded_with_all_messages_vlsm X))
    (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list transition_item),
    input item = Some m /\
    finite_constrained_trace_from_to X s0 s1 (item :: tr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">constrained_state_prop X s1
‚Üí has_been_received X s1 m
  ‚Üí <span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state (preloaded_with_all_messages_vlsm X)) 
      (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list
                                       transition_item),
      input item = Some m
      ‚àß finite_constrained_trace_from_to X s0 s1
          (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3f9" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3f9"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">constrained_state_prop X s1
‚Üí has_been_received X s1 m
  ‚Üí <span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state (preloaded_with_all_messages_vlsm X)) 
      (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list
                                       transition_item),
      input item = Some m
      ‚àß finite_constrained_trace_from_to X s0 s1
          (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3fa" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3fa"><span class="nb">intros</span> Hpsp Hhbr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s1</span></span></span><br><span><var>Hhbr</var><span class="hyp-type"><b>: </b><span>has_been_received X s1 m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list transition_item),
  input item = Some m
  ‚àß finite_constrained_trace_from_to X s0 s1
      (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3fb" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3fb"><span class="nb">pose proof</span> (Hetr := valid_state_has_trace _ _ Hpsp).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s1</span></span></span><br><span><var>Hhbr</var><span class="hyp-type"><b>: </b><span>has_been_received X s1 m</span></span></span><br><span><var>Hetr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> (<span class="nv">is</span> : state
          (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">tr</span> : list transition_item),
  finite_valid_trace_init_to
    (preloaded_with_all_messages_vlsm X) <span class="kr">is</span> s1
    tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list transition_item),
  input item = Some m
  ‚àß finite_constrained_trace_from_to X s0 s1
      (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3fc" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3fc"><span class="nb">destruct</span> Hetr <span class="kr">as</span> [ist [tr Hetr]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s1</span></span></span><br><span><var>Hhbr</var><span class="hyp-type"><b>: </b><span>has_been_received X s1 m</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hetr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm X) ist s1
  tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list transition_item),
  input item = Some m
  ‚àß finite_constrained_trace_from_to X s0 s1
      (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3fd" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3fd"><span class="nb">apply</span> proper_received <span class="kr">in</span> Hhbr; [| <span class="bp">by</span> <span class="nb">apply</span> Hpsp].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s1</span></span></span><br><span><var>Hhbr</var><span class="hyp-type"><b>: </b><span>selected_message_exists_in_all_preloaded_traces
  X (field_selector input) s1 m</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hetr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm X) ist s1
  tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list transition_item),
  input item = Some m
  ‚àß finite_constrained_trace_from_to X s0 s1
      (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3fe" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3fe"><span class="nb">unfold</span> selected_message_exists_in_all_preloaded_traces <span class="kr">in</span> Hhbr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s1</span></span></span><br><span><var>Hhbr</var><span class="hyp-type"><b>: </b><span>specialized_selected_message_exists_in_all_traces
  (preloaded_with_all_messages_vlsm X)
  (field_selector input) s1 m</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hetr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm X) ist s1
  tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list transition_item),
  input item = Some m
  ‚àß finite_constrained_trace_from_to X s0 s1
      (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk3ff" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk3ff"><span class="nb">unfold</span> specialized_selected_message_exists_in_all_traces <span class="kr">in</span> Hhbr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s1</span></span></span><br><span><var>Hhbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">start</span> : state
             (preloaded_with_all_messages_vlsm
                X)) (<span class="nv">tr</span> : list transition_item),
  finite_valid_trace_init_to
    (preloaded_with_all_messages_vlsm X) start
    s1 tr
  ‚Üí trace_has_message (field_selector input) m
      tr</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hetr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm X) ist s1
  tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list transition_item),
  input item = Some m
  ‚àß finite_constrained_trace_from_to X s0 s1
      (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk400" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk400"><span class="nb">specialize</span> (Hhbr ist tr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hhbr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm X) ist s1
  tr
‚Üí trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hetr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm X) ist s1
  tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list transition_item),
  input item = Some m
  ‚àß finite_constrained_trace_from_to X s0 s1
      (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk401" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk401"><span class="nb">unfold</span> finite_valid_trace_init_to <span class="kr">in</span> Hhbr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hhbr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X) ist s1
  tr ‚àß initial_state_prop ist
‚Üí trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hetr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_init_to
  (preloaded_with_all_messages_vlsm X) ist s1
  tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list transition_item),
  input item = Some m
  ‚àß finite_constrained_trace_from_to X s0 s1
      (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk402" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk402"><span class="nb">unfold</span> finite_valid_trace_init_to <span class="kr">in</span> Hetr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hhbr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X) ist s1
  tr ‚àß initial_state_prop ist
‚Üí trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hetr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X) ist s1
  tr ‚àß initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list transition_item),
  input item = Some m
  ‚àß finite_constrained_trace_from_to X s0 s1
      (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk403" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk403"><span class="nb">destruct</span> Hetr <span class="kr">as</span> [Hfptf Hisp].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hhbr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X) ist s1
  tr ‚àß initial_state_prop ist
‚Üí trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hfptf</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X) ist s1
  tr</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list transition_item),
  input item = Some m
  ‚àß finite_constrained_trace_from_to X s0 s1
      (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk404" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk404"><span class="nb">specialize</span> (Hhbr (conj Hfptf Hisp)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hhbr</var><span class="hyp-type"><b>: </b><span>trace_has_message (field_selector input) m tr</span></span></span><br><span><var>Hfptf</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X) ist s1
  tr</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list transition_item),
  input item = Some m
  ‚àß finite_constrained_trace_from_to X s0 s1
      (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk405" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk405"><span class="nb">unfold</span> trace_has_message <span class="kr">in</span> Hhbr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hhbr</var><span class="hyp-type"><b>: </b><span>Exists (field_selector input m) tr</span></span></span><br><span><var>Hfptf</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X) ist s1
  tr</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list transition_item),
  input item = Some m
  ‚àß finite_constrained_trace_from_to X s0 s1
      (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk406" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk406"><span class="nb">unfold</span> field_selector <span class="kr">in</span> Hhbr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hhbr</var><span class="hyp-type"><b>: </b><span>Exists
  (<span class="kr">Œª</span> <span class="nv">item</span> : transition_item,
     input item = Some m) tr</span></span></span><br><span><var>Hfptf</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X) ist s1
  tr</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list transition_item),
  input item = Some m
  ‚àß finite_constrained_trace_from_to X s0 s1
      (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk407" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk407"><span class="nb">apply</span> Exists_exists <span class="kr">in</span> Hhbr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Hhbr</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">x</span> : transition_item,
  x ‚àà tr ‚àß input x = Some m</span></span></span><br><span><var>Hfptf</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X) ist s1
  tr</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list transition_item),
  input item = Some m
  ‚àß finite_constrained_trace_from_to X s0 s1
      (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk408" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk408"><span class="nb">destruct</span> Hhbr <span class="kr">as</span> [tritem [Htritemin Hintritem]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>tritem</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Htritemin</var><span class="hyp-type"><b>: </b><span>tritem ‚àà tr</span></span></span><br><span><var>Hintritem</var><span class="hyp-type"><b>: </b><span>input tritem = Some m</span></span></span><br><span><var>Hfptf</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X) ist s1
  tr</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list transition_item),
  input item = Some m
  ‚àß finite_constrained_trace_from_to X s0 s1
      (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk409" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk409"><span class="nb">apply</span> elem_of_list_split <span class="kr">in</span> Htritemin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>tritem</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>Htritemin</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">l1</span> <span class="nv">l2</span> : list transition_item,
  tr = l1 ++ tritem :: l2</span></span></span><br><span><var>Hintritem</var><span class="hyp-type"><b>: </b><span>input tritem = Some m</span></span></span><br><span><var>Hfptf</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X) ist s1
  tr</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list transition_item),
  input item = Some m
  ‚àß finite_constrained_trace_from_to X s0 s1
      (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk40a" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk40a"><span class="nb">destruct</span> Htritemin <span class="kr">as</span> [l1 [l2 Heqtr]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>tritem</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqtr</var><span class="hyp-type"><b>: </b><span>tr = l1 ++ tritem :: l2</span></span></span><br><span><var>Hintritem</var><span class="hyp-type"><b>: </b><span>input tritem = Some m</span></span></span><br><span><var>Hfptf</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X) ist s1
  tr</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list transition_item),
  input item = Some m
  ‚àß finite_constrained_trace_from_to X s0 s1
      (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk40b" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk40b"><span class="nb">rewrite</span> Heqtr <span class="kr">in</span> Hfptf.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>tritem</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqtr</var><span class="hyp-type"><b>: </b><span>tr = l1 ++ tritem :: l2</span></span></span><br><span><var>Hintritem</var><span class="hyp-type"><b>: </b><span>input tritem = Some m</span></span></span><br><span><var>Hfptf</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X) ist s1
  (l1 ++ tritem :: l2)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list transition_item),
  input item = Some m
  ‚àß finite_constrained_trace_from_to X s0 s1
      (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk40c" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk40c"><span class="nb">apply</span> (finite_valid_trace_from_to_app_split (preloaded_with_all_messages_vlsm X)) <span class="kr">in</span> Hfptf.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>tritem</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqtr</var><span class="hyp-type"><b>: </b><span>tr = l1 ++ tritem :: l2</span></span></span><br><span><var>Hintritem</var><span class="hyp-type"><b>: </b><span>input tritem = Some m</span></span></span><br><span><var>Hfptf</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X) ist
  (finite_trace_last ist l1) l1
‚àß finite_valid_trace_from_to
    (preloaded_with_all_messages_vlsm X)
    (finite_trace_last ist l1) s1
    (tritem :: l2)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list transition_item),
  input item = Some m
  ‚àß finite_constrained_trace_from_to X s0 s1
      (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk40d" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk40d"><span class="nb">destruct</span> Hfptf <span class="kr">as</span> [Htr1 Htr2].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>tritem</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Heqtr</var><span class="hyp-type"><b>: </b><span>tr = l1 ++ tritem :: l2</span></span></span><br><span><var>Hintritem</var><span class="hyp-type"><b>: </b><span>input tritem = Some m</span></span></span><br><span><var>Htr1</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X) ist
  (finite_trace_last ist l1) l1</span></span></span><br><span><var>Htr2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X)
  (finite_trace_last ist l1) s1 
  (tritem :: l2)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list transition_item),
  input item = Some m
  ‚àß finite_constrained_trace_from_to X s0 s1
      (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk40e" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk40e"><span class="nb">destruct</span> tritem <span class="nb">eqn</span>: Heqtritem.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>tritem</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Heqtritem</var><span class="hyp-type"><b>: </b><span>tritem =
{|
  l := l;
  input := input;
  destination := destination;
  output := output
|}</span></span></span><br><span><var>Heqtr</var><span class="hyp-type"><b>: </b><span>tr =
l1 ++
{|
  l := l;
  input := input;
  destination := destination;
  output := output
|} :: l2</span></span></span><br><span><var>Hintritem</var><span class="hyp-type"><b>: </b><span>VLSM.input
  {|
    l := l;
    input := input;
    destination := destination;
    output := output
  |} = Some m</span></span></span><br><span><var>Htr1</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X) ist
  (finite_trace_last ist l1) l1</span></span></span><br><span><var>Htr2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X)
  (finite_trace_last ist l1) s1
  ({|
     l := l;
     input := input;
     destination := destination;
     output := output
   |} :: l2)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list transition_item),
  VLSM.input item = Some m
  ‚àß finite_constrained_trace_from_to X s0 s1
      (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk40f" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk40f"><span class="nb">simpl</span> <span class="kr">in</span> Hintritem.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>tritem</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>input</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Heqtritem</var><span class="hyp-type"><b>: </b><span>tritem =
{|
  l := l;
  input := input;
  destination := destination;
  output := output
|}</span></span></span><br><span><var>Heqtr</var><span class="hyp-type"><b>: </b><span>tr =
l1 ++
{|
  l := l;
  input := input;
  destination := destination;
  output := output
|} :: l2</span></span></span><br><span><var>Hintritem</var><span class="hyp-type"><b>: </b><span>input = Some m</span></span></span><br><span><var>Htr1</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X) ist
  (finite_trace_last ist l1) l1</span></span></span><br><span><var>Htr2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X)
  (finite_trace_last ist l1) s1
  ({|
     l := l;
     input := input;
     destination := destination;
     output := output
   |} :: l2)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list transition_item),
  VLSM.input item = Some m
  ‚àß finite_constrained_trace_from_to X s0 s1
      (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk410" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk410"><span class="nb">subst</span> input.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>tritem</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Heqtr</var><span class="hyp-type"><b>: </b><span>tr =
l1 ++
{|
  l := l;
  input := Some m;
  destination := destination;
  output := output
|} :: l2</span></span></span><br><span><var>Heqtritem</var><span class="hyp-type"><b>: </b><span>tritem =
{|
  l := l;
  input := Some m;
  destination := destination;
  output := output
|}</span></span></span><br><span><var>Htr1</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X) ist
  (finite_trace_last ist l1) l1</span></span></span><br><span><var>Htr2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X)
  (finite_trace_last ist l1) s1
  ({|
     l := l;
     input := Some m;
     destination := destination;
     output := output
   |} :: l2)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">s0</span> : state (preloaded_with_all_messages_vlsm X)) 
  (<span class="nv">item</span> : transition_item) (<span class="nv">tr</span> : list transition_item),
  input item = Some m
  ‚àß finite_constrained_trace_from_to X s0 s1
      (item :: tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk411" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk411"><span class="nb">eexists</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>tritem</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Heqtr</var><span class="hyp-type"><b>: </b><span>tr =
l1 ++
{|
  l := l;
  input := Some m;
  destination := destination;
  output := output
|} :: l2</span></span></span><br><span><var>Heqtritem</var><span class="hyp-type"><b>: </b><span>tritem =
{|
  l := l;
  input := Some m;
  destination := destination;
  output := output
|}</span></span></span><br><span><var>Htr1</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X) ist
  (finite_trace_last ist l1) l1</span></span></span><br><span><var>Htr2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X)
  (finite_trace_last ist l1) s1
  ({|
     l := l;
     input := Some m;
     destination := destination;
     output := output
   |} :: l2)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> (<span class="nv">item</span> : transition_item) (<span class="nv">tr0</span> : list transition_item),
  input item = Some m
  ‚àß finite_constrained_trace_from_to X <span class="nl">?s0</span> s1
      (item :: tr0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk412" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk412"><span class="nb">eexists</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>tritem</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Heqtr</var><span class="hyp-type"><b>: </b><span>tr =
l1 ++
{|
  l := l;
  input := Some m;
  destination := destination;
  output := output
|} :: l2</span></span></span><br><span><var>Heqtritem</var><span class="hyp-type"><b>: </b><span>tritem =
{|
  l := l;
  input := Some m;
  destination := destination;
  output := output
|}</span></span></span><br><span><var>Htr1</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X) ist
  (finite_trace_last ist l1) l1</span></span></span><br><span><var>Htr2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X)
  (finite_trace_last ist l1) s1
  ({|
     l := l;
     input := Some m;
     destination := destination;
     output := output
   |} :: l2)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">tr0</span> : list transition_item,
  input <span class="nl">?item</span> = Some m
  ‚àß finite_constrained_trace_from_to X <span class="nl">?s0</span> s1
      (<span class="nl">?item</span> :: tr0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Equivocation-v-chk413" style="display: none" type="checkbox"><label class="alectryon-input" for="Equivocation-v-chk413"><span class="nb">eexists</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenReceivedCapability X</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hpsp</var><span class="hyp-type"><b>: </b><span>constrained_state_prop X s1</span></span></span><br><span><var>ist</var><span class="hyp-type"><b>: </b><span>state (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>tritem</var><span class="hyp-type"><b>: </b><span>transition_item</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>destination</var><span class="hyp-type"><b>: </b><span>state
  (preloaded_with_all_messages_vlsm X)</span></span></span><br><span><var>output</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Heqtr</var><span class="hyp-type"><b>: </b><span>tr =
l1 ++
{|
  l := l;
  input := Some m;
  destination := destination;
  output := output
|} :: l2</span></span></span><br><span><var>Heqtritem</var><span class="hyp-type"><b>: </b><span>tritem =
{|
  l := l;
  input := Some m;
  destination := destination;
  output := output
|}</span></span></span><br><span><var>Htr1</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X) ist
  (finite_trace_last ist l1) l1</span></span></span><br><span><var>Htr2</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from_to
  (preloaded_with_all_messages_vlsm X)
  (finite_trace_last ist l1) s1
  ({|
     l := l;
     input := Some m;
     destination := destination;
     output := output
   |} :: l2)</span></span></span><br><span><var>Hisp</var><span class="hyp-type"><b>: </b><span>initial_state_prop ist</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input <span class="nl">?item</span> = Some m
‚àß finite_constrained_trace_from_to X <span class="nl">?s0</span> s1
    (<span class="nl">?item</span> :: <span class="nl">?tr</span>)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">split</span>; [| <span class="nb">apply</span>  Htr2].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sec_has_been_received_in_state</span>.</span></span></pre></article></body></html>