<!DOCTYPE html>
<html class="alectryon-standalone"><head><title>ListSetExtras.v</title><meta charset="utf-8"><meta content="Alectryon" name="generator"><meta name="viewport" content="width=device-width, initial-scale=1"><link href="alectryon.css" rel="stylesheet"><link href="pygments.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" /><script src="alectryon.js"></script></head><body><article class="alectryon-root alectryon-windowed alectryon-coqdoc"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.18.0+0.18.1. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk0"><span class="kn">From</span> VLSM.Lib <span class="kn">Require Import</span> Itauto.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">[Loading ML file ring_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file zify_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file micromega_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file btauto_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file coq-itauto.plugin ... <span class="bp">done</span>]</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> stdpp <span class="kn">Require Import</span> prelude.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> VLSM.Lib <span class="kn">Require Import</span> Preamble ListExtras StdppExtras StdppListSet.</span></span></pre><div class="doc">
<a id="lab1"></a><h1 class="section">Utility: List Set Definitions and Results</h1>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">set_eq</span> {<span class="nv">A</span>} (<span class="nv">s1</span> <span class="nv">s2</span> : <span class="nb">set</span> A) : <span class="kt">Prop</span> :=
  s1 ‚äÜ s2 /\ s2 ‚äÜ s1.</span></span></pre><div class="doc">
  By declaring <span class="inlinecode"><span class="id" title="var">set_eq</span></span> an <span class="inlinecode"><span class="id" title="var">Equivalence</span></span> relation, we enable rewriting with
  it using the rewrite tactic. See the Coq reference manual for details:
  https://coq.inria.fr/refman/addendum/generalized-rewriting.html
  (section "Declaring rewrite relations", subsection "First class setoids and morphisms").

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1">#[export] <span class="kn">Instance</span> <span class="nf">Equivalence_set_eq</span> {<span class="nv">A</span> : <span class="kt">Type</span>} : Equivalence (@set_eq A).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Equivalence set_eq</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Equivalence set_eq</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">firstorder</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk3">#[export] <span class="kn">Instance</span> <span class="nf">set_eq_dec</span> `{EqDecision A} : RelDecision (@set_eq A).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RelDecision set_eq</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk4"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RelDecision set_eq</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> s1 s2; <span class="nb">typeclasses eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk5"><span class="kn">Lemma</span> <span class="nf">set_eq_extract_forall</span>
  {<span class="nv">A</span> : <span class="kt">Type</span>}
  (<span class="nv">l1</span> <span class="nv">l2</span> : <span class="nb">set</span> A)
  : set_eq l1 l2 &lt;-&gt; <span class="kr">forall</span> <span class="nv">a</span>, (a ‚àà l1 &lt;-&gt; a ‚àà l2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq l1 l2 ‚Üî (<span class="kr">‚àÄ</span> <span class="nv">a</span> : A, a ‚àà l1 ‚Üî a ‚àà l2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq l1 l2 ‚Üî (<span class="kr">‚àÄ</span> <span class="nv">a</span> : A, a ‚àà l1 ‚Üî a ‚àà l2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">unfold</span> set_eq; <span class="nb">firstorder</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk7"><span class="kn">Lemma</span> <span class="nf">set_eq_fin_set</span> `{FinSet A Cm} (s1 s2 : Cm) :
  s1 ‚â° s2 &lt;-&gt; set_eq (elements s1) (elements s2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, Cm</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ElemOf A Cm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Empty Cm</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Singleton A Cm</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Union Cm</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>Intersection Cm</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Difference Cm</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Elements A Cm</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>FinSet A Cm</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>Cm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 ‚â° s2 ‚Üî set_eq (elements s1) (elements s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk8"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, Cm</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>ElemOf A Cm</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Empty Cm</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Singleton A Cm</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Union Cm</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>Intersection Cm</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Difference Cm</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Elements A Cm</span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>FinSet A Cm</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>Cm</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 ‚â° s2 ‚Üî set_eq (elements s1) (elements s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> set_eq_extract_forall, set_equiv; <span class="nb">setoid_rewrite</span> elem_of_elements.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk9"><span class="kn">Lemma</span> <span class="nf">set_eq_proj1</span> {<span class="nv">A</span>} : <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : <span class="nb">set</span> A),
  set_eq s1 s2 -&gt;
  s1 ‚äÜ s2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : <span class="nb">set</span> A, set_eq s1 s2 ‚Üí s1 ‚äÜ s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chka"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : <span class="nb">set</span> A, set_eq s1 s2 ‚Üí s1 ‚äÜ s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> s1 s2 [].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkb"><span class="kn">Lemma</span> <span class="nf">set_eq_proj2</span> {<span class="nv">A</span>} : <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : <span class="nb">set</span> A),
  set_eq s1 s2 -&gt;
  s2 ‚äÜ s1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : <span class="nb">set</span> A, set_eq s1 s2 ‚Üí s2 ‚äÜ s1</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkc"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : <span class="nb">set</span> A, set_eq s1 s2 ‚Üí s2 ‚äÜ s1</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> s1 s2 [].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkd"><span class="kn">Lemma</span> <span class="nf">set_eq_empty_iff</span>
  {<span class="nv">A</span>}
  : <span class="kr">forall</span> (<span class="nv">l</span> : list A),
    set_eq l [] &lt;-&gt; l = [].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A, set_eq l [] ‚Üî l = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chke"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">l</span> : list A, set_eq l [] ‚Üî l = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkf"><span class="nb">split</span>; <span class="nb">intros</span>; [| <span class="bp">by</span> <span class="nb">subst</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_eq l []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk10"><span class="nb">destruct</span> l <span class="kr">as</span> [| hd tl]; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_eq (hd :: tl) []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hd :: tl = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk11"><span class="nb">destruct</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hd :: tl ‚äÜ []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>[] ‚äÜ hd :: tl</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hd :: tl = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk12"><span class="nb">specialize</span> (H hd (elem_of_list_here hd tl)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hd ‚àà []</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>[] ‚äÜ hd :: tl</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hd :: tl = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">inversion</span> H.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk13"><span class="kn">Lemma</span> <span class="nf">set_eq_cons</span> {<span class="nv">A</span>} : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">s1</span> <span class="nv">s2</span> : <span class="nb">set</span> A),
  set_eq s1 s2 -&gt;
  set_eq (a :: s1) (a :: s2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">a</span> : A) (<span class="nv">s1</span> <span class="nv">s2</span> : <span class="nb">set</span> A),
  set_eq s1 s2 ‚Üí set_eq (a :: s1) (a :: s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk14"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">a</span> : A) (<span class="nv">s1</span> <span class="nv">s2</span> : <span class="nb">set</span> A),
  set_eq s1 s2 ‚Üí set_eq (a :: s1) (a :: s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk15"><span class="nb">intros</span> a s1 s2 Heq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>set_eq s1 s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq (a :: s1) (a :: s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk16"><span class="nb">rewrite</span> !set_eq_extract_forall <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> : A, a ‚àà s1 ‚Üî a ‚àà s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">a0</span> : A, a0 ‚àà a :: s1 ‚Üî a0 ‚àà a :: s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk17"><span class="nb">setoid_rewrite</span> elem_of_cons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> : A, a ‚àà s1 ‚Üî a ‚àà s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">a0</span> : A, a0 = a ‚à® a0 ‚àà s1 ‚Üî a0 = a ‚à® a0 ‚àà s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">firstorder</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk18"><span class="kn">Lemma</span> <span class="nf">set_eq_Forall</span>
  {<span class="nv">A</span> : <span class="kt">Type</span>}
  (<span class="nv">s1</span> <span class="nv">s2</span> : <span class="nb">set</span> A)
  (<span class="nv">H12</span> : set_eq s1 s2)
  (<span class="nv">P</span> : A -&gt; <span class="kt">Prop</span>)
  : Forall P s1 &lt;-&gt; Forall P s2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>set_eq s1 s2</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Forall P s1 ‚Üî Forall P s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk19"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>set_eq s1 s2</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Forall P s1 ‚Üî Forall P s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> !Forall_forall; <span class="nb">firstorder</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1a"><span class="kn">Lemma</span> <span class="nf">set_union_comm</span> `{EqDecision A}  : <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : list A),
  set_eq (set_union s1 s2) (set_union s2 s1).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : list A,
  set_eq (set_union s1 s2) (set_union s2 s1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : list A,
  set_eq (set_union s1 s2) (set_union s2 s1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> s1 s2; <span class="nb">split</span>; <span class="nb">intro</span> x; <span class="nb">rewrite</span> !set_union_iff; itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1c"><span class="kn">Lemma</span> <span class="nf">set_union_empty</span> `{EqDecision A}  : <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : list A),
  set_union s1 s2 = [] -&gt;
  s1 = [] /\ s2 = [].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : list A,
  set_union s1 s2 = [] ‚Üí s1 = [] ‚àß s2 = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : list A,
  set_union s1 s2 = [] ‚Üí s1 = [] ‚àß s2 = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1e"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_union s1 s2 = []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 = [] ‚àß s2 = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1f"><span class="nb">destruct</span> s2; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_union s1 (a :: s2) = []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s1 = [] ‚àß a :: s2 = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">cbn</span> <span class="kr">in</span> H; <span class="nb">apply</span> set_add_not_empty <span class="kr">in</span> H.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk20"><span class="kn">Lemma</span> <span class="nf">set_union_nodup_left</span> `{EqDecision A} (l l&#39; : <span class="nb">set</span> A)
  : NoDup l -&gt; NoDup (set_union l l&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>l, l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup l ‚Üí NoDup (set_union l l&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk21"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>l, l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup l ‚Üí NoDup (set_union l l&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk22"><span class="nb">intro</span> Hl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>l, l'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (set_union l l&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk23"><span class="nb">induction</span> l&#39; <span class="kr">as</span> [| x&#39; l&#39; IH]; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l'</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>NoDup (set_union l l&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (set_union l (x&#39; :: l&#39;))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> set_add_nodup.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk24"><span class="kn">Lemma</span> <span class="nf">set_union_subseteq_left</span> `{EqDecision A}  : <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : list A),
  s1 ‚äÜ set_union s1 s2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : list A, s1 ‚äÜ set_union s1 s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk25"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : list A, s1 ‚äÜ set_union s1 s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span>; <span class="nb">intros</span> x H; <span class="nb">apply</span> set_union_intro; <span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk26"><span class="kn">Lemma</span> <span class="nf">set_union_subseteq_right</span> `{EqDecision A}  : <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : list A),
  s2 ‚äÜ set_union s1 s2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : list A, s2 ‚äÜ set_union s1 s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk27" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk27"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : list A, s2 ‚äÜ set_union s1 s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span>; <span class="nb">intros</span> x H; <span class="nb">apply</span> set_union_intro; <span class="nb">right</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk28" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk28"><span class="kn">Lemma</span> <span class="nf">set_union_subseteq_iff</span> `{EqDecision A}  : <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> <span class="nv">s</span> : list A),
  set_union s1 s2 ‚äÜ s &lt;-&gt; s1 ‚äÜ s /\ s2 ‚äÜ s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> <span class="nv">s</span> : list A,
  set_union s1 s2 ‚äÜ s ‚Üî s1 ‚äÜ s ‚àß s2 ‚äÜ s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk29" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk29"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> <span class="nv">s</span> : list A,
  set_union s1 s2 ‚äÜ s ‚Üî s1 ‚äÜ s ‚àß s2 ‚äÜ s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2a"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1, s2, s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_union s1 s2 ‚äÜ s ‚Üî s1 ‚äÜ s ‚àß s2 ‚äÜ s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2b"><span class="nb">unfold</span> subseteq, list_subseteq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1, s2, s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà set_union s1 s2 ‚Üí x ‚àà s)
‚Üî (<span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà s1 ‚Üí x ‚àà s)
  ‚àß (<span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà s2 ‚Üí x ‚àà s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2c"><span class="nb">setoid_rewrite</span> set_union_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1, s2, s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà s1 ‚à® x ‚àà s2 ‚Üí x ‚àà s)
‚Üî (<span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà s1 ‚Üí x ‚àà s)
  ‚àß (<span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà s2 ‚Üí x ‚àà s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">firstorder</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2d"><span class="kn">Lemma</span> <span class="nf">set_union_iterated_nodup</span> `{EqDecision A}
  (ss : list (list A))
  (H : <span class="kr">forall</span> <span class="nv">s</span>, s ‚àà ss -&gt; NoDup s) :
  NoDup (fold_right set_union [] ss).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : list A, s ‚àà ss ‚Üí NoDup s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (foldr set_union [] ss)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : list A, s ‚àà ss ‚Üí NoDup s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (foldr set_union [] ss)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk2f"><span class="nb">induction</span> ss; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : list A, s ‚àà [] ‚Üí NoDup s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup []</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk30" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : list A, s ‚àà a :: ss ‚Üí NoDup s</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">‚àÄ</span> <span class="nv">s</span> : list A, s ‚àà ss ‚Üí NoDup s)
‚Üí NoDup (foldr set_union [] ss)</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk30"><hr></label><div class="goal-conclusion">NoDup (set_union a (foldr set_union [] ss))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk31" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk31">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : list A, s ‚àà [] ‚Üí NoDup s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> NoDup_nil.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk32">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : list A, s ‚àà a :: ss ‚Üí NoDup s</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">‚àÄ</span> <span class="nv">s</span> : list A, s ‚àà ss ‚Üí NoDup s)
‚Üí NoDup (foldr set_union [] ss)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (set_union a (foldr set_union [] ss))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk33"><span class="nb">apply</span> set_union_nodup.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : list A, s ‚àà a :: ss ‚Üí NoDup s</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">‚àÄ</span> <span class="nv">s</span> : list A, s ‚àà ss ‚Üí NoDup s)
‚Üí NoDup (foldr set_union [] ss)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup a</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk34" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : list A, s ‚àà a :: ss ‚Üí NoDup s</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">‚àÄ</span> <span class="nv">s</span> : list A, s ‚àà ss ‚Üí NoDup s)
‚Üí NoDup (foldr set_union [] ss)</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk34"><hr></label><div class="goal-conclusion">NoDup (foldr set_union [] ss)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk35" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk35">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : list A, s ‚àà a :: ss ‚Üí NoDup s</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">‚àÄ</span> <span class="nv">s</span> : list A, s ‚àà ss ‚Üí NoDup s)
‚Üí NoDup (foldr set_union [] ss)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> H; <span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk36">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : list A, s ‚àà a :: ss ‚Üí NoDup s</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">‚àÄ</span> <span class="nv">s</span> : list A, s ‚àà ss ‚Üí NoDup s)
‚Üí NoDup (foldr set_union [] ss)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (foldr set_union [] ss)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> IHss; <span class="nb">intros</span>; <span class="nb">apply</span> H; <span class="nb">right</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk37"><span class="kn">Lemma</span> <span class="nf">set_union_in_iterated</span>
  `{EqDecision A}
  (ss : list (<span class="nb">set</span> A))
  (a : A)
  : a ‚àà fold_right set_union [] ss &lt;-&gt; Exists (<span class="kr">fun</span> <span class="nv">s</span> =&gt; a ‚àà s) ss.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà foldr set_union [] ss
‚Üî Exists (<span class="kr">Œª</span> <span class="nv">s</span> : <span class="nb">set</span> A, a ‚àà s) ss</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk38" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk38"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà foldr set_union [] ss
‚Üî Exists (<span class="kr">Œª</span> <span class="nv">s</span> : <span class="nb">set</span> A, a ‚àà s) ss</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk39" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk39"><span class="nb">rewrite</span> Exists_exists.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà foldr set_union [] ss
‚Üî (<span class="kr">‚àÉ</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ‚àà ss ‚àß a ‚àà x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk3a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk3a"><span class="nb">induction</span> ss; <span class="nb">split</span>; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà [] ‚Üí <span class="kr">‚àÉ</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ‚àà [] ‚àß a ‚àà x</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk3b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk3b"><hr></label><div class="goal-conclusion">(<span class="kr">‚àÉ</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ‚àà [] ‚àß a ‚àà x) ‚Üí a ‚àà []</div></blockquote><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk3c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ‚àà foldr set_union [] ss
‚Üî (<span class="kr">‚àÉ</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ‚àà ss ‚àß a ‚àà x)</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk3c"><hr></label><div class="goal-conclusion">a ‚àà set_union a0 (foldr set_union [] ss)
‚Üí <span class="kr">‚àÉ</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ‚àà a0 :: ss ‚àß a ‚àà x</div></blockquote><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk3d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ‚àà foldr set_union [] ss
‚Üî (<span class="kr">‚àÉ</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ‚àà ss ‚àß a ‚àà x)</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk3d"><hr></label><div class="goal-conclusion">(<span class="kr">‚àÉ</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ‚àà a0 :: ss ‚àß a ‚àà x)
‚Üí a ‚àà set_union a0 (foldr set_union [] ss)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk3e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk3e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà [] ‚Üí <span class="kr">‚àÉ</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ‚àà [] ‚àß a ‚àà x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intro</span> H; <span class="nb">inversion</span> H.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk3f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk3f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÉ</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ‚àà [] ‚àß a ‚àà x) ‚Üí a ‚àà []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> (x &amp; Hin &amp; _); <span class="nb">inversion</span> Hin.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk40" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk40">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ‚àà foldr set_union [] ss
‚Üî (<span class="kr">‚àÉ</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ‚àà ss ‚àß a ‚àà x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà set_union a0 (foldr set_union [] ss)
‚Üí <span class="kr">‚àÉ</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ‚àà a0 :: ss ‚àß a ‚àà x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk41" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk41"><span class="nb">intro</span> Hin; <span class="nb">apply</span> set_union_iff <span class="kr">in</span> Hin <span class="kr">as</span> [Hina0 | Hinss].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ‚àà foldr set_union [] ss
‚Üî (<span class="kr">‚àÉ</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ‚àà ss ‚àß a ‚àà x)</span></span></span><br><span><var>Hina0</var><span class="hyp-type"><b>: </b><span>a ‚àà a0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ‚àà a0 :: ss ‚àß a ‚àà x</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk42" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ‚àà foldr set_union [] ss
‚Üî (<span class="kr">‚àÉ</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ‚àà ss ‚àß a ‚àà x)</span></span></span><br><span><var>Hinss</var><span class="hyp-type"><b>: </b><span>a ‚àà foldr set_union [] ss</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk42"><hr></label><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ‚àà a0 :: ss ‚àß a ‚àà x</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk43" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk43">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ‚àà foldr set_union [] ss
‚Üî (<span class="kr">‚àÉ</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ‚àà ss ‚àß a ‚àà x)</span></span></span><br><span><var>Hina0</var><span class="hyp-type"><b>: </b><span>a ‚àà a0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ‚àà a0 :: ss ‚àß a ‚àà x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="kr">exists</span> <span class="nv">a0</span>; <span class="nb">rewrite</span> elem_of_cons; <span class="nb">split</span>; [<span class="nb">left</span> |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk44" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk44">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ‚àà foldr set_union [] ss
‚Üî (<span class="kr">‚àÉ</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ‚àà ss ‚àß a ‚àà x)</span></span></span><br><span><var>Hinss</var><span class="hyp-type"><b>: </b><span>a ‚àà foldr set_union [] ss</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ‚àà a0 :: ss ‚àß a ‚àà x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk45" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk45"><span class="nb">apply</span> IHss <span class="kr">in</span> Hinss <span class="kr">as</span> (x &amp; Hinss &amp; Hinx).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ‚àà foldr set_union [] ss
‚Üî (<span class="kr">‚àÉ</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ‚àà ss ‚àß a ‚àà x)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Hinss</var><span class="hyp-type"><b>: </b><span>x ‚àà ss</span></span></span><br><span><var>Hinx</var><span class="hyp-type"><b>: </b><span>a ‚àà x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ‚àà a0 :: ss ‚àß a ‚àà x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">setoid_rewrite</span> elem_of_cons; <span class="nb">eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk46" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk46">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ‚àà foldr set_union [] ss
‚Üî (<span class="kr">‚àÉ</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ‚àà ss ‚àß a ‚àà x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÉ</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ‚àà a0 :: ss ‚àß a ‚àà x)
‚Üí a ‚àà set_union a0 (foldr set_union [] ss)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk47" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk47"><span class="nb">rewrite</span> set_union_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ‚àà foldr set_union [] ss
‚Üî (<span class="kr">‚àÉ</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ‚àà ss ‚àß a ‚àà x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÉ</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ‚àà a0 :: ss ‚àß a ‚àà x)
‚Üí a ‚àà a0 ‚à® a ‚àà foldr set_union [] ss</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk48" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk48"><span class="nb">intros</span> (x &amp; Hx &amp; Ha).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ‚àà foldr set_union [] ss
‚Üî (<span class="kr">‚àÉ</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ‚àà ss ‚àß a ‚àà x)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ‚àà a0 :: ss</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà a0 ‚à® a ‚àà foldr set_union [] ss</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk49" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk49"><span class="nb">apply</span> elem_of_cons <span class="kr">in</span> Hx <span class="kr">as</span> [-&gt; |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ‚àà foldr set_union [] ss
‚Üî (<span class="kr">‚àÉ</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ‚àà ss ‚àß a ‚àà x)</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà a0 ‚à® a ‚àà foldr set_union [] ss</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk4a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ‚àà foldr set_union [] ss
‚Üî (<span class="kr">‚àÉ</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ‚àà ss ‚àß a ‚àà x)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ‚àà ss</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà x</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk4a"><hr></label><div class="goal-conclusion">a ‚àà a0 ‚à® a ‚àà foldr set_union [] ss</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk4b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk4b">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ‚àà foldr set_union [] ss
‚Üî (<span class="kr">‚àÉ</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ‚àà ss ‚àß a ‚àà x)</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà a0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà a0 ‚à® a ‚àà foldr set_union [] ss</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk4c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk4c">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>a ‚àà foldr set_union [] ss
‚Üî (<span class="kr">‚àÉ</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ‚àà ss ‚àß a ‚àà x)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ‚àà ss</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà a0 ‚à® a ‚àà foldr set_union [] ss</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">right</span>; <span class="nb">apply</span> IHss; <span class="kr">exists</span> <span class="nv">x</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk4d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk4d"><span class="kn">Lemma</span> <span class="nf">set_union_iterated_subseteq</span>
  `{EqDecision A}
  (ss ss&#39; : list (<span class="nb">set</span> A))
  (Hincl : ss ‚äÜ ss&#39;) :
  fold_right set_union [] ss ‚äÜ
  fold_right set_union [] ss&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss, ss'</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>ss ‚äÜ ss&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">foldr set_union [] ss ‚äÜ foldr set_union [] ss&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk4e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk4e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss, ss'</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>ss ‚äÜ ss&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">foldr set_union [] ss ‚äÜ foldr set_union [] ss&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk4f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk4f"><span class="nb">intros</span> a H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss, ss'</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>ss ‚äÜ ss&#39;</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a ‚àà foldr set_union [] ss</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà foldr set_union [] ss&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk50" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk50"><span class="nb">apply</span> set_union_in_iterated <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss, ss'</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>ss ‚äÜ ss&#39;</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Exists (<span class="kr">Œª</span> <span class="nv">s</span> : <span class="nb">set</span> A, a ‚àà s) ss</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà foldr set_union [] ss&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk51" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk51"><span class="nb">apply</span> set_union_in_iterated.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss, ss'</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>ss ‚äÜ ss&#39;</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Exists (<span class="kr">Œª</span> <span class="nv">s</span> : <span class="nb">set</span> A, a ‚àà s) ss</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Exists (<span class="kr">Œª</span> <span class="nv">s</span> : <span class="nb">set</span> A, a ‚àà s) ss&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk52" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk52"><span class="nb">rewrite</span> Exists_exists <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss, ss'</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>ss ‚äÜ ss&#39;</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ‚àà ss ‚àß a ‚àà x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ‚àà ss&#39; ‚àß a ‚àà x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk53" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk53"><span class="nb">destruct</span> H <span class="kr">as</span> [x [Hx Ha]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss, ss'</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>ss ‚äÜ ss&#39;</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ‚àà ss</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ‚àà ss&#39; ‚àß a ‚àà x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk54" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk54"><span class="kr">exists</span> <span class="nv">x</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss, ss'</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>ss ‚äÜ ss&#39;</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ‚àà ss</span></span></span><br><span><var>Ha</var><span class="hyp-type"><b>: </b><span>a ‚àà x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà ss&#39; ‚àß a ‚àà x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">split</span>; [<span class="nb">apply</span> Hincl |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk55" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk55"><span class="kn">Lemma</span> <span class="nf">set_union_empty_left</span> `{EqDecision A}  : <span class="kr">forall</span> (<span class="nv">s</span> : list A),
  NoDup s -&gt; set_eq (set_union [] s) s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : list A, NoDup s ‚Üí set_eq (set_union [] s) s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk56" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk56"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : list A, NoDup s ‚Üí set_eq (set_union [] s) s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk57" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk57"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq (set_union [] s) s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk58" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk58"><span class="nb">split</span>; <span class="nb">intros</span> x Hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ‚àà set_union [] s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà s</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk59" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ‚àà s</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk59"><hr></label><div class="goal-conclusion">x ‚àà set_union [] s</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk5a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk5a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ‚àà set_union [] s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> set_union_elim <span class="kr">in</span> Hin <span class="kr">as</span> []; [<span class="nb">inversion</span> H0 |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk5b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk5b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ‚àà s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà set_union [] s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> set_union_intro; <span class="nb">right</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk5c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk5c"><span class="kn">Lemma</span> <span class="nf">map_list_subseteq</span> {<span class="nv">A</span> <span class="nv">B</span>} : <span class="kr">forall</span> (<span class="nv">f</span> : B -&gt; A) (<span class="nv">s</span> <span class="nv">s&#39;</span> : list B),
  s ‚äÜ s&#39; -&gt; map f s ‚äÜ map f s&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">f</span> : B ‚Üí A) (<span class="nv">s</span> <span class="nv">s&#39;</span> : list B),
  s ‚äÜ s&#39; ‚Üí map f s ‚äÜ map f s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk5d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk5d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">f</span> : B ‚Üí A) (<span class="nv">s</span> <span class="nv">s&#39;</span> : list B),
  s ‚äÜ s&#39; ‚Üí map f s ‚äÜ map f s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk5e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk5e"><span class="nb">intro</span> f; <span class="nb">induction</span> s; <span class="nb">intros</span>; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>[] ‚äÜ s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">[] ‚äÜ map f s&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk5f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s&#39;</span> : list B, s ‚äÜ s&#39; ‚Üí map f s ‚äÜ map f s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ‚äÜ s&#39;</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk5f"><hr></label><div class="goal-conclusion">f a :: map f s ‚äÜ map f s&#39;</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk60" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk60">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>[] ‚äÜ s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">[] ‚äÜ map f s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> list_subseteq_nil.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk61" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk61">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s&#39;</span> : list B, s ‚äÜ s&#39; ‚Üí map f s ‚äÜ map f s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ‚äÜ s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f a :: map f s ‚äÜ map f s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk62" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk62"><span class="nb">assert</span> (Hs : s ‚äÜ s&#39;) <span class="bp">by</span> (<span class="nb">intros</span> b Hs; <span class="nb">apply</span> H; <span class="nb">right</span>; <span class="bp">done</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s&#39;</span> : list B, s ‚äÜ s&#39; ‚Üí map f s ‚äÜ map f s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ‚äÜ s&#39;</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>s ‚äÜ s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f a :: map f s ‚äÜ map f s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk63" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk63"><span class="nb">specialize</span> (IHs s&#39; Hs).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>map f s ‚äÜ map f s&#39;</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ‚äÜ s&#39;</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>s ‚äÜ s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f a :: map f s ‚äÜ map f s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk64" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk64"><span class="nb">intros</span> b Hs&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>map f s ‚äÜ map f s&#39;</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ‚äÜ s&#39;</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>s ‚äÜ s&#39;</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hs'</var><span class="hyp-type"><b>: </b><span>b ‚àà f a :: map f s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">b ‚àà map f s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk65" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk65"><span class="nb">apply</span> elem_of_cons <span class="kr">in</span> Hs&#39; <span class="kr">as</span> [-&gt; |]; [| <span class="bp">by</span> <span class="nb">apply</span> IHs].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>map f s ‚äÜ map f s&#39;</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a :: s ‚äÜ s&#39;</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>s ‚äÜ s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f a ‚àà map f s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> elem_of_list_fmap_1, H; <span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk66" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk66"><span class="kn">Lemma</span> <span class="nf">map_set_eq</span> {<span class="nv">A</span> <span class="nv">B</span>} (<span class="nv">f</span> : B -&gt; A) : <span class="kr">forall</span> <span class="nv">s</span> <span class="nv">s&#39;</span>,
  set_eq s s&#39; -&gt;
  set_eq (map f s) (map f s&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> <span class="nv">s&#39;</span> : <span class="nb">set</span> B,
  set_eq s s&#39; ‚Üí set_eq (map f s) (map f s&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk67" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk67"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> <span class="nv">s&#39;</span> : <span class="nb">set</span> B,
  set_eq s s&#39; ‚Üí set_eq (map f s) (map f s&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">split</span>; <span class="nb">apply</span> map_list_subseteq; <span class="nb">apply</span> H.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk68" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk68"><span class="kn">Lemma</span> <span class="nf">set_map_nodup</span> {<span class="nv">A</span> <span class="nv">B</span>} `{EqDecision A} (f : B -&gt; A) : <span class="kr">forall</span> (<span class="nv">s</span> : <span class="nb">set</span> B),
  NoDup (set_map f s).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : <span class="nb">set</span> B, NoDup (set_map f s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk69" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk69"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : <span class="nb">set</span> B, NoDup (set_map f s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk6a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk6a"><span class="nb">induction</span> s; <span class="nb">simpl</span>; <span class="kp">try</span> <span class="nb">constructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>NoDup (set_map f s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (set_add (f a) (set_map f s))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> set_add_nodup.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk6b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk6b"><span class="kn">Lemma</span> <span class="nf">set_map_elem_of</span> {<span class="nv">A</span> <span class="nv">B</span>} `{EqDecision A} (f : B -&gt; A) : <span class="kr">forall</span> <span class="nv">x</span> <span class="nv">s</span>,
  x ‚àà s -&gt;
  f x ‚àà set_map f s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">x</span> : B) (<span class="nv">s</span> : <span class="nb">set</span> B), x ‚àà s ‚Üí f x ‚àà set_map f s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk6c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk6c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">x</span> : B) (<span class="nv">s</span> : <span class="nb">set</span> B), x ‚àà s ‚Üí f x ‚àà set_map f s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk6d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk6d"><span class="nb">induction</span> s; <span class="nb">intros</span>; <span class="nb">inversion</span> H; <span class="nb">subst</span>; <span class="nb">clear</span> H; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>a ‚àà s ‚Üí f a ‚àà set_map f s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f a ‚àà set_add (f a) (set_map f s)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk6e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>x ‚àà s ‚Üí f x ‚àà set_map f s</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x ‚àà s</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk6e"><hr></label><div class="goal-conclusion">f x ‚àà set_add (f a) (set_map f s)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk6f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk6f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>a ‚àà s ‚Üí f a ‚àà set_map f s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f a ‚àà set_add (f a) (set_map f s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> set_add_intro2.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk70" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk70">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>x ‚àà s ‚Üí f x ‚àà set_map f s</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x ‚àà s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f x ‚àà set_add (f a) (set_map f s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> set_add_intro1, IHs.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk71" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk71"><span class="kn">Lemma</span> <span class="nf">set_map_exists</span> {<span class="nv">A</span> <span class="nv">B</span>} `{EqDecision A} (f : B -&gt; A) : <span class="kr">forall</span> <span class="nv">y</span> <span class="nv">s</span>,
  y ‚àà set_map f s &lt;-&gt;
  <span class="kr">exists</span> <span class="nv">x</span>, x ‚àà s /\ f x = y.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">y</span> : A) (<span class="nv">s</span> : <span class="nb">set</span> B),
  y ‚àà set_map f s ‚Üî (<span class="kr">‚àÉ</span> <span class="nv">x</span> : B, x ‚àà s ‚àß f x = y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk72" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk72"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">y</span> : A) (<span class="nv">s</span> : <span class="nb">set</span> B),
  y ‚àà set_map f s ‚Üî (<span class="kr">‚àÉ</span> <span class="nv">x</span> : B, x ‚àà s ‚àß f x = y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk73" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk73"><span class="nb">induction</span> s; <span class="nb">split</span>; <span class="nb">intros</span>; <span class="nb">cbn</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>y ‚àà empty_set</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">x</span> : B, x ‚àà [] ‚àß f x = y</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk74" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">x</span> : B, x ‚àà [] ‚àß f x = y</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk74"><hr></label><div class="goal-conclusion">y ‚àà empty_set</div></blockquote><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk75" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>y ‚àà set_map f s ‚Üî (<span class="kr">‚àÉ</span> <span class="nv">x</span> : B, x ‚àà s ‚àß f x = y)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>y
‚àà set_add (f a)
    (foldr (<span class="kr">Œª</span> <span class="nv">a</span> : B, set_add (f a)) empty_set s)</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk75"><hr></label><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">x</span> : B, x ‚àà a :: s ‚àß f x = y</div></blockquote><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk76" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>y ‚àà set_map f s ‚Üî (<span class="kr">‚àÉ</span> <span class="nv">x</span> : B, x ‚àà s ‚àß f x = y)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">x</span> : B, x ‚àà a :: s ‚àß f x = y</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk76"><hr></label><div class="goal-conclusion">y
‚àà set_add (f a)
    (foldr (<span class="kr">Œª</span> <span class="nv">a</span> : B, set_add (f a)) empty_set s)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk77" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk77">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>y ‚àà empty_set</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">x</span> : B, x ‚àà [] ‚àß f x = y</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">inversion</span> H.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk78" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk78">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">x</span> : B, x ‚àà [] ‚àß f x = y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà empty_set</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> H <span class="kr">as</span> (x &amp; Hx &amp; Hf); <span class="nb">inversion</span> Hx.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk79" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk79">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>y ‚àà set_map f s ‚Üî (<span class="kr">‚àÉ</span> <span class="nv">x</span> : B, x ‚àà s ‚àß f x = y)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>y
‚àà set_add (f a)
    (foldr (<span class="kr">Œª</span> <span class="nv">a</span> : B, set_add (f a)) empty_set s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">x</span> : B, x ‚àà a :: s ‚àß f x = y</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk7a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk7a"><span class="nb">apply</span> set_add_iff <span class="kr">in</span> H <span class="kr">as</span> [Heq | Hin]; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>f a ‚àà set_map f s ‚Üî (<span class="kr">‚àÉ</span> <span class="nv">x</span> : B, x ‚àà s ‚àß f x = f a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">x</span> : B, x ‚àà a :: s ‚àß f x = f a</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk7b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>y ‚àà set_map f s ‚Üî (<span class="kr">‚àÉ</span> <span class="nv">x</span> : B, x ‚àà s ‚àß f x = y)</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>y ‚àà foldr (<span class="kr">Œª</span> <span class="nv">a</span> : B, set_add (f a)) empty_set s</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk7b"><hr></label><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">x</span> : B, x ‚àà a :: s ‚àß f x = y</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk7c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk7c">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>f a ‚àà set_map f s ‚Üî (<span class="kr">‚àÉ</span> <span class="nv">x</span> : B, x ‚àà s ‚àß f x = f a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">x</span> : B, x ‚àà a :: s ‚àß f x = f a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="kr">exists</span> <span class="nv">a</span>; <span class="nb">split</span>; [<span class="nb">left</span> |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk7d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk7d">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>y ‚àà set_map f s ‚Üî (<span class="kr">‚àÉ</span> <span class="nv">x</span> : B, x ‚àà s ‚àß f x = y)</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>y ‚àà foldr (<span class="kr">Œª</span> <span class="nv">a</span> : B, set_add (f a)) empty_set s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">x</span> : B, x ‚àà a :: s ‚àß f x = y</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk7e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk7e"><span class="nb">apply</span> IHs <span class="kr">in</span> Hin <span class="kr">as</span> (x &amp; Hin &amp; Heq); <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>f x ‚àà set_map f s
‚Üî (<span class="kr">‚àÉ</span> <span class="nv">x0</span> : B, x0 ‚àà s ‚àß f x0 = f x)</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ‚àà s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">x0</span> : B, x0 ‚àà a :: s ‚àß f x0 = f x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="kr">exists</span> <span class="nv">x</span>; <span class="nb">split</span>; [<span class="nb">right</span> |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk7f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk7f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>y ‚àà set_map f s ‚Üî (<span class="kr">‚àÉ</span> <span class="nv">x</span> : B, x ‚àà s ‚àß f x = y)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">x</span> : B, x ‚àà a :: s ‚àß f x = y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y
‚àà set_add (f a)
    (foldr (<span class="kr">Œª</span> <span class="nv">a</span> : B, set_add (f a)) empty_set s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk80" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk80"><span class="nb">destruct</span> H <span class="kr">as</span> [x [Hx Hf]]; <span class="nb">subst</span>; <span class="nb">simpl</span>; <span class="nb">apply</span> set_add_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>f x ‚àà set_map f s
‚Üî (<span class="kr">‚àÉ</span> <span class="nv">x0</span> : B, x0 ‚àà s ‚àß f x0 = f x)</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ‚àà a :: s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f x = f a
‚à® f x ‚àà foldr (<span class="kr">Œª</span> <span class="nv">a</span> : B, set_add (f a)) empty_set s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk81" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk81"><span class="nb">apply</span> elem_of_cons <span class="kr">in</span> Hx <span class="kr">as</span> [-&gt; |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>f a ‚àà set_map f s ‚Üî (<span class="kr">‚àÉ</span> <span class="nv">x</span> : B, x ‚àà s ‚àß f x = f a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f a = f a
‚à® f a ‚àà foldr (<span class="kr">Œª</span> <span class="nv">a</span> : B, set_add (f a)) empty_set s</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk82" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>f x ‚àà set_map f s
‚Üî (<span class="kr">‚àÉ</span> <span class="nv">x0</span> : B, x0 ‚àà s ‚àß f x0 = f x)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ‚àà s</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk82"><hr></label><div class="goal-conclusion">f x = f a
‚à® f x ‚àà foldr (<span class="kr">Œª</span> <span class="nv">a</span> : B, set_add (f a)) empty_set s</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk83" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk83">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>f a ‚àà set_map f s ‚Üî (<span class="kr">‚àÉ</span> <span class="nv">x</span> : B, x ‚àà s ‚àß f x = f a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f a = f a
‚à® f a ‚àà foldr (<span class="kr">Œª</span> <span class="nv">a</span> : B, set_add (f a)) empty_set s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk84" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk84">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>f x ‚àà set_map f s
‚Üî (<span class="kr">‚àÉ</span> <span class="nv">x0</span> : B, x0 ‚àà s ‚àß f x0 = f x)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ‚àà s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f x = f a
‚à® f x ‚àà foldr (<span class="kr">Œª</span> <span class="nv">a</span> : B, set_add (f a)) empty_set s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">right</span>; <span class="nb">apply</span> IHs; <span class="kr">exists</span> <span class="nv">x</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk85" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk85"><span class="kn">Lemma</span> <span class="nf">set_map_subseteq</span> {<span class="nv">A</span> <span class="nv">B</span>} `{EqDecision A} (f : B -&gt; A) : <span class="kr">forall</span> <span class="nv">s</span> <span class="nv">s&#39;</span>,
  s ‚äÜ s&#39; -&gt;
  set_map f s ‚äÜ set_map f s&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> <span class="nv">s&#39;</span> : <span class="nb">set</span> B, s ‚äÜ s&#39; ‚Üí set_map f s ‚äÜ set_map f s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk86" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk86"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> <span class="nv">s&#39;</span> : <span class="nb">set</span> B, s ‚äÜ s&#39; ‚Üí set_map f s ‚äÜ set_map f s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk87" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk87"><span class="nb">induction</span> s; <span class="nb">cbn</span>; <span class="nb">intros</span> s&#39; Hsub msg Hin; [<span class="bp">by</span> <span class="nb">inversion</span> Hin |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s&#39;</span> : <span class="nb">set</span> B,
  s ‚äÜ s&#39; ‚Üí set_map f s ‚äÜ set_map f s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>a :: s ‚äÜ s&#39;</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>msg
‚àà set_add (f a)
    (foldr (<span class="kr">Œª</span> <span class="nv">a</span> : B, set_add (f a)) empty_set s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ‚àà set_map f s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk88" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk88"><span class="nb">apply</span> set_add_elim <span class="kr">in</span> Hin <span class="kr">as</span> [-&gt; |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s&#39;</span> : <span class="nb">set</span> B,
  s ‚äÜ s&#39; ‚Üí set_map f s ‚äÜ set_map f s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>a :: s ‚äÜ s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f a ‚àà set_map f s&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk89" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s&#39;</span> : <span class="nb">set</span> B,
  s ‚äÜ s&#39; ‚Üí set_map f s ‚äÜ set_map f s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>a :: s ‚äÜ s&#39;</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>msg ‚àà foldr (<span class="kr">Œª</span> <span class="nv">a</span> : B, set_add (f a)) empty_set s</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk89"><hr></label><div class="goal-conclusion">msg ‚àà set_map f s&#39;</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk8a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk8a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s&#39;</span> : <span class="nb">set</span> B,
  s ‚äÜ s&#39; ‚Üí set_map f s ‚äÜ set_map f s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>a :: s ‚äÜ s&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f a ‚àà set_map f s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> set_map_elem_of, Hsub; <span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk8b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk8b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s&#39;</span> : <span class="nb">set</span> B,
  s ‚äÜ s&#39; ‚Üí set_map f s ‚äÜ set_map f s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>a :: s ‚äÜ s&#39;</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>msg ‚àà foldr (<span class="kr">Œª</span> <span class="nv">a</span> : B, set_add (f a)) empty_set s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ‚àà set_map f s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk8c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk8c"><span class="nb">apply</span> IHs; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s&#39;</span> : <span class="nb">set</span> B,
  s ‚äÜ s&#39; ‚Üí set_map f s ‚äÜ set_map f s&#39;</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>a :: s ‚äÜ s&#39;</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>msg ‚àà foldr (<span class="kr">Œª</span> <span class="nv">a</span> : B, set_add (f a)) empty_set s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s ‚äÜ s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> x Hin&#39;; <span class="nb">apply</span> Hsub; <span class="nb">right</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk8d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk8d"><span class="kn">Lemma</span> <span class="nf">set_map_eq</span> {<span class="nv">A</span> <span class="nv">B</span>} `{EqDecision A} (f : B -&gt; A) : <span class="kr">forall</span> <span class="nv">s</span> <span class="nv">s&#39;</span>,
  set_eq s s&#39; -&gt;
  set_eq (set_map f s) (set_map f s&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> <span class="nv">s&#39;</span> : <span class="nb">set</span> B,
  set_eq s s&#39; ‚Üí set_eq (set_map f s) (set_map f s&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk8e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk8e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> <span class="nv">s&#39;</span> : <span class="nb">set</span> B,
  set_eq s s&#39; ‚Üí set_eq (set_map f s) (set_map f s&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">split</span>; <span class="nb">destruct</span> H; <span class="nb">apply</span> set_map_subseteq.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk8f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk8f"><span class="kn">Lemma</span> <span class="nf">set_map_singleton</span> {<span class="nv">A</span> <span class="nv">B</span>} `{EqDecision A} (f : B -&gt; A) : <span class="kr">forall</span> <span class="nv">s</span> <span class="nv">a</span>,
  set_map f s = [a] -&gt;
  <span class="kr">forall</span> <span class="nv">b</span>, b ‚àà s -&gt; f b = a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : <span class="nb">set</span> B) (<span class="nv">a</span> : A),
  set_map f s = [a] ‚Üí <span class="kr">‚àÄ</span> <span class="nv">b</span> : B, b ‚àà s ‚Üí f b = a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk90" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk90"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">s</span> : <span class="nb">set</span> B) (<span class="nv">a</span> : A),
  set_map f s = [a] ‚Üí <span class="kr">‚àÄ</span> <span class="nv">b</span> : B, b ‚àà s ‚Üí f b = a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk91" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk91"><span class="nb">intros</span> s a H b H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_map f s = [a]</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>b ‚àà s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f b = a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk92" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk92"><span class="nb">apply</span> (set_map_elem_of f) <span class="kr">in</span> H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_map f s = [a]</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>f b ‚àà set_map f s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f b = a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk93" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk93"><span class="nb">rewrite</span> H <span class="kr">in</span> H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>set_map f s = [a]</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>f b ‚àà [a]</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f b = a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> elem_of_cons <span class="kr">in</span> H0 <span class="kr">as</span> []; [| <span class="nb">inversion</span> H0].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk94" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk94"><span class="kn">Lemma</span> <span class="nf">filter_set_add</span> `{EqDecision X} P
  `{<span class="kr">forall</span> (<span class="nv">x</span> : X), Decision (P x)} :
  <span class="kr">forall</span> (<span class="nv">l</span> : list X) <span class="nv">x</span>, ~ P x -&gt;
  filter P l = filter P (set_add x l).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>X ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : list X) (<span class="nv">x</span> : X),
  ¬¨ P x ‚Üí filter P l = filter P (set_add x l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk95" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk95"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>X ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : list X) (<span class="nv">x</span> : X),
  ¬¨ P x ‚Üí filter P l = filter P (set_add x l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk96" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk96"><span class="nb">induction</span> l <span class="kr">as</span> [| hd tl IHl]; <span class="nb">intros</span> x H_false; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>X ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_false</var><span class="hyp-type"><b>: </b><span>¬¨ P x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">[] = (<span class="kr">if</span> decide (P x) <span class="kr">then</span> [x] <span class="kr">else</span> [])</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk97" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>X ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X,
  ¬¨ P x ‚Üí filter P tl = filter P (set_add x tl)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_false</var><span class="hyp-type"><b>: </b><span>¬¨ P x</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk97"><hr></label><div class="goal-conclusion">(<span class="kr">if</span> decide (P hd)
 <span class="kr">then</span> hd :: filter P tl
 <span class="kr">else</span> filter P tl) =
filter P
  (<span class="kr">if</span> decide (x = hd)
   <span class="kr">then</span> hd :: tl
   <span class="kr">else</span> hd :: set_add x tl)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk98" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk98">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>X ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_false</var><span class="hyp-type"><b>: </b><span>¬¨ P x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">[] = (<span class="kr">if</span> decide (P x) <span class="kr">then</span> [x] <span class="kr">else</span> [])</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> decide_False.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk99" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk99">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>X ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X,
  ¬¨ P x ‚Üí filter P tl = filter P (set_add x tl)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_false</var><span class="hyp-type"><b>: </b><span>¬¨ P x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> decide (P hd)
 <span class="kr">then</span> hd :: filter P tl
 <span class="kr">else</span> filter P tl) =
filter P
  (<span class="kr">if</span> decide (x = hd)
   <span class="kr">then</span> hd :: tl
   <span class="kr">else</span> hd :: set_add x tl)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk9a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk9a"><span class="nb">destruct</span> (decide (x = hd)); <span class="nb">cbn</span>; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>X ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X,
  ¬¨ P x ‚Üí filter P tl = filter P (set_add x tl)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H_false</var><span class="hyp-type"><b>: </b><span>¬¨ P x</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ‚â† hd</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> decide (P hd)
 <span class="kr">then</span> hd :: filter P tl
 <span class="kr">else</span> filter P tl) =
(<span class="kr">if</span> decide (P hd)
 <span class="kr">then</span> hd :: filter P (set_add x tl)
 <span class="kr">else</span> filter P (set_add x tl))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> (decide (P hd)); <span class="nb">rewrite</span> &lt;- IHl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk9b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk9b"><span class="kn">Lemma</span> <span class="nf">set_add_ignore</span> `{EqDecision X} :
  <span class="kr">forall</span> (<span class="nv">l</span> : list X) (<span class="nv">x</span> : X),
    x ‚àà l -&gt;
    set_add x l = l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : list X) (<span class="nv">x</span> : X), x ‚àà l ‚Üí set_add x l = l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk9c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk9c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : list X) (<span class="nv">x</span> : X), x ‚àà l ‚Üí set_add x l = l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk9d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk9d"><span class="nb">induction</span> l <span class="kr">as</span> [| hd tl IHl]; <span class="nb">inversion</span> <span class="mi">1</span>; <span class="nb">subst</span>; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, x ‚àà tl ‚Üí set_add x tl = tl</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hd ‚àà hd :: tl</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> decide (hd = hd)
 <span class="kr">then</span> hd :: tl
 <span class="kr">else</span> hd :: set_add hd tl) = 
hd :: tl</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk9e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, x ‚àà tl ‚Üí set_add x tl = tl</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ‚àà hd :: tl</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x ‚àà tl</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk9e"><hr></label><div class="goal-conclusion">(<span class="kr">if</span> decide (x = hd)
 <span class="kr">then</span> hd :: tl
 <span class="kr">else</span> hd :: set_add x tl) = 
hd :: tl</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk9f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk9f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, x ‚àà tl ‚Üí set_add x tl = tl</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hd ‚àà hd :: tl</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> decide (hd = hd)
 <span class="kr">then</span> hd :: tl
 <span class="kr">else</span> hd :: set_add hd tl) = 
hd :: tl</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> decide_True.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chka0" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chka0">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, x ‚àà tl ‚Üí set_add x tl = tl</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ‚àà hd :: tl</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x ‚àà tl</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> decide (x = hd)
 <span class="kr">then</span> hd :: tl
 <span class="kr">else</span> hd :: set_add x tl) = 
hd :: tl</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> case_decide; [| <span class="nb">rewrite</span> IHl].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chka1" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chka1"><span class="kn">Lemma</span> <span class="nf">set_add_new</span> `{EqDecision A} :
  <span class="kr">forall</span> (<span class="nv">x</span> : A) <span class="nv">l</span>, x ‚àâ l -&gt; set_add x l = l++[x].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">x</span> : A) (<span class="nv">l</span> : <span class="nb">set</span> A), x ‚àâ l ‚Üí set_add x l = l ++ [x]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chka2" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chka2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">x</span> : A) (<span class="nv">l</span> : <span class="nb">set</span> A), x ‚àâ l ‚Üí set_add x l = l ++ [x]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chka3" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chka3"><span class="nb">induction</span> l; <span class="nb">cbn</span>; [<span class="bp">done</span> |]; <span class="nb">intros</span> H_not_in.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>x ‚àâ l ‚Üí set_add x l = l ++ [x]</span></span></span><br><span><var>H_not_in</var><span class="hyp-type"><b>: </b><span>x ‚àâ a :: l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> decide (x = a) <span class="kr">then</span> a :: l <span class="kr">else</span> a :: set_add x l) =
a :: l ++ [x]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chka4" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chka4"><span class="nb">rewrite</span> decide_False; <span class="nb">cycle</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>x ‚àâ l ‚Üí set_add x l = l ++ [x]</span></span></span><br><span><var>H_not_in</var><span class="hyp-type"><b>: </b><span>x ‚àâ a :: l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚â† a</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chka5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>x ‚àâ l ‚Üí set_add x l = l ++ [x]</span></span></span><br><span><var>H_not_in</var><span class="hyp-type"><b>: </b><span>x ‚àâ a :: l</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chka5"><hr></label><div class="goal-conclusion">a :: set_add x l = a :: l ++ [x]</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chka6" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chka6">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>x ‚àâ l ‚Üí set_add x l = l ++ [x]</span></span></span><br><span><var>H_not_in</var><span class="hyp-type"><b>: </b><span>x ‚àâ a :: l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚â† a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> -&gt;; <span class="nb">apply</span> H_not_in; <span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chka7" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chka7">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>x ‚àâ l ‚Üí set_add x l = l ++ [x]</span></span></span><br><span><var>H_not_in</var><span class="hyp-type"><b>: </b><span>x ‚àâ a :: l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a :: set_add x l = a :: l ++ [x]</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> elem_of_cons <span class="kr">in</span> H_not_in; <span class="nb">rewrite</span> IHl; itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chka8" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chka8"><span class="kn">Lemma</span> <span class="nf">set_remove_not_elem_of</span> `{EqDecision A} : <span class="kr">forall</span> <span class="nv">x</span> (<span class="nv">s</span> : list A),
  x ‚àâ s -&gt;
  set_remove x s = s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">x</span> : A) (<span class="nv">s</span> : list A), x ‚àâ s ‚Üí set_remove x s = s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chka9" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chka9"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">x</span> : A) (<span class="nv">s</span> : list A), x ‚àâ s ‚Üí set_remove x s = s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkaa" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkaa"><span class="nb">induction</span> s; <span class="nb">cbn</span>; <span class="nb">intros</span>; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>x ‚àâ s ‚Üí set_remove x s = s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ‚àâ a :: s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> decide (x = a) <span class="kr">then</span> s <span class="kr">else</span> a :: set_remove x s) =
a :: s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkab" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkab"><span class="nb">rewrite</span> decide_False; <span class="nb">cycle</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>x ‚àâ s ‚Üí set_remove x s = s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ‚àâ a :: s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚â† a</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chkac" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>x ‚àâ s ‚Üí set_remove x s = s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ‚àâ a :: s</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chkac"><hr></label><div class="goal-conclusion">a :: set_remove x s = a :: s</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkad" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkad">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>x ‚àâ s ‚Üí set_remove x s = s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ‚àâ a :: s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚â† a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> -&gt;; <span class="bp">contradict</span> H; <span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkae" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkae">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>x ‚àâ s ‚Üí set_remove x s = s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ‚àâ a :: s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a :: set_remove x s = a :: s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkaf" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkaf"><span class="nb">rewrite</span> IHs; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>x ‚àâ s ‚Üí set_remove x s = s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ‚àâ a :: s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àâ s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> elem_of_cons <span class="kr">in</span> H; itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkb0" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkb0"><span class="kn">Lemma</span> <span class="nf">set_remove_elim</span> `{EqDecision A} : <span class="kr">forall</span> <span class="nv">x</span> (<span class="nv">s</span> : list A),
  NoDup s -&gt; x ‚àâ set_remove x s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">x</span> : A) (<span class="nv">s</span> : list A), NoDup s ‚Üí x ‚àâ set_remove x s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkb1" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkb1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">x</span> : A) (<span class="nv">s</span> : list A), NoDup s ‚Üí x ‚àâ set_remove x s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> x s HND Hnelem; <span class="nb">apply</span> set_remove_iff <span class="kr">in</span> Hnelem; itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkb2" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkb2"><span class="kn">Lemma</span> <span class="nf">set_remove_first</span> `{EqDecision A} : <span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> (<span class="nv">s</span> : list A),
  x = y -&gt; set_remove x (y :: s) = s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">x</span> <span class="nv">y</span> : A) (<span class="nv">s</span> : list A),
  x = y ‚Üí set_remove x (y :: s) = s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkb3" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkb3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">x</span> <span class="nv">y</span> : A) (<span class="nv">s</span> : list A),
  x = y ‚Üí set_remove x (y :: s) = s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> x y s -&gt;; <span class="nb">cbn</span>; <span class="nb">rewrite</span> decide_True.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkb4" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkb4"><span class="kn">Lemma</span> <span class="nf">set_remove_nodup_1</span> `{EqDecision A} : <span class="kr">forall</span> <span class="nv">x</span> (<span class="nv">s</span> : list A),
  NoDup (set_remove x s) -&gt;
  x ‚àâ set_remove x s -&gt;
  NoDup s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">x</span> : A) (<span class="nv">s</span> : list A),
  NoDup (set_remove x s)
  ‚Üí x ‚àâ set_remove x s ‚Üí NoDup s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkb5" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkb5"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">x</span> : A) (<span class="nv">s</span> : list A),
  NoDup (set_remove x s)
  ‚Üí x ‚àâ set_remove x s ‚Üí NoDup s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkb6" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkb6"><span class="nb">induction</span> s; <span class="nb">intros</span>; [<span class="bp">by</span> <span class="nb">constructor</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x s)
‚Üí x ‚àâ set_remove x s ‚Üí NoDup s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x (a :: s))</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x ‚àâ set_remove x (a :: s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (a :: s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkb7" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkb7"><span class="nb">simpl</span> <span class="kr">in</span> H0; <span class="nb">destruct</span> (decide (x = a)); <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove a (a :: s))</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove a s)
‚Üí a ‚àâ set_remove a s ‚Üí NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>a ‚àâ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (a :: s)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chkb8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x s)
‚Üí x ‚àâ set_remove x s ‚Üí NoDup s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x (a :: s))</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ‚â† a</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x ‚àâ a :: set_remove x s</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chkb8"><hr></label><div class="goal-conclusion">NoDup (a :: s)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkb9" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkb9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove a (a :: s))</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove a s)
‚Üí a ‚àâ set_remove a s ‚Üí NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>a ‚àâ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (a :: s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">cbn</span> <span class="kr">in</span> H; <span class="nb">rewrite</span> decide_True <span class="kr">in</span> H; <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkba" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkba">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x s)
‚Üí x ‚àâ set_remove x s ‚Üí NoDup s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x (a :: s))</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ‚â† a</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x ‚àâ a :: set_remove x s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (a :: s)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkbb" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkbb"><span class="nb">rewrite</span> elem_of_cons <span class="kr">in</span> H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x s)
‚Üí x ‚àâ set_remove x s ‚Üí NoDup s</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x (a :: s))</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ‚â† a</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>¬¨ (x = a ‚à® x ‚àà set_remove x s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (a :: s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkbc" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkbc"><span class="nb">simpl</span> <span class="kr">in</span> H; <span class="nb">rewrite</span> decide_False <span class="kr">in</span> H <span class="bp">by</span> <span class="bp">done</span>; <span class="nb">inversion</span> H; <span class="nb">subst</span>; <span class="nb">clear</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x s)
‚Üí x ‚àâ set_remove x s ‚Üí NoDup s</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ‚â† a</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>¬¨ (x = a ‚à® x ‚àà set_remove x s)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>a ‚àâ set_remove x s</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (a :: s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkbd" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkbd"><span class="nb">constructor</span>; [| <span class="bp">by</span> <span class="nb">firstorder</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x s)
‚Üí x ‚àâ set_remove x s ‚Üí NoDup s</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ‚â† a</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>¬¨ (x = a ‚à® x ‚àà set_remove x s)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>a ‚àâ set_remove x s</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>NoDup (set_remove x s)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àâ s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intro</span> Ha; <span class="nb">apply</span> (set_remove_3 _ x) <span class="kr">in</span> Ha; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkbe" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkbe"><span class="kn">Lemma</span> <span class="nf">set_remove_elem_of_iff</span> `{EqDecision A} :  <span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> (<span class="nv">s</span> : list A),
  NoDup s -&gt;
  y ‚àà s -&gt;
  x ‚àà s &lt;-&gt; x = y \/ x ‚àà set_remove y s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">x</span> <span class="nv">y</span> : A) (<span class="nv">s</span> : list A),
  NoDup s ‚Üí y ‚àà s ‚Üí x ‚àà s ‚Üî x = y ‚à® x ‚àà set_remove y s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkbf" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkbf"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">x</span> <span class="nv">y</span> : A) (<span class="nv">s</span> : list A),
  NoDup s ‚Üí y ‚àà s ‚Üí x ‚àà s ‚Üî x = y ‚à® x ‚àà set_remove y s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkc0" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkc0"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>y ‚àà s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà s ‚Üî x = y ‚à® x ‚àà set_remove y s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkc1" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkc1"><span class="nb">split</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>y ‚àà s</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àà s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x = y ‚à® x ‚àà set_remove y s</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chkc2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>y ‚àà s</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x = y ‚à® x ‚àà set_remove y s</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chkc2"><hr></label><div class="goal-conclusion">x ‚àà s</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkc3" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkc3">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>y ‚àà s</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àà s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x = y ‚à® x ‚àà set_remove y s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkc4" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkc4"><span class="nb">destruct</span> (decide (x = y)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>y ‚àà s</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àà s</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>x = y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x = y ‚à® x ‚àà set_remove y s</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chkc5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>y ‚àà s</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àà s</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ‚â† y</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chkc5"><hr></label><div class="goal-conclusion">x = y ‚à® x ‚àà set_remove y s</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkc6" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkc6">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>y ‚àà s</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àà s</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>x = y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x = y ‚à® x ‚àà set_remove y s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkc7" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkc7">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>y ‚àà s</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àà s</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ‚â† y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x = y ‚à® x ‚àà set_remove y s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">right</span>; <span class="nb">apply</span> set_remove_3.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkc8" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkc8">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>y ‚àà s</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x = y ‚à® x ‚àà set_remove y s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkc9" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkc9"><span class="nb">destruct</span> H1 <span class="kr">as</span> [Heq | Hin].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>y ‚àà s</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>x = y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà s</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chkca" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>y ‚àà s</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ‚àà set_remove y s</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chkca"><hr></label><div class="goal-conclusion">x ‚àà s</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkcb" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkcb">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>y ‚àà s</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>x = y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">subst</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkcc" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkcc">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>y ‚àà s</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x ‚àà set_remove y s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> set_remove_1 <span class="kr">in</span> Hin.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkcd" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkcd"><span class="kn">Lemma</span> <span class="nf">set_add_length</span>
  `{EqDecision A}
  (x : A)
  (s : <span class="nb">set</span> A)
  (Hx : x ‚àâ s)
  : S (length s) = length (set_add x s).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ‚àâ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S (length s) = length (set_add x s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkce" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkce"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ‚àâ s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S (length s) = length (set_add x s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkcf" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkcf"><span class="nb">revert</span> x Hx.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àâ s ‚Üí S (length s) = length (set_add x s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkd0" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkd0"><span class="nb">induction</span> s; <span class="nb">cbn</span>; <span class="nb">intros</span>; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A,
  x ‚àâ s ‚Üí S (length s) = length (set_add x s)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ‚àâ a :: s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S (S (length s)) =
length
  (<span class="kr">if</span> decide (x = a) <span class="kr">then</span> a :: s <span class="kr">else</span> a :: set_add x s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkd1" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkd1"><span class="nb">destruct</span> (decide (x = a)); [<span class="bp">by</span> <span class="nb">subst</span>; <span class="nb">elim</span> Hx; <span class="nb">left</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A,
  x ‚àâ s ‚Üí S (length s) = length (set_add x s)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ‚àâ a :: s</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ‚â† a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S (S (length s)) = length (a :: set_add x s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkd2" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkd2"><span class="nb">cbn</span>; <span class="nb">f_equal</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A,
  x ‚àâ s ‚Üí S (length s) = length (set_add x s)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ‚àâ a :: s</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>x ‚â† a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S (length s) = length (set_add x s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> IHs; <span class="nb">intro</span> Hs; <span class="nb">apply</span> Hx; <span class="nb">right</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkd3" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkd3"><span class="kn">Lemma</span> <span class="nf">set_remove_length</span>
  `{EqDecision A}
  (x : A)
  (s : <span class="nb">set</span> A)
  (Hx : x ‚àà s)
  : length s = S (length (set_remove x s)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ‚àà s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length s = S (length (set_remove x s))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkd4" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkd4"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ‚àà s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length s = S (length (set_remove x s))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkd5" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkd5"><span class="nb">generalize dependent</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">x</span> : A,
  x ‚àà s ‚Üí length s = S (length (set_remove x s))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkd6" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkd6"><span class="nb">induction</span> s; <span class="nb">intros</span>; <span class="nb">inversion</span> Hx; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A,
  x ‚àà s ‚Üí length s = S (length (set_remove x s))</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>a ‚àà a :: s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (a :: s) = S (length (set_remove a (a :: s)))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chkd7" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A,
  x ‚àà s ‚Üí length s = S (length (set_remove x s))</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ‚àà a :: s</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àà s</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chkd7"><hr></label><div class="goal-conclusion">length (a :: s) = S (length (set_remove x (a :: s)))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkd8" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkd8">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A,
  x ‚àà s ‚Üí length s = S (length (set_remove x s))</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>a ‚àà a :: s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (a :: s) = S (length (set_remove a (a :: s)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> set_remove_first.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkd9" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkd9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHs</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A,
  x ‚àà s ‚Üí length s = S (length (set_remove x s))</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>x ‚àà a :: s</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àà s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (a :: s) = S (length (set_remove x (a :: s)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">cbn</span>; <span class="nb">destruct</span> (decide (x = a)); [| <span class="nb">cbn</span>; <span class="nb">rewrite</span> &lt;- IHs].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkda" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkda"><span class="kn">Lemma</span> <span class="nf">set_eq_remove</span> `{EqDecision A} : <span class="kr">forall</span> <span class="nv">x</span> (<span class="nv">s1</span> <span class="nv">s2</span> : list A),
  NoDup s1 -&gt;
  NoDup s2 -&gt;
  set_eq s1 s2 -&gt;
  set_eq (set_remove x s1) (set_remove x s2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">x</span> : A) (<span class="nv">s1</span> <span class="nv">s2</span> : list A),
  NoDup s1
  ‚Üí NoDup s2
    ‚Üí set_eq s1 s2
      ‚Üí set_eq (set_remove x s1) (set_remove x s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkdb" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkdb"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">x</span> : A) (<span class="nv">s1</span> <span class="nv">s2</span> : list A),
  NoDup s1
  ‚Üí NoDup s2
    ‚Üí set_eq s1 s2
      ‚Üí set_eq (set_remove x s1) (set_remove x s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkdc" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkdc"><span class="nb">intros</span> x s1 s2 HND1 HND2 [].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HND1</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>HND2</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>s1 ‚äÜ s2</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>s2 ‚äÜ s1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq (set_remove x s1) (set_remove x s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">split</span>; <span class="nb">intros</span> a Hin; <span class="nb">rewrite</span> set_remove_iff <span class="kr">in</span> *; itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkdd" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkdd"><span class="kn">Lemma</span> <span class="nf">subseteq_remove_union</span> `{EqDecision A} : <span class="kr">forall</span> <span class="nv">x</span> (<span class="nv">s1</span> <span class="nv">s2</span> : list A),
  NoDup s1 -&gt;
  NoDup s2 -&gt;
  set_remove x (set_union s1 s2) ‚äÜ
  set_union s1 (set_remove x s2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">x</span> : A) (<span class="nv">s1</span> <span class="nv">s2</span> : list A),
  NoDup s1
  ‚Üí NoDup s2
    ‚Üí set_remove x (set_union s1 s2)
      ‚äÜ set_union s1 (set_remove x s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkde" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkde"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">x</span> : A) (<span class="nv">s1</span> <span class="nv">s2</span> : list A),
  NoDup s1
  ‚Üí NoDup s2
    ‚Üí set_remove x (set_union s1 s2)
      ‚äÜ set_union s1 (set_remove x s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkdf" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkdf"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_remove x (set_union s1 s2)
‚äÜ set_union s1 (set_remove x s2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chke0" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chke0"><span class="nb">intros</span> y Hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>y ‚àà set_remove x (set_union s1 s2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà set_union s1 (set_remove x s2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chke1" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chke1"><span class="nb">apply</span> set_remove_iff <span class="kr">in</span> Hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>y ‚àà set_union s1 s2 ‚àß y ‚â† x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà set_union s1 (set_remove x s2)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chke2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>y ‚àà set_remove x (set_union s1 s2)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">l</span> : <span class="nb">set</span> A),
  NoDup l ‚Üí a ‚àà set_remove b l ‚Üí a ‚àà l ‚àß a ‚â† b</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chke2"><hr></label><div class="goal-conclusion">NoDup (set_union s1 s2)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chke3" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chke3">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>y ‚àà set_union s1 s2 ‚àß y ‚â† x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà set_union s1 (set_remove x s2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chke4" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chke4"><span class="nb">apply</span> set_union_intro.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>y ‚àà set_union s1 s2 ‚àß y ‚â† x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà s1 ‚à® y ‚àà set_remove x s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chke5" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chke5"><span class="nb">destruct</span> Hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>y ‚àà set_union s1 s2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>y ‚â† x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà s1 ‚à® y ‚àà set_remove x s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chke6" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chke6"><span class="nb">apply</span> set_union_elim <span class="kr">in</span> H1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>y ‚àà s1 ‚à® y ‚àà s2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>y ‚â† x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà s1 ‚à® y ‚àà set_remove x s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> set_remove_iff; itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chke7" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chke7">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>y ‚àà set_remove x (set_union s1 s2)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">l</span> : <span class="nb">set</span> A),
  NoDup l ‚Üí a ‚àà set_remove b l ‚Üí a ‚àà l ‚àß a ‚â† b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (set_union s1 s2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> set_union_nodup.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chke8" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chke8"><span class="kn">Lemma</span> <span class="nf">set_eq_remove_union_elem_of</span>  `{EqDecision A} : <span class="kr">forall</span> <span class="nv">x</span> (<span class="nv">s1</span> <span class="nv">s2</span> : list A),
  NoDup s1 -&gt;
  NoDup s2 -&gt;
  x ‚àà s1 -&gt;
  set_eq (set_union s1 (set_remove x s2)) (set_union s1 s2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">x</span> : A) (<span class="nv">s1</span> <span class="nv">s2</span> : list A),
  NoDup s1
  ‚Üí NoDup s2
    ‚Üí x ‚àà s1
      ‚Üí set_eq (set_union s1 (set_remove x s2))
          (set_union s1 s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chke9" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chke9"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">x</span> : A) (<span class="nv">s1</span> <span class="nv">s2</span> : list A),
  NoDup s1
  ‚Üí NoDup s2
    ‚Üí x ‚àà s1
      ‚Üí set_eq (set_union s1 (set_remove x s2))
          (set_union s1 s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkea" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkea"><span class="nb">split</span>; <span class="nb">intros</span> msg Hin; <span class="nb">apply</span> set_union_iff; <span class="nb">apply</span> set_union_iff <span class="kr">in</span> Hin
  ; <span class="nb">destruct</span> Hin; <span class="kp">try</span> <span class="bp">by</span> <span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àà s1</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ‚àà set_remove x s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ‚àà s1 ‚à® msg ‚àà s2</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chkeb" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àà s1</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ‚àà s2</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chkeb"><hr></label><div class="goal-conclusion">msg ‚àà s1 ‚à® msg ‚àà set_remove x s2</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkec" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkec">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àà s1</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ‚àà set_remove x s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ‚àà s1 ‚à® msg ‚àà s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> set_remove_iff <span class="kr">in</span> H2; itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chked" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chked">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àà s1</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ‚àà s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ‚àà s1 ‚à® msg ‚àà set_remove x s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkee" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkee"><span class="nb">destruct</span> (decide (msg = x)); <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àà s1</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x ‚àà s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà s1 ‚à® x ‚àà set_remove x s2</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chkef" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àà s1</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ‚àà s2</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>msg ‚â† x</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chkef"><hr></label><div class="goal-conclusion">msg ‚àà s1 ‚à® msg ‚àà set_remove x s2</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkf0" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkf0">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àà s1</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x ‚àà s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà s1 ‚à® x ‚àà set_remove x s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkf1" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkf1">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àà s1</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ‚àà s2</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>msg ‚â† x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ‚àà s1 ‚à® msg ‚àà set_remove x s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">right</span>; <span class="nb">apply</span> set_remove_iff.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkf2" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkf2"><span class="kn">Lemma</span> <span class="nf">set_eq_remove_union_not_elem_of</span>  `{EqDecision A} : <span class="kr">forall</span> <span class="nv">x</span> (<span class="nv">s1</span> <span class="nv">s2</span> : list A),
  NoDup s1 -&gt;
  NoDup s2 -&gt;
  x ‚àâ s1 -&gt;
  set_eq (set_union s1 (set_remove x s2)) (set_remove x (set_union s1 s2)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">x</span> : A) (<span class="nv">s1</span> <span class="nv">s2</span> : list A),
  NoDup s1
  ‚Üí NoDup s2
    ‚Üí x ‚àâ s1
      ‚Üí set_eq (set_union s1 (set_remove x s2))
          (set_remove x (set_union s1 s2))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkf3" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkf3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">x</span> : A) (<span class="nv">s1</span> <span class="nv">s2</span> : list A),
  NoDup s1
  ‚Üí NoDup s2
    ‚Üí x ‚àâ s1
      ‚Üí set_eq (set_union s1 (set_remove x s2))
          (set_remove x (set_union s1 s2))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkf4" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkf4"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àâ s1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq (set_union s1 (set_remove x s2))
  (set_remove x (set_union s1 s2))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkf5" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkf5"><span class="nb">assert</span> (HnodupUs1s2 := H0).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àâ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq (set_union s1 (set_remove x s2))
  (set_remove x (set_union s1 s2))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkf6" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkf6"><span class="nb">apply</span> (set_union_nodup _ _ H) <span class="kr">in</span> HnodupUs1s2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àâ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq (set_union s1 (set_remove x s2))
  (set_remove x (set_union s1 s2))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkf7" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkf7"><span class="nb">split</span>; <span class="nb">intros</span> msg Hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àâ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>msg ‚àà set_union s1 (set_remove x s2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ‚àà set_remove x (set_union s1 s2)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chkf8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àâ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>msg ‚àà set_remove x (set_union s1 s2)</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chkf8"><hr></label><div class="goal-conclusion">msg ‚àà set_union s1 (set_remove x s2)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkf9" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkf9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àâ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>msg ‚àà set_union s1 (set_remove x s2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ‚àà set_remove x (set_union s1 s2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkfa" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkfa"><span class="nb">apply</span> set_remove_iff; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àâ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>msg ‚àà set_union s1 (set_remove x s2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ‚àà set_union s1 s2 ‚àß msg ‚â† x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkfb" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkfb"><span class="nb">apply</span> set_union_iff <span class="kr">in</span> Hin <span class="kr">as</span> []; <span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àâ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ‚àà s1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ‚àà set_union s1 s2</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chkfc" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àâ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ‚àà s1</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chkfc"><hr></label><div class="goal-conclusion">msg ‚â† x</div></blockquote><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chkfd" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àâ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ‚àà set_remove x s2</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chkfd"><hr></label><div class="goal-conclusion">msg ‚àà set_union s1 s2</div></blockquote><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chkfe" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àâ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ‚àà set_remove x s2</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chkfe"><hr></label><div class="goal-conclusion">msg ‚â† x</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chkff" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chkff">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àâ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ‚àà s1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ‚àà set_union s1 s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> set_union_iff; <span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk100" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk100">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àâ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ‚àà s1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ‚â† x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intro</span>; <span class="nb">subst</span>; <span class="nb">apply</span> H1.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk101" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk101">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àâ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ‚àà set_remove x s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ‚àà set_union s1 s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk102" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk102"><span class="nb">apply</span> set_remove_iff <span class="kr">in</span> H2 <span class="kr">as</span> []; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àâ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ‚àà s2</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>msg ‚â† x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ‚àà set_union s1 s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> set_union_iff; <span class="nb">right</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk103" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk103">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àâ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ‚àà set_remove x s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ‚â† x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk104" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk104"><span class="nb">intro</span>; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àâ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>x ‚àà set_remove x s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> set_remove_iff <span class="kr">in</span> H2; itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk105" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk105">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àâ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>msg ‚àà set_remove x (set_union s1 s2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ‚àà set_union s1 (set_remove x s2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk106" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk106"><span class="nb">apply</span> set_union_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àâ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>msg ‚àà set_remove x (set_union s1 s2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ‚àà s1 ‚à® msg ‚àà set_remove x s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk107" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk107"><span class="nb">apply</span> set_remove_iff <span class="kr">in</span> Hin <span class="kr">as</span> []; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àâ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ‚àà set_union s1 s2</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>msg ‚â† x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ‚àà s1 ‚à® msg ‚àà set_remove x s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk108" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk108"><span class="nb">apply</span> set_union_iff <span class="kr">in</span> H2 <span class="kr">as</span> []; [<span class="bp">by</span> <span class="nb">left</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>x ‚àâ s1</span></span></span><br><span><var>HnodupUs1s2</var><span class="hyp-type"><b>: </b><span>NoDup (set_union s1 s2)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>msg ‚àà s2</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>msg ‚â† x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">msg ‚àà s1 ‚à® msg ‚àà set_remove x s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">right</span>; <span class="nb">apply</span> set_remove_iff.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk109" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk109"><span class="kn">Lemma</span> <span class="nf">diff_app_nodup</span> `{EqDecision A} : <span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : list A),
  NoDup s1 -&gt;
  NoDup s2 -&gt;
  NoDup (set_diff s1 s2 ++ s2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : list A,
  NoDup s1 ‚Üí NoDup s2 ‚Üí NoDup (set_diff s1 s2 ++ s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk10a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk10a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s1</span> <span class="nv">s2</span> : list A,
  NoDup s1 ‚Üí NoDup s2 ‚Üí NoDup (set_diff s1 s2 ++ s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk10b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk10b"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (set_diff s1 s2 ++ s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk10c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk10c"><span class="nb">apply</span> NoDup_app; split_and!; [| | <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (set_diff s1 s2)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk10d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk10d"><hr></label><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà set_diff s1 s2 ‚Üí x ‚àâ s2</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk10e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk10e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (set_diff s1 s2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> set_diff_nodup.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk10f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk10f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>NoDup s1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà set_diff s1 s2 ‚Üí x ‚àâ s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> a; <span class="nb">apply</span> (set_diff_elim2 a s1).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk110" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk110"><span class="kn">Lemma</span> <span class="nf">add_remove_inverse</span> `{EqDecision X} :
  <span class="kr">forall</span> (<span class="nv">lv</span> : list X) (<span class="nv">v</span> : X),
    v ‚àâ lv -&gt;
    set_remove v (set_add v lv) = lv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">lv</span> : list X) (<span class="nv">v</span> : X),
  v ‚àâ lv ‚Üí set_remove v (set_add v lv) = lv</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk111" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk111"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">lv</span> : list X) (<span class="nv">v</span> : X),
  v ‚àâ lv ‚Üí set_remove v (set_add v lv) = lv</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk112" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk112"><span class="nb">induction</span> lv <span class="kr">as</span> [| hd tl IHlv]; <span class="nb">cbn</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>v ‚àâ []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> decide (v = v) <span class="kr">then</span> [] <span class="kr">else</span> v :: empty_set) = []</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk113" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHlv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">v</span> : X,
  v ‚àâ tl ‚Üí set_remove v (set_add v tl) = tl</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>v ‚àâ hd :: tl</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk113"><hr></label><div class="goal-conclusion">set_remove v
  (<span class="kr">if</span> decide (v = hd)
   <span class="kr">then</span> hd :: tl
   <span class="kr">else</span> hd :: set_add v tl) = 
hd :: tl</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk114" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk114">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>v ‚àâ []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> decide (v = v) <span class="kr">then</span> [] <span class="kr">else</span> v :: empty_set) = []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> decide_True.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk115" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk115">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHlv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">v</span> : X,
  v ‚àâ tl ‚Üí set_remove v (set_add v tl) = tl</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>v ‚àâ hd :: tl</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_remove v
  (<span class="kr">if</span> decide (v = hd)
   <span class="kr">then</span> hd :: tl
   <span class="kr">else</span> hd :: set_add v tl) = 
hd :: tl</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk116" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk116"><span class="nb">rewrite</span> elem_of_cons <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHlv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">v</span> : X,
  v ‚àâ tl ‚Üí set_remove v (set_add v tl) = tl</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>¬¨ (v = hd ‚à® v ‚àà tl)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_remove v
  (<span class="kr">if</span> decide (v = hd)
   <span class="kr">then</span> hd :: tl
   <span class="kr">else</span> hd :: set_add v tl) = 
hd :: tl</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk117" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk117"><span class="nb">destruct</span> (decide (v = hd)) <span class="nb">eqn</span>: Heq; <span class="nb">subst</span>; <span class="nb">cbn</span>; [<span class="bp">by</span> itauto |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision X</span></span></span><br><span><var>hd</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>tl</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>IHlv</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">v</span> : X,
  v ‚àâ tl ‚Üí set_remove v (set_add v tl) = tl</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>¬¨ (v = hd ‚à® v ‚àà tl)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>v ‚â† hd</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>decide (v = hd) = <span class="nb">right</span> n</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> decide (v = hd)
 <span class="kr">then</span> set_add v tl
 <span class="kr">else</span> hd :: set_remove v (set_add v tl)) = 
hd :: tl</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> Heq, IHlv; itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk118" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk118"><span class="kn">Lemma</span> <span class="nf">set_union_iterated_empty</span> `{EqDecision A} :
  <span class="kr">forall</span> <span class="nv">ss</span> : list (<span class="nb">set</span> A),
    (<span class="kr">forall</span> <span class="nv">s</span> : list A, s ‚àà ss -&gt; s = []) -&gt; fold_right set_union [] ss = [].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">ss</span> : list (<span class="nb">set</span> A),
  (<span class="kr">‚àÄ</span> <span class="nv">s</span> : list A, s ‚àà ss ‚Üí s = [])
  ‚Üí foldr set_union [] ss = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk119" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk119"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">ss</span> : list (<span class="nb">set</span> A),
  (<span class="kr">‚àÄ</span> <span class="nv">s</span> : list A, s ‚àà ss ‚Üí s = [])
  ‚Üí foldr set_union [] ss = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk11a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk11a"><span class="nb">induction</span> ss; [<span class="bp">done</span> |]; <span class="nb">cbn</span>; <span class="nb">intros</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">‚àÄ</span> <span class="nv">s</span> : list A, s ‚àà ss ‚Üí s = [])
‚Üí foldr set_union [] ss = []</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : list A, s ‚àà a :: ss ‚Üí s = []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_union a (foldr set_union [] ss) = []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk11b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk11b"><span class="nb">rewrite</span> IHss; <span class="nb">cycle</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">‚àÄ</span> <span class="nv">s</span> : list A, s ‚àà ss ‚Üí s = [])
‚Üí foldr set_union [] ss = []</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : list A, s ‚àà a :: ss ‚Üí s = []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : list A, s ‚àà ss ‚Üí s = []</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk11c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">‚àÄ</span> <span class="nv">s</span> : list A, s ‚àà ss ‚Üí s = [])
‚Üí foldr set_union [] ss = []</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : list A, s ‚àà a :: ss ‚Üí s = []</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk11c"><hr></label><div class="goal-conclusion">set_union a [] = []</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk11d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk11d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">‚àÄ</span> <span class="nv">s</span> : list A, s ‚àà ss ‚Üí s = [])
‚Üí foldr set_union [] ss = []</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : list A, s ‚àà a :: ss ‚Üí s = []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">s</span> : list A, s ‚àà ss ‚Üí s = []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> s Hel; <span class="nb">apply</span> H; <span class="nb">right</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk11e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk11e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>IHss</var><span class="hyp-type"><b>: </b><span>(<span class="kr">‚àÄ</span> <span class="nv">s</span> : list A, s ‚àà ss ‚Üí s = [])
‚Üí foldr set_union [] ss = []</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">s</span> : list A, s ‚àà a :: ss ‚Üí s = []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_union a [] = []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">cbn</span>; <span class="nb">apply</span> H; <span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  For each element <code>X</code> of <code>l1</code>, exactly one occurrence of <code>X</code> is removed
  from <code>l2</code>. If no such occurrence exists, nothing happens.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">set_remove_list</span> `{EqDecision A} (l1 l2 : list A) : list A :=
  fold_right set_remove l2 l1.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk11f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk11f"><span class="kn">Example</span> <span class="nf">set_remove_list1</span> : set_remove_list [<span class="mi">3</span>; <span class="mi">1</span>; <span class="mi">3</span>] [<span class="mi">1</span>; <span class="mi">1</span>; <span class="mi">2</span>; <span class="mi">3</span>; <span class="mi">3</span>; <span class="mi">3</span>; <span class="mi">3</span>] = [<span class="mi">1</span>; <span class="mi">2</span>; <span class="mi">3</span>; <span class="mi">3</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">set_remove_list [<span class="mi">3</span>; <span class="mi">1</span>; <span class="mi">3</span>] [<span class="mi">1</span>; <span class="mi">1</span>; <span class="mi">2</span>; <span class="mi">3</span>; <span class="mi">3</span>; <span class="mi">3</span>; <span class="mi">3</span>] =
[<span class="mi">1</span>; <span class="mi">2</span>; <span class="mi">3</span>; <span class="mi">3</span>]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk120" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk120"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">set_remove_list [<span class="mi">3</span>; <span class="mi">1</span>; <span class="mi">3</span>] [<span class="mi">1</span>; <span class="mi">1</span>; <span class="mi">2</span>; <span class="mi">3</span>; <span class="mi">3</span>; <span class="mi">3</span>; <span class="mi">3</span>] =
[<span class="mi">1</span>; <span class="mi">2</span>; <span class="mi">3</span>; <span class="mi">3</span>]</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">done</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk121" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk121"><span class="kn">Example</span> <span class="nf">set_remove_list2</span> : set_remove_list [<span class="mi">4</span>] [<span class="mi">1</span>; <span class="mi">2</span>; <span class="mi">3</span>] = [<span class="mi">1</span>; <span class="mi">2</span>; <span class="mi">3</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">set_remove_list [<span class="mi">4</span>] [<span class="mi">1</span>; <span class="mi">2</span>; <span class="mi">3</span>] = [<span class="mi">1</span>; <span class="mi">2</span>; <span class="mi">3</span>]</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk122" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk122"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">set_remove_list [<span class="mi">4</span>] [<span class="mi">1</span>; <span class="mi">2</span>; <span class="mi">3</span>] = [<span class="mi">1</span>; <span class="mi">2</span>; <span class="mi">3</span>]</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">done</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk123" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk123"><span class="kn">Lemma</span> <span class="nf">set_remove_list_1</span>
  `{EqDecision A}
  (a : A)
  (l1 l2 : list A)
  (Hin : a ‚àà set_remove_list l1 l2) :
  a ‚àà l2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a ‚àà set_remove_list l1 l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà l2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk124" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk124"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a ‚àà set_remove_list l1 l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà l2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk125" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk125"><span class="nb">unfold</span> set_remove_list <span class="kr">in</span> Hin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a ‚àà foldr set_remove l2 l1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà l2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk126" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk126"><span class="nb">induction</span> l1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a ‚àà foldr set_remove l2 []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà l2</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk127" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a ‚àà foldr set_remove l2 (a0 :: l1)</span></span></span><br><span><var>IHl1</var><span class="hyp-type"><b>: </b><span>a ‚àà foldr set_remove l2 l1 ‚Üí a ‚àà l2</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk127"><hr></label><div class="goal-conclusion">a ‚àà l2</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk128" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk128">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a ‚àà foldr set_remove l2 []</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà l2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">simpl</span> <span class="kr">in</span> Hin; itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk129" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk129">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a ‚àà foldr set_remove l2 (a0 :: l1)</span></span></span><br><span><var>IHl1</var><span class="hyp-type"><b>: </b><span>a ‚àà foldr set_remove l2 l1 ‚Üí a ‚àà l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà l2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">simpl</span> <span class="kr">in</span> Hin; <span class="nb">apply</span> set_remove_1, IHl1 <span class="kr">in</span> Hin.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk12a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk12a"><span class="kn">Lemma</span> <span class="nf">set_prod_nodup</span> `(s1 : <span class="nb">set</span> A) `(s2 : <span class="nb">set</span> B) :
  NoDup s1 -&gt;
  NoDup s2 -&gt;
  NoDup (set_prod s1 s2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup s1 ‚Üí NoDup s2 ‚Üí NoDup (set_prod s1 s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk12b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk12b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup s1 ‚Üí NoDup s2 ‚Üí NoDup (set_prod s1 s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk12c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk12c"><span class="nb">intros</span> Hs1 H22; <span class="nb">induction</span> Hs1; <span class="nb">cbn</span>; [<span class="bp">by</span> <span class="nb">constructor</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ‚àâ l</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>IHHs1</var><span class="hyp-type"><b>: </b><span>NoDup (set_prod l s2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (map (<span class="kr">Œª</span> <span class="nv">y</span> : B, (x, y)) s2 ++ set_prod l s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk12d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk12d"><span class="nb">apply</span> NoDup_app; split_and!; [| | <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ‚àâ l</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>IHHs1</var><span class="hyp-type"><b>: </b><span>NoDup (set_prod l s2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (map (<span class="kr">Œª</span> <span class="nv">y</span> : B, (x, y)) s2)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk12e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ‚àâ l</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>IHHs1</var><span class="hyp-type"><b>: </b><span>NoDup (set_prod l s2)</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk12e"><hr></label><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">x0</span> : A * B,
  x0 ‚àà map (<span class="kr">Œª</span> <span class="nv">y</span> : B, (x, y)) s2 ‚Üí x0 ‚àâ set_prod l s2</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk12f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk12f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ‚àâ l</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>IHHs1</var><span class="hyp-type"><b>: </b><span>NoDup (set_prod l s2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup (map (<span class="kr">Œª</span> <span class="nv">y</span> : B, (x, y)) s2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> NoDup_fmap; [<span class="bp">congruence</span> |].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk130" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk130">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ‚àâ l</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>IHHs1</var><span class="hyp-type"><b>: </b><span>NoDup (set_prod l s2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">x0</span> : A * B,
  x0 ‚àà map (<span class="kr">Œª</span> <span class="nv">y</span> : B, (x, y)) s2 ‚Üí x0 ‚àâ set_prod l s2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk131" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk131"><span class="nb">intros</span> [a b].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ‚àâ l</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>IHHs1</var><span class="hyp-type"><b>: </b><span>NoDup (set_prod l s2)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(a, b) ‚àà map (<span class="kr">Œª</span> <span class="nv">y</span> : B, (x, y)) s2
‚Üí (a, b) ‚àâ set_prod l s2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk132" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk132"><span class="nb">rewrite</span> elem_of_list_fmap, elem_of_list_prod.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>s2</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ‚àâ l</span></span></span><br><span><var>Hs1</var><span class="hyp-type"><b>: </b><span>NoDup l</span></span></span><br><span><var>H22</var><span class="hyp-type"><b>: </b><span>NoDup s2</span></span></span><br><span><var>IHHs1</var><span class="hyp-type"><b>: </b><span>NoDup (set_prod l s2)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÉ</span> <span class="nv">y</span> : B, (a, b) = (x, y) ‚àß y ‚àà s2)
‚Üí ¬¨ (a ‚àà l ‚àß b ‚àà s2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> [_ [[= -&gt; _] _]] [].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  An alternative to <span class="inlinecode"><span class="id" title="var">set_diff</span></span>.
  Unlike <span class="inlinecode"><span class="id" title="var">set_diff</span></span>, the result may contain
  duplicates if the first argument list <code>l</code> does.

<div class="paragraph"> </div>

  This definition exists to make proving
  <span class="inlinecode"><span class="id" title="var">len_set_diff_decrease</span></span> more convenient,
  because <span class="inlinecode"><span class="id" title="var">length</span></span> of <span class="inlinecode"><span class="id" title="var">filter</span></span> can be simplified
  step by step while doing induction over <code>l</code>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">set_diff_filter</span> `{EqDecision A} (l r : list A) :=
  filter (.‚àâ r) l.</span></span></pre><div class="doc">
  The characteristic membership property, parallel to
  <span class="inlinecode"><span class="id" title="var">set_diff_iff</span></span>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk133" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk133"><span class="kn">Lemma</span> <span class="nf">set_diff_filter_iff</span> `{EqDecision A} (a : A) l r :
  a ‚àà set_diff_filter l r &lt;-&gt; a ‚àà l /\ a ‚àâ r.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà set_diff_filter l r ‚Üî a ‚àà l ‚àß a ‚àâ r</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk134" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk134"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà set_diff_filter l r ‚Üî a ‚àà l ‚àß a ‚àâ r</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk135" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk135"><span class="nb">induction</span> l; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà set_diff_filter [] r ‚Üî a ‚àà [] ‚àß a ‚àâ r</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk136" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>a ‚àà set_diff_filter l r ‚Üî a ‚àà l ‚àß a ‚àâ r</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk136"><hr></label><div class="goal-conclusion">a ‚àà set_diff_filter (a0 :: l) r ‚Üî a ‚àà a0 :: l ‚àß a ‚àâ r</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk137" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk137">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà set_diff_filter [] r ‚Üî a ‚àà [] ‚àß a ‚àâ r</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">cbn</span>; <span class="nb">split</span>; <span class="nb">intros</span>; [<span class="nb">inversion</span> H | itauto].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk138" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk138">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>a ‚àà set_diff_filter l r ‚Üî a ‚àà l ‚àß a ‚àâ r</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà set_diff_filter (a0 :: l) r ‚Üî a ‚àà a0 :: l ‚àß a ‚àâ r</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk139" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk139"><span class="nb">unfold</span> set_diff_filter <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>a ‚àà filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ r) l ‚Üî a ‚àà l ‚àß a ‚àâ r</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ r) (a0 :: l)
‚Üî a ‚àà a0 :: l ‚àß a ‚àâ r</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk13a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk13a"><span class="nb">rewrite</span> filter_cons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>a ‚àà filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ r) l ‚Üî a ‚àà l ‚àß a ‚àâ r</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a
‚àà (<span class="kr">if</span> decide (a0 ‚àâ r)
   <span class="kr">then</span> a0 :: filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ r) l
   <span class="kr">else</span> filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ r) l)
‚Üî a ‚àà a0 :: l ‚àß a ‚àâ r</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk13b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk13b"><span class="nb">destruct</span> (decide (a0 ‚àâ r)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>a ‚àà filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ r) l ‚Üî a ‚àà l ‚àß a ‚àâ r</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>a0 ‚àâ r</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà a0 :: filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ r) l
‚Üî a ‚àà a0 :: l ‚àß a ‚àâ r</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk13c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>a ‚àà filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ r) l ‚Üî a ‚àà l ‚àß a ‚àâ r</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ (a0 ‚àâ r)</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk13c"><hr></label><div class="goal-conclusion">a ‚àà filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ r) l ‚Üî a ‚àà a0 :: l ‚àß a ‚àâ r</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk13d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk13d">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>a ‚àà filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ r) l ‚Üî a ‚àà l ‚àß a ‚àâ r</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>a0 ‚àâ r</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà a0 :: filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ r) l
‚Üî a ‚àà a0 :: l ‚àß a ‚àâ r</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk13e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk13e"><span class="nb">rewrite</span> <span class="mi">2</span> elem_of_cons, IHl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>a ‚àà filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ r) l ‚Üî a ‚àà l ‚àß a ‚àâ r</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>a0 ‚àâ r</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a = a0 ‚à® a ‚àà l ‚àß a ‚àâ r ‚Üî (a = a0 ‚à® a ‚àà l) ‚àß a ‚àâ r</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">split</span>; itauto <span class="bp">congruence</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk13f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk13f">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>a ‚àà filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ r) l ‚Üî a ‚àà l ‚àß a ‚àâ r</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ (a0 ‚àâ r)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ r) l ‚Üî a ‚àà a0 :: l ‚àß a ‚àâ r</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk140" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk140"><span class="nb">rewrite</span> elem_of_cons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>a ‚àà filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ r) l ‚Üî a ‚àà l ‚àß a ‚àâ r</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ (a0 ‚àâ r)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ r) l
‚Üî (a = a0 ‚à® a ‚àà l) ‚àß a ‚àâ r</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">split</span>; itauto <span class="bp">congruence</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk141" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk141"><span class="kn">Lemma</span> <span class="nf">set_diff_filter_nodup</span> `{EqDecision A} (l r : list A) :
  NoDup l -&gt; NoDup (set_diff_filter l r).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>l, r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup l ‚Üí NoDup (set_diff_filter l r)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk142" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk142"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>l, r</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NoDup l ‚Üí NoDup (set_diff_filter l r)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> H; <span class="nb">apply</span> NoDup_filter.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  Prove that subtracting a superset cannot produce
  a smaller result.
  This lemma is used to prove <span class="inlinecode"><span class="id" title="var">len_set_diff_decrease</span></span>.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk143" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk143"><span class="kn">Lemma</span> <span class="nf">len_set_diff_incl_le</span> `{EqDecision A} (l a b : list A)
      (H_subseteq : <span class="kr">forall</span> <span class="nv">x</span>, x ‚àà b -&gt; x ‚àà a) :
  length (set_diff_filter l a) &lt;= length (set_diff_filter l b).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (set_diff_filter l a)
‚â§ length (set_diff_filter l b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk144" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk144"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (set_diff_filter l a)
‚â§ length (set_diff_filter l b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk145" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk145"><span class="nb">induction</span> l; [<span class="bp">done</span> |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a)
‚â§ length (set_diff_filter l b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (set_diff_filter (a0 :: l) a)
‚â§ length (set_diff_filter (a0 :: l) b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk146" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk146"><span class="nb">unfold</span> set_diff_filter.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a)
‚â§ length (set_diff_filter l b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ a) (a0 :: l))
‚â§ length (filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ b) (a0 :: l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk147" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk147"><span class="nb">rewrite</span> <span class="mi">2</span> filter_cons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a)
‚â§ length (set_diff_filter l b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length
  (<span class="kr">if</span> decide (a0 ‚àâ a)
   <span class="kr">then</span> a0 :: filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ a) l
   <span class="kr">else</span> filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ a) l)
‚â§ length
    (<span class="kr">if</span> decide (a0 ‚àâ b)
     <span class="kr">then</span> a0 :: filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ b) l
     <span class="kr">else</span> filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ b) l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk148" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk148"><span class="nb">destruct</span> (decide (a0 ‚àâ a)); <span class="nb">destruct</span> (decide (a0 ‚àâ b)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a)
‚â§ length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>a0 ‚àâ a</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>a0 ‚àâ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (a0 :: filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ a) l)
‚â§ length (a0 :: filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ b) l)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk149" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a)
‚â§ length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>a0 ‚àâ a</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>¬¨ (a0 ‚àâ b)</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk149"><hr></label><div class="goal-conclusion">length (a0 :: filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ a) l)
‚â§ length (filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ b) l)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk14a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a)
‚â§ length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ (a0 ‚àâ a)</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>a0 ‚àâ b</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk14a"><hr></label><div class="goal-conclusion">length (filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ a) l)
‚â§ length (a0 :: filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ b) l)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk14b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a)
‚â§ length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ (a0 ‚àâ a)</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>¬¨ (a0 ‚àâ b)</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk14b"><hr></label><div class="goal-conclusion">length (filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ a) l)
‚â§ length (filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ b) l)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk14c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk14c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a)
‚â§ length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>a0 ‚àâ a</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>a0 ‚àâ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (a0 :: filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ a) l)
‚â§ length (a0 :: filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ b) l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">simpl</span>; <span class="nb">unfold</span> set_diff_filter <span class="kr">in</span> IHl; <span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk14d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk14d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a)
‚â§ length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>a0 ‚àâ a</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>¬¨ (a0 ‚àâ b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (a0 :: filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ a) l)
‚â§ length (filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ b) l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk14e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk14e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a)
‚â§ length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ (a0 ‚àâ a)</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>a0 ‚àâ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ a) l)
‚â§ length (a0 :: filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ b) l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">simpl</span>; <span class="nb">apply</span> le_S, IHl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk14f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk14f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a)
‚â§ length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ (a0 ‚àâ a)</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>¬¨ (a0 ‚àâ b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ a) l)
‚â§ length (filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ b) l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> IHl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  Prove that strictly increasing the set to be subtracted,
  by adding an element actually found in <code>l</code> will decrease
  the size of the result.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk150" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk150"><span class="kn">Lemma</span> <span class="nf">len_set_diff_decrease</span> `{EqDecision A} (new : A) (l a b : list A)
      (H_subseteq : <span class="kr">forall</span> <span class="nv">x</span>, x ‚àà b -&gt; x ‚àà a)
      (H_new_is_new : new ‚àà a /\ new ‚àâ b)
      (H_new_is_relevant : new ‚àà l) :
  length (set_diff_filter l a) &lt; length (set_diff_filter l b).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ‚àà a ‚àß new ‚àâ b</span></span></span><br><span><var>H_new_is_relevant</var><span class="hyp-type"><b>: </b><span>new ‚àà l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk151" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk151"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ‚àà a ‚àß new ‚àâ b</span></span></span><br><span><var>H_new_is_relevant</var><span class="hyp-type"><b>: </b><span>new ‚àà l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk152" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk152"><span class="nb">induction</span> l; [<span class="bp">by</span> <span class="nb">inversion</span> H_new_is_relevant |];
    <span class="nb">apply</span> elem_of_cons <span class="kr">in</span> H_new_is_relevant; <span class="nb">destruct</span> H_new_is_relevant.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ‚àà a ‚àß new ‚àâ b</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>new = a0</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>new ‚àà l
‚Üí length (set_diff_filter l a) &lt;
  length (set_diff_filter l b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (set_diff_filter (a0 :: l) a) &lt;
length (set_diff_filter (a0 :: l) b)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk153" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ‚àà a ‚àß new ‚àâ b</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>new ‚àà l</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>new ‚àà l
‚Üí length (set_diff_filter l a) &lt;
  length (set_diff_filter l b)</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk153"><hr></label><div class="goal-conclusion">length (set_diff_filter (a0 :: l) a) &lt;
length (set_diff_filter (a0 :: l) b)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk154" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk154">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ‚àà a ‚àß new ‚àâ b</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>new = a0</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>new ‚àà l
‚Üí length (set_diff_filter l a) &lt;
  length (set_diff_filter l b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (set_diff_filter (a0 :: l) a) &lt;
length (set_diff_filter (a0 :: l) b)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk155" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk155"><span class="nb">subst</span> a0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ‚àà a ‚àß new ‚àâ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>new ‚àà l
‚Üí length (set_diff_filter l a) &lt;
  length (set_diff_filter l b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (set_diff_filter (new :: l) a) &lt;
length (set_diff_filter (new :: l) b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk156" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk156"><span class="nb">unfold</span> set_diff_filter.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ‚àà a ‚àß new ‚àâ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>new ‚àà l
‚Üí length (set_diff_filter l a) &lt;
  length (set_diff_filter l b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ a) (new :: l)) &lt;
length (filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ b) (new :: l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk157" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk157"><span class="nb">rewrite</span> <span class="mi">2</span> filter_cons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ‚àà a ‚àß new ‚àâ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>new ‚àà l
‚Üí length (set_diff_filter l a) &lt;
  length (set_diff_filter l b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length
  (<span class="kr">if</span> decide (new ‚àâ a)
   <span class="kr">then</span> new :: filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ a) l
   <span class="kr">else</span> filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ a) l) &lt;
length
  (<span class="kr">if</span> decide (new ‚àâ b)
   <span class="kr">then</span> new :: filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ b) l
   <span class="kr">else</span> filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ b) l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk158" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk158"><span class="nb">destruct</span> (decide (new ‚àâ a)); [<span class="bp">by</span> itauto |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ‚àà a ‚àß new ‚àâ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>new ‚àà l
‚Üí length (set_diff_filter l a) &lt;
  length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ (new ‚àâ a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ a) l) &lt;
length
  (<span class="kr">if</span> decide (new ‚àâ b)
   <span class="kr">then</span> new :: filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ b) l
   <span class="kr">else</span> filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ b) l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk159" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk159"><span class="nb">destruct</span> (decide (new ‚àâ b)); [| <span class="bp">by</span> <span class="bp">contradict</span> n0; itauto].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ‚àà a ‚àß new ‚àâ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>new ‚àà l
‚Üí length (set_diff_filter l a) &lt;
  length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ (new ‚àâ a)</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>new ‚àâ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ a) l) &lt;
length (new :: filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ b) l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk15a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk15a"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ‚àà a ‚àß new ‚àâ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>new ‚àà l
‚Üí length (set_diff_filter l a) &lt;
  length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ (new ‚àâ a)</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>new ‚àâ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ a) l) &lt;
S (length (filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ b) l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> le_n_S, len_set_diff_incl_le.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk15b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk15b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ‚àà a ‚àß new ‚àâ b</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>new ‚àà l</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>new ‚àà l
‚Üí length (set_diff_filter l a) &lt;
  length (set_diff_filter l b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (set_diff_filter (a0 :: l) a) &lt;
length (set_diff_filter (a0 :: l) b)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk15c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk15c"><span class="nb">specialize</span> (IHl H); <span class="nb">clear</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ‚àà a ‚àß new ‚àâ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (set_diff_filter (a0 :: l) a) &lt;
length (set_diff_filter (a0 :: l) b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk15d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk15d"><span class="nb">unfold</span> set_diff_filter.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ‚àà a ‚àß new ‚àâ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ a) (a0 :: l)) &lt;
length (filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ b) (a0 :: l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk15e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk15e"><span class="nb">rewrite</span> <span class="mi">2</span> filter_cons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ‚àà a ‚àß new ‚àâ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length
  (<span class="kr">if</span> decide (a0 ‚àâ a)
   <span class="kr">then</span> a0 :: filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ a) l
   <span class="kr">else</span> filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ a) l) &lt;
length
  (<span class="kr">if</span> decide (a0 ‚àâ b)
   <span class="kr">then</span> a0 :: filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ b) l
   <span class="kr">else</span> filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ b) l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk15f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk15f"><span class="nb">destruct</span> (decide (a0 ‚àâ a)); <span class="nb">destruct</span> (decide (a0 ‚àâ b)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ‚àà a ‚àß new ‚àâ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>a0 ‚àâ a</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>a0 ‚àâ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (a0 :: filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ a) l) &lt;
length (a0 :: filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ b) l)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk160" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ‚àà a ‚àß new ‚àâ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>a0 ‚àâ a</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>¬¨ (a0 ‚àâ b)</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk160"><hr></label><div class="goal-conclusion">length (a0 :: filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ a) l) &lt;
length (filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ b) l)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk161" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ‚àà a ‚àß new ‚àâ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ (a0 ‚àâ a)</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>a0 ‚àâ b</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk161"><hr></label><div class="goal-conclusion">length (filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ a) l) &lt;
length (a0 :: filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ b) l)</div></blockquote><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk162" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ‚àà a ‚àß new ‚àâ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ (a0 ‚àâ a)</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>¬¨ (a0 ‚àâ b)</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk162"><hr></label><div class="goal-conclusion">length (filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ a) l) &lt;
length (filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ b) l)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk163" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk163">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ‚àà a ‚àß new ‚àâ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>a0 ‚àâ a</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>a0 ‚àâ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (a0 :: filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ a) l) &lt;
length (a0 :: filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ b) l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk164" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk164"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ‚àà a ‚àß new ‚àâ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>a0 ‚àâ a</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>a0 ‚àâ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S (length (filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ a) l)) &lt;
S (length (filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ b) l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk165" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk165"><span class="nb">rewrite</span> &lt;- Nat.succ_lt_mono.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ‚àà a ‚àß new ‚àâ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>a0 ‚àâ a</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>a0 ‚àâ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ a) l) &lt;
length (filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ b) l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> IHl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk166" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk166">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ‚àà a ‚àß new ‚àâ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>a0 ‚àâ a</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>¬¨ (a0 ‚àâ b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (a0 :: filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ a) l) &lt;
length (filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ b) l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk167" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk167"><span class="bp">contradict</span> n.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ‚àà a ‚àß new ‚àâ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>¬¨ (a0 ‚àâ b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ‚àà a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk168" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk168"><span class="nb">apply</span> H_subseteq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ‚àà a ‚àß new ‚àâ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>¬¨ (a0 ‚àâ b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ‚àà b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> (decide (a0 ‚àà b)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk169" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk169">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ‚àà a ‚àß new ‚àâ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ (a0 ‚àâ a)</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>a0 ‚àâ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ a) l) &lt;
length (a0 :: filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ b) l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk16a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk16a"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ‚àà a ‚àß new ‚àâ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ (a0 ‚àâ a)</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>a0 ‚àâ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ a) l) &lt;
S (length (filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ b) l))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk16b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk16b"><span class="nb">apply</span> Nat.lt_lt_succ_r.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ‚àà a ‚àß new ‚àâ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ (a0 ‚àâ a)</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>a0 ‚àâ b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ a) l) &lt;
length (filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ b) l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> IHl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk16c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk16c">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>new, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>l, a, b</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_subseteq</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà b ‚Üí x ‚àà a</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>new ‚àà a ‚àß new ‚àâ b</span></span></span><br><span><var>IHl</var><span class="hyp-type"><b>: </b><span>length (set_diff_filter l a) &lt;
length (set_diff_filter l b)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>¬¨ (a0 ‚àâ a)</span></span></span><br><span><var>n0</var><span class="hyp-type"><b>: </b><span>¬¨ (a0 ‚àâ b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ a) l) &lt;
length (filter (<span class="kr">Œª</span> <span class="nv">x</span> : A, x ‚àâ b) l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> IHl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk16d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk16d"><span class="kn">Lemma</span> <span class="nf">len_set_diff_map_set_add</span> `{EqDecision B} (new : B) `{EqDecision A} (f : B -&gt; A)
      (a : list B) (l : list A)
      (H_new_is_new : f new ‚àâ map f a)
      (H_new_is_relevant : f new ‚àà l) :
  length (set_diff_filter l (map f (set_add new a))) &lt;
    length (set_diff_filter l (map f a)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision B</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>f new ‚àâ map f a</span></span></span><br><span><var>H_new_is_relevant</var><span class="hyp-type"><b>: </b><span>f new ‚àà l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (set_diff_filter l (map f (set_add new a))) &lt;
length (set_diff_filter l (map f a))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk16e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk16e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision B</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>f new ‚àâ map f a</span></span></span><br><span><var>H_new_is_relevant</var><span class="hyp-type"><b>: </b><span>f new ‚àà l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (set_diff_filter l (map f (set_add new a))) &lt;
length (set_diff_filter l (map f a))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk16f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk16f"><span class="nb">apply</span> len_set_diff_decrease <span class="kr">with</span> (f new); [.. | <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision B</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>f new ‚àâ map f a</span></span></span><br><span><var>H_new_is_relevant</var><span class="hyp-type"><b>: </b><span>f new ‚àà l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà map f a ‚Üí x ‚àà map f (set_add new a)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk170" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision B</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>f new ‚àâ map f a</span></span></span><br><span><var>H_new_is_relevant</var><span class="hyp-type"><b>: </b><span>f new ‚àà l</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk170"><hr></label><div class="goal-conclusion">f new ‚àà map f (set_add new a) ‚àß f new ‚àâ map f a</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk171" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk171">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision B</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>f new ‚àâ map f a</span></span></span><br><span><var>H_new_is_relevant</var><span class="hyp-type"><b>: </b><span>f new ‚àà l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà map f a ‚Üí x ‚àà map f (set_add new a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk172" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk172"><span class="nb">intro</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision B</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>f new ‚àâ map f a</span></span></span><br><span><var>H_new_is_relevant</var><span class="hyp-type"><b>: </b><span>f new ‚àà l</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x ‚àà map f a ‚Üí x ‚àà map f (set_add new a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk173" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk173"><span class="nb">rewrite</span> <span class="mi">2</span> elem_of_list_fmap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision B</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>f new ‚àâ map f a</span></span></span><br><span><var>H_new_is_relevant</var><span class="hyp-type"><b>: </b><span>f new ‚àà l</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÉ</span> <span class="nv">y</span> : B, x = f y ‚àß y ‚àà a)
‚Üí <span class="kr">‚àÉ</span> <span class="nv">y</span> : B, x = f y ‚àß y ‚àà set_add new a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk174" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk174"><span class="nb">intros</span> [x0 [Hx0 Hin]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision B</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>f new ‚àâ map f a</span></span></span><br><span><var>H_new_is_relevant</var><span class="hyp-type"><b>: </b><span>f new ‚àà l</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x0</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>Hx0</var><span class="hyp-type"><b>: </b><span>x = f x0</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x0 ‚àà a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">y</span> : B, x = f y ‚àß y ‚àà set_add new a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk175" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk175"><span class="kr">exists</span> <span class="nv">x0</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision B</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>f new ‚àâ map f a</span></span></span><br><span><var>H_new_is_relevant</var><span class="hyp-type"><b>: </b><span>f new ‚àà l</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x0</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>Hx0</var><span class="hyp-type"><b>: </b><span>x = f x0</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>x0 ‚àà a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x = f x0 ‚àß x0 ‚àà set_add new a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> set_add_iff; itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk176" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk176">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision B</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>f new ‚àâ map f a</span></span></span><br><span><var>H_new_is_relevant</var><span class="hyp-type"><b>: </b><span>f new ‚àà l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f new ‚àà map f (set_add new a) ‚àß f new ‚àâ map f a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk177" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk177"><span class="nb">split</span>; [| <span class="bp">done</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision B</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>f new ‚àâ map f a</span></span></span><br><span><var>H_new_is_relevant</var><span class="hyp-type"><b>: </b><span>f new ‚àà l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f new ‚àà map f (set_add new a)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk178" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk178"><span class="nb">apply</span> elem_of_list_fmap_1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision B</span></span></span><br><span><var>new</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision1</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B ‚Üí A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list B</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>H_new_is_new</var><span class="hyp-type"><b>: </b><span>f new ‚àâ map f a</span></span></span><br><span><var>H_new_is_relevant</var><span class="hyp-type"><b>: </b><span>f new ‚àà l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">new ‚àà set_add new a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> set_add_iff; <span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk179" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk179">#[export] <span class="kn">Instance</span> <span class="nf">set_eq_elem_of</span> (<span class="nv">A</span> : <span class="kt">Type</span>) :
  Proper (@eq A ==&gt; @set_eq A ==&gt; iff) elem_of_list.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Proper (eq ==&gt; set_eq ==&gt; iff) elem_of_list</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk17a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk17a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Proper (eq ==&gt; set_eq ==&gt; iff) elem_of_list</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> x y -&gt; l1 l2 H; <span class="nb">split</span>; <span class="nb">apply</span> H.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk17b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk17b">#[export] <span class="kn">Instance</span> <span class="nf">set_elem_of_subseteq</span> (<span class="nv">A</span> : <span class="kt">Type</span>) :
  Proper (@eq A ==&gt; @list_subseteq A ==&gt; impl) elem_of_list.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Proper (eq ==&gt; list_subseteq ==&gt; impl) elem_of_list</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk17c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk17c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Proper (eq ==&gt; list_subseteq ==&gt; impl) elem_of_list</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span> x y -&gt; l1 l2 H; <span class="nb">firstorder</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk17d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk17d"><span class="kn">Lemma</span> <span class="nf">set_union_iterated_preserves_prop</span>
  `{EqDecision A}
  (ss : list (<span class="nb">set</span> A))
  (P : A -&gt; <span class="kt">Prop</span>)
  (Hp : <span class="kr">forall</span> (<span class="nv">s</span> : <span class="nb">set</span> A), <span class="kr">forall</span> (<span class="nv">a</span> : A), (s ‚àà ss /\ a ‚àà s) -&gt; P a) :
  <span class="kr">forall</span> (<span class="nv">a</span> : A), a ‚àà fold_right set_union [] ss -&gt; P a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hp</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : <span class="nb">set</span> A) (<span class="nv">a</span> : A), s ‚àà ss ‚àß a ‚àà s ‚Üí P a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">a</span> : A, a ‚àà foldr set_union [] ss ‚Üí P a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk17e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk17e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hp</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : <span class="nb">set</span> A) (<span class="nv">a</span> : A), s ‚àà ss ‚àß a ‚àà s ‚Üí P a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">a</span> : A, a ‚àà foldr set_union [] ss ‚Üí P a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk17f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk17f"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hp</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : <span class="nb">set</span> A) (<span class="nv">a</span> : A), s ‚àà ss ‚àß a ‚àà s ‚Üí P a</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a ‚àà foldr set_union [] ss</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk180" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk180"><span class="nb">apply</span> set_union_in_iterated <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hp</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : <span class="nb">set</span> A) (<span class="nv">a</span> : A), s ‚àà ss ‚àß a ‚àà s ‚Üí P a</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Exists (<span class="kr">Œª</span> <span class="nv">s</span> : <span class="nb">set</span> A, a ‚àà s) ss</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk181" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk181"><span class="nb">rewrite</span> Exists_exists <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hp</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : <span class="nb">set</span> A) (<span class="nv">a</span> : A), s ‚àà ss ‚àß a ‚àà s ‚Üí P a</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÉ</span> <span class="nv">x</span> : <span class="nb">set</span> A, x ‚àà ss ‚àß a ‚àà x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk182" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk182"><span class="nb">destruct</span> H <span class="kr">as</span> [s [Hins Hina]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hp</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : <span class="nb">set</span> A) (<span class="nv">a</span> : A), s ‚àà ss ‚àß a ‚àà s ‚Üí P a</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Hins</var><span class="hyp-type"><b>: </b><span>s ‚àà ss</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk183" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk183"><span class="nb">apply</span> Hp <span class="kr">with</span> (s := s).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>ss</var><span class="hyp-type"><b>: </b><span>list (<span class="nb">set</span> A)</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hp</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">s</span> : <span class="nb">set</span> A) (<span class="nv">a</span> : A), s ‚àà ss ‚àß a ‚àà s ‚Üí P a</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="nb">set</span> A</span></span></span><br><span><var>Hins</var><span class="hyp-type"><b>: </b><span>s ‚àà ss</span></span></span><br><span><var>Hina</var><span class="hyp-type"><b>: </b><span>a ‚àà s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">s ‚àà ss ‚àß a ‚àà s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> itauto.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk184" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk184"><span class="kn">Lemma</span> <span class="nf">filter_set_eq</span> {<span class="nv">X</span>} <span class="nv">P</span> <span class="nv">Q</span>
 `{<span class="kr">forall</span> (<span class="nv">x</span> : X), Decision (P x)} `{<span class="kr">forall</span> (<span class="nv">x</span> : X), Decision (Q x)}
   (l : list X)
   (resf := filter P l)
   (resg := filter Q l) :
   set_eq resf resg -&gt; resf = resg.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq resf resg ‚Üí resf = resg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk185" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk185"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">set_eq resf resg ‚Üí resf = resg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk186" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk186"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>set_eq resf resg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">resf = resg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk187" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk187"><span class="nb">unfold</span> resf, resg <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>set_eq (filter P l) (filter Q l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">filter P l = filter Q l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk188" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk188"><span class="nb">apply</span> filter_ext_elem_of.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>set_eq (filter P l) (filter Q l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">a</span> : X, a ‚àà l ‚Üí P a ‚Üî Q a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk189" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk189"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>set_eq (filter P l) (filter Q l)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P a ‚Üî Q a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk18a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk18a"><span class="nb">unfold</span> set_eq <span class="kr">in</span> H1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>filter P l ‚äÜ filter Q l ‚äÜ filter P l</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P a ‚Üî Q a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk18b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk18b"><span class="nb">destruct</span> H1 <span class="kr">as</span> [H1 H1&#39;].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>filter P l ‚äÜ filter Q l</span></span></span><br><span><var>H1'</var><span class="hyp-type"><b>: </b><span>filter Q l ‚äÜ filter P l</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P a ‚Üî Q a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk18c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk18c"><span class="nb">specialize</span> (H1 a).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ‚àà filter P l ‚Üí a ‚àà filter Q l</span></span></span><br><span><var>H1'</var><span class="hyp-type"><b>: </b><span>filter Q l ‚äÜ filter P l</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P a ‚Üî Q a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk18d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk18d"><span class="nb">specialize</span> (H1&#39; a).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ‚àà filter P l ‚Üí a ‚àà filter Q l</span></span></span><br><span><var>H1'</var><span class="hyp-type"><b>: </b><span>a ‚àà filter Q l ‚Üí a ‚àà filter P l</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P a ‚Üî Q a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk18e" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk18e"><span class="nb">split</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ‚àà filter P l ‚Üí a ‚àà filter Q l</span></span></span><br><span><var>H1'</var><span class="hyp-type"><b>: </b><span>a ‚àà filter Q l ‚Üí a ‚àà filter P l</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q a</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk18f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ‚àà filter P l ‚Üí a ‚àà filter Q l</span></span></span><br><span><var>H1'</var><span class="hyp-type"><b>: </b><span>a ‚àà filter Q l ‚Üí a ‚àà filter P l</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>Q a</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk18f"><hr></label><div class="goal-conclusion">P a</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk190" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk190">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ‚àà filter P l ‚Üí a ‚àà filter Q l</span></span></span><br><span><var>H1'</var><span class="hyp-type"><b>: </b><span>a ‚àà filter Q l ‚Üí a ‚àà filter P l</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>P a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> elem_of_list_filter, H1, elem_of_list_filter.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk191" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk191">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>X ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (P x)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : X, Decision (Q x)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list X</span></span></span><br><span><var>resf</var><span><span class="hyp-body"><b>:= </b><span>filter P l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>resg</var><span><span class="hyp-body"><b>:= </b><span>filter Q l</span></span><span class="hyp-type"><b>: </b><span>list X</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>a ‚àà filter P l ‚Üí a ‚àà filter Q l</span></span></span><br><span><var>H1'</var><span class="hyp-type"><b>: </b><span>a ‚àà filter Q l ‚Üí a ‚àà filter P l</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>a ‚àà l</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>Q a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">eapply</span> elem_of_list_filter, H1&#39;, elem_of_list_filter.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk192" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk192"><span class="kn">Lemma</span> <span class="nf">subseteq_appr</span> : <span class="kr">forall</span> <span class="nv">A</span> (<span class="nv">l</span> <span class="nv">m</span> <span class="nv">n</span> : list A), l ‚äÜ n -&gt; l ‚äÜ m ++ n.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">l</span> <span class="nv">m</span> <span class="nv">n</span> : list A), l ‚äÜ n ‚Üí l ‚äÜ m ++ n</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk193" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk193"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">l</span> <span class="nv">m</span> <span class="nv">n</span> : list A), l ‚äÜ n ‚Üí l ‚äÜ m ++ n</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk194" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk194"><span class="nb">intros</span> A l m n x y yinl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>l, m, n</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>l ‚äÜ n</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>yinl</var><span class="hyp-type"><b>: </b><span>y ‚àà l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà m ++ n</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk195" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk195"><span class="nb">apply</span> x <span class="kr">in</span> yinl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>l, m, n</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>l ‚äÜ n</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>yinl</var><span class="hyp-type"><b>: </b><span>y ‚àà n</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y ‚àà m ++ n</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> elem_of_app; <span class="nb">right</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk196" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk196"><span class="kn">Lemma</span> <span class="nf">elem_of_union_fold</span>
  `{EqDecision A}
  (haystack : list (list A))
  (a : A) :
  a ‚àà fold_right set_union [] haystack
  &lt;-&gt;
  <span class="kr">exists</span> (<span class="nv">needle</span> : list A), a ‚àà needle /\ needle ‚àà haystack.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà foldr set_union [] haystack
‚Üî (<span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A, a ‚àà needle ‚àß needle ‚àà haystack)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk197" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk197"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà foldr set_union [] haystack
‚Üî (<span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A, a ‚àà needle ‚àß needle ‚àà haystack)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk198" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk198"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà foldr set_union [] haystack
‚Üí <span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A, a ‚àà needle ‚àß needle ‚àà haystack</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk199" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk199"><hr></label><div class="goal-conclusion">(<span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A, a ‚àà needle ‚àß needle ‚àà haystack)
‚Üí a ‚àà foldr set_union [] haystack</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk19a" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk19a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a ‚àà foldr set_union [] haystack
‚Üí <span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A, a ‚àà needle ‚àß needle ‚àà haystack</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk19b" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk19b"><span class="nb">generalize dependent</span> a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">a</span> : A,
  a ‚àà foldr set_union [] haystack
  ‚Üí <span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A, a ‚àà needle ‚àß needle ‚àà haystack</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk19c" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk19c"><span class="nb">generalize dependent</span> haystack.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">haystack</span> : list (list A)) (<span class="nv">a</span> : A),
  a ‚àà foldr set_union [] haystack
  ‚Üí <span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A, a ‚àà needle ‚àß needle ‚àà haystack</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk19d" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk19d"><span class="nb">induction</span> haystack.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">a</span> : A,
  a ‚àà foldr set_union [] []
  ‚Üí <span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A, a ‚àà needle ‚àß needle ‚àà []</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk19e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> : A,
  a ‚àà foldr set_union [] haystack
  ‚Üí <span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A,
      a ‚àà needle ‚àß needle ‚àà haystack</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk19e"><hr></label><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">a0</span> : A,
  a0 ‚àà foldr set_union [] (a :: haystack)
  ‚Üí <span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A,
      a0 ‚àà needle ‚àß needle ‚àà a :: haystack</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk19f" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk19f">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">a</span> : A,
  a ‚àà foldr set_union [] []
  ‚Üí <span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A, a ‚àà needle ‚àß needle ‚àà []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">intros</span>; <span class="nb">cbn</span> <span class="kr">in</span> H; <span class="nb">inversion</span> H.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1a0" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1a0">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> : A,
  a ‚àà foldr set_union [] haystack
  ‚Üí <span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A,
      a ‚àà needle ‚àß needle ‚àà haystack</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">a0</span> : A,
  a0 ‚àà foldr set_union [] (a :: haystack)
  ‚Üí <span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A,
      a0 ‚àà needle ‚àß needle ‚àà a :: haystack</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1a1" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1a1"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> : A,
  a ‚àà foldr set_union [] haystack
  ‚Üí <span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A,
      a ‚àà needle ‚àß needle ‚àà haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a0 ‚àà foldr set_union [] (a :: haystack)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A,
  a0 ‚àà needle ‚àß needle ‚àà a :: haystack</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1a2" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1a2"><span class="nb">unfold</span> fold_right <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> : A,
  a ‚àà foldr set_union [] haystack
  ‚Üí <span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A,
      a ‚àà needle ‚àß needle ‚àà haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a0
‚àà set_union a
    ((<span class="kr">fix</span> fold_right (l : list (<span class="nb">set</span> A)) : <span class="nb">set</span> A :=
        <span class="kr">match</span> l <span class="kr">with</span>
        | [] =&gt; []
        | b :: t =&gt; set_union b (fold_right t)
        <span class="kr">end</span>) haystack)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A,
  a0 ‚àà needle ‚àß needle ‚àà a :: haystack</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1a3" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1a3"><span class="nb">rewrite</span> set_union_iff <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> : A,
  a ‚àà foldr set_union [] haystack
  ‚Üí <span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A,
      a ‚àà needle ‚àß needle ‚àà haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a0 ‚àà a
‚à® a0
  ‚àà (<span class="kr">fix</span> fold_right (l : list (<span class="nb">set</span> A)) : <span class="nb">set</span> A :=
       <span class="kr">match</span> l <span class="kr">with</span>
       | [] =&gt; []
       | b :: t =&gt; set_union b (fold_right t)
       <span class="kr">end</span>) haystack</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A,
  a0 ‚àà needle ‚àß needle ‚àà a :: haystack</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1a4" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1a4"><span class="nb">destruct</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> : A,
  a ‚àà foldr set_union [] haystack
  ‚Üí <span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A,
      a ‚àà needle ‚àß needle ‚àà haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a0 ‚àà a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A,
  a0 ‚àà needle ‚àß needle ‚àà a :: haystack</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk1a5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> : A,
  a ‚àà foldr set_union [] haystack
  ‚Üí <span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A,
      a ‚àà needle ‚àß needle ‚àà haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a0
‚àà (<span class="kr">fix</span> fold_right (l : list (<span class="nb">set</span> A)) : <span class="nb">set</span> A :=
     <span class="kr">match</span> l <span class="kr">with</span>
     | [] =&gt; []
     | b :: t =&gt; set_union b (fold_right t)
     <span class="kr">end</span>) haystack</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk1a5"><hr></label><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A,
  a0 ‚àà needle ‚àß needle ‚àà a :: haystack</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1a6" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1a6">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> : A,
  a ‚àà foldr set_union [] haystack
  ‚Üí <span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A,
      a ‚àà needle ‚àß needle ‚àà haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a0 ‚àà a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A,
  a0 ‚àà needle ‚àß needle ‚àà a :: haystack</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">setoid_rewrite</span> elem_of_cons; <span class="nb">eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1a7" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1a7">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> : A,
  a ‚àà foldr set_union [] haystack
  ‚Üí <span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A,
      a ‚àà needle ‚àß needle ‚àà haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a0
‚àà (<span class="kr">fix</span> fold_right (l : list (<span class="nb">set</span> A)) : <span class="nb">set</span> A :=
     <span class="kr">match</span> l <span class="kr">with</span>
     | [] =&gt; []
     | b :: t =&gt; set_union b (fold_right t)
     <span class="kr">end</span>) haystack</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A,
  a0 ‚àà needle ‚àß needle ‚àà a :: haystack</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1a8" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1a8"><span class="nb">destruct</span> (IHhaystack a0 H) <span class="kr">as</span> (needle &amp; Hin1 &amp; Hin2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> : A,
  a ‚àà foldr set_union [] haystack
  ‚Üí <span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A,
      a ‚àà needle ‚àß needle ‚àà haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>a0
‚àà (<span class="kr">fix</span> fold_right (l : list (<span class="nb">set</span> A)) : <span class="nb">set</span> A :=
     <span class="kr">match</span> l <span class="kr">with</span>
     | [] =&gt; []
     | b :: t =&gt; set_union b (fold_right t)
     <span class="kr">end</span>) haystack</span></span></span><br><span><var>needle</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin1</var><span class="hyp-type"><b>: </b><span>a0 ‚àà needle</span></span></span><br><span><var>Hin2</var><span class="hyp-type"><b>: </b><span>needle ‚àà haystack</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A,
  a0 ‚àà needle ‚àß needle ‚àà a :: haystack</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">setoid_rewrite</span> elem_of_cons; <span class="nb">eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">   </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1a9" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1a9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A, a ‚àà needle ‚àß needle ‚àà haystack)
‚Üí a ‚àà foldr set_union [] haystack</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1aa" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1aa"><span class="nb">generalize dependent</span> a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">a</span> : A,
  (<span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A, a ‚àà needle ‚àß needle ‚àà haystack)
  ‚Üí a ‚àà foldr set_union [] haystack</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">     </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1ab" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1ab"><span class="nb">generalize dependent</span> haystack.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">haystack</span> : list (list A)) (<span class="nv">a</span> : A),
  (<span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A, a ‚àà needle ‚àß needle ‚àà haystack)
  ‚Üí a ‚àà foldr set_union [] haystack</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">     </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1ac" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1ac"><span class="nb">induction</span> haystack.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">a</span> : A,
  (<span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A, a ‚àà needle ‚àß needle ‚àà [])
  ‚Üí a ‚àà foldr set_union [] []</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk1ad" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> : A,
  (<span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A,
     a ‚àà needle ‚àß needle ‚àà haystack)
  ‚Üí a ‚àà foldr set_union [] haystack</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk1ad"><hr></label><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">a0</span> : A,
  (<span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A,
     a0 ‚àà needle ‚àß needle ‚àà a :: haystack)
  ‚Üí a0 ‚àà foldr set_union [] (a :: haystack)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">     </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1ae" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1ae">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">a</span> : A,
  (<span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A, a ‚àà needle ‚àß needle ‚àà [])
  ‚Üí a ‚àà foldr set_union [] []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">cbn</span>; <span class="nb">intros</span> a (x &amp; Ha &amp; Hx); <span class="nb">inversion</span> Hx.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">     </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1af" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1af">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> : A,
  (<span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A,
     a ‚àà needle ‚àß needle ‚àà haystack)
  ‚Üí a ‚àà foldr set_union [] haystack</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">a0</span> : A,
  (<span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A,
     a0 ‚àà needle ‚àß needle ‚àà a :: haystack)
  ‚Üí a0 ‚àà foldr set_union [] (a :: haystack)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1b0" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1b0"><span class="nb">intros</span> a0 (needle &amp; Hin &amp; Hin2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> : A,
  (<span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A,
     a ‚àà needle ‚àß needle ‚àà haystack)
  ‚Üí a ‚àà foldr set_union [] haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>needle</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a0 ‚àà needle</span></span></span><br><span><var>Hin2</var><span class="hyp-type"><b>: </b><span>needle ‚àà a :: haystack</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ‚àà foldr set_union [] (a :: haystack)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">       </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1b1" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1b1"><span class="nb">apply</span> elem_of_cons <span class="kr">in</span> Hin2 <span class="kr">as</span> [&lt;- |]; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> : A,
  (<span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A,
     a ‚àà needle ‚àß needle ‚àà haystack)
  ‚Üí a ‚àà foldr set_union [] haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>needle</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a0 ‚àà needle</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ‚àà set_union needle (foldr set_union [] haystack)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ListSetExtras-v-chk1b2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> : A,
  (<span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A,
     a ‚àà needle ‚àß needle ‚àà haystack)
  ‚Üí a ‚àà foldr set_union [] haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>needle</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a0 ‚àà needle</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>needle ‚àà haystack</span></span></span><br></div><label class="goal-separator" for="ListSetExtras-v-chk1b2"><hr></label><div class="goal-conclusion">a0 ‚àà set_union a (foldr set_union [] haystack)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">       </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1b3" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1b3">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> : A,
  (<span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A,
     a ‚àà needle ‚àß needle ‚àà haystack)
  ‚Üí a ‚àà foldr set_union [] haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>needle</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a0 ‚àà needle</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ‚àà set_union needle (foldr set_union [] haystack)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> set_union_iff; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">       </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1b4" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1b4">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> : A,
  (<span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A,
     a ‚àà needle ‚àß needle ‚àà haystack)
  ‚Üí a ‚àà foldr set_union [] haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>needle</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a0 ‚àà needle</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>needle ‚àà haystack</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ‚àà set_union a (foldr set_union [] haystack)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1b5" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1b5"><span class="nb">apply</span> set_union_iff; <span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> : A,
  (<span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A,
     a ‚àà needle ‚àß needle ‚àà haystack)
  ‚Üí a ‚àà foldr set_union [] haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>needle</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a0 ‚àà needle</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>needle ‚àà haystack</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a0 ‚àà foldr set_union [] haystack</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">         </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1b6" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1b6"><span class="nb">apply</span> IHhaystack.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>haystack</var><span class="hyp-type"><b>: </b><span>list (list A)</span></span></span><br><span><var>IHhaystack</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">a</span> : A,
  (<span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A,
     a ‚àà needle ‚àß needle ‚àà haystack)
  ‚Üí a ‚àà foldr set_union [] haystack</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>needle</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hin</var><span class="hyp-type"><b>: </b><span>a0 ‚àà needle</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>needle ‚àà haystack</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÉ</span> <span class="nv">needle</span> : list A, a0 ‚àà needle ‚àß needle ‚àà haystack</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">         </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="kr">exists</span> <span class="nv">needle</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1b7" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1b7"><span class="kn">Lemma</span> <span class="nf">subseteq_Forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">P</span> : A -&gt; <span class="kt">Prop</span>) (<span class="nv">l1</span> <span class="nv">l2</span> : list A) :
 l2 ‚äÜ l1 -&gt; Forall P l1 -&gt; Forall P l2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l2 ‚äÜ l1 ‚Üí Forall P l1 ‚Üí Forall P l2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1b8" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1b8"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l2 ‚äÜ l1 ‚Üí Forall P l1 ‚Üí Forall P l2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1b9" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1b9"><span class="nb">intros</span> Hsub Hfor.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>l2 ‚äÜ l1</span></span></span><br><span><var>Hfor</var><span class="hyp-type"><b>: </b><span>Forall P l1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Forall P l2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1ba" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1ba"><span class="nb">apply</span> Forall_forall.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>l2 ‚äÜ l1</span></span></span><br><span><var>Hfor</var><span class="hyp-type"><b>: </b><span>Forall P l1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà l2 ‚Üí P x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1bb" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1bb"><span class="nb">rewrite</span> Forall_forall <span class="kr">in</span> Hfor.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>l2 ‚äÜ l1</span></span></span><br><span><var>Hfor</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà l1 ‚Üí P x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà l2 ‚Üí P x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ListSetExtras-v-chk1bc" style="display: none" type="checkbox"><label class="alectryon-input" for="ListSetExtras-v-chk1bc"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>l1, l2</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>Hsub</var><span class="hyp-type"><b>: </b><span>l2 ‚äÜ l1</span></span></span><br><span><var>Hfor</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">x</span> : A, x ‚àà l1 ‚Üí P x</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>x ‚àà l2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> Hfor, Hsub.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre></article></body></html>