<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"><script>document.write(document.title)</script></span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./../..">Project Website</a>
      <a href="./indexpage.html">Index</a>
      <a href="./toc.html">Table of Contents</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">stdpp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">prelude</span> <span class="id" title="library">finite</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.Streams.html#"><span class="id" title="library">Streams</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Logic.FunctionalExtensionality.html#"><span class="id" title="library">FunctionalExtensionality</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Logic.FinFun.html#"><span class="id" title="library">FinFun</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Logic.Eqdep.html#"><span class="id" title="library">Eqdep</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Lib.Preamble.html#"><span class="id" title="library">Lib.Preamble</span></a> <a class="idref" href="VLSM.Lib.ListExtras.html#"><span class="id" title="library">Lib.ListExtras</span></a> <a class="idref" href="VLSM.Lib.StdppListSet.html#"><span class="id" title="library">Lib.StdppListSet</span></a> <a class="idref" href="VLSM.Lib.StreamExtras.html#"><span class="id" title="library">Lib.StreamExtras</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Core.VLSM.html#"><span class="id" title="library">Core.VLSM</span></a> <a class="idref" href="VLSM.Core.Plans.html#"><span class="id" title="library">Core.Plans</span></a> <a class="idref" href="VLSM.Core.VLSMProjections.html#"><span class="id" title="library">Core.VLSMProjections</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab54"></a><h1 class="section">VLSM Composition</h1>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

This module provides Coq definitions for composite VLSMs and their projections
to components.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="VLSM_composition" class="idref" href="#VLSM_composition"><span class="id" title="section">VLSM_composition</span></a>.<br/>

<br/>
</div>

<div class="doc">
Let us fix a type for <code>message</code>s, and an <code>index</code> type for the VLSM components
such that equality on <code>index</code> is decidable.

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="message:1" class="idref" href="#message:1"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="EqDecision0:3" class="idref" href="#EqDecision0:3"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:3" class="idref" href="#EqDecision0:3"><span class="id" title="binder">index</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="IM:4" class="idref" href="#IM:4"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Core.Composition.html#index:2"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:1"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="VLSM_composition.composite_type" class="idref" href="#VLSM_composition.composite_type"><span class="id" title="section">composite_type</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab55"></a><h2 class="section">The type of a composite VLSM</h2>


<div class="paragraph"> </div>

Let IM be a family of VLSMs indexed by <code>index</code>. Note that all
<span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="section">VLSM</span></a></span>s share the same type of <code>message</code>s.

<div class="paragraph"> </div>


<div class="paragraph"> </div>


<div class="paragraph"> </div>

A <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a></span> is an indexed family of <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a></span>s, yielding for each
index <code>n</code> a <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a></span> of <span class="inlinecode"><span class="id" title="keyword">type</span></span> <code>IT n</code>, the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#VLSMType"><span class="id" title="record">VLSMType</span></a></span> corresponding to
machine <code>n</code>.

<div class="paragraph"> </div>

Note that the <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a></span> type is the dependent product type of the
family of <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="projection">state</span></a></span> types corresponding to each index.

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="_composite_state" class="idref" href="#_composite_state"><span class="id" title="definition">_composite_state</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="n:5" class="idref" href="#n:5"><span class="id" title="binder">n</span></a> : <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#n:5"><span class="id" title="variable">n</span></a>).<br/>

<br/>
</div>

<div class="doc">
A <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a></span> is a pair between an index <code>N</code> and a <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="projection">label</span></a></span> of <code>IT n</code>.

<div class="paragraph"> </div>

Note that the <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a></span> type is the dependent sum of the family of
types <code>[@label _ (IT n) | n &lt;- index]</code>.

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="_composite_label" class="idref" href="#_composite_label"><span class="id" title="definition">_composite_label</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="keyword">Type</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#sigT"><span class="id" title="inductive">sigT</span></a> (<span class="id" title="keyword">fun</span> <a id="n:6" class="idref" href="#n:6"><span class="id" title="binder">n</span></a> =&gt; <a class="idref" href="VLSM.Core.VLSM.html#vlabel"><span class="id" title="definition">vlabel</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#n:6"><span class="id" title="variable">n</span></a>)).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_type" class="idref" href="#composite_type"><span class="id" title="definition">composite_type</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSMType"><span class="id" title="class">VLSMType</span></a> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> := <a class="idref" href="VLSM.Core.Composition.html#_composite_state"><span class="id" title="definition">_composite_state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="method">label</span></a> := <a class="idref" href="VLSM.Core.Composition.html#_composite_label"><span class="id" title="definition">_composite_label</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_state" class="idref" href="#composite_state"><span class="id" title="definition">composite_state</span></a> := @<a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_label" class="idref" href="#composite_label"><span class="id" title="definition">composite_label</span></a> := @<a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="method">label</span></a> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_transition_item" class="idref" href="#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> : <span class="id" title="keyword">Type</span> := @<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a>.<br/>

<br/>
</div>

<div class="doc">
A very useful operation on <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a></span>s is updating the state corresponding
to a component:

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="state_update" class="idref" href="#state_update"><span class="id" title="definition">state_update</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:7" class="idref" href="#s:7"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:8" class="idref" href="#i:8"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="si:9" class="idref" href="#si:9"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:8"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="j:10" class="idref" href="#j:10"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:10"><span class="id" title="variable">j</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="definition">decide</span> (<a class="idref" href="VLSM.Core.Composition.html#j:10"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:8"><span class="id" title="variable">i</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#left"><span class="id" title="constructor">left</span></a> <span class="id" title="var">e</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#eq_rect_r"><span class="id" title="definition">eq_rect_r</span></a> (<span class="id" title="keyword">fun</span> <a id="i:11" class="idref" href="#i:11"><span class="id" title="binder">i</span></a> =&gt; <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:11"><span class="id" title="variable">i</span></a>)) <a class="idref" href="VLSM.Core.Composition.html#si:9"><span class="id" title="variable">si</span></a> <span class="id" title="var">e</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="VLSM.Core.Composition.html#s:7"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:10"><span class="id" title="variable">j</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
The next few results describe several properties of the <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a></span> operation.

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="state_update_neq" class="idref" href="#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:12" class="idref" href="#s:12"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:13" class="idref" href="#i:13"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="si:14" class="idref" href="#si:14"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:13"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="j:15" class="idref" href="#j:15"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hneq:16" class="idref" href="#Hneq:16"><span class="id" title="binder">Hneq</span></a> : <a class="idref" href="VLSM.Core.Composition.html#j:15"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:13"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:12"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:13"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#si:14"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:15"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:12"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:15"><span class="id" title="variable">j</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a>. <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>)); <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="state_update_eq" class="idref" href="#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:17" class="idref" href="#s:17"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:18" class="idref" href="#i:18"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="si:19" class="idref" href="#si:19"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:18"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:17"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:18"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#si:19"><span class="id" title="variable">si</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:18"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#si:19"><span class="id" title="variable">si</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">decide</span>, <span class="id" title="definition">decide_rel</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Lib.Preamble.html#eq_dec_refl"><span class="id" title="lemma">eq_dec_refl</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="state_update_id" class="idref" href="#state_update_id"><span class="id" title="lemma">state_update_id</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:20" class="idref" href="#s:20"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:21" class="idref" href="#i:21"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="si:22" class="idref" href="#si:22"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:21"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Heq:23" class="idref" href="#Heq:23"><span class="id" title="binder">Heq</span></a> : <a class="idref" href="VLSM.Core.Composition.html#s:20"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:21"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#si:22"><span class="id" title="variable">si</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:20"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:21"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#si:22"><span class="id" title="variable">si</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:20"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Logic.FunctionalExtensionality.html#functional_extensionality_dep_good"><span class="id" title="definition">functional_extensionality_dep_good</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">j</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="state_update_twice" class="idref" href="#state_update_twice"><span class="id" title="lemma">state_update_twice</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:24" class="idref" href="#s:24"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:25" class="idref" href="#i:25"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="si:26" class="idref" href="#si:26"><span class="id" title="binder">si</span></a> <a id="si':27" class="idref" href="#si':27"><span class="id" title="binder">si'</span></a>: <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:25"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> (<a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:24"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:25"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#si:26"><span class="id" title="variable">si</span></a>) <a class="idref" href="VLSM.Core.Composition.html#i:25"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#si':27"><span class="id" title="variable">si'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:24"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:25"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#si':27"><span class="id" title="variable">si'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Logic.FunctionalExtensionality.html#functional_extensionality_dep_good"><span class="id" title="definition">functional_extensionality_dep_good</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">j</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="state_update_twice_neq" class="idref" href="#state_update_twice_neq"><span class="id" title="lemma">state_update_twice_neq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:28" class="idref" href="#s:28"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:29" class="idref" href="#i:29"><span class="id" title="binder">i</span></a> <a id="j:30" class="idref" href="#j:30"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="si:31" class="idref" href="#si:31"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:29"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="sj:32" class="idref" href="#sj:32"><span class="id" title="binder">sj</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:30"><span class="id" title="variable">j</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hij:33" class="idref" href="#Hij:33"><span class="id" title="binder">Hij</span></a> : <a class="idref" href="VLSM.Core.Composition.html#j:30"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:29"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> (<a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:28"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:29"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#si:31"><span class="id" title="variable">si</span></a>) <a class="idref" href="VLSM.Core.Composition.html#j:30"><span class="id" title="variable">j</span></a> <a class="idref" href="VLSM.Core.Composition.html#sj:32"><span class="id" title="variable">sj</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> (<a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:28"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:30"><span class="id" title="variable">j</span></a> <a class="idref" href="VLSM.Core.Composition.html#sj:32"><span class="id" title="variable">sj</span></a>) <a class="idref" href="VLSM.Core.Composition.html#i:29"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#si:31"><span class="id" title="variable">si</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Logic.FunctionalExtensionality.html#functional_extensionality_dep_good"><span class="id" title="definition">functional_extensionality_dep_good</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">k</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">j</span>)); <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>)); <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a> ; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.composite_type"><span class="id" title="section">composite_type</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="VLSM_composition.sec_composite_vlsm" class="idref" href="#VLSM_composition.sec_composite_vlsm"><span class="id" title="section">sec_composite_vlsm</span></a>.<br/>
</div>

<div class="doc">
<a id="lab56"></a><h2 class="section">Constrained VLSM composition</h2>


<div class="paragraph"> </div>

Assume an non-empty <code>index</code> type and let <code>IT</code> be
an <code>index</code>ed family of <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#VLSMType"><span class="id" title="record">VLSMType</span></a></span>s, and for each index <code>i</code>, let <code>IM i</code> be
a <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#VLSMMachine"><span class="id" title="record">VLSMMachine</span></a></span> of type <code>IT i</code>.

<div class="paragraph"> </div>


<div class="paragraph"> </div>

A <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a></span> has the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a></span>erty if all of its component
states have the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a></span>erty in the corresponding component signature.

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_initial_state_prop" class="idref" href="#composite_initial_state_prop"><span class="id" title="definition">composite_initial_state_prop</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:34" class="idref" href="#s:34"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="n:35" class="idref" href="#n:35"><span class="id" title="binder">n</span></a> : <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#n:35"><span class="id" title="variable">n</span></a>) (<a class="idref" href="VLSM.Core.Composition.html#s:34"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#n:35"><span class="id" title="variable">n</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_initial_state" class="idref" href="#composite_initial_state"><span class="id" title="definition">composite_initial_state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#sig"><span class="id" title="inductive">sig</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_initial_state_prop"><span class="id" title="definition">composite_initial_state_prop</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_s0" class="idref" href="#composite_s0"><span class="id" title="definition">composite_s0</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_initial_state"><span class="id" title="definition">composite_initial_state</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="keyword">fun</span> (<a id="n:37" class="idref" href="#n:37"><span class="id" title="binder">n</span></a> : <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>) =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#vs0"><span class="id" title="definition">vs0</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#n:36"><span class="id" title="variable">n</span></a>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.VLSM.html#vs0"><span class="id" title="definition">vs0</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">i</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">Hs</span>]. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="composite_initial_state_inh" class="idref" href="#composite_initial_state_inh"><span class="id" title="instance">composite_initial_state_inh</span></a> : <span class="id" title="class">Inhabited</span> <a class="idref" href="VLSM.Core.Composition.html#composite_initial_state"><span class="id" title="definition">composite_initial_state</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <span class="id" title="method">inhabitant</span> := <a class="idref" href="VLSM.Core.Composition.html#composite_s0"><span class="id" title="definition">composite_s0</span></a> |}.<br/>

<br/>
</div>

<div class="doc">
A message has the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a></span>erty in the composite
iff it has the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a></span>erty in any of the components.

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_initial_message_prop" class="idref" href="#composite_initial_message_prop"><span class="id" title="definition">composite_initial_message_prop</span></a> (<a id="m:38" class="idref" href="#m:38"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a>) : <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="n:39" class="idref" href="#n:39"><span class="id" title="binder">n</span></a> : <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>) (<a id="mi:40" class="idref" href="#mi:40"><span class="id" title="binder">mi</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vinitial_message"><span class="id" title="definition">vinitial_message</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#n:39"><span class="id" title="variable">n</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="VLSM.Core.Composition.html#mi:40"><span class="id" title="variable">mi</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#m:38"><span class="id" title="variable">m</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="option_composite_initial_message_prop" class="idref" href="#option_composite_initial_message_prop"><span class="id" title="definition">option_composite_initial_message_prop</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="definition">from_option</span> <a class="idref" href="VLSM.Core.Composition.html#composite_initial_message_prop"><span class="id" title="definition">composite_initial_message_prop</span></a> <span class="id" title="notation">True</span>.<br/>

<br/>
</div>

<div class="doc">
We can always "lift" state <code>sj</code> from component <code>j</code> to a composite state by
updating an initial composite state, say <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#s0"><span class="id" title="projection">s0</span></a></span>, to <code>sj</code> on component <code>j</code>.

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="lift_to_composite_label" class="idref" href="#lift_to_composite_label"><span class="id" title="definition">lift_to_composite_label</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="j:41" class="idref" href="#j:41"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="lj:42" class="idref" href="#lj:42"><span class="id" title="binder">lj</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vlabel"><span class="id" title="definition">vlabel</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:41"><span class="id" title="variable">j</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:41"><span class="id" title="variable">j</span></a> <a class="idref" href="VLSM.Core.Composition.html#lj:42"><span class="id" title="variable">lj</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="lift_to_composite_state" class="idref" href="#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="j:43" class="idref" href="#j:43"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="sj:44" class="idref" href="#sj:44"><span class="id" title="binder">sj</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:43"><span class="id" title="variable">j</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s0X:45" class="idref" href="#s0X:45"><span class="id" title="binder">s0X</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_s0"><span class="id" title="definition">composite_s0</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Core.Composition.html#s0X:45"><span class="id" title="variable">s0X</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:43"><span class="id" title="variable">j</span></a> <a class="idref" href="VLSM.Core.Composition.html#sj:44"><span class="id" title="variable">sj</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="lift_to_composite_transition_item" class="idref" href="#lift_to_composite_transition_item"><span class="id" title="definition">lift_to_composite_transition_item</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="j:46" class="idref" href="#j:46"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="item:47" class="idref" href="#item:47"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:46"><span class="id" title="variable">j</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s0X:48" class="idref" href="#s0X:48"><span class="id" title="binder">s0X</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_s0"><span class="id" title="definition">composite_s0</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: @<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">item</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">j</span> <span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">input</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <span class="id" title="var">j</span> <span class="id" title="var">destination</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">output</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="lift_to_composite_state'" class="idref" href="#lift_to_composite_state'"><span class="id" title="definition">lift_to_composite_state'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:49" class="idref" href="#s:49"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="j:50" class="idref" href="#j:50"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="sj:51" class="idref" href="#sj:51"><span class="id" title="binder">sj</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:50"><span class="id" title="variable">j</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:49"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:50"><span class="id" title="variable">j</span></a> <a class="idref" href="VLSM.Core.Composition.html#sj:51"><span class="id" title="variable">sj</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="lift_to_composite_transition_item'" class="idref" href="#lift_to_composite_transition_item'"><span class="id" title="definition">lift_to_composite_transition_item'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:52" class="idref" href="#s:52"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="j:53" class="idref" href="#j:53"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="item:54" class="idref" href="#item:54"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:53"><span class="id" title="variable">j</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: @<a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">item</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">j</span> <span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">input</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state'"><span class="id" title="definition">lift_to_composite_state'</span></a> <span class="id" title="var">s</span> <span class="id" title="var">j</span> <span class="id" title="var">destination</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">output</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
    Composite versions for <span class="inlinecode"><a class="idref" href="VLSM.Core.Plans.html#plan_item"><span class="id" title="record">plan_item</span></a></span> and <span class="inlinecode"><a class="idref" href="VLSM.Core.Plans.html#plan"><span class="id" title="definition">plan</span></a></span>.
    
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_plan_item" class="idref" href="#composite_plan_item"><span class="id" title="definition">composite_plan_item</span></a> := @<a class="idref" href="VLSM.Core.Plans.html#plan_item"><span class="id" title="record">plan_item</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_plan" class="idref" href="#composite_plan"><span class="id" title="definition">composite_plan</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_item"><span class="id" title="definition">composite_plan_item</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="lift_to_composite_plan_item" class="idref" href="#lift_to_composite_plan_item"><span class="id" title="definition">lift_to_composite_plan_item</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:55" class="idref" href="#i:55"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="a:56" class="idref" href="#a:56"><span class="id" title="binder">a</span></a> : <a class="idref" href="VLSM.Core.Plans.html#vplan_item"><span class="id" title="definition">vplan_item</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:55"><span class="id" title="variable">i</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#composite_plan_item"><span class="id" title="definition">composite_plan_item</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">i</span> <span class="id" title="var">label_a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">input_a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
The <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="projection">transition</span></a></span> function for the <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a></span> takes a transition in
the component selected by the index in the given <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a></span>
with the contained label,
and returnes the produced message together with the state updated on that
component:

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_transition" class="idref" href="#composite_transition"><span class="id" title="definition">composite_transition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:57" class="idref" href="#l:57"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="som:58" class="idref" href="#som:58"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="s:59" class="idref" href="#s:59"><span class="id" title="binder">s</span></a>, <a id="om:60" class="idref" href="#om:60"><span class="id" title="binder">om</span></a>) := <a class="idref" href="VLSM.Core.Composition.html#som:58"><span class="id" title="variable">som</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="i:61" class="idref" href="#i:61"><span class="id" title="binder">i</span></a>, <a id="li:62" class="idref" href="#li:62"><span class="id" title="binder">li</span></a>) := <a class="idref" href="VLSM.Core.Composition.html#l:57"><span class="id" title="variable">l</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="si':63" class="idref" href="#si':63"><span class="id" title="binder">si'</span></a>, <a id="om':64" class="idref" href="#om':64"><span class="id" title="binder">om'</span></a>) := <a class="idref" href="VLSM.Core.VLSM.html#vtransition"><span class="id" title="definition">vtransition</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:61"><span class="id" title="variable">i</span></a>) <a class="idref" href="VLSM.Core.Composition.html#li:62"><span class="id" title="variable">li</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:59"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:61"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:60"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:59"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:61"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#si':63"><span class="id" title="variable">si'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a>  <a class="idref" href="VLSM.Core.Composition.html#om':64"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
</div>

<div class="doc">
Given a <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a></span> <code>(i, li)</code> and a <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a></span>-message
pair <code>(s, om)</code>, <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#composite_valid"><span class="id" title="definition">composite_valid</span></a></span>ity is defined as <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a></span>ity in
the <code>i</code>th component <code>IM i</code>.

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_valid" class="idref" href="#composite_valid"><span class="id" title="definition">composite_valid</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:65" class="idref" href="#l:65"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="som:66" class="idref" href="#som:66"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="s:67" class="idref" href="#s:67"><span class="id" title="binder">s</span></a>, <a id="om:68" class="idref" href="#om:68"><span class="id" title="binder">om</span></a>) := <a class="idref" href="VLSM.Core.Composition.html#som:66"><span class="id" title="variable">som</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="i:69" class="idref" href="#i:69"><span class="id" title="binder">i</span></a>, <a id="li:70" class="idref" href="#li:70"><span class="id" title="binder">li</span></a>) := <a class="idref" href="VLSM.Core.Composition.html#l:65"><span class="id" title="variable">l</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#vvalid"><span class="id" title="definition">vvalid</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:69"><span class="id" title="variable">i</span></a>) <a class="idref" href="VLSM.Core.Composition.html#li:70"><span class="id" title="variable">li</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:67"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:69"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:68"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
</div>

<div class="doc">
A <code>constraint</code> for a composite VLSM is a <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="projection">valid</span></a></span>ity condition defined
directly on <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a></span>s and <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a></span>s, thus being able to
impose a global condition.

<div class="paragraph"> </div>

<span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#constrained_composite_valid"><span class="id" title="definition">constrained_composite_valid</span></a></span>ity interposes such a <code>constraint</code> on top of
the <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#composite_valid"><span class="id" title="definition">composite_valid</span></a></span>ity.

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="constrained_composite_valid" class="idref" href="#constrained_composite_valid"><span class="id" title="definition">constrained_composite_valid</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="constraint:71" class="idref" href="#constraint:71"><span class="id" title="binder">constraint</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:72" class="idref" href="#l:72"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="som:73" class="idref" href="#som:73"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#composite_valid"><span class="id" title="definition">composite_valid</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:72"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.Composition.html#som:73"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint:71"><span class="id" title="variable">constraint</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:72"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.Composition.html#som:73"><span class="id" title="variable">som</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_vlsm_machine" class="idref" href="#composite_vlsm_machine"><span class="id" title="definition">composite_vlsm_machine</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="constraint:74" class="idref" href="#constraint:74"><span class="id" title="binder">constraint</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#VLSMMachine"><span class="id" title="class">VLSMMachine</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|  <a class="idref" href="VLSM.Core.VLSM.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> := <a class="idref" href="VLSM.Core.Composition.html#composite_initial_state_prop"><span class="id" title="definition">composite_initial_state_prop</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;  <a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="method">initial_message_prop</span></a> := <a class="idref" href="VLSM.Core.Composition.html#composite_initial_message_prop"><span class="id" title="definition">composite_initial_message_prop</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;  <a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="method">transition</span></a> := <a class="idref" href="VLSM.Core.Composition.html#composite_transition"><span class="id" title="definition">composite_transition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;  <a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="method">valid</span></a> := <a class="idref" href="VLSM.Core.Composition.html#constrained_composite_valid"><span class="id" title="definition">constrained_composite_valid</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint:74"><span class="id" title="variable">constraint</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_vlsm" class="idref" href="#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="constraint:75" class="idref" href="#constraint:75"><span class="id" title="binder">constraint</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="VLSM.Core.VLSM.html#mk_vlsm"><span class="id" title="constructor">mk_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_vlsm_machine"><span class="id" title="definition">composite_vlsm_machine</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint:75"><span class="id" title="variable">constraint</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="composite_transition_state_neq" class="idref" href="#composite_transition_state_neq"><span class="id" title="lemma">composite_transition_state_neq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="constraint:76" class="idref" href="#constraint:76"><span class="id" title="binder">constraint</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:77" class="idref" href="#l:77"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:78" class="idref" href="#s:78"><span class="id" title="binder">s</span></a> <a id="s':79" class="idref" href="#s':79"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:80" class="idref" href="#om:80"><span class="id" title="binder">om</span></a> <a id="om':81" class="idref" href="#om':81"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:82" class="idref" href="#Ht:82"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint:76"><span class="id" title="variable">constraint</span></a>) <a class="idref" href="VLSM.Core.Composition.html#l:77"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:78"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:80"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':79"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om':81"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:83" class="idref" href="#i:83"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hi:84" class="idref" href="#Hi:84"><span class="id" title="binder">Hi</span></a> : <a class="idref" href="VLSM.Core.Composition.html#i:83"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:77"><span class="id" title="variable">l</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Composition.html#s':79"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:83"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:78"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:83"><span class="id" title="variable">i</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Ht</span>]. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">il</span>, <span class="id" title="var">l</span>). <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.VLSM.html#vtransition"><span class="id" title="definition">vtransition</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">il</span>) <span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span> <span class="id" title="var">il</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> (<span class="id" title="var">si'</span>, <span class="id" title="var">omi'</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Ht'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">omi'</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="composite_transition_state_eq" class="idref" href="#composite_transition_state_eq"><span class="id" title="lemma">composite_transition_state_eq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="constraint:85" class="idref" href="#constraint:85"><span class="id" title="binder">constraint</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:86" class="idref" href="#l:86"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:87" class="idref" href="#s:87"><span class="id" title="binder">s</span></a> <a id="s':88" class="idref" href="#s':88"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:89" class="idref" href="#om:89"><span class="id" title="binder">om</span></a> <a id="om':90" class="idref" href="#om':90"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:91" class="idref" href="#Ht:91"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint:85"><span class="id" title="variable">constraint</span></a>) <a class="idref" href="VLSM.Core.Composition.html#l:86"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:87"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:89"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':88"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om':90"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="il:92" class="idref" href="#il:92"><span class="id" title="binder">il</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:86"><span class="id" title="variable">l</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Composition.html#s':88"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.Composition.html#il:92"><span class="id" title="variable">il</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#vtransition"><span class="id" title="definition">vtransition</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#il:92"><span class="id" title="variable">il</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:86"><span class="id" title="variable">l</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:87"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#il:92"><span class="id" title="variable">il</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:89"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Ht</span>]. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">il</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">clear</span> <span class="id" title="var">il</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">il</span>, <span class="id" title="var">l</span>). <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.VLSM.html#vtransition"><span class="id" title="definition">vtransition</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">il</span>) <span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span> <span class="id" title="var">il</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> (<span class="id" title="var">si'</span>, <span class="id" title="var">omi'</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Ht'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Composite versions for the generic <span class="inlinecode"><a class="idref" href="VLSM.Core.Plans.html#_apply_plan"><span class="id" title="definition">_apply_plan</span></a></span>-related definitions and
    results.
    
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_apply_plan" class="idref" href="#composite_apply_plan"><span class="id" title="definition">composite_apply_plan</span></a> := (@<a class="idref" href="VLSM.Core.Plans.html#_apply_plan"><span class="id" title="definition">_apply_plan</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_transition"><span class="id" title="definition">composite_transition</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_apply_plan_app" class="idref" href="#composite_apply_plan_app"><span class="id" title="definition">composite_apply_plan_app</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="start:93" class="idref" href="#start:93"><span class="id" title="binder">start</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="a:94" class="idref" href="#a:94"><span class="id" title="binder">a</span></a> <a id="a':95" class="idref" href="#a':95"><span class="id" title="binder">a'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.Plans.html#plan_item"><span class="id" title="record">plan_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Composition.html#composite_apply_plan"><span class="id" title="definition">composite_apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#start:93"><span class="id" title="variable">start</span></a> (<a class="idref" href="VLSM.Core.Composition.html#a:94"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Core.Composition.html#a':95"><span class="id" title="variable">a'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="aitems:96" class="idref" href="#aitems:96"><span class="id" title="binder">aitems</span></a>, <a id="afinal:97" class="idref" href="#afinal:97"><span class="id" title="binder">afinal</span></a>) := <a class="idref" href="VLSM.Core.Composition.html#composite_apply_plan"><span class="id" title="definition">composite_apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#start:93"><span class="id" title="variable">start</span></a> <a class="idref" href="VLSM.Core.Composition.html#a:94"><span class="id" title="variable">a</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="a'items:98" class="idref" href="#a'items:98"><span class="id" title="binder">a'items</span></a>, <a id="a'final:99" class="idref" href="#a'final:99"><span class="id" title="binder">a'final</span></a>) := <a class="idref" href="VLSM.Core.Composition.html#composite_apply_plan"><span class="id" title="definition">composite_apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#afinal:97"><span class="id" title="variable">afinal</span></a> <a class="idref" href="VLSM.Core.Composition.html#a':95"><span class="id" title="variable">a'</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#aitems:96"><span class="id" title="variable">aitems</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Core.Composition.html#a'items:98"><span class="id" title="variable">a'items</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#a'final:99"><span class="id" title="variable">a'final</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= (@<a class="idref" href="VLSM.Core.Plans.html#_apply_plan_app"><span class="id" title="lemma">_apply_plan_app</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_transition"><span class="id" title="definition">composite_transition</span></a> <a class="idref" href="VLSM.Core.Composition.html#start:93"><span class="id" title="variable">start</span></a> <a class="idref" href="VLSM.Core.Composition.html#a:94"><span class="id" title="variable">a</span></a> <a class="idref" href="VLSM.Core.Composition.html#a':95"><span class="id" title="variable">a'</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_apply_plan_last" class="idref" href="#composite_apply_plan_last"><span class="id" title="definition">composite_apply_plan_last</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="start:100" class="idref" href="#start:100"><span class="id" title="binder">start</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="a:101" class="idref" href="#a:101"><span class="id" title="binder">a</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.Plans.html#plan_item"><span class="id" title="record">plan_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="after_a:102" class="idref" href="#after_a:102"><span class="id" title="binder">after_a</span></a> := <a class="idref" href="VLSM.Core.Composition.html#composite_apply_plan"><span class="id" title="definition">composite_apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#start:100"><span class="id" title="variable">start</span></a> <a class="idref" href="VLSM.Core.Composition.html#a:101"><span class="id" title="variable">a</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.Composition.html#start:100"><span class="id" title="variable">start</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="VLSM.Core.Composition.html#after_a:102"><span class="id" title="variable">after_a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="VLSM.Core.Composition.html#after_a:102"><span class="id" title="variable">after_a</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= (@<a class="idref" href="VLSM.Core.Plans.html#_apply_plan_last"><span class="id" title="lemma">_apply_plan_last</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_transition"><span class="id" title="definition">composite_transition</span></a> <a class="idref" href="VLSM.Core.Composition.html#start:100"><span class="id" title="variable">start</span></a> <a class="idref" href="VLSM.Core.Composition.html#a:101"><span class="id" title="variable">a</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_trace_to_plan" class="idref" href="#composite_trace_to_plan"><span class="id" title="definition">composite_trace_to_plan</span></a> := (@<a class="idref" href="VLSM.Core.Plans.html#_trace_to_plan"><span class="id" title="definition">_trace_to_plan</span></a> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="lift_to_composite_state_initial" class="idref" href="#lift_to_composite_state_initial"><span class="id" title="lemma">lift_to_composite_state_initial</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="j:103" class="idref" href="#j:103"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="sj:104" class="idref" href="#sj:104"><span class="id" title="binder">sj</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:103"><span class="id" title="variable">j</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hinitj:105" class="idref" href="#Hinitj:105"><span class="id" title="binder">Hinitj</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:103"><span class="id" title="variable">j</span></a>) <a class="idref" href="VLSM.Core.Composition.html#sj:104"><span class="id" title="variable">sj</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Composition.html#composite_initial_state_prop"><span class="id" title="definition">composite_initial_state_prop</span></a> (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:103"><span class="id" title="variable">j</span></a> <a class="idref" href="VLSM.Core.Composition.html#sj:104"><span class="id" title="variable">sj</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">j</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.VLSM.html#vs0"><span class="id" title="definition">vs0</span></a> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">Hs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab57"></a><h2 class="section">Free VLSM composition</h2>


<div class="paragraph"> </div>

The <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#free_constraint"><span class="id" title="definition">free_constraint</span></a></span> is defined to be <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a></span> for all inputs.
Thus, the <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a></span> is the <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a></span> using the
<span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#free_constraint"><span class="id" title="definition">free_constraint</span></a></span>.

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="free_constraint" class="idref" href="#free_constraint"><span class="id" title="definition">free_constraint</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:106" class="idref" href="#l:106"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="som:107" class="idref" href="#som:107"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="notation">True</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="free_composite_vlsm" class="idref" href="#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_constraint"><span class="id" title="definition">free_constraint</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="lift_to_composite_vlsm_full_projection" class="idref" href="#lift_to_composite_vlsm_full_projection"><span class="id" title="lemma">lift_to_composite_vlsm_full_projection</span></a> <a id="j:108" class="idref" href="#j:108"><span class="id" title="binder">j</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSMProjections.html#VLSM_full_projection"><span class="id" title="record">VLSM_full_projection</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:108"><span class="id" title="variable">j</span></a>) <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_label"><span class="id" title="definition">lift_to_composite_label</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:108"><span class="id" title="variable">j</span></a>) (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:108"><span class="id" title="variable">j</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSMProjections.html#basic_VLSM_strong_full_projection"><span class="id" title="lemma">basic_VLSM_strong_full_projection</span></a>; <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">split</span>; [|<span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>]. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#vtransition"><span class="id" title="definition">vtransition</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>. <span class="id" title="tactic">replace</span> (<a class="idref" href="VLSM.Core.VLSM.html#vtransition"><span class="id" title="definition">vtransition</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_twice"><span class="id" title="lemma">state_update_twice</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state_initial"><span class="id" title="lemma">lift_to_composite_state_initial</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <span class="id" title="var">j</span>, (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>). <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="lift_to_composite_finite_trace" class="idref" href="#lift_to_composite_finite_trace"><span class="id" title="definition">lift_to_composite_finite_trace</span></a> <a id="j:109" class="idref" href="#j:109"><span class="id" title="binder">j</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:109"><span class="id" title="variable">j</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="VLSM.Core.VLSMProjections.html#VLSM_full_projection_finite_trace_project"><span class="id" title="definition">VLSM_full_projection_finite_trace_project</span></a> (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_vlsm_full_projection"><span class="id" title="lemma">lift_to_composite_vlsm_full_projection</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:109"><span class="id" title="variable">j</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="lift_to_composite_finite_trace_last" class="idref" href="#lift_to_composite_finite_trace_last"><span class="id" title="definition">lift_to_composite_finite_trace_last</span></a> <a id="j:110" class="idref" href="#j:110"><span class="id" title="binder">j</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="VLSM.Core.VLSMProjections.html#VLSM_full_projection_finite_trace_last"><span class="id" title="definition">VLSM_full_projection_finite_trace_last</span></a> (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_vlsm_full_projection"><span class="id" title="lemma">lift_to_composite_vlsm_full_projection</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:110"><span class="id" title="variable">j</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="constraint_free_incl" class="idref" href="#constraint_free_incl"><span class="id" title="lemma">constraint_free_incl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="constraint:111" class="idref" href="#constraint:111"><span class="id" title="binder">constraint</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSMProjections.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint:111"><span class="id" title="variable">constraint</span></a>) <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSMProjections.html#basic_VLSM_strong_incl"><span class="id" title="lemma">basic_VLSM_strong_incl</span></a>; <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">intros</span>; [<span class="id" title="tactic">assumption</span>..| |<span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>|<span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="composite_pre_loaded_vlsm_incl_pre_loaded_with_all_messages" class="idref" href="#composite_pre_loaded_vlsm_incl_pre_loaded_with_all_messages"><span class="id" title="lemma">composite_pre_loaded_vlsm_incl_pre_loaded_with_all_messages</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="constraint:112" class="idref" href="#constraint:112"><span class="id" title="binder">constraint</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="P:113" class="idref" href="#P:113"><span class="id" title="binder">P</span></a> : <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSMProjections.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_vlsm"><span class="id" title="definition">pre_loaded_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint:112"><span class="id" title="variable">constraint</span></a>) <a class="idref" href="VLSM.Core.Composition.html#P:113"><span class="id" title="variable">P</span></a>) (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSMProjections.html#basic_VLSM_strong_incl"><span class="id" title="lemma">basic_VLSM_strong_incl</span></a>; <span class="id" title="tactic">cbv</span>; <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="constraint_free_valid_state_message_preservation" class="idref" href="#constraint_free_valid_state_message_preservation"><span class="id" title="lemma">constraint_free_valid_state_message_preservation</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="constraint:114" class="idref" href="#constraint:114"><span class="id" title="binder">constraint</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="s:115" class="idref" href="#s:115"><span class="id" title="binder">s</span></a> <a id="om:116" class="idref" href="#om:116"><span class="id" title="binder">om</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hsom:117" class="idref" href="#Hsom:117"><span class="id" title="binder">Hsom</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint:114"><span class="id" title="variable">constraint</span></a>) <a class="idref" href="VLSM.Core.Composition.html#s:115"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:116"><span class="id" title="variable">om</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:115"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:116"><span class="id" title="variable">om</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Hsom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSMProjections.html#VLSM_incl_valid_state_message"><span class="id" title="lemma">VLSM_incl_valid_state_message</span></a> (<a class="idref" href="VLSM.Core.Composition.html#constraint_free_incl"><span class="id" title="lemma">constraint_free_incl</span></a> <span class="id" title="var">constraint</span>)); <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="VLSM_composition.sec_composite_vlsm.sec_constraint_subsumption" class="idref" href="#VLSM_composition.sec_composite_vlsm.sec_constraint_subsumption"><span class="id" title="section">sec_constraint_subsumption</span></a>.<br/>
</div>

<div class="doc">
<a id="lab58"></a><h2 class="section">Constraint subsumption</h2>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

A <code>constraint1</code> is subsumed by <code>constraint2</code> if <code>constraint1</code> is stronger
than <code>constraint2</code> for any input.

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="strong_constraint_subsumption" class="idref" href="#strong_constraint_subsumption"><span class="id" title="definition">strong_constraint_subsumption</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="constraint1:118" class="idref" href="#constraint1:118"><span class="id" title="binder">constraint1</span></a> <a id="constraint2:119" class="idref" href="#constraint2:119"><span class="id" title="binder">constraint2</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="l:120" class="idref" href="#l:120"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a>) (<a id="som:121" class="idref" href="#som:121"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#constraint1:118"><span class="id" title="variable">constraint1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:120"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.Composition.html#som:121"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint2:119"><span class="id" title="variable">constraint2</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:120"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.Composition.html#som:121"><span class="id" title="variable">som</span></a>.<br/>

<br/>
</div>

<div class="doc">
A weaker version of <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#strong_constraint_subsumption"><span class="id" title="definition">strong_constraint_subsumption</span></a></span> requiring <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#input_valid"><span class="id" title="definition">input_valid</span></a></span>ity
w.r.t. <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a></span> as a precondition for the subsumption
property.

<div class="paragraph"> </div>

This definition is useful in proving <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSMProjections.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a></span>usions between <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="section">VLSM</span></a></span>s
pre-loaded with all messages (Lemma <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#preloaded_constraint_subsumption_incl"><span class="id" title="lemma">preloaded_constraint_subsumption_incl</span></a></span>).

<div class="paragraph"> </div>

Although there are currently no explicit cases for its usage, it might be more
useful than the <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#strong_constraint_subsumption"><span class="id" title="definition">strong_constraint_subsumption</span></a></span> property in cases where proving
constraint subsumption relies on the state being valid and/or the message
being valid.

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="preloaded_constraint_subsumption" class="idref" href="#preloaded_constraint_subsumption"><span class="id" title="definition">preloaded_constraint_subsumption</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="constraint1:122" class="idref" href="#constraint1:122"><span class="id" title="binder">constraint1</span></a> <a id="constraint2:123" class="idref" href="#constraint2:123"><span class="id" title="binder">constraint2</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="l:124" class="idref" href="#l:124"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a>) (<a id="som:125" class="idref" href="#som:125"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid"><span class="id" title="definition">input_valid</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint1:122"><span class="id" title="variable">constraint1</span></a>)) <a class="idref" href="VLSM.Core.Composition.html#l:124"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.Composition.html#som:125"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#constraint2:123"><span class="id" title="variable">constraint2</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:124"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.Composition.html#som:125"><span class="id" title="variable">som</span></a>.<br/>

<br/>
</div>

<div class="doc">
A weaker version of <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#preloaded_constraint_subsumption"><span class="id" title="definition">preloaded_constraint_subsumption</span></a></span> requiring <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#input_valid"><span class="id" title="definition">input_valid</span></a></span>ity
as a precondition for the subsumption property.

<div class="paragraph"> </div>

This definition is usually useful in proving <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSMProjections.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a></span>usions between regular
<span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="section">VLSM</span></a></span>s (Lemma <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#constraint_subsumption_incl"><span class="id" title="lemma">constraint_subsumption_incl</span></a></span>).

<div class="paragraph"> </div>

It is more useful than the <span class="inlinecode"><a class="idref" href="VLSM.Core.Composition.html#strong_constraint_subsumption"><span class="id" title="definition">strong_constraint_subsumption</span></a></span> property in cases
where proving constraint subsumption relies on the state/message being valid
and/or the message being valid (e.g., Lemma <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.FixedSetEquivocation.html#Fixed_incl_StrongFixed"><span class="id" title="lemma">Fixed_incl_StrongFixed</span></a></span>).

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="input_valid_constraint_subsumption" class="idref" href="#input_valid_constraint_subsumption"><span class="id" title="definition">input_valid_constraint_subsumption</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="constraint1:126" class="idref" href="#constraint1:126"><span class="id" title="binder">constraint1</span></a> <a id="constraint2:127" class="idref" href="#constraint2:127"><span class="id" title="binder">constraint2</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="l:128" class="idref" href="#l:128"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a>) (<a id="som:129" class="idref" href="#som:129"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid"><span class="id" title="definition">input_valid</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint1:126"><span class="id" title="variable">constraint1</span></a>) <a class="idref" href="VLSM.Core.Composition.html#l:128"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.Composition.html#som:129"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint2:127"><span class="id" title="variable">constraint2</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:128"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.Composition.html#som:129"><span class="id" title="variable">som</span></a>.<br/>

<br/>
</div>

<div class="doc">
The weakest form <span class="inlinecode"><span class="id" title="var">constraint_subsumption</span></span> also requires that the input
state and message are valid for the composition under the second constraint.

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="weak_input_valid_constraint_subsumption" class="idref" href="#weak_input_valid_constraint_subsumption"><span class="id" title="definition">weak_input_valid_constraint_subsumption</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="constraint1:130" class="idref" href="#constraint1:130"><span class="id" title="binder">constraint1</span></a> <a id="constraint2:131" class="idref" href="#constraint2:131"><span class="id" title="binder">constraint2</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="l:132" class="idref" href="#l:132"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a>) (<a id="som:133" class="idref" href="#som:133"><span class="id" title="binder">som</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid"><span class="id" title="definition">input_valid</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint1:130"><span class="id" title="variable">constraint1</span></a>) <a class="idref" href="VLSM.Core.Composition.html#l:132"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.Composition.html#som:133"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint2:131"><span class="id" title="variable">constraint2</span></a>) <a class="idref" href="VLSM.Core.Composition.html#som:133"><span class="id" title="variable">som</span></a><span class="id" title="notation">.1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_prop"><span class="id" title="definition">option_valid_message_prop</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint2:131"><span class="id" title="variable">constraint2</span></a>) <a class="idref" href="VLSM.Core.Composition.html#som:133"><span class="id" title="variable">som</span></a><span class="id" title="notation">.2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#constraint2:131"><span class="id" title="variable">constraint2</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:132"><span class="id" title="variable">l</span></a> <a class="idref" href="VLSM.Core.Composition.html#som:133"><span class="id" title="variable">som</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="constraint1:134" class="idref" href="#constraint1:134"><span class="id" title="binder">constraint1</span></a> <a id="constraint2:135" class="idref" href="#constraint2:135"><span class="id" title="binder">constraint2</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X1:136" class="idref" href="#X1:136"><span class="id" title="binder">X1</span></a> := <a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint1:134"><span class="id" title="variable">constraint1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X2:137" class="idref" href="#X2:137"><span class="id" title="binder">X2</span></a> := <a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint2:135"><span class="id" title="variable">constraint2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br/>

<br/>
</div>

<div class="doc">
Let <code>X1</code>, <code>X2</code> be two compositions of the same family of VLSMs but with
constraints <code>constraint1</code> and <code>constraint2</code>, respectively. Further assume
that <code>constraint1</code> is subsumed by <code>constraint2</code>.

<div class="paragraph"> </div>

We will show that <code>X1</code> is trace-included into <code>X2</code> by applying
Lemma <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSMProjections.html#basic_VLSM_incl"><span class="id" title="lemma">basic_VLSM_incl</span></a></span>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.sec_composite_vlsm.sec_constraint_subsumption"><span class="id" title="section">sec_constraint_subsumption</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="preloaded_constraint_free_incl" class="idref" href="#preloaded_constraint_free_incl"><span class="id" title="lemma">preloaded_constraint_free_incl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="constraint:161" class="idref" href="#constraint:161"><span class="id" title="binder">constraint</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSMProjections.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint:161"><span class="id" title="variable">constraint</span></a>)) (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#preloaded_constraint_subsumption_incl"><span class="id" title="lemma">preloaded_constraint_subsumption_incl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO(traiansf):&nbsp;There&nbsp;are&nbsp;many&nbsp;places&nbsp;where,&nbsp;because&nbsp;the&nbsp;lemma&nbsp;below<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;was&nbsp;missing,&nbsp;it&nbsp;was&nbsp;either&nbsp;reproved&nbsp;locally,&nbsp;or&nbsp;multiple&nbsp;VLSM_incl_<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lemmas&nbsp;were&nbsp;used&nbsp;to&nbsp;achieve&nbsp;a&nbsp;similar&nbsp;result.&nbsp;It&nbsp;would&nbsp;be&nbsp;nice&nbsp;to<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;find&nbsp;those&nbsp;usages&nbsp;and&nbsp;use&nbsp;this&nbsp;lemma&nbsp;instad.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="constraint_preloaded_free_incl" class="idref" href="#constraint_preloaded_free_incl"><span class="id" title="lemma">constraint_preloaded_free_incl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="constraint:162" class="idref" href="#constraint:162"><span class="id" title="binder">constraint</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSMProjections.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint:162"><span class="id" title="variable">constraint</span></a>) (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSMProjections.html#VLSM_incl_trans"><span class="id" title="lemma">VLSM_incl_trans</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSMProjections.html#vlsm_incl_pre_loaded_with_all_messages_vlsm"><span class="id" title="lemma">vlsm_incl_pre_loaded_with_all_messages_vlsm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#preloaded_constraint_free_incl"><span class="id" title="lemma">preloaded_constraint_free_incl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="lift_to_composite_generalized_preloaded_vlsm_full_projection" class="idref" href="#lift_to_composite_generalized_preloaded_vlsm_full_projection"><span class="id" title="lemma">lift_to_composite_generalized_preloaded_vlsm_full_projection</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="P:163" class="idref" href="#P:163"><span class="id" title="binder">P</span></a> <a id="Q:164" class="idref" href="#Q:164"><span class="id" title="binder">Q</span></a> : <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="PimpliesQ:166" class="idref" href="#PimpliesQ:166"><span class="id" title="binder">PimpliesQ</span></a> : <span class="id" title="notation">forall</span> <a id="m:165" class="idref" href="#m:165"><span class="id" title="binder">m</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.Composition.html#P:163"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.Composition.html#m:165"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#Q:164"><span class="id" title="variable">Q</span></a> <a class="idref" href="VLSM.Core.Composition.html#m:165"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="j:167" class="idref" href="#j:167"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSMProjections.html#VLSM_full_projection"><span class="id" title="record">VLSM_full_projection</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_vlsm"><span class="id" title="definition">pre_loaded_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:167"><span class="id" title="variable">j</span></a>) <a class="idref" href="VLSM.Core.Composition.html#P:163"><span class="id" title="variable">P</span></a>) (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_vlsm"><span class="id" title="definition">pre_loaded_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#Q:164"><span class="id" title="variable">Q</span></a>) (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_label"><span class="id" title="definition">lift_to_composite_label</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:167"><span class="id" title="variable">j</span></a>) (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:167"><span class="id" title="variable">j</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSMProjections.html#basic_VLSM_full_projection_preloaded_with"><span class="id" title="lemma">basic_VLSM_full_projection_preloaded_with</span></a>; <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">revert</span> <span class="id" title="var">m</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">split</span>; [|<span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>]. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#vtransition"><span class="id" title="definition">vtransition</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>. <span class="id" title="tactic">replace</span> (<a class="idref" href="VLSM.Core.VLSM.html#vtransition"><span class="id" title="definition">vtransition</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">j</span>) <span class="id" title="var">l</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_twice"><span class="id" title="lemma">state_update_twice</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state_initial"><span class="id" title="lemma">lift_to_composite_state_initial</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <span class="id" title="var">j</span>, (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>); <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="lift_to_composite_preloaded_vlsm_full_projection" class="idref" href="#lift_to_composite_preloaded_vlsm_full_projection"><span class="id" title="lemma">lift_to_composite_preloaded_vlsm_full_projection</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="j:168" class="idref" href="#j:168"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSMProjections.html#VLSM_full_projection"><span class="id" title="record">VLSM_full_projection</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:168"><span class="id" title="variable">j</span></a>)) (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a>) (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_label"><span class="id" title="definition">lift_to_composite_label</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:168"><span class="id" title="variable">j</span></a>) (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:168"><span class="id" title="variable">j</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSMProjections.html#basic_VLSM_full_projection_preloaded"><span class="id" title="lemma">basic_VLSM_full_projection_preloaded</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span>; [|<span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>]. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#vtransition"><span class="id" title="definition">vtransition</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#vtransition"><span class="id" title="definition">vtransition</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>. <span class="id" title="tactic">replace</span> (<a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="method">transition</span></a> <span class="id" title="var">l</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_twice"><span class="id" title="lemma">state_update_twice</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state_initial"><span class="id" title="lemma">lift_to_composite_state_initial</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="valid_state_preloaded_composite_free_lift" class="idref" href="#valid_state_preloaded_composite_free_lift"><span class="id" title="lemma">valid_state_preloaded_composite_free_lift</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="j:169" class="idref" href="#j:169"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="sj:170" class="idref" href="#sj:170"><span class="id" title="binder">sj</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:169"><span class="id" title="variable">j</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hp:171" class="idref" href="#Hp:171"><span class="id" title="binder">Hp</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:169"><span class="id" title="variable">j</span></a>)) <a class="idref" href="VLSM.Core.Composition.html#sj:170"><span class="id" title="variable">sj</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a>) (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:169"><span class="id" title="variable">j</span></a> <a class="idref" href="VLSM.Core.Composition.html#sj:170"><span class="id" title="variable">sj</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSMProjections.html#VLSM_full_projection_valid_state"><span class="id" title="definition">VLSM_full_projection_valid_state</span></a> (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_preloaded_vlsm_full_projection"><span class="id" title="lemma">lift_to_composite_preloaded_vlsm_full_projection</span></a> <span class="id" title="var">j</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="can_emit_composite_free_lift" class="idref" href="#can_emit_composite_free_lift"><span class="id" title="lemma">can_emit_composite_free_lift</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="P:172" class="idref" href="#P:172"><span class="id" title="binder">P</span></a> <a id="Q:173" class="idref" href="#Q:173"><span class="id" title="binder">Q</span></a> : <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="PimpliesQ:175" class="idref" href="#PimpliesQ:175"><span class="id" title="binder">PimpliesQ</span></a> : <span class="id" title="notation">forall</span> <a id="m:174" class="idref" href="#m:174"><span class="id" title="binder">m</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.Composition.html#P:172"><span class="id" title="variable">P</span></a> <a class="idref" href="VLSM.Core.Composition.html#m:174"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#Q:173"><span class="id" title="variable">Q</span></a> <a class="idref" href="VLSM.Core.Composition.html#m:174"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="j:176" class="idref" href="#j:176"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:177" class="idref" href="#m:177"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htrj:178" class="idref" href="#Htrj:178"><span class="id" title="binder">Htrj</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_vlsm"><span class="id" title="definition">pre_loaded_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:176"><span class="id" title="variable">j</span></a>) <a class="idref" href="VLSM.Core.Composition.html#P:172"><span class="id" title="variable">P</span></a>) <a class="idref" href="VLSM.Core.Composition.html#m:177"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_vlsm"><span class="id" title="definition">pre_loaded_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#Q:173"><span class="id" title="variable">Q</span></a>) <a class="idref" href="VLSM.Core.Composition.html#m:177"><span class="id" title="variable">m</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSMProjections.html#VLSM_full_projection_can_emit"><span class="id" title="definition">VLSM_full_projection_can_emit</span></a> (<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_generalized_preloaded_vlsm_full_projection"><span class="id" title="lemma">lift_to_composite_generalized_preloaded_vlsm_full_projection</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">PimpliesQ</span> <span class="id" title="var">j</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Updating a composite initial state with a component initial state
    yields a composite initial state 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="composite_free_update_initial_state_with_initial" class="idref" href="#composite_free_update_initial_state_with_initial"><span class="id" title="lemma">composite_free_update_initial_state_with_initial</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:179" class="idref" href="#s:179"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hs:180" class="idref" href="#Hs:180"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:179"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:181" class="idref" href="#i:181"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="si:182" class="idref" href="#si:182"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:181"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hsi:183" class="idref" href="#Hsi:183"><span class="id" title="binder">Hsi</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:181"><span class="id" title="variable">i</span></a>) <a class="idref" href="VLSM.Core.Composition.html#si:182"><span class="id" title="variable">si</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:179"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:181"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#si:182"><span class="id" title="variable">si</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">j</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Updating a composite <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state"><span class="id" title="definition">valid_state</span></a></span> for the free composition with
    a component initial state yields a composite <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state"><span class="id" title="definition">valid_state</span></a></span> 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="composite_free_update_state_with_initial" class="idref" href="#composite_free_update_state_with_initial"><span class="id" title="lemma">composite_free_update_state_with_initial</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:184" class="idref" href="#s:184"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hs:185" class="idref" href="#Hs:185"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:184"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:186" class="idref" href="#i:186"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="si:187" class="idref" href="#si:187"><span class="id" title="binder">si</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:186"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hsi:188" class="idref" href="#Hsi:188"><span class="id" title="binder">Hsi</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:186"><span class="id" title="variable">i</span></a>) <a class="idref" href="VLSM.Core.Composition.html#si:187"><span class="id" title="variable">si</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:184"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:186"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#si:187"><span class="id" title="variable">si</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop_ind"><span class="id" title="lemma">valid_state_prop_ind</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">remember</span> (<a class="idref" href="VLSM.Core.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">si</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">s'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hs'</span> : <a class="idref" href="VLSM.Core.VLSM.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <span class="id" title="var">s'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#composite_free_update_initial_state_with_initial"><span class="id" title="lemma">composite_free_update_initial_state_with_initial</span></a>; <span class="id" title="tactic">assumption</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_is_valid"><span class="id" title="lemma">initial_state_is_valid</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hps</span> [<span class="id" title="var">Hom</span> <span class="id" title="var">Hv</span>]] <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="method">transition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hv</span> <span class="id" title="var">_</span>]. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">j</span>, <span class="id" title="var">lj</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.VLSM.html#vtransition"><span class="id" title="definition">vtransition</span></a> (<a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">j</span>) <span class="id" title="var">lj</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span> <span class="id" title="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> (<span class="id" title="var">sj'</span>, <span class="id" title="var">omj'</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Htj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">s'</span> <span class="id" title="var">om'</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">j</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_twice"><span class="id" title="lemma">state_update_twice</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_twice_neq"><span class="id" title="lemma">state_update_twice_neq</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_om</span> <span class="id" title="var">Hs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hom</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_s</span> <span class="id" title="var">Hom</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.VLSM.html#valid_generated_state_message"><span class="id" title="constructor">valid_generated_state_message</span></a> <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hs</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hom</span>  (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">j</span> <span class="id" title="var">lj</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Hgen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">n'</span> : <span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <span class="id" title="var">i</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">intro</span> <span class="id" title="var">contra</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">elim</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">Hgen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>; <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hgen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hgen</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Htj</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hgen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span> <span class="id" title="var">_</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hgen</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition.sec_composite_vlsm"><span class="id" title="section">sec_composite_vlsm</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.Composition.html#VLSM_composition"><span class="id" title="section">VLSM_composition</span></a>.<br/>

<br/>
</div>

<div class="doc">
   These basic projection lemmas relate
   the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a></span> and <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a></span> of
   a composite VLSM back to those conditions holding
   over projections to individual components of the state.

<div class="paragraph"> </div>

   Because the composition may have validly produced
   messages that are not valid for an individual
   component (by interaction between components),
   We cannot just use properties <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state_message_prop"><span class="id" title="inductive">valid_state_message_prop</span></a></span> <span class="inlinecode">(<span class="id" title="var">IM</span></span> <span class="inlinecode"><span class="id" title="var">i</span>)</span>
   or <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a></span> <span class="inlinecode">(<span class="id" title="var">IM</span></span> <span class="inlinecode"><span class="id" title="var">i</span>)</span>.
   For simplicity these lemmas use
   <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a></span> <span class="inlinecode">(<span class="id" title="var">IM</span></span> <span class="inlinecode"><span class="id" title="var">i</span>)</span>.

<div class="paragraph"> </div>

   This does not precisely reflect the set of
   messages and transitions that can actually be
   seen in projections of transitions of the composite VLSM,
   but seems to be the best we can do with a result
   type that doesn't mention the other components or
   the composition constraint of the composite.

<div class="paragraph"> </div>

   Later in this file a
   <span class="inlinecode"><span class="id" title="var">composite_constrained_projection_vlsm</span></span> is defined
   that shares the states of <span class="inlinecode"><span class="id" title="var">IM</span></span> <span class="inlinecode"><span class="id" title="var">i</span></span> which is more
   precise.
 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="valid_state_project_preloaded_to_preloaded" class="idref" href="#valid_state_project_preloaded_to_preloaded"><span class="id" title="lemma">valid_state_project_preloaded_to_preloaded</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="message:189" class="idref" href="#message:189"><span class="id" title="binder">message</span></a> `{<a id="EqDecision0:191" class="idref" href="#EqDecision0:191"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:191" class="idref" href="#EqDecision0:191"><span class="id" title="binder">index</span></a>} (<a id="IM:192" class="idref" href="#IM:192"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Core.Composition.html#index:190"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:189"><span class="id" title="variable">message</span></a>) <a id="constraint:193" class="idref" href="#constraint:193"><span class="id" title="binder">constraint</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:194" class="idref" href="#X:194"><span class="id" title="binder">X</span></a>:=<a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:192"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint:193"><span class="id" title="variable">constraint</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:195" class="idref" href="#s:195"><span class="id" title="binder">s</span></a>: <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#X:194"><span class="id" title="variable">X</span></a>)) <a id="i:196" class="idref" href="#i:196"><span class="id" title="binder">i</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#X:194"><span class="id" title="variable">X</span></a>) <a class="idref" href="VLSM.Core.Composition.html#s:195"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#IM:192"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:196"><span class="id" title="variable">i</span></a>)) (<a class="idref" href="VLSM.Core.Composition.html#s:195"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:196"><span class="id" title="variable">i</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">om</span> <span class="id" title="var">Hproto</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#preloaded_valid_state_prop_iff"><span class="id" title="lemma">preloaded_valid_state_prop_iff</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hproto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#preloaded_valid_initial_state"><span class="id" title="constructor">preloaded_valid_initial_state</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">Hs</span> <span class="id" title="var">i</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">j</span> <span class="id" title="var">lj</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#vtransition"><span class="id" title="definition">vtransition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.VLSM.html#vtransition"><span class="id" title="definition">vtransition</span></a> (<span class="id" title="var">IM</span> <span class="id" title="var">j</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">si'</span>, <span class="id" title="var">_om'</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hti</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion_clear</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">j</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span> <span class="id" title="var">j</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#preloaded_protocol_generated"><span class="id" title="constructor">preloaded_protocol_generated</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">lj</span> (<span class="id" title="var">s</span> <span class="id" title="var">i</span>) <span class="id" title="var">om</span> <span class="id" title="var">_om'</span>;[<span class="id" title="tactic">assumption</span>| |<span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">IHHproto1</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="valid_state_project_preloaded" class="idref" href="#valid_state_project_preloaded"><span class="id" title="lemma">valid_state_project_preloaded</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="message:197" class="idref" href="#message:197"><span class="id" title="binder">message</span></a> `{<a id="EqDecision0:199" class="idref" href="#EqDecision0:199"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:199" class="idref" href="#EqDecision0:199"><span class="id" title="binder">index</span></a>} (<a id="IM:200" class="idref" href="#IM:200"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Core.Composition.html#index:198"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:197"><span class="id" title="variable">message</span></a>) <a id="constraint:201" class="idref" href="#constraint:201"><span class="id" title="binder">constraint</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:202" class="idref" href="#X:202"><span class="id" title="binder">X</span></a>:=<a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:200"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint:201"><span class="id" title="variable">constraint</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:203" class="idref" href="#s:203"><span class="id" title="binder">s</span></a>: <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="VLSM.Core.Composition.html#X:202"><span class="id" title="variable">X</span></a>) <a id="i:204" class="idref" href="#i:204"><span class="id" title="binder">i</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.Composition.html#X:202"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:203"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#IM:200"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:204"><span class="id" title="variable">i</span></a>)) (<a class="idref" href="VLSM.Core.Composition.html#s:203"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:204"><span class="id" title="variable">i</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> <span class="id" title="var">X</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <span class="id" title="var">X</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">om</span> <span class="id" title="var">Hproto</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#valid_state_project_preloaded_to_preloaded"><span class="id" title="lemma">valid_state_project_preloaded_to_preloaded</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">om</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#preloaded_weaken_valid_state_message_prop"><span class="id" title="lemma">preloaded_weaken_valid_state_message_prop</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_transition_project_active" class="idref" href="#composite_transition_project_active"><span class="id" title="lemma">composite_transition_project_active</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="message:205" class="idref" href="#message:205"><span class="id" title="binder">message</span></a> `{<a id="EqDecision0:207" class="idref" href="#EqDecision0:207"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:207" class="idref" href="#EqDecision0:207"><span class="id" title="binder">index</span></a>} (<a id="IM:208" class="idref" href="#IM:208"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Core.Composition.html#index:206"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:205"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="l:209" class="idref" href="#l:209"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#label"><span class="id" title="method">label</span></a>) (<a id="s:210" class="idref" href="#s:210"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>) (<a id="im:211" class="idref" href="#im:211"><span class="id" title="binder">im</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:205"><span class="id" title="variable">message</span></a>) (<a id="s':212" class="idref" href="#s':212"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>) (<a id="om:213" class="idref" href="#om:213"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:205"><span class="id" title="variable">message</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#composite_transition"><span class="id" title="definition">composite_transition</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:208"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:209"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:210"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#im:211"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':212"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:213"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#vtransition"><span class="id" title="definition">vtransition</span></a> (<a class="idref" href="VLSM.Core.Composition.html#IM:208"><span class="id" title="variable">IM</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:209"><span class="id" title="variable">l</span></a>)) (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:209"><span class="id" title="variable">l</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:210"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:209"><span class="id" title="variable">l</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#im:211"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':212"><span class="id" title="variable">s'</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:209"><span class="id" title="variable">l</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:213"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.VLSM.html#vtransition"><span class="id" title="definition">vtransition</span></a> (<span class="id" title="var">IM</span> <span class="id" title="var">x</span>) <span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span> <span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">im</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_preloaded_project_active" class="idref" href="#input_valid_transition_preloaded_project_active"><span class="id" title="lemma">input_valid_transition_preloaded_project_active</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:214" class="idref" href="#message:214"><span class="id" title="binder">message</span></a>} `{<a id="EqDecision0:216" class="idref" href="#EqDecision0:216"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:216" class="idref" href="#EqDecision0:216"><span class="id" title="binder">V</span></a>} {<a id="IM:217" class="idref" href="#IM:217"><span class="id" title="binder">IM</span></a>: <a class="idref" href="VLSM.Core.Composition.html#V:215"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:214"><span class="id" title="variable">message</span></a>} {<a id="constraint:218" class="idref" href="#constraint:218"><span class="id" title="binder">constraint</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:219" class="idref" href="#X:219"><span class="id" title="binder">X</span></a> := <a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:217"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint:218"><span class="id" title="variable">constraint</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="l:220" class="idref" href="#l:220"><span class="id" title="binder">l</span></a> <a id="s:221" class="idref" href="#s:221"><span class="id" title="binder">s</span></a> <a id="im:222" class="idref" href="#im:222"><span class="id" title="binder">im</span></a> <a id="s':223" class="idref" href="#s':223"><span class="id" title="binder">s'</span></a> <a id="om:224" class="idref" href="#om:224"><span class="id" title="binder">om</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#X:219"><span class="id" title="variable">X</span></a>) <a class="idref" href="VLSM.Core.Composition.html#l:220"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:221"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="VLSM.Core.Composition.html#im:222"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':223"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="VLSM.Core.Composition.html#om:224"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#IM:217"><span class="id" title="variable">IM</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:220"><span class="id" title="variable">l</span></a>))) (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:220"><span class="id" title="variable">l</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:221"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:220"><span class="id" title="variable">l</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#im:222"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':223"><span class="id" title="variable">s'</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:220"><span class="id" title="variable">l</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:224"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hptrans</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hptrans</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hpvalid</span> <span class="id" title="var">Htrans</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hpvalid</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hproto_s</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hcvalid</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;[|<span class="id" title="tactic">split</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">revert</span> <span class="id" title="var">Hproto_s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#valid_state_project_preloaded_to_preloaded"><span class="id" title="lemma">valid_state_project_preloaded_to_preloaded</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#any_message_is_valid_in_preloaded"><span class="id" title="lemma">any_message_is_valid_in_preloaded</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hcvalid</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">revert</span> <span class="id" title="var">Htrans</span>; <span class="id" title="var">rapply</span> <a class="idref" href="VLSM.Core.Composition.html#composite_transition_project_active"><span class="id" title="lemma">composite_transition_project_active</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_project_active" class="idref" href="#input_valid_transition_project_active"><span class="id" title="lemma">input_valid_transition_project_active</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:225" class="idref" href="#message:225"><span class="id" title="binder">message</span></a>} `{<a id="EqDecision0:227" class="idref" href="#EqDecision0:227"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:227" class="idref" href="#EqDecision0:227"><span class="id" title="binder">V</span></a>} {<a id="IM:228" class="idref" href="#IM:228"><span class="id" title="binder">IM</span></a>: <a class="idref" href="VLSM.Core.Composition.html#V:226"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:225"><span class="id" title="variable">message</span></a>} {<a id="constraint:229" class="idref" href="#constraint:229"><span class="id" title="binder">constraint</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:230" class="idref" href="#X:230"><span class="id" title="binder">X</span></a> := <a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:228"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint:229"><span class="id" title="variable">constraint</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="l:231" class="idref" href="#l:231"><span class="id" title="binder">l</span></a> <a id="s:232" class="idref" href="#s:232"><span class="id" title="binder">s</span></a> <a id="im:233" class="idref" href="#im:233"><span class="id" title="binder">im</span></a> <a id="s':234" class="idref" href="#s':234"><span class="id" title="binder">s'</span></a> <a id="om:235" class="idref" href="#om:235"><span class="id" title="binder">om</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.Composition.html#X:230"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:231"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:232"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="VLSM.Core.Composition.html#im:233"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':234"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="VLSM.Core.Composition.html#om:235"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#IM:228"><span class="id" title="variable">IM</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:231"><span class="id" title="variable">l</span></a>))) (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:231"><span class="id" title="variable">l</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:232"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:231"><span class="id" title="variable">l</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#im:233"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':234"><span class="id" title="variable">s'</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:231"><span class="id" title="variable">l</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:235"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hptrans</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#preloaded_weaken_input_valid_transition"><span class="id" title="lemma">preloaded_weaken_input_valid_transition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hptrans</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Hptrans</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#input_valid_transition_preloaded_project_active"><span class="id" title="lemma">input_valid_transition_preloaded_project_active</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_preloaded_project_any" class="idref" href="#input_valid_transition_preloaded_project_any"><span class="id" title="lemma">input_valid_transition_preloaded_project_any</span></a> {<a id="V:236" class="idref" href="#V:236"><span class="id" title="binder">V</span></a>} (<a id="i:237" class="idref" href="#i:237"><span class="id" title="binder">i</span></a>:<a class="idref" href="VLSM.Core.Composition.html#V:236"><span class="id" title="variable">V</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:238" class="idref" href="#message:238"><span class="id" title="binder">message</span></a>} `{<a id="EqDecision0:239" class="idref" href="#EqDecision0:239"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:239" class="idref" href="#EqDecision0:239"><span class="id" title="binder">V</span></a>} {<a id="IM:240" class="idref" href="#IM:240"><span class="id" title="binder">IM</span></a>: <a class="idref" href="VLSM.Core.Composition.html#V:236"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:238"><span class="id" title="variable">message</span></a>} {<a id="constraint:241" class="idref" href="#constraint:241"><span class="id" title="binder">constraint</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:242" class="idref" href="#X:242"><span class="id" title="binder">X</span></a> := <a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:240"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint:241"><span class="id" title="variable">constraint</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:243" class="idref" href="#l:243"><span class="id" title="binder">l</span></a>:<a class="idref" href="VLSM.Core.VLSM.html#vlabel"><span class="id" title="definition">vlabel</span></a> <a class="idref" href="VLSM.Core.Composition.html#X:242"><span class="id" title="variable">X</span></a>) <a id="s:244" class="idref" href="#s:244"><span class="id" title="binder">s</span></a> <a id="im:245" class="idref" href="#im:245"><span class="id" title="binder">im</span></a> <a id="s':246" class="idref" href="#s':246"><span class="id" title="binder">s'</span></a> <a id="om:247" class="idref" href="#om:247"><span class="id" title="binder">om</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#X:242"><span class="id" title="variable">X</span></a>) <a class="idref" href="VLSM.Core.Composition.html#l:243"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:244"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="VLSM.Core.Composition.html#im:245"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':246"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="VLSM.Core.Composition.html#om:247"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:244"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:237"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#s':246"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:237"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="li:248" class="idref" href="#li:248"><span class="id" title="binder">li</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#l:243"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:237"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#li:248"><span class="id" title="variable">li</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#IM:240"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:237"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#li:248"><span class="id" title="variable">li</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:244"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:237"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="VLSM.Core.Composition.html#im:245"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':246"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:237"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="VLSM.Core.Composition.html#om:247"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hptrans</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">j</span> <span class="id" title="var">lj</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">j</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">subst</span> <span class="id" title="var">j</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">lj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;[<span class="id" title="tactic">reflexivity</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Hptrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#input_valid_transition_preloaded_project_active"><span class="id" title="lemma">input_valid_transition_preloaded_project_active</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hptrans</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hpvalid</span> <span class="id" title="var">Htrans</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.VLSM.html#vtransition"><span class="id" title="definition">vtransition</span></a> (<span class="id" title="var">IM</span> <span class="id" title="var">j</span>) <span class="id" title="var">lj</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span> <span class="id" title="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">im</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion_clear</span> <span class="id" title="var">Htrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_project_any" class="idref" href="#input_valid_transition_project_any"><span class="id" title="lemma">input_valid_transition_project_any</span></a> {<a id="V:249" class="idref" href="#V:249"><span class="id" title="binder">V</span></a>} (<a id="i:250" class="idref" href="#i:250"><span class="id" title="binder">i</span></a>:<a class="idref" href="VLSM.Core.Composition.html#V:249"><span class="id" title="variable">V</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:251" class="idref" href="#message:251"><span class="id" title="binder">message</span></a>} `{<a id="EqDecision0:252" class="idref" href="#EqDecision0:252"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:252" class="idref" href="#EqDecision0:252"><span class="id" title="binder">V</span></a>} {<a id="IM:253" class="idref" href="#IM:253"><span class="id" title="binder">IM</span></a>: <a class="idref" href="VLSM.Core.Composition.html#V:249"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:251"><span class="id" title="variable">message</span></a>} {<a id="constraint:254" class="idref" href="#constraint:254"><span class="id" title="binder">constraint</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:255" class="idref" href="#X:255"><span class="id" title="binder">X</span></a> := <a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:253"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint:254"><span class="id" title="variable">constraint</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:256" class="idref" href="#l:256"><span class="id" title="binder">l</span></a>:<a class="idref" href="VLSM.Core.VLSM.html#vlabel"><span class="id" title="definition">vlabel</span></a> <a class="idref" href="VLSM.Core.Composition.html#X:255"><span class="id" title="variable">X</span></a>) <a id="s:257" class="idref" href="#s:257"><span class="id" title="binder">s</span></a> <a id="im:258" class="idref" href="#im:258"><span class="id" title="binder">im</span></a> <a id="s':259" class="idref" href="#s':259"><span class="id" title="binder">s'</span></a> <a id="om:260" class="idref" href="#om:260"><span class="id" title="binder">om</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.Composition.html#X:255"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:256"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:257"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="VLSM.Core.Composition.html#im:258"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':259"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="VLSM.Core.Composition.html#om:260"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:257"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:250"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#s':259"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:250"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="li:261" class="idref" href="#li:261"><span class="id" title="binder">li</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#l:256"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:250"><span class="id" title="variable">i</span></a> <a class="idref" href="VLSM.Core.Composition.html#li:261"><span class="id" title="variable">li</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#IM:253"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:250"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#li:261"><span class="id" title="variable">li</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:257"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:250"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="VLSM.Core.Composition.html#im:258"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':259"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:250"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="VLSM.Core.Composition.html#om:260"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hproto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#preloaded_weaken_input_valid_transition"><span class="id" title="lemma">preloaded_weaken_input_valid_transition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hproto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Hproto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#input_valid_transition_preloaded_project_any"><span class="id" title="lemma">input_valid_transition_preloaded_project_any</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If a message can be emitted by a composition, then it can be emited by one of the
components.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="can_emit_composite_project" class="idref" href="#can_emit_composite_project"><span class="id" title="lemma">can_emit_composite_project</span></a><br/>
&nbsp;&nbsp;{<a id="message:262" class="idref" href="#message:262"><span class="id" title="binder">message</span></a>} `{<a id="EqDecision0:264" class="idref" href="#EqDecision0:264"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:264" class="idref" href="#EqDecision0:264"><span class="id" title="binder">V</span></a>} {<a id="IM:265" class="idref" href="#IM:265"><span class="id" title="binder">IM</span></a>: <a class="idref" href="VLSM.Core.Composition.html#V:263"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:262"><span class="id" title="variable">message</span></a>} {<a id="constraint:266" class="idref" href="#constraint:266"><span class="id" title="binder">constraint</span></a>}<br/>
&nbsp;&nbsp;(<a id="X:267" class="idref" href="#X:267"><span class="id" title="binder">X</span></a> := <a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:265"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint:266"><span class="id" title="variable">constraint</span></a>)<br/>
&nbsp;&nbsp;(<a id="m:268" class="idref" href="#m:268"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.Composition.html#message:262"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hemit:269" class="idref" href="#Hemit:269"><span class="id" title="binder">Hemit</span></a>: <a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#X:267"><span class="id" title="variable">X</span></a>) <a class="idref" href="VLSM.Core.Composition.html#m:268"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="j:270" class="idref" href="#j:270"><span class="id" title="binder">j</span></a> : <a class="idref" href="VLSM.Core.Composition.html#V:263"><span class="id" title="variable">V</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#IM:265"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#j:270"><span class="id" title="variable">j</span></a>)) <a class="idref" href="VLSM.Core.Composition.html#m:268"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#can_emit_iff"><span class="id" title="lemma">can_emit_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hemit</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hemit</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s2</span> [(<span class="id" title="var">s1</span>, <span class="id" title="var">oim</span>) [<span class="id" title="var">l</span> <span class="id" title="var">Ht</span>]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#can_emit_iff"><span class="id" title="lemma">can_emit_iff</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">s2</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <span class="id" title="var">l</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s1</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <span class="id" title="var">l</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">oim</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>, (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> <span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#input_valid_transition_preloaded_project_active"><span class="id" title="lemma">input_valid_transition_preloaded_project_active</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="binary_free_composition" class="idref" href="#binary_free_composition"><span class="id" title="section">binary_free_composition</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab59"></a><h2 class="section">Free composition of two VLSMs</h2>


<div class="paragraph"> </div>

This serves an example of how composition can be built, but is also being
used in defining the <span class="inlinecode"><a class="idref" href="VLSM.Core.ByzantineTraces.html#byzantine_trace_prop"><span class="id" title="definition">byzantine_trace_prop</span></a></span>erties.

<div class="paragraph"> </div>

This instantiates the regular composition using the <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a></span> type as an <code>index</code>.

<div class="paragraph"> </div>


</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:271" class="idref" href="#message:271"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="M1:272" class="idref" href="#M1:272"><span class="id" title="binder">M1</span></a> <a id="M2:273" class="idref" href="#M2:273"><span class="id" title="binder">M2</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:271"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="binary_index" class="idref" href="#binary_index"><span class="id" title="definition">binary_index</span></a> : <span class="id" title="keyword">Set</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="first" class="idref" href="#first"><span class="id" title="definition">first</span></a> : <a class="idref" href="VLSM.Core.Composition.html#binary_index"><span class="id" title="definition">binary_index</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="second" class="idref" href="#second"><span class="id" title="definition">second</span></a> : <a class="idref" href="VLSM.Core.Composition.html#binary_index"><span class="id" title="definition">binary_index</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="binary_index_dec" class="idref" href="#binary_index_dec"><span class="id" title="instance">binary_index_dec</span></a> :  <span class="id" title="abbreviation">EqDecision</span> <a class="idref" href="VLSM.Core.Composition.html#binary_index"><span class="id" title="definition">binary_index</span></a> := <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="binary_index_inhabited" class="idref" href="#binary_index_inhabited"><span class="id" title="instance">binary_index_inhabited</span></a> : <span class="id" title="class">Inhabited</span> <a class="idref" href="VLSM.Core.Composition.html#binary_index"><span class="id" title="definition">binary_index</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">populate</span> <a class="idref" href="VLSM.Core.Composition.html#first"><span class="id" title="definition">first</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="binary_IM" class="idref" href="#binary_IM"><span class="id" title="definition">binary_IM</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:274" class="idref" href="#i:274"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#binary_index"><span class="id" title="definition">binary_index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#binary_free_composition.message"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="VLSM.Core.Composition.html#i:274"><span class="id" title="variable">i</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> =&gt; <a class="idref" href="VLSM.Core.Composition.html#binary_free_composition.M1"><span class="id" title="variable">M1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> =&gt; <a class="idref" href="VLSM.Core.Composition.html#binary_free_composition.M2"><span class="id" title="variable">M2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="binary_free_composition" class="idref" href="#binary_free_composition"><span class="id" title="definition">binary_free_composition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#binary_free_composition.message"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#binary_IM"><span class="id" title="definition">binary_IM</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.Composition.html#binary_free_composition"><span class="id" title="section">binary_free_composition</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="composite_decidable_initial_message" class="idref" href="#composite_decidable_initial_message"><span class="id" title="section">composite_decidable_initial_message</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab60"></a><h2 class="section">Composite decidable initial message</h2>


<div class="paragraph"> </div>

Here we show that if the <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a></span>erty is decidable for every
component, then it is decidable for a finite composition as well.

<div class="paragraph"> </div>


</div>
<div class="code">

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;{<a id="message:276" class="idref" href="#message:276"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;`{<a id="H:279" class="idref" href="#H:279"><span class="id" title="binder">finite.Finite</span></a> <a id="H:279" class="idref" href="#H:279"><span class="id" title="binder">index</span></a>}<br/>
&nbsp;&nbsp;(<a id="IM:280" class="idref" href="#IM:280"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Core.Composition.html#index:277"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:276"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="constraint:281" class="idref" href="#constraint:281"><span class="id" title="binder">constraint</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:280"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:280"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:276"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="composite_decidable_initial_message" class="idref" href="#composite_decidable_initial_message"><span class="id" title="lemma">composite_decidable_initial_message</span></a><br/>
&nbsp;&nbsp;(<a id="Hdec_init:283" class="idref" href="#Hdec_init:283"><span class="id" title="binder">Hdec_init</span></a> : <span class="id" title="notation">forall</span> <a id="i:282" class="idref" href="#i:282"><span class="id" title="binder">i</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#vdecidable_initial_messages_prop"><span class="id" title="definition">vdecidable_initial_messages_prop</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_decidable_initial_message.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:282"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#decidable_initial_messages_prop"><span class="id" title="definition">decidable_initial_messages_prop</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_vlsm_machine"><span class="id" title="definition">composite_vlsm_machine</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_decidable_initial_message.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_decidable_initial_message.constraint"><span class="id" title="variable">constraint</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">m</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#composite_initial_message_prop"><span class="id" title="definition">composite_initial_message_prop</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Lib.Preamble.html#Decision_iff"><span class="id" title="lemma">Decision_iff</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">P</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#Exists"><span class="id" title="inductive">List.Exists</span></a> (<span class="id" title="keyword">fun</span> <a id="i:285" class="idref" href="#i:285"><span class="id" title="binder">i</span></a> =&gt; <a class="idref" href="VLSM.Core.VLSM.html#vinitial_message_prop"><span class="id" title="definition">vinitial_message_prop</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_decidable_initial_message.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:284"><span class="id" title="variable">i</span></a>) <span class="id" title="var">m</span>) (<span class="id" title="method">enum</span> <a class="idref" href="VLSM.Core.Composition.html#composite_decidable_initial_message.index"><span class="id" title="variable">index</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="VLSM.Lib.ListExtras.html#exists_finite"><span class="id" title="lemma">exists_finite</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> [<span class="id" title="var">i</span> <span class="id" title="var">Hm</span>]; <span class="id" title="tactic">exists</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hm</span>). <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hm</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">im</span> <span class="id" title="var">Hinit</span>] <span class="id" title="var">Him</span>]. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> @<span class="id" title="instance">Exists_dec</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hdec_init</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.Composition.html#composite_decidable_initial_message"><span class="id" title="section">composite_decidable_initial_message</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="composite_plan_properties" class="idref" href="#composite_plan_properties"><span class="id" title="section">composite_plan_properties</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="message:286" class="idref" href="#message:286"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="index:287" class="idref" href="#index:287"><span class="id" title="binder">index</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="EqDecision0:288" class="idref" href="#EqDecision0:288"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:288" class="idref" href="#EqDecision0:288"><span class="id" title="binder">index</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="IM:289" class="idref" href="#IM:289"><span class="id" title="binder">IM</span></a> :<a class="idref" href="VLSM.Core.Composition.html#index:287"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:286"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Free:290" class="idref" href="#Free:290"><span class="id" title="binder">Free</span></a> := <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:289"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br/>

<br/>
</div>

<div class="doc">
<a id="lab61"></a><h2 class="section">Composite Plan Properties</h2>


<div class="paragraph"> </div>

     The following results concern facts about applying a <span class="inlinecode"><a class="idref" href="VLSM.Core.Plans.html#plan"><span class="id" title="definition">plan</span></a></span> <span class="inlinecode"><span class="id" title="var">Free</span></span> <code>P</code>
     to a <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a></span> <span class="inlinecode"><span class="id" title="var">Free</span></span> <code>s'</code>, knowing its effects on a different <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a></span> <span class="inlinecode"><span class="id" title="var">Free</span></span> <code>s</code>
     which shares some relevant features with <code>s'</code>. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;A&nbsp;transition&nbsp;on&nbsp;component&nbsp;&lt;&lt;i&gt;&gt;&nbsp;is&nbsp;<span class="inlinecode"><span class="id" title="var">input_valid</span></span>&nbsp;from&nbsp;&lt;&lt;s'&gt;&gt;&nbsp;if&nbsp;it&nbsp;is<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">input_valid</span></span>&nbsp;from&nbsp;&lt;&lt;s&gt;&gt;&nbsp;and&nbsp;their&nbsp;&lt;&lt;i&gt;&gt;'th&nbsp;components&nbsp;are&nbsp;equal.&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="relevant_component_transition" class="idref" href="#relevant_component_transition"><span class="id" title="lemma">relevant_component_transition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:291" class="idref" href="#s:291"><span class="id" title="binder">s</span></a> <a id="s':292" class="idref" href="#s':292"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.Free"><span class="id" title="variable">Free</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:293" class="idref" href="#l:293"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vlabel"><span class="id" title="definition">vlabel</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.Free"><span class="id" title="variable">Free</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="input:294" class="idref" href="#input:294"><span class="id" title="binder">input</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:295" class="idref" href="#i:295"><span class="id" title="binder">i</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:293"><span class="id" title="variable">l</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Heq:296" class="idref" href="#Heq:296"><span class="id" title="binder">Heq</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:291"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:295"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':292"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:295"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hprs:297" class="idref" href="#Hprs:297"><span class="id" title="binder">Hprs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#s':292"><span class="id" title="variable">s'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hiv:298" class="idref" href="#Hiv:298"><span class="id" title="binder">Hiv</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid"><span class="id" title="definition">input_valid</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:293"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:291"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#input:294"><span class="id" title="variable">input</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#input_valid"><span class="id" title="definition">input_valid</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:293"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':292"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#input:294"><span class="id" title="variable">input</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid"><span class="id" title="definition">input_valid</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">intuition</span>|<span class="id" title="tactic">intuition</span>|..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#valid"><span class="id" title="method">valid</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#constrained_composite_valid"><span class="id" title="definition">constrained_composite_valid</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#composite_valid"><span class="id" title="definition">composite_valid</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#free_constraint"><span class="id" title="definition">free_constraint</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#vvalid"><span class="id" title="definition">vvalid</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">i</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;effect&nbsp;of&nbsp;the&nbsp;transition&nbsp;is&nbsp;also&nbsp;the&nbsp;same&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="relevant_component_transition2" class="idref" href="#relevant_component_transition2"><span class="id" title="lemma">relevant_component_transition2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:299" class="idref" href="#s:299"><span class="id" title="binder">s</span></a> <a id="s':300" class="idref" href="#s':300"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.Free"><span class="id" title="variable">Free</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:301" class="idref" href="#l:301"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vlabel"><span class="id" title="definition">vlabel</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.Free"><span class="id" title="variable">Free</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="input:302" class="idref" href="#input:302"><span class="id" title="binder">input</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:303" class="idref" href="#i:303"><span class="id" title="binder">i</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:301"><span class="id" title="variable">l</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Heq:304" class="idref" href="#Heq:304"><span class="id" title="binder">Heq</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:299"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:303"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':300"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:303"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hprs:305" class="idref" href="#Hprs:305"><span class="id" title="binder">Hprs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#s':300"><span class="id" title="variable">s'</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="dest:306" class="idref" href="#dest:306"><span class="id" title="binder">dest</span></a>, <a id="output:307" class="idref" href="#output:307"><span class="id" title="binder">output</span></a>) := <a class="idref" href="VLSM.Core.VLSM.html#vtransition"><span class="id" title="definition">vtransition</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:301"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:299"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#input:302"><span class="id" title="variable">input</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="dest':308" class="idref" href="#dest':308"><span class="id" title="binder">dest'</span></a>, <a id="output':309" class="idref" href="#output':309"><span class="id" title="binder">output'</span></a>) := <a class="idref" href="VLSM.Core.VLSM.html#vtransition"><span class="id" title="definition">vtransition</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#l:301"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':300"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#input:302"><span class="id" title="variable">input</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#output:307"><span class="id" title="variable">output</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#output':309"><span class="id" title="variable">output'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#dest:306"><span class="id" title="variable">dest</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:303"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#dest':308"><span class="id" title="variable">dest'</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:303"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#vtransition"><span class="id" title="definition">vtransition</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#transition"><span class="id" title="method">transition</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">i</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.VLSM.html#vtransition"><span class="id" title="definition">vtransition</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">x</span>) <span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s'</span> <span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">input</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>); [<span class="id" title="tactic">intuition</span>|..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="relevant_components_one" class="idref" href="#relevant_components_one"><span class="id" title="lemma">relevant_components_one</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:310" class="idref" href="#s:310"><span class="id" title="binder">s</span></a> <a id="s':311" class="idref" href="#s':311"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.Free"><span class="id" title="variable">Free</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hprs':312" class="idref" href="#Hprs':312"><span class="id" title="binder">Hprs'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#s':311"><span class="id" title="variable">s'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ai:313" class="idref" href="#ai:313"><span class="id" title="binder">ai</span></a> : <a class="idref" href="VLSM.Core.Plans.html#vplan_item"><span class="id" title="definition">vplan_item</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.Free"><span class="id" title="variable">Free</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:314" class="idref" href="#i:314"><span class="id" title="binder">i</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> (<a class="idref" href="VLSM.Core.Plans.html#label_a"><span class="id" title="projection">label_a</span></a> <a class="idref" href="VLSM.Core.Composition.html#ai:313"><span class="id" title="variable">ai</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Heq:315" class="idref" href="#Heq:315"><span class="id" title="binder">Heq</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:310"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:314"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':311"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:314"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hpr:316" class="idref" href="#Hpr:316"><span class="id" title="binder">Hpr</span></a> : <a class="idref" href="VLSM.Core.Plans.html#finite_valid_plan_from"><span class="id" title="definition">finite_valid_plan_from</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:310"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.Composition.html#ai:313"><span class="id" title="variable">ai</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="res':317" class="idref" href="#res':317"><span class="id" title="binder">res'</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="VLSM.Core.Plans.html#apply_plan"><span class="id" title="definition">apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#s':311"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.Composition.html#ai:313"><span class="id" title="variable">ai</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="res:318" class="idref" href="#res:318"><span class="id" title="binder">res</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="VLSM.Core.Plans.html#apply_plan"><span class="id" title="definition">apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:310"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.Composition.html#ai:313"><span class="id" title="variable">ai</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Plans.html#finite_valid_plan_from"><span class="id" title="definition">finite_valid_plan_from</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#s':311"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.Composition.html#ai:313"><span class="id" title="variable">ai</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#res':317"><span class="id" title="variable">res'</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:314"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#res:318"><span class="id" title="variable">res</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:314"><span class="id" title="variable">i</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Plans.html#finite_valid_plan_from"><span class="id" title="definition">finite_valid_plan_from</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Plans.html#apply_plan"><span class="id" title="definition">apply_plan</span></a>, <a class="idref" href="VLSM.Core.Plans.html#_apply_plan"><span class="id" title="definition">_apply_plan</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">ai</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- <span class="id" title="keyword">context</span> [<span class="id" title="keyword">let</span> (<span class="id" title="var">_</span>, <span class="id" title="var">_</span>) := <span class="id" title="keyword">let</span> (<span class="id" title="var">_</span>, <span class="id" title="var">_</span>) := ?<span class="id" title="var">t</span> <span class="id" title="tactic">in</span> <span class="id" title="var">_</span> <span class="id" title="tactic">in</span> <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span> <span class="id" title="var">eqn</span> : <span class="id" title="var">eq_trans'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- <span class="id" title="keyword">context</span> [<span class="id" title="keyword">let</span> (<span class="id" title="var">_</span>, <span class="id" title="var">_</span>) := <span class="id" title="keyword">let</span> (<span class="id" title="var">_</span>, <span class="id" title="var">_</span>) := ?<span class="id" title="var">t</span> <span class="id" title="tactic">in</span> <span class="id" title="var">_</span> <span class="id" title="tactic">in</span> <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span> <span class="id" title="var">eqn</span> : <span class="id" title="var">eq_trans</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hpr</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">Ht'</span> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <span class="id" title="var">label_a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">input_a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">o</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>). {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hpr_valid</span> <span class="id" title="var">Htrans</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#relevant_component_transition"><span class="id" title="lemma">relevant_component_transition</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">s'</span> := <span class="id" title="var">s'</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hpr_valid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span> : <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_extend"><span class="id" title="constructor">finite_valid_trace_from_extend</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_empty"><span class="id" title="constructor">finite_valid_trace_from_empty</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition_destination"><span class="id" title="lemma">input_valid_transition_destination</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht'</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.Composition.html#relevant_component_transition2"><span class="id" title="lemma">relevant_component_transition2</span></a> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> <span class="id" title="var">label_a</span> <span class="id" title="var">input_a</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hrel</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrel</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">i</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hrel</span> <span class="id" title="var">Heq</span> <span class="id" title="var">Hprs'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">type</span> <span class="id" title="keyword">of</span> <span class="id" title="var">Hrel</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="keyword">let</span> (<span class="id" title="var">_</span>, <span class="id" title="var">_</span>) := ?<span class="id" title="var">t</span> <span class="id" title="tactic">in</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">replace</span> <span class="id" title="var">t</span> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">o0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrel</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">type</span> <span class="id" title="keyword">of</span> <span class="id" title="var">Hrel</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="keyword">let</span> (<span class="id" title="var">_</span>, <span class="id" title="var">_</span>) := ?<span class="id" title="var">t</span> <span class="id" title="tactic">in</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">replace</span> <span class="id" title="var">t</span> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">o</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrel</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Transitioning&nbsp;on&nbsp;some&nbsp;index&nbsp;different&nbsp;from&nbsp;&lt;&lt;i&gt;&gt;&nbsp;does&nbsp;not&nbsp;affect<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;component&nbsp;i.&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="irrelevant_components_one" class="idref" href="#irrelevant_components_one"><span class="id" title="lemma">irrelevant_components_one</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:319" class="idref" href="#s:319"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ai:320" class="idref" href="#ai:320"><span class="id" title="binder">ai</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_plan_item"><span class="id" title="definition">composite_plan_item</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:321" class="idref" href="#i:321"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hdif:322" class="idref" href="#Hdif:322"><span class="id" title="binder">Hdif</span></a> : <a class="idref" href="VLSM.Core.Composition.html#i:321"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> (<a class="idref" href="VLSM.Core.Plans.html#label_a"><span class="id" title="projection">label_a</span></a> <a class="idref" href="VLSM.Core.Composition.html#ai:320"><span class="id" title="variable">ai</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="res:323" class="idref" href="#res:323"><span class="id" title="binder">res</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_apply_plan"><span class="id" title="definition">composite_apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:319"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.Composition.html#ai:320"><span class="id" title="variable">ai</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#res:323"><span class="id" title="variable">res</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:321"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:319"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:321"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#composite_apply_plan"><span class="id" title="definition">composite_apply_plan</span></a>, <a class="idref" href="VLSM.Core.Plans.html#apply_plan"><span class="id" title="definition">apply_plan</span></a>, <a class="idref" href="VLSM.Core.Plans.html#_apply_plan"><span class="id" title="definition">_apply_plan</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">ai</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- <span class="id" title="keyword">context</span> [<span class="id" title="keyword">let</span> (<span class="id" title="var">_</span>, <span class="id" title="var">_</span>) := <span class="id" title="keyword">let</span> (<span class="id" title="var">_</span>, <span class="id" title="var">_</span>) := ?<span class="id" title="var">t</span> <span class="id" title="tactic">in</span> <span class="id" title="var">_</span> <span class="id" title="tactic">in</span> <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span> <span class="id" title="var">eqn</span> : <span class="id" title="var">eq_trans</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#vtransition"><span class="id" title="definition">vtransition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">eq_trans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">eq_trans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">label_a</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">type</span> <span class="id" title="keyword">of</span> <span class="id" title="var">eq_trans</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="keyword">let</span> (<a id="si':326" class="idref" href="#si':326"><span class="id" title="binder">si'</span></a>, <a id="om':327" class="idref" href="#om':327"><span class="id" title="binder">om'</span></a>) := ?<span class="id" title="var">t</span> <span class="id" title="tactic">in</span> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span> <span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">eq_trans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Same&nbsp;as&nbsp;the&nbsp;previous&nbsp;result,&nbsp;but&nbsp;for&nbsp;multiple&nbsp;transitions.&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="irrelevant_components" class="idref" href="#irrelevant_components"><span class="id" title="lemma">irrelevant_components</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:328" class="idref" href="#s:328"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="a:329" class="idref" href="#a:329"><span class="id" title="binder">a</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_plan"><span class="id" title="definition">composite_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="a_indices:330" class="idref" href="#a_indices:330"><span class="id" title="binder">a_indices</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> (@<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> (@<a class="idref" href="VLSM.Core.Plans.html#label_a"><span class="id" title="projection">label_a</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <a class="idref" href="VLSM.Core.Composition.html#a:329"><span class="id" title="variable">a</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:331" class="idref" href="#i:331"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hdif:332" class="idref" href="#Hdif:332"><span class="id" title="binder">Hdif</span></a> : <a class="idref" href="VLSM.Core.Composition.html#i:331"><span class="id" title="variable">i</span></a> <span class="id" title="notation"></span> <a class="idref" href="VLSM.Core.Composition.html#a_indices:330"><span class="id" title="variable">a_indices</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="res:333" class="idref" href="#res:333"><span class="id" title="binder">res</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_apply_plan"><span class="id" title="definition">composite_apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:328"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#a:329"><span class="id" title="variable">a</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#res:333"><span class="id" title="variable">res</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:331"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:328"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:331"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">a</span> <span class="id" title="keyword">using</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#rev_ind"><span class="id" title="lemma">rev_ind</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="VLSM.Core.Composition.html#composite_apply_plan_app"><span class="id" title="definition">composite_apply_plan_app</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.IM"><span class="id" title="variable">IM</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.Composition.html#composite_apply_plan"><span class="id" title="definition">composite_apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">s</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">tra</span>, <span class="id" title="var">sa</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">eq_a</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.Composition.html#composite_apply_plan"><span class="id" title="definition">composite_apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">sa</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <span class="id" title="keyword">as</span> (<span class="id" title="var">trx</span>, <span class="id" title="var">sx</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">eq_x</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">a_indices</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdif</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdif</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdif</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">IHa</span>. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradict</span> <span class="id" title="var">Hdif</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_app</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHa</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">sx</span> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_apply_plan"><span class="id" title="definition">composite_apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">sa</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">rewrite</span> <span class="id" title="var">eq_x</span>; <span class="id" title="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#irrelevant_components_one"><span class="id" title="lemma">irrelevant_components_one</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">contra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">contra</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdif</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_app</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdif</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdif</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradict</span> <span class="id" title="var">Hdif</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>; <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Same&nbsp;as&nbsp;relevant_components_one&nbsp;but&nbsp;for&nbsp;multiple&nbsp;transitions&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="relevant_components" class="idref" href="#relevant_components"><span class="id" title="lemma">relevant_components</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:334" class="idref" href="#s:334"><span class="id" title="binder">s</span></a> <a id="s':335" class="idref" href="#s':335"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.Free"><span class="id" title="variable">Free</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hprs':336" class="idref" href="#Hprs':336"><span class="id" title="binder">Hprs'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#s':335"><span class="id" title="variable">s'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="a:337" class="idref" href="#a:337"><span class="id" title="binder">a</span></a> : <a class="idref" href="VLSM.Core.Plans.html#plan"><span class="id" title="definition">plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.Free"><span class="id" title="variable">Free</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="a_indices:338" class="idref" href="#a_indices:338"><span class="id" title="binder">a_indices</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> (@<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> (@<a class="idref" href="VLSM.Core.Plans.html#label_a"><span class="id" title="projection">label_a</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <a class="idref" href="VLSM.Core.Composition.html#a:337"><span class="id" title="variable">a</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="li:339" class="idref" href="#li:339"><span class="id" title="binder">li</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Heq:341" class="idref" href="#Heq:341"><span class="id" title="binder">Heq</span></a> : <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:340" class="idref" href="#i:340"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.Composition.html#i:340"><span class="id" title="variable">i</span></a> <span class="id" title="notation"></span> <a class="idref" href="VLSM.Core.Composition.html#li:339"><span class="id" title="variable">li</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s':335"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:340"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s:334"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:340"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hincl:342" class="idref" href="#Hincl:342"><span class="id" title="binder">Hincl</span></a> : <a class="idref" href="VLSM.Core.Composition.html#a_indices:338"><span class="id" title="variable">a_indices</span></a> <span class="id" title="notation"></span> <a class="idref" href="VLSM.Core.Composition.html#li:339"><span class="id" title="variable">li</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hpr:343" class="idref" href="#Hpr:343"><span class="id" title="binder">Hpr</span></a> : <a class="idref" href="VLSM.Core.Plans.html#finite_valid_plan_from"><span class="id" title="definition">finite_valid_plan_from</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:334"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#a:337"><span class="id" title="variable">a</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="res':344" class="idref" href="#res':344"><span class="id" title="binder">res'</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="VLSM.Core.Plans.html#apply_plan"><span class="id" title="definition">apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#s':335"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.Composition.html#a:337"><span class="id" title="variable">a</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="res:345" class="idref" href="#res:345"><span class="id" title="binder">res</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="VLSM.Core.Plans.html#apply_plan"><span class="id" title="definition">apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#s:334"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Composition.html#a:337"><span class="id" title="variable">a</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Plans.html#finite_valid_plan_from"><span class="id" title="definition">finite_valid_plan_from</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Composition.html#s':335"><span class="id" title="variable">s'</span></a> <a class="idref" href="VLSM.Core.Composition.html#a:337"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="i:346" class="idref" href="#i:346"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.index"><span class="id" title="variable">index</span></a><span class="id" title="notation">),</span> <a class="idref" href="VLSM.Core.Composition.html#i:346"><span class="id" title="variable">i</span></a> <span class="id" title="notation"></span> <a class="idref" href="VLSM.Core.Composition.html#li:339"><span class="id" title="variable">li</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#res':344"><span class="id" title="variable">res'</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:346"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#res:345"><span class="id" title="variable">res</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:346"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">a</span> <span class="id" title="keyword">using</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#rev_ind"><span class="id" title="lemma">rev_ind</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Plans.html#finite_valid_plan_empty"><span class="id" title="lemma">finite_valid_plan_empty</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Plans.html#finite_valid_plan_from_app_iff"><span class="id" title="lemma">finite_valid_plan_from_app_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hpr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hrem</span> <span class="id" title="var">Hsingle</span>].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">IHa</span>. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> (@<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <a id="n:348" class="idref" href="#n:348"><span class="id" title="binder">n</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.index"><span class="id" title="variable">index</span></a> =&gt; <a class="idref" href="VLSM.Core.VLSM.html#vlabel"><span class="id" title="definition">vlabel</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#n:347"><span class="id" title="variable">n</span></a>))) (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="VLSM.Core.Plans.html#label_a"><span class="id" title="projection">label_a</span></a> <span class="id" title="var">a</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">small</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> <span class="id" title="var">a_indices</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">a_indices</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">e</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>, <span class="id" title="lemma">elem_of_app</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">IHa</span>. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHa</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">IHapr</span> <span class="id" title="var">IHaind</span>].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.Composition.html#relevant_components_one"><span class="id" title="lemma">relevant_components_one</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="VLSM.Core.Plans.html#apply_plan"><span class="id" title="definition">apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <span class="id" title="var">s</span> <span class="id" title="var">a</span>)) (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="VLSM.Core.Plans.html#apply_plan"><span class="id" title="definition">apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <span class="id" title="var">s'</span> <span class="id" title="var">a</span>))) <span class="id" title="keyword">as</span> <span class="id" title="var">Hrel</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">Hrel</span>. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Plans.html#apply_plan_last_valid"><span class="id" title="lemma">apply_plan_last_valid</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span> : <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hrel</span> <span class="id" title="var">x</span>); <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">Hrel</span>. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHaind</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> (<a class="idref" href="VLSM.Core.Plans.html#label_a"><span class="id" title="projection">label_a</span></a> <span class="id" title="var">x</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHaind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hincl</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> (<a class="idref" href="VLSM.Core.Plans.html#label_a"><span class="id" title="projection">label_a</span></a> <span class="id" title="var">x</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hincl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">a_indices</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>, <span class="id" title="lemma">elem_of_app</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>; <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hrel</span> <span class="id" title="var">Hsingle</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrel</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hrelpr</span> <span class="id" title="var">Hrelind</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Plans.html#finite_valid_plan_from_app_iff"><span class="id" title="lemma">finite_valid_plan_from_app_iff</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">Hi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHaind</span> <span class="id" title="var">i</span> <span class="id" title="var">Hi</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Heq</span> <span class="id" title="var">i</span> <span class="id" title="var">Hi</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="VLSM.Core.Plans.html#apply_plan_app"><span class="id" title="definition">apply_plan_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.Plans.html#apply_plan"><span class="id" title="definition">apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <span class="id" title="var">s'</span> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> (<span class="id" title="var">tra'</span>, <span class="id" title="var">sa'</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">eq_as'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.Plans.html#apply_plan"><span class="id" title="definition">apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <span class="id" title="var">s</span> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> (<span class="id" title="var">tra</span>, <span class="id" title="var">sa</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">eq_as</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.Plans.html#apply_plan"><span class="id" title="definition">apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <span class="id" title="var">sa</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> (<span class="id" title="var">trx</span>, <span class="id" title="var">sx</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">eq_xsa</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.Plans.html#apply_plan"><span class="id" title="definition">apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.Free"><span class="id" title="variable">Free</span></a> <span class="id" title="var">sa'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> (<span class="id" title="var">trx'</span>, <span class="id" title="var">sx'</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">eq_xsa'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> (<a class="idref" href="VLSM.Core.Plans.html#label_a"><span class="id" title="projection">label_a</span></a> <span class="id" title="var">x</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> <span class="id" title="var">e</span>; <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.Composition.html#irrelevant_components_one"><span class="id" title="lemma">irrelevant_components_one</span></a> <span class="id" title="var">sa</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hdiff</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hdiff</span> <span class="id" title="var">x</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.Composition.html#irrelevant_components_one"><span class="id" title="lemma">irrelevant_components_one</span></a> <span class="id" title="var">sa'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hdiff0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hdiff0</span> <span class="id" title="var">x</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#f_equal"><span class="id" title="lemma">f_equal</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">eq_xsa</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#f_equal"><span class="id" title="lemma">f_equal</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">eq_xsa'</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">sx'</span> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_apply_plan"><span class="id" title="definition">composite_apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">sa'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">sx</span> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_apply_plan"><span class="id" title="definition">composite_apply_plan</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">sa</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">Hdiff</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">Hdiff0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.Composition.html#composite_plan_properties"><span class="id" title="section">composite_plan_properties</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="empty_composition_properties" class="idref" href="#empty_composition_properties"><span class="id" title="section">empty_composition_properties</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span> {<a id="message:349" class="idref" href="#message:349"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;`{<a id="H:352" class="idref" href="#H:352"><span class="id" title="binder">finite.Finite</span></a> <a id="H:352" class="idref" href="#H:352"><span class="id" title="binder">index</span></a>}<br/>
&nbsp;&nbsp;(<a id="IM:353" class="idref" href="#IM:353"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Core.Composition.html#index:350"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:349"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="constraint:354" class="idref" href="#constraint:354"><span class="id" title="binder">constraint</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:353"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:353"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:349"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="X:355" class="idref" href="#X:355"><span class="id" title="binder">X</span></a> := <a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM:353"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#constraint:354"><span class="id" title="variable">constraint</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hempty_index:356" class="idref" href="#Hempty_index:356"><span class="id" title="binder">Hempty_index</span></a> : <span class="id" title="method">enum</span> <a class="idref" href="VLSM.Core.Composition.html#index:350"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="empty_composition_no_index" class="idref" href="#empty_composition_no_index"><span class="id" title="lemma">empty_composition_no_index</span></a><br/>
&nbsp;&nbsp;(<a id="i:357" class="idref" href="#i:357"><span class="id" title="binder">i</span></a> : <a class="idref" href="VLSM.Core.Composition.html#empty_composition_properties.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="notation">False</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="method">elem_of_enum</span> <span class="id" title="var">i</span>); <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.Composition.html#empty_composition_properties.Hempty_index"><span class="id" title="variable">Hempty_index</span></a>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_nil</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="empty_composition_single_state" class="idref" href="#empty_composition_single_state"><span class="id" title="lemma">empty_composition_single_state</span></a><br/>
&nbsp;&nbsp;(<a id="s:358" class="idref" href="#s:358"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#empty_composition_properties.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Composition.html#s:358"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_s0"><span class="id" title="definition">composite_s0</span></a> <a class="idref" href="VLSM.Core.Composition.html#empty_composition_properties.IM"><span class="id" title="variable">IM</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">extensionality</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">elim</span> (<a class="idref" href="VLSM.Core.Composition.html#empty_composition_no_index"><span class="id" title="lemma">empty_composition_no_index</span></a> <span class="id" title="var">i</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="empty_composition_no_label" class="idref" href="#empty_composition_no_label"><span class="id" title="lemma">empty_composition_no_label</span></a><br/>
&nbsp;&nbsp;(<a id="l:359" class="idref" href="#l:359"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="VLSM.Core.Composition.html#empty_composition_properties.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="notation">False</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i</span>, <span class="id" title="var">_</span>). <span class="id" title="tactic">elim</span> (<a class="idref" href="VLSM.Core.Composition.html#empty_composition_no_index"><span class="id" title="lemma">empty_composition_no_index</span></a> <span class="id" title="var">i</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="empty_composition_no_initial_message" class="idref" href="#empty_composition_no_initial_message"><span class="id" title="lemma">empty_composition_no_initial_message</span></a><br/>
&nbsp;&nbsp;: <span class="id" title="notation">forall</span> <a id="m:360" class="idref" href="#m:360"><span class="id" title="binder">m</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_initial_message_prop"><span class="id" title="definition">composite_initial_message_prop</span></a> <a class="idref" href="VLSM.Core.Composition.html#empty_composition_properties.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Composition.html#m:360"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">m</span> [<span class="id" title="var">i</span> <span class="id" title="var">_</span>]. <span class="id" title="tactic">elim</span> (<a class="idref" href="VLSM.Core.Composition.html#empty_composition_no_index"><span class="id" title="lemma">empty_composition_no_index</span></a> <span class="id" title="var">i</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="empty_composition_no_emit" class="idref" href="#empty_composition_no_emit"><span class="id" title="lemma">empty_composition_no_emit</span></a><br/>
&nbsp;&nbsp;: <span class="id" title="notation">forall</span> <a id="m:361" class="idref" href="#m:361"><span class="id" title="binder">m</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a> <a class="idref" href="VLSM.Core.Composition.html#empty_composition_properties.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.Composition.html#m:361"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">m</span> [<span class="id" title="var">s'</span> [<span class="id" title="var">l</span> <span class="id" title="var">_</span>]]; <span class="id" title="tactic">elim</span> (<a class="idref" href="VLSM.Core.Composition.html#empty_composition_no_label"><span class="id" title="lemma">empty_composition_no_label</span></a> <span class="id" title="var">l</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="empty_composition_no_valid_message" class="idref" href="#empty_composition_no_valid_message"><span class="id" title="lemma">empty_composition_no_valid_message</span></a><br/>
&nbsp;&nbsp;: <span class="id" title="notation">forall</span> <a id="m:362" class="idref" href="#m:362"><span class="id" title="binder">m</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Core.Composition.html#empty_composition_properties.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.Composition.html#m:362"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">m</span> <span class="id" title="var">Hm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#emitted_messages_are_valid_iff"><span class="id" title="lemma">emitted_messages_are_valid_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hinit</span> | <span class="id" title="var">Hemit</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">elim</span> (<a class="idref" href="VLSM.Core.Composition.html#empty_composition_no_initial_message"><span class="id" title="lemma">empty_composition_no_initial_message</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hinit</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">elim</span> (<a class="idref" href="VLSM.Core.Composition.html#empty_composition_no_emit"><span class="id" title="lemma">empty_composition_no_emit</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hemit</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="pre_loaded_empty_composition_no_emit" class="idref" href="#pre_loaded_empty_composition_no_emit"><span class="id" title="lemma">pre_loaded_empty_composition_no_emit</span></a><br/>
&nbsp;&nbsp;(<a id="seed:363" class="idref" href="#seed:363"><span class="id" title="binder">seed</span></a> : <a class="idref" href="VLSM.Core.Composition.html#empty_composition_properties.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="PreX:364" class="idref" href="#PreX:364"><span class="id" title="binder">PreX</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_vlsm"><span class="id" title="definition">pre_loaded_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#empty_composition_properties.X"><span class="id" title="variable">X</span></a> <a class="idref" href="VLSM.Core.Composition.html#seed:363"><span class="id" title="variable">seed</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="notation">forall</span> <a id="m:365" class="idref" href="#m:365"><span class="id" title="binder">m</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a> <a class="idref" href="VLSM.Core.Composition.html#PreX:364"><span class="id" title="variable">PreX</span></a> <a class="idref" href="VLSM.Core.Composition.html#m:365"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">m</span> [<span class="id" title="var">s'</span> [<span class="id" title="var">l</span> <span class="id" title="var">_</span>]]; <span class="id" title="tactic">elim</span> (<a class="idref" href="VLSM.Core.Composition.html#empty_composition_no_label"><span class="id" title="lemma">empty_composition_no_label</span></a> <span class="id" title="var">l</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="pre_loaded_with_all_empty_composition_no_emit" class="idref" href="#pre_loaded_with_all_empty_composition_no_emit"><span class="id" title="lemma">pre_loaded_with_all_empty_composition_no_emit</span></a><br/>
&nbsp;&nbsp;: <span class="id" title="notation">forall</span> <a id="m:366" class="idref" href="#m:366"><span class="id" title="binder">m</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#empty_composition_properties.X"><span class="id" title="variable">X</span></a>) <a class="idref" href="VLSM.Core.Composition.html#m:366"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">m</span> [<span class="id" title="var">s'</span> [<span class="id" title="var">l</span> <span class="id" title="var">_</span>]]; <span class="id" title="tactic">elim</span> (<a class="idref" href="VLSM.Core.Composition.html#empty_composition_no_label"><span class="id" title="lemma">empty_composition_no_label</span></a> <span class="id" title="var">l</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.Composition.html#empty_composition_properties"><span class="id" title="section">empty_composition_properties</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab62"></a><h2 class="section">Properties of extensionally-equal indexed compositions</h2>


<div class="paragraph"> </div>

If two indexed sets of VLSMs are extensionally-equal, then we can establish a
<span class="inlinecode"><a class="idref" href="VLSM.Core.VLSMProjections.html#VLSM_full_projection"><span class="id" title="record">VLSM_full_projection</span></a></span> between their compositions with subsumable constraints
(and pre-loaded with the same set of messages).

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="sec_same_IM_full_projection" class="idref" href="#sec_same_IM_full_projection"><span class="id" title="section">sec_same_IM_full_projection</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;{<a id="message:367" class="idref" href="#message:367"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;`{<a id="EqDecision0:369" class="idref" href="#EqDecision0:369"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:369" class="idref" href="#EqDecision0:369"><span class="id" title="binder">index</span></a>}<br/>
&nbsp;&nbsp;(<a id="IM1:370" class="idref" href="#IM1:370"><span class="id" title="binder">IM1</span></a> <a id="IM2:371" class="idref" href="#IM2:371"><span class="id" title="binder">IM2</span></a> : <a class="idref" href="VLSM.Core.Composition.html#index:368"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Composition.html#message:367"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Heq:373" class="idref" href="#Heq:373"><span class="id" title="binder">Heq</span></a> : <span class="id" title="notation">forall</span> <a id="i:372" class="idref" href="#i:372"><span class="id" title="binder">i</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.Composition.html#IM1:370"><span class="id" title="variable">IM1</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:372"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Composition.html#IM2:371"><span class="id" title="variable">IM2</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:372"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="same_IM_label_rew" class="idref" href="#same_IM_label_rew"><span class="id" title="definition">same_IM_label_rew</span></a><br/>
&nbsp;&nbsp;(<a id="l1:374" class="idref" href="#l1:374"><span class="id" title="binder">l1</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_full_projection.IM1"><span class="id" title="variable">IM1</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_full_projection.IM2"><span class="id" title="variable">IM2</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l1:374"><span class="id" title="variable">l1</span></a>) (<a class="idref" href="VLSM.Core.VLSM.html#same_VLSM_label_rew"><span class="id" title="definition">same_VLSM_label_rew</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_full_projection.Heq"><span class="id" title="variable">Heq</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l1:374"><span class="id" title="variable">l1</span></a>)) (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> <a class="idref" href="VLSM.Core.Composition.html#l1:374"><span class="id" title="variable">l1</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="same_IM_state_rew" class="idref" href="#same_IM_state_rew"><span class="id" title="definition">same_IM_state_rew</span></a><br/>
&nbsp;&nbsp;(<a id="s1:375" class="idref" href="#s1:375"><span class="id" title="binder">s1</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_full_projection.IM1"><span class="id" title="variable">IM1</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_full_projection.IM2"><span class="id" title="variable">IM2</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="i:376" class="idref" href="#i:376"><span class="id" title="binder">i</span></a> =&gt; <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM_state_rew"><span class="id" title="definition">same_VLSM_state_rew</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_full_projection.Heq"><span class="id" title="variable">Heq</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:376"><span class="id" title="variable">i</span></a>) (<a class="idref" href="VLSM.Core.Composition.html#s1:375"><span class="id" title="variable">s1</span></a> <a class="idref" href="VLSM.Core.Composition.html#i:376"><span class="id" title="variable">i</span></a>).<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="sec_same_IM_full_projection.pre_loaded_constrained" class="idref" href="#sec_same_IM_full_projection.pre_loaded_constrained"><span class="id" title="section">pre_loaded_constrained</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;(<a id="constraint1:377" class="idref" href="#constraint1:377"><span class="id" title="binder">constraint1</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_full_projection.IM1"><span class="id" title="variable">IM1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_full_projection.IM1"><span class="id" title="variable">IM1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_full_projection.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="constraint2:378" class="idref" href="#constraint2:378"><span class="id" title="binder">constraint2</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_full_projection.IM2"><span class="id" title="variable">IM2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_full_projection.IM2"><span class="id" title="variable">IM2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_full_projection.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="constraint_projection:382" class="idref" href="#constraint_projection:382"><span class="id" title="binder">constraint_projection</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="notation">forall</span> <a id="s1:379" class="idref" href="#s1:379"><span class="id" title="binder">s1</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_full_projection.IM1"><span class="id" title="variable">IM1</span></a>)) <a class="idref" href="VLSM.Core.Composition.html#s1:379"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="l1:380" class="idref" href="#l1:380"><span class="id" title="binder">l1</span></a> <a id="om:381" class="idref" href="#om:381"><span class="id" title="binder">om</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.Composition.html#constraint1:377"><span class="id" title="variable">constraint1</span></a> <a class="idref" href="VLSM.Core.Composition.html#l1:380"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#s1:379"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="VLSM.Core.Composition.html#om:381"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#constraint2:378"><span class="id" title="variable">constraint2</span></a> (<a class="idref" href="VLSM.Core.Composition.html#same_IM_label_rew"><span class="id" title="definition">same_IM_label_rew</span></a> <a class="idref" href="VLSM.Core.Composition.html#l1:380"><span class="id" title="variable">l1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Composition.html#same_IM_state_rew"><span class="id" title="definition">same_IM_state_rew</span></a> <a class="idref" href="VLSM.Core.Composition.html#s1:379"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Composition.html#om:381"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;(<a id="seed:383" class="idref" href="#seed:383"><span class="id" title="binder">seed</span></a> : <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_full_projection.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="same_IM_full_projection" class="idref" href="#same_IM_full_projection"><span class="id" title="lemma">same_IM_full_projection</span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSMProjections.html#VLSM_full_projection"><span class="id" title="record">VLSM_full_projection</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_vlsm"><span class="id" title="definition">pre_loaded_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_full_projection.IM1"><span class="id" title="variable">IM1</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_full_projection.pre_loaded_constrained.constraint1"><span class="id" title="variable">constraint1</span></a>) <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_full_projection.pre_loaded_constrained.seed"><span class="id" title="variable">seed</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_vlsm"><span class="id" title="definition">pre_loaded_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_full_projection.IM2"><span class="id" title="variable">IM2</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_full_projection.pre_loaded_constrained.constraint2"><span class="id" title="variable">constraint2</span></a>) <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_full_projection.pre_loaded_constrained.seed"><span class="id" title="variable">seed</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#same_IM_label_rew"><span class="id" title="definition">same_IM_label_rew</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#same_IM_state_rew"><span class="id" title="definition">same_IM_state_rew</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSMProjections.html#basic_VLSM_full_projection"><span class="id" title="lemma">basic_VLSM_full_projection</span></a>; <span class="id" title="tactic">intros</span> <span class="id" title="var">l</span> **.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hs</span> [<span class="id" title="var">Hom</span> [<span class="id" title="var">Hv</span> <span class="id" title="var">Hc</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_full_projection.pre_loaded_constrained.constraint_projection"><span class="id" title="variable">constraint_projection</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hc</span>; <span class="id" title="var">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSMProjections.html#VLSM_incl_valid_state"><span class="id" title="lemma">VLSM_incl_valid_state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.Composition.html#composite_pre_loaded_vlsm_incl_pre_loaded_with_all_messages"><span class="id" title="lemma">composite_pre_loaded_vlsm_incl_pre_loaded_with_all_messages</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_full_projection.IM1"><span class="id" title="variable">IM1</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_full_projection.pre_loaded_constrained.constraint1"><span class="id" title="variable">constraint1</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_full_projection.pre_loaded_constrained.seed"><span class="id" title="variable">seed</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>; [|<span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hc</span>. <span class="id" title="var">revert</span> <span class="id" title="var">Hv</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i</span>, <span class="id" title="var">li</span>). <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM_valid_preservation"><span class="id" title="lemma">same_VLSM_valid_preservation</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#proj2"><span class="id" title="lemma">proj2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">revert</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i</span>, <span class="id" title="var">li</span>). <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.VLSM.html#vtransition"><span class="id" title="definition">vtransition</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_full_projection.IM1"><span class="id" title="variable">IM1</span></a> <span class="id" title="var">i</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">si'1</span>, <span class="id" title="var">_om'</span>) <span class="id" title="var">eqn</span>: <span class="id" title="var">Ht1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#same_IM_state_rew"><span class="id" title="definition">same_IM_state_rew</span></a> <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM_transition_preservation"><span class="id" title="lemma">same_VLSM_transition_preservation</span></a>; [|<span class="id" title="var">eassumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">extensionality</span> <span class="id" title="var">j</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#same_IM_state_rew"><span class="id" title="definition">same_IM_state_rew</span></a> <span class="id" title="tactic">at</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">j</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="VLSM.Core.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> !<a class="idref" href="VLSM.Core.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM_initial_state_preservation"><span class="id" title="lemma">same_VLSM_initial_state_preservation</span></a>, <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_message_is_valid"><span class="id" title="lemma">initial_message_is_valid</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HmX</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">i</span> [[<span class="id" title="var">im</span> <span class="id" title="var">Him</span>] <span class="id" title="var">Hi</span>]] | <span class="id" title="var">Hseed</span>]; [| <span class="id" title="tactic">right</span>; <span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hi</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">im</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Composition.html#composite_initial_message_prop"><span class="id" title="definition">composite_initial_message_prop</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hm</span> : <a class="idref" href="VLSM.Core.VLSM.html#vinitial_message_prop"><span class="id" title="definition">vinitial_message_prop</span></a> (<a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_full_projection.IM2"><span class="id" title="variable">IM2</span></a> <span class="id" title="var">i</span>) <span class="id" title="var">m</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.VLSM.html#same_VLSM_initial_message_preservation"><span class="id" title="lemma">same_VLSM_initial_message_preservation</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">m</span> <span class="id" title="var">Hm</span>). <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_full_projection.pre_loaded_constrained"><span class="id" title="section">pre_loaded_constrained</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="same_IM_preloaded_free_full_projection" class="idref" href="#same_IM_preloaded_free_full_projection"><span class="id" title="lemma">same_IM_preloaded_free_full_projection</span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSMProjections.html#VLSM_full_projection"><span class="id" title="record">VLSM_full_projection</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_full_projection.IM1"><span class="id" title="variable">IM1</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_full_projection.IM2"><span class="id" title="variable">IM2</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#same_IM_label_rew"><span class="id" title="definition">same_IM_label_rew</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Composition.html#same_IM_state_rew"><span class="id" title="definition">same_IM_state_rew</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s1</span> <span class="id" title="var">tr1</span> <span class="id" title="var">Htr1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.VLSMProjections.html#pre_loaded_with_all_messages_vlsm_is_pre_loaded_with_True"><span class="id" title="lemma">pre_loaded_with_all_messages_vlsm_is_pre_loaded_with_True</span></a> (<a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_full_projection.IM1"><span class="id" title="variable">IM1</span></a>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Heq1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSMProjections.html#VLSM_eq_finite_valid_trace"><span class="id" title="lemma">VLSM_eq_finite_valid_trace</span></a> <span class="id" title="var">Heq1</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Htr1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Heq1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.Composition.html#same_IM_full_projection"><span class="id" title="lemma">same_IM_full_projection</span></a> (<a class="idref" href="VLSM.Core.Composition.html#free_constraint"><span class="id" title="definition">free_constraint</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_full_projection.IM1"><span class="id" title="variable">IM1</span></a>) (<a class="idref" href="VLSM.Core.Composition.html#free_constraint"><span class="id" title="definition">free_constraint</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_full_projection.IM2"><span class="id" title="variable">IM2</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Hproj</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">Hproj</span>. { <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hproj</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="notation">True</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSMProjections.html#VLSM_full_projection_finite_valid_trace"><span class="id" title="definition">VLSM_full_projection_finite_valid_trace</span></a> <span class="id" title="var">Hproj</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Htr1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.VLSMProjections.html#pre_loaded_with_all_messages_vlsm_is_pre_loaded_with_True"><span class="id" title="lemma">pre_loaded_with_all_messages_vlsm_is_pre_loaded_with_True</span></a> (<a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_full_projection.IM2"><span class="id" title="variable">IM2</span></a>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Heq2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSMProjections.html#VLSM_eq_finite_valid_trace"><span class="id" title="lemma">VLSM_eq_finite_valid_trace</span></a> <span class="id" title="var">Heq2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.Composition.html#sec_same_IM_full_projection"><span class="id" title="section">sec_same_IM_full_projection</span></a>.<br/>

<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="VLSM.Core.Composition.html#same_IM_label_rew"><span class="id" title="definition">same_IM_label_rew</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>} <span class="id" title="var">_</span> <span class="id" title="var">_</span> : <span class="id" title="tactic">assert</span>.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="VLSM.Core.Composition.html#same_IM_state_rew"><span class="id" title="definition">same_IM_state_rew</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>} <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> : <span class="id" title="tactic">assert</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr">coqdoc</a> and improved with <a href="https://github.com/palmskog/coqdocjs">CoqdocJS</a> as adapted for <a href="https://github.com/coq-community">coq-community</a>
</div>
</div>
</body>

</html>
