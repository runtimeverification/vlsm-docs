<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename">
	<script>
	  if (document.title === "Table of Contents") {
	      document.write("<a href='map.svg'>File dependency graph</a>");
	  } else {
              document.write("<a href='" + document.title + ".svg'>" + document.title + " dependency graph</a>");
	  }
	</script>
      </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./../..">Project Website</a>
      <a href="./indexpage.html">Index</a>
      <a href="./toc.html">Table of Contents</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">stdpp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">prelude</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Logic.FinFun.html#"><span class="id" title="library">FinFun</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Reals.Rdefinitions.html#"><span class="id" title="library">Rdefinitions</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Logic.FunctionalExtensionality.html#"><span class="id" title="library">FunctionalExtensionality</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Lib.Preamble.html#"><span class="id" title="library">Lib.Preamble</span></a> <a class="idref" href="VLSM.Lib.ListExtras.html#"><span class="id" title="library">Lib.ListExtras</span></a> <a class="idref" href="VLSM.Lib.StdppListSet.html#"><span class="id" title="library">Lib.StdppListSet</span></a> <a class="idref" href="VLSM.Lib.ListSetExtras.html#"><span class="id" title="library">Lib.ListSetExtras</span></a> <a class="idref" href="VLSM.Lib.Measurable.html#"><span class="id" title="library">Lib.Measurable</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Core.VLSM.html#"><span class="id" title="library">Core.VLSM</span></a> <a class="idref" href="VLSM.Core.VLSMProjections.html#"><span class="id" title="library">VLSMProjections</span></a> <a class="idref" href="VLSM.Core.Composition.html#"><span class="id" title="library">Core.Composition</span></a> <a class="idref" href="VLSM.Core.ProjectionTraces.html#"><span class="id" title="library">Core.ProjectionTraces</span></a> <a class="idref" href="VLSM.Core.SubProjectionTraces.html#"><span class="id" title="library">Core.SubProjectionTraces</span></a> <a class="idref" href="VLSM.Core.MessageDependencies.html#"><span class="id" title="library">Core.MessageDependencies</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">VLSM</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="VLSM.Core.Equivocation.html#"><span class="id" title="library">Core.Equivocation</span></a> <a class="idref" href="VLSM.Core.Equivocation.NoEquivocation.html#"><span class="id" title="library">Core.Equivocation.NoEquivocation</span></a> <a class="idref" href="VLSM.Core.Equivocation.FixedSetEquivocation.html#"><span class="id" title="library">Core.Equivocation.FixedSetEquivocation</span></a> <a class="idref" href="VLSM.Core.Equivocation.TraceWiseEquivocation.html#"><span class="id" title="library">Core.Equivocation.TraceWiseEquivocation</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab118"></a><h1 class="section">Witnessed equivocation</h1>


<div class="paragraph"> </div>

Although <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.TraceWiseEquivocation.html#is_equivocating_tracewise"><span class="id" title="definition">is_equivocating_tracewise</span></a></span> provides a very precise notion of
equivocation, it does not guarantee the monotonicity of the set of equivocators
along a trace.

<div class="paragraph"> </div>

The witnessed equivocation assumption is a possible way to address this issue.

<div class="paragraph"> </div>

Starting from the (reasonable) assumption that for any state <code>s</code>, there is
a trace ending in <code>s</code> whose <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.TraceWiseEquivocation.html#equivocating_senders_in_trace"><span class="id" title="definition">equivocating_senders_in_trace</span></a></span> are precisely
the equivocators of <code>s</code> (the <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#WitnessedEquivocationCapability"><span class="id" title="record">WitnessedEquivocationCapability</span></a></span>),
we can show that for each Free valid state there exists
a valid trace with the <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#strong_trace_witnessing_equivocation_prop"><span class="id" title="definition">strong_trace_witnessing_equivocation_prop</span></a></span>erty,
i.e., a trace whose every prefix is a witness for its corresponding end state
(Lemma <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#free_has_strong_trace_witnessing_equivocation_prop"><span class="id" title="lemma">free_has_strong_trace_witnessing_equivocation_prop</span></a></span>).
In particular, the set of equivocators is monotonically increasing for such a
trace (Lemma <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#strong_witness_equivocating_validators_prefix_monotonicity"><span class="id" title="lemma">strong_witness_equivocating_validators_prefix_monotonicity</span></a></span>).

<div class="paragraph"> </div>

We then use this result to show that any Free valid state is also a valid
state for the composition of nodes under the <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.FixedSetEquivocation.html#fixed_equivocation_constraint"><span class="id" title="definition">fixed_equivocation_constraint</span></a></span>
induced by its set of equivocators.

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="witnessed_equivocation" class="idref" href="#witnessed_equivocation"><span class="id" title="section">witnessed_equivocation</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;`{<a id="EqDecision0:2" class="idref" href="#EqDecision0:2"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:2" class="idref" href="#EqDecision0:2"><span class="id" title="binder">message</span></a>}<br/>
&nbsp;&nbsp;`{<a id="H:5" class="idref" href="#H:5"><span class="id" title="binder">finite.Finite</span></a> <a id="H:5" class="idref" href="#H:5"><span class="id" title="binder">index</span></a>}<br/>
&nbsp;&nbsp;(<a id="IM:6" class="idref" href="#IM:6"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#index:3"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#message:1"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;`{<a id="H0:8" class="idref" href="#H0:8"><span class="id" title="binder">forall</span></a> <a id="H0:8" class="idref" href="#H0:8"><span class="id" title="binder">i</span></a> <a id="H0:8" class="idref" href="#H0:8"><span class="id" title="binder">:</span></a> <a id="H0:8" class="idref" href="#H0:8"><span class="id" title="binder">index</span></a><a id="H0:8" class="idref" href="#H0:8"><span class="id" title="binder">,</span></a> <a id="H0:8" class="idref" href="#H0:8"><span class="id" title="binder">HasBeenSentCapability</span></a> <a id="H0:8" class="idref" href="#H0:8"><span class="id" title="binder">(</span></a><a id="H0:8" class="idref" href="#H0:8"><span class="id" title="binder">IM</span></a> <a id="H0:8" class="idref" href="#H0:8"><span class="id" title="binder">i</span></a><a id="H0:8" class="idref" href="#H0:8"><span class="id" title="binder">)</span></a>}<br/>
&nbsp;&nbsp;`{<a id="H1:10" class="idref" href="#H1:10"><span class="id" title="binder">forall</span></a> <a id="H1:10" class="idref" href="#H1:10"><span class="id" title="binder">i</span></a> <a id="H1:10" class="idref" href="#H1:10"><span class="id" title="binder">:</span></a> <a id="H1:10" class="idref" href="#H1:10"><span class="id" title="binder">index</span></a><a id="H1:10" class="idref" href="#H1:10"><span class="id" title="binder">,</span></a> <a id="H1:10" class="idref" href="#H1:10"><span class="id" title="binder">HasBeenReceivedCapability</span></a> <a id="H1:10" class="idref" href="#H1:10"><span class="id" title="binder">(</span></a><a id="H1:10" class="idref" href="#H1:10"><span class="id" title="binder">IM</span></a> <a id="H1:10" class="idref" href="#H1:10"><span class="id" title="binder">i</span></a><a id="H1:10" class="idref" href="#H1:10"><span class="id" title="binder">)</span></a>}<br/>
&nbsp;&nbsp;`{<a id="H2:13" class="idref" href="#H2:13"><span class="id" title="binder">finite.Finite</span></a> <a id="H2:13" class="idref" href="#H2:13"><span class="id" title="binder">validator</span></a>}<br/>
&nbsp;&nbsp;(<a id="A:14" class="idref" href="#A:14"><span class="id" title="binder">A</span></a> : <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#validator:11"><span class="id" title="variable">validator</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#index:3"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;(<a id="sender:15" class="idref" href="#sender:15"><span class="id" title="binder">sender</span></a> : <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#message:1"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#validator:11"><span class="id" title="variable">validator</span></a>)<br/>
&nbsp;&nbsp;(<a id="Free:16" class="idref" href="#Free:16"><span class="id" title="binder">Free</span></a> := <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#IM:6"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;(<a id="PreFree:17" class="idref" href="#PreFree:17"><span class="id" title="binder">PreFree</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#Free:16"><span class="id" title="variable">Free</span></a>)<br/>
&nbsp;&nbsp;`{<a id="H3:19" class="idref" href="#H3:19"><span class="id" title="binder">ReachableThreshold</span></a> <a id="H3:19" class="idref" href="#H3:19"><span class="id" title="binder">validator</span></a>}<br/>
&nbsp;&nbsp;`{<a id="H4:20" class="idref" href="#H4:20"><span class="id" title="binder">RelDecision</span></a> <a id="H4:20" class="idref" href="#H4:20"><span class="id" title="binder">_</span></a> <a id="H4:20" class="idref" href="#H4:20"><span class="id" title="binder">_</span></a> <a id="H4:20" class="idref" href="#H4:20"><span class="id" title="binder">(</span></a><a id="H4:20" class="idref" href="#H4:20"><span class="id" title="binder">is_equivocating_tracewise_no_has_been_sent</span></a> <a id="H4:20" class="idref" href="#H4:20"><span class="id" title="binder">IM</span></a> <a id="H4:20" class="idref" href="#H4:20"><span class="id" title="binder">A</span></a> <a id="H4:20" class="idref" href="#H4:20"><span class="id" title="binder">sender</span></a><a id="H4:20" class="idref" href="#H4:20"><span class="id" title="binder">)</span></a>}<br/>
&nbsp;&nbsp;(<a id="Htracewise_BasicEquivocation:21" class="idref" href="#Htracewise_BasicEquivocation:21"><span class="id" title="binder">Htracewise_BasicEquivocation</span></a> : <a class="idref" href="VLSM.Core.Equivocation.html#BasicEquivocation"><span class="id" title="class">BasicEquivocation</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#IM:6"><span class="id" title="variable">IM</span></a>) <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#validator:11"><span class="id" title="variable">validator</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="VLSM.Core.Equivocation.TraceWiseEquivocation.html#equivocation_dec_tracewise"><span class="id" title="instance">equivocation_dec_tracewise</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#IM:6"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#A:14"><span class="id" title="variable">A</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#sender:15"><span class="id" title="variable">sender</span></a>)<br/>
&nbsp;&nbsp;(<a id="equivocating_validators:22" class="idref" href="#equivocating_validators:22"><span class="id" title="binder">equivocating_validators</span></a> := <a class="idref" href="VLSM.Core.Equivocation.html#equivocating_validators"><span class="id" title="method">equivocating_validators</span></a> (<span class="id" title="var">BasicEquivocation</span> := <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#Htracewise_BasicEquivocation:21"><span class="id" title="variable">Htracewise_BasicEquivocation</span></a>))<br/>
&nbsp;&nbsp;.<br/>

<br/>
</div>

<div class="doc">
A trace witnesses the equivocation of its final state <code>s</code> if its set of
equivocators is precisely that of the <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.html#equivocating_validators"><span class="id" title="projection">equivocating_validators</span></a></span> of <code>s</code>.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="trace_witnessing_equivocation_prop" class="idref" href="#trace_witnessing_equivocation_prop"><span class="id" title="definition">trace_witnessing_equivocation_prop</span></a><br/>
&nbsp;&nbsp;<a id="is:23" class="idref" href="#is:23"><span class="id" title="binder">is</span></a> <a id="tr:24" class="idref" href="#tr:24"><span class="id" title="binder">tr</span></a><br/>
&nbsp;&nbsp;(<a id="s:25" class="idref" href="#s:25"><span class="id" title="binder">s</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is:23"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:24"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="v:26" class="idref" href="#v:26"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#v:26"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:25"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="m:27" class="idref" href="#m:27"><span class="id" title="binder">m</span></a> : <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.message"><span class="id" title="variable">message</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.sender"><span class="id" title="variable">sender</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#m:27"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#v:26"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.Equivocation.html#equivocation_in_trace"><span class="id" title="definition">equivocation_in_trace</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.PreFree"><span class="id" title="variable">PreFree</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#m:27"><span class="id" title="variable">m</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:24"><span class="id" title="variable">tr</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="equivocating_senders_in_trace_witnessing_equivocation_prop" class="idref" href="#equivocating_senders_in_trace_witnessing_equivocation_prop"><span class="id" title="lemma">equivocating_senders_in_trace_witnessing_equivocation_prop</span></a><br/>
&nbsp;&nbsp;<a id="is:28" class="idref" href="#is:28"><span class="id" title="binder">is</span></a> <a id="tr:29" class="idref" href="#tr:29"><span class="id" title="binder">tr</span></a><br/>
&nbsp;&nbsp;(<a id="Htr:30" class="idref" href="#Htr:30"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#trace_witnessing_equivocation_prop"><span class="id" title="definition">trace_witnessing_equivocation_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is:28"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:29"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;(<a id="s:31" class="idref" href="#s:31"><span class="id" title="binder">s</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is:28"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:29"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Lib.ListSetExtras.html#set_eq"><span class="id" title="definition">set_eq</span></a> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:31"><span class="id" title="variable">s</span></a>) (<a class="idref" href="VLSM.Core.Equivocation.TraceWiseEquivocation.html#equivocating_senders_in_trace"><span class="id" title="definition">equivocating_senders_in_trace</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.sender"><span class="id" title="variable">sender</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:29"><span class="id" title="variable">tr</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">v</span> <span class="id" title="var">Hv</span>; [<span class="id" title="tactic">apply</span> <span class="id" title="var">Htr</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span>| <span class="id" title="tactic">apply</span> <span class="id" title="var">Htr</span>]<br/>
&nbsp;&nbsp;; [<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Equivocation.TraceWiseEquivocation.html#elem_of_equivocating_senders_in_trace"><span class="id" title="lemma">elem_of_equivocating_senders_in_trace</span></a>| <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Equivocation.TraceWiseEquivocation.html#elem_of_equivocating_senders_in_trace"><span class="id" title="lemma">elem_of_equivocating_senders_in_trace</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span>]<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
A composition of VLSMs has the witnessed equivocation capability if towards any
valid states there exist a trace witnessing its equivocation.

</div>
<div class="code">
<span class="id" title="keyword">Class</span> <a id="WitnessedEquivocationCapability" class="idref" href="#WitnessedEquivocationCapability"><span class="id" title="record">WitnessedEquivocationCapability</span></a><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;{ <a id="is_equivocating_tracewise_witness" class="idref" href="#is_equivocating_tracewise_witness"><span class="id" title="projection">is_equivocating_tracewise_witness</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="s:33" class="idref" href="#s:33"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.PreFree"><span class="id" title="variable">PreFree</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:33"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="is:34" class="idref" href="#is:34"><span class="id" title="binder">is</span></a> <a id="tr:35" class="idref" href="#tr:35"><span class="id" title="binder">tr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.PreFree"><span class="id" title="variable">PreFree</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is:34"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:33"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:35"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#trace_witnessing_equivocation_prop"><span class="id" title="definition">trace_witnessing_equivocation_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is:34"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:35"><span class="id" title="variable">tr</span></a><br/>
&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="witnessed_equivocation.witnessed_equivocation_properties" class="idref" href="#witnessed_equivocation.witnessed_equivocation_properties"><span class="id" title="section">witnessed_equivocation_properties</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;(<a id="Hke:37" class="idref" href="#Hke:37"><span class="id" title="binder">Hke</span></a> : <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#WitnessedEquivocationCapability"><span class="id" title="class">WitnessedEquivocationCapability</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hsender_safety:38" class="idref" href="#Hsender_safety:38"><span class="id" title="binder">Hsender_safety</span></a> : <a class="idref" href="VLSM.Core.Equivocation.html#sender_safety_alt_prop"><span class="id" title="definition">sender_safety_alt_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.A"><span class="id" title="variable">A</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.sender"><span class="id" title="variable">sender</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="initial_state_witnessing_equivocation_prop" class="idref" href="#initial_state_witnessing_equivocation_prop"><span class="id" title="lemma">initial_state_witnessing_equivocation_prop</span></a><br/>
&nbsp;&nbsp;<a id="s:39" class="idref" href="#s:39"><span class="id" title="binder">s</span></a><br/>
&nbsp;&nbsp;(<a id="Hs:40" class="idref" href="#Hs:40"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_initial_state_prop"><span class="id" title="definition">composite_initial_state_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:39"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#trace_witnessing_equivocation_prop"><span class="id" title="definition">trace_witnessing_equivocation_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:39"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.Equivocation.TraceWiseEquivocation.html#equivocating_validators_empty_in_initial_state"><span class="id" title="lemma">equivocating_validators_empty_in_initial_state</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.A"><span class="id" title="variable">A</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.sender"><span class="id" title="variable">sender</span></a> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hempty</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <span class="id" title="var">s</span>) <span class="id" title="keyword">with</span> (@<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.validator"><span class="id" title="variable">validator</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">inversion</span> 1|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">m</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hmsg</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">elim</span> (<a class="idref" href="VLSM.Core.Equivocation.html#no_equivocation_in_empty_trace"><span class="id" title="lemma">no_equivocation_in_empty_trace</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.PreFree"><span class="id" title="variable">PreFree</span></a> <span class="id" title="var">m</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
For any trace having the <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#trace_witnessing_equivocation_prop"><span class="id" title="definition">trace_witnessing_equivocation_prop</span></a></span>erty,
its final transition is monotonic w.r.t. the <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.html#equivocating_validators"><span class="id" title="projection">equivocating_validators</span></a></span>.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="equivocating_validators_witness_monotonicity" class="idref" href="#equivocating_validators_witness_monotonicity"><span class="id" title="lemma">equivocating_validators_witness_monotonicity</span></a><br/>
&nbsp;&nbsp;(<a id="is:41" class="idref" href="#is:41"><span class="id" title="binder">is</span></a> <a id="s:42" class="idref" href="#s:42"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:43" class="idref" href="#tr:43"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.IM"><span class="id" title="variable">IM</span></a>))<br/>
&nbsp;&nbsp;(<a id="Htr:44" class="idref" href="#Htr:44"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.PreFree"><span class="id" title="variable">PreFree</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is:41"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:42"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:43"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;(<a id="item:45" class="idref" href="#item:45"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hwitness:46" class="idref" href="#Hwitness:46"><span class="id" title="binder">Hwitness</span></a> : <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#trace_witnessing_equivocation_prop"><span class="id" title="definition">trace_witnessing_equivocation_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is:41"><span class="id" title="variable">is</span></a> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:43"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#item:45"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>))<br/>
&nbsp;&nbsp;(<a id="s':47" class="idref" href="#s':47"><span class="id" title="binder">s'</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#item:45"><span class="id" title="variable">item</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:42"><span class="id" title="variable">s</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s':47"><span class="id" title="variable">s'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">v</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hwitness</span> <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_is_last"><span class="id" title="lemma">finite_trace_last_is_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hwitness</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hwitness</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Equivocation.TraceWiseEquivocation.html#equivocating_validators_is_equivocating_tracewise_iff"><span class="id" title="lemma">equivocating_validators_is_equivocating_tracewise_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Htr</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">m</span> [<span class="id" title="var">Hmsg</span> <span class="id" title="var">Heqv</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">m</span>. <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">assumption</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Equivocation.html#equivocation_in_trace_prefix"><span class="id" title="lemma">equivocation_in_trace_prefix</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Given a trace with the <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#trace_witnessing_equivocation_prop"><span class="id" title="definition">trace_witnessing_equivocation_prop</span></a></span>erty,
if the <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.html#equivocating_validators"><span class="id" title="projection">equivocating_validators</span></a></span> for the destination of its last transition
are  included in the <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.html#equivocating_validators"><span class="id" title="projection">equivocating_validators</span></a></span> for the source of its last
transition, the the trace without its last transition also has the
<span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#trace_witnessing_equivocation_prop"><span class="id" title="definition">trace_witnessing_equivocation_prop</span></a></span>erty.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="input_valid_transition_reflects_trace_witnessing_equivocation_prop" class="idref" href="#input_valid_transition_reflects_trace_witnessing_equivocation_prop"><span class="id" title="lemma">input_valid_transition_reflects_trace_witnessing_equivocation_prop</span></a><br/>
&nbsp;&nbsp;(<a id="is:48" class="idref" href="#is:48"><span class="id" title="binder">is</span></a> <a id="s:49" class="idref" href="#s:49"><span class="id" title="binder">s</span></a>: <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:50" class="idref" href="#tr:50"><span class="id" title="binder">tr</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.IM"><span class="id" title="variable">IM</span></a>))<br/>
&nbsp;&nbsp;(<a id="Htr:51" class="idref" href="#Htr:51"><span class="id" title="binder">Htr</span></a>: <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.PreFree"><span class="id" title="variable">PreFree</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is:48"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:49"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:50"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;(<a id="item:52" class="idref" href="#item:52"><span class="id" title="binder">item</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hwitness:53" class="idref" href="#Hwitness:53"><span class="id" title="binder">Hwitness</span></a> : <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#trace_witnessing_equivocation_prop"><span class="id" title="definition">trace_witnessing_equivocation_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is:48"><span class="id" title="variable">is</span></a> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:50"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#item:52"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>))<br/>
&nbsp;&nbsp;(<a id="s':54" class="idref" href="#s':54"><span class="id" title="binder">s'</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#item:52"><span class="id" title="variable">item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hincl:55" class="idref" href="#Hincl:55"><span class="id" title="binder">Hincl</span></a> : <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s':54"><span class="id" title="variable">s'</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:49"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#trace_witnessing_equivocation_prop"><span class="id" title="definition">trace_witnessing_equivocation_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is:48"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:50"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_last"><span class="id" title="lemma">finite_valid_trace_init_to_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hlst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">v</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlst</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Equivocation.TraceWiseEquivocation.html#equivocating_validators_is_equivocating_tracewise_iff"><span class="id" title="lemma">equivocating_validators_is_equivocating_tracewise_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Hv</span>; <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> (<span class="id" title="var">msg</span> &amp; <span class="id" title="var">Hsender</span> &amp; <span class="id" title="var">Heqv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hincl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">Hwitness</span> <span class="id" title="var">v</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_is_last"><span class="id" title="lemma">finite_trace_last_is_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hwitness</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hwitness</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">msg</span>. <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">assumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Equivocation.html#equivocation_in_trace_prefix"><span class="id" title="lemma">equivocation_in_trace_prefix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
An equivocator for the destination of a transition is either an equivocation
for the source as well, or it is the sender of the received message and that
message is not sent by any trace witnessing the source of the transition.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="equivocating_validators_step_update" class="idref" href="#equivocating_validators_step_update"><span class="id" title="lemma">equivocating_validators_step_update</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="l:56" class="idref" href="#l:56"><span class="id" title="binder">l</span></a> <a id="s:57" class="idref" href="#s:57"><span class="id" title="binder">s</span></a> <a id="om:58" class="idref" href="#om:58"><span class="id" title="binder">om</span></a> <a id="s':59" class="idref" href="#s':59"><span class="id" title="binder">s'</span></a> <a id="om':60" class="idref" href="#om':60"><span class="id" title="binder">om'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:61" class="idref" href="#Ht:61"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input_valid_transition"><span class="id" title="definition">input_valid_transition</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.PreFree"><span class="id" title="variable">PreFree</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#l:56"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:57"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#om:58"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s':59"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#om':60"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="v:62" class="idref" href="#v:62"><span class="id" title="binder">v</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#v:62"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s':59"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#v:62"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:57"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="m:63" class="idref" href="#m:63"><span class="id" title="binder">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#om:58"><span class="id" title="variable">om</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#m:63"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.sender"><span class="id" title="variable">sender</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#m:63"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#v:62"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="is:64" class="idref" href="#is:64"><span class="id" title="binder">is</span></a> <a id="tr:65" class="idref" href="#tr:65"><span class="id" title="binder">tr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:66" class="idref" href="#Htr:66"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.PreFree"><span class="id" title="variable">PreFree</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is:64"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:57"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:65"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hwitness:67" class="idref" href="#Hwitness:67"><span class="id" title="binder">Hwitness</span></a> : <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#trace_witnessing_equivocation_prop"><span class="id" title="definition">trace_witnessing_equivocation_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is:64"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:65"><span class="id" title="variable">tr</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="VLSM.Core.VLSM.html#trace_has_message"><span class="id" title="definition">trace_has_message</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#field_selector"><span class="id" title="definition">field_selector</span></a> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a>) <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#m:63"><span class="id" title="variable">m</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:65"><span class="id" title="variable">tr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">v</span> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <span class="id" title="var">s</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [<span class="id" title="var">e</span> | <span class="id" title="var">Hnv</span>]<br/>
&nbsp;&nbsp;; [<span class="id" title="tactic">left</span>; <span class="id" title="tactic">assumption</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Equivocation.TraceWiseEquivocation.html#equivocating_validators_is_equivocating_tracewise_iff"><span class="id" title="lemma">equivocating_validators_is_equivocating_tracewise_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.Equivocation.TraceWiseEquivocation.html#transition_is_equivocating_tracewise_char"><span class="id" title="lemma">transition_is_equivocating_tracewise_char</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.A"><span class="id" title="variable">A</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.sender"><span class="id" title="variable">sender</span></a>  <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Ht</span> <span class="id" title="var">_</span> <span class="id" title="var">Hv</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [| <span class="id" title="var">Hom</span>]<br/>
&nbsp;&nbsp;; [<span class="id" title="tactic">elim</span> <span class="id" title="var">Hnv</span>; <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.Equivocation.TraceWiseEquivocation.html#equivocating_validators_is_equivocating_tracewise_iff"><span class="id" title="lemma">equivocating_validators_is_equivocating_tracewise_iff</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.A"><span class="id" title="variable">A</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.sender"><span class="id" title="variable">sender</span></a>); <span class="id" title="tactic">assumption</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">om</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">m</span>|]; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hom</span>; [|<span class="id" title="tactic">congruence</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">m</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">assumption</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="keyword">is</span> <span class="id" title="var">tr</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Hinit</span>] <span class="id" title="var">Hwitness</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.VLSM.html#extend_right_finite_trace_from_to"><span class="id" title="lemma">extend_right_finite_trace_from_to</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Htr</span> <span class="id" title="var">Ht</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Htr'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#conj"><span class="id" title="constructor">conj</span></a> <span class="id" title="var">Htr'</span> <span class="id" title="var">Hinit</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">m'</span> [<span class="id" title="var">Hm'</span> [<span class="id" title="var">prefix</span> [<span class="id" title="var">item</span> [<span class="id" title="var">suffix</span> [<span class="id" title="var">Heq</span> <span class="id" title="var">Heqv</span>]]]]]].<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_list_last</span> <span class="id" title="var">suffix</span> <span class="id" title="var">suffix'</span> <span class="id" title="var">item'</span> <span class="id" title="var">Heqsuffix</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#app_inj_tail"><span class="id" title="lemma">app_inj_tail</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqv</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Heqv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Heq_m</span> <span class="id" title="var">Heqv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Heq_m</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">elim</span> <span class="id" title="var">Hnv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">Hwitness</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_last"><span class="id" title="lemma">finite_valid_trace_from_to_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>, <span class="id" title="var">Hwitness</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hs</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hwitness</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hwitness</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">m'</span>. <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">assumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">prefix</span>, <span class="id" title="var">item</span>, <span class="id" title="var">suffix'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [|<span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">item</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">suffix'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">item'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">item</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">suffix'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">item'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#app_inj_tail"><span class="id" title="lemma">app_inj_tail</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">rewrite</span> &lt;- !<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Heq</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Given a non-empty trace with the <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#trace_witnessing_equivocation_prop"><span class="id" title="definition">trace_witnessing_equivocation_prop</span></a></span>erty,
there are two disjoint possibilities concerning its last transition.

<div class="paragraph"> </div>

(1) either it preserves the set of <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.html#equivocating_validators"><span class="id" title="projection">equivocating_validators</span></a></span> and, in that case,
the trace without the last transition has the
<span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#trace_witnessing_equivocation_prop"><span class="id" title="definition">trace_witnessing_equivocation_prop</span></a></span>erty as well; or

<div class="paragraph"> </div>

(2) The set of <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.html#equivocating_validators"><span class="id" title="projection">equivocating_validators</span></a></span> of its destination is obtained
by adding the sender of the message received in the transition to the
set of <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.html#equivocating_validators"><span class="id" title="projection">equivocating_validators</span></a></span> of its source, and, in that case, that message
is not sent by any trace witnessing the source of the transition.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="equivocating_validators_witness_last_char" class="idref" href="#equivocating_validators_witness_last_char"><span class="id" title="lemma">equivocating_validators_witness_last_char</span></a><br/>
&nbsp;&nbsp;(<a id="is:68" class="idref" href="#is:68"><span class="id" title="binder">is</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:69" class="idref" href="#tr:69"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.IM"><span class="id" title="variable">IM</span></a>))<br/>
&nbsp;&nbsp;(<a id="l:70" class="idref" href="#l:70"><span class="id" title="binder">l</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;(<a id="om:71" class="idref" href="#om:71"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="s':72" class="idref" href="#s':72"><span class="id" title="binder">s'</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;(<a id="om':73" class="idref" href="#om':73"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="item:74" class="idref" href="#item:74"><span class="id" title="binder">item</span></a>  := {| <a class="idref" href="VLSM.Core.VLSM.html#l"><span class="id" title="projection">l</span></a> := <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#l:70"><span class="id" title="variable">l</span></a>; <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a> := <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#om:71"><span class="id" title="variable">om</span></a>; <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> := <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s':72"><span class="id" title="variable">s'</span></a>; <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> := <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#om':73"><span class="id" title="variable">om'</span></a> |})<br/>
&nbsp;&nbsp;(<a id="Htr_item:75" class="idref" href="#Htr_item:75"><span class="id" title="binder">Htr_item</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.PreFree"><span class="id" title="variable">PreFree</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is:68"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s':72"><span class="id" title="variable">s'</span></a> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:69"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#item:74"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>))<br/>
&nbsp;&nbsp;(<a id="Hwitness:76" class="idref" href="#Hwitness:76"><span class="id" title="binder">Hwitness</span></a> : <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#trace_witnessing_equivocation_prop"><span class="id" title="definition">trace_witnessing_equivocation_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is:68"><span class="id" title="variable">is</span></a> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:69"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#item:74"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>))<br/>
&nbsp;&nbsp;(<a id="s:77" class="idref" href="#s:77"><span class="id" title="binder">s</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is:68"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:69"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Lib.ListSetExtras.html#set_eq"><span class="id" title="definition">set_eq</span></a> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:77"><span class="id" title="variable">s</span></a>) (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s':72"><span class="id" title="variable">s'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#trace_witnessing_equivocation_prop"><span class="id" title="definition">trace_witnessing_equivocation_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is:68"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:69"><span class="id" title="variable">tr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="m:78" class="idref" href="#m:78"><span class="id" title="binder">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#om:71"><span class="id" title="variable">om</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#m:78"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="v:79" class="idref" href="#v:79"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.sender"><span class="id" title="variable">sender</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#m:78"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#v:79"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#v:79"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:77"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Lib.ListSetExtras.html#set_eq"><span class="id" title="definition">set_eq</span></a> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s':72"><span class="id" title="variable">s'</span></a>) (<a class="idref" href="VLSM.Lib.StdppListSet.html#set_add"><span class="id" title="definition">set_add</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#v:79"><span class="id" title="variable">v</span></a> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:77"><span class="id" title="variable">s</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="is:80" class="idref" href="#is:80"><span class="id" title="binder">is</span></a> : <a class="idref" href="VLSM.Core.Composition.html#_composite_state"><span class="id" title="definition">_composite_state</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.IM"><span class="id" title="variable">IM</span></a>) (<a id="tr:81" class="idref" href="#tr:81"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.PreFree"><span class="id" title="variable">PreFree</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is:80"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:77"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:81"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#trace_witnessing_equivocation_prop"><span class="id" title="definition">trace_witnessing_equivocation_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is:80"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:81"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="VLSM.Core.VLSM.html#trace_has_message"><span class="id" title="definition">trace_has_message</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#field_selector"><span class="id" title="definition">field_selector</span></a> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a>) <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#m:78"><span class="id" title="variable">m</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:81"><span class="id" title="variable">tr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr_item</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Hinit</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_app_split"><span class="id" title="lemma">finite_valid_trace_from_to_app_split</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Hitem</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion_clear</span> <span class="id" title="var">Hitem</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Htl</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#equivocating_validators_witness_monotonicity"><span class="id" title="lemma">equivocating_validators_witness_monotonicity</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">s</span> := (<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <span class="id" title="keyword">is</span> <span class="id" title="var">tr</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">Hwitness</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hincl</span><br/>
&nbsp;&nbsp;; [| <span class="id" title="tactic">split</span>; <span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.Equivocation.TraceWiseEquivocation.html#input_valid_transition_receiving_no_sender_reflects_equivocating_validators"><span class="id" title="lemma">input_valid_transition_receiving_no_sender_reflects_equivocating_validators</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.A"><span class="id" title="variable">A</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.sender"><span class="id" title="variable">sender</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>  <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Ht</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Hreflect</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <span class="id" title="keyword">is</span> <span class="id" title="var">tr</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="instance">option_bind</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.sender"><span class="id" title="variable">sender</span></a> <span class="id" title="var">om</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">v</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Heq_v</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">om</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">m</span>|]; [|<span class="id" title="tactic">inversion</span> <span class="id" title="var">Heq_v</span>]. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq_v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<a class="idref" href="VLSM.Lib.ListSetExtras.html#set_eq"><span class="id" title="definition">set_eq</span></a> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <span class="id" title="var">s</span>) (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <span class="id" title="var">s'</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; [<span class="id" title="tactic">left</span>;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">assumption</span>|]|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#input_valid_transition_reflects_trace_witnessing_equivocation_prop"><span class="id" title="lemma">input_valid_transition_reflects_trace_witnessing_equivocation_prop</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#conj"><span class="id" title="constructor">conj</span></a> <span class="id" title="var">Htr</span> <span class="id" title="var">Hinit</span>) <span class="id" title="var">_</span> <span class="id" title="var">Hwitness</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">s0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">reflexivity</span>|]. <span class="id" title="tactic">exists</span> <span class="id" title="var">v</span>. <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">assumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#equivocating_validators_step_update"><span class="id" title="lemma">equivocating_validators_step_update</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Ht</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Honly_v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Honly_v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hv</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="v:83" class="idref" href="#v:83"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#v:82"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <span class="id" title="var">s'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#v:82"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">Exists_exists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#neg_Forall_Exists_neg"><span class="id" title="lemma">neg_Forall_Exists_neg</span></a>; [<span class="id" title="tactic">intro</span>; <span class="id" title="tactic">apply</span> <span class="id" title="instance">elem_of_list_dec</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">all</span>. <span class="id" title="tactic">elim</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">assumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">Forall_forall</span> <span class="id" title="tactic">in</span> <span class="id" title="var">all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v'</span> [<span class="id" title="var">Heqv</span> <span class="id" title="var">Hneqv</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Honly_v</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqv</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Heq_v'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Heq_v'</span> <span class="id" title="keyword">as</span> [|[<span class="id" title="var">_m</span> [<span class="id" title="var">Heq_m</span> [<span class="id" title="var">Heq_v'</span> <span class="id" title="var">Hweqv</span>]]]]; [<span class="id" title="tactic">subst</span>; <span class="id" title="var">contradiction</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Heq_m</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">_m</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Heq_m</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">v'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">v</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">v'</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Heq_v'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">assumption</span>|]. <span class="id" title="tactic">split</span>; [|<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">v'</span> <span class="id" title="var">Hv'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">v'</span> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <span class="id" title="var">s</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; [<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.StdppListSet.html#set_add_intro1"><span class="id" title="lemma">set_add_intro1</span></a>; <span class="id" title="tactic">assumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.StdppListSet.html#set_add_intro2"><span class="id" title="lemma">set_add_intro2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Honly_v</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hv'</span> <span class="id" title="keyword">as</span> [|[<span class="id" title="var">_m</span> [<span class="id" title="var">Heq_m</span> [<span class="id" title="var">Heq_v'</span> <span class="id" title="var">_</span>]]]]; [<span class="id" title="tactic">subst</span>; <span class="id" title="var">contradiction</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.StdppListSet.html#set_add_elim"><span class="id" title="lemma">set_add_elim</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Heq_v'</span> | <span class="id" title="var">Hs'0</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; [<span class="id" title="tactic">subst</span> <span class="id" title="var">v'</span>; <span class="id" title="tactic">assumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hincl</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hreflect</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#input_valid_transition_reflects_trace_witnessing_equivocation_prop"><span class="id" title="lemma">input_valid_transition_reflects_trace_witnessing_equivocation_prop</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#conj"><span class="id" title="constructor">conj</span></a> <span class="id" title="var">Htr</span> <span class="id" title="var">Hinit</span>) <span class="id" title="var">_</span> <span class="id" title="var">Hwitness</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hreflect</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab119"></a><h2 class="section">Strongly witnessed equivocation</h2>

<div class="paragraph"> </div>

 A stronger <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#trace_witnessing_equivocation_prop"><span class="id" title="definition">trace_witnessing_equivocation_prop</span></a></span>erty requires that any
prefix of a trace is witnessing equivocation for its correspondin final state.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="strong_trace_witnessing_equivocation_prop" class="idref" href="#strong_trace_witnessing_equivocation_prop"><span class="id" title="definition">strong_trace_witnessing_equivocation_prop</span></a> <a id="is:84" class="idref" href="#is:84"><span class="id" title="binder">is</span></a> <a id="tr:85" class="idref" href="#tr:85"><span class="id" title="binder">tr</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="prefix:86" class="idref" href="#prefix:86"><span class="id" title="binder">prefix</span></a> <a id="suffix:87" class="idref" href="#suffix:87"><span class="id" title="binder">suffix</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#prefix:86"><span class="id" title="variable">prefix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#suffix:87"><span class="id" title="variable">suffix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:85"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#trace_witnessing_equivocation_prop"><span class="id" title="definition">trace_witnessing_equivocation_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is:84"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#prefix:86"><span class="id" title="variable">prefix</span></a>.<br/>

<br/>
</div>

<div class="doc">
An advantage of the <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#strong_trace_witnessing_equivocation_prop"><span class="id" title="definition">strong_trace_witnessing_equivocation_prop</span></a></span>erty
is that is guantees monotonicity of <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.html#equivocating_validators"><span class="id" title="projection">equivocating_validators</span></a></span> along the trace.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="strong_witness_equivocating_validators_prefix_monotonicity" class="idref" href="#strong_witness_equivocating_validators_prefix_monotonicity"><span class="id" title="lemma">strong_witness_equivocating_validators_prefix_monotonicity</span></a><br/>
&nbsp;&nbsp;(<a id="is:88" class="idref" href="#is:88"><span class="id" title="binder">is</span></a> <a id="s:89" class="idref" href="#s:89"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:90" class="idref" href="#tr:90"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_transition_item"><span class="id" title="definition">composite_transition_item</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.IM"><span class="id" title="variable">IM</span></a>))<br/>
&nbsp;&nbsp;(<a id="Htr:91" class="idref" href="#Htr:91"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.PreFree"><span class="id" title="variable">PreFree</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is:88"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:89"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:90"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hwitness:92" class="idref" href="#Hwitness:92"><span class="id" title="binder">Hwitness</span></a> : <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#strong_trace_witnessing_equivocation_prop"><span class="id" title="definition">strong_trace_witnessing_equivocation_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is:88"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:90"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;<a id="prefix:93" class="idref" href="#prefix:93"><span class="id" title="binder">prefix</span></a> <a id="suffix:94" class="idref" href="#suffix:94"><span class="id" title="binder">suffix</span></a><br/>
&nbsp;&nbsp;(<a id="Heqtr:95" class="idref" href="#Heqtr:95"><span class="id" title="binder">Heqtr</span></a> : <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#prefix:93"><span class="id" title="variable">prefix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#suffix:94"><span class="id" title="variable">suffix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:90"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;(<a id="ps:96" class="idref" href="#ps:96"><span class="id" title="binder">ps</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is:88"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#prefix:93"><span class="id" title="variable">prefix</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#ps:96"><span class="id" title="variable">ps</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:89"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">prefix</span> <span class="id" title="var">suffix</span> <span class="id" title="var">Heqtr</span> <span class="id" title="var">ps</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_rev_ind"><span class="id" title="lemma">finite_valid_trace_init_to_rev_ind</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#app_eq_nil"><span class="id" title="lemma">app_eq_nil</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqtr</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Heqtr</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">remember</span> {| <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a> := <span class="id" title="var">iom</span> |} <span class="id" title="keyword">as</span> <span class="id" title="var">item</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">IHHtr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">pre</span> <span class="id" title="var">suf</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hwitness</span> <span class="id" title="var">pre</span> (<span class="id" title="var">suf</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">item</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hwitness</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_list_last</span> <span class="id" title="var">suffix</span> <span class="id" title="var">suffix'</span> <span class="id" title="var">_item</span> <span class="id" title="var">Heqsuffix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqtr</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">ps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_is_last"><span class="id" title="lemma">finite_trace_last_is_last</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqtr</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#app_inj_tail"><span class="id" title="lemma">app_inj_tail</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqtr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Heqtr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Heqtr</span> <span class="id" title="var">Heq_item</span>]. <span class="id" title="tactic">subst</span> <span class="id" title="var">_item</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHtr</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Heqtr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <span class="id" title="var">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; [<span class="id" title="tactic">assumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hwitness</span> (<span class="id" title="var">tr</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">item</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">Hwitness</span>. { <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">sf</span> <span class="id" title="keyword">with</span> (<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">item</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#equivocating_validators_witness_monotonicity"><span class="id" title="lemma">equivocating_validators_witness_monotonicity</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Htr</span> <span class="id" title="var">_</span> <span class="id" title="var">Hwitness</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The next two lemmas show that the <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#strong_trace_witnessing_equivocation_prop"><span class="id" title="definition">strong_trace_witnessing_equivocation_prop</span></a></span>erty
is preserved by transitions in both the cases yielded by Lemma
<span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#equivocating_validators_witness_last_char"><span class="id" title="lemma">equivocating_validators_witness_last_char</span></a></span> as part of the induction step in
the proof of Lemma <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#preloaded_has_strong_trace_witnessing_equivocation_prop"><span class="id" title="lemma">preloaded_has_strong_trace_witnessing_equivocation_prop</span></a></span>.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="strong_trace_witnessing_equivocation_prop_extend_eq" class="idref" href="#strong_trace_witnessing_equivocation_prop_extend_eq"><span class="id" title="lemma">strong_trace_witnessing_equivocation_prop_extend_eq</span></a><br/>
&nbsp;&nbsp;<a id="s:97" class="idref" href="#s:97"><span class="id" title="binder">s</span></a><br/>
&nbsp;&nbsp;<a id="is:98" class="idref" href="#is:98"><span class="id" title="binder">is</span></a> <a id="tr':99" class="idref" href="#tr':99"><span class="id" title="binder">tr'</span></a><br/>
&nbsp;&nbsp;(<a id="Htr':100" class="idref" href="#Htr':100"><span class="id" title="binder">Htr'</span></a>: <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.PreFree"><span class="id" title="variable">PreFree</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is:98"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:97"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr':99"><span class="id" title="variable">tr'</span></a>)<br/>
&nbsp;&nbsp;<a id="is':101" class="idref" href="#is':101"><span class="id" title="binder">is'</span></a> <a id="tr'':102" class="idref" href="#tr'':102"><span class="id" title="binder">tr''</span></a><br/>
&nbsp;&nbsp;(<a id="Htr'':103" class="idref" href="#Htr'':103"><span class="id" title="binder">Htr''</span></a>: <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.PreFree"><span class="id" title="variable">PreFree</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is':101"><span class="id" title="variable">is'</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:97"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr'':102"><span class="id" title="variable">tr''</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hprefix:104" class="idref" href="#Hprefix:104"><span class="id" title="binder">Hprefix</span></a> : <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#strong_trace_witnessing_equivocation_prop"><span class="id" title="definition">strong_trace_witnessing_equivocation_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is':101"><span class="id" title="variable">is'</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr'':102"><span class="id" title="variable">tr''</span></a>)<br/>
&nbsp;&nbsp;<a id="item:105" class="idref" href="#item:105"><span class="id" title="binder">item</span></a><br/>
&nbsp;&nbsp;(<a id="Hwitness:106" class="idref" href="#Hwitness:106"><span class="id" title="binder">Hwitness</span></a> : <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#trace_witnessing_equivocation_prop"><span class="id" title="definition">trace_witnessing_equivocation_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is:98"><span class="id" title="variable">is</span></a> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr':99"><span class="id" title="variable">tr'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#item:105"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>))<br/>
&nbsp;&nbsp;(<a id="Heq:107" class="idref" href="#Heq:107"><span class="id" title="binder">Heq</span></a>: <a class="idref" href="VLSM.Lib.ListSetExtras.html#set_eq"><span class="id" title="definition">set_eq</span></a> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:97"><span class="id" title="variable">s</span></a>) (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#item:105"><span class="id" title="variable">item</span></a>)))<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#strong_trace_witnessing_equivocation_prop"><span class="id" title="definition">strong_trace_witnessing_equivocation_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is':101"><span class="id" title="variable">is'</span></a> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr'':102"><span class="id" title="variable">tr''</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#item:105"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">prefix</span> <span class="id" title="var">suffix</span> <span class="id" title="var">Heq_tr''_item</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_list_last</span> <span class="id" title="var">suffix</span> <span class="id" title="var">suffix'</span> <span class="id" title="var">sitem</span> <span class="id" title="var">Hsuffix_eq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq_tr''_item</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">v</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_is_last"><span class="id" title="lemma">finite_trace_last_is_last</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hprefix</span> <span class="id" title="var">tr''</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">Hprefix</span>; [<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_trace_get_last"><span class="id" title="method">valid_trace_get_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr''</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hlst'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">Hv</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Heq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hlst'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hprefix</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">m</span> [<span class="id" title="var">Hmsg</span> <span class="id" title="var">Heqv</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">m</span>. <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">assumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Equivocation.html#equivocation_in_trace_prefix"><span class="id" title="lemma">equivocation_in_trace_prefix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> [<span class="id" title="var">m</span> [<span class="id" title="var">Hmsg</span> <span class="id" title="var">Heqv</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Equivocation.html#equivocation_in_trace_last_char"><span class="id" title="lemma">equivocation_in_trace_last_char</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Heqv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Heqv</span> | <span class="id" title="var">Heqv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hlst'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hprefix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">m</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> <span class="id" title="var">Heqv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Heq_om</span> <span class="id" title="var">Heqv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Heqv'</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="VLSM.Core.VLSM.html#trace_has_message"><span class="id" title="definition">trace_has_message</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#field_selector"><span class="id" title="definition">field_selector</span></a> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a>) <span class="id" title="var">m</span> <span class="id" title="var">tr'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intro</span> <span class="id" title="var">Heqv'</span>. <span class="id" title="tactic">elim</span> <span class="id" title="var">Heqv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_trace_last_pstate"><span class="id" title="method">valid_trace_last_pstate</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr'</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Htr'_lst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent_consistency"><span class="id" title="lemma">has_been_sent_consistency</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.Free"><span class="id" title="variable">Free</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">Htr'_lst</span> <span class="id" title="var">m</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hconsistency</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">Hconsistency</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">exists</span> <span class="id" title="keyword">is</span>, <span class="id" title="var">tr'</span>, <span class="id" title="var">Htr'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">Hconsistency</span> <span class="id" title="var">is'</span> <span class="id" title="var">tr''</span> <span class="id" title="var">Htr''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">Hwitness</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_is_last"><span class="id" title="lemma">finite_trace_last_is_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hwitness</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hwitness</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hwitness</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">m</span>. <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">assumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span> <span class="id" title="var">tr'</span>, <span class="id" title="var">_</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">reflexivity</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq_tr''_item</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#app_inj_tail"><span class="id" title="lemma">app_inj_tail</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq_tr''_item</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Heq_tr''_item</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Heq_tr''</span> <span class="id" title="var">Heq_item</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">Hprefix</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Heq_tr''</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="strong_trace_witnessing_equivocation_prop_extend_neq" class="idref" href="#strong_trace_witnessing_equivocation_prop_extend_neq"><span class="id" title="lemma">strong_trace_witnessing_equivocation_prop_extend_neq</span></a><br/>
&nbsp;&nbsp;<a id="s:108" class="idref" href="#s:108"><span class="id" title="binder">s</span></a><br/>
&nbsp;&nbsp;<a id="is:109" class="idref" href="#is:109"><span class="id" title="binder">is</span></a> <a id="tr:110" class="idref" href="#tr:110"><span class="id" title="binder">tr</span></a><br/>
&nbsp;&nbsp;(<a id="Htr:111" class="idref" href="#Htr:111"><span class="id" title="binder">Htr</span></a>: <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.PreFree"><span class="id" title="variable">PreFree</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is:109"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:108"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:110"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hprefix:112" class="idref" href="#Hprefix:112"><span class="id" title="binder">Hprefix</span></a> : <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#strong_trace_witnessing_equivocation_prop"><span class="id" title="definition">strong_trace_witnessing_equivocation_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is:109"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:110"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;<a id="item:113" class="idref" href="#item:113"><span class="id" title="binder">item</span></a><br/>
&nbsp;&nbsp;<a id="msg:114" class="idref" href="#msg:114"><span class="id" title="binder">msg</span></a><br/>
&nbsp;&nbsp;(<a id="Hmsg:115" class="idref" href="#Hmsg:115"><span class="id" title="binder">Hmsg</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#item:113"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#msg:114"><span class="id" title="variable">msg</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hwneq:116" class="idref" href="#Hwneq:116"><span class="id" title="binder">Hwneq</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="VLSM.Core.VLSM.html#trace_has_message"><span class="id" title="definition">trace_has_message</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#field_selector"><span class="id" title="definition">field_selector</span></a> <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a>) <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#msg:114"><span class="id" title="variable">msg</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:110"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;<a id="v:117" class="idref" href="#v:117"><span class="id" title="binder">v</span></a><br/>
&nbsp;&nbsp;(<a id="Hsender:118" class="idref" href="#Hsender:118"><span class="id" title="binder">Hsender</span></a>: <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.sender"><span class="id" title="variable">sender</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#msg:114"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#v:117"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hneq:119" class="idref" href="#Hneq:119"><span class="id" title="binder">Hneq</span></a>: <a class="idref" href="VLSM.Lib.ListSetExtras.html#set_eq"><span class="id" title="definition">set_eq</span></a> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#item:113"><span class="id" title="variable">item</span></a>)) (<a class="idref" href="VLSM.Lib.StdppListSet.html#set_add"><span class="id" title="definition">set_add</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#v:117"><span class="id" title="variable">v</span></a> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:108"><span class="id" title="variable">s</span></a>)))<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#strong_trace_witnessing_equivocation_prop"><span class="id" title="definition">strong_trace_witnessing_equivocation_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is:109"><span class="id" title="variable">is</span></a> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:110"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#item:113"><span class="id" title="variable">item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">prefix</span> <span class="id" title="var">suffix</span> <span class="id" title="var">Heq_tr''_item</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_list_last</span> <span class="id" title="var">suffix</span> <span class="id" title="var">suffix'</span> <span class="id" title="var">sitem</span> <span class="id" title="var">Hsuffix_eq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq_tr''_item</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">prefix</span> <span class="id" title="var">suffix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">v'</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_is_last"><span class="id" title="lemma">finite_trace_last_is_last</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hprefix</span> <span class="id" title="var">tr</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">Hprefix</span>; [<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#valid_trace_get_last"><span class="id" title="method">valid_trace_get_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hlst'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">Hv'</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hneq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.StdppListSet.html#set_add_iff"><span class="id" title="lemma">set_add_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hlst'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hv'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Heq_v</span> | <span class="id" title="var">Hv'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">msg</span>. <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">assumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span> <span class="id" title="var">tr</span>, <span class="id" title="var">_</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">Hprefix</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hv'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">m</span> [? <span class="id" title="var">Heqv</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">m</span>. <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">assumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Equivocation.html#equivocation_in_trace_prefix"><span class="id" title="lemma">equivocation_in_trace_prefix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> [<span class="id" title="var">m</span> [? <span class="id" title="var">Heqv</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Equivocation.html#equivocation_in_trace_last_char"><span class="id" title="lemma">equivocation_in_trace_last_char</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hneq</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.StdppListSet.html#set_add_iff"><span class="id" title="lemma">set_add_iff</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Heqv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Heqv</span> | <span class="id" title="var">Heqv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hlst'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hprefix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">m</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">left</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Heqv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Heq_om</span> <span class="id" title="var">Heqv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq_tr''_item</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#app_inj_tail"><span class="id" title="lemma">app_inj_tail</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq_tr''_item</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Heq_tr''_item</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Heq_tr''</span> <span class="id" title="var">Heq_item</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">Hprefix</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Heq_tr''</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Proving that any state <code>s</code> has the <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#strong_trace_witnessing_equivocation_prop"><span class="id" title="definition">strong_trace_witnessing_equivocation_prop</span></a></span>erty
proceeds via a more technical double induction over both:

<div class="paragraph"> </div>

(1) the length of a trace witnessing the equivocation of <code>s</code>; and
(2) the size of the set of equivocators of <code>s</code>.

<div class="paragraph"> </div>

For the induction step we assume that the witnessing trace leading to <code>s</code> is
of the form <code>tr ++ [item</code>. By Lemma <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#equivocating_validators_witness_last_char"><span class="id" title="lemma">equivocating_validators_witness_last_char</span></a></span>
we know that either <code>tr</code> is also a witnessing trace, in which case we can use
the induction hypothesis via property (1), or the set of equivocators for the
last state of <code>tr</code> is strictly included in that of <code>s</code>, allowing us to use
the induction hypothesis via property (2).

<div class="paragraph"> </div>

The conclusion then follows by the two helper lemmas above.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="preloaded_has_strong_trace_witnessing_equivocation_prop" class="idref" href="#preloaded_has_strong_trace_witnessing_equivocation_prop"><span class="id" title="lemma">preloaded_has_strong_trace_witnessing_equivocation_prop</span></a> <a id="s:120" class="idref" href="#s:120"><span class="id" title="binder">s</span></a><br/>
&nbsp;&nbsp;(<a id="Hs:121" class="idref" href="#Hs:121"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.PreFree"><span class="id" title="variable">PreFree</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:120"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="is':122" class="idref" href="#is':122"><span class="id" title="binder">is'</span></a> <a id="tr':123" class="idref" href="#tr':123"><span class="id" title="binder">tr'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.PreFree"><span class="id" title="variable">PreFree</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is':122"><span class="id" title="variable">is'</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:120"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr':123"><span class="id" title="variable">tr'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#strong_trace_witnessing_equivocation_prop"><span class="id" title="definition">strong_trace_witnessing_equivocation_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is':122"><span class="id" title="variable">is'</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr':123"><span class="id" title="variable">tr'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is_equivocating_tracewise_witness"><span class="id" title="method">is_equivocating_tracewise_witness</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">as</span> [<span class="id" title="keyword">is</span> [<span class="id" title="var">tr</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Hwitness</span>]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_last"><span class="id" title="lemma">finite_valid_trace_init_to_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hlst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_forget_last"><span class="id" title="lemma">finite_valid_trace_init_to_forget_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <span class="id" title="var">tr</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <span class="id" title="keyword">is</span> <span class="id" title="var">tr</span>))) <span class="id" title="keyword">as</span> <span class="id" title="var">m</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span> <span class="id" title="keyword">is</span> <span class="id" title="var">tr</span> <span class="id" title="var">Heqm</span> <span class="id" title="var">Heqn</span> <span class="id" title="var">Htr</span> <span class="id" title="var">Hwitness</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="m:133" class="idref" href="#m:133"><span class="id" title="binder">m</span></a> <a id="n:134" class="idref" href="#n:134"><span class="id" title="binder">n</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="is:135" class="idref" href="#is:135"><span class="id" title="binder">is</span></a> <a id="tr:136" class="idref" href="#tr:136"><span class="id" title="binder">tr</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#m:124"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is:126"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:127"><span class="id" title="variable">tr</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#n:125"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:127"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace"><span class="id" title="definition">finite_valid_trace</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.PreFree"><span class="id" title="variable">PreFree</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is:126"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:127"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#trace_witnessing_equivocation_prop"><span class="id" title="definition">trace_witnessing_equivocation_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is:126"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:127"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="s:137" class="idref" href="#s:137"><span class="id" title="binder">s</span></a> := <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is:126"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:127"><span class="id" title="variable">tr</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="is':138" class="idref" href="#is':138"><span class="id" title="binder">is'</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#state"><span class="id" title="method">state</span></a>) (<a id="tr':139" class="idref" href="#tr':139"><span class="id" title="binder">tr'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.PreFree"><span class="id" title="variable">PreFree</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is':129"><span class="id" title="variable">is'</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:128"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr':130"><span class="id" title="variable">tr'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="prefix:140" class="idref" href="#prefix:140"><span class="id" title="binder">prefix</span></a> <a id="suffix:141" class="idref" href="#suffix:141"><span class="id" title="binder">suffix</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="VLSM.Core.VLSM.html#transition_item"><span class="id" title="record">transition_item</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#prefix:131"><span class="id" title="variable">prefix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#suffix:132"><span class="id" title="variable">suffix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr':130"><span class="id" title="variable">tr'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#trace_witnessing_equivocation_prop"><span class="id" title="definition">trace_witnessing_equivocation_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is':129"><span class="id" title="variable">is'</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#prefix:131"><span class="id" title="variable">prefix</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Pr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Arith.Wf_nat.html#lt_wf_double_ind"><span class="id" title="lemma">Wf_nat.lt_wf_double_ind</span></a> <span class="id" title="var">Pr</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span> <span class="id" title="var">IHm</span> <span class="id" title="var">IHn</span>. <span class="id" title="tactic">intros</span> <span class="id" title="keyword">is</span> <span class="id" title="var">tr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_list_last</span> <span class="id" title="var">tr</span> <span class="id" title="var">tr'</span> <span class="id" title="var">item</span> <span class="id" title="var">Htr_eq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Htr</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="keyword">is</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_add_last"><span class="id" title="lemma">finite_valid_trace_init_add_last</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; [<span class="id" title="tactic">assumption</span> | <span class="id" title="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">prefix</span> <span class="id" title="var">suffix</span> <span class="id" title="var">Heq_tr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#app_eq_nil"><span class="id" title="lemma">app_eq_nil</span></a>  <span class="id" title="tactic">in</span> <span class="id" title="var">Heq_tr</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Heq_tr</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#initial_state_witnessing_equivocation_prop"><span class="id" title="lemma">initial_state_witnessing_equivocation_prop</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_is_last"><span class="id" title="lemma">finite_trace_last_is_last</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? <span class="id" title="var">Hn</span> <span class="id" title="var">Htr'_item</span> <span class="id" title="var">Hwitness</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_add_last"><span class="id" title="lemma">finite_valid_trace_init_add_last</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<span class="id" title="var">sf</span> := <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">item</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">Htr'_item</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; [|<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_is_last"><span class="id" title="lemma">finite_trace_last_is_last</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">item</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">l</span> <span class="id" title="var">om</span> <span class="id" title="var">s'</span> <span class="id" title="var">om'</span>]. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#equivocating_validators_witness_last_char"><span class="id" title="lemma">equivocating_validators_witness_last_char</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Htr'_item</span> <span class="id" title="var">Hwitness</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [[<span class="id" title="var">Heq</span> <span class="id" title="var">Hwitness'</span>] | [<span class="id" title="var">msg</span> [<span class="id" title="var">Heq_om</span> [<span class="id" title="var">v</span> [<span class="id" title="var">Hsender</span> [<span class="id" title="var">Hnv</span> <span class="id" title="var">Hneq</span>]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">spec</span> <span class="id" title="var">IHn</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <span class="id" title="var">tr'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#app_length"><span class="id" title="lemma">app_length</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">IHn</span>; [<span class="id" title="var">lia</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">IHn</span> <span class="id" title="keyword">is</span> <span class="id" title="var">tr'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Lib.ListExtras.html#NoDup_subseteq_length"><span class="id" title="lemma">NoDup_subseteq_length</span></a> (<a class="idref" href="VLSM.Core.Equivocation.html#equivocating_validators_nodup"><span class="id" title="lemma">equivocating_validators_nodup</span></a> <span class="id" title="var">s'</span>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#proj2"><span class="id" title="lemma">proj2</span></a> <span class="id" title="var">Heq</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Hlen1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">type</span> <span class="id" title="keyword">of</span> <span class="id" title="var">Hlen1</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> ?<span class="id" title="var">st</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">st</span> <span class="id" title="keyword">as</span> <span class="id" title="var">s</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Lib.ListExtras.html#NoDup_subseteq_length"><span class="id" title="lemma">NoDup_subseteq_length</span></a> (<a class="idref" href="VLSM.Core.Equivocation.html#equivocating_validators_nodup"><span class="id" title="lemma">equivocating_validators_nodup</span></a> <span class="id" title="var">s</span>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#proj1"><span class="id" title="lemma">proj1</span></a> <span class="id" title="var">Heq</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Hlen2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">IHn</span> ; [<span class="id" title="tactic">subst</span> <span class="id" title="var">s</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Arith.Le.html#le_antisym"><span class="id" title="abbreviation">le_antisym</span></a>; <span class="id" title="tactic">assumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHn</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr'_item</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htr'_item</span> <span class="id" title="var">Hinit</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_app_split"><span class="id" title="lemma">finite_valid_trace_from_to_app_split</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr'_item</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr'_item</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htr'</span> <span class="id" title="var">Hitem</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">IHn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">split</span>; [|<span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_forget_last"><span class="id" title="lemma">finite_valid_trace_from_to_forget_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">IHn</span> <span class="id" title="var">Hwitness'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHn</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">is'</span> [<span class="id" title="var">tr''</span> [[<span class="id" title="var">Htr''</span> <span class="id" title="var">Hinit'</span>] <span class="id" title="var">Hprefix</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_app"><span class="id" title="lemma">finite_valid_trace_from_to_app</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.PreFree"><span class="id" title="variable">PreFree</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Htr''</span> <span class="id" title="var">Hitem</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Htr''_item</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span> <span class="id" title="var">is'</span>, <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">exact</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#conj"><span class="id" title="constructor">conj</span></a> <span class="id" title="var">Htr''_item</span> <span class="id" title="var">Hinit'</span>)|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#strong_trace_witnessing_equivocation_prop_extend_eq"><span class="id" title="lemma">strong_trace_witnessing_equivocation_prop_extend_eq</span></a> <span class="id" title="var">_</span> <span class="id" title="keyword">is</span> <span class="id" title="var">tr'</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#conj"><span class="id" title="constructor">conj</span></a> <span class="id" title="var">Htr'</span> <span class="id" title="var">Hinit</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; [<span class="id" title="tactic">split</span>; <span class="id" title="tactic">assumption</span>|<span class="id" title="tactic">assumption</span>..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hneq</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hneq</span> <span class="id" title="var">Hwneq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">type</span> <span class="id" title="keyword">of</span> <span class="id" title="var">Hnv</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> <span class="id" title="notation">∉</span> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> ?<span class="id" title="var">st</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> <span class="id" title="var">st</span> <span class="id" title="keyword">as</span> <span class="id" title="var">s</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is_equivocating_tracewise_witness"><span class="id" title="method">is_equivocating_tracewise_witness</span></a> <span class="id" title="var">s</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hwitness'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">Hwitness'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#proj1"><span class="id" title="lemma">proj1</span></a>, <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_app_split"><span class="id" title="lemma">finite_valid_trace_from_to_app_split</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#proj1"><span class="id" title="lemma">proj1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;, <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_last_pstate"><span class="id" title="lemma">finite_valid_trace_from_to_last_pstate</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">Htr'_item</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hwitness'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">is'</span> [<span class="id" title="var">tr''</span>[<span class="id" title="var">Htr''</span> <span class="id" title="var">Hwitness'</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">IHm</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <span class="id" title="var">s</span>)) (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <span class="id" title="var">tr''</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">IHm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hnodup_v_s</span> : <span class="id" title="inductive">NoDup</span> (<a class="idref" href="VLSM.Lib.StdppListSet.html#set_add"><span class="id" title="definition">set_add</span></a> <span class="id" title="var">v</span> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <span class="id" title="var">s</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Lib.StdppListSet.html#set_add_nodup"><span class="id" title="lemma">set_add_nodup</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Equivocation.html#equivocating_validators_nodup"><span class="id" title="lemma">equivocating_validators_nodup</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Lib.ListExtras.html#NoDup_subseteq_length"><span class="id" title="lemma">NoDup_subseteq_length</span></a> <span class="id" title="var">Hnodup_v_s</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#proj2"><span class="id" title="lemma">proj2</span></a> <span class="id" title="var">Hneq</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Hlen1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="VLSM.Lib.ListSetExtras.html#set_add_length"><span class="id" title="lemma">set_add_length</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlen1</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">IHm</span> <span class="id" title="var">is'</span> <span class="id" title="var">tr''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_last"><span class="id" title="lemma">finite_valid_trace_init_to_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr''</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Htr''_lst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Htr''_lst</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHm</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">IHm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_forget_last"><span class="id" title="lemma">finite_valid_trace_init_to_forget_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">IHm</span> <span class="id" title="var">Hwitness'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHm</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">is''</span> [<span class="id" title="var">tr'''</span> [[<span class="id" title="var">Htr'''</span> <span class="id" title="var">Hinit'</span>] <span class="id" title="var">Hprefix</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#proj1"><span class="id" title="lemma">proj1</span></a>, <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_app_split"><span class="id" title="lemma">finite_valid_trace_from_to_app_split</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#proj2"><span class="id" title="lemma">proj2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr'_item</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hitem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqs</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hitem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_app"><span class="id" title="lemma">finite_valid_trace_from_to_app</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.PreFree"><span class="id" title="variable">PreFree</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Htr'''</span> <span class="id" title="var">Hitem</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Htr'''_item</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span> <span class="id" title="var">is''</span>, <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">exact</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#conj"><span class="id" title="constructor">conj</span></a> <span class="id" title="var">Htr'''_item</span> <span class="id" title="var">Hinit'</span>)|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hprefix</span> <span class="id" title="var">tr'''</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hwitness'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">Hwitness'''</span>; [<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hwneq</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#conj"><span class="id" title="constructor">conj</span></a> <span class="id" title="var">Htr'''</span> <span class="id" title="var">Hinit'</span>) <span class="id" title="var">Hwitness'''</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> {| <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">msg</span> |} <span class="id" title="keyword">as</span> <span class="id" title="var">item</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#strong_trace_witnessing_equivocation_prop_extend_neq"><span class="id" title="lemma">strong_trace_witnessing_equivocation_prop_extend_neq</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#conj"><span class="id" title="constructor">conj</span></a> <span class="id" title="var">Htr'''</span> <span class="id" title="var">Hinit'</span>) <span class="id" title="var">Hprefix</span> <span class="id" title="var">item</span> <span class="id" title="var">msg</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Hextend</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">Hextend</span>; [<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">reflexivity</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hextend</span> <span class="id" title="var">Hwneq</span> <span class="id" title="var">_</span> <span class="id" title="var">Hsender</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hextend</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
A version of Lemma <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#preloaded_has_strong_trace_witnessing_equivocation_prop"><span class="id" title="lemma">preloaded_has_strong_trace_witnessing_equivocation_prop</span></a></span>
guaranteeing that for any <span class="inlinecode"><a class="idref" href="VLSM.Core.VLSM.html#valid_state"><span class="id" title="definition">valid_state</span></a></span> w.r.t. the Free composition there is
a trace ending in that state which is valid w.r.t. the Free composition and
it has the <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#strong_trace_witnessing_equivocation_prop"><span class="id" title="definition">strong_trace_witnessing_equivocation_prop</span></a></span>erty.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="free_has_strong_trace_witnessing_equivocation_prop" class="idref" href="#free_has_strong_trace_witnessing_equivocation_prop"><span class="id" title="lemma">free_has_strong_trace_witnessing_equivocation_prop</span></a> <a id="s:142" class="idref" href="#s:142"><span class="id" title="binder">s</span></a><br/>
&nbsp;&nbsp;(<a id="Hs:143" class="idref" href="#Hs:143"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:142"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="is':144" class="idref" href="#is':144"><span class="id" title="binder">is'</span></a> <a id="tr':145" class="idref" href="#tr':145"><span class="id" title="binder">tr'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is':144"><span class="id" title="variable">is'</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:142"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr':145"><span class="id" title="variable">tr'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#strong_trace_witnessing_equivocation_prop"><span class="id" title="definition">strong_trace_witnessing_equivocation_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is':144"><span class="id" title="variable">is'</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr':145"><span class="id" title="variable">tr'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSMProjections.html#VLSM_incl_valid_state"><span class="id" title="lemma">VLSM_incl_valid_state</span></a> (<a class="idref" href="VLSM.Core.VLSMProjections.html#vlsm_incl_pre_loaded_with_all_messages_vlsm"><span class="id" title="lemma">vlsm_incl_pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.Free"><span class="id" title="variable">Free</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hpre_s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#preloaded_has_strong_trace_witnessing_equivocation_prop"><span class="id" title="lemma">preloaded_has_strong_trace_witnessing_equivocation_prop</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpre_s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hpre_s</span> <span class="id" title="keyword">as</span> [<span class="id" title="keyword">is</span> [<span class="id" title="var">tr</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Hwitness</span>]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.Equivocation.html#all_pre_traces_to_valid_state_are_valid"><span class="id" title="lemma">all_pre_traces_to_valid_state_are_valid</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.IM"><span class="id" title="variable">IM</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span><br/>
&nbsp;&nbsp;; [|<span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="keyword">is</span>, <span class="id" title="var">tr</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation.witnessed_equivocation_properties"><span class="id" title="section">witnessed_equivocation_properties</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation"><span class="id" title="section">witnessed_equivocation</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab120"></a><h2 class="section">Witnessed equivocation and fixed-set equivocation</h2>


<div class="paragraph"> </div>

The main result of this module is that, under witnessed equivocation
assumptions, any trace with the <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#strong_trace_witnessing_equivocation_prop"><span class="id" title="definition">strong_trace_witnessing_equivocation_prop</span></a></span>erty
which is valid for the free composition (guaranteed to exist by
Lemma <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#free_has_strong_trace_witnessing_equivocation_prop"><span class="id" title="lemma">free_has_strong_trace_witnessing_equivocation_prop</span></a></span>) is also valid
for the composition constrained by the <span class="inlinecode"><span class="id" title="var">fixed_equivocation_constrained</span></span> induced
by the <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.html#equivocating_validators"><span class="id" title="projection">equivocating_validators</span></a></span> of its final state.

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="witnessed_equivocation_fixed_set" class="idref" href="#witnessed_equivocation_fixed_set"><span class="id" title="section">witnessed_equivocation_fixed_set</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;`{<a id="EqDecision0:147" class="idref" href="#EqDecision0:147"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:147" class="idref" href="#EqDecision0:147"><span class="id" title="binder">message</span></a>}<br/>
&nbsp;&nbsp;`{<a id="H:150" class="idref" href="#H:150"><span class="id" title="binder">finite.Finite</span></a> <a id="H:150" class="idref" href="#H:150"><span class="id" title="binder">index</span></a>}<br/>
&nbsp;&nbsp;(<a id="IM:151" class="idref" href="#IM:151"><span class="id" title="binder">IM</span></a> : <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#index:148"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Core.VLSM.html#VLSM"><span class="id" title="record">VLSM</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#message:146"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;`{<a id="H0:153" class="idref" href="#H0:153"><span class="id" title="binder">forall</span></a> <a id="H0:153" class="idref" href="#H0:153"><span class="id" title="binder">i</span></a><a id="H0:153" class="idref" href="#H0:153"><span class="id" title="binder">,</span></a> <a id="H0:153" class="idref" href="#H0:153"><span class="id" title="binder">HasBeenSentCapability</span></a> <a id="H0:153" class="idref" href="#H0:153"><span class="id" title="binder">(</span></a><a id="H0:153" class="idref" href="#H0:153"><span class="id" title="binder">IM</span></a> <a id="H0:153" class="idref" href="#H0:153"><span class="id" title="binder">i</span></a><a id="H0:153" class="idref" href="#H0:153"><span class="id" title="binder">)</span></a>}<br/>
&nbsp;&nbsp;`{<a id="H1:155" class="idref" href="#H1:155"><span class="id" title="binder">forall</span></a> <a id="H1:155" class="idref" href="#H1:155"><span class="id" title="binder">i</span></a><a id="H1:155" class="idref" href="#H1:155"><span class="id" title="binder">,</span></a> <a id="H1:155" class="idref" href="#H1:155"><span class="id" title="binder">HasBeenReceivedCapability</span></a> <a id="H1:155" class="idref" href="#H1:155"><span class="id" title="binder">(</span></a><a id="H1:155" class="idref" href="#H1:155"><span class="id" title="binder">IM</span></a> <a id="H1:155" class="idref" href="#H1:155"><span class="id" title="binder">i</span></a><a id="H1:155" class="idref" href="#H1:155"><span class="id" title="binder">)</span></a>}<br/>
&nbsp;&nbsp;(<a id="Free:156" class="idref" href="#Free:156"><span class="id" title="binder">Free</span></a> := <a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#IM:151"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;(<a id="sender:157" class="idref" href="#sender:157"><span class="id" title="binder">sender</span></a> : <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#message:146"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#index:148"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;`{<a id="H2:159" class="idref" href="#H2:159"><span class="id" title="binder">ReachableThreshold</span></a> <a id="H2:159" class="idref" href="#H2:159"><span class="id" title="binder">index</span></a>}<br/>
&nbsp;&nbsp;`{<a id="H3:160" class="idref" href="#H3:160"><span class="id" title="binder">RelDecision</span></a> <a id="H3:160" class="idref" href="#H3:160"><span class="id" title="binder">_</span></a> <a id="H3:160" class="idref" href="#H3:160"><span class="id" title="binder">_</span></a> <a id="H3:160" class="idref" href="#H3:160"><span class="id" title="binder">(</span></a><a id="H3:160" class="idref" href="#H3:160"><span class="id" title="binder">is_equivocating_tracewise_no_has_been_sent</span></a> <a id="H3:160" class="idref" href="#H3:160"><span class="id" title="binder">IM</span></a> <a id="H3:160" class="idref" href="#H3:160"><span class="id" title="binder">id</span></a> <a id="H3:160" class="idref" href="#H3:160"><span class="id" title="binder">sender</span></a><a id="H3:160" class="idref" href="#H3:160"><span class="id" title="binder">)</span></a>}<br/>
&nbsp;&nbsp;(<a id="Htracewise_BasicEquivocation:161" class="idref" href="#Htracewise_BasicEquivocation:161"><span class="id" title="binder">Htracewise_BasicEquivocation</span></a> : <a class="idref" href="VLSM.Core.Equivocation.html#BasicEquivocation"><span class="id" title="class">BasicEquivocation</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#IM:151"><span class="id" title="variable">IM</span></a>) <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#index:148"><span class="id" title="variable">index</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="VLSM.Core.Equivocation.TraceWiseEquivocation.html#equivocation_dec_tracewise"><span class="id" title="instance">equivocation_dec_tracewise</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#IM:151"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#sender:157"><span class="id" title="variable">sender</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hke:162" class="idref" href="#Hke:162"><span class="id" title="binder">Hke</span></a> : <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#WitnessedEquivocationCapability"><span class="id" title="class">WitnessedEquivocationCapability</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#IM:151"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#sender:157"><span class="id" title="variable">sender</span></a>)<br/>
&nbsp;&nbsp;(<a id="message_dependencies:163" class="idref" href="#message_dependencies:163"><span class="id" title="binder">message_dependencies</span></a> : <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#message:146"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="VLSM.Lib.StdppListSet.html#set"><span class="id" title="definition">set</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#message:146"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;`{<a id="H4:165" class="idref" href="#H4:165"><span class="id" title="binder">forall</span></a> <a id="H4:165" class="idref" href="#H4:165"><span class="id" title="binder">i</span></a><a id="H4:165" class="idref" href="#H4:165"><span class="id" title="binder">,</span></a> <a id="H4:165" class="idref" href="#H4:165"><span class="id" title="binder">MessageDependencies</span></a> <a id="H4:165" class="idref" href="#H4:165"><span class="id" title="binder">message_dependencies</span></a> <a id="H4:165" class="idref" href="#H4:165"><span class="id" title="binder">(</span></a><a id="H4:165" class="idref" href="#H4:165"><span class="id" title="binder">IM</span></a> <a id="H4:165" class="idref" href="#H4:165"><span class="id" title="binder">i</span></a><a id="H4:165" class="idref" href="#H4:165"><span class="id" title="binder">)</span></a>}<br/>
&nbsp;&nbsp;(<a id="Hfull:167" class="idref" href="#Hfull:167"><span class="id" title="binder">Hfull</span></a> : <span class="id" title="notation">forall</span> <a id="i:166" class="idref" href="#i:166"><span class="id" title="binder">i</span></a><span class="id" title="notation">,</span> <a class="idref" href="VLSM.Core.MessageDependencies.html#message_dependencies_full_node_condition_prop"><span class="id" title="definition">message_dependencies_full_node_condition_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#message_dependencies:163"><span class="id" title="variable">message_dependencies</span></a> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#IM:151"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#i:166"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;(<a id="no_initial_messages_in_IM:168" class="idref" href="#no_initial_messages_in_IM:168"><span class="id" title="binder">no_initial_messages_in_IM</span></a> : <a class="idref" href="VLSM.Core.Equivocation.html#no_initial_messages_in_IM_prop"><span class="id" title="definition">no_initial_messages_in_IM_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#IM:151"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;(<a id="can_emit_signed:169" class="idref" href="#can_emit_signed:169"><span class="id" title="binder">can_emit_signed</span></a> : <a class="idref" href="VLSM.Core.Equivocation.html#channel_authentication_prop"><span class="id" title="definition">channel_authentication_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#IM:151"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#sender:157"><span class="id" title="variable">sender</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hsender_safety:170" class="idref" href="#Hsender_safety:170"><span class="id" title="binder">Hsender_safety</span></a> : <a class="idref" href="VLSM.Core.Equivocation.html#sender_safety_alt_prop"><span class="id" title="definition">sender_safety_alt_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#IM:151"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#sender:157"><span class="id" title="variable">sender</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#channel_authentication_sender_safety"><span class="id" title="lemma">channel_authentication_sender_safety</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#IM:151"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#sender:157"><span class="id" title="variable">sender</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#can_emit_signed:169"><span class="id" title="variable">can_emit_signed</span></a>)<br/>
&nbsp;&nbsp;(<a id="Free_has_sender:171" class="idref" href="#Free_has_sender:171"><span class="id" title="binder">Free_has_sender</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.html#composite_no_initial_valid_messages_have_sender"><span class="id" title="lemma">composite_no_initial_valid_messages_have_sender</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#IM:151"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#sender:157"><span class="id" title="variable">sender</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#can_emit_signed:169"><span class="id" title="variable">can_emit_signed</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#no_initial_messages_in_IM:168"><span class="id" title="variable">no_initial_messages_in_IM</span></a> (<a class="idref" href="VLSM.Core.Composition.html#free_constraint"><span class="id" title="definition">free_constraint</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#IM:151"><span class="id" title="variable">IM</span></a>))<br/>
&nbsp;&nbsp;(<a id="equivocating_validators:172" class="idref" href="#equivocating_validators:172"><span class="id" title="binder">equivocating_validators</span></a> := <a class="idref" href="VLSM.Core.Equivocation.html#equivocating_validators"><span class="id" title="method">equivocating_validators</span></a> (<span class="id" title="var">BasicEquivocation</span> := <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#Htracewise_BasicEquivocation:161"><span class="id" title="variable">Htracewise_BasicEquivocation</span></a>))<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="var">Existing</span> <span class="id" title="keyword">Instance</span> <span class="id" title="var">Htracewise_BasicEquivocation</span>.<br/>

<br/>
</div>

<div class="doc">
Given the fact that the set of <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.html#equivocating_validators"><span class="id" title="projection">equivocating_validators</span></a></span> can be empty,
and the definition of the <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.FixedSetEquivocation.html#fixed_equivocation_constraint"><span class="id" title="definition">fixed_equivocation_constraint</span></a></span> requires
a non-empty set (to allow the composition of equivocators to exist),
we default the constraint to the <span class="inlinecode"><span class="id" title="var">composite_no_equivocation</span></span> one
when there are no <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.html#equivocating_validators"><span class="id" title="projection">equivocating_validators</span></a></span>.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="equivocating_validators_fixed_equivocation_constraint" class="idref" href="#equivocating_validators_fixed_equivocation_constraint"><span class="id" title="definition">equivocating_validators_fixed_equivocation_constraint</span></a><br/>
&nbsp;&nbsp;(<a id="s:173" class="idref" href="#s:173"><span class="id" title="binder">s</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.IM"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.FixedSetEquivocation.html#fixed_equivocation_constraint"><span class="id" title="definition">fixed_equivocation_constraint</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.IM"><span class="id" title="variable">IM</span></a> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:173"><span class="id" title="variable">s</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="equivocators_can_emit_free" class="idref" href="#equivocators_can_emit_free"><span class="id" title="lemma">equivocators_can_emit_free</span></a> <a id="m:174" class="idref" href="#m:174"><span class="id" title="binder">m</span></a><br/>
&nbsp;&nbsp;(<a id="Hmsg:175" class="idref" href="#Hmsg:175"><span class="id" title="binder">Hmsg</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#valid_message_prop"><span class="id" title="definition">valid_message_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#m:174"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;<a id="v:176" class="idref" href="#v:176"><span class="id" title="binder">v</span></a><br/>
&nbsp;&nbsp;(<a id="Hsender:177" class="idref" href="#Hsender:177"><span class="id" title="binder">Hsender</span></a>: <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.sender"><span class="id" title="variable">sender</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#m:174"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#v:176"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;<a id="sf:178" class="idref" href="#sf:178"><span class="id" title="binder">sf</span></a><br/>
&nbsp;&nbsp;(<a id="Hequivocating_v:179" class="idref" href="#Hequivocating_v:179"><span class="id" title="binder">Hequivocating_v</span></a>: <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#v:176"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#sf:178"><span class="id" title="variable">sf</span></a>)<br/>
&nbsp;&nbsp;<a id="l:180" class="idref" href="#l:180"><span class="id" title="binder">l</span></a> <a id="s:181" class="idref" href="#s:181"><span class="id" title="binder">s</span></a><br/>
&nbsp;&nbsp;(<a id="Hv:182" class="idref" href="#Hv:182"><span class="id" title="binder">Hv</span></a> : <a class="idref" href="VLSM.Core.Composition.html#composite_valid"><span class="id" title="definition">composite_valid</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#l:180"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:181"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#m:174"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#can_emit"><span class="id" title="definition">can_emit</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.Equivocation.FixedSetEquivocation.html#equivocators_composition_for_observed"><span class="id" title="definition">equivocators_composition_for_observed</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.IM"><span class="id" title="variable">IM</span></a> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#sf:178"><span class="id" title="variable">sf</span></a>) <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:181"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#m:174"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#emitted_messages_are_valid_iff"><span class="id" title="lemma">emitted_messages_are_valid_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmsg</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [(<span class="id" title="var">_v</span> &amp; [<span class="id" title="var">_im</span> <span class="id" title="var">Him</span>] &amp; <span class="id" title="var">Heqim</span>) | <span class="id" title="var">Hiom</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; [<span class="id" title="tactic">elim</span> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.no_initial_messages_in_IM"><span class="id" title="variable">no_initial_messages_in_IM</span></a> <span class="id" title="var">_v</span> <span class="id" title="var">_im</span>); <span class="id" title="tactic">assumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSMProjections.html#VLSM_incl_can_emit"><span class="id" title="lemma">VLSM_incl_can_emit</span></a> (<a class="idref" href="VLSM.Core.VLSMProjections.html#vlsm_incl_pre_loaded_with_all_messages_vlsm"><span class="id" title="lemma">vlsm_incl_pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.IM"><span class="id" title="variable">IM</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">Hiom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Composition.html#can_emit_composite_project"><span class="id" title="lemma">can_emit_composite_project</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hiom</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_v</span> <span class="id" title="var">Hiom</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.Hsender_safety"><span class="id" title="variable">Hsender_safety</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hsender</span> <span class="id" title="var">_</span> <span class="id" title="var">Hiom</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Heq_v</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq_v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">_v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="VLSM.Core.MessageDependencies.html#message_dependencies_are_sufficient"><span class="id" title="method">message_dependencies_are_sufficient</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hiom</span>; [|<span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="VLSM.Core.Equivocation.FixedSetEquivocation.html#pre_loaded_free_equivocating_vlsm_composition"><span class="id" title="definition">pre_loaded_free_equivocating_vlsm_composition</span></a>, <a class="idref" href="VLSM.Core.Equivocation.FixedSetEquivocation.html#free_equivocating_vlsm_composition"><span class="id" title="definition">free_equivocating_vlsm_composition</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="VLSM.Core.Composition.html#lift_to_composite_generalized_preloaded_vlsm_full_projection"><span class="id" title="lemma">lift_to_composite_generalized_preloaded_vlsm_full_projection</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.message"><span class="id" title="variable">message</span></a> (<a class="idref" href="VLSM.Core.SubProjectionTraces.html#sub_index"><span class="id" title="definition">sub_index</span></a> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <span class="id" title="var">sf</span>)) <span class="id" title="var">_</span> (<a class="idref" href="VLSM.Core.SubProjectionTraces.html#sub_IM"><span class="id" title="definition">sub_IM</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.IM"><span class="id" title="variable">IM</span></a> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <span class="id" title="var">sf</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="msg:184" class="idref" href="#msg:184"><span class="id" title="binder">msg</span></a> : <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.message"><span class="id" title="variable">message</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#msg:183"><span class="id" title="variable">msg</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.message_dependencies"><span class="id" title="variable">message_dependencies</span></a> <span class="id" title="var">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.Equivocation.html#composite_has_been_observed"><span class="id" title="definition">composite_has_been_observed</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">s</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Hproj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">Hproj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">dm</span> <span class="id" title="var">Hdm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i</span>, <span class="id" title="var">li</span>). <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.Hfull"><span class="id" title="variable">Hfull</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hv</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hdm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">Hproj</span> (@<span class="id" title="definition">dexist</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <a id="v:186" class="idref" href="#v:186"><span class="id" title="binder">v</span></a> =&gt; <a class="idref" href="VLSM.Core.SubProjectionTraces.html#sub_index_prop_dec"><span class="id" title="instance">sub_index_prop_dec</span></a> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <span class="id" title="var">sf</span>) <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#v:185"><span class="id" title="variable">v</span></a>) <span class="id" title="var">v</span> <span class="id" title="var">Hequivocating_v</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSMProjections.html#VLSM_full_projection_can_emit"><span class="id" title="definition">VLSM_full_projection_can_emit</span></a> <span class="id" title="var">Hproj</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab121"></a><h3 class="section">Main result of the section</h3>


<div class="paragraph"> </div>

Any Free valid trace with the
<span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#strong_trace_witnessing_equivocation_prop"><span class="id" title="definition">strong_trace_witnessing_equivocation_prop</span></a></span>erty is also valid w.r.t. the
composition using the <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#equivocating_validators_fixed_equivocation_constraint"><span class="id" title="definition">equivocating_validators_fixed_equivocation_constraint</span></a></span>
induced by its final state.

<div class="paragraph"> </div>

The proof proceeds by induction on the valid trace property.
Lemmas <span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#equivocating_validators_witness_monotonicity"><span class="id" title="lemma">equivocating_validators_witness_monotonicity</span></a></span> and
<span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.FixedSetEquivocation.html#fixed_equivocation_vlsm_composition_index_incl"><span class="id" title="lemma">fixed_equivocation_vlsm_composition_index_incl</span></a></span> are used to restate the
induction hypothesis in terms of the final state after the last transition.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="strong_witness_has_fixed_equivocation" class="idref" href="#strong_witness_has_fixed_equivocation"><span class="id" title="lemma">strong_witness_has_fixed_equivocation</span></a> <a id="is:187" class="idref" href="#is:187"><span class="id" title="binder">is</span></a> <a id="s:188" class="idref" href="#s:188"><span class="id" title="binder">s</span></a> <a id="tr:189" class="idref" href="#tr:189"><span class="id" title="binder">tr</span></a><br/>
&nbsp;&nbsp;(<a id="Htr:190" class="idref" href="#Htr:190"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> (<a class="idref" href="VLSM.Core.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.IM"><span class="id" title="variable">IM</span></a>) <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is:187"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:188"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:189"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;(<a id="Heqv:191" class="idref" href="#Heqv:191"><span class="id" title="binder">Heqv</span></a>: <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#strong_trace_witnessing_equivocation_prop"><span class="id" title="definition">strong_trace_witnessing_equivocation_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.sender"><span class="id" title="variable">sender</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is:187"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:189"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to"><span class="id" title="definition">finite_valid_trace_init_to</span></a> (<a class="idref" href="VLSM.Core.Equivocation.FixedSetEquivocation.html#fixed_equivocation_vlsm_composition"><span class="id" title="definition">fixed_equivocation_vlsm_composition</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.IM"><span class="id" title="variable">IM</span></a> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:188"><span class="id" title="variable">s</span></a>)) <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#is:187"><span class="id" title="variable">is</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:188"><span class="id" title="variable">s</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#tr:189"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [|<span class="id" title="tactic">apply</span> <span class="id" title="var">Htr</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">using</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_init_to_rev_ind"><span class="id" title="lemma">finite_valid_trace_init_to_rev_ind</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> (<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_empty"><span class="id" title="constructor">finite_valid_trace_from_to_empty</span></a> (<a class="idref" href="VLSM.Core.Equivocation.FixedSetEquivocation.html#fixed_equivocation_vlsm_composition"><span class="id" title="definition">fixed_equivocation_vlsm_composition</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.IM"><span class="id" title="variable">IM</span></a> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <span class="id" title="var">si</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#initial_state_is_valid"><span class="id" title="lemma">initial_state_is_valid</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">spec</span> <span class="id" title="var">IHHtr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">prefix</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">Heqv</span> <span class="id" title="var">prefix</span> (<span class="id" title="var">suffix</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[{|</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l"><span class="id" title="projection">l</span></a> := <span class="id" title="var">l</span>; <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a> := <span class="id" title="var">iom</span>; <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> := <span class="id" title="var">sf</span>; <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> := <span class="id" title="var">oom</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">|}]</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSMProjections.html#VLSM_incl_finite_valid_trace_init_to"><span class="id" title="lemma">VLSM_incl_finite_valid_trace_init_to</span></a> (<a class="idref" href="VLSM.Core.VLSMProjections.html#vlsm_incl_pre_loaded_with_all_messages_vlsm"><span class="id" title="lemma">vlsm_incl_pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.Free"><span class="id" title="variable">Free</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hpre_tr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#equivocating_validators_witness_monotonicity"><span class="id" title="lemma">equivocating_validators_witness_monotonicity</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.sender"><span class="id" title="variable">sender</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hpre_tr</span> {| <a class="idref" href="VLSM.Core.VLSM.html#l"><span class="id" title="projection">l</span></a> := <span class="id" title="var">l</span>; <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a> := <span class="id" title="var">iom</span>; <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> := <span class="id" title="var">sf</span>; <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> := <span class="id" title="var">oom</span> |})<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Hincl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hincl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">Hincl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">specialize</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Heqv</span> (<span class="id" title="var">tr</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[{|</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l"><span class="id" title="projection">l</span></a> := <span class="id" title="var">l</span>; <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a> := <span class="id" title="var">iom</span>; <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> := <span class="id" title="var">sf</span>; <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> := <span class="id" title="var">oom</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">|}]</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Heqv</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Htr_sf</span> : <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.Equivocation.FixedSetEquivocation.html#fixed_equivocation_vlsm_composition"><span class="id" title="definition">fixed_equivocation_vlsm_composition</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.IM"><span class="id" title="variable">IM</span></a> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <span class="id" title="var">sf</span>)) <span class="id" title="var">si</span> <span class="id" title="var">s</span> <span class="id" title="var">tr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">revert</span> <span class="id" title="var">IHHtr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSMProjections.html#VLSM_incl_finite_valid_trace_from_to"><span class="id" title="lemma">VLSM_incl_finite_valid_trace_from_to</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Equivocation.FixedSetEquivocation.html#fixed_equivocation_vlsm_composition_index_incl"><span class="id" title="lemma">fixed_equivocation_vlsm_composition_index_incl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">IHHtr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSM.html#extend_right_finite_trace_from_to"><span class="id" title="lemma">extend_right_finite_trace_from_to</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Htr_sf</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hs</span> [<span class="id" title="var">Hiom</span> [<span class="id" title="var">Hv</span> <span class="id" title="var">_</span>]]] <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_last_pstate"><span class="id" title="lemma">finite_valid_trace_from_to_last_pstate</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr_sf</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hs'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Heqv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">tr</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[{|</span></a> <a class="idref" href="VLSM.Core.VLSM.html#l"><span class="id" title="projection">l</span></a> := <span class="id" title="var">l</span>; <a class="idref" href="VLSM.Core.VLSM.html#input"><span class="id" title="projection">input</span></a> := <span class="id" title="var">iom</span>; <a class="idref" href="VLSM.Core.VLSM.html#destination"><span class="id" title="projection">destination</span></a> := <span class="id" title="var">sf</span>; <a class="idref" href="VLSM.Core.VLSM.html#output"><span class="id" title="projection">output</span></a> := <span class="id" title="var">oom</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">|}]</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">Heqv</span>; [<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">iom</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">im</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2:{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; [<span class="id" title="tactic">assumption</span>| <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_None"><span class="id" title="lemma">option_valid_message_None</span></a> | <span class="id" title="tactic">assumption</span>..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.Free_has_sender"><span class="id" title="variable">Free_has_sender</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hiom</span> <span class="id" title="keyword">as</span> <span class="id" title="var">_Hsender</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.sender"><span class="id" title="variable">sender</span></a> <span class="id" title="var">im</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">v</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hsender</span>; [|<span class="id" title="tactic">congruence</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">_Hsender</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">Heqv</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_trace_last_is_last"><span class="id" title="lemma">finite_trace_last_is_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hpre_s</span> : <a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> (<a class="idref" href="VLSM.Core.VLSM.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.Free"><span class="id" title="variable">Free</span></a>) <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#proj1"><span class="id" title="lemma">proj1</span></a>, <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_last_pstate"><span class="id" title="lemma">finite_valid_trace_from_to_last_pstate</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpre_tr</span>. <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (@<span class="id" title="definition">decide</span> <span class="id" title="var">_</span> (<a class="idref" href="VLSM.Core.Equivocation.html#composite_has_been_observed_dec"><span class="id" title="lemma">composite_has_been_observed_dec</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">s</span> <span class="id" title="var">im</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; [<span class="id" title="tactic">assumption</span>| <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#option_valid_message_Some"><span class="id" title="lemma">option_valid_message_Some</span></a> | <span class="id" title="tactic">assumption</span>| | <span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.Equivocation.html#composite_observed_valid"><span class="id" title="lemma">composite_observed_valid</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">_</span> <span class="id" title="var">s</span>); <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hequivocating_v</span> : <span class="id" title="var">v</span> <span class="id" title="notation">∈</span> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.equivocating_validators"><span class="id" title="variable">equivocating_validators</span></a> <span class="id" title="var">sf</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">Heqv</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">im</span>. <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">assumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span> <span class="id" title="var">tr</span>, <span class="id" title="var">_</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">reflexivity</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">reflexivity</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Him_output</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">elim</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Equivocation.html#composite_has_been_observed_sent_received_iff"><span class="id" title="lemma">composite_has_been_observed_sent_received_iff</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.Equivocation.html#proper_sent"><span class="id" title="method">proper_sent</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.Free"><span class="id" title="variable">Free</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hpre_s</span> <span class="id" title="var">im</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hsent_s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#proj2"><span class="id" title="lemma">proj2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsent_s</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hsent_s</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Hsent_s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.Equivocation.html#has_been_sent_consistency"><span class="id" title="lemma">has_been_sent_consistency</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.Free"><span class="id" title="variable">Free</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hpre_s</span> <span class="id" title="var">im</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">si</span>, <span class="id" title="var">tr</span>, <span class="id" title="var">Hpre_tr</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#equivocators_can_emit_free"><span class="id" title="lemma">equivocators_can_emit_free</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hiom</span> <span class="id" title="var">_</span> <span class="id" title="var">Hsender</span> <span class="id" title="var">_</span> <span class="id" title="var">Hequivocating_v</span>  <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hv</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hemit_im</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; [<span class="id" title="tactic">assumption</span>|  | <span class="id" title="tactic">assumption</span>| <span class="id" title="tactic">right</span>; <span class="id" title="tactic">assumption</span> | <span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#emitted_messages_are_valid"><span class="id" title="lemma">emitted_messages_are_valid</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.Equivocation.FixedSetEquivocation.html#EquivPreloadedBase_Fixed_weak_full_projection"><span class="id" title="lemma">EquivPreloadedBase_Fixed_weak_full_projection</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hs'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hproj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">Hproj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.no_initial_messages_in_IM"><span class="id" title="variable">no_initial_messages_in_IM</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSMProjections.html#VLSM_weak_full_projection_can_emit"><span class="id" title="lemma">VLSM_weak_full_projection_can_emit</span></a> <span class="id" title="var">Hproj</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="VLSM.Core.VLSMProjections.html#VLSM_incl_can_emit"><span class="id" title="lemma">VLSM_incl_can_emit</span></a> (<a class="idref" href="VLSM.Core.Equivocation.FixedSetEquivocation.html#Equivocators_Fixed_Strong_incl"><span class="id" title="lemma">Equivocators_Fixed_Strong_incl</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">_</span>  <span class="id" title="var">_</span> <span class="id" title="var">Hs'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
As a corollary of the above, every valid state for the free composition is
also a valid state for the composition with the
<span class="inlinecode"><a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#equivocating_validators_fixed_equivocation_constraint"><span class="id" title="definition">equivocating_validators_fixed_equivocation_constraint</span></a></span> induced by it.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="equivocating_validators_fixed_equivocation_characterization" class="idref" href="#equivocating_validators_fixed_equivocation_characterization"><span class="id" title="lemma">equivocating_validators_fixed_equivocation_characterization</span></a><br/>
&nbsp;&nbsp;: <span class="id" title="notation">forall</span> <a id="s:192" class="idref" href="#s:192"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.Free"><span class="id" title="variable">Free</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:192"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VLSM.Core.VLSM.html#valid_state_prop"><span class="id" title="definition">valid_state_prop</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.IM"><span class="id" title="variable">IM</span></a> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#equivocating_validators_fixed_equivocation_constraint"><span class="id" title="definition">equivocating_validators_fixed_equivocation_constraint</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:192"><span class="id" title="variable">s</span></a>)) <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#s:192"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#free_has_strong_trace_witnessing_equivocation_prop"><span class="id" title="lemma">free_has_strong_trace_witnessing_equivocation_prop</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.2/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.sender"><span class="id" title="variable">sender</span></a> <span class="id" title="var">_</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [<span class="id" title="keyword">is</span> [<span class="id" title="var">tr</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Heqv</span>]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to"><span class="id" title="inductive">finite_valid_trace_from_to</span></a> (<a class="idref" href="VLSM.Core.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set.IM"><span class="id" title="variable">IM</span></a> (<a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#equivocating_validators_fixed_equivocation_constraint"><span class="id" title="definition">equivocating_validators_fixed_equivocation_constraint</span></a> <span class="id" title="var">s</span>)) <span class="id" title="keyword">is</span> <span class="id" title="var">s</span> <span class="id" title="var">tr</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intro</span> <span class="id" title="var">Htr'</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.VLSM.html#finite_valid_trace_from_to_last_pstate"><span class="id" title="lemma">finite_valid_trace_from_to_last_pstate</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#strong_witness_has_fixed_equivocation"><span class="id" title="lemma">strong_witness_has_fixed_equivocation</span></a>; <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="VLSM.Core.Equivocation.WitnessedEquivocation.html#witnessed_equivocation_fixed_set"><span class="id" title="section">witnessed_equivocation_fixed_set</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr">coqdoc</a> and improved with <a href="https://github.com/palmskog/coqdocjs">CoqdocJS</a> as adapted for <a href="https://github.com/coq-community">coq-community</a>
</div>
</div>
</body>

</html>
