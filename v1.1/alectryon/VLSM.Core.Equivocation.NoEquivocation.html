<!DOCTYPE html>
<html class="alectryon-standalone"><head><title>NoEquivocation.v</title><meta charset="utf-8"><meta content="Alectryon" name="generator"><meta name="viewport" content="width=device-width, initial-scale=1"><link href="alectryon.css" rel="stylesheet"><link href="pygments.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" /><script src="alectryon.js"></script></head><body><article class="alectryon-root alectryon-windowed alectryon-coqdoc"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.13.0+0.13.0. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> stdpp <span class="kn">Require Import</span> prelude.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> Coq <span class="kn">Require Import</span> FunctionalExtensionality FinFun.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> VLSM <span class="kn">Require Import</span> Lib.Preamble Lib.ListExtras Lib.StreamExtras.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> VLSM <span class="kn">Require Import</span> Core.VLSM Core.VLSMProjections Core.Composition Core.Equivocation.</span></span></pre><div class="doc">
<a id="lab1"></a><h1 class="section">VLSM No Equivocation Composition Constraints</h1>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">no_equivocations</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  (<span class="nv">vlsm</span> : VLSM message)
  .</span></span></pre><div class="doc">
An equivocating transition can be prevented by checking that the message
      to be received <span class="inlinecode"><span class="id" title="var">has_been_sent</span></span> previously in the state about to receive it.

<div class="paragraph"> </div>

      However, since we might allow certain other messages, such as initial
      messages, we give a slightly more general definition, that of
      <span class="inlinecode"><span class="id" title="var">no_equivocation_except_from</span></span> those specified by a given predicate.
  
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">no_equivocations_except_from</span>
      `{HasBeenSentCapability message vlsm}
      (exception : message -&gt; <span class="kt">Prop</span>)
      (l : vlabel vlsm)
      (som : state * option message)
      :=
      <span class="kr">let</span> (<span class="nv">s</span>, om) := som <span class="kr">in</span>
      from_option (<span class="kr">fun</span> <span class="nv">m</span> =&gt; has_been_sent vlsm s m \/ exception m) <span class="kt">True</span> om.</span></span></pre><div class="doc">
The <span class="inlinecode"><span class="id" title="var">no_equivocations</span></span> constraint does not allow any exceptions
    (messages being received must have been previously sent).
    
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">no_equivocations</span>
      `{HasBeenSentCapability message vlsm}
      (l : vlabel vlsm)
      (som : state * option message)
      : <span class="kt">Prop</span>
      :=
      no_equivocations_except_from (<span class="kr">fun</span> <span class="nv">m</span> =&gt; <span class="kt">False</span>) l som.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">no_equivocations</span>.</span></span></pre><div class="doc">
<a id="lab2"></a><h2 class="section">No-Equivocation Invariants</h2>
<div class="paragraph"> </div>

In this section we show that under <span class="inlinecode"><span class="id" title="var">no_equivocations</span></span> assumptions:

<div class="paragraph"> </div>
<ul class="doclist">
<li> for any valid state all messages <span class="inlinecode"><span class="id" title="var">observed_were_sent</span></span>.

</li>
<li> the <span class="inlinecode"><span class="id" title="var">pre_loaded_with_all_messages_vlsm</span></span> is equal to the <span class="inlinecode"><span class="id" title="var">no_equivocations</span></span> VLSM.

</li>
</ul>
<div class="paragraph"> </div>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">NoEquivocationInvariants</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
    <span class="nv">message</span>
    (<span class="nv">X</span>: VLSM message)
    `{HasBeenSentCapability message X}
    `{HasBeenObservedCapability message X}
    (Henforced: <span class="kr">forall</span> <span class="nv">l</span> <span class="nv">s</span> <span class="nv">om</span>, input_valid (pre_loaded_with_all_messages_vlsm X) l (s,om) -&gt; no_equivocations X l (s,om))
  .</span></span></pre><div class="doc">
A VLSM that enforces the <span class="inlinecode"><span class="id" title="var">no_equivocations</span></span> constraint and also supports
<span class="inlinecode"><span class="id" title="var">has_been_observed</span></span> obeys the <span class="inlinecode"><span class="id" title="var">observed_were_sent</span></span> invariant which states that
any message that tests as <span class="inlinecode"><span class="id" title="var">has_been_observed</span></span> in a state also tests as
<span class="inlinecode"><span class="id" title="var">has_been_sent</span></span> in the same state.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">observed_were_sent</span> (<span class="nv">s</span>: state) : <span class="kt">Prop</span> :=
    <span class="kr">forall</span> <span class="nv">msg</span>, has_been_observed X s msg -&gt; has_been_sent X s msg.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk0"><span class="kn">Lemma</span> <span class="nf">observed_were_sent_initial</span> <span class="nv">s</span>:
    vinitial_state_prop X s -&gt;
    observed_were_sent s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop X s ‚Üí observed_were_sent s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop X s ‚Üí observed_were_sent s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk2"><span class="nb">intros</span> Hinitial msg Hsend.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hinitial</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop X s</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hsend</var><span class="hyp-type"><b>: </b><span>has_been_observed X s msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent X s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk3"><span class="bp">contradict</span> Hsend.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hinitial</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop X s</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">¬¨ has_been_observed X s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk4"><span class="nb">apply</span> has_been_observed_no_inits.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hinitial</var><span class="hyp-type"><b>: </b><span>vinitial_state_prop X s</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">initial_state_prop s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk5"><span class="kn">Lemma</span> <span class="nf">observed_were_sent_preserved</span> <span class="nv">l</span> <span class="nv">s</span> <span class="nv">im</span> <span class="nv">s&#39;</span> <span class="nv">om</span>:
    input_valid_transition X l (s,im) (s&#39;,om) -&gt;
    observed_were_sent s -&gt;
    observed_were_sent s&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition X l (s, im) (s&#39;, om)
‚Üí observed_were_sent s ‚Üí observed_were_sent s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition X l (s, im) (s&#39;, om)
‚Üí observed_were_sent s ‚Üí observed_were_sent s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk7"><span class="nb">intros</span> Hptrans Hprev msg Hobs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hptrans</var><span class="hyp-type"><b>: </b><span>input_valid_transition X l (s, im) (s&#39;, om)</span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>observed_were_sent s</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>has_been_observed X s&#39; msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent X s&#39; msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk8"><span class="nb">specialize</span> (Hprev msg).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hptrans</var><span class="hyp-type"><b>: </b><span>input_valid_transition X l (s, im) (s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>has_been_observed X s msg
‚Üí has_been_sent X s msg</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>has_been_observed X s&#39; msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent X s&#39; msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk9"><span class="nb">apply</span> preloaded_weaken_input_valid_transition <span class="kr">in</span> Hptrans.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hptrans</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm X) l
  (s, im) (s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>has_been_observed X s msg
‚Üí has_been_sent X s msg</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>has_been_observed X s&#39; msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent X s&#39; msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chka"><span class="nb">eapply</span> (oracle_step_update (has_been_observed_stepwise_props X) _ _ _ _ _ Hptrans) <span class="kr">in</span> Hobs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hptrans</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm X) l
  (s, im) (s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>has_been_observed X s msg
‚Üí has_been_sent X s msg</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>item_sends_or_receives msg
  {|
    l := l;
    input := im;
    destination := s&#39;;
    output := om
  |} ‚à® has_been_observed X s msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent X s&#39; msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chkb"><span class="nb">simpl</span> <span class="kr">in</span> Hobs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hptrans</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm X) l
  (s, im) (s&#39;, om)</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>has_been_observed X s msg
‚Üí has_been_sent X s msg</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>(im = Some msg ‚à® om = Some msg)
‚à® has_been_observed X s msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent X s&#39; msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chkc"><span class="nb">specialize</span> (Henforced l s (Some msg)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span>input_valid
  (pre_loaded_with_all_messages_vlsm X) l
  (s, Some msg)
‚Üí no_equivocations X l (s, Some msg)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hptrans</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm X) l
  (s, im) (s&#39;, om)</span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>has_been_observed X s msg
‚Üí has_been_sent X s msg</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>(im = Some msg ‚à® om = Some msg)
‚à® has_been_observed X s msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent X s&#39; msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chkd"><span class="nb">rewrite</span> (oracle_step_update (has_been_sent_stepwise_from_trace X) _ _ _ _ _ Hptrans).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span>input_valid
  (pre_loaded_with_all_messages_vlsm X) l
  (s, Some msg)
‚Üí no_equivocations X l (s, Some msg)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hptrans</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm X) l
  (s, im) (s&#39;, om)</span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>has_been_observed X s msg
‚Üí has_been_sent X s msg</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>(im = Some msg ‚à® om = Some msg)
‚à® has_been_observed X s msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">field_selector output msg
  {|
    l := l;
    input := im;
    destination := s&#39;;
    output := om
  |} ‚à® has_been_sent X s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chke"><span class="nb">destruct</span> Hptrans <span class="kr">as</span> [Hv _].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span>input_valid
  (pre_loaded_with_all_messages_vlsm X) l
  (s, Some msg)
‚Üí no_equivocations X l (s, Some msg)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid (pre_loaded_with_all_messages_vlsm X)
  l (s, im)</span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>has_been_observed X s msg
‚Üí has_been_sent X s msg</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>(im = Some msg ‚à® om = Some msg)
‚à® has_been_observed X s msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">field_selector output msg
  {|
    l := l;
    input := im;
    destination := s&#39;;
    output := om
  |} ‚à® has_been_sent X s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chkf"><span class="nb">destruct</span> Hobs <span class="kr">as</span> [[Hin|Hout]|Hobs]; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span>input_valid
  (pre_loaded_with_all_messages_vlsm X) l
  (s, Some msg)
‚Üí no_equivocations X l (s, Some msg)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid (pre_loaded_with_all_messages_vlsm X)
  l (s, Some msg)</span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>has_been_observed X s msg
‚Üí has_been_sent X s msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">field_selector output msg
  {|
    l := l;
    input := Some msg;
    destination := s&#39;;
    output := om
  |} ‚à® has_been_sent X s msg</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="NoEquivocation-v-chk10" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span>input_valid
  (pre_loaded_with_all_messages_vlsm X) l
  (s, Some msg)
‚Üí no_equivocations X l (s, Some msg)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid (pre_loaded_with_all_messages_vlsm X)
  l (s, im)</span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>has_been_observed X s msg
‚Üí has_been_sent X s msg</span></span></span><br></div><label class="goal-separator" for="NoEquivocation-v-chk10"><hr></label><div class="goal-conclusion">field_selector output msg
  {|
    l := l;
    input := im;
    destination := s&#39;;
    output := Some msg
  |} ‚à® has_been_sent X s msg</div></blockquote><input class="alectryon-extra-goal-toggle" id="NoEquivocation-v-chk11" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span>input_valid
  (pre_loaded_with_all_messages_vlsm X) l
  (s, Some msg)
‚Üí no_equivocations X l (s, Some msg)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid (pre_loaded_with_all_messages_vlsm X)
  l (s, im)</span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>has_been_observed X s msg
‚Üí has_been_sent X s msg</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>has_been_observed X s msg</span></span></span><br></div><label class="goal-separator" for="NoEquivocation-v-chk11"><hr></label><div class="goal-conclusion">field_selector output msg
  {|
    l := l;
    input := im;
    destination := s&#39;;
    output := om
  |} ‚à® has_been_sent X s msg</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk12">- <span class="c">(* by [no_equivocations], the incoming message [im] was previously sent *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span>input_valid
  (pre_loaded_with_all_messages_vlsm X) l
  (s, Some msg)
‚Üí no_equivocations X l (s, Some msg)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid (pre_loaded_with_all_messages_vlsm X)
  l (s, Some msg)</span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>has_been_observed X s msg
‚Üí has_been_sent X s msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">field_selector output msg
  {|
    l := l;
    input := Some msg;
    destination := s&#39;;
    output := om
  |} ‚à® has_been_sent X s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk13"><span class="nb">specialize</span> (Henforced Hv).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span>no_equivocations X l (s, Some msg)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid (pre_loaded_with_all_messages_vlsm X)
  l (s, Some msg)</span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>has_been_observed X s msg
‚Üí has_been_sent X s msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">field_selector output msg
  {|
    l := l;
    input := Some msg;
    destination := s&#39;;
    output := om
  |} ‚à® has_been_sent X s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk14"><span class="nb">destruct</span> Henforced; [|<span class="bp">contradiction</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span>no_equivocations X l (s, Some msg)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid (pre_loaded_with_all_messages_vlsm X)
  l (s, Some msg)</span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>has_been_observed X s msg
‚Üí has_been_sent X s msg</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>has_been_sent X s msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">field_selector output msg
  {|
    l := l;
    input := Some msg;
    destination := s&#39;;
    output := om
  |} ‚à® has_been_sent X s msg</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk15"><span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span>no_equivocations X l (s, Some msg)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid (pre_loaded_with_all_messages_vlsm X)
  l (s, Some msg)</span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>has_been_observed X s msg
‚Üí has_been_sent X s msg</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>has_been_sent X s msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent X s msg</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk16">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span>input_valid
  (pre_loaded_with_all_messages_vlsm X) l
  (s, Some msg)
‚Üí no_equivocations X l (s, Some msg)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid (pre_loaded_with_all_messages_vlsm X)
  l (s, im)</span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>has_been_observed X s msg
‚Üí has_been_sent X s msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">field_selector output msg
  {|
    l := l;
    input := im;
    destination := s&#39;;
    output := Some msg
  |} ‚à® has_been_sent X s msg</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk17"><span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span>input_valid
  (pre_loaded_with_all_messages_vlsm X) l
  (s, Some msg)
‚Üí no_equivocations X l (s, Some msg)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid (pre_loaded_with_all_messages_vlsm X)
  l (s, im)</span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>has_been_observed X s msg
‚Üí has_been_sent X s msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">field_selector output msg
  {|
    l := l;
    input := im;
    destination := s&#39;;
    output := Some msg
  |}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk18">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span>input_valid
  (pre_loaded_with_all_messages_vlsm X) l
  (s, Some msg)
‚Üí no_equivocations X l (s, Some msg)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid (pre_loaded_with_all_messages_vlsm X)
  l (s, im)</span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>has_been_observed X s msg
‚Üí has_been_sent X s msg</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>has_been_observed X s msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">field_selector output msg
  {|
    l := l;
    input := im;
    destination := s&#39;;
    output := om
  |} ‚à® has_been_sent X s msg</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk19"><span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span>input_valid
  (pre_loaded_with_all_messages_vlsm X) l
  (s, Some msg)
‚Üí no_equivocations X l (s, Some msg)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid (pre_loaded_with_all_messages_vlsm X)
  l (s, im)</span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>has_been_observed X s msg
‚Üí has_been_sent X s msg</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>has_been_observed X s msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent X s msg</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk1a"><span class="nb">apply</span> Hprev.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>msg</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span>input_valid
  (pre_loaded_with_all_messages_vlsm X) l
  (s, Some msg)
‚Üí no_equivocations X l (s, Some msg)</span></span></span><br><span><var>im</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid (pre_loaded_with_all_messages_vlsm X)
  l (s, im)</span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>has_been_observed X s msg
‚Üí has_been_sent X s msg</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>has_been_observed X s msg</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_observed X s msg</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="c">(* TODO(wkolowski): make notation uniform accross the file. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk1b"><span class="kn">Lemma</span> <span class="nf">observed_were_sent_invariant</span> <span class="nv">s</span>:
    valid_state_prop X s -&gt;
    observed_were_sent s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X s ‚Üí observed_were_sent s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk1c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X s ‚Üí observed_were_sent s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk1d"><span class="nb">intro</span> Hproto.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hproto</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">observed_were_sent s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk1e"><span class="nb">induction</span> Hproto <span class="nb">using</span> valid_state_prop_ind.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">observed_were_sent s</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="NoEquivocation-v-chk1f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition X l (s, om) (s&#39;, om&#39;)</span></span></span><br><span><var>IHHproto</var><span class="hyp-type"><b>: </b><span>observed_were_sent s</span></span></span><br></div><label class="goal-separator" for="NoEquivocation-v-chk1f"><hr></label><div class="goal-conclusion">observed_were_sent s&#39;</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk20">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">observed_were_sent s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk21"><span class="nb">apply</span> observed_were_sent_initial.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>initial_state_prop s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vinitial_state_prop X s</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk22">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Ht</var><span class="hyp-type"><b>: </b><span>input_valid_transition X l (s, om) (s&#39;, om&#39;)</span></span></span><br><span><var>IHHproto</var><span class="hyp-type"><b>: </b><span>observed_were_sent s</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">observed_were_sent s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk23"><span class="nb">revert</span> Ht IHHproto.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>s'</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>om, om'</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition X l (s, om) (s&#39;, om&#39;)
‚Üí observed_were_sent s ‚Üí observed_were_sent s&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> observed_were_sent_preserved.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
  If the <span class="inlinecode"><span class="id" title="var">valid</span></span>itiy function satisfies the <span class="inlinecode"><span class="id" title="var">no_equivocations</span></span> constraint then
  it doesn't matter if we preload the composition with some initial messages,
  since all messages must be sent before being received, which means that
  one cannot use the new messages to create additional traces.
  
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk24"><span class="kn">Lemma</span> <span class="nf">no_equivocations_preloaded_traces</span>
    (<span class="nv">is</span> : state)
    (<span class="nv">tr</span> : list transition_item)
    : finite_valid_trace (pre_loaded_with_all_messages_vlsm X) <span class="kr">is</span> tr -&gt; finite_valid_trace X <span class="kr">is</span> tr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace
  (pre_loaded_with_all_messages_vlsm X) <span class="kr">is</span> tr
‚Üí finite_valid_trace X <span class="kr">is</span> tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk25"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace
  (pre_loaded_with_all_messages_vlsm X) <span class="kr">is</span> tr
‚Üí finite_valid_trace X <span class="kr">is</span> tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk26"><span class="nb">intro</span> Htr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>is</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (pre_loaded_with_all_messages_vlsm X) <span class="kr">is</span> tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace X <span class="kr">is</span> tr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk27" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk27"><span class="nb">induction</span> Htr <span class="nb">using</span> finite_valid_trace_rev_ind.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>initial_state_prop si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace X si []</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="NoEquivocation-v-chk28" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (pre_loaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, iom) 
  (sf, oom)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace X si tr</span></span></span><br></div><label class="goal-separator" for="NoEquivocation-v-chk28"><hr></label><div class="goal-conclusion">finite_valid_trace X si (tr ++ [x])</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk29" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk29">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>initial_state_prop si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace X si []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk2a"><span class="nb">split</span>;[|<span class="bp">assumption</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>initial_state_prop si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from X si []</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk2b">rapply @finite_valid_trace_from_empty.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>initial_state_prop si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X si</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk2c"><span class="nb">apply</span> initial_state_is_valid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>initial_state_prop si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">initial_state_prop si</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk2d" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk2d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (pre_loaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, iom) 
  (sf, oom)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>IHHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace X si tr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace X si (tr ++ [x])</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk2e" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk2e"><span class="nb">destruct</span> IHHtr <span class="kr">as</span> [IHtr His].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (pre_loaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, iom) 
  (sf, oom)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X si tr</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>initial_state_prop si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace X si (tr ++ [x])</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk2f"><span class="nb">split</span>; [|<span class="bp">assumption</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (pre_loaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, iom) 
  (sf, oom)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X si tr</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>initial_state_prop si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">finite_valid_trace_from X si (tr ++ [x])</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk30" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk30">rapply extend_right_finite_trace_from;[<span class="bp">assumption</span>|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (pre_loaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, iom) 
  (sf, oom)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X si tr</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>initial_state_prop si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition X l
  (finite_trace_last si tr, iom) (sf, oom)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk31" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk31"><span class="nb">apply</span> finite_valid_trace_last_pstate <span class="kr">in</span> IHtr <span class="kr">as</span> Hs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (pre_loaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, iom) 
  (sf, oom)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X si tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X (finite_trace_last si tr)</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>initial_state_prop si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid_transition X l
  (finite_trace_last si tr, iom) (sf, oom)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk32"><span class="nb">cut</span> (option_valid_message_prop X iom);[<span class="nb">firstorder</span>|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (pre_loaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>iom, oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, iom) 
  (sf, oom)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := iom;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X si tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X (finite_trace_last si tr)</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>initial_state_prop si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X iom</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk33"><span class="nb">destruct</span> iom <span class="kr">as</span> [m|];[|<span class="nb">apply</span> option_valid_message_None].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (pre_loaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>input_valid_transition
  (pre_loaded_with_all_messages_vlsm X) l
  (finite_trace_last si tr, Some m) 
  (sf, oom)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := Some m;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X si tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X (finite_trace_last si tr)</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>initial_state_prop si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk34" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk34"><span class="nb">destruct</span> Hx <span class="kr">as</span> [Hv _].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (pre_loaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>input_valid (pre_loaded_with_all_messages_vlsm X)
  l (finite_trace_last si tr, Some m)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := Some m;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X si tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X (finite_trace_last si tr)</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>initial_state_prop si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk35" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk35"><span class="nb">apply</span> Henforced <span class="kr">in</span> Hv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (pre_loaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>no_equivocations X l
  (finite_trace_last si tr, Some m)</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := Some m;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X si tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X (finite_trace_last si tr)</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>initial_state_prop si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk36"><span class="nb">destruct</span> Hv <span class="kr">as</span> [Hbsm | []].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (pre_loaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>Hbsm</var><span class="hyp-type"><b>: </b><span>has_been_sent X (finite_trace_last si tr) m</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := Some m;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X si tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X (finite_trace_last si tr)</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>initial_state_prop si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">option_valid_message_prop X (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk37"><span class="nb">revert</span> Hbsm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (pre_loaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := Some m;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X si tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X (finite_trace_last si tr)</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>initial_state_prop si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent X (finite_trace_last si tr) m
‚Üí option_valid_message_prop X (Some m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk38" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk38"><span class="nb">apply</span> sent_valid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br><span><var>si</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>list transition_item</span></span></span><br><span><var>Htr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace
  (pre_loaded_with_all_messages_vlsm X) si tr</span></span></span><br><span><var>sf</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>oom</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>x</var><span><span class="hyp-body"><b>:= </b><span>{|
  l := l;
  input := Some m;
  destination := sf;
  output := oom
|}</span></span><span class="hyp-type"><b>: </b><span>transition_item</span></span></span></span><br><span><var>IHtr</var><span class="hyp-type"><b>: </b><span>finite_valid_trace_from X si tr</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X (finite_trace_last si tr)</span></span></span><br><span><var>His</var><span class="hyp-type"><b>: </b><span>initial_state_prop si</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X (finite_trace_last si tr)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk39" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk39"><span class="kn">Lemma</span> <span class="nf">preloaded_incl_no_equivocations</span>
    : VLSM_incl (pre_loaded_with_all_messages_vlsm X) X.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl (pre_loaded_with_all_messages_vlsm X) X</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk3a" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk3a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl (pre_loaded_with_all_messages_vlsm X) X</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk3b" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk3b"><span class="nb">specialize</span> no_equivocations_preloaded_traces.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÄ</span> (<span class="nv">is</span> : state) (<span class="nv">tr</span> : list transition_item),
   finite_valid_trace
     (pre_loaded_with_all_messages_vlsm X) <span class="kr">is</span> tr
   ‚Üí finite_valid_trace X <span class="kr">is</span> tr)
‚Üí VLSM_incl (pre_loaded_with_all_messages_vlsm X) X</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk3c"><span class="nb">clear</span> -X.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÄ</span> (<span class="nv">is</span> : state) (<span class="nv">tr</span> : list transition_item),
   finite_valid_trace
     (pre_loaded_with_all_messages_vlsm X) <span class="kr">is</span> tr
   ‚Üí finite_valid_trace X <span class="kr">is</span> tr)
‚Üí VLSM_incl (pre_loaded_with_all_messages_vlsm X) X</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk3d" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk3d"><span class="nb">destruct</span> X <span class="kr">as</span> [T [S M]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>state ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span>{s : state | S s}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>initial_message_prop</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>initial_message</var><span><span class="hyp-body"><b>:= </b><span>{m : message
| initial_message_prop m}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>Inhabited M</span></span></span><br><span><var>transition</var><span class="hyp-type"><b>: </b><span>label
‚Üí state * option message
  ‚Üí state * option message</span></span></span><br><span><var>valid</var><span class="hyp-type"><b>: </b><span>label ‚Üí state * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">‚àÄ</span> (<span class="nv">is</span> : state) (<span class="nv">tr</span> : list transition_item),
   finite_valid_trace
     (pre_loaded_with_all_messages_vlsm
        {|
          vtype := T;
          vmachine :=
            {|
              initial_state_prop := S;
              initial_message_prop :=
                initial_message_prop;
              s0 := s0;
              transition := transition;
              valid := valid
            |}
        |}) <span class="kr">is</span> tr
   ‚Üí finite_valid_trace
       {|
         vtype := T;
         vmachine :=
           {|
             initial_state_prop := S;
             initial_message_prop :=
               initial_message_prop;
             s0 := s0;
             transition := transition;
             valid := valid
           |}
       |} <span class="kr">is</span> tr)
‚Üí VLSM_incl
    (pre_loaded_with_all_messages_vlsm
       {|
         vtype := T;
         vmachine :=
           {|
             initial_state_prop := S;
             initial_message_prop :=
               initial_message_prop;
             s0 := s0;
             transition := transition;
             valid := valid
           |}
       |})
    {|
      vtype := T;
      vmachine :=
        {|
          initial_state_prop := S;
          initial_message_prop := initial_message_prop;
          s0 := s0;
          transition := transition;
          valid := valid
        |}
    |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> VLSM_incl_finite_traces_characterization.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk3e" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk3e"><span class="kn">Lemma</span> <span class="nf">preloaded_eq_no_equivocations</span>
    : VLSM_eq (pre_loaded_with_all_messages_vlsm X) X.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_eq (pre_loaded_with_all_messages_vlsm X) X</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk3f" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk3f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_eq (pre_loaded_with_all_messages_vlsm X) X</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk40" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk40"><span class="nb">specialize</span> preloaded_incl_no_equivocations.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl (pre_loaded_with_all_messages_vlsm X) X
‚Üí VLSM_eq (pre_loaded_with_all_messages_vlsm X) X</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk41" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk41"><span class="nb">specialize</span> (vlsm_incl_pre_loaded_with_all_messages_vlsm X).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>HasBeenSentCapability X</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>HasBeenObservedCapability X</span></span></span><br><span><var>Henforced</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) 
  (<span class="nv">om</span> : option message),
  input_valid
    (pre_loaded_with_all_messages_vlsm X)
    l (s, om)
  ‚Üí no_equivocations X l (s, om)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl X (pre_loaded_with_all_messages_vlsm X)
‚Üí VLSM_incl (pre_loaded_with_all_messages_vlsm X) X
  ‚Üí VLSM_eq (pre_loaded_with_all_messages_vlsm X) X</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk42" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk42"><span class="nb">clear</span> -X.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl X (pre_loaded_with_all_messages_vlsm X)
‚Üí VLSM_incl (pre_loaded_with_all_messages_vlsm X) X
  ‚Üí VLSM_eq (pre_loaded_with_all_messages_vlsm X) X</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk43" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk43"><span class="nb">destruct</span> X <span class="kr">as</span> [T [S M]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>state ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span>{s : state | S s}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>initial_message_prop</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>initial_message</var><span><span class="hyp-body"><b>:= </b><span>{m : message
| initial_message_prop m}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>Inhabited M</span></span></span><br><span><var>transition</var><span class="hyp-type"><b>: </b><span>label
‚Üí state * option message
  ‚Üí state * option message</span></span></span><br><span><var>valid</var><span class="hyp-type"><b>: </b><span>label ‚Üí state * option message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl
  {|
    vtype := T;
    vmachine :=
      {|
        initial_state_prop := S;
        initial_message_prop := initial_message_prop;
        s0 := s0;
        transition := transition;
        valid := valid
      |}
  |}
  (pre_loaded_with_all_messages_vlsm
     {|
       vtype := T;
       vmachine :=
         {|
           initial_state_prop := S;
           initial_message_prop :=
             initial_message_prop;
           s0 := s0;
           transition := transition;
           valid := valid
         |}
     |})
‚Üí VLSM_incl
    (pre_loaded_with_all_messages_vlsm
       {|
         vtype := T;
         vmachine :=
           {|
             initial_state_prop := S;
             initial_message_prop :=
               initial_message_prop;
             s0 := s0;
             transition := transition;
             valid := valid
           |}
       |})
    {|
      vtype := T;
      vmachine :=
        {|
          initial_state_prop := S;
          initial_message_prop := initial_message_prop;
          s0 := s0;
          transition := transition;
          valid := valid
        |}
    |}
  ‚Üí VLSM_eq
      (pre_loaded_with_all_messages_vlsm
         {|
           vtype := T;
           vmachine :=
             {|
               initial_state_prop := S;
               initial_message_prop :=
                 initial_message_prop;
               s0 := s0;
               transition := transition;
               valid := valid
             |}
         |})
      {|
        vtype := T;
        vmachine :=
          {|
            initial_state_prop := S;
            initial_message_prop :=
              initial_message_prop;
            s0 := s0;
            transition := transition;
            valid := valid
          |}
      |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk44" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk44"><span class="nb">intros</span> Hincl Hincl&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>state ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span>{s : state | S s}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>initial_message_prop</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>initial_message</var><span><span class="hyp-body"><b>:= </b><span>{m : message
| initial_message_prop m}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>Inhabited M</span></span></span><br><span><var>transition</var><span class="hyp-type"><b>: </b><span>label
‚Üí state * option message
  ‚Üí state * option message</span></span></span><br><span><var>valid</var><span class="hyp-type"><b>: </b><span>label ‚Üí state * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>VLSM_incl
  {|
    vtype := T;
    vmachine :=
      {|
        initial_state_prop := S;
        initial_message_prop :=
          initial_message_prop;
        s0 := s0;
        transition := transition;
        valid := valid
      |}
  |}
  (pre_loaded_with_all_messages_vlsm
     {|
       vtype := T;
       vmachine :=
         {|
           initial_state_prop := S;
           initial_message_prop :=
             initial_message_prop;
           s0 := s0;
           transition := transition;
           valid := valid
         |}
     |})</span></span></span><br><span><var>Hincl'</var><span class="hyp-type"><b>: </b><span>VLSM_incl
  (pre_loaded_with_all_messages_vlsm
     {|
       vtype := T;
       vmachine :=
         {|
           initial_state_prop := S;
           initial_message_prop :=
             initial_message_prop;
           s0 := s0;
           transition := transition;
           valid := valid
         |}
     |})
  {|
    vtype := T;
    vmachine :=
      {|
        initial_state_prop := S;
        initial_message_prop :=
          initial_message_prop;
        s0 := s0;
        transition := transition;
        valid := valid
      |}
  |}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_eq
  (pre_loaded_with_all_messages_vlsm
     {|
       vtype := T;
       vmachine :=
         {|
           initial_state_prop := S;
           initial_message_prop :=
             initial_message_prop;
           s0 := s0;
           transition := transition;
           valid := valid
         |}
     |})
  {|
    vtype := T;
    vmachine :=
      {|
        initial_state_prop := S;
        initial_message_prop := initial_message_prop;
        s0 := s0;
        transition := transition;
        valid := valid
      |}
  |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk45" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk45"><span class="nb">apply</span> VLSM_eq_incl_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>VLSMType message</span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>state ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>M</var><span><span class="hyp-body"><b>:= </b><span>{s : state | S s}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>initial_message_prop</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>initial_message</var><span><span class="hyp-body"><b>:= </b><span>{m : message
| initial_message_prop m}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>Inhabited M</span></span></span><br><span><var>transition</var><span class="hyp-type"><b>: </b><span>label
‚Üí state * option message
  ‚Üí state * option message</span></span></span><br><span><var>valid</var><span class="hyp-type"><b>: </b><span>label ‚Üí state * option message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span>VLSM_incl
  {|
    vtype := T;
    vmachine :=
      {|
        initial_state_prop := S;
        initial_message_prop :=
          initial_message_prop;
        s0 := s0;
        transition := transition;
        valid := valid
      |}
  |}
  (pre_loaded_with_all_messages_vlsm
     {|
       vtype := T;
       vmachine :=
         {|
           initial_state_prop := S;
           initial_message_prop :=
             initial_message_prop;
           s0 := s0;
           transition := transition;
           valid := valid
         |}
     |})</span></span></span><br><span><var>Hincl'</var><span class="hyp-type"><b>: </b><span>VLSM_incl
  (pre_loaded_with_all_messages_vlsm
     {|
       vtype := T;
       vmachine :=
         {|
           initial_state_prop := S;
           initial_message_prop :=
             initial_message_prop;
           s0 := s0;
           transition := transition;
           valid := valid
         |}
     |})
  {|
    vtype := T;
    vmachine :=
      {|
        initial_state_prop := S;
        initial_message_prop :=
          initial_message_prop;
        s0 := s0;
        transition := transition;
        valid := valid
      |}
  |}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl
  {|
    vtype :=
      vtype
        (pre_loaded_with_all_messages_vlsm
           {|
             vtype := T;
             vmachine :=
               {|
                 initial_state_prop := S;
                 initial_message_prop :=
                   initial_message_prop;
                 s0 := s0;
                 transition := transition;
                 valid := valid
               |}
           |});
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        {|
          vtype := T;
          vmachine :=
            {|
              initial_state_prop := S;
              initial_message_prop :=
                initial_message_prop;
              s0 := s0;
              transition := transition;
              valid := valid
            |}
        |}
  |}
  {|
    vtype :=
      vtype
        (pre_loaded_with_all_messages_vlsm
           {|
             vtype := T;
             vmachine :=
               {|
                 initial_state_prop := S;
                 initial_message_prop :=
                   initial_message_prop;
                 s0 := s0;
                 transition := transition;
                 valid := valid
               |}
           |});
    vmachine :=
      {|
        initial_state_prop := S;
        initial_message_prop := initial_message_prop;
        s0 := s0;
        transition := transition;
        valid := valid
      |}
  |}
‚àß VLSM_incl
    {|
      vtype :=
        vtype
          (pre_loaded_with_all_messages_vlsm
             {|
               vtype := T;
               vmachine :=
                 {|
                   initial_state_prop := S;
                   initial_message_prop :=
                     initial_message_prop;
                   s0 := s0;
                   transition := transition;
                   valid := valid
                 |}
             |});
      vmachine :=
        {|
          initial_state_prop := S;
          initial_message_prop := initial_message_prop;
          s0 := s0;
          transition := transition;
          valid := valid
        |}
    |}
    {|
      vtype :=
        vtype
          (pre_loaded_with_all_messages_vlsm
             {|
               vtype := T;
               vmachine :=
                 {|
                   initial_state_prop := S;
                   initial_message_prop :=
                     initial_message_prop;
                   s0 := s0;
                   transition := transition;
                   valid := valid
                 |}
             |});
      vmachine :=
        pre_loaded_with_all_messages_vlsm_machine
          {|
            vtype := T;
            vmachine :=
              {|
                initial_state_prop := S;
                initial_message_prop :=
                  initial_message_prop;
                s0 := s0;
                transition := transition;
                valid := valid
              |}
          |}
    |}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">split</span>; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">NoEquivocationInvariants</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">CompositeNoEquivocation</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  `{finite.Finite index}
  (IM : index -&gt; VLSM message)
  `{<span class="kr">forall</span> <span class="nv">i</span>, HasBeenSentCapability (IM i)}
  (constraint : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>)
  .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">sent_except_from</span> <span class="nv">exception</span> <span class="nv">es</span> <span class="nv">iom</span> : <span class="kt">Prop</span> :=
  from_option (<span class="kr">fun</span> <span class="nv">im</span> =&gt; composite_has_been_sent IM es im \/ exception im) <span class="kt">True</span> iom.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">composite_no_equivocations_except_from</span>
  (<span class="nv">exception</span> : message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">l</span> : composite_label IM)
  (<span class="nv">som</span> : composite_state IM * option message)
  :=
  sent_except_from exception som.<span class="mi">1</span> som.<span class="mi">2</span>.</span></span></pre><div class="doc">
The <span class="inlinecode"><span class="id" title="var">composite_no_equivocations</span></span> constraint requires that
messages being received must have been previously sent by a
machine in the composition.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">composite_no_equivocations</span>
  (<span class="nv">l</span> : composite_label IM)
  (<span class="nv">som</span> : composite_state IM * option message)
  : <span class="kt">Prop</span>
  :=
  composite_no_equivocations_except_from (<span class="kr">fun</span> <span class="nv">m</span> =&gt; <span class="kt">False</span>) l som.</span></span></pre><div class="doc">
<a id="lab3"></a><h2 class="section">Composite No-Equivocation Invariants</h2>
<div class="paragraph"> </div>

A VLSM composition whose constraint subsumes the <span class="inlinecode"><span class="id" title="var">no_equivocations</span></span> constraint
and also supports <span class="inlinecode"><span class="id" title="var">has_been_recevied</span></span> (or <span class="inlinecode"><span class="id" title="var">has_been_observed</span></span>) obeys an
invariant that any message that tests as <span class="inlinecode"><span class="id" title="var">has_been_received</span></span>
(resp. <span class="inlinecode"><span class="id" title="var">has_been_observed</span></span>) in a state also tests as <span class="inlinecode"><span class="id" title="var">has_been_sent</span></span>
in the same state.
 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">CompositeNoEquivocationInvariants</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
    `{<span class="kr">forall</span> <span class="nv">i</span>, HasBeenReceivedCapability (IM i)}
    (X := composite_vlsm IM constraint)
    (Hsubsumed: preloaded_constraint_subsumption IM constraint composite_no_equivocations)
    .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">composite_observed_were_sent</span> (<span class="nv">s</span>: state) : <span class="kt">Prop</span> :=
    <span class="kr">forall</span> <span class="nv">msg</span>, composite_has_been_observed IM s msg -&gt; composite_has_been_sent IM s msg.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk46" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk46"><span class="kn">Lemma</span> <span class="nf">composite_observed_were_sent_invariant</span> <span class="nv">s</span>:
    valid_state_prop X s -&gt;
    composite_observed_were_sent s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumed</var><span class="hyp-type"><b>: </b><span>preloaded_constraint_subsumption IM
  constraint composite_no_equivocations</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X s ‚Üí composite_observed_were_sent s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk47" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk47"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumed</var><span class="hyp-type"><b>: </b><span>preloaded_constraint_subsumption IM
  constraint composite_no_equivocations</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_state_prop X s ‚Üí composite_observed_were_sent s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk48" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk48"><span class="nb">intros</span> Hs m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumed</var><span class="hyp-type"><b>: </b><span>preloaded_constraint_subsumption IM
  constraint composite_no_equivocations</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_observed IM s m
‚Üí composite_has_been_sent IM s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk49" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk49"><span class="nb">rewrite</span> composite_has_been_observed_sent_received_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumed</var><span class="hyp-type"><b>: </b><span>preloaded_constraint_subsumption IM
  constraint composite_no_equivocations</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_sent IM s m
‚à® composite_has_been_received IM s m
‚Üí composite_has_been_sent IM s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk4a" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk4a"><span class="nb">intros</span> Hobs.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumed</var><span class="hyp-type"><b>: </b><span>preloaded_constraint_subsumption IM
  constraint composite_no_equivocations</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>composite_has_been_sent IM s m
‚à® composite_has_been_received IM s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">composite_has_been_sent IM s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk4b" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk4b"><span class="nb">cut</span> (has_been_sent X s m); [<span class="nb">intro</span>; <span class="bp">assumption</span>|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumed</var><span class="hyp-type"><b>: </b><span>preloaded_constraint_subsumption IM
  constraint composite_no_equivocations</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>composite_has_been_sent IM s m
‚à® composite_has_been_received IM s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">has_been_sent X s m</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk4c" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk4c"><span class="nb">apply</span> (observed_were_sent_invariant message X); [|<span class="bp">assumption</span>|<span class="bp">assumption</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumed</var><span class="hyp-type"><b>: </b><span>preloaded_constraint_subsumption IM
  constraint composite_no_equivocations</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>composite_has_been_sent IM s m
‚à® composite_has_been_received IM s m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state) (<span class="nv">om</span> : option message),
  input_valid (pre_loaded_with_all_messages_vlsm X) l
    (s, om) ‚Üí no_equivocations X l (s, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk4d" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk4d"><span class="nb">intros</span> l s0 om.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenReceivedCapability (IM i)</span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Hsubsumed</var><span class="hyp-type"><b>: </b><span>preloaded_constraint_subsumption IM
  constraint composite_no_equivocations</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>Hs</var><span class="hyp-type"><b>: </b><span>valid_state_prop X s</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>message</span></span></span><br><span><var>Hobs</var><span class="hyp-type"><b>: </b><span>composite_has_been_sent IM s m
‚à® composite_has_been_received IM s m</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>label</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>state</span></span></span><br><span><var>om</var><span class="hyp-type"><b>: </b><span>option message</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">input_valid (pre_loaded_with_all_messages_vlsm X) l
  (s0, om) ‚Üí no_equivocations X l (s0, om)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Hsubsumed.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">CompositeNoEquivocationInvariants</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">seeded_composite_vlsm_no_equivocation</span>.</span></span></pre><div class="doc">
<a id="lab4"></a><h2 class="section">Pre-loading a VLSM composition with no equivocations constraint</h2>
<div class="paragraph"> </div>

When adding initial messages to a VLSM composition with a no equivocation
constraint, we cannot simply use the <span class="inlinecode"><span class="id" title="var">pre_loaded_vlsm</span></span> construct
because the no-equivocation constraint must also be altered to reflect that
the newly added initial messages are safe to be received at all times.

</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
    (<span class="nv">X</span> := free_composite_vlsm IM)
    .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">seeded_composite_vlsm_no_equivocation_definition</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
    (<span class="nv">seed</span> : message -&gt; <span class="kt">Prop</span>)
    .</span></span></pre><div class="doc">
Constraint is updated to also allow seeded messages. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">no_equivocations_additional_constraint_with_pre_loaded</span>
    (<span class="nv">l</span> : composite_label IM)
    (<span class="nv">som</span> : composite_state IM * option message)
    :=
    composite_no_equivocations_except_from seed l som
    /\ constraint l som.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">composite_no_equivocation_vlsm_with_pre_loaded</span>
    : VLSM message
    :=
    pre_loaded_vlsm (composite_vlsm IM no_equivocations_additional_constraint_with_pre_loaded) seed.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk4e" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk4e"><span class="kn">Lemma</span> <span class="nf">seeded_no_equivocation_incl_preloaded</span>
    : VLSM_incl composite_no_equivocation_vlsm_with_pre_loaded (pre_loaded_with_all_messages_vlsm (free_composite_vlsm IM)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl
  composite_no_equivocation_vlsm_with_pre_loaded
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk4f" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk4f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl
  composite_no_equivocation_vlsm_with_pre_loaded
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk50" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk50"><span class="nb">unfold</span> composite_no_equivocation_vlsm_with_pre_loaded.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl
  (pre_loaded_vlsm
     (composite_vlsm IM
        no_equivocations_additional_constraint_with_pre_loaded)
     seed)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk51" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk51"><span class="kr">match goal with</span>
    |- VLSM_incl (pre_loaded_vlsm <span class="nl">?v</span> _) _ =&gt;
      <span class="nb">specialize</span> (pre_loaded_with_all_messages_vlsm_is_pre_loaded_with_True v) <span class="kr">as</span> Hprev
    <span class="kr">end</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>VLSM_eq
  (pre_loaded_with_all_messages_vlsm
     (composite_vlsm IM
        no_equivocations_additional_constraint_with_pre_loaded))
  (pre_loaded_vlsm
     (composite_vlsm IM
        no_equivocations_additional_constraint_with_pre_loaded)
     (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl
  (pre_loaded_vlsm
     (composite_vlsm IM
        no_equivocations_additional_constraint_with_pre_loaded)
     seed)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk52" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk52"><span class="nb">apply</span> VLSM_eq_incl_iff <span class="kr">in</span> Hprev.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>VLSM_incl
  {|
    vtype :=
      vtype
        (pre_loaded_with_all_messages_vlsm
           (composite_vlsm IM
              no_equivocations_additional_constraint_with_pre_loaded));
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        (composite_vlsm IM
           no_equivocations_additional_constraint_with_pre_loaded)
  |}
  {|
    vtype :=
      vtype
        (pre_loaded_with_all_messages_vlsm
           (composite_vlsm IM
              no_equivocations_additional_constraint_with_pre_loaded));
    vmachine :=
      VLSMMachine_pre_loaded_with_messages
        (vmachine
           (composite_vlsm IM
              no_equivocations_additional_constraint_with_pre_loaded))
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |}
‚àß VLSM_incl
    {|
      vtype :=
        vtype
          (pre_loaded_with_all_messages_vlsm
             (composite_vlsm IM
                no_equivocations_additional_constraint_with_pre_loaded));
      vmachine :=
        VLSMMachine_pre_loaded_with_messages
          (vmachine
             (composite_vlsm IM
                no_equivocations_additional_constraint_with_pre_loaded))
          (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
    |}
    {|
      vtype :=
        vtype
          (pre_loaded_with_all_messages_vlsm
             (composite_vlsm IM
                no_equivocations_additional_constraint_with_pre_loaded));
      vmachine :=
        pre_loaded_with_all_messages_vlsm_machine
          (composite_vlsm IM
             no_equivocations_additional_constraint_with_pre_loaded)
    |}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl
  (pre_loaded_vlsm
     (composite_vlsm IM
        no_equivocations_additional_constraint_with_pre_loaded)
     seed)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk53" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk53"><span class="nb">apply</span> proj2 <span class="kr">in</span> Hprev.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>VLSM_incl
  {|
    vtype :=
      vtype
        (pre_loaded_with_all_messages_vlsm
           (composite_vlsm IM
              no_equivocations_additional_constraint_with_pre_loaded));
    vmachine :=
      VLSMMachine_pre_loaded_with_messages
        (vmachine
           (composite_vlsm IM
              no_equivocations_additional_constraint_with_pre_loaded))
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |}
  {|
    vtype :=
      vtype
        (pre_loaded_with_all_messages_vlsm
           (composite_vlsm IM
              no_equivocations_additional_constraint_with_pre_loaded));
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        (composite_vlsm IM
           no_equivocations_additional_constraint_with_pre_loaded)
  |}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl
  (pre_loaded_vlsm
     (composite_vlsm IM
        no_equivocations_additional_constraint_with_pre_loaded)
     seed)
  (pre_loaded_with_all_messages_vlsm
     (free_composite_vlsm IM))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk54" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk54"><span class="kr">match</span> <span class="kp">type of</span> Hprev <span class="kr">with</span>
    | VLSM_incl (mk_vlsm <span class="nl">?m</span>) _ =&gt; <span class="nb">apply</span> VLSM_incl_trans <span class="kr">with</span> m
    <span class="kr">end</span>
    ; [<span class="nb">apply</span> pre_loaded_vlsm_incl; <span class="nb">intros</span>; <span class="bp">exact</span> I|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>VLSM_incl
  {|
    vtype :=
      vtype
        (pre_loaded_with_all_messages_vlsm
           (composite_vlsm IM
              no_equivocations_additional_constraint_with_pre_loaded));
    vmachine :=
      VLSMMachine_pre_loaded_with_messages
        (vmachine
           (composite_vlsm IM
              no_equivocations_additional_constraint_with_pre_loaded))
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |}
  {|
    vtype :=
      vtype
        (pre_loaded_with_all_messages_vlsm
           (composite_vlsm IM
              no_equivocations_additional_constraint_with_pre_loaded));
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        (composite_vlsm IM
           no_equivocations_additional_constraint_with_pre_loaded)
  |}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl
  {|
    vtype :=
      vtype
        (composite_vlsm IM
           no_equivocations_additional_constraint_with_pre_loaded);
    vmachine :=
      VLSMMachine_pre_loaded_with_messages
        (vmachine
           (composite_vlsm IM
              no_equivocations_additional_constraint_with_pre_loaded))
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |}
  {|
    vtype :=
      vtype
        (composite_vlsm IM
           no_equivocations_additional_constraint_with_pre_loaded);
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        (free_composite_vlsm IM)
  |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk55" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk55"><span class="kr">match</span> <span class="kp">type of</span> Hprev <span class="kr">with</span>
    | VLSM_incl _ (mk_vlsm <span class="nl">?m</span>) =&gt; <span class="nb">apply</span> VLSM_incl_trans <span class="kr">with</span> m
    <span class="kr">end</span>
    ; [<span class="bp">assumption</span>| ].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>VLSM_incl
  {|
    vtype :=
      vtype
        (pre_loaded_with_all_messages_vlsm
           (composite_vlsm IM
              no_equivocations_additional_constraint_with_pre_loaded));
    vmachine :=
      VLSMMachine_pre_loaded_with_messages
        (vmachine
           (composite_vlsm IM
              no_equivocations_additional_constraint_with_pre_loaded))
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |}
  {|
    vtype :=
      vtype
        (pre_loaded_with_all_messages_vlsm
           (composite_vlsm IM
              no_equivocations_additional_constraint_with_pre_loaded));
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        (composite_vlsm IM
           no_equivocations_additional_constraint_with_pre_loaded)
  |}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl
  {|
    vtype :=
      type
        (composite_vlsm IM
           no_equivocations_additional_constraint_with_pre_loaded);
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        (composite_vlsm IM
           no_equivocations_additional_constraint_with_pre_loaded)
  |}
  {|
    vtype :=
      type
        (composite_vlsm IM
           no_equivocations_additional_constraint_with_pre_loaded);
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        (free_composite_vlsm IM)
  |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk56" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk56"><span class="nb">unfold</span> free_composite_vlsm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>VLSM_incl
  {|
    vtype :=
      vtype
        (pre_loaded_with_all_messages_vlsm
           (composite_vlsm IM
              no_equivocations_additional_constraint_with_pre_loaded));
    vmachine :=
      VLSMMachine_pre_loaded_with_messages
        (vmachine
           (composite_vlsm IM
              no_equivocations_additional_constraint_with_pre_loaded))
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |}
  {|
    vtype :=
      vtype
        (pre_loaded_with_all_messages_vlsm
           (composite_vlsm IM
              no_equivocations_additional_constraint_with_pre_loaded));
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        (composite_vlsm IM
           no_equivocations_additional_constraint_with_pre_loaded)
  |}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl
  {|
    vtype :=
      type
        (composite_vlsm IM
           no_equivocations_additional_constraint_with_pre_loaded);
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        (composite_vlsm IM
           no_equivocations_additional_constraint_with_pre_loaded)
  |}
  {|
    vtype :=
      type
        (composite_vlsm IM
           no_equivocations_additional_constraint_with_pre_loaded);
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        (composite_vlsm IM (free_constraint IM))
  |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk57" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk57"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>VLSM_incl
  {|
    vtype :=
      vtype
        (pre_loaded_with_all_messages_vlsm
           (composite_vlsm IM
              no_equivocations_additional_constraint_with_pre_loaded));
    vmachine :=
      VLSMMachine_pre_loaded_with_messages
        (vmachine
           (composite_vlsm IM
              no_equivocations_additional_constraint_with_pre_loaded))
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |}
  {|
    vtype :=
      vtype
        (pre_loaded_with_all_messages_vlsm
           (composite_vlsm IM
              no_equivocations_additional_constraint_with_pre_loaded));
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        (composite_vlsm IM
           no_equivocations_additional_constraint_with_pre_loaded)
  |}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl_part
  (pre_loaded_with_all_messages_vlsm_machine
     (composite_vlsm IM
        no_equivocations_additional_constraint_with_pre_loaded))
  (pre_loaded_with_all_messages_vlsm_machine
     (composite_vlsm IM (free_constraint IM)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk58" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk58"><span class="nb">apply</span> preloaded_constraint_subsumption_incl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>VLSM_incl
  {|
    vtype :=
      vtype
        (pre_loaded_with_all_messages_vlsm
           (composite_vlsm IM
              no_equivocations_additional_constraint_with_pre_loaded));
    vmachine :=
      VLSMMachine_pre_loaded_with_messages
        (vmachine
           (composite_vlsm IM
              no_equivocations_additional_constraint_with_pre_loaded))
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |}
  {|
    vtype :=
      vtype
        (pre_loaded_with_all_messages_vlsm
           (composite_vlsm IM
              no_equivocations_additional_constraint_with_pre_loaded));
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        (composite_vlsm IM
           no_equivocations_additional_constraint_with_pre_loaded)
  |}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">preloaded_constraint_subsumption IM
  no_equivocations_additional_constraint_with_pre_loaded
  (free_constraint IM)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk59" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk59"><span class="nb">intro</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>VLSM_incl
  {|
    vtype :=
      vtype
        (pre_loaded_with_all_messages_vlsm
           (composite_vlsm IM
              no_equivocations_additional_constraint_with_pre_loaded));
    vmachine :=
      VLSMMachine_pre_loaded_with_messages
        (vmachine
           (composite_vlsm IM
              no_equivocations_additional_constraint_with_pre_loaded))
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |}
  {|
    vtype :=
      vtype
        (pre_loaded_with_all_messages_vlsm
           (composite_vlsm IM
              no_equivocations_additional_constraint_with_pre_loaded));
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        (composite_vlsm IM
           no_equivocations_additional_constraint_with_pre_loaded)
  |}</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">som</span> : state * option message,
  input_valid
    (pre_loaded_with_all_messages_vlsm
       (composite_vlsm IM
          no_equivocations_additional_constraint_with_pre_loaded))
    l som ‚Üí free_constraint IM l som</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk5a" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk5a"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>seed</var><span class="hyp-type"><b>: </b><span>message ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>Hprev</var><span class="hyp-type"><b>: </b><span>VLSM_incl
  {|
    vtype :=
      vtype
        (pre_loaded_with_all_messages_vlsm
           (composite_vlsm IM
              no_equivocations_additional_constraint_with_pre_loaded));
    vmachine :=
      VLSMMachine_pre_loaded_with_messages
        (vmachine
           (composite_vlsm IM
              no_equivocations_additional_constraint_with_pre_loaded))
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)
  |}
  {|
    vtype :=
      vtype
        (pre_loaded_with_all_messages_vlsm
           (composite_vlsm IM
              no_equivocations_additional_constraint_with_pre_loaded));
    vmachine :=
      pre_loaded_with_all_messages_vlsm_machine
        (composite_vlsm IM
           no_equivocations_additional_constraint_with_pre_loaded)
  |}</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>composite_label IM</span></span></span><br><span><var>som</var><span class="hyp-type"><b>: </b><span>(state * option message)%type</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>input_valid
  (pre_loaded_with_all_messages_vlsm
     (composite_vlsm IM
        no_equivocations_additional_constraint_with_pre_loaded))
  l som</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">free_constraint IM l som</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> I.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">seeded_composite_vlsm_no_equivocation_definition</span>.</span></span></pre><div class="doc">
Adds a no-equivocations condition on top of an existing constraint. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">no_equivocations_additional_constraint</span>
    (<span class="nv">l</span> : composite_label IM)
    (<span class="nv">som</span> : composite_state IM * option message)
    :=
    composite_no_equivocations l som
    /\ constraint l som.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
    (<span class="nv">SeededNoeqvFalse</span> := composite_no_equivocation_vlsm_with_pre_loaded (<span class="kr">fun</span> <span class="nv">m</span> =&gt; <span class="kt">False</span>))
    (<span class="nv">Noeqv</span> := composite_vlsm IM no_equivocations_additional_constraint)
    (<span class="nv">SeededNoeqvTrue</span> := composite_no_equivocation_vlsm_with_pre_loaded (<span class="kr">fun</span> <span class="nv">m</span> =&gt; <span class="kt">True</span>))
    (<span class="nv">PreFree</span> := pre_loaded_with_all_messages_vlsm (free_composite_vlsm IM))
    .</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk5b" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk5b"><span class="kn">Lemma</span> <span class="nf">false_composite_no_equivocation_vlsm_with_pre_loaded</span>
    : VLSM_eq SeededNoeqvFalse Noeqv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SeededNoeqvFalse</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Noeqv</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM
  no_equivocations_additional_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SeededNoeqvTrue</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_eq SeededNoeqvFalse Noeqv</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk5c" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk5c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SeededNoeqvFalse</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Noeqv</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM
  no_equivocations_additional_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SeededNoeqvTrue</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_eq SeededNoeqvFalse Noeqv</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk5d" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk5d"><span class="nb">unfold</span> SeededNoeqvFalse.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SeededNoeqvFalse</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Noeqv</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM
  no_equivocations_additional_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SeededNoeqvTrue</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_eq
  (composite_no_equivocation_vlsm_with_pre_loaded
     (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>)) Noeqv</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk5e" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk5e"><span class="nb">unfold</span> composite_no_equivocation_vlsm_with_pre_loaded.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SeededNoeqvFalse</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Noeqv</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM
  no_equivocations_additional_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SeededNoeqvTrue</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_eq
  (pre_loaded_vlsm
     (composite_vlsm IM
        (no_equivocations_additional_constraint_with_pre_loaded
           (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>)))
     (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>)) Noeqv</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk5f" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk5f"><span class="kr">match goal with</span>
    |- VLSM_eq (pre_loaded_vlsm <span class="nl">?m</span> _) _ =&gt; <span class="nb">specialize</span> (vlsm_is_pre_loaded_with_False m) <span class="kr">as</span> Heq
    <span class="kr">end</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SeededNoeqvFalse</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Noeqv</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM
  no_equivocations_additional_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SeededNoeqvTrue</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>VLSM_eq
  (composite_vlsm IM
     (no_equivocations_additional_constraint_with_pre_loaded
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>)))
  (pre_loaded_vlsm
     (composite_vlsm IM
        (no_equivocations_additional_constraint_with_pre_loaded
           (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>)))
     (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_eq
  (pre_loaded_vlsm
     (composite_vlsm IM
        (no_equivocations_additional_constraint_with_pre_loaded
           (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>)))
     (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>)) Noeqv</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk60" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk60"><span class="nb">apply</span> VLSM_eq_sym <span class="kr">in</span> Heq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SeededNoeqvFalse</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Noeqv</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM
  no_equivocations_additional_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SeededNoeqvTrue</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>VLSM_eq
  {|
    vtype := composite_type IM;
    vmachine :=
      VLSMMachine_pre_loaded_with_messages
        (vmachine
           (composite_vlsm IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>))))
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>)
  |}
  {|
    vtype := composite_type IM;
    vmachine :=
      composite_vlsm_machine IM
        (no_equivocations_additional_constraint_with_pre_loaded
           (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>))
  |}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_eq
  (pre_loaded_vlsm
     (composite_vlsm IM
        (no_equivocations_additional_constraint_with_pre_loaded
           (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>)))
     (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>)) Noeqv</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk61" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk61"><span class="kr">match</span> <span class="kp">type of</span> Heq <span class="kr">with</span>
    | VLSM_eq _ <span class="nl">?v</span> =&gt; <span class="nb">apply</span> VLSM_eq_trans <span class="kr">with</span> (machine v)
    <span class="kr">end</span>
    ; [<span class="bp">assumption</span>|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SeededNoeqvFalse</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Noeqv</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM
  no_equivocations_additional_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SeededNoeqvTrue</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>VLSM_eq
  {|
    vtype := composite_type IM;
    vmachine :=
      VLSMMachine_pre_loaded_with_messages
        (vmachine
           (composite_vlsm IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>))))
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>)
  |}
  {|
    vtype := composite_type IM;
    vmachine :=
      composite_vlsm_machine IM
        (no_equivocations_additional_constraint_with_pre_loaded
           (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>))
  |}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_eq
  {|
    vtype :=
      vtype
        {|
          vtype := composite_type IM;
          vmachine :=
            composite_vlsm_machine IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>))
        |};
    vmachine :=
      machine
        {|
          vtype := composite_type IM;
          vmachine :=
            composite_vlsm_machine IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>))
        |}
  |}
  {|
    vtype :=
      vtype
        {|
          vtype := composite_type IM;
          vmachine :=
            composite_vlsm_machine IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>))
        |};
    vmachine :=
      composite_vlsm_machine IM
        no_equivocations_additional_constraint
  |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk62" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk62"><span class="nb">apply</span> VLSM_eq_incl_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SeededNoeqvFalse</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Noeqv</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM
  no_equivocations_additional_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SeededNoeqvTrue</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>VLSM_eq
  {|
    vtype := composite_type IM;
    vmachine :=
      VLSMMachine_pre_loaded_with_messages
        (vmachine
           (composite_vlsm IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>))))
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>)
  |}
  {|
    vtype := composite_type IM;
    vmachine :=
      composite_vlsm_machine IM
        (no_equivocations_additional_constraint_with_pre_loaded
           (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>))
  |}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl
  {|
    vtype :=
      vtype
        {|
          vtype :=
            vtype
              {|
                vtype := composite_type IM;
                vmachine :=
                  composite_vlsm_machine IM
                    (no_equivocations_additional_constraint_with_pre_loaded
                       (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>))
              |};
          vmachine :=
            machine
              {|
                vtype := composite_type IM;
                vmachine :=
                  composite_vlsm_machine IM
                    (no_equivocations_additional_constraint_with_pre_loaded
                       (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>))
              |}
        |};
    vmachine :=
      machine
        {|
          vtype := composite_type IM;
          vmachine :=
            composite_vlsm_machine IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>))
        |}
  |}
  {|
    vtype :=
      vtype
        {|
          vtype :=
            vtype
              {|
                vtype := composite_type IM;
                vmachine :=
                  composite_vlsm_machine IM
                    (no_equivocations_additional_constraint_with_pre_loaded
                       (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>))
              |};
          vmachine :=
            machine
              {|
                vtype := composite_type IM;
                vmachine :=
                  composite_vlsm_machine IM
                    (no_equivocations_additional_constraint_with_pre_loaded
                       (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>))
              |}
        |};
    vmachine :=
      composite_vlsm_machine IM
        no_equivocations_additional_constraint
  |}
‚àß VLSM_incl
    {|
      vtype :=
        vtype
          {|
            vtype :=
              vtype
                {|
                  vtype := composite_type IM;
                  vmachine :=
                    composite_vlsm_machine IM
                      (no_equivocations_additional_constraint_with_pre_loaded
                         (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>))
                |};
            vmachine :=
              machine
                {|
                  vtype := composite_type IM;
                  vmachine :=
                    composite_vlsm_machine IM
                      (no_equivocations_additional_constraint_with_pre_loaded
                         (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>))
                |}
          |};
      vmachine :=
        composite_vlsm_machine IM
          no_equivocations_additional_constraint
    |}
    {|
      vtype :=
        vtype
          {|
            vtype :=
              vtype
                {|
                  vtype := composite_type IM;
                  vmachine :=
                    composite_vlsm_machine IM
                      (no_equivocations_additional_constraint_with_pre_loaded
                         (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>))
                |};
            vmachine :=
              machine
                {|
                  vtype := composite_type IM;
                  vmachine :=
                    composite_vlsm_machine IM
                      (no_equivocations_additional_constraint_with_pre_loaded
                         (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>))
                |}
          |};
      vmachine :=
        machine
          {|
            vtype := composite_type IM;
            vmachine :=
              composite_vlsm_machine IM
                (no_equivocations_additional_constraint_with_pre_loaded
                   (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>))
          |}
    |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk63" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk63"><span class="nb">specialize</span> (constraint_subsumption_incl IM) <span class="kr">as</span> Hincl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SeededNoeqvFalse</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Noeqv</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM
  no_equivocations_additional_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SeededNoeqvTrue</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>VLSM_eq
  {|
    vtype := composite_type IM;
    vmachine :=
      VLSMMachine_pre_loaded_with_messages
        (vmachine
           (composite_vlsm IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>))))
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>)
  |}
  {|
    vtype := composite_type IM;
    vmachine :=
      composite_vlsm_machine IM
        (no_equivocations_additional_constraint_with_pre_loaded
           (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>))
  |}</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">constraint1</span>
   <span class="nv">constraint2</span> : composite_label IM
                 ‚Üí composite_state IM *
                   option message ‚Üí <span class="kt">Prop</span>,
  input_valid_constraint_subsumption IM
    constraint1 constraint2
  ‚Üí VLSM_incl (composite_vlsm IM constraint1)
      (composite_vlsm IM constraint2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl
  {|
    vtype :=
      vtype
        {|
          vtype :=
            vtype
              {|
                vtype := composite_type IM;
                vmachine :=
                  composite_vlsm_machine IM
                    (no_equivocations_additional_constraint_with_pre_loaded
                       (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>))
              |};
          vmachine :=
            machine
              {|
                vtype := composite_type IM;
                vmachine :=
                  composite_vlsm_machine IM
                    (no_equivocations_additional_constraint_with_pre_loaded
                       (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>))
              |}
        |};
    vmachine :=
      machine
        {|
          vtype := composite_type IM;
          vmachine :=
            composite_vlsm_machine IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>))
        |}
  |}
  {|
    vtype :=
      vtype
        {|
          vtype :=
            vtype
              {|
                vtype := composite_type IM;
                vmachine :=
                  composite_vlsm_machine IM
                    (no_equivocations_additional_constraint_with_pre_loaded
                       (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>))
              |};
          vmachine :=
            machine
              {|
                vtype := composite_type IM;
                vmachine :=
                  composite_vlsm_machine IM
                    (no_equivocations_additional_constraint_with_pre_loaded
                       (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>))
              |}
        |};
    vmachine :=
      composite_vlsm_machine IM
        no_equivocations_additional_constraint
  |}
‚àß VLSM_incl
    {|
      vtype :=
        vtype
          {|
            vtype :=
              vtype
                {|
                  vtype := composite_type IM;
                  vmachine :=
                    composite_vlsm_machine IM
                      (no_equivocations_additional_constraint_with_pre_loaded
                         (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>))
                |};
            vmachine :=
              machine
                {|
                  vtype := composite_type IM;
                  vmachine :=
                    composite_vlsm_machine IM
                      (no_equivocations_additional_constraint_with_pre_loaded
                         (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>))
                |}
          |};
      vmachine :=
        composite_vlsm_machine IM
          no_equivocations_additional_constraint
    |}
    {|
      vtype :=
        vtype
          {|
            vtype :=
              vtype
                {|
                  vtype := composite_type IM;
                  vmachine :=
                    composite_vlsm_machine IM
                      (no_equivocations_additional_constraint_with_pre_loaded
                         (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>))
                |};
            vmachine :=
              machine
                {|
                  vtype := composite_type IM;
                  vmachine :=
                    composite_vlsm_machine IM
                      (no_equivocations_additional_constraint_with_pre_loaded
                         (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>))
                |}
          |};
      vmachine :=
        machine
          {|
            vtype := composite_type IM;
            vmachine :=
              composite_vlsm_machine IM
                (no_equivocations_additional_constraint_with_pre_loaded
                   (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>))
          |}
    |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="NoEquivocation-v-chk64" style="display: none" type="checkbox"><label class="alectryon-input" for="NoEquivocation-v-chk64"><span class="nb">unfold</span> no_equivocations_additional_constraint_with_pre_loaded.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>message, index</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>EqDecision0</var><span class="hyp-type"><b>: </b><span>EqDecision index</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>finite.Finite index</span></span></span><br><span><var>IM</var><span class="hyp-type"><b>: </b><span>index ‚Üí VLSM message</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">i</span> : index, HasBeenSentCapability (IM i)</span></span></span><br><span><var>constraint</var><span class="hyp-type"><b>: </b><span>composite_label IM
‚Üí composite_state IM * option message
  ‚Üí <span class="kt">Prop</span></span></span></span><br><span><var>X</var><span><span class="hyp-body"><b>:= </b><span>free_composite_vlsm IM</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SeededNoeqvFalse</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Noeqv</var><span><span class="hyp-body"><b>:= </b><span>composite_vlsm IM
  no_equivocations_additional_constraint</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>SeededNoeqvTrue</var><span><span class="hyp-body"><b>:= </b><span>composite_no_equivocation_vlsm_with_pre_loaded
  (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">True</span>)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>PreFree</var><span><span class="hyp-body"><b>:= </b><span>pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span><span class="hyp-type"><b>: </b><span>VLSM message</span></span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>VLSM_eq
  {|
    vtype := composite_type IM;
    vmachine :=
      VLSMMachine_pre_loaded_with_messages
        (vmachine
           (composite_vlsm IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>))))
        (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>)
  |}
  {|
    vtype := composite_type IM;
    vmachine :=
      composite_vlsm_machine IM
        (no_equivocations_additional_constraint_with_pre_loaded
           (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>))
  |}</span></span></span><br><span><var>Hincl</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">constraint1</span>
   <span class="nv">constraint2</span> : composite_label IM
                 ‚Üí composite_state IM *
                   option message ‚Üí <span class="kt">Prop</span>,
  input_valid_constraint_subsumption IM
    constraint1 constraint2
  ‚Üí VLSM_incl (composite_vlsm IM constraint1)
      (composite_vlsm IM constraint2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">VLSM_incl
  {|
    vtype :=
      vtype
        {|
          vtype :=
            vtype
              {|
                vtype := composite_type IM;
                vmachine :=
                  composite_vlsm_machine IM
                    (<span class="kr">Œª</span> (<span class="nv">l</span> : composite_label IM) (<span class="nv">som</span> : 
                                                 composite_state
                                                 IM *
                                                 option
                                                 message),
                       composite_no_equivocations_except_from
                         (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>) l som
                       ‚àß constraint l som)
              |};
          vmachine :=
            machine
              {|
                vtype := composite_type IM;
                vmachine :=
                  composite_vlsm_machine IM
                    (<span class="kr">Œª</span> (<span class="nv">l</span> : composite_label IM) (<span class="nv">som</span> : 
                                                 composite_state
                                                 IM *
                                                 option
                                                 message),
                       composite_no_equivocations_except_from
                         (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>) l som
                       ‚àß constraint l som)
              |}
        |};
    vmachine :=
      machine
        {|
          vtype := composite_type IM;
          vmachine :=
            composite_vlsm_machine IM
              (<span class="kr">Œª</span> (<span class="nv">l</span> : composite_label IM) (<span class="nv">som</span> : composite_state
                                                 IM *
                                                 option
                                                 message),
                 composite_no_equivocations_except_from
                   (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>) l som
                 ‚àß constraint l som)
        |}
  |}
  {|
    vtype :=
      vtype
        {|
          vtype :=
            vtype
              {|
                vtype := composite_type IM;
                vmachine :=
                  composite_vlsm_machine IM
                    (<span class="kr">Œª</span> (<span class="nv">l</span> : composite_label IM) (<span class="nv">som</span> : 
                                                 composite_state
                                                 IM *
                                                 option
                                                 message),
                       composite_no_equivocations_except_from
                         (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>) l som
                       ‚àß constraint l som)
              |};
          vmachine :=
            machine
              {|
                vtype := composite_type IM;
                vmachine :=
                  composite_vlsm_machine IM
                    (<span class="kr">Œª</span> (<span class="nv">l</span> : composite_label IM) (<span class="nv">som</span> : 
                                                 composite_state
                                                 IM *
                                                 option
                                                 message),
                       composite_no_equivocations_except_from
                         (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>) l som
                       ‚àß constraint l som)
              |}
        |};
    vmachine :=
      composite_vlsm_machine IM
        no_equivocations_additional_constraint
  |}
‚àß VLSM_incl
    {|
      vtype :=
        vtype
          {|
            vtype :=
              vtype
                {|
                  vtype := composite_type IM;
                  vmachine :=
                    composite_vlsm_machine IM
                      (<span class="kr">Œª</span> (<span class="nv">l</span> : composite_label IM) 
                         (<span class="nv">som</span> : composite_state IM *
                                option message),
                         composite_no_equivocations_except_from
                           (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>) l
                           som ‚àß constraint l som)
                |};
            vmachine :=
              machine
                {|
                  vtype := composite_type IM;
                  vmachine :=
                    composite_vlsm_machine IM
                      (<span class="kr">Œª</span> (<span class="nv">l</span> : composite_label IM) 
                         (<span class="nv">som</span> : composite_state IM *
                                option message),
                         composite_no_equivocations_except_from
                           (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>) l
                           som ‚àß constraint l som)
                |}
          |};
      vmachine :=
        composite_vlsm_machine IM
          no_equivocations_additional_constraint
    |}
    {|
      vtype :=
        vtype
          {|
            vtype :=
              vtype
                {|
                  vtype := composite_type IM;
                  vmachine :=
                    composite_vlsm_machine IM
                      (<span class="kr">Œª</span> (<span class="nv">l</span> : composite_label IM) 
                         (<span class="nv">som</span> : composite_state IM *
                                option message),
                         composite_no_equivocations_except_from
                           (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>) l
                           som ‚àß constraint l som)
                |};
            vmachine :=
              machine
                {|
                  vtype := composite_type IM;
                  vmachine :=
                    composite_vlsm_machine IM
                      (<span class="kr">Œª</span> (<span class="nv">l</span> : composite_label IM) 
                         (<span class="nv">som</span> : composite_state IM *
                                option message),
                         composite_no_equivocations_except_from
                           (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>) l
                           som ‚àß constraint l som)
                |}
          |};
      vmachine :=
        machine
          {|
            vtype := composite_type IM;
            vmachine :=
              composite_vlsm_machine IM
                (<span class="kr">Œª</span> (<span class="nv">l</span> : composite_label IM) (<span class="nv">som</span> : 
                                             composite_state
                                               IM *
                                             option
                                               message),
                   composite_no_equivocations_except_from
                     (<span class="kr">Œª</span> <span class="nv">_</span> : message, <span class="kt">False</span>) l som
                   ‚àß constraint l som)
          |}
    |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">split</span>;<span class="nb">apply</span> Hincl;<span class="nb">intros</span> l [s [m|]] Hpv; <span class="nb">apply</span> Hpv.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">seeded_composite_vlsm_no_equivocation</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">CompositeNoEquivocation</span>.</span></span></pre></article></body></html>